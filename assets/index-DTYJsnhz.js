var Ux=e=>{throw TypeError(e)};var Bf=(e,t,r)=>t.has(e)||Ux("Cannot "+r);var T=(e,t,r)=>(Bf(e,t,"read from private field"),r?r.call(e):t.get(e)),xe=(e,t,r)=>t.has(e)?Ux("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ce=(e,t,r,n)=>(Bf(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Re=(e,t,r)=>(Bf(e,t,"access private method"),r);var Cu=(e,t,r,n)=>({set _(s){ce(e,t,s,r)},get _(){return T(e,t,n)}});function fP(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();function a_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var o_={exports:{}},Eh={},l_={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gc=Symbol.for("react.element"),pP=Symbol.for("react.portal"),mP=Symbol.for("react.fragment"),gP=Symbol.for("react.strict_mode"),vP=Symbol.for("react.profiler"),yP=Symbol.for("react.provider"),xP=Symbol.for("react.context"),wP=Symbol.for("react.forward_ref"),bP=Symbol.for("react.suspense"),_P=Symbol.for("react.memo"),jP=Symbol.for("react.lazy"),Bx=Symbol.iterator;function SP(e){return e===null||typeof e!="object"?null:(e=Bx&&e[Bx]||e["@@iterator"],typeof e=="function"?e:null)}var c_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},u_=Object.assign,d_={};function Jo(e,t,r){this.props=e,this.context=t,this.refs=d_,this.updater=r||c_}Jo.prototype.isReactComponent={};Jo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Jo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function h_(){}h_.prototype=Jo.prototype;function Wg(e,t,r){this.props=e,this.context=t,this.refs=d_,this.updater=r||c_}var Vg=Wg.prototype=new h_;Vg.constructor=Wg;u_(Vg,Jo.prototype);Vg.isPureReactComponent=!0;var zx=Array.isArray,f_=Object.prototype.hasOwnProperty,Hg={current:null},p_={key:!0,ref:!0,__self:!0,__source:!0};function m_(e,t,r){var n,s={},a=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)f_.call(t,n)&&!p_.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Gc,type:e,key:a,ref:o,props:s,_owner:Hg.current}}function NP(e,t){return{$$typeof:Gc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Kg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Gc}function kP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var qx=/\/+/g;function zf(e,t){return typeof e=="object"&&e!==null&&e.key!=null?kP(""+e.key):t.toString(36)}function ad(e,t,r,n,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Gc:case pP:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+zf(o,0):n,zx(s)?(r="",e!=null&&(r=e.replace(qx,"$&/")+"/"),ad(s,t,r,"",function(u){return u})):s!=null&&(Kg(s)&&(s=NP(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(qx,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",zx(e))for(var l=0;l<e.length;l++){a=e[l];var c=n+zf(a,l);o+=ad(a,t,r,c,s)}else if(c=SP(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=n+zf(a,l++),o+=ad(a,t,r,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Eu(e,t,r){if(e==null)return e;var n=[],s=0;return ad(e,n,"","",function(a){return t.call(r,a,s++)}),n}function CP(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var mr={current:null},od={transition:null},EP={ReactCurrentDispatcher:mr,ReactCurrentBatchConfig:od,ReactCurrentOwner:Hg};function g_(){throw Error("act(...) is not supported in production builds of React.")}Le.Children={map:Eu,forEach:function(e,t,r){Eu(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Eu(e,function(){t++}),t},toArray:function(e){return Eu(e,function(t){return t})||[]},only:function(e){if(!Kg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Le.Component=Jo;Le.Fragment=mP;Le.Profiler=vP;Le.PureComponent=Wg;Le.StrictMode=gP;Le.Suspense=bP;Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EP;Le.act=g_;Le.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=u_({},e.props),s=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=Hg.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)f_.call(t,c)&&!p_.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Gc,type:e.type,key:s,ref:a,props:n,_owner:o}};Le.createContext=function(e){return e={$$typeof:xP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yP,_context:e},e.Consumer=e};Le.createElement=m_;Le.createFactory=function(e){var t=m_.bind(null,e);return t.type=e,t};Le.createRef=function(){return{current:null}};Le.forwardRef=function(e){return{$$typeof:wP,render:e}};Le.isValidElement=Kg;Le.lazy=function(e){return{$$typeof:jP,_payload:{_status:-1,_result:e},_init:CP}};Le.memo=function(e,t){return{$$typeof:_P,type:e,compare:t===void 0?null:t}};Le.startTransition=function(e){var t=od.transition;od.transition={};try{e()}finally{od.transition=t}};Le.unstable_act=g_;Le.useCallback=function(e,t){return mr.current.useCallback(e,t)};Le.useContext=function(e){return mr.current.useContext(e)};Le.useDebugValue=function(){};Le.useDeferredValue=function(e){return mr.current.useDeferredValue(e)};Le.useEffect=function(e,t){return mr.current.useEffect(e,t)};Le.useId=function(){return mr.current.useId()};Le.useImperativeHandle=function(e,t,r){return mr.current.useImperativeHandle(e,t,r)};Le.useInsertionEffect=function(e,t){return mr.current.useInsertionEffect(e,t)};Le.useLayoutEffect=function(e,t){return mr.current.useLayoutEffect(e,t)};Le.useMemo=function(e,t){return mr.current.useMemo(e,t)};Le.useReducer=function(e,t,r){return mr.current.useReducer(e,t,r)};Le.useRef=function(e){return mr.current.useRef(e)};Le.useState=function(e){return mr.current.useState(e)};Le.useSyncExternalStore=function(e,t,r){return mr.current.useSyncExternalStore(e,t,r)};Le.useTransition=function(){return mr.current.useTransition()};Le.version="18.3.1";l_.exports=Le;var d=l_.exports;const Y=a_(d),Gg=fP({__proto__:null,default:Y},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TP=d,PP=Symbol.for("react.element"),RP=Symbol.for("react.fragment"),AP=Object.prototype.hasOwnProperty,IP=TP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,OP={key:!0,ref:!0,__self:!0,__source:!0};function v_(e,t,r){var n,s={},a=null,o=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)AP.call(t,n)&&!OP.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:PP,type:e,key:a,ref:o,props:s,_owner:IP.current}}Eh.Fragment=RP;Eh.jsx=v_;Eh.jsxs=v_;o_.exports=Eh;var i=o_.exports,y_={exports:{}},Vr={},x_={exports:{}},w_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,P){var V=A.length;A.push(P);e:for(;0<V;){var J=V-1>>>1,L=A[J];if(0<s(L,P))A[J]=P,A[V]=L,V=J;else break e}}function r(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var P=A[0],V=A.pop();if(V!==P){A[0]=V;e:for(var J=0,L=A.length,Q=L>>>1;J<Q;){var q=2*(J+1)-1,K=A[q],te=q+1,W=A[te];if(0>s(K,V))te<L&&0>s(W,K)?(A[J]=W,A[te]=V,J=te):(A[J]=K,A[q]=V,J=q);else if(te<L&&0>s(W,V))A[J]=W,A[te]=V,J=te;else break e}}return P}function s(A,P){var V=A.sortIndex-P.sortIndex;return V!==0?V:A.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,f=null,p=3,m=!1,w=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(A){for(var P=r(u);P!==null;){if(P.callback===null)n(u);else if(P.startTime<=A)n(u),P.sortIndex=P.expirationTime,t(c,P);else break;P=r(u)}}function _(A){if(g=!1,b(A),!w)if(r(c)!==null)w=!0,I(S);else{var P=r(u);P!==null&&z(_,P.startTime-A)}}function S(A,P){w=!1,g&&(g=!1,y(k),k=-1),m=!0;var V=p;try{for(b(P),f=r(c);f!==null&&(!(f.expirationTime>P)||A&&!$());){var J=f.callback;if(typeof J=="function"){f.callback=null,p=f.priorityLevel;var L=J(f.expirationTime<=P);P=e.unstable_now(),typeof L=="function"?f.callback=L:f===r(c)&&n(c),b(P)}else n(c);f=r(c)}if(f!==null)var Q=!0;else{var q=r(u);q!==null&&z(_,q.startTime-P),Q=!1}return Q}finally{f=null,p=V,m=!1}}var j=!1,N=null,k=-1,R=5,E=-1;function $(){return!(e.unstable_now()-E<R)}function M(){if(N!==null){var A=e.unstable_now();E=A;var P=!0;try{P=N(!0,A)}finally{P?O():(j=!1,N=null)}}else j=!1}var O;if(typeof x=="function")O=function(){x(M)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,D=C.port2;C.port1.onmessage=M,O=function(){D.postMessage(null)}}else O=function(){v(M,0)};function I(A){N=A,j||(j=!0,O())}function z(A,P){k=v(function(){A(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){w||m||(w=!0,I(S))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(A){switch(p){case 1:case 2:case 3:var P=3;break;default:P=p}var V=p;p=P;try{return A()}finally{p=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,P){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var V=p;p=A;try{return P()}finally{p=V}},e.unstable_scheduleCallback=function(A,P,V){var J=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?J+V:J):V=J,A){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=V+L,A={id:h++,callback:P,priorityLevel:A,startTime:V,expirationTime:L,sortIndex:-1},V>J?(A.sortIndex=V,t(u,A),r(c)===null&&A===r(u)&&(g?(y(k),k=-1):g=!0,z(_,V-J))):(A.sortIndex=L,t(c,A),w||m||(w=!0,I(S))),A},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(A){var P=p;return function(){var V=p;p=P;try{return A.apply(this,arguments)}finally{p=V}}}})(w_);x_.exports=w_;var MP=x_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DP=d,Wr=MP;function ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var b_=new Set,lc={};function ba(e,t){Lo(e,t),Lo(e+"Capture",t)}function Lo(e,t){for(lc[e]=t,e=0;e<t.length;e++)b_.add(t[e])}var fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gp=Object.prototype.hasOwnProperty,LP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wx={},Vx={};function $P(e){return Gp.call(Vx,e)?!0:Gp.call(Wx,e)?!1:LP.test(e)?Vx[e]=!0:(Wx[e]=!0,!1)}function FP(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function UP(e,t,r,n){if(t===null||typeof t>"u"||FP(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gr(e,t,r,n,s,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Yt[e]=new gr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Yt[t]=new gr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Yt[e]=new gr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Yt[e]=new gr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Yt[e]=new gr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Yt[e]=new gr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Yt[e]=new gr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Yt[e]=new gr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Yt[e]=new gr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Yg=/[\-:]([a-z])/g;function Qg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Yg,Qg);Yt[t]=new gr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Yg,Qg);Yt[t]=new gr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Yg,Qg);Yt[t]=new gr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Yt[e]=new gr(e,1,!1,e.toLowerCase(),null,!1,!1)});Yt.xlinkHref=new gr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Yt[e]=new gr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Jg(e,t,r,n){var s=Yt.hasOwnProperty(t)?Yt[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(UP(t,r,s,n)&&(r=null),n||s===null?$P(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var _s=DP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tu=Symbol.for("react.element"),Xa=Symbol.for("react.portal"),Za=Symbol.for("react.fragment"),Xg=Symbol.for("react.strict_mode"),Yp=Symbol.for("react.profiler"),__=Symbol.for("react.provider"),j_=Symbol.for("react.context"),Zg=Symbol.for("react.forward_ref"),Qp=Symbol.for("react.suspense"),Jp=Symbol.for("react.suspense_list"),ev=Symbol.for("react.memo"),Is=Symbol.for("react.lazy"),S_=Symbol.for("react.offscreen"),Hx=Symbol.iterator;function _l(e){return e===null||typeof e!="object"?null:(e=Hx&&e[Hx]||e["@@iterator"],typeof e=="function"?e:null)}var dt=Object.assign,qf;function $l(e){if(qf===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);qf=t&&t[1]||""}return`
`+qf+e}var Wf=!1;function Vf(e,t){if(!e||Wf)return"";Wf=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=n.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Wf=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?$l(e):""}function BP(e){switch(e.tag){case 5:return $l(e.type);case 16:return $l("Lazy");case 13:return $l("Suspense");case 19:return $l("SuspenseList");case 0:case 2:case 15:return e=Vf(e.type,!1),e;case 11:return e=Vf(e.type.render,!1),e;case 1:return e=Vf(e.type,!0),e;default:return""}}function Xp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Za:return"Fragment";case Xa:return"Portal";case Yp:return"Profiler";case Xg:return"StrictMode";case Qp:return"Suspense";case Jp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case j_:return(e.displayName||"Context")+".Consumer";case __:return(e._context.displayName||"Context")+".Provider";case Zg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ev:return t=e.displayName||null,t!==null?t:Xp(e.type)||"Memo";case Is:t=e._payload,e=e._init;try{return Xp(e(t))}catch{}}return null}function zP(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xp(t);case 8:return t===Xg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function di(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function N_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qP(e){var t=N_(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pu(e){e._valueTracker||(e._valueTracker=qP(e))}function k_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=N_(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Nd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Zp(e,t){var r=t.checked;return dt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Kx(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=di(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function C_(e,t){t=t.checked,t!=null&&Jg(e,"checked",t,!1)}function em(e,t){C_(e,t);var r=di(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?tm(e,t.type,r):t.hasOwnProperty("defaultValue")&&tm(e,t.type,di(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Gx(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function tm(e,t,r){(t!=="number"||Nd(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Fl=Array.isArray;function fo(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+di(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function rm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ee(91));return dt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Yx(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ee(92));if(Fl(r)){if(1<r.length)throw Error(ee(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:di(r)}}function E_(e,t){var r=di(t.value),n=di(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Qx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function T_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?T_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ru,P_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ru=Ru||document.createElement("div"),Ru.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ru.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function cc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Hl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WP=["Webkit","ms","Moz","O"];Object.keys(Hl).forEach(function(e){WP.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hl[t]=Hl[e]})});function R_(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Hl.hasOwnProperty(e)&&Hl[e]?(""+t).trim():t+"px"}function A_(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=R_(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var VP=dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sm(e,t){if(t){if(VP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ee(62))}}function im(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var am=null;function tv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var om=null,po=null,mo=null;function Jx(e){if(e=Jc(e)){if(typeof om!="function")throw Error(ee(280));var t=e.stateNode;t&&(t=Ih(t),om(e.stateNode,e.type,t))}}function I_(e){po?mo?mo.push(e):mo=[e]:po=e}function O_(){if(po){var e=po,t=mo;if(mo=po=null,Jx(e),t)for(e=0;e<t.length;e++)Jx(t[e])}}function M_(e,t){return e(t)}function D_(){}var Hf=!1;function L_(e,t,r){if(Hf)return e(t,r);Hf=!0;try{return M_(e,t,r)}finally{Hf=!1,(po!==null||mo!==null)&&(D_(),O_())}}function uc(e,t){var r=e.stateNode;if(r===null)return null;var n=Ih(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ee(231,t,typeof r));return r}var lm=!1;if(fs)try{var jl={};Object.defineProperty(jl,"passive",{get:function(){lm=!0}}),window.addEventListener("test",jl,jl),window.removeEventListener("test",jl,jl)}catch{lm=!1}function HP(e,t,r,n,s,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(h){this.onError(h)}}var Kl=!1,kd=null,Cd=!1,cm=null,KP={onError:function(e){Kl=!0,kd=e}};function GP(e,t,r,n,s,a,o,l,c){Kl=!1,kd=null,HP.apply(KP,arguments)}function YP(e,t,r,n,s,a,o,l,c){if(GP.apply(this,arguments),Kl){if(Kl){var u=kd;Kl=!1,kd=null}else throw Error(ee(198));Cd||(Cd=!0,cm=u)}}function _a(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function $_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Xx(e){if(_a(e)!==e)throw Error(ee(188))}function QP(e){var t=e.alternate;if(!t){if(t=_a(e),t===null)throw Error(ee(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return Xx(s),e;if(a===n)return Xx(s),t;a=a.sibling}throw Error(ee(188))}if(r.return!==n.return)r=s,n=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o)throw Error(ee(189))}}if(r.alternate!==n)throw Error(ee(190))}if(r.tag!==3)throw Error(ee(188));return r.stateNode.current===r?e:t}function F_(e){return e=QP(e),e!==null?U_(e):null}function U_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=U_(e);if(t!==null)return t;e=e.sibling}return null}var B_=Wr.unstable_scheduleCallback,Zx=Wr.unstable_cancelCallback,JP=Wr.unstable_shouldYield,XP=Wr.unstable_requestPaint,xt=Wr.unstable_now,ZP=Wr.unstable_getCurrentPriorityLevel,rv=Wr.unstable_ImmediatePriority,z_=Wr.unstable_UserBlockingPriority,Ed=Wr.unstable_NormalPriority,eR=Wr.unstable_LowPriority,q_=Wr.unstable_IdlePriority,Th=null,zn=null;function tR(e){if(zn&&typeof zn.onCommitFiberRoot=="function")try{zn.onCommitFiberRoot(Th,e,void 0,(e.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:sR,rR=Math.log,nR=Math.LN2;function sR(e){return e>>>=0,e===0?32:31-(rR(e)/nR|0)|0}var Au=64,Iu=4194304;function Ul(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Td(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Ul(l):(a&=o,a!==0&&(n=Ul(a)))}else o=r&~s,o!==0?n=Ul(o):a!==0&&(n=Ul(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Sn(t),s=1<<r,n|=e[r],t&=~s;return n}function iR(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aR(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-Sn(a),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=iR(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function um(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function W_(){var e=Au;return Au<<=1,!(Au&4194240)&&(Au=64),e}function Kf(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Yc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Sn(t),e[t]=r}function oR(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Sn(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}function nv(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Sn(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Qe=0;function V_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var H_,sv,K_,G_,Y_,dm=!1,Ou=[],Xs=null,Zs=null,ei=null,dc=new Map,hc=new Map,Ds=[],lR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ew(e,t){switch(e){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":ei=null;break;case"pointerover":case"pointerout":dc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hc.delete(t.pointerId)}}function Sl(e,t,r,n,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Jc(t),t!==null&&sv(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function cR(e,t,r,n,s){switch(t){case"focusin":return Xs=Sl(Xs,e,t,r,n,s),!0;case"dragenter":return Zs=Sl(Zs,e,t,r,n,s),!0;case"mouseover":return ei=Sl(ei,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return dc.set(a,Sl(dc.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,hc.set(a,Sl(hc.get(a)||null,e,t,r,n,s)),!0}return!1}function Q_(e){var t=zi(e.target);if(t!==null){var r=_a(t);if(r!==null){if(t=r.tag,t===13){if(t=$_(r),t!==null){e.blockedOn=t,Y_(e.priority,function(){K_(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ld(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=hm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);am=n,r.target.dispatchEvent(n),am=null}else return t=Jc(r),t!==null&&sv(t),e.blockedOn=r,!1;t.shift()}return!0}function tw(e,t,r){ld(e)&&r.delete(t)}function uR(){dm=!1,Xs!==null&&ld(Xs)&&(Xs=null),Zs!==null&&ld(Zs)&&(Zs=null),ei!==null&&ld(ei)&&(ei=null),dc.forEach(tw),hc.forEach(tw)}function Nl(e,t){e.blockedOn===t&&(e.blockedOn=null,dm||(dm=!0,Wr.unstable_scheduleCallback(Wr.unstable_NormalPriority,uR)))}function fc(e){function t(s){return Nl(s,e)}if(0<Ou.length){Nl(Ou[0],e);for(var r=1;r<Ou.length;r++){var n=Ou[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Xs!==null&&Nl(Xs,e),Zs!==null&&Nl(Zs,e),ei!==null&&Nl(ei,e),dc.forEach(t),hc.forEach(t),r=0;r<Ds.length;r++)n=Ds[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ds.length&&(r=Ds[0],r.blockedOn===null);)Q_(r),r.blockedOn===null&&Ds.shift()}var go=_s.ReactCurrentBatchConfig,Pd=!0;function dR(e,t,r,n){var s=Qe,a=go.transition;go.transition=null;try{Qe=1,iv(e,t,r,n)}finally{Qe=s,go.transition=a}}function hR(e,t,r,n){var s=Qe,a=go.transition;go.transition=null;try{Qe=4,iv(e,t,r,n)}finally{Qe=s,go.transition=a}}function iv(e,t,r,n){if(Pd){var s=hm(e,t,r,n);if(s===null)np(e,t,n,Rd,r),ew(e,n);else if(cR(s,e,t,r,n))n.stopPropagation();else if(ew(e,n),t&4&&-1<lR.indexOf(e)){for(;s!==null;){var a=Jc(s);if(a!==null&&H_(a),a=hm(e,t,r,n),a===null&&np(e,t,n,Rd,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else np(e,t,n,null,r)}}var Rd=null;function hm(e,t,r,n){if(Rd=null,e=tv(n),e=zi(e),e!==null)if(t=_a(e),t===null)e=null;else if(r=t.tag,r===13){if(e=$_(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Rd=e,null}function J_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZP()){case rv:return 1;case z_:return 4;case Ed:case eR:return 16;case q_:return 536870912;default:return 16}default:return 16}}var Ys=null,av=null,cd=null;function X_(){if(cd)return cd;var e,t=av,r=t.length,n,s="value"in Ys?Ys.value:Ys.textContent,a=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[a-n];n++);return cd=s.slice(e,1<n?1-n:void 0)}function ud(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mu(){return!0}function rw(){return!1}function Hr(e){function t(r,n,s,a,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Mu:rw,this.isPropagationStopped=rw,this}return dt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Mu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Mu)},persist:function(){},isPersistent:Mu}),t}var Xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ov=Hr(Xo),Qc=dt({},Xo,{view:0,detail:0}),fR=Hr(Qc),Gf,Yf,kl,Ph=dt({},Qc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==kl&&(kl&&e.type==="mousemove"?(Gf=e.screenX-kl.screenX,Yf=e.screenY-kl.screenY):Yf=Gf=0,kl=e),Gf)},movementY:function(e){return"movementY"in e?e.movementY:Yf}}),nw=Hr(Ph),pR=dt({},Ph,{dataTransfer:0}),mR=Hr(pR),gR=dt({},Qc,{relatedTarget:0}),Qf=Hr(gR),vR=dt({},Xo,{animationName:0,elapsedTime:0,pseudoElement:0}),yR=Hr(vR),xR=dt({},Xo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wR=Hr(xR),bR=dt({},Xo,{data:0}),sw=Hr(bR),_R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NR(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=SR[e])?!!t[e]:!1}function lv(){return NR}var kR=dt({},Qc,{key:function(e){if(e.key){var t=_R[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ud(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lv,charCode:function(e){return e.type==="keypress"?ud(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ud(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),CR=Hr(kR),ER=dt({},Ph,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iw=Hr(ER),TR=dt({},Qc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lv}),PR=Hr(TR),RR=dt({},Xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),AR=Hr(RR),IR=dt({},Ph,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),OR=Hr(IR),MR=[9,13,27,32],cv=fs&&"CompositionEvent"in window,Gl=null;fs&&"documentMode"in document&&(Gl=document.documentMode);var DR=fs&&"TextEvent"in window&&!Gl,Z_=fs&&(!cv||Gl&&8<Gl&&11>=Gl),aw=" ",ow=!1;function ej(e,t){switch(e){case"keyup":return MR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tj(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var eo=!1;function LR(e,t){switch(e){case"compositionend":return tj(t);case"keypress":return t.which!==32?null:(ow=!0,aw);case"textInput":return e=t.data,e===aw&&ow?null:e;default:return null}}function $R(e,t){if(eo)return e==="compositionend"||!cv&&ej(e,t)?(e=X_(),cd=av=Ys=null,eo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Z_&&t.locale!=="ko"?null:t.data;default:return null}}var FR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!FR[e.type]:t==="textarea"}function rj(e,t,r,n){I_(n),t=Ad(t,"onChange"),0<t.length&&(r=new ov("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Yl=null,pc=null;function UR(e){fj(e,0)}function Rh(e){var t=no(e);if(k_(t))return e}function BR(e,t){if(e==="change")return t}var nj=!1;if(fs){var Jf;if(fs){var Xf="oninput"in document;if(!Xf){var cw=document.createElement("div");cw.setAttribute("oninput","return;"),Xf=typeof cw.oninput=="function"}Jf=Xf}else Jf=!1;nj=Jf&&(!document.documentMode||9<document.documentMode)}function uw(){Yl&&(Yl.detachEvent("onpropertychange",sj),pc=Yl=null)}function sj(e){if(e.propertyName==="value"&&Rh(pc)){var t=[];rj(t,pc,e,tv(e)),L_(UR,t)}}function zR(e,t,r){e==="focusin"?(uw(),Yl=t,pc=r,Yl.attachEvent("onpropertychange",sj)):e==="focusout"&&uw()}function qR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Rh(pc)}function WR(e,t){if(e==="click")return Rh(t)}function VR(e,t){if(e==="input"||e==="change")return Rh(t)}function HR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kn=typeof Object.is=="function"?Object.is:HR;function mc(e,t){if(kn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Gp.call(t,s)||!kn(e[s],t[s]))return!1}return!0}function dw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hw(e,t){var r=dw(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dw(r)}}function ij(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ij(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function aj(){for(var e=window,t=Nd();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Nd(e.document)}return t}function uv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function KR(e){var t=aj(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ij(r.ownerDocument.documentElement,r)){if(n!==null&&uv(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=hw(r,a);var o=hw(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var GR=fs&&"documentMode"in document&&11>=document.documentMode,to=null,fm=null,Ql=null,pm=!1;function fw(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;pm||to==null||to!==Nd(n)||(n=to,"selectionStart"in n&&uv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ql&&mc(Ql,n)||(Ql=n,n=Ad(fm,"onSelect"),0<n.length&&(t=new ov("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=to)))}function Du(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ro={animationend:Du("Animation","AnimationEnd"),animationiteration:Du("Animation","AnimationIteration"),animationstart:Du("Animation","AnimationStart"),transitionend:Du("Transition","TransitionEnd")},Zf={},oj={};fs&&(oj=document.createElement("div").style,"AnimationEvent"in window||(delete ro.animationend.animation,delete ro.animationiteration.animation,delete ro.animationstart.animation),"TransitionEvent"in window||delete ro.transitionend.transition);function Ah(e){if(Zf[e])return Zf[e];if(!ro[e])return e;var t=ro[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in oj)return Zf[e]=t[r];return e}var lj=Ah("animationend"),cj=Ah("animationiteration"),uj=Ah("animationstart"),dj=Ah("transitionend"),hj=new Map,pw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wi(e,t){hj.set(e,t),ba(t,[e])}for(var ep=0;ep<pw.length;ep++){var tp=pw[ep],YR=tp.toLowerCase(),QR=tp[0].toUpperCase()+tp.slice(1);wi(YR,"on"+QR)}wi(lj,"onAnimationEnd");wi(cj,"onAnimationIteration");wi(uj,"onAnimationStart");wi("dblclick","onDoubleClick");wi("focusin","onFocus");wi("focusout","onBlur");wi(dj,"onTransitionEnd");Lo("onMouseEnter",["mouseout","mouseover"]);Lo("onMouseLeave",["mouseout","mouseover"]);Lo("onPointerEnter",["pointerout","pointerover"]);Lo("onPointerLeave",["pointerout","pointerover"]);ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ba("onBeforeInput",["compositionend","keypress","textInput","paste"]);ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bl));function mw(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,YP(n,t,void 0,e),e.currentTarget=null}function fj(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;mw(s,l,u),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;mw(s,l,u),a=c}}}if(Cd)throw e=cm,Cd=!1,cm=null,e}function it(e,t){var r=t[xm];r===void 0&&(r=t[xm]=new Set);var n=e+"__bubble";r.has(n)||(pj(t,e,2,!1),r.add(n))}function rp(e,t,r){var n=0;t&&(n|=4),pj(r,e,n,t)}var Lu="_reactListening"+Math.random().toString(36).slice(2);function gc(e){if(!e[Lu]){e[Lu]=!0,b_.forEach(function(r){r!=="selectionchange"&&(JR.has(r)||rp(r,!1,e),rp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Lu]||(t[Lu]=!0,rp("selectionchange",!1,t))}}function pj(e,t,r,n){switch(J_(t)){case 1:var s=dR;break;case 4:s=hR;break;default:s=iv}r=s.bind(null,t,r,e),s=void 0,!lm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function np(e,t,r,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=zi(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}L_(function(){var u=a,h=tv(r),f=[];e:{var p=hj.get(e);if(p!==void 0){var m=ov,w=e;switch(e){case"keypress":if(ud(r)===0)break e;case"keydown":case"keyup":m=CR;break;case"focusin":w="focus",m=Qf;break;case"focusout":w="blur",m=Qf;break;case"beforeblur":case"afterblur":m=Qf;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=nw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=mR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=PR;break;case lj:case cj:case uj:m=yR;break;case dj:m=AR;break;case"scroll":m=fR;break;case"wheel":m=OR;break;case"copy":case"cut":case"paste":m=wR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=iw}var g=(t&4)!==0,v=!g&&e==="scroll",y=g?p!==null?p+"Capture":null:p;g=[];for(var x=u,b;x!==null;){b=x;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,y!==null&&(_=uc(x,y),_!=null&&g.push(vc(x,_,b)))),v)break;x=x.return}0<g.length&&(p=new m(p,w,null,r,h),f.push({event:p,listeners:g}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&r!==am&&(w=r.relatedTarget||r.fromElement)&&(zi(w)||w[ps]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(w=r.relatedTarget||r.toElement,m=u,w=w?zi(w):null,w!==null&&(v=_a(w),w!==v||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=u),m!==w)){if(g=nw,_="onMouseLeave",y="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(g=iw,_="onPointerLeave",y="onPointerEnter",x="pointer"),v=m==null?p:no(m),b=w==null?p:no(w),p=new g(_,x+"leave",m,r,h),p.target=v,p.relatedTarget=b,_=null,zi(h)===u&&(g=new g(y,x+"enter",w,r,h),g.target=b,g.relatedTarget=v,_=g),v=_,m&&w)t:{for(g=m,y=w,x=0,b=g;b;b=Oa(b))x++;for(b=0,_=y;_;_=Oa(_))b++;for(;0<x-b;)g=Oa(g),x--;for(;0<b-x;)y=Oa(y),b--;for(;x--;){if(g===y||y!==null&&g===y.alternate)break t;g=Oa(g),y=Oa(y)}g=null}else g=null;m!==null&&gw(f,p,m,g,!1),w!==null&&v!==null&&gw(f,v,w,g,!0)}}e:{if(p=u?no(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var S=BR;else if(lw(p))if(nj)S=VR;else{S=qR;var j=zR}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=WR);if(S&&(S=S(e,u))){rj(f,S,r,h);break e}j&&j(e,p,u),e==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&tm(p,"number",p.value)}switch(j=u?no(u):window,e){case"focusin":(lw(j)||j.contentEditable==="true")&&(to=j,fm=u,Ql=null);break;case"focusout":Ql=fm=to=null;break;case"mousedown":pm=!0;break;case"contextmenu":case"mouseup":case"dragend":pm=!1,fw(f,r,h);break;case"selectionchange":if(GR)break;case"keydown":case"keyup":fw(f,r,h)}var N;if(cv)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else eo?ej(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(Z_&&r.locale!=="ko"&&(eo||k!=="onCompositionStart"?k==="onCompositionEnd"&&eo&&(N=X_()):(Ys=h,av="value"in Ys?Ys.value:Ys.textContent,eo=!0)),j=Ad(u,k),0<j.length&&(k=new sw(k,e,null,r,h),f.push({event:k,listeners:j}),N?k.data=N:(N=tj(r),N!==null&&(k.data=N)))),(N=DR?LR(e,r):$R(e,r))&&(u=Ad(u,"onBeforeInput"),0<u.length&&(h=new sw("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:u}),h.data=N))}fj(f,t)})}function vc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ad(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=uc(e,r),a!=null&&n.unshift(vc(e,a,s)),a=uc(e,t),a!=null&&n.push(vc(e,a,s))),e=e.return}return n}function Oa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function gw(e,t,r,n,s){for(var a=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=uc(r,a),c!=null&&o.unshift(vc(r,c,l))):s||(c=uc(r,a),c!=null&&o.push(vc(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var XR=/\r\n?/g,ZR=/\u0000|\uFFFD/g;function vw(e){return(typeof e=="string"?e:""+e).replace(XR,`
`).replace(ZR,"")}function $u(e,t,r){if(t=vw(t),vw(e)!==t&&r)throw Error(ee(425))}function Id(){}var mm=null,gm=null;function vm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ym=typeof setTimeout=="function"?setTimeout:void 0,eA=typeof clearTimeout=="function"?clearTimeout:void 0,yw=typeof Promise=="function"?Promise:void 0,tA=typeof queueMicrotask=="function"?queueMicrotask:typeof yw<"u"?function(e){return yw.resolve(null).then(e).catch(rA)}:ym;function rA(e){setTimeout(function(){throw e})}function sp(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),fc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);fc(t)}function ti(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Zo=Math.random().toString(36).slice(2),Fn="__reactFiber$"+Zo,yc="__reactProps$"+Zo,ps="__reactContainer$"+Zo,xm="__reactEvents$"+Zo,nA="__reactListeners$"+Zo,sA="__reactHandles$"+Zo;function zi(e){var t=e[Fn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ps]||r[Fn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=xw(e);e!==null;){if(r=e[Fn])return r;e=xw(e)}return t}e=r,r=e.parentNode}return null}function Jc(e){return e=e[Fn]||e[ps],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function no(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ee(33))}function Ih(e){return e[yc]||null}var wm=[],so=-1;function bi(e){return{current:e}}function at(e){0>so||(e.current=wm[so],wm[so]=null,so--)}function rt(e,t){so++,wm[so]=e.current,e.current=t}var hi={},nr=bi(hi),Nr=bi(!1),ia=hi;function $o(e,t){var r=e.type.contextTypes;if(!r)return hi;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function kr(e){return e=e.childContextTypes,e!=null}function Od(){at(Nr),at(nr)}function ww(e,t,r){if(nr.current!==hi)throw Error(ee(168));rt(nr,t),rt(Nr,r)}function mj(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(ee(108,zP(e)||"Unknown",s));return dt({},r,n)}function Md(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,ia=nr.current,rt(nr,e),rt(Nr,Nr.current),!0}function bw(e,t,r){var n=e.stateNode;if(!n)throw Error(ee(169));r?(e=mj(e,t,ia),n.__reactInternalMemoizedMergedChildContext=e,at(Nr),at(nr),rt(nr,e)):at(Nr),rt(Nr,r)}var as=null,Oh=!1,ip=!1;function gj(e){as===null?as=[e]:as.push(e)}function iA(e){Oh=!0,gj(e)}function _i(){if(!ip&&as!==null){ip=!0;var e=0,t=Qe;try{var r=as;for(Qe=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}as=null,Oh=!1}catch(s){throw as!==null&&(as=as.slice(e+1)),B_(rv,_i),s}finally{Qe=t,ip=!1}}return null}var io=[],ao=0,Dd=null,Ld=0,Jr=[],Xr=0,aa=null,cs=1,us="";function Mi(e,t){io[ao++]=Ld,io[ao++]=Dd,Dd=e,Ld=t}function vj(e,t,r){Jr[Xr++]=cs,Jr[Xr++]=us,Jr[Xr++]=aa,aa=e;var n=cs;e=us;var s=32-Sn(n)-1;n&=~(1<<s),r+=1;var a=32-Sn(t)+s;if(30<a){var o=s-s%5;a=(n&(1<<o)-1).toString(32),n>>=o,s-=o,cs=1<<32-Sn(t)+s|r<<s|n,us=a+e}else cs=1<<a|r<<s|n,us=e}function dv(e){e.return!==null&&(Mi(e,1),vj(e,1,0))}function hv(e){for(;e===Dd;)Dd=io[--ao],io[ao]=null,Ld=io[--ao],io[ao]=null;for(;e===aa;)aa=Jr[--Xr],Jr[Xr]=null,us=Jr[--Xr],Jr[Xr]=null,cs=Jr[--Xr],Jr[Xr]=null}var Ur=null,Fr=null,ot=!1,_n=null;function yj(e,t){var r=Zr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function _w(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ur=e,Fr=ti(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ur=e,Fr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=aa!==null?{id:cs,overflow:us}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Zr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ur=e,Fr=null,!0):!1;default:return!1}}function bm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function _m(e){if(ot){var t=Fr;if(t){var r=t;if(!_w(e,t)){if(bm(e))throw Error(ee(418));t=ti(r.nextSibling);var n=Ur;t&&_w(e,t)?yj(n,r):(e.flags=e.flags&-4097|2,ot=!1,Ur=e)}}else{if(bm(e))throw Error(ee(418));e.flags=e.flags&-4097|2,ot=!1,Ur=e}}}function jw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ur=e}function Fu(e){if(e!==Ur)return!1;if(!ot)return jw(e),ot=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vm(e.type,e.memoizedProps)),t&&(t=Fr)){if(bm(e))throw xj(),Error(ee(418));for(;t;)yj(e,t),t=ti(t.nextSibling)}if(jw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Fr=ti(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Fr=null}}else Fr=Ur?ti(e.stateNode.nextSibling):null;return!0}function xj(){for(var e=Fr;e;)e=ti(e.nextSibling)}function Fo(){Fr=Ur=null,ot=!1}function fv(e){_n===null?_n=[e]:_n.push(e)}var aA=_s.ReactCurrentBatchConfig;function Cl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ee(309));var n=r.stateNode}if(!n)throw Error(ee(147,e));var s=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(ee(284));if(!r._owner)throw Error(ee(290,e))}return e}function Uu(e,t){throw e=Object.prototype.toString.call(t),Error(ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Sw(e){var t=e._init;return t(e._payload)}function wj(e){function t(y,x){if(e){var b=y.deletions;b===null?(y.deletions=[x],y.flags|=16):b.push(x)}}function r(y,x){if(!e)return null;for(;x!==null;)t(y,x),x=x.sibling;return null}function n(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function s(y,x){return y=ii(y,x),y.index=0,y.sibling=null,y}function a(y,x,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<x?(y.flags|=2,x):b):(y.flags|=2,x)):(y.flags|=1048576,x)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,x,b,_){return x===null||x.tag!==6?(x=hp(b,y.mode,_),x.return=y,x):(x=s(x,b),x.return=y,x)}function c(y,x,b,_){var S=b.type;return S===Za?h(y,x,b.props.children,_,b.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Is&&Sw(S)===x.type)?(_=s(x,b.props),_.ref=Cl(y,x,b),_.return=y,_):(_=vd(b.type,b.key,b.props,null,y.mode,_),_.ref=Cl(y,x,b),_.return=y,_)}function u(y,x,b,_){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=fp(b,y.mode,_),x.return=y,x):(x=s(x,b.children||[]),x.return=y,x)}function h(y,x,b,_,S){return x===null||x.tag!==7?(x=ra(b,y.mode,_,S),x.return=y,x):(x=s(x,b),x.return=y,x)}function f(y,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=hp(""+x,y.mode,b),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Tu:return b=vd(x.type,x.key,x.props,null,y.mode,b),b.ref=Cl(y,null,x),b.return=y,b;case Xa:return x=fp(x,y.mode,b),x.return=y,x;case Is:var _=x._init;return f(y,_(x._payload),b)}if(Fl(x)||_l(x))return x=ra(x,y.mode,b,null),x.return=y,x;Uu(y,x)}return null}function p(y,x,b,_){var S=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:l(y,x,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Tu:return b.key===S?c(y,x,b,_):null;case Xa:return b.key===S?u(y,x,b,_):null;case Is:return S=b._init,p(y,x,S(b._payload),_)}if(Fl(b)||_l(b))return S!==null?null:h(y,x,b,_,null);Uu(y,b)}return null}function m(y,x,b,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(b)||null,l(x,y,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Tu:return y=y.get(_.key===null?b:_.key)||null,c(x,y,_,S);case Xa:return y=y.get(_.key===null?b:_.key)||null,u(x,y,_,S);case Is:var j=_._init;return m(y,x,b,j(_._payload),S)}if(Fl(_)||_l(_))return y=y.get(b)||null,h(x,y,_,S,null);Uu(x,_)}return null}function w(y,x,b,_){for(var S=null,j=null,N=x,k=x=0,R=null;N!==null&&k<b.length;k++){N.index>k?(R=N,N=null):R=N.sibling;var E=p(y,N,b[k],_);if(E===null){N===null&&(N=R);break}e&&N&&E.alternate===null&&t(y,N),x=a(E,x,k),j===null?S=E:j.sibling=E,j=E,N=R}if(k===b.length)return r(y,N),ot&&Mi(y,k),S;if(N===null){for(;k<b.length;k++)N=f(y,b[k],_),N!==null&&(x=a(N,x,k),j===null?S=N:j.sibling=N,j=N);return ot&&Mi(y,k),S}for(N=n(y,N);k<b.length;k++)R=m(N,y,k,b[k],_),R!==null&&(e&&R.alternate!==null&&N.delete(R.key===null?k:R.key),x=a(R,x,k),j===null?S=R:j.sibling=R,j=R);return e&&N.forEach(function($){return t(y,$)}),ot&&Mi(y,k),S}function g(y,x,b,_){var S=_l(b);if(typeof S!="function")throw Error(ee(150));if(b=S.call(b),b==null)throw Error(ee(151));for(var j=S=null,N=x,k=x=0,R=null,E=b.next();N!==null&&!E.done;k++,E=b.next()){N.index>k?(R=N,N=null):R=N.sibling;var $=p(y,N,E.value,_);if($===null){N===null&&(N=R);break}e&&N&&$.alternate===null&&t(y,N),x=a($,x,k),j===null?S=$:j.sibling=$,j=$,N=R}if(E.done)return r(y,N),ot&&Mi(y,k),S;if(N===null){for(;!E.done;k++,E=b.next())E=f(y,E.value,_),E!==null&&(x=a(E,x,k),j===null?S=E:j.sibling=E,j=E);return ot&&Mi(y,k),S}for(N=n(y,N);!E.done;k++,E=b.next())E=m(N,y,k,E.value,_),E!==null&&(e&&E.alternate!==null&&N.delete(E.key===null?k:E.key),x=a(E,x,k),j===null?S=E:j.sibling=E,j=E);return e&&N.forEach(function(M){return t(y,M)}),ot&&Mi(y,k),S}function v(y,x,b,_){if(typeof b=="object"&&b!==null&&b.type===Za&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Tu:e:{for(var S=b.key,j=x;j!==null;){if(j.key===S){if(S=b.type,S===Za){if(j.tag===7){r(y,j.sibling),x=s(j,b.props.children),x.return=y,y=x;break e}}else if(j.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Is&&Sw(S)===j.type){r(y,j.sibling),x=s(j,b.props),x.ref=Cl(y,j,b),x.return=y,y=x;break e}r(y,j);break}else t(y,j);j=j.sibling}b.type===Za?(x=ra(b.props.children,y.mode,_,b.key),x.return=y,y=x):(_=vd(b.type,b.key,b.props,null,y.mode,_),_.ref=Cl(y,x,b),_.return=y,y=_)}return o(y);case Xa:e:{for(j=b.key;x!==null;){if(x.key===j)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){r(y,x.sibling),x=s(x,b.children||[]),x.return=y,y=x;break e}else{r(y,x);break}else t(y,x);x=x.sibling}x=fp(b,y.mode,_),x.return=y,y=x}return o(y);case Is:return j=b._init,v(y,x,j(b._payload),_)}if(Fl(b))return w(y,x,b,_);if(_l(b))return g(y,x,b,_);Uu(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(r(y,x.sibling),x=s(x,b),x.return=y,y=x):(r(y,x),x=hp(b,y.mode,_),x.return=y,y=x),o(y)):r(y,x)}return v}var Uo=wj(!0),bj=wj(!1),$d=bi(null),Fd=null,oo=null,pv=null;function mv(){pv=oo=Fd=null}function gv(e){var t=$d.current;at($d),e._currentValue=t}function jm(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function vo(e,t){Fd=e,pv=oo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(jr=!0),e.firstContext=null)}function an(e){var t=e._currentValue;if(pv!==e)if(e={context:e,memoizedValue:t,next:null},oo===null){if(Fd===null)throw Error(ee(308));oo=e,Fd.dependencies={lanes:0,firstContext:e}}else oo=oo.next=e;return t}var qi=null;function vv(e){qi===null?qi=[e]:qi.push(e)}function _j(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,vv(t)):(r.next=s.next,s.next=r),t.interleaved=r,ms(e,n)}function ms(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Os=!1;function yv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ri(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,qe&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,ms(e,r)}return s=n.interleaved,s===null?(t.next=t,vv(n)):(t.next=s.next,s.next=t),n.interleaved=t,ms(e,r)}function dd(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,nv(e,r)}}function Nw(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=t:a=a.next=t}else s=a=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ud(e,t,r,n){var s=e.updateQueue;Os=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(a!==null){var f=s.baseState;o=0,h=u=c=null,l=a;do{var p=l.lane,m=l.eventTime;if((n&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,g=l;switch(p=t,m=r,g.tag){case 1:if(w=g.payload,typeof w=="function"){f=w.call(m,f,p);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=g.payload,p=typeof w=="function"?w.call(m,f,p):w,p==null)break e;f=dt({},f,p);break e;case 2:Os=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else m={eventTime:m,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=m,c=f):h=h.next=m,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);la|=o,e.lanes=o,e.memoizedState=f}}function kw(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ee(191,s));s.call(n)}}}var Xc={},qn=bi(Xc),xc=bi(Xc),wc=bi(Xc);function Wi(e){if(e===Xc)throw Error(ee(174));return e}function xv(e,t){switch(rt(wc,t),rt(xc,e),rt(qn,Xc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:nm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=nm(t,e)}at(qn),rt(qn,t)}function Bo(){at(qn),at(xc),at(wc)}function Sj(e){Wi(wc.current);var t=Wi(qn.current),r=nm(t,e.type);t!==r&&(rt(xc,e),rt(qn,r))}function wv(e){xc.current===e&&(at(qn),at(xc))}var ct=bi(0);function Bd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ap=[];function bv(){for(var e=0;e<ap.length;e++)ap[e]._workInProgressVersionPrimary=null;ap.length=0}var hd=_s.ReactCurrentDispatcher,op=_s.ReactCurrentBatchConfig,oa=0,ut=null,Rt=null,Lt=null,zd=!1,Jl=!1,bc=0,oA=0;function Xt(){throw Error(ee(321))}function _v(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!kn(e[r],t[r]))return!1;return!0}function jv(e,t,r,n,s,a){if(oa=a,ut=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hd.current=e===null||e.memoizedState===null?dA:hA,e=r(n,s),Jl){a=0;do{if(Jl=!1,bc=0,25<=a)throw Error(ee(301));a+=1,Lt=Rt=null,t.updateQueue=null,hd.current=fA,e=r(n,s)}while(Jl)}if(hd.current=qd,t=Rt!==null&&Rt.next!==null,oa=0,Lt=Rt=ut=null,zd=!1,t)throw Error(ee(300));return e}function Sv(){var e=bc!==0;return bc=0,e}function Mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?ut.memoizedState=Lt=e:Lt=Lt.next=e,Lt}function on(){if(Rt===null){var e=ut.alternate;e=e!==null?e.memoizedState:null}else e=Rt.next;var t=Lt===null?ut.memoizedState:Lt.next;if(t!==null)Lt=t,Rt=e;else{if(e===null)throw Error(ee(310));Rt=e,e={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Lt===null?ut.memoizedState=Lt=e:Lt=Lt.next=e}return Lt}function _c(e,t){return typeof t=="function"?t(e):t}function lp(e){var t=on(),r=t.queue;if(r===null)throw Error(ee(311));r.lastRenderedReducer=e;var n=Rt,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((oa&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,ut.lanes|=h,la|=h}u=u.next}while(u!==null&&u!==a);c===null?o=n:c.next=l,kn(n,t.memoizedState)||(jr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do a=s.lane,ut.lanes|=a,la|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function cp(e){var t=on(),r=t.queue;if(r===null)throw Error(ee(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,a=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=e(a,o.action),o=o.next;while(o!==s);kn(a,t.memoizedState)||(jr=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Nj(){}function kj(e,t){var r=ut,n=on(),s=t(),a=!kn(n.memoizedState,s);if(a&&(n.memoizedState=s,jr=!0),n=n.queue,Nv(Tj.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||Lt!==null&&Lt.memoizedState.tag&1){if(r.flags|=2048,jc(9,Ej.bind(null,r,n,s,t),void 0,null),Ft===null)throw Error(ee(349));oa&30||Cj(r,t,s)}return s}function Cj(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ut.updateQueue,t===null?(t={lastEffect:null,stores:null},ut.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Ej(e,t,r,n){t.value=r,t.getSnapshot=n,Pj(t)&&Rj(e)}function Tj(e,t,r){return r(function(){Pj(t)&&Rj(e)})}function Pj(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!kn(e,r)}catch{return!0}}function Rj(e){var t=ms(e,1);t!==null&&Nn(t,e,1,-1)}function Cw(e){var t=Mn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_c,lastRenderedState:e},t.queue=e,e=e.dispatch=uA.bind(null,ut,e),[t.memoizedState,e]}function jc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ut.updateQueue,t===null?(t={lastEffect:null,stores:null},ut.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Aj(){return on().memoizedState}function fd(e,t,r,n){var s=Mn();ut.flags|=e,s.memoizedState=jc(1|t,r,void 0,n===void 0?null:n)}function Mh(e,t,r,n){var s=on();n=n===void 0?null:n;var a=void 0;if(Rt!==null){var o=Rt.memoizedState;if(a=o.destroy,n!==null&&_v(n,o.deps)){s.memoizedState=jc(t,r,a,n);return}}ut.flags|=e,s.memoizedState=jc(1|t,r,a,n)}function Ew(e,t){return fd(8390656,8,e,t)}function Nv(e,t){return Mh(2048,8,e,t)}function Ij(e,t){return Mh(4,2,e,t)}function Oj(e,t){return Mh(4,4,e,t)}function Mj(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dj(e,t,r){return r=r!=null?r.concat([e]):null,Mh(4,4,Mj.bind(null,t,e),r)}function kv(){}function Lj(e,t){var r=on();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&_v(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function $j(e,t){var r=on();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&_v(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Fj(e,t,r){return oa&21?(kn(r,t)||(r=W_(),ut.lanes|=r,la|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,jr=!0),e.memoizedState=r)}function lA(e,t){var r=Qe;Qe=r!==0&&4>r?r:4,e(!0);var n=op.transition;op.transition={};try{e(!1),t()}finally{Qe=r,op.transition=n}}function Uj(){return on().memoizedState}function cA(e,t,r){var n=si(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Bj(e))zj(t,r);else if(r=_j(e,t,r,n),r!==null){var s=hr();Nn(r,e,n,s),qj(r,t,n)}}function uA(e,t,r){var n=si(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Bj(e))zj(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,kn(l,o)){var c=t.interleaved;c===null?(s.next=s,vv(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=_j(e,t,s,n),r!==null&&(s=hr(),Nn(r,e,n,s),qj(r,t,n))}}function Bj(e){var t=e.alternate;return e===ut||t!==null&&t===ut}function zj(e,t){Jl=zd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function qj(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,nv(e,r)}}var qd={readContext:an,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useInsertionEffect:Xt,useLayoutEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useMutableSource:Xt,useSyncExternalStore:Xt,useId:Xt,unstable_isNewReconciler:!1},dA={readContext:an,useCallback:function(e,t){return Mn().memoizedState=[e,t===void 0?null:t],e},useContext:an,useEffect:Ew,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,fd(4194308,4,Mj.bind(null,t,e),r)},useLayoutEffect:function(e,t){return fd(4194308,4,e,t)},useInsertionEffect:function(e,t){return fd(4,2,e,t)},useMemo:function(e,t){var r=Mn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Mn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=cA.bind(null,ut,e),[n.memoizedState,e]},useRef:function(e){var t=Mn();return e={current:e},t.memoizedState=e},useState:Cw,useDebugValue:kv,useDeferredValue:function(e){return Mn().memoizedState=e},useTransition:function(){var e=Cw(!1),t=e[0];return e=lA.bind(null,e[1]),Mn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ut,s=Mn();if(ot){if(r===void 0)throw Error(ee(407));r=r()}else{if(r=t(),Ft===null)throw Error(ee(349));oa&30||Cj(n,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,Ew(Tj.bind(null,n,a,e),[e]),n.flags|=2048,jc(9,Ej.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=Mn(),t=Ft.identifierPrefix;if(ot){var r=us,n=cs;r=(n&~(1<<32-Sn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=bc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=oA++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hA={readContext:an,useCallback:Lj,useContext:an,useEffect:Nv,useImperativeHandle:Dj,useInsertionEffect:Ij,useLayoutEffect:Oj,useMemo:$j,useReducer:lp,useRef:Aj,useState:function(){return lp(_c)},useDebugValue:kv,useDeferredValue:function(e){var t=on();return Fj(t,Rt.memoizedState,e)},useTransition:function(){var e=lp(_c)[0],t=on().memoizedState;return[e,t]},useMutableSource:Nj,useSyncExternalStore:kj,useId:Uj,unstable_isNewReconciler:!1},fA={readContext:an,useCallback:Lj,useContext:an,useEffect:Nv,useImperativeHandle:Dj,useInsertionEffect:Ij,useLayoutEffect:Oj,useMemo:$j,useReducer:cp,useRef:Aj,useState:function(){return cp(_c)},useDebugValue:kv,useDeferredValue:function(e){var t=on();return Rt===null?t.memoizedState=e:Fj(t,Rt.memoizedState,e)},useTransition:function(){var e=cp(_c)[0],t=on().memoizedState;return[e,t]},useMutableSource:Nj,useSyncExternalStore:kj,useId:Uj,unstable_isNewReconciler:!1};function gn(e,t){if(e&&e.defaultProps){t=dt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Sm(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:dt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Dh={isMounted:function(e){return(e=e._reactInternals)?_a(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=hr(),s=si(e),a=ds(n,s);a.payload=t,r!=null&&(a.callback=r),t=ri(e,a,s),t!==null&&(Nn(t,e,s,n),dd(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=hr(),s=si(e),a=ds(n,s);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=ri(e,a,s),t!==null&&(Nn(t,e,s,n),dd(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=hr(),n=si(e),s=ds(r,n);s.tag=2,t!=null&&(s.callback=t),t=ri(e,s,n),t!==null&&(Nn(t,e,n,r),dd(t,e,n))}};function Tw(e,t,r,n,s,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,o):t.prototype&&t.prototype.isPureReactComponent?!mc(r,n)||!mc(s,a):!0}function Wj(e,t,r){var n=!1,s=hi,a=t.contextType;return typeof a=="object"&&a!==null?a=an(a):(s=kr(t)?ia:nr.current,n=t.contextTypes,a=(n=n!=null)?$o(e,s):hi),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Dh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function Pw(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Dh.enqueueReplaceState(t,t.state,null)}function Nm(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},yv(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=an(a):(a=kr(t)?ia:nr.current,s.context=$o(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Sm(e,t,a,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Dh.enqueueReplaceState(s,s.state,null),Ud(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function zo(e,t){try{var r="",n=t;do r+=BP(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function up(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function km(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var pA=typeof WeakMap=="function"?WeakMap:Map;function Vj(e,t,r){r=ds(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Vd||(Vd=!0,Dm=n),km(e,t)},r}function Hj(e,t,r){r=ds(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){km(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){km(e,t),typeof n!="function"&&(ni===null?ni=new Set([this]):ni.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Rw(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new pA;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=EA.bind(null,e,t,r),t.then(e,e))}function Aw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Iw(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ds(-1,1),t.tag=2,ri(r,t,1))),r.lanes|=1),e)}var mA=_s.ReactCurrentOwner,jr=!1;function lr(e,t,r,n){t.child=e===null?bj(t,null,r,n):Uo(t,e.child,r,n)}function Ow(e,t,r,n,s){r=r.render;var a=t.ref;return vo(t,s),n=jv(e,t,r,n,a,s),r=Sv(),e!==null&&!jr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,gs(e,t,s)):(ot&&r&&dv(t),t.flags|=1,lr(e,t,n,s),t.child)}function Mw(e,t,r,n,s){if(e===null){var a=r.type;return typeof a=="function"&&!Ov(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Kj(e,t,a,n,s)):(e=vd(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:mc,r(o,n)&&e.ref===t.ref)return gs(e,t,s)}return t.flags|=1,e=ii(a,n),e.ref=t.ref,e.return=t,t.child=e}function Kj(e,t,r,n,s){if(e!==null){var a=e.memoizedProps;if(mc(a,n)&&e.ref===t.ref)if(jr=!1,t.pendingProps=n=a,(e.lanes&s)!==0)e.flags&131072&&(jr=!0);else return t.lanes=e.lanes,gs(e,t,s)}return Cm(e,t,r,n,s)}function Gj(e,t,r){var n=t.pendingProps,s=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(co,Mr),Mr|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,rt(co,Mr),Mr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,rt(co,Mr),Mr|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,rt(co,Mr),Mr|=n;return lr(e,t,s,r),t.child}function Yj(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Cm(e,t,r,n,s){var a=kr(r)?ia:nr.current;return a=$o(t,a),vo(t,s),r=jv(e,t,r,n,a,s),n=Sv(),e!==null&&!jr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,gs(e,t,s)):(ot&&n&&dv(t),t.flags|=1,lr(e,t,r,s),t.child)}function Dw(e,t,r,n,s){if(kr(r)){var a=!0;Md(t)}else a=!1;if(vo(t,s),t.stateNode===null)pd(e,t),Wj(t,r,n),Nm(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=an(u):(u=kr(r)?ia:nr.current,u=$o(t,u));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Pw(t,o,n,u),Os=!1;var p=t.memoizedState;o.state=p,Ud(t,n,o,s),c=t.memoizedState,l!==n||p!==c||Nr.current||Os?(typeof h=="function"&&(Sm(t,r,h,n),c=t.memoizedState),(l=Os||Tw(t,r,l,n,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,jj(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:gn(t.type,l),o.props=u,f=t.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=an(c):(c=kr(r)?ia:nr.current,c=$o(t,c));var m=r.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==c)&&Pw(t,o,n,c),Os=!1,p=t.memoizedState,o.state=p,Ud(t,n,o,s);var w=t.memoizedState;l!==f||p!==w||Nr.current||Os?(typeof m=="function"&&(Sm(t,r,m,n),w=t.memoizedState),(u=Os||Tw(t,r,u,n,p,w,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,w,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,w,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=w),o.props=n,o.state=w,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return Em(e,t,r,n,a,s)}function Em(e,t,r,n,s,a){Yj(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&bw(t,r,!1),gs(e,t,a);n=t.stateNode,mA.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Uo(t,e.child,null,a),t.child=Uo(t,null,l,a)):lr(e,t,l,a),t.memoizedState=n.state,s&&bw(t,r,!0),t.child}function Qj(e){var t=e.stateNode;t.pendingContext?ww(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ww(e,t.context,!1),xv(e,t.containerInfo)}function Lw(e,t,r,n,s){return Fo(),fv(s),t.flags|=256,lr(e,t,r,n),t.child}var Tm={dehydrated:null,treeContext:null,retryLane:0};function Pm(e){return{baseLanes:e,cachePool:null,transitions:null}}function Jj(e,t,r){var n=t.pendingProps,s=ct.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),rt(ct,s&1),e===null)return _m(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,a?(n=t.mode,a=t.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Fh(o,n,0,null),e=ra(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Pm(r),t.memoizedState=Tm,e):Cv(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return gA(e,t,o,n,l,s,r);if(a){a=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ii(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=ii(l,a):(a=ra(a,o,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,o=e.child.memoizedState,o=o===null?Pm(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~r,t.memoizedState=Tm,n}return a=e.child,e=a.sibling,n=ii(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Cv(e,t){return t=Fh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bu(e,t,r,n){return n!==null&&fv(n),Uo(t,e.child,null,r),e=Cv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function gA(e,t,r,n,s,a,o){if(r)return t.flags&256?(t.flags&=-257,n=up(Error(ee(422))),Bu(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,s=t.mode,n=Fh({mode:"visible",children:n.children},s,0,null),a=ra(a,s,o,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Uo(t,e.child,null,o),t.child.memoizedState=Pm(o),t.memoizedState=Tm,a);if(!(t.mode&1))return Bu(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(ee(419)),n=up(a,n,void 0),Bu(e,t,o,n)}if(l=(o&e.childLanes)!==0,jr||l){if(n=Ft,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,ms(e,s),Nn(n,e,s,-1))}return Iv(),n=up(Error(ee(421))),Bu(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=TA.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Fr=ti(s.nextSibling),Ur=t,ot=!0,_n=null,e!==null&&(Jr[Xr++]=cs,Jr[Xr++]=us,Jr[Xr++]=aa,cs=e.id,us=e.overflow,aa=t),t=Cv(t,n.children),t.flags|=4096,t)}function $w(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),jm(e.return,t,r)}function dp(e,t,r,n,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function Xj(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(lr(e,t,n.children,r),n=ct.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$w(e,r,t);else if(e.tag===19)$w(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(rt(ct,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Bd(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),dp(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Bd(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}dp(t,!0,r,null,a);break;case"together":dp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function pd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function gs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),la|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ee(153));if(t.child!==null){for(e=t.child,r=ii(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ii(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function vA(e,t,r){switch(t.tag){case 3:Qj(t),Fo();break;case 5:Sj(t);break;case 1:kr(t.type)&&Md(t);break;case 4:xv(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;rt($d,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(rt(ct,ct.current&1),t.flags|=128,null):r&t.child.childLanes?Jj(e,t,r):(rt(ct,ct.current&1),e=gs(e,t,r),e!==null?e.sibling:null);rt(ct,ct.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Xj(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),rt(ct,ct.current),n)break;return null;case 22:case 23:return t.lanes=0,Gj(e,t,r)}return gs(e,t,r)}var Zj,Rm,e1,t1;Zj=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Rm=function(){};e1=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Wi(qn.current);var a=null;switch(r){case"input":s=Zp(e,s),n=Zp(e,n),a=[];break;case"select":s=dt({},s,{value:void 0}),n=dt({},n,{value:void 0}),a=[];break;case"textarea":s=rm(e,s),n=rm(e,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Id)}sm(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(lc.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(lc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&it("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};t1=function(e,t,r,n){r!==n&&(t.flags|=4)};function El(e,t){if(!ot)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Zt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function yA(e,t,r){var n=t.pendingProps;switch(hv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(t),null;case 1:return kr(t.type)&&Od(),Zt(t),null;case 3:return n=t.stateNode,Bo(),at(Nr),at(nr),bv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Fu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_n!==null&&(Fm(_n),_n=null))),Rm(e,t),Zt(t),null;case 5:wv(t);var s=Wi(wc.current);if(r=t.type,e!==null&&t.stateNode!=null)e1(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ee(166));return Zt(t),null}if(e=Wi(qn.current),Fu(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[Fn]=t,n[yc]=a,e=(t.mode&1)!==0,r){case"dialog":it("cancel",n),it("close",n);break;case"iframe":case"object":case"embed":it("load",n);break;case"video":case"audio":for(s=0;s<Bl.length;s++)it(Bl[s],n);break;case"source":it("error",n);break;case"img":case"image":case"link":it("error",n),it("load",n);break;case"details":it("toggle",n);break;case"input":Kx(n,a),it("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},it("invalid",n);break;case"textarea":Yx(n,a),it("invalid",n)}sm(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&$u(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&$u(n.textContent,l,e),s=["children",""+l]):lc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&it("scroll",n)}switch(r){case"input":Pu(n),Gx(n,a,!0);break;case"textarea":Pu(n),Qx(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Id)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=T_(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Fn]=t,e[yc]=n,Zj(e,t,!1,!1),t.stateNode=e;e:{switch(o=im(r,n),r){case"dialog":it("cancel",e),it("close",e),s=n;break;case"iframe":case"object":case"embed":it("load",e),s=n;break;case"video":case"audio":for(s=0;s<Bl.length;s++)it(Bl[s],e);s=n;break;case"source":it("error",e),s=n;break;case"img":case"image":case"link":it("error",e),it("load",e),s=n;break;case"details":it("toggle",e),s=n;break;case"input":Kx(e,n),s=Zp(e,n),it("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=dt({},n,{value:void 0}),it("invalid",e);break;case"textarea":Yx(e,n),s=rm(e,n),it("invalid",e);break;default:s=n}sm(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?A_(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&P_(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&cc(e,c):typeof c=="number"&&cc(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(lc.hasOwnProperty(a)?c!=null&&a==="onScroll"&&it("scroll",e):c!=null&&Jg(e,a,c,o))}switch(r){case"input":Pu(e),Gx(e,n,!1);break;case"textarea":Pu(e),Qx(e);break;case"option":n.value!=null&&e.setAttribute("value",""+di(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?fo(e,!!n.multiple,a,!1):n.defaultValue!=null&&fo(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Id)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zt(t),null;case 6:if(e&&t.stateNode!=null)t1(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ee(166));if(r=Wi(wc.current),Wi(qn.current),Fu(t)){if(n=t.stateNode,r=t.memoizedProps,n[Fn]=t,(a=n.nodeValue!==r)&&(e=Ur,e!==null))switch(e.tag){case 3:$u(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$u(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Fn]=t,t.stateNode=n}return Zt(t),null;case 13:if(at(ct),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ot&&Fr!==null&&t.mode&1&&!(t.flags&128))xj(),Fo(),t.flags|=98560,a=!1;else if(a=Fu(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(ee(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ee(317));a[Fn]=t}else Fo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Zt(t),a=!1}else _n!==null&&(Fm(_n),_n=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ct.current&1?Ot===0&&(Ot=3):Iv())),t.updateQueue!==null&&(t.flags|=4),Zt(t),null);case 4:return Bo(),Rm(e,t),e===null&&gc(t.stateNode.containerInfo),Zt(t),null;case 10:return gv(t.type._context),Zt(t),null;case 17:return kr(t.type)&&Od(),Zt(t),null;case 19:if(at(ct),a=t.memoizedState,a===null)return Zt(t),null;if(n=(t.flags&128)!==0,o=a.rendering,o===null)if(n)El(a,!1);else{if(Ot!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Bd(e),o!==null){for(t.flags|=128,El(a,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return rt(ct,ct.current&1|2),t.child}e=e.sibling}a.tail!==null&&xt()>qo&&(t.flags|=128,n=!0,El(a,!1),t.lanes=4194304)}else{if(!n)if(e=Bd(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),El(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!ot)return Zt(t),null}else 2*xt()-a.renderingStartTime>qo&&r!==1073741824&&(t.flags|=128,n=!0,El(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(r=a.last,r!==null?r.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=xt(),t.sibling=null,r=ct.current,rt(ct,n?r&1|2:r&1),t):(Zt(t),null);case 22:case 23:return Av(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Mr&1073741824&&(Zt(t),t.subtreeFlags&6&&(t.flags|=8192)):Zt(t),null;case 24:return null;case 25:return null}throw Error(ee(156,t.tag))}function xA(e,t){switch(hv(t),t.tag){case 1:return kr(t.type)&&Od(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Bo(),at(Nr),at(nr),bv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wv(t),null;case 13:if(at(ct),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ee(340));Fo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return at(ct),null;case 4:return Bo(),null;case 10:return gv(t.type._context),null;case 22:case 23:return Av(),null;case 24:return null;default:return null}}var zu=!1,tr=!1,wA=typeof WeakSet=="function"?WeakSet:Set,he=null;function lo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){mt(e,t,n)}else r.current=null}function Am(e,t,r){try{r()}catch(n){mt(e,t,n)}}var Fw=!1;function bA(e,t){if(mm=Pd,e=aj(),uv(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,h=0,f=e,p=null;t:for(;;){for(var m;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==a||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break t;if(p===r&&++u===s&&(l=o),p===a&&++h===n&&(c=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(gm={focusedElem:e,selectionRange:r},Pd=!1,he=t;he!==null;)if(t=he,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,he=e;else for(;he!==null;){t=he;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var g=w.memoizedProps,v=w.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:gn(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(_){mt(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,he=e;break}he=t.return}return w=Fw,Fw=!1,w}function Xl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&Am(t,r,a)}s=s.next}while(s!==n)}}function Lh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Im(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function r1(e){var t=e.alternate;t!==null&&(e.alternate=null,r1(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Fn],delete t[yc],delete t[xm],delete t[nA],delete t[sA])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function n1(e){return e.tag===5||e.tag===3||e.tag===4}function Uw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||n1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Om(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Id));else if(n!==4&&(e=e.child,e!==null))for(Om(e,t,r),e=e.sibling;e!==null;)Om(e,t,r),e=e.sibling}function Mm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Mm(e,t,r),e=e.sibling;e!==null;)Mm(e,t,r),e=e.sibling}var Ht=null,wn=!1;function Cs(e,t,r){for(r=r.child;r!==null;)s1(e,t,r),r=r.sibling}function s1(e,t,r){if(zn&&typeof zn.onCommitFiberUnmount=="function")try{zn.onCommitFiberUnmount(Th,r)}catch{}switch(r.tag){case 5:tr||lo(r,t);case 6:var n=Ht,s=wn;Ht=null,Cs(e,t,r),Ht=n,wn=s,Ht!==null&&(wn?(e=Ht,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ht.removeChild(r.stateNode));break;case 18:Ht!==null&&(wn?(e=Ht,r=r.stateNode,e.nodeType===8?sp(e.parentNode,r):e.nodeType===1&&sp(e,r),fc(e)):sp(Ht,r.stateNode));break;case 4:n=Ht,s=wn,Ht=r.stateNode.containerInfo,wn=!0,Cs(e,t,r),Ht=n,wn=s;break;case 0:case 11:case 14:case 15:if(!tr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Am(r,t,o),s=s.next}while(s!==n)}Cs(e,t,r);break;case 1:if(!tr&&(lo(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){mt(r,t,l)}Cs(e,t,r);break;case 21:Cs(e,t,r);break;case 22:r.mode&1?(tr=(n=tr)||r.memoizedState!==null,Cs(e,t,r),tr=n):Cs(e,t,r);break;default:Cs(e,t,r)}}function Bw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new wA),t.forEach(function(n){var s=PA.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function hn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ht=l.stateNode,wn=!1;break e;case 3:Ht=l.stateNode.containerInfo,wn=!0;break e;case 4:Ht=l.stateNode.containerInfo,wn=!0;break e}l=l.return}if(Ht===null)throw Error(ee(160));s1(a,o,s),Ht=null,wn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){mt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)i1(t,e),t=t.sibling}function i1(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hn(t,e),On(e),n&4){try{Xl(3,e,e.return),Lh(3,e)}catch(g){mt(e,e.return,g)}try{Xl(5,e,e.return)}catch(g){mt(e,e.return,g)}}break;case 1:hn(t,e),On(e),n&512&&r!==null&&lo(r,r.return);break;case 5:if(hn(t,e),On(e),n&512&&r!==null&&lo(r,r.return),e.flags&32){var s=e.stateNode;try{cc(s,"")}catch(g){mt(e,e.return,g)}}if(n&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,o=r!==null?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&C_(s,a),im(l,o);var u=im(l,a);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?A_(s,f):h==="dangerouslySetInnerHTML"?P_(s,f):h==="children"?cc(s,f):Jg(s,h,f,u)}switch(l){case"input":em(s,a);break;case"textarea":E_(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?fo(s,!!a.multiple,m,!1):p!==!!a.multiple&&(a.defaultValue!=null?fo(s,!!a.multiple,a.defaultValue,!0):fo(s,!!a.multiple,a.multiple?[]:"",!1))}s[yc]=a}catch(g){mt(e,e.return,g)}}break;case 6:if(hn(t,e),On(e),n&4){if(e.stateNode===null)throw Error(ee(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){mt(e,e.return,g)}}break;case 3:if(hn(t,e),On(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{fc(t.containerInfo)}catch(g){mt(e,e.return,g)}break;case 4:hn(t,e),On(e);break;case 13:hn(t,e),On(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Pv=xt())),n&4&&Bw(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(tr=(u=tr)||h,hn(t,e),tr=u):hn(t,e),On(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(he=e,h=e.child;h!==null;){for(f=he=h;he!==null;){switch(p=he,m=p.child,p.tag){case 0:case 11:case 14:case 15:Xl(4,p,p.return);break;case 1:lo(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(g){mt(n,r,g)}}break;case 5:lo(p,p.return);break;case 22:if(p.memoizedState!==null){qw(f);continue}}m!==null?(m.return=p,he=m):qw(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=R_("display",o))}catch(g){mt(e,e.return,g)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){mt(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:hn(t,e),On(e),n&4&&Bw(e);break;case 21:break;default:hn(t,e),On(e)}}function On(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(n1(r)){var n=r;break e}r=r.return}throw Error(ee(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(cc(s,""),n.flags&=-33);var a=Uw(e);Mm(e,a,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Uw(e);Om(e,l,o);break;default:throw Error(ee(161))}}catch(c){mt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _A(e,t,r){he=e,a1(e)}function a1(e,t,r){for(var n=(e.mode&1)!==0;he!==null;){var s=he,a=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||zu;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||tr;l=zu;var u=tr;if(zu=o,(tr=c)&&!u)for(he=s;he!==null;)o=he,c=o.child,o.tag===22&&o.memoizedState!==null?Ww(s):c!==null?(c.return=o,he=c):Ww(s);for(;a!==null;)he=a,a1(a),a=a.sibling;he=s,zu=l,tr=u}zw(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,he=a):zw(e)}}function zw(e){for(;he!==null;){var t=he;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:tr||Lh(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!tr)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:gn(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&kw(t,a,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}kw(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&fc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}tr||t.flags&512&&Im(t)}catch(p){mt(t,t.return,p)}}if(t===e){he=null;break}if(r=t.sibling,r!==null){r.return=t.return,he=r;break}he=t.return}}function qw(e){for(;he!==null;){var t=he;if(t===e){he=null;break}var r=t.sibling;if(r!==null){r.return=t.return,he=r;break}he=t.return}}function Ww(e){for(;he!==null;){var t=he;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Lh(4,t)}catch(c){mt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){mt(t,s,c)}}var a=t.return;try{Im(t)}catch(c){mt(t,a,c)}break;case 5:var o=t.return;try{Im(t)}catch(c){mt(t,o,c)}}}catch(c){mt(t,t.return,c)}if(t===e){he=null;break}var l=t.sibling;if(l!==null){l.return=t.return,he=l;break}he=t.return}}var jA=Math.ceil,Wd=_s.ReactCurrentDispatcher,Ev=_s.ReactCurrentOwner,tn=_s.ReactCurrentBatchConfig,qe=0,Ft=null,jt=null,Gt=0,Mr=0,co=bi(0),Ot=0,Sc=null,la=0,$h=0,Tv=0,Zl=null,_r=null,Pv=0,qo=1/0,ss=null,Vd=!1,Dm=null,ni=null,qu=!1,Qs=null,Hd=0,ec=0,Lm=null,md=-1,gd=0;function hr(){return qe&6?xt():md!==-1?md:md=xt()}function si(e){return e.mode&1?qe&2&&Gt!==0?Gt&-Gt:aA.transition!==null?(gd===0&&(gd=W_()),gd):(e=Qe,e!==0||(e=window.event,e=e===void 0?16:J_(e.type)),e):1}function Nn(e,t,r,n){if(50<ec)throw ec=0,Lm=null,Error(ee(185));Yc(e,r,n),(!(qe&2)||e!==Ft)&&(e===Ft&&(!(qe&2)&&($h|=r),Ot===4&&Ls(e,Gt)),Cr(e,n),r===1&&qe===0&&!(t.mode&1)&&(qo=xt()+500,Oh&&_i()))}function Cr(e,t){var r=e.callbackNode;aR(e,t);var n=Td(e,e===Ft?Gt:0);if(n===0)r!==null&&Zx(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Zx(r),t===1)e.tag===0?iA(Vw.bind(null,e)):gj(Vw.bind(null,e)),tA(function(){!(qe&6)&&_i()}),r=null;else{switch(V_(n)){case 1:r=rv;break;case 4:r=z_;break;case 16:r=Ed;break;case 536870912:r=q_;break;default:r=Ed}r=p1(r,o1.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function o1(e,t){if(md=-1,gd=0,qe&6)throw Error(ee(327));var r=e.callbackNode;if(yo()&&e.callbackNode!==r)return null;var n=Td(e,e===Ft?Gt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Kd(e,n);else{t=n;var s=qe;qe|=2;var a=c1();(Ft!==e||Gt!==t)&&(ss=null,qo=xt()+500,ta(e,t));do try{kA();break}catch(l){l1(e,l)}while(!0);mv(),Wd.current=a,qe=s,jt!==null?t=0:(Ft=null,Gt=0,t=Ot)}if(t!==0){if(t===2&&(s=um(e),s!==0&&(n=s,t=$m(e,s))),t===1)throw r=Sc,ta(e,0),Ls(e,n),Cr(e,xt()),r;if(t===6)Ls(e,n);else{if(s=e.current.alternate,!(n&30)&&!SA(s)&&(t=Kd(e,n),t===2&&(a=um(e),a!==0&&(n=a,t=$m(e,a))),t===1))throw r=Sc,ta(e,0),Ls(e,n),Cr(e,xt()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(ee(345));case 2:Di(e,_r,ss);break;case 3:if(Ls(e,n),(n&130023424)===n&&(t=Pv+500-xt(),10<t)){if(Td(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){hr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ym(Di.bind(null,e,_r,ss),t);break}Di(e,_r,ss);break;case 4:if(Ls(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-Sn(n);a=1<<o,o=t[o],o>s&&(s=o),n&=~a}if(n=s,n=xt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*jA(n/1960))-n,10<n){e.timeoutHandle=ym(Di.bind(null,e,_r,ss),n);break}Di(e,_r,ss);break;case 5:Di(e,_r,ss);break;default:throw Error(ee(329))}}}return Cr(e,xt()),e.callbackNode===r?o1.bind(null,e):null}function $m(e,t){var r=Zl;return e.current.memoizedState.isDehydrated&&(ta(e,t).flags|=256),e=Kd(e,t),e!==2&&(t=_r,_r=r,t!==null&&Fm(t)),e}function Fm(e){_r===null?_r=e:_r.push.apply(_r,e)}function SA(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!kn(a(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ls(e,t){for(t&=~Tv,t&=~$h,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Sn(t),n=1<<r;e[r]=-1,t&=~n}}function Vw(e){if(qe&6)throw Error(ee(327));yo();var t=Td(e,0);if(!(t&1))return Cr(e,xt()),null;var r=Kd(e,t);if(e.tag!==0&&r===2){var n=um(e);n!==0&&(t=n,r=$m(e,n))}if(r===1)throw r=Sc,ta(e,0),Ls(e,t),Cr(e,xt()),r;if(r===6)throw Error(ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Di(e,_r,ss),Cr(e,xt()),null}function Rv(e,t){var r=qe;qe|=1;try{return e(t)}finally{qe=r,qe===0&&(qo=xt()+500,Oh&&_i())}}function ca(e){Qs!==null&&Qs.tag===0&&!(qe&6)&&yo();var t=qe;qe|=1;var r=tn.transition,n=Qe;try{if(tn.transition=null,Qe=1,e)return e()}finally{Qe=n,tn.transition=r,qe=t,!(qe&6)&&_i()}}function Av(){Mr=co.current,at(co)}function ta(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,eA(r)),jt!==null)for(r=jt.return;r!==null;){var n=r;switch(hv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Od();break;case 3:Bo(),at(Nr),at(nr),bv();break;case 5:wv(n);break;case 4:Bo();break;case 13:at(ct);break;case 19:at(ct);break;case 10:gv(n.type._context);break;case 22:case 23:Av()}r=r.return}if(Ft=e,jt=e=ii(e.current,null),Gt=Mr=t,Ot=0,Sc=null,Tv=$h=la=0,_r=Zl=null,qi!==null){for(t=0;t<qi.length;t++)if(r=qi[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,n.next=o}r.pending=n}qi=null}return e}function l1(e,t){do{var r=jt;try{if(mv(),hd.current=qd,zd){for(var n=ut.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}zd=!1}if(oa=0,Lt=Rt=ut=null,Jl=!1,bc=0,Ev.current=null,r===null||r.return===null){Ot=1,Sc=t,jt=null;break}e:{var a=e,o=r.return,l=r,c=t;if(t=Gt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=Aw(o);if(m!==null){m.flags&=-257,Iw(m,o,l,a,t),m.mode&1&&Rw(a,u,t),t=m,c=u;var w=t.updateQueue;if(w===null){var g=new Set;g.add(c),t.updateQueue=g}else w.add(c);break e}else{if(!(t&1)){Rw(a,u,t),Iv();break e}c=Error(ee(426))}}else if(ot&&l.mode&1){var v=Aw(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Iw(v,o,l,a,t),fv(zo(c,l));break e}}a=c=zo(c,l),Ot!==4&&(Ot=2),Zl===null?Zl=[a]:Zl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var y=Vj(a,c,t);Nw(a,y);break e;case 1:l=c;var x=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ni===null||!ni.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t;var _=Hj(a,l,t);Nw(a,_);break e}}a=a.return}while(a!==null)}d1(r)}catch(S){t=S,jt===r&&r!==null&&(jt=r=r.return);continue}break}while(!0)}function c1(){var e=Wd.current;return Wd.current=qd,e===null?qd:e}function Iv(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),Ft===null||!(la&268435455)&&!($h&268435455)||Ls(Ft,Gt)}function Kd(e,t){var r=qe;qe|=2;var n=c1();(Ft!==e||Gt!==t)&&(ss=null,ta(e,t));do try{NA();break}catch(s){l1(e,s)}while(!0);if(mv(),qe=r,Wd.current=n,jt!==null)throw Error(ee(261));return Ft=null,Gt=0,Ot}function NA(){for(;jt!==null;)u1(jt)}function kA(){for(;jt!==null&&!JP();)u1(jt)}function u1(e){var t=f1(e.alternate,e,Mr);e.memoizedProps=e.pendingProps,t===null?d1(e):jt=t,Ev.current=null}function d1(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=xA(r,t),r!==null){r.flags&=32767,jt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ot=6,jt=null;return}}else if(r=yA(r,t,Mr),r!==null){jt=r;return}if(t=t.sibling,t!==null){jt=t;return}jt=t=e}while(t!==null);Ot===0&&(Ot=5)}function Di(e,t,r){var n=Qe,s=tn.transition;try{tn.transition=null,Qe=1,CA(e,t,r,n)}finally{tn.transition=s,Qe=n}return null}function CA(e,t,r,n){do yo();while(Qs!==null);if(qe&6)throw Error(ee(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ee(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(oR(e,a),e===Ft&&(jt=Ft=null,Gt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||qu||(qu=!0,p1(Ed,function(){return yo(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=tn.transition,tn.transition=null;var o=Qe;Qe=1;var l=qe;qe|=4,Ev.current=null,bA(e,r),i1(r,e),KR(gm),Pd=!!mm,gm=mm=null,e.current=r,_A(r),XP(),qe=l,Qe=o,tn.transition=a}else e.current=r;if(qu&&(qu=!1,Qs=e,Hd=s),a=e.pendingLanes,a===0&&(ni=null),tR(r.stateNode),Cr(e,xt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Vd)throw Vd=!1,e=Dm,Dm=null,e;return Hd&1&&e.tag!==0&&yo(),a=e.pendingLanes,a&1?e===Lm?ec++:(ec=0,Lm=e):ec=0,_i(),null}function yo(){if(Qs!==null){var e=V_(Hd),t=tn.transition,r=Qe;try{if(tn.transition=null,Qe=16>e?16:e,Qs===null)var n=!1;else{if(e=Qs,Qs=null,Hd=0,qe&6)throw Error(ee(331));var s=qe;for(qe|=4,he=e.current;he!==null;){var a=he,o=a.child;if(he.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(he=u;he!==null;){var h=he;switch(h.tag){case 0:case 11:case 15:Xl(8,h,a)}var f=h.child;if(f!==null)f.return=h,he=f;else for(;he!==null;){h=he;var p=h.sibling,m=h.return;if(r1(h),h===u){he=null;break}if(p!==null){p.return=m,he=p;break}he=m}}}var w=a.alternate;if(w!==null){var g=w.child;if(g!==null){w.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}he=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,he=o;else e:for(;he!==null;){if(a=he,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Xl(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,he=y;break e}he=a.return}}var x=e.current;for(he=x;he!==null;){o=he;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,he=b;else e:for(o=x;he!==null;){if(l=he,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Lh(9,l)}}catch(S){mt(l,l.return,S)}if(l===o){he=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,he=_;break e}he=l.return}}if(qe=s,_i(),zn&&typeof zn.onPostCommitFiberRoot=="function")try{zn.onPostCommitFiberRoot(Th,e)}catch{}n=!0}return n}finally{Qe=r,tn.transition=t}}return!1}function Hw(e,t,r){t=zo(r,t),t=Vj(e,t,1),e=ri(e,t,1),t=hr(),e!==null&&(Yc(e,1,t),Cr(e,t))}function mt(e,t,r){if(e.tag===3)Hw(e,e,r);else for(;t!==null;){if(t.tag===3){Hw(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ni===null||!ni.has(n))){e=zo(r,e),e=Hj(t,e,1),t=ri(t,e,1),e=hr(),t!==null&&(Yc(t,1,e),Cr(t,e));break}}t=t.return}}function EA(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=hr(),e.pingedLanes|=e.suspendedLanes&r,Ft===e&&(Gt&r)===r&&(Ot===4||Ot===3&&(Gt&130023424)===Gt&&500>xt()-Pv?ta(e,0):Tv|=r),Cr(e,t)}function h1(e,t){t===0&&(e.mode&1?(t=Iu,Iu<<=1,!(Iu&130023424)&&(Iu=4194304)):t=1);var r=hr();e=ms(e,t),e!==null&&(Yc(e,t,r),Cr(e,r))}function TA(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),h1(e,r)}function PA(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ee(314))}n!==null&&n.delete(t),h1(e,r)}var f1;f1=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Nr.current)jr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return jr=!1,vA(e,t,r);jr=!!(e.flags&131072)}else jr=!1,ot&&t.flags&1048576&&vj(t,Ld,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;pd(e,t),e=t.pendingProps;var s=$o(t,nr.current);vo(t,r),s=jv(null,t,n,e,s,r);var a=Sv();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,kr(n)?(a=!0,Md(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,yv(t),s.updater=Dh,t.stateNode=s,s._reactInternals=t,Nm(t,n,e,r),t=Em(null,t,n,!0,a,r)):(t.tag=0,ot&&a&&dv(t),lr(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(pd(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=AA(n),e=gn(n,e),s){case 0:t=Cm(null,t,n,e,r);break e;case 1:t=Dw(null,t,n,e,r);break e;case 11:t=Ow(null,t,n,e,r);break e;case 14:t=Mw(null,t,n,gn(n.type,e),r);break e}throw Error(ee(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:gn(n,s),Cm(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:gn(n,s),Dw(e,t,n,s,r);case 3:e:{if(Qj(t),e===null)throw Error(ee(387));n=t.pendingProps,a=t.memoizedState,s=a.element,jj(e,t),Ud(t,n,null,r);var o=t.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=zo(Error(ee(423)),t),t=Lw(e,t,n,r,s);break e}else if(n!==s){s=zo(Error(ee(424)),t),t=Lw(e,t,n,r,s);break e}else for(Fr=ti(t.stateNode.containerInfo.firstChild),Ur=t,ot=!0,_n=null,r=bj(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Fo(),n===s){t=gs(e,t,r);break e}lr(e,t,n,r)}t=t.child}return t;case 5:return Sj(t),e===null&&_m(t),n=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,o=s.children,vm(n,s)?o=null:a!==null&&vm(n,a)&&(t.flags|=32),Yj(e,t),lr(e,t,o,r),t.child;case 6:return e===null&&_m(t),null;case 13:return Jj(e,t,r);case 4:return xv(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Uo(t,null,n,r):lr(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:gn(n,s),Ow(e,t,n,s,r);case 7:return lr(e,t,t.pendingProps,r),t.child;case 8:return lr(e,t,t.pendingProps.children,r),t.child;case 12:return lr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,rt($d,n._currentValue),n._currentValue=o,a!==null)if(kn(a.value,o)){if(a.children===s.children&&!Nr.current){t=gs(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=ds(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),jm(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ee(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),jm(o,r,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}lr(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,vo(t,r),s=an(s),n=n(s),t.flags|=1,lr(e,t,n,r),t.child;case 14:return n=t.type,s=gn(n,t.pendingProps),s=gn(n.type,s),Mw(e,t,n,s,r);case 15:return Kj(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:gn(n,s),pd(e,t),t.tag=1,kr(n)?(e=!0,Md(t)):e=!1,vo(t,r),Wj(t,n,s),Nm(t,n,s,r),Em(null,t,n,!0,e,r);case 19:return Xj(e,t,r);case 22:return Gj(e,t,r)}throw Error(ee(156,t.tag))};function p1(e,t){return B_(e,t)}function RA(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(e,t,r,n){return new RA(e,t,r,n)}function Ov(e){return e=e.prototype,!(!e||!e.isReactComponent)}function AA(e){if(typeof e=="function")return Ov(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Zg)return 11;if(e===ev)return 14}return 2}function ii(e,t){var r=e.alternate;return r===null?(r=Zr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function vd(e,t,r,n,s,a){var o=2;if(n=e,typeof e=="function")Ov(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Za:return ra(r.children,s,a,t);case Xg:o=8,s|=8;break;case Yp:return e=Zr(12,r,t,s|2),e.elementType=Yp,e.lanes=a,e;case Qp:return e=Zr(13,r,t,s),e.elementType=Qp,e.lanes=a,e;case Jp:return e=Zr(19,r,t,s),e.elementType=Jp,e.lanes=a,e;case S_:return Fh(r,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case __:o=10;break e;case j_:o=9;break e;case Zg:o=11;break e;case ev:o=14;break e;case Is:o=16,n=null;break e}throw Error(ee(130,e==null?e:typeof e,""))}return t=Zr(o,r,t,s),t.elementType=e,t.type=n,t.lanes=a,t}function ra(e,t,r,n){return e=Zr(7,e,n,t),e.lanes=r,e}function Fh(e,t,r,n){return e=Zr(22,e,n,t),e.elementType=S_,e.lanes=r,e.stateNode={isHidden:!1},e}function hp(e,t,r){return e=Zr(6,e,null,t),e.lanes=r,e}function fp(e,t,r){return t=Zr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function IA(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kf(0),this.expirationTimes=Kf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kf(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Mv(e,t,r,n,s,a,o,l,c){return e=new IA(e,t,r,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Zr(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},yv(a),e}function OA(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xa,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function m1(e){if(!e)return hi;e=e._reactInternals;e:{if(_a(e)!==e||e.tag!==1)throw Error(ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(kr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ee(171))}if(e.tag===1){var r=e.type;if(kr(r))return mj(e,r,t)}return t}function g1(e,t,r,n,s,a,o,l,c){return e=Mv(r,n,!0,e,s,a,o,l,c),e.context=m1(null),r=e.current,n=hr(),s=si(r),a=ds(n,s),a.callback=t??null,ri(r,a,s),e.current.lanes=s,Yc(e,s,n),Cr(e,n),e}function Uh(e,t,r,n){var s=t.current,a=hr(),o=si(s);return r=m1(r),t.context===null?t.context=r:t.pendingContext=r,t=ds(a,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ri(s,t,o),e!==null&&(Nn(e,s,o,a),dd(e,s,o)),o}function Gd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Kw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Dv(e,t){Kw(e,t),(e=e.alternate)&&Kw(e,t)}function MA(){return null}var v1=typeof reportError=="function"?reportError:function(e){console.error(e)};function Lv(e){this._internalRoot=e}Bh.prototype.render=Lv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ee(409));Uh(e,t,null,null)};Bh.prototype.unmount=Lv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ca(function(){Uh(null,e,null,null)}),t[ps]=null}};function Bh(e){this._internalRoot=e}Bh.prototype.unstable_scheduleHydration=function(e){if(e){var t=G_();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ds.length&&t!==0&&t<Ds[r].priority;r++);Ds.splice(r,0,e),r===0&&Q_(e)}};function $v(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function zh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Gw(){}function DA(e,t,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var u=Gd(o);a.call(u)}}var o=g1(t,n,e,0,null,!1,!1,"",Gw);return e._reactRootContainer=o,e[ps]=o.current,gc(e.nodeType===8?e.parentNode:e),ca(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Gd(c);l.call(u)}}var c=Mv(e,0,!1,null,null,!1,!1,"",Gw);return e._reactRootContainer=c,e[ps]=c.current,gc(e.nodeType===8?e.parentNode:e),ca(function(){Uh(t,c,r,n)}),c}function qh(e,t,r,n,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=Gd(o);l.call(c)}}Uh(t,o,e,s)}else o=DA(r,t,e,s,n);return Gd(o)}H_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ul(t.pendingLanes);r!==0&&(nv(t,r|1),Cr(t,xt()),!(qe&6)&&(qo=xt()+500,_i()))}break;case 13:ca(function(){var n=ms(e,1);if(n!==null){var s=hr();Nn(n,e,1,s)}}),Dv(e,1)}};sv=function(e){if(e.tag===13){var t=ms(e,134217728);if(t!==null){var r=hr();Nn(t,e,134217728,r)}Dv(e,134217728)}};K_=function(e){if(e.tag===13){var t=si(e),r=ms(e,t);if(r!==null){var n=hr();Nn(r,e,t,n)}Dv(e,t)}};G_=function(){return Qe};Y_=function(e,t){var r=Qe;try{return Qe=e,t()}finally{Qe=r}};om=function(e,t,r){switch(t){case"input":if(em(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Ih(n);if(!s)throw Error(ee(90));k_(n),em(n,s)}}}break;case"textarea":E_(e,r);break;case"select":t=r.value,t!=null&&fo(e,!!r.multiple,t,!1)}};M_=Rv;D_=ca;var LA={usingClientEntryPoint:!1,Events:[Jc,no,Ih,I_,O_,Rv]},Tl={findFiberByHostInstance:zi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$A={bundleType:Tl.bundleType,version:Tl.version,rendererPackageName:Tl.rendererPackageName,rendererConfig:Tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_s.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=F_(e),e===null?null:e.stateNode},findFiberByHostInstance:Tl.findFiberByHostInstance||MA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wu.isDisabled&&Wu.supportsFiber)try{Th=Wu.inject($A),zn=Wu}catch{}}Vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LA;Vr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$v(t))throw Error(ee(200));return OA(e,t,null,r)};Vr.createRoot=function(e,t){if(!$v(e))throw Error(ee(299));var r=!1,n="",s=v1;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Mv(e,1,!1,null,null,r,!1,n,s),e[ps]=t.current,gc(e.nodeType===8?e.parentNode:e),new Lv(t)};Vr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ee(188)):(e=Object.keys(e).join(","),Error(ee(268,e)));return e=F_(t),e=e===null?null:e.stateNode,e};Vr.flushSync=function(e){return ca(e)};Vr.hydrate=function(e,t,r){if(!zh(t))throw Error(ee(200));return qh(null,e,t,!0,r)};Vr.hydrateRoot=function(e,t,r){if(!$v(e))throw Error(ee(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",o=v1;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=g1(t,null,e,1,r??null,s,!1,a,o),e[ps]=t.current,gc(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Bh(t)};Vr.render=function(e,t,r){if(!zh(t))throw Error(ee(200));return qh(null,e,t,!1,r)};Vr.unmountComponentAtNode=function(e){if(!zh(e))throw Error(ee(40));return e._reactRootContainer?(ca(function(){qh(null,null,e,!1,function(){e._reactRootContainer=null,e[ps]=null})}),!0):!1};Vr.unstable_batchedUpdates=Rv;Vr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!zh(r))throw Error(ee(200));if(e==null||e._reactInternals===void 0)throw Error(ee(38));return qh(e,t,r,!1,n)};Vr.version="18.3.1-next-f1338f8080-20240426";function y1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(y1)}catch(e){console.error(e)}}y1(),y_.exports=Vr;var Tn=y_.exports;const x1=a_(Tn);var w1,Yw=Tn;w1=Yw.createRoot,Yw.hydrateRoot;const FA=1,UA=1e6;let pp=0;function BA(){return pp=(pp+1)%Number.MAX_SAFE_INTEGER,pp.toString()}const mp=new Map,Qw=e=>{if(mp.has(e))return;const t=setTimeout(()=>{mp.delete(e),tc({type:"REMOVE_TOAST",toastId:e})},UA);mp.set(e,t)},zA=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,FA)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Qw(r):e.toasts.forEach(n=>{Qw(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},yd=[];let xd={toasts:[]};function tc(e){xd=zA(xd,e),yd.forEach(t=>{t(xd)})}function qA({...e}){const t=BA(),r=s=>tc({type:"UPDATE_TOAST",toast:{...s,id:t}}),n=()=>tc({type:"DISMISS_TOAST",toastId:t});return tc({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||n()}}}),{id:t,dismiss:n,update:r}}function St(){const[e,t]=d.useState(xd);return d.useEffect(()=>(yd.push(t),()=>{const r=yd.indexOf(t);r>-1&&yd.splice(r,1)}),[e]),{...e,toast:qA,dismiss:r=>tc({type:"DISMISS_TOAST",toastId:r})}}function Z(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Jw(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function vs(...e){return t=>{let r=!1;const n=e.map(s=>{const a=Jw(s,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let s=0;s<n.length;s++){const a=n[s];typeof a=="function"?a():Jw(e[s],null)}}}}function Se(...e){return d.useCallback(vs(...e),e)}function WA(e,t){const r=d.createContext(t),n=a=>{const{children:o,...l}=a,c=d.useMemo(()=>l,Object.values(l));return i.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function s(a){const o=d.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[n,s]}function Nt(e,t=[]){let r=[];function n(a,o){const l=d.createContext(o),c=r.length;r=[...r,o];const u=f=>{var y;const{scope:p,children:m,...w}=f,g=((y=p==null?void 0:p[e])==null?void 0:y[c])||l,v=d.useMemo(()=>w,Object.values(w));return i.jsx(g.Provider,{value:v,children:m})};u.displayName=a+"Provider";function h(f,p){var g;const m=((g=p==null?void 0:p[e])==null?void 0:g[c])||l,w=d.useContext(m);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[u,h]}const s=()=>{const a=r.map(o=>d.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,VA(s,...t)]}function VA(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function fi(e){const t=KA(e),r=d.forwardRef((n,s)=>{const{children:a,...o}=n,l=d.Children.toArray(a),c=l.find(GA);if(c){const u=c.props.children,h=l.map(f=>f===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:f);return i.jsx(t,{...o,ref:s,children:d.isValidElement(u)?d.cloneElement(u,void 0,h):null})}return i.jsx(t,{...o,ref:s,children:a})});return r.displayName=`${e}.Slot`,r}var HA=fi("Slot");function KA(e){const t=d.forwardRef((r,n)=>{const{children:s,...a}=r;if(d.isValidElement(s)){const o=QA(s),l=YA(a,s.props);return s.type!==d.Fragment&&(l.ref=n?vs(n,o):o),d.cloneElement(s,l)}return d.Children.count(s)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var b1=Symbol("radix.slottable");function _1(e){const t=({children:r})=>i.jsx(i.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=b1,t}function GA(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===b1}function YA(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}function QA(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Zc(e){const t=e+"CollectionProvider",[r,n]=Nt(t),[s,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:v,children:y}=g,x=Y.useRef(null),b=Y.useRef(new Map).current;return i.jsx(s,{scope:v,itemMap:b,collectionRef:x,children:y})};o.displayName=t;const l=e+"CollectionSlot",c=fi(l),u=Y.forwardRef((g,v)=>{const{scope:y,children:x}=g,b=a(l,y),_=Se(v,b.collectionRef);return i.jsx(c,{ref:_,children:x})});u.displayName=l;const h=e+"CollectionItemSlot",f="data-radix-collection-item",p=fi(h),m=Y.forwardRef((g,v)=>{const{scope:y,children:x,...b}=g,_=Y.useRef(null),S=Se(v,_),j=a(h,y);return Y.useEffect(()=>(j.itemMap.set(_,{ref:_,...b}),()=>void j.itemMap.delete(_))),i.jsx(p,{[f]:"",ref:S,children:x})});m.displayName=h;function w(g){const v=a(e+"CollectionConsumer",g);return Y.useCallback(()=>{const x=v.collectionRef.current;if(!x)return[];const b=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(v.itemMap.values()).sort((j,N)=>b.indexOf(j.ref.current)-b.indexOf(N.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},w,n]}var JA=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],se=JA.reduce((e,t)=>{const r=fi(`Primitive.${t}`),n=d.forwardRef((s,a)=>{const{asChild:o,...l}=s,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Fv(e,t){e&&Tn.flushSync(()=>e.dispatchEvent(t))}function gt(e){const t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function XA(e,t=globalThis==null?void 0:globalThis.document){const r=gt(e);d.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var ZA="DismissableLayer",Um="dismissableLayer.update",eI="dismissableLayer.pointerDownOutside",tI="dismissableLayer.focusOutside",Xw,j1=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ja=d.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=e,u=d.useContext(j1),[h,f]=d.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=d.useState({}),w=Se(t,N=>f(N)),g=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(v),x=h?g.indexOf(h):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,_=x>=y,S=nI(N=>{const k=N.target,R=[...u.branches].some(E=>E.contains(k));!_||R||(s==null||s(N),o==null||o(N),N.defaultPrevented||l==null||l())},p),j=sI(N=>{const k=N.target;[...u.branches].some(E=>E.contains(k))||(a==null||a(N),o==null||o(N),N.defaultPrevented||l==null||l())},p);return XA(N=>{x===u.layers.size-1&&(n==null||n(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},p),d.useEffect(()=>{if(h)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Xw=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),Zw(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=Xw)}},[h,p,r,u]),d.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),Zw())},[h,u]),d.useEffect(()=>{const N=()=>m({});return document.addEventListener(Um,N),()=>document.removeEventListener(Um,N)},[]),i.jsx(se.div,{...c,ref:w,style:{pointerEvents:b?_?"auto":"none":void 0,...e.style},onFocusCapture:Z(e.onFocusCapture,j.onFocusCapture),onBlurCapture:Z(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:Z(e.onPointerDownCapture,S.onPointerDownCapture)})});ja.displayName=ZA;var rI="DismissableLayerBranch",S1=d.forwardRef((e,t)=>{const r=d.useContext(j1),n=d.useRef(null),s=Se(t,n);return d.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),i.jsx(se.div,{...e,ref:s})});S1.displayName=rI;function nI(e,t=globalThis==null?void 0:globalThis.document){const r=gt(e),n=d.useRef(!1),s=d.useRef(()=>{});return d.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let c=function(){N1(eI,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function sI(e,t=globalThis==null?void 0:globalThis.document){const r=gt(e),n=d.useRef(!1);return d.useEffect(()=>{const s=a=>{a.target&&!n.current&&N1(tI,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Zw(){const e=new CustomEvent(Um);document.dispatchEvent(e)}function N1(e,t,r,{discrete:n}){const s=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Fv(s,a):s.dispatchEvent(a)}var iI=ja,aI=S1,yt=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{},oI="Portal",el=d.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,a]=d.useState(!1);yt(()=>a(!0),[]);const o=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?x1.createPortal(i.jsx(se.div,{...n,ref:t}),o):null});el.displayName=oI;function lI(e,t){return d.useReducer((r,n)=>t[r][n]??r,e)}var Dt=e=>{const{present:t,children:r}=e,n=cI(t),s=typeof r=="function"?r({present:n.isPresent}):d.Children.only(r),a=Se(n.ref,uI(s));return typeof r=="function"||n.isPresent?d.cloneElement(s,{ref:a}):null};Dt.displayName="Presence";function cI(e){const[t,r]=d.useState(),n=d.useRef(null),s=d.useRef(e),a=d.useRef("none"),o=e?"mounted":"unmounted",[l,c]=lI(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const u=Vu(n.current);a.current=l==="mounted"?u:"none"},[l]),yt(()=>{const u=n.current,h=s.current;if(h!==e){const p=a.current,m=Vu(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&p!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),yt(()=>{if(t){let u;const h=t.ownerDocument.defaultView??window,f=m=>{const g=Vu(n.current).includes(m.animationName);if(m.target===t&&g&&(c("ANIMATION_END"),!s.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},p=m=>{m.target===t&&(a.current=Vu(n.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{h.clearTimeout(u),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:d.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Vu(e){return(e==null?void 0:e.animationName)||"none"}function uI(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var dI=Gg[" useInsertionEffect ".trim().toString()]||yt;function sr({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,a,o]=hI({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:s;{const h=d.useRef(e!==void 0);d.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,n])}const u=d.useCallback(h=>{var f;if(l){const p=fI(h)?h(e):h;p!==e&&((f=o.current)==null||f.call(o,p))}else a(h)},[l,e,a,o]);return[c,u]}function hI({defaultProp:e,onChange:t}){const[r,n]=d.useState(e),s=d.useRef(r),a=d.useRef(t);return dI(()=>{a.current=t},[t]),d.useEffect(()=>{var o;s.current!==r&&((o=a.current)==null||o.call(a,r),s.current=r)},[r,s]),[r,n,a]}function fI(e){return typeof e=="function"}var k1=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),pI="VisuallyHidden",Wh=d.forwardRef((e,t)=>i.jsx(se.span,{...e,ref:t,style:{...k1,...e.style}}));Wh.displayName=pI;var mI=Wh,Uv="ToastProvider",[Bv,gI,vI]=Zc("Toast"),[C1,S9]=Nt("Toast",[vI]),[yI,Vh]=C1(Uv),E1=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:o}=e,[l,c]=d.useState(null),[u,h]=d.useState(0),f=d.useRef(!1),p=d.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Uv}\`. Expected non-empty \`string\`.`),i.jsx(Bv.Provider,{scope:t,children:i.jsx(yI,{scope:t,label:r,duration:n,swipeDirection:s,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:d.useCallback(()=>h(m=>m+1),[]),onToastRemove:d.useCallback(()=>h(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};E1.displayName=Uv;var T1="ToastViewport",xI=["F8"],Bm="toast.viewportPause",zm="toast.viewportResume",P1=d.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=xI,label:s="Notifications ({hotkey})",...a}=e,o=Vh(T1,r),l=gI(r),c=d.useRef(null),u=d.useRef(null),h=d.useRef(null),f=d.useRef(null),p=Se(t,f,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;d.useEffect(()=>{const v=y=>{var b;n.length!==0&&n.every(_=>y[_]||y.code===_)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[n]),d.useEffect(()=>{const v=c.current,y=f.current;if(w&&v&&y){const x=()=>{if(!o.isClosePausedRef.current){const j=new CustomEvent(Bm);y.dispatchEvent(j),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const j=new CustomEvent(zm);y.dispatchEvent(j),o.isClosePausedRef.current=!1}},_=j=>{!v.contains(j.relatedTarget)&&b()},S=()=>{v.contains(document.activeElement)||b()};return v.addEventListener("focusin",x),v.addEventListener("focusout",_),v.addEventListener("pointermove",x),v.addEventListener("pointerleave",S),window.addEventListener("blur",x),window.addEventListener("focus",b),()=>{v.removeEventListener("focusin",x),v.removeEventListener("focusout",_),v.removeEventListener("pointermove",x),v.removeEventListener("pointerleave",S),window.removeEventListener("blur",x),window.removeEventListener("focus",b)}}},[w,o.isClosePausedRef]);const g=d.useCallback(({tabbingDirection:v})=>{const x=l().map(b=>{const _=b.ref.current,S=[_,...AI(_)];return v==="forwards"?S:S.reverse()});return(v==="forwards"?x.reverse():x).flat()},[l]);return d.useEffect(()=>{const v=f.current;if(v){const y=x=>{var S,j,N;const b=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!b){const k=document.activeElement,R=x.shiftKey;if(x.target===v&&R){(S=u.current)==null||S.focus();return}const M=g({tabbingDirection:R?"backwards":"forwards"}),O=M.findIndex(C=>C===k);gp(M.slice(O+1))?x.preventDefault():R?(j=u.current)==null||j.focus():(N=h.current)==null||N.focus()}};return v.addEventListener("keydown",y),()=>v.removeEventListener("keydown",y)}},[l,g]),i.jsxs(aI,{ref:c,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&i.jsx(qm,{ref:u,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"forwards"});gp(v)}}),i.jsx(Bv.Slot,{scope:r,children:i.jsx(se.ol,{tabIndex:-1,...a,ref:p})}),w&&i.jsx(qm,{ref:h,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"backwards"});gp(v)}})]})});P1.displayName=T1;var R1="ToastFocusProxy",qm=d.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=e,a=Vh(R1,r);return i.jsx(Wh,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=a.viewport)!=null&&u.contains(l))&&n()}})});qm.displayName=R1;var eu="Toast",wI="toast.swipeStart",bI="toast.swipeMove",_I="toast.swipeCancel",jI="toast.swipeEnd",A1=d.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:a,...o}=e,[l,c]=sr({prop:n,defaultProp:s??!0,onChange:a,caller:eu});return i.jsx(Dt,{present:r||l,children:i.jsx(kI,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:gt(e.onPause),onResume:gt(e.onResume),onSwipeStart:Z(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Z(e.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Z(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Z(e.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});A1.displayName=eu;var[SI,NI]=C1(eu,{onClose(){}}),kI=d.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:m,...w}=e,g=Vh(eu,r),[v,y]=d.useState(null),x=Se(t,C=>y(C)),b=d.useRef(null),_=d.useRef(null),S=s||g.duration,j=d.useRef(0),N=d.useRef(S),k=d.useRef(0),{onToastAdd:R,onToastRemove:E}=g,$=gt(()=>{var D;(v==null?void 0:v.contains(document.activeElement))&&((D=g.viewport)==null||D.focus()),o()}),M=d.useCallback(C=>{!C||C===1/0||(window.clearTimeout(k.current),j.current=new Date().getTime(),k.current=window.setTimeout($,C))},[$]);d.useEffect(()=>{const C=g.viewport;if(C){const D=()=>{M(N.current),u==null||u()},I=()=>{const z=new Date().getTime()-j.current;N.current=N.current-z,window.clearTimeout(k.current),c==null||c()};return C.addEventListener(Bm,I),C.addEventListener(zm,D),()=>{C.removeEventListener(Bm,I),C.removeEventListener(zm,D)}}},[g.viewport,S,c,u,M]),d.useEffect(()=>{a&&!g.isClosePausedRef.current&&M(S)},[a,S,g.isClosePausedRef,M]),d.useEffect(()=>(R(),()=>E()),[R,E]);const O=d.useMemo(()=>v?F1(v):null,[v]);return g.viewport?i.jsxs(i.Fragment,{children:[O&&i.jsx(CI,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:O}),i.jsx(SI,{scope:r,onClose:$,children:Tn.createPortal(i.jsx(Bv.ItemSlot,{scope:r,children:i.jsx(iI,{asChild:!0,onEscapeKeyDown:Z(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||$(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(se.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...w,ref:x,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Z(e.onKeyDown,C=>{C.key==="Escape"&&(l==null||l(C.nativeEvent),C.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,$()))}),onPointerDown:Z(e.onPointerDown,C=>{C.button===0&&(b.current={x:C.clientX,y:C.clientY})}),onPointerMove:Z(e.onPointerMove,C=>{if(!b.current)return;const D=C.clientX-b.current.x,I=C.clientY-b.current.y,z=!!_.current,A=["left","right"].includes(g.swipeDirection),P=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,V=A?P(0,D):0,J=A?0:P(0,I),L=C.pointerType==="touch"?10:2,Q={x:V,y:J},q={originalEvent:C,delta:Q};z?(_.current=Q,Hu(bI,f,q,{discrete:!1})):e0(Q,g.swipeDirection,L)?(_.current=Q,Hu(wI,h,q,{discrete:!1}),C.target.setPointerCapture(C.pointerId)):(Math.abs(D)>L||Math.abs(I)>L)&&(b.current=null)}),onPointerUp:Z(e.onPointerUp,C=>{const D=_.current,I=C.target;if(I.hasPointerCapture(C.pointerId)&&I.releasePointerCapture(C.pointerId),_.current=null,b.current=null,D){const z=C.currentTarget,A={originalEvent:C,delta:D};e0(D,g.swipeDirection,g.swipeThreshold)?Hu(jI,m,A,{discrete:!0}):Hu(_I,p,A,{discrete:!0}),z.addEventListener("click",P=>P.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),CI=e=>{const{__scopeToast:t,children:r,...n}=e,s=Vh(eu,t),[a,o]=d.useState(!1),[l,c]=d.useState(!1);return PI(()=>o(!0)),d.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(el,{asChild:!0,children:i.jsx(Wh,{...n,children:a&&i.jsxs(i.Fragment,{children:[s.label," ",r]})})})},EI="ToastTitle",I1=d.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return i.jsx(se.div,{...n,ref:t})});I1.displayName=EI;var TI="ToastDescription",O1=d.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return i.jsx(se.div,{...n,ref:t})});O1.displayName=TI;var M1="ToastAction",D1=d.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?i.jsx($1,{altText:r,asChild:!0,children:i.jsx(zv,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${M1}\`. Expected non-empty \`string\`.`),null)});D1.displayName=M1;var L1="ToastClose",zv=d.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,s=NI(L1,r);return i.jsx($1,{asChild:!0,children:i.jsx(se.button,{type:"button",...n,ref:t,onClick:Z(e.onClick,s.onClose)})})});zv.displayName=L1;var $1=d.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...s}=e;return i.jsx(se.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:t})});function F1(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),RI(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",a=n.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...F1(n))}}),t}function Hu(e,t,r,{discrete:n}){const s=r.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Fv(s,a):s.dispatchEvent(a)}var e0=(e,t,r=0)=>{const n=Math.abs(e.x),s=Math.abs(e.y),a=n>s;return t==="left"||t==="right"?a&&n>r:!a&&s>r};function PI(e=()=>{}){const t=gt(e);yt(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function RI(e){return e.nodeType===e.ELEMENT_NODE}function AI(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function gp(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var II=E1,U1=P1,B1=A1,z1=I1,q1=O1,W1=D1,V1=zv;function H1(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=H1(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function K1(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=H1(e))&&(n&&(n+=" "),n+=t);return n}const t0=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,r0=K1,tl=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return r0(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:a}=t,o=Object.keys(s).map(u=>{const h=r==null?void 0:r[u],f=a==null?void 0:a[u];if(h===null)return null;const p=t0(h)||t0(f);return s[u][p]}),l=r&&Object.entries(r).reduce((u,h)=>{let[f,p]=h;return p===void 0||(u[f]=p),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,h)=>{let{class:f,className:p,...m}=h;return Object.entries(m).every(w=>{let[g,v]=w;return Array.isArray(v)?v.includes({...a,...l}[g]):{...a,...l}[g]===v})?[...u,f,p]:u},[]);return r0(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),G1=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=d.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:o,...l},c)=>d.createElement("svg",{ref:c,...MI,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:G1("lucide",s),...l},[...o.map(([u,h])=>d.createElement(u,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=(e,t)=>{const r=d.forwardRef(({className:n,...s},a)=>d.createElement(DI,{ref:a,iconNode:t,className:G1(`lucide-${OI(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=ie("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=ie("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=ie("Beaker",[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=ie("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=ie("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=ie("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=ie("BriefcaseBusiness",[["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M22 13a18.15 18.15 0 0 1-20 0",key:"12hx5q"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=ie("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=ie("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=ie("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=ie("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=ie("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=ie("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=ie("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=ie("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=ie("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=ie("FileStack",[["path",{d:"M21 7h-3a2 2 0 0 1-2-2V2",key:"9rb54x"}],["path",{d:"M21 6v6.5c0 .8-.7 1.5-1.5 1.5h-7c-.8 0-1.5-.7-1.5-1.5v-9c0-.8.7-1.5 1.5-1.5H17Z",key:"1059l0"}],["path",{d:"M7 8v8.8c0 .3.2.6.4.8.2.2.5.4.8.4H15",key:"16874u"}],["path",{d:"M3 12v8.8c0 .3.2.6.4.8.2.2.5.4.8.4H11",key:"k2ox98"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=ie("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=ie("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=ie("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=ie("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=ie("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=ie("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=ie("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=ie("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=ie("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=ie("LifeBuoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=ie("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=ie("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=ie("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=ie("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=ie("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=ie("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=ie("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=ie("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=ie("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=ie("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=ie("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=ie("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=ie("SearchCheck",[["path",{d:"m8 11 2 2 4-4",key:"1sed1v"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=ie("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=ie("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=ie("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=ie("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=ie("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=ie("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=ie("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=ie("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=ie("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=ie("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=ie("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=ie("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Kv="-",SO=e=>{const t=kO(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(Kv);return l[0]===""&&l.length!==1&&l.shift(),sS(l,t)||NO(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},sS=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?sS(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(Kv);return(o=t.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},s0=/^\[(.+)\]$/,NO=e=>{if(s0.test(e)){const t=s0.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},kO=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return EO(Object.entries(e.classGroups),r).forEach(([a,o])=>{Km(o,n,a,t)}),n},Km=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:i0(t,s);a.classGroupId=r;return}if(typeof s=="function"){if(CO(s)){Km(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([a,o])=>{Km(o,i0(t,a),r,n)})})},i0=(e,t)=>{let r=e;return t.split(Kv).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},CO=e=>e.isThemeGetter,EO=(e,t)=>t?e.map(([r,n])=>{const s=n.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[r,s]}):e,TO=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(a,o)=>{r.set(a,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(a){let o=r.get(a);if(o!==void 0)return o;if((o=n.get(a))!==void 0)return s(a,o),o},set(a,o){r.has(a)?r.set(a,o):s(a,o)}}},iS="!",PO=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],a=t.length,o=l=>{const c=[];let u=0,h=0,f;for(let v=0;v<l.length;v++){let y=l[v];if(u===0){if(y===s&&(n||l.slice(v,v+a)===t)){c.push(l.slice(h,v)),h=v+a;continue}if(y==="/"){f=v;continue}}y==="["?u++:y==="]"&&u--}const p=c.length===0?l:l.substring(h),m=p.startsWith(iS),w=m?p.substring(1):p,g=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:w,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:o}):o},RO=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},AO=e=>({cache:TO(e.cacheSize),parseClassName:PO(e),...SO(e)}),IO=/\s+/,OO=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,a=[],o=e.trim().split(IO);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=r(u);let w=!!m,g=n(w?p.substring(0,m):p);if(!g){if(!w){l=u+(l.length>0?" "+l:l);continue}if(g=n(p),!g){l=u+(l.length>0?" "+l:l);continue}w=!1}const v=RO(h).join(":"),y=f?v+iS:v,x=y+g;if(a.includes(x))continue;a.push(x);const b=s(g,w);for(let _=0;_<b.length;++_){const S=b[_];a.push(y+S)}l=u+(l.length>0?" "+l:l)}return l};function MO(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=aS(t))&&(n&&(n+=" "),n+=r);return n}const aS=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=aS(e[n]))&&(r&&(r+=" "),r+=t);return r};function DO(e,...t){let r,n,s,a=o;function o(c){const u=t.reduce((h,f)=>f(h),e());return r=AO(u),n=r.cache.get,s=r.cache.set,a=l,l(c)}function l(c){const u=n(c);if(u)return u;const h=OO(c,r);return s(c,h),h}return function(){return a(MO.apply(null,arguments))}}const st=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},oS=/^\[(?:([a-z-]+):)?(.+)\]$/i,LO=/^\d+\/\d+$/,$O=new Set(["px","full","screen"]),FO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,UO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,BO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,zO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,qO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,rs=e=>xo(e)||$O.has(e)||LO.test(e),Es=e=>sl(e,"length",JO),xo=e=>!!e&&!Number.isNaN(Number(e)),yp=e=>sl(e,"number",xo),Pl=e=>!!e&&Number.isInteger(Number(e)),WO=e=>e.endsWith("%")&&xo(e.slice(0,-1)),Te=e=>oS.test(e),Ts=e=>FO.test(e),VO=new Set(["length","size","percentage"]),HO=e=>sl(e,VO,lS),KO=e=>sl(e,"position",lS),GO=new Set(["image","url"]),YO=e=>sl(e,GO,ZO),QO=e=>sl(e,"",XO),Rl=()=>!0,sl=(e,t,r)=>{const n=oS.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},JO=e=>UO.test(e)&&!BO.test(e),lS=()=>!1,XO=e=>zO.test(e),ZO=e=>qO.test(e),e4=()=>{const e=st("colors"),t=st("spacing"),r=st("blur"),n=st("brightness"),s=st("borderColor"),a=st("borderRadius"),o=st("borderSpacing"),l=st("borderWidth"),c=st("contrast"),u=st("grayscale"),h=st("hueRotate"),f=st("invert"),p=st("gap"),m=st("gradientColorStops"),w=st("gradientColorStopPositions"),g=st("inset"),v=st("margin"),y=st("opacity"),x=st("padding"),b=st("saturate"),_=st("scale"),S=st("sepia"),j=st("skew"),N=st("space"),k=st("translate"),R=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",Te,t],M=()=>[Te,t],O=()=>["",rs,Es],C=()=>["auto",xo,Te],D=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],I=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>["start","end","center","between","around","evenly","stretch"],P=()=>["","0",Te],V=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[xo,Te];return{cacheSize:500,separator:":",theme:{colors:[Rl],spacing:[rs,Es],blur:["none","",Ts,Te],brightness:J(),borderColor:[e],borderRadius:["none","","full",Ts,Te],borderSpacing:M(),borderWidth:O(),contrast:J(),grayscale:P(),hueRotate:J(),invert:P(),gap:M(),gradientColorStops:[e],gradientColorStopPositions:[WO,Es],inset:$(),margin:$(),opacity:J(),padding:M(),saturate:J(),scale:J(),sepia:P(),skew:J(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",Te]}],container:["container"],columns:[{columns:[Ts]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...D(),Te]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Pl,Te]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Te]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",Pl,Te]}],"grid-cols":[{"grid-cols":[Rl]}],"col-start-end":[{col:["auto",{span:["full",Pl,Te]},Te]}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":[Rl]}],"row-start-end":[{row:["auto",{span:[Pl,Te]},Te]}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Te]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Te]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...A()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...A(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...A(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Te,t]}],"min-w":[{"min-w":[Te,t,"min","max","fit"]}],"max-w":[{"max-w":[Te,t,"none","full","min","max","fit","prose",{screen:[Ts]},Ts]}],h:[{h:[Te,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Te,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Te,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Te,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ts,Es]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",yp]}],"font-family":[{font:[Rl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Te]}],"line-clamp":[{"line-clamp":["none",xo,yp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",rs,Te]}],"list-image":[{"list-image":["none",Te]}],"list-style-type":[{list:["none","disc","decimal",Te]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...I(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",rs,Es]}],"underline-offset":[{"underline-offset":["auto",rs,Te]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Te]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Te]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...D(),KO]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",HO]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},YO]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...I(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:I()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...I()]}],"outline-offset":[{"outline-offset":[rs,Te]}],"outline-w":[{outline:[rs,Es]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[rs,Es]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ts,QO]}],"shadow-color":[{shadow:[Rl]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ts,Te]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Te]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",Te]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",Te]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Pl,Te]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Te]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Te]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Te]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[rs,Es,yp]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},t4=DO(e4);function H(...e){return t4(K1(e))}const r4=II,cS=d.forwardRef(({className:e,...t},r)=>i.jsx(U1,{ref:r,className:H("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));cS.displayName=U1.displayName;const n4=tl("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),uS=d.forwardRef(({className:e,variant:t,...r},n)=>i.jsx(B1,{ref:n,className:H(n4({variant:t}),e),...r}));uS.displayName=B1.displayName;const s4=d.forwardRef(({className:e,...t},r)=>i.jsx(W1,{ref:r,className:H("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));s4.displayName=W1.displayName;const dS=d.forwardRef(({className:e,...t},r)=>i.jsx(V1,{ref:r,className:H("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(rr,{className:"h-4 w-4"})}));dS.displayName=V1.displayName;const hS=d.forwardRef(({className:e,...t},r)=>i.jsx(z1,{ref:r,className:H("text-sm font-semibold",e),...t}));hS.displayName=z1.displayName;const fS=d.forwardRef(({className:e,...t},r)=>i.jsx(q1,{ref:r,className:H("text-sm opacity-90",e),...t}));fS.displayName=q1.displayName;function i4(){const{toasts:e}=St();return i.jsxs(r4,{children:[e.map(function({id:t,title:r,description:n,action:s,...a}){return i.jsxs(uS,{...a,children:[i.jsxs("div",{className:"grid gap-1",children:[r&&i.jsx(hS,{children:r}),n&&i.jsx(fS,{children:n})]}),s,i.jsx(dS,{})]},t)}),i.jsx(cS,{})]})}var a0=["light","dark"],a4="(prefers-color-scheme: dark)",o4=d.createContext(void 0),l4={setTheme:e=>{},themes:[]},c4=()=>{var e;return(e=d.useContext(o4))!=null?e:l4};d.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:a,value:o,attrs:l,nonce:c})=>{let u=a==="system",h=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,f=s?a0.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(w,g=!1,v=!0)=>{let y=o?o[w]:w,x=g?w+"|| ''":`'${y}'`,b="";return s&&v&&!g&&a0.includes(w)&&(b+=`d.style.colorScheme = '${w}';`),r==="class"?g||y?b+=`c.add(${x})`:b+="null":y&&(b+=`d[s](n,${x})`),b},m=e?`!function(){${h}${p(e)}}()`:n?`!function(){try{${h}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${a4}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${u?"":"else{"+p(a,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(a,!1,!1)};}${f}}catch(t){}}();`;return d.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var u4=e=>{switch(e){case"success":return f4;case"info":return m4;case"warning":return p4;case"error":return g4;default:return null}},d4=Array(12).fill(0),h4=({visible:e,className:t})=>Y.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Y.createElement("div",{className:"sonner-spinner"},d4.map((r,n)=>Y.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),f4=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),p4=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),m4=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),g4=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),v4=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Y.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Y.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),y4=()=>{let[e,t]=Y.useState(document.hidden);return Y.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},Gm=1,x4=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Gm++,a=this.toasts.find(l=>l.id===s),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:o,title:r}):l):this.addToast({title:r,...n,dismissible:o,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),s=r!==void 0,a,o=n.then(async c=>{if(a=["resolve",c],Y.isValidElement(c))s=!1,this.create({id:r,type:"default",message:c});else if(b4(c)&&!c.ok){s=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:h})}else if(t.success!==void 0){s=!1;let u=typeof t.success=="function"?await t.success(c):t.success,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:h})}}).catch(async c=>{if(a=["reject",c],t.error!==void 0){s=!1;let u=typeof t.error=="function"?await t.error(c):t.error,h=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:h})}}).finally(()=>{var c;s&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>a[0]==="reject"?u(a[1]):c(a[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||Gm++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},br=new x4,w4=(e,t)=>{let r=(t==null?void 0:t.id)||Gm++;return br.addToast({title:e,...t,id:r}),r},b4=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",_4=w4,j4=()=>br.toasts,S4=()=>br.getActiveToasts();Object.assign(_4,{success:br.success,info:br.info,warning:br.warning,error:br.error,custom:br.custom,message:br.message,promise:br.promise,dismiss:br.dismiss,loading:br.loading},{getHistory:j4,getToasts:S4});function N4(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}N4(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ku(e){return e.label!==void 0}var k4=3,C4="32px",E4="16px",o0=4e3,T4=356,P4=14,R4=20,A4=200;function fn(...e){return e.filter(Boolean).join(" ")}function I4(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var O4=e=>{var t,r,n,s,a,o,l,c,u,h,f;let{invert:p,toast:m,unstyled:w,interacting:g,setHeights:v,visibleToasts:y,heights:x,index:b,toasts:_,expanded:S,removeToast:j,defaultRichColors:N,closeButton:k,style:R,cancelButtonStyle:E,actionButtonStyle:$,className:M="",descriptionClassName:O="",duration:C,position:D,gap:I,loadingIcon:z,expandByDefault:A,classNames:P,icons:V,closeButtonAriaLabel:J="Close toast",pauseWhenPageIsHidden:L}=e,[Q,q]=Y.useState(null),[K,te]=Y.useState(null),[W,ae]=Y.useState(!1),[X,le]=Y.useState(!1),[ue,ve]=Y.useState(!1),[Ve,me]=Y.useState(!1),[nt,Ae]=Y.useState(!1),[kt,Qt]=Y.useState(0),[re,Ee]=Y.useState(0),We=Y.useRef(m.duration||C||o0),Je=Y.useRef(null),$e=Y.useRef(null),Ut=b===0,Xe=b+1<=y,Ke=m.type,Bt=m.dismissible!==!1,Ri=m.className||"",bu=m.descriptionClassName||"",Xn=Y.useMemo(()=>x.findIndex(ke=>ke.toastId===m.id)||0,[x,m.id]),zt=Y.useMemo(()=>{var ke;return(ke=m.closeButton)!=null?ke:k},[m.closeButton,k]),An=Y.useMemo(()=>m.duration||C||o0,[m.duration,C]),Ct=Y.useRef(0),Zn=Y.useRef(0),_u=Y.useRef(0),ks=Y.useRef(null),[ju,gl]=D.split("-"),vl=Y.useMemo(()=>x.reduce((ke,Ue,et)=>et>=Xn?ke:ke+Ue.height,0),[x,Xn]),Ia=y4(),Df=m.invert||p,Gr=Ke==="loading";Zn.current=Y.useMemo(()=>Xn*I+vl,[Xn,vl]),Y.useEffect(()=>{We.current=An},[An]),Y.useEffect(()=>{ae(!0)},[]),Y.useEffect(()=>{let ke=$e.current;if(ke){let Ue=ke.getBoundingClientRect().height;return Ee(Ue),v(et=>[{toastId:m.id,height:Ue,position:m.position},...et]),()=>v(et=>et.filter(Jt=>Jt.toastId!==m.id))}},[v,m.id]),Y.useLayoutEffect(()=>{if(!W)return;let ke=$e.current,Ue=ke.style.height;ke.style.height="auto";let et=ke.getBoundingClientRect().height;ke.style.height=Ue,Ee(et),v(Jt=>Jt.find(Rr=>Rr.toastId===m.id)?Jt.map(Rr=>Rr.toastId===m.id?{...Rr,height:et}:Rr):[{toastId:m.id,height:et,position:m.position},...Jt])},[W,m.title,m.description,v,m.id]);let In=Y.useCallback(()=>{le(!0),Qt(Zn.current),v(ke=>ke.filter(Ue=>Ue.toastId!==m.id)),setTimeout(()=>{j(m)},A4)},[m,j,v,Zn]);Y.useEffect(()=>{if(m.promise&&Ke==="loading"||m.duration===1/0||m.type==="loading")return;let ke;return S||g||L&&Ia?(()=>{if(_u.current<Ct.current){let Ue=new Date().getTime()-Ct.current;We.current=We.current-Ue}_u.current=new Date().getTime()})():We.current!==1/0&&(Ct.current=new Date().getTime(),ke=setTimeout(()=>{var Ue;(Ue=m.onAutoClose)==null||Ue.call(m,m),In()},We.current)),()=>clearTimeout(ke)},[S,g,m,Ke,L,Ia,In]),Y.useEffect(()=>{m.delete&&In()},[In,m.delete]);function Ai(){var ke,Ue,et;return V!=null&&V.loading?Y.createElement("div",{className:fn(P==null?void 0:P.loader,(ke=m==null?void 0:m.classNames)==null?void 0:ke.loader,"sonner-loader"),"data-visible":Ke==="loading"},V.loading):z?Y.createElement("div",{className:fn(P==null?void 0:P.loader,(Ue=m==null?void 0:m.classNames)==null?void 0:Ue.loader,"sonner-loader"),"data-visible":Ke==="loading"},z):Y.createElement(h4,{className:fn(P==null?void 0:P.loader,(et=m==null?void 0:m.classNames)==null?void 0:et.loader),visible:Ke==="loading"})}return Y.createElement("li",{tabIndex:0,ref:$e,className:fn(M,Ri,P==null?void 0:P.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,P==null?void 0:P.default,P==null?void 0:P[Ke],(r=m==null?void 0:m.classNames)==null?void 0:r[Ke]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:N,"data-styled":!(m.jsx||m.unstyled||w),"data-mounted":W,"data-promise":!!m.promise,"data-swiped":nt,"data-removed":X,"data-visible":Xe,"data-y-position":ju,"data-x-position":gl,"data-index":b,"data-front":Ut,"data-swiping":ue,"data-dismissible":Bt,"data-type":Ke,"data-invert":Df,"data-swipe-out":Ve,"data-swipe-direction":K,"data-expanded":!!(S||A&&W),style:{"--index":b,"--toasts-before":b,"--z-index":_.length-b,"--offset":`${X?kt:Zn.current}px`,"--initial-height":A?"auto":`${re}px`,...R,...m.style},onDragEnd:()=>{ve(!1),q(null),ks.current=null},onPointerDown:ke=>{Gr||!Bt||(Je.current=new Date,Qt(Zn.current),ke.target.setPointerCapture(ke.pointerId),ke.target.tagName!=="BUTTON"&&(ve(!0),ks.current={x:ke.clientX,y:ke.clientY}))},onPointerUp:()=>{var ke,Ue,et,Jt;if(Ve||!Bt)return;ks.current=null;let Rr=Number(((ke=$e.current)==null?void 0:ke.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ar=Number(((Ue=$e.current)==null?void 0:Ue.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),es=new Date().getTime()-((et=Je.current)==null?void 0:et.getTime()),yr=Q==="x"?Rr:Ar,dn=Math.abs(yr)/es;if(Math.abs(yr)>=R4||dn>.11){Qt(Zn.current),(Jt=m.onDismiss)==null||Jt.call(m,m),te(Q==="x"?Rr>0?"right":"left":Ar>0?"down":"up"),In(),me(!0),Ae(!1);return}ve(!1),q(null)},onPointerMove:ke=>{var Ue,et,Jt,Rr;if(!ks.current||!Bt||((Ue=window.getSelection())==null?void 0:Ue.toString().length)>0)return;let Ar=ke.clientY-ks.current.y,es=ke.clientX-ks.current.x,yr=(et=e.swipeDirections)!=null?et:I4(D);!Q&&(Math.abs(es)>1||Math.abs(Ar)>1)&&q(Math.abs(es)>Math.abs(Ar)?"x":"y");let dn={x:0,y:0};Q==="y"?(yr.includes("top")||yr.includes("bottom"))&&(yr.includes("top")&&Ar<0||yr.includes("bottom")&&Ar>0)&&(dn.y=Ar):Q==="x"&&(yr.includes("left")||yr.includes("right"))&&(yr.includes("left")&&es<0||yr.includes("right")&&es>0)&&(dn.x=es),(Math.abs(dn.x)>0||Math.abs(dn.y)>0)&&Ae(!0),(Jt=$e.current)==null||Jt.style.setProperty("--swipe-amount-x",`${dn.x}px`),(Rr=$e.current)==null||Rr.style.setProperty("--swipe-amount-y",`${dn.y}px`)}},zt&&!m.jsx?Y.createElement("button",{"aria-label":J,"data-disabled":Gr,"data-close-button":!0,onClick:Gr||!Bt?()=>{}:()=>{var ke;In(),(ke=m.onDismiss)==null||ke.call(m,m)},className:fn(P==null?void 0:P.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(a=V==null?void 0:V.close)!=null?a:v4):null,m.jsx||d.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:Y.createElement(Y.Fragment,null,Ke||m.icon||m.promise?Y.createElement("div",{"data-icon":"",className:fn(P==null?void 0:P.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Ai():null,m.type!=="loading"?m.icon||(V==null?void 0:V[Ke])||u4(Ke):null):null,Y.createElement("div",{"data-content":"",className:fn(P==null?void 0:P.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},Y.createElement("div",{"data-title":"",className:fn(P==null?void 0:P.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?Y.createElement("div",{"data-description":"",className:fn(O,bu,P==null?void 0:P.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),d.isValidElement(m.cancel)?m.cancel:m.cancel&&Ku(m.cancel)?Y.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||E,onClick:ke=>{var Ue,et;Ku(m.cancel)&&Bt&&((et=(Ue=m.cancel).onClick)==null||et.call(Ue,ke),In())},className:fn(P==null?void 0:P.cancelButton,(h=m==null?void 0:m.classNames)==null?void 0:h.cancelButton)},m.cancel.label):null,d.isValidElement(m.action)?m.action:m.action&&Ku(m.action)?Y.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||$,onClick:ke=>{var Ue,et;Ku(m.action)&&((et=(Ue=m.action).onClick)==null||et.call(Ue,ke),!ke.defaultPrevented&&In())},className:fn(P==null?void 0:P.actionButton,(f=m==null?void 0:m.classNames)==null?void 0:f.actionButton)},m.action.label):null))};function l0(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function M4(e,t){let r={};return[e,t].forEach((n,s)=>{let a=s===1,o=a?"--mobile-offset":"--offset",l=a?E4:C4;function c(u){["top","right","bottom","left"].forEach(h=>{r[`${o}-${h}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=l:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(l)}),r}var D4=d.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:o,className:l,offset:c,mobileOffset:u,theme:h="light",richColors:f,duration:p,style:m,visibleToasts:w=k4,toastOptions:g,dir:v=l0(),gap:y=P4,loadingIcon:x,icons:b,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:S}=e,[j,N]=Y.useState([]),k=Y.useMemo(()=>Array.from(new Set([n].concat(j.filter(L=>L.position).map(L=>L.position)))),[j,n]),[R,E]=Y.useState([]),[$,M]=Y.useState(!1),[O,C]=Y.useState(!1),[D,I]=Y.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),z=Y.useRef(null),A=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),P=Y.useRef(null),V=Y.useRef(!1),J=Y.useCallback(L=>{N(Q=>{var q;return(q=Q.find(K=>K.id===L.id))!=null&&q.delete||br.dismiss(L.id),Q.filter(({id:K})=>K!==L.id)})},[]);return Y.useEffect(()=>br.subscribe(L=>{if(L.dismiss){N(Q=>Q.map(q=>q.id===L.id?{...q,delete:!0}:q));return}setTimeout(()=>{x1.flushSync(()=>{N(Q=>{let q=Q.findIndex(K=>K.id===L.id);return q!==-1?[...Q.slice(0,q),{...Q[q],...L},...Q.slice(q+1)]:[L,...Q]})})})}),[]),Y.useEffect(()=>{if(h!=="system"){I(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?I("dark"):I("light")),typeof window>"u")return;let L=window.matchMedia("(prefers-color-scheme: dark)");try{L.addEventListener("change",({matches:Q})=>{I(Q?"dark":"light")})}catch{L.addListener(({matches:q})=>{try{I(q?"dark":"light")}catch(K){console.error(K)}})}},[h]),Y.useEffect(()=>{j.length<=1&&M(!1)},[j]),Y.useEffect(()=>{let L=Q=>{var q,K;s.every(te=>Q[te]||Q.code===te)&&(M(!0),(q=z.current)==null||q.focus()),Q.code==="Escape"&&(document.activeElement===z.current||(K=z.current)!=null&&K.contains(document.activeElement))&&M(!1)};return document.addEventListener("keydown",L),()=>document.removeEventListener("keydown",L)},[s]),Y.useEffect(()=>{if(z.current)return()=>{P.current&&(P.current.focus({preventScroll:!0}),P.current=null,V.current=!1)}},[z.current]),Y.createElement("section",{ref:t,"aria-label":`${_} ${A}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((L,Q)=>{var q;let[K,te]=L.split("-");return j.length?Y.createElement("ol",{key:L,dir:v==="auto"?l0():v,tabIndex:-1,ref:z,className:l,"data-sonner-toaster":!0,"data-theme":D,"data-y-position":K,"data-lifted":$&&j.length>1&&!a,"data-x-position":te,style:{"--front-toast-height":`${((q=R[0])==null?void 0:q.height)||0}px`,"--width":`${T4}px`,"--gap":`${y}px`,...m,...M4(c,u)},onBlur:W=>{V.current&&!W.currentTarget.contains(W.relatedTarget)&&(V.current=!1,P.current&&(P.current.focus({preventScroll:!0}),P.current=null))},onFocus:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||V.current||(V.current=!0,P.current=W.relatedTarget)},onMouseEnter:()=>M(!0),onMouseMove:()=>M(!0),onMouseLeave:()=>{O||M(!1)},onDragEnd:()=>M(!1),onPointerDown:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||C(!0)},onPointerUp:()=>C(!1)},j.filter(W=>!W.position&&Q===0||W.position===L).map((W,ae)=>{var X,le;return Y.createElement(O4,{key:W.id,icons:b,index:ae,toast:W,defaultRichColors:f,duration:(X=g==null?void 0:g.duration)!=null?X:p,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:w,closeButton:(le=g==null?void 0:g.closeButton)!=null?le:o,interacting:O,position:L,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:J,toasts:j.filter(ue=>ue.position==W.position),heights:R.filter(ue=>ue.position==W.position),setHeights:E,expandByDefault:a,gap:y,loadingIcon:x,expanded:$,pauseWhenPageIsHidden:S,swipeDirections:e.swipeDirections})})):null}))});const L4=({...e})=>{const{theme:t="system"}=c4();return i.jsx(D4,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var $4=Gg[" useId ".trim().toString()]||(()=>{}),F4=0;function Mt(e){const[t,r]=d.useState($4());return yt(()=>{e||r(n=>n??String(F4++))},[e]),e||(t?`radix-${t}`:"")}const U4=["top","right","bottom","left"],pi=Math.min,Dr=Math.max,Qd=Math.round,Gu=Math.floor,Wn=e=>({x:e,y:e}),B4={left:"right",right:"left",bottom:"top",top:"bottom"},z4={start:"end",end:"start"};function Ym(e,t,r){return Dr(e,pi(t,r))}function xs(e,t){return typeof e=="function"?e(t):e}function ws(e){return e.split("-")[0]}function il(e){return e.split("-")[1]}function Gv(e){return e==="x"?"y":"x"}function Yv(e){return e==="y"?"height":"width"}const q4=new Set(["top","bottom"]);function Bn(e){return q4.has(ws(e))?"y":"x"}function Qv(e){return Gv(Bn(e))}function W4(e,t,r){r===void 0&&(r=!1);const n=il(e),s=Qv(e),a=Yv(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=Jd(o)),[o,Jd(o)]}function V4(e){const t=Jd(e);return[Qm(e),t,Qm(t)]}function Qm(e){return e.replace(/start|end/g,t=>z4[t])}const c0=["left","right"],u0=["right","left"],H4=["top","bottom"],K4=["bottom","top"];function G4(e,t,r){switch(e){case"top":case"bottom":return r?t?u0:c0:t?c0:u0;case"left":case"right":return t?H4:K4;default:return[]}}function Y4(e,t,r,n){const s=il(e);let a=G4(ws(e),r==="start",n);return s&&(a=a.map(o=>o+"-"+s),t&&(a=a.concat(a.map(Qm)))),a}function Jd(e){return e.replace(/left|right|bottom|top/g,t=>B4[t])}function Q4(e){return{top:0,right:0,bottom:0,left:0,...e}}function pS(e){return typeof e!="number"?Q4(e):{top:e,right:e,bottom:e,left:e}}function Xd(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function d0(e,t,r){let{reference:n,floating:s}=e;const a=Bn(t),o=Qv(t),l=Yv(o),c=ws(t),u=a==="y",h=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2,p=n[l]/2-s[l]/2;let m;switch(c){case"top":m={x:h,y:n.y-s.height};break;case"bottom":m={x:h,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:f};break;case"left":m={x:n.x-s.width,y:f};break;default:m={x:n.x,y:n.y}}switch(il(t)){case"start":m[o]-=p*(r&&u?-1:1);break;case"end":m[o]+=p*(r&&u?-1:1);break}return m}const J4=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:o}=r,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:h,y:f}=d0(u,n,c),p=n,m={},w=0;for(let g=0;g<l.length;g++){const{name:v,fn:y}=l[g],{x,y:b,data:_,reset:S}=await y({x:h,y:f,initialPlacement:n,placement:p,strategy:s,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});h=x??h,f=b??f,m={...m,[v]:{...m[v],..._}},S&&w<=50&&(w++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:h,y:f}=d0(u,p,c)),g=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:m}};async function Nc(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:a,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=xs(t,e),w=pS(m),v=l[p?f==="floating"?"reference":"floating":f],y=Xd(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(v)))==null||r?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),x=f==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,b=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),_=await(a.isElement==null?void 0:a.isElement(b))?await(a.getScale==null?void 0:a.getScale(b))||{x:1,y:1}:{x:1,y:1},S=Xd(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:b,strategy:c}):x);return{top:(y.top-S.top+w.top)/_.y,bottom:(S.bottom-y.bottom+w.bottom)/_.y,left:(y.left-S.left+w.left)/_.x,right:(S.right-y.right+w.right)/_.x}}const X4=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:a,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:h=0}=xs(e,t)||{};if(u==null)return{};const f=pS(h),p={x:r,y:n},m=Qv(s),w=Yv(m),g=await o.getDimensions(u),v=m==="y",y=v?"top":"left",x=v?"bottom":"right",b=v?"clientHeight":"clientWidth",_=a.reference[w]+a.reference[m]-p[m]-a.floating[w],S=p[m]-a.reference[m],j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let N=j?j[b]:0;(!N||!await(o.isElement==null?void 0:o.isElement(j)))&&(N=l.floating[b]||a.floating[w]);const k=_/2-S/2,R=N/2-g[w]/2-1,E=pi(f[y],R),$=pi(f[x],R),M=E,O=N-g[w]-$,C=N/2-g[w]/2+k,D=Ym(M,C,O),I=!c.arrow&&il(s)!=null&&C!==D&&a.reference[w]/2-(C<M?E:$)-g[w]/2<0,z=I?C<M?C-M:C-O:0;return{[m]:p[m]+z,data:{[m]:D,centerOffset:C-D-z,...I&&{alignmentOffset:z}},reset:I}}}),Z4=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:g=!0,...v}=xs(e,t);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const y=ws(s),x=Bn(l),b=ws(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=p||(b||!g?[Jd(l)]:V4(l)),j=w!=="none";!p&&j&&S.push(...Y4(l,g,w,_));const N=[l,...S],k=await Nc(t,v),R=[];let E=((n=a.flip)==null?void 0:n.overflows)||[];if(h&&R.push(k[y]),f){const C=W4(s,o,_);R.push(k[C[0]],k[C[1]])}if(E=[...E,{placement:s,overflows:R}],!R.every(C=>C<=0)){var $,M;const C=((($=a.flip)==null?void 0:$.index)||0)+1,D=N[C];if(D&&(!(f==="alignment"?x!==Bn(D):!1)||E.every(A=>A.overflows[0]>0&&Bn(A.placement)===x)))return{data:{index:C,overflows:E},reset:{placement:D}};let I=(M=E.filter(z=>z.overflows[0]<=0).sort((z,A)=>z.overflows[1]-A.overflows[1])[0])==null?void 0:M.placement;if(!I)switch(m){case"bestFit":{var O;const z=(O=E.filter(A=>{if(j){const P=Bn(A.placement);return P===x||P==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(P=>P>0).reduce((P,V)=>P+V,0)]).sort((A,P)=>A[1]-P[1])[0])==null?void 0:O[0];z&&(I=z);break}case"initialPlacement":I=l;break}if(s!==I)return{reset:{placement:I}}}return{}}}};function h0(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function f0(e){return U4.some(t=>e[t]>=0)}const eM=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=xs(e,t);switch(n){case"referenceHidden":{const a=await Nc(t,{...s,elementContext:"reference"}),o=h0(a,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:f0(o)}}}case"escaped":{const a=await Nc(t,{...s,altBoundary:!0}),o=h0(a,r.floating);return{data:{escapedOffsets:o,escaped:f0(o)}}}default:return{}}}}},mS=new Set(["left","top"]);async function tM(e,t){const{placement:r,platform:n,elements:s}=e,a=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=ws(r),l=il(r),c=Bn(r)==="y",u=mS.has(o)?-1:1,h=a&&c?-1:1,f=xs(t,e);let{mainAxis:p,crossAxis:m,alignmentAxis:w}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof w=="number"&&(m=l==="end"?w*-1:w),c?{x:m*h,y:p*u}:{x:p*u,y:m*h}}const rM=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:a,placement:o,middlewareData:l}=t,c=await tM(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:o}}}}},nM=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x:y,y:x}=v;return{x:y,y:x}}},...c}=xs(e,t),u={x:r,y:n},h=await Nc(t,c),f=Bn(ws(s)),p=Gv(f);let m=u[p],w=u[f];if(a){const v=p==="y"?"top":"left",y=p==="y"?"bottom":"right",x=m+h[v],b=m-h[y];m=Ym(x,m,b)}if(o){const v=f==="y"?"top":"left",y=f==="y"?"bottom":"right",x=w+h[v],b=w-h[y];w=Ym(x,w,b)}const g=l.fn({...t,[p]:m,[f]:w});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[p]:a,[f]:o}}}}}},sM=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=xs(e,t),h={x:r,y:n},f=Bn(s),p=Gv(f);let m=h[p],w=h[f];const g=xs(l,t),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=p==="y"?"height":"width",_=a.reference[p]-a.floating[b]+v.mainAxis,S=a.reference[p]+a.reference[b]-v.mainAxis;m<_?m=_:m>S&&(m=S)}if(u){var y,x;const b=p==="y"?"width":"height",_=mS.has(ws(s)),S=a.reference[f]-a.floating[b]+(_&&((y=o.offset)==null?void 0:y[f])||0)+(_?0:v.crossAxis),j=a.reference[f]+a.reference[b]+(_?0:((x=o.offset)==null?void 0:x[f])||0)-(_?v.crossAxis:0);w<S?w=S:w>j&&(w=j)}return{[p]:m,[f]:w}}}},iM=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:a,platform:o,elements:l}=t,{apply:c=()=>{},...u}=xs(e,t),h=await Nc(t,u),f=ws(s),p=il(s),m=Bn(s)==="y",{width:w,height:g}=a.floating;let v,y;f==="top"||f==="bottom"?(v=f,y=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(y=f,v=p==="end"?"top":"bottom");const x=g-h.top-h.bottom,b=w-h.left-h.right,_=pi(g-h[v],x),S=pi(w-h[y],b),j=!t.middlewareData.shift;let N=_,k=S;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(k=b),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(N=x),j&&!p){const E=Dr(h.left,0),$=Dr(h.right,0),M=Dr(h.top,0),O=Dr(h.bottom,0);m?k=w-2*(E!==0||$!==0?E+$:Dr(h.left,h.right)):N=g-2*(M!==0||O!==0?M+O:Dr(h.top,h.bottom))}await c({...t,availableWidth:k,availableHeight:N});const R=await o.getDimensions(l.floating);return w!==R.width||g!==R.height?{reset:{rects:!0}}:{}}}};function Qh(){return typeof window<"u"}function al(e){return gS(e)?(e.nodeName||"").toLowerCase():"#document"}function zr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Qn(e){var t;return(t=(gS(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function gS(e){return Qh()?e instanceof Node||e instanceof zr(e).Node:!1}function Cn(e){return Qh()?e instanceof Element||e instanceof zr(e).Element:!1}function Hn(e){return Qh()?e instanceof HTMLElement||e instanceof zr(e).HTMLElement:!1}function p0(e){return!Qh()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof zr(e).ShadowRoot}const aM=new Set(["inline","contents"]);function ru(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=En(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!aM.has(s)}const oM=new Set(["table","td","th"]);function lM(e){return oM.has(al(e))}const cM=[":popover-open",":modal"];function Jh(e){return cM.some(t=>{try{return e.matches(t)}catch{return!1}})}const uM=["transform","translate","scale","rotate","perspective"],dM=["transform","translate","scale","rotate","perspective","filter"],hM=["paint","layout","strict","content"];function Jv(e){const t=Xv(),r=Cn(e)?En(e):e;return uM.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||dM.some(n=>(r.willChange||"").includes(n))||hM.some(n=>(r.contain||"").includes(n))}function fM(e){let t=mi(e);for(;Hn(t)&&!Wo(t);){if(Jv(t))return t;if(Jh(t))return null;t=mi(t)}return null}function Xv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const pM=new Set(["html","body","#document"]);function Wo(e){return pM.has(al(e))}function En(e){return zr(e).getComputedStyle(e)}function Xh(e){return Cn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function mi(e){if(al(e)==="html")return e;const t=e.assignedSlot||e.parentNode||p0(e)&&e.host||Qn(e);return p0(t)?t.host:t}function vS(e){const t=mi(e);return Wo(t)?e.ownerDocument?e.ownerDocument.body:e.body:Hn(t)&&ru(t)?t:vS(t)}function kc(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=vS(e),a=s===((n=e.ownerDocument)==null?void 0:n.body),o=zr(s);if(a){const l=Jm(o);return t.concat(o,o.visualViewport||[],ru(s)?s:[],l&&r?kc(l):[])}return t.concat(s,kc(s,[],r))}function Jm(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function yS(e){const t=En(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=Hn(e),a=s?e.offsetWidth:r,o=s?e.offsetHeight:n,l=Qd(r)!==a||Qd(n)!==o;return l&&(r=a,n=o),{width:r,height:n,$:l}}function Zv(e){return Cn(e)?e:e.contextElement}function wo(e){const t=Zv(e);if(!Hn(t))return Wn(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:a}=yS(t);let o=(a?Qd(r.width):r.width)/n,l=(a?Qd(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const mM=Wn(0);function xS(e){const t=zr(e);return!Xv()||!t.visualViewport?mM:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function gM(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==zr(e)?!1:t}function ua(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),a=Zv(e);let o=Wn(1);t&&(n?Cn(n)&&(o=wo(n)):o=wo(e));const l=gM(a,r,n)?xS(a):Wn(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(a){const p=zr(a),m=n&&Cn(n)?zr(n):n;let w=p,g=Jm(w);for(;g&&n&&m!==w;){const v=wo(g),y=g.getBoundingClientRect(),x=En(g),b=y.left+(g.clientLeft+parseFloat(x.paddingLeft))*v.x,_=y.top+(g.clientTop+parseFloat(x.paddingTop))*v.y;c*=v.x,u*=v.y,h*=v.x,f*=v.y,c+=b,u+=_,w=zr(g),g=Jm(w)}}return Xd({width:h,height:f,x:c,y:u})}function ey(e,t){const r=Xh(e).scrollLeft;return t?t.left+r:ua(Qn(e)).left+r}function wS(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:ey(e,n)),a=n.top+t.scrollTop;return{x:s,y:a}}function vM(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const a=s==="fixed",o=Qn(n),l=t?Jh(t.floating):!1;if(n===o||l&&a)return r;let c={scrollLeft:0,scrollTop:0},u=Wn(1);const h=Wn(0),f=Hn(n);if((f||!f&&!a)&&((al(n)!=="body"||ru(o))&&(c=Xh(n)),Hn(n))){const m=ua(n);u=wo(n),h.x=m.x+n.clientLeft,h.y=m.y+n.clientTop}const p=o&&!f&&!a?wS(o,c,!0):Wn(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+h.x+p.x,y:r.y*u.y-c.scrollTop*u.y+h.y+p.y}}function yM(e){return Array.from(e.getClientRects())}function xM(e){const t=Qn(e),r=Xh(e),n=e.ownerDocument.body,s=Dr(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=Dr(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+ey(e);const l=-r.scrollTop;return En(n).direction==="rtl"&&(o+=Dr(t.clientWidth,n.clientWidth)-s),{width:s,height:a,x:o,y:l}}function wM(e,t){const r=zr(e),n=Qn(e),s=r.visualViewport;let a=n.clientWidth,o=n.clientHeight,l=0,c=0;if(s){a=s.width,o=s.height;const u=Xv();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:o,x:l,y:c}}const bM=new Set(["absolute","fixed"]);function _M(e,t){const r=ua(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,a=Hn(e)?wo(e):Wn(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,c=s*a.x,u=n*a.y;return{width:o,height:l,x:c,y:u}}function m0(e,t,r){let n;if(t==="viewport")n=wM(e,r);else if(t==="document")n=xM(Qn(e));else if(Cn(t))n=_M(t,r);else{const s=xS(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Xd(n)}function bS(e,t){const r=mi(e);return r===t||!Cn(r)||Wo(r)?!1:En(r).position==="fixed"||bS(r,t)}function jM(e,t){const r=t.get(e);if(r)return r;let n=kc(e,[],!1).filter(l=>Cn(l)&&al(l)!=="body"),s=null;const a=En(e).position==="fixed";let o=a?mi(e):e;for(;Cn(o)&&!Wo(o);){const l=En(o),c=Jv(o);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&bM.has(s.position)||ru(o)&&!c&&bS(e,o))?n=n.filter(h=>h!==o):s=l,o=mi(o)}return t.set(e,n),n}function SM(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const o=[...r==="clippingAncestors"?Jh(t)?[]:jM(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,h)=>{const f=m0(t,h,s);return u.top=Dr(f.top,u.top),u.right=pi(f.right,u.right),u.bottom=pi(f.bottom,u.bottom),u.left=Dr(f.left,u.left),u},m0(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function NM(e){const{width:t,height:r}=yS(e);return{width:t,height:r}}function kM(e,t,r){const n=Hn(t),s=Qn(t),a=r==="fixed",o=ua(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=Wn(0);function u(){c.x=ey(s)}if(n||!n&&!a)if((al(t)!=="body"||ru(s))&&(l=Xh(t)),n){const m=ua(t,!0,a,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else s&&u();a&&!n&&s&&u();const h=s&&!n&&!a?wS(s,l):Wn(0),f=o.left+l.scrollLeft-c.x-h.x,p=o.top+l.scrollTop-c.y-h.y;return{x:f,y:p,width:o.width,height:o.height}}function xp(e){return En(e).position==="static"}function g0(e,t){if(!Hn(e)||En(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Qn(e)===r&&(r=r.ownerDocument.body),r}function _S(e,t){const r=zr(e);if(Jh(e))return r;if(!Hn(e)){let s=mi(e);for(;s&&!Wo(s);){if(Cn(s)&&!xp(s))return s;s=mi(s)}return r}let n=g0(e,t);for(;n&&lM(n)&&xp(n);)n=g0(n,t);return n&&Wo(n)&&xp(n)&&!Jv(n)?r:n||fM(e)||r}const CM=async function(e){const t=this.getOffsetParent||_S,r=this.getDimensions,n=await r(e.floating);return{reference:kM(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function EM(e){return En(e).direction==="rtl"}const TM={convertOffsetParentRelativeRectToViewportRelativeRect:vM,getDocumentElement:Qn,getClippingRect:SM,getOffsetParent:_S,getElementRects:CM,getClientRects:yM,getDimensions:NM,getScale:wo,isElement:Cn,isRTL:EM};function jS(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function PM(e,t){let r=null,n;const s=Qn(e);function a(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=e.getBoundingClientRect(),{left:h,top:f,width:p,height:m}=u;if(l||t(),!p||!m)return;const w=Gu(f),g=Gu(s.clientWidth-(h+p)),v=Gu(s.clientHeight-(f+m)),y=Gu(h),b={rootMargin:-w+"px "+-g+"px "+-v+"px "+-y+"px",threshold:Dr(0,pi(1,c))||1};let _=!0;function S(j){const N=j[0].intersectionRatio;if(N!==c){if(!_)return o();N?o(!1,N):n=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!jS(u,e.getBoundingClientRect())&&o(),_=!1}try{r=new IntersectionObserver(S,{...b,root:s.ownerDocument})}catch{r=new IntersectionObserver(S,b)}r.observe(e)}return o(!0),a}function RM(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Zv(e),h=s||a?[...u?kc(u):[],...kc(t)]:[];h.forEach(y=>{s&&y.addEventListener("scroll",r,{passive:!0}),a&&y.addEventListener("resize",r)});const f=u&&l?PM(u,r):null;let p=-1,m=null;o&&(m=new ResizeObserver(y=>{let[x]=y;x&&x.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var b;(b=m)==null||b.observe(t)})),r()}),u&&!c&&m.observe(u),m.observe(t));let w,g=c?ua(e):null;c&&v();function v(){const y=ua(e);g&&!jS(g,y)&&r(),g=y,w=requestAnimationFrame(v)}return r(),()=>{var y;h.forEach(x=>{s&&x.removeEventListener("scroll",r),a&&x.removeEventListener("resize",r)}),f==null||f(),(y=m)==null||y.disconnect(),m=null,c&&cancelAnimationFrame(w)}}const AM=rM,IM=nM,OM=Z4,MM=iM,DM=eM,v0=X4,LM=sM,$M=(e,t,r)=>{const n=new Map,s={platform:TM,...r},a={...s.platform,_c:n};return J4(e,t,{...s,platform:a})};var FM=typeof document<"u",UM=function(){},wd=FM?d.useLayoutEffect:UM;function Zd(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Zd(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const a=s[n];if(!(a==="_owner"&&e.$$typeof)&&!Zd(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function SS(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function y0(e,t){const r=SS(e);return Math.round(t*r)/r}function wp(e){const t=d.useRef(e);return wd(()=>{t.current=e}),t}function BM(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[h,f]=d.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,m]=d.useState(n);Zd(p,n)||m(n);const[w,g]=d.useState(null),[v,y]=d.useState(null),x=d.useCallback(A=>{A!==j.current&&(j.current=A,g(A))},[]),b=d.useCallback(A=>{A!==N.current&&(N.current=A,y(A))},[]),_=a||w,S=o||v,j=d.useRef(null),N=d.useRef(null),k=d.useRef(h),R=c!=null,E=wp(c),$=wp(s),M=wp(u),O=d.useCallback(()=>{if(!j.current||!N.current)return;const A={placement:t,strategy:r,middleware:p};$.current&&(A.platform=$.current),$M(j.current,N.current,A).then(P=>{const V={...P,isPositioned:M.current!==!1};C.current&&!Zd(k.current,V)&&(k.current=V,Tn.flushSync(()=>{f(V)}))})},[p,t,r,$,M]);wd(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,f(A=>({...A,isPositioned:!1})))},[u]);const C=d.useRef(!1);wd(()=>(C.current=!0,()=>{C.current=!1}),[]),wd(()=>{if(_&&(j.current=_),S&&(N.current=S),_&&S){if(E.current)return E.current(_,S,O);O()}},[_,S,O,E,R]);const D=d.useMemo(()=>({reference:j,floating:N,setReference:x,setFloating:b}),[x,b]),I=d.useMemo(()=>({reference:_,floating:S}),[_,S]),z=d.useMemo(()=>{const A={position:r,left:0,top:0};if(!I.floating)return A;const P=y0(I.floating,h.x),V=y0(I.floating,h.y);return l?{...A,transform:"translate("+P+"px, "+V+"px)",...SS(I.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:P,top:V}},[r,l,I.floating,h.x,h.y]);return d.useMemo(()=>({...h,update:O,refs:D,elements:I,floatingStyles:z}),[h,O,D,I,z])}const zM=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?v0({element:n.current,padding:s}).fn(r):{}:n?v0({element:n,padding:s}).fn(r):{}}}},qM=(e,t)=>({...AM(e),options:[e,t]}),WM=(e,t)=>({...IM(e),options:[e,t]}),VM=(e,t)=>({...LM(e),options:[e,t]}),HM=(e,t)=>({...OM(e),options:[e,t]}),KM=(e,t)=>({...MM(e),options:[e,t]}),GM=(e,t)=>({...DM(e),options:[e,t]}),YM=(e,t)=>({...zM(e),options:[e,t]});var QM="Arrow",NS=d.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...a}=e;return i.jsx(se.svg,{...a,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});NS.displayName=QM;var JM=NS;function ty(e){const[t,r]=d.useState(void 0);return yt(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var ry="Popper",[kS,ji]=Nt(ry),[XM,CS]=kS(ry),ES=e=>{const{__scopePopper:t,children:r}=e,[n,s]=d.useState(null);return i.jsx(XM,{scope:t,anchor:n,onAnchorChange:s,children:r})};ES.displayName=ry;var TS="PopperAnchor",PS=d.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,a=CS(TS,r),o=d.useRef(null),l=Se(t,o);return d.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:i.jsx(se.div,{...s,ref:l})});PS.displayName=TS;var ny="PopperContent",[ZM,eD]=kS(ny),RS=d.forwardRef((e,t)=>{var W,ae,X,le,ue,ve;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:w,...g}=e,v=CS(ny,r),[y,x]=d.useState(null),b=Se(t,Ve=>x(Ve)),[_,S]=d.useState(null),j=ty(_),N=(j==null?void 0:j.width)??0,k=(j==null?void 0:j.height)??0,R=n+(a!=="center"?"-"+a:""),E=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},$=Array.isArray(u)?u:[u],M=$.length>0,O={padding:E,boundary:$.filter(rD),altBoundary:M},{refs:C,floatingStyles:D,placement:I,isPositioned:z,middlewareData:A}=BM({strategy:"fixed",placement:R,whileElementsMounted:(...Ve)=>RM(...Ve,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[qM({mainAxis:s+k,alignmentAxis:o}),c&&WM({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?VM():void 0,...O}),c&&HM({...O}),KM({...O,apply:({elements:Ve,rects:me,availableWidth:nt,availableHeight:Ae})=>{const{width:kt,height:Qt}=me.reference,re=Ve.floating.style;re.setProperty("--radix-popper-available-width",`${nt}px`),re.setProperty("--radix-popper-available-height",`${Ae}px`),re.setProperty("--radix-popper-anchor-width",`${kt}px`),re.setProperty("--radix-popper-anchor-height",`${Qt}px`)}}),_&&YM({element:_,padding:l}),nD({arrowWidth:N,arrowHeight:k}),p&&GM({strategy:"referenceHidden",...O})]}),[P,V]=OS(I),J=gt(w);yt(()=>{z&&(J==null||J())},[z,J]);const L=(W=A.arrow)==null?void 0:W.x,Q=(ae=A.arrow)==null?void 0:ae.y,q=((X=A.arrow)==null?void 0:X.centerOffset)!==0,[K,te]=d.useState();return yt(()=>{y&&te(window.getComputedStyle(y).zIndex)},[y]),i.jsx("div",{ref:C.setFloating,"data-radix-popper-content-wrapper":"",style:{...D,transform:z?D.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[(le=A.transformOrigin)==null?void 0:le.x,(ue=A.transformOrigin)==null?void 0:ue.y].join(" "),...((ve=A.hide)==null?void 0:ve.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(ZM,{scope:r,placedSide:P,onArrowChange:S,arrowX:L,arrowY:Q,shouldHideArrow:q,children:i.jsx(se.div,{"data-side":P,"data-align":V,...g,ref:b,style:{...g.style,animation:z?void 0:"none"}})})})});RS.displayName=ny;var AS="PopperArrow",tD={top:"bottom",right:"left",bottom:"top",left:"right"},IS=d.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,a=eD(AS,n),o=tD[a.placedSide];return i.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:i.jsx(JM,{...s,ref:r,style:{...s.style,display:"block"}})})});IS.displayName=AS;function rD(e){return e!==null}var nD=e=>({name:"transformOrigin",options:e,fn(t){var v,y,x;const{placement:r,rects:n,middlewareData:s}=t,o=((v=s.arrow)==null?void 0:v.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,h]=OS(r),f={start:"0%",center:"50%",end:"100%"}[h],p=(((y=s.arrow)==null?void 0:y.x)??0)+l/2,m=(((x=s.arrow)==null?void 0:x.y)??0)+c/2;let w="",g="";return u==="bottom"?(w=o?f:`${p}px`,g=`${-c}px`):u==="top"?(w=o?f:`${p}px`,g=`${n.floating.height+c}px`):u==="right"?(w=`${-c}px`,g=o?f:`${m}px`):u==="left"&&(w=`${n.floating.width+c}px`,g=o?f:`${m}px`),{data:{x:w,y:g}}}});function OS(e){const[t,r="center"]=e.split("-");return[t,r]}var sy=ES,nu=PS,Zh=RS,ef=IS,[tf,N9]=Nt("Tooltip",[ji]),iy=ji(),MS="TooltipProvider",sD=700,x0="tooltip.open",[iD,DS]=tf(MS),LS=e=>{const{__scopeTooltip:t,delayDuration:r=sD,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:a}=e,o=d.useRef(!0),l=d.useRef(!1),c=d.useRef(0);return d.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(iD,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:d.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:d.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:d.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:a})};LS.displayName=MS;var $S="Tooltip",[k9,rf]=tf($S),Xm="TooltipTrigger",aD=d.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=rf(Xm,r),a=DS(Xm,r),o=iy(r),l=d.useRef(null),c=Se(t,l,s.onTriggerChange),u=d.useRef(!1),h=d.useRef(!1),f=d.useCallback(()=>u.current=!1,[]);return d.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),i.jsx(nu,{asChild:!0,...o,children:i.jsx(se.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:Z(e.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:Z(e.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:Z(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Z(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:Z(e.onBlur,s.onClose),onClick:Z(e.onClick,s.onClose)})})});aD.displayName=Xm;var oD="TooltipPortal",[C9,lD]=tf(oD,{forceMount:void 0}),Vo="TooltipContent",FS=d.forwardRef((e,t)=>{const r=lD(Vo,e.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...a}=e,o=rf(Vo,e.__scopeTooltip);return i.jsx(Dt,{present:n||o.open,children:o.disableHoverableContent?i.jsx(US,{side:s,...a,ref:t}):i.jsx(cD,{side:s,...a,ref:t})})}),cD=d.forwardRef((e,t)=>{const r=rf(Vo,e.__scopeTooltip),n=DS(Vo,e.__scopeTooltip),s=d.useRef(null),a=Se(t,s),[o,l]=d.useState(null),{trigger:c,onClose:u}=r,h=s.current,{onPointerInTransitChange:f}=n,p=d.useCallback(()=>{l(null),f(!1)},[f]),m=d.useCallback((w,g)=>{const v=w.currentTarget,y={x:w.clientX,y:w.clientY},x=pD(y,v.getBoundingClientRect()),b=mD(y,x),_=gD(g.getBoundingClientRect()),S=yD([...b,..._]);l(S),f(!0)},[f]);return d.useEffect(()=>()=>p(),[p]),d.useEffect(()=>{if(c&&h){const w=v=>m(v,h),g=v=>m(v,c);return c.addEventListener("pointerleave",w),h.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",w),h.removeEventListener("pointerleave",g)}}},[c,h,m,p]),d.useEffect(()=>{if(o){const w=g=>{const v=g.target,y={x:g.clientX,y:g.clientY},x=(c==null?void 0:c.contains(v))||(h==null?void 0:h.contains(v)),b=!vD(y,o);x?p():b&&(p(),u())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,h,o,u,p]),i.jsx(US,{...e,ref:a})}),[uD,dD]=tf($S,{isInside:!1}),hD=_1("TooltipContent"),US=d.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,c=rf(Vo,r),u=iy(r),{onClose:h}=c;return d.useEffect(()=>(document.addEventListener(x0,h),()=>document.removeEventListener(x0,h)),[h]),d.useEffect(()=>{if(c.trigger){const f=p=>{const m=p.target;m!=null&&m.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),i.jsx(ja,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:i.jsxs(Zh,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(hD,{children:n}),i.jsx(uD,{scope:r,isInside:!0,children:i.jsx(mI,{id:c.contentId,role:"tooltip",children:s||n})})]})})});FS.displayName=Vo;var BS="TooltipArrow",fD=d.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=iy(r);return dD(BS,r).isInside?null:i.jsx(ef,{...s,...n,ref:t})});fD.displayName=BS;function pD(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(r,n,s,a)){case a:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function mD(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function gD(e){const{top:t,right:r,bottom:n,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:n},{x:s,y:n}]}function vD(e,t){const{x:r,y:n}=e;let s=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a],c=t[o],u=l.x,h=l.y,f=c.x,p=c.y;h>n!=p>n&&r<(f-u)*(n-h)/(p-h)+u&&(s=!s)}return s}function yD(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),xD(t)}function xD(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const s=e[n];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const s=e[n];for(;r.length>=2;){const a=r[r.length-1],o=r[r.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))r.pop();else break}r.push(s)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var wD=LS,zS=FS;const bD=wD,_D=d.forwardRef(({className:e,sideOffset:t=4,...r},n)=>i.jsx(zS,{ref:n,sideOffset:t,className:H("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));_D.displayName=zS.displayName;var ol=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},da=typeof window>"u"||"Deno"in globalThis;function cr(){}function jD(e,t){return typeof e=="function"?e(t):e}function Zm(e){return typeof e=="number"&&e>=0&&e!==1/0}function qS(e,t){return Math.max(e+(t||0)-Date.now(),0)}function oi(e,t){return typeof e=="function"?e(t):e}function Qr(e,t){return typeof e=="function"?e(t):e}function w0(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:a,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==ay(o,t.options))return!1}else if(!Cc(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||a&&!a(t))}function b0(e,t){const{exact:r,status:n,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(r){if(ha(t.options.mutationKey)!==ha(a))return!1}else if(!Cc(t.options.mutationKey,a))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function ay(e,t){return((t==null?void 0:t.queryKeyHashFn)||ha)(e)}function ha(e){return JSON.stringify(e,(t,r)=>eg(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Cc(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Cc(e[r],t[r])):!1}function WS(e,t){if(e===t)return e;const r=_0(e)&&_0(t);if(r||eg(e)&&eg(t)){const n=r?e:Object.keys(e),s=n.length,a=r?t:Object.keys(t),o=a.length,l=r?[]:{},c=new Set(n);let u=0;for(let h=0;h<o;h++){const f=r?h:a[h];(!r&&c.has(f)||r)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,u++):(l[f]=WS(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&u++)}return s===o&&u===s?e:l}return t}function eh(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function _0(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function eg(e){if(!j0(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!j0(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function j0(e){return Object.prototype.toString.call(e)==="[object Object]"}function SD(e){return new Promise(t=>{setTimeout(t,e)})}function tg(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?WS(e,t):t}function ND(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function kD(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var oy=Symbol();function VS(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===oy?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function HS(e,t){return typeof e=="function"?e(...t):!!e}var Hi,Fs,No,Qb,CD=(Qb=class extends ol{constructor(){super();xe(this,Hi);xe(this,Fs);xe(this,No);ce(this,No,t=>{if(!da&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){T(this,Fs)||this.setEventListener(T(this,No))}onUnsubscribe(){var t;this.hasListeners()||((t=T(this,Fs))==null||t.call(this),ce(this,Fs,void 0))}setEventListener(t){var r;ce(this,No,t),(r=T(this,Fs))==null||r.call(this),ce(this,Fs,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){T(this,Hi)!==t&&(ce(this,Hi,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof T(this,Hi)=="boolean"?T(this,Hi):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Hi=new WeakMap,Fs=new WeakMap,No=new WeakMap,Qb),ly=new CD,ko,Us,Co,Jb,ED=(Jb=class extends ol{constructor(){super();xe(this,ko,!0);xe(this,Us);xe(this,Co);ce(this,Co,t=>{if(!da&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){T(this,Us)||this.setEventListener(T(this,Co))}onUnsubscribe(){var t;this.hasListeners()||((t=T(this,Us))==null||t.call(this),ce(this,Us,void 0))}setEventListener(t){var r;ce(this,Co,t),(r=T(this,Us))==null||r.call(this),ce(this,Us,t(this.setOnline.bind(this)))}setOnline(t){T(this,ko)!==t&&(ce(this,ko,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return T(this,ko)}},ko=new WeakMap,Us=new WeakMap,Co=new WeakMap,Jb),th=new ED;function rg(){let e,t;const r=new Promise((s,a)=>{e=s,t=a});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function TD(e){return Math.min(1e3*2**e,3e4)}function KS(e){return(e??"online")==="online"?th.isOnline():!0}var GS=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function bp(e){return e instanceof GS}function YS(e){let t=!1,r=0,n=!1,s;const a=rg(),o=g=>{var v;n||(p(new GS(g)),(v=e.abort)==null||v.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>ly.isFocused()&&(e.networkMode==="always"||th.isOnline())&&e.canRun(),h=()=>KS(e.networkMode)&&e.canRun(),f=g=>{var v;n||(n=!0,(v=e.onSuccess)==null||v.call(e,g),s==null||s(),a.resolve(g))},p=g=>{var v;n||(n=!0,(v=e.onError)==null||v.call(e,g),s==null||s(),a.reject(g))},m=()=>new Promise(g=>{var v;s=y=>{(n||u())&&g(y)},(v=e.onPause)==null||v.call(e)}).then(()=>{var g;s=void 0,n||(g=e.onContinue)==null||g.call(e)}),w=()=>{if(n)return;let g;const v=r===0?e.initialPromise:void 0;try{g=v??e.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(f).catch(y=>{var j;if(n)return;const x=e.retry??(da?0:3),b=e.retryDelay??TD,_=typeof b=="function"?b(r,y):b,S=x===!0||typeof x=="number"&&r<x||typeof x=="function"&&x(r,y);if(t||!S){p(y);return}r++,(j=e.onFail)==null||j.call(e,r,y),SD(_).then(()=>u()?void 0:m()).then(()=>{t?p(y):w()})})};return{promise:a,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?w():m().then(w),a)}}var PD=e=>setTimeout(e,0);function RD(){let e=[],t=0,r=l=>{l()},n=l=>{l()},s=PD;const a=l=>{t?e.push(l):s(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var It=RD(),Ki,Xb,QS=(Xb=class{constructor(){xe(this,Ki)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Zm(this.gcTime)&&ce(this,Ki,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(da?1/0:5*60*1e3))}clearGcTimeout(){T(this,Ki)&&(clearTimeout(T(this,Ki)),ce(this,Ki,void 0))}},Ki=new WeakMap,Xb),Eo,Gi,Yr,Yi,er,Wc,Qi,yn,ns,Zb,AD=(Zb=class extends QS{constructor(t){super();xe(this,yn);xe(this,Eo);xe(this,Gi);xe(this,Yr);xe(this,Yi);xe(this,er);xe(this,Wc);xe(this,Qi);ce(this,Qi,!1),ce(this,Wc,t.defaultOptions),this.setOptions(t.options),this.observers=[],ce(this,Yi,t.client),ce(this,Yr,T(this,Yi).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ce(this,Eo,ID(this.options)),this.state=t.state??T(this,Eo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=T(this,er))==null?void 0:t.promise}setOptions(t){this.options={...T(this,Wc),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&T(this,Yr).remove(this)}setData(t,r){const n=tg(this.state.data,t,this.options);return Re(this,yn,ns).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Re(this,yn,ns).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=T(this,er))==null?void 0:n.promise;return(s=T(this,er))==null||s.cancel(t),r?r.then(cr).catch(cr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(T(this,Eo))}isActive(){return this.observers.some(t=>Qr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===oy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>oi(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!qS(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=T(this,er))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=T(this,er))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),T(this,Yr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(T(this,er)&&(T(this,Qi)?T(this,er).cancel({revert:!0}):T(this,er).cancelRetry()),this.scheduleGc()),T(this,Yr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Re(this,yn,ns).call(this,{type:"invalidate"})}fetch(t,r){var u,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(T(this,er))return T(this,er).continueRetry(),T(this,er).promise}if(t&&this.setOptions(t),!this.options.queryFn){const p=this.observers.find(m=>m.options.queryFn);p&&this.setOptions(p.options)}const n=new AbortController,s=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(ce(this,Qi,!0),n.signal)})},a=()=>{const p=VS(this.options,r),w=(()=>{const g={client:T(this,Yi),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return ce(this,Qi,!1),this.options.persister?this.options.persister(p,w,this):p(w)},l=(()=>{const p={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:T(this,Yi),state:this.state,fetchFn:a};return s(p),p})();(u=this.options.behavior)==null||u.onFetch(l,this),ce(this,Gi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Re(this,yn,ns).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=p=>{var m,w,g,v;bp(p)&&p.silent||Re(this,yn,ns).call(this,{type:"error",error:p}),bp(p)||((w=(m=T(this,Yr).config).onError)==null||w.call(m,p,this),(v=(g=T(this,Yr).config).onSettled)==null||v.call(g,this.state.data,p,this)),this.scheduleGc()};return ce(this,er,YS({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:p=>{var m,w,g,v;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(y){c(y);return}(w=(m=T(this,Yr).config).onSuccess)==null||w.call(m,p,this),(v=(g=T(this,Yr).config).onSettled)==null||v.call(g,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,m)=>{Re(this,yn,ns).call(this,{type:"failed",failureCount:p,error:m})},onPause:()=>{Re(this,yn,ns).call(this,{type:"pause"})},onContinue:()=>{Re(this,yn,ns).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),T(this,er).start()}},Eo=new WeakMap,Gi=new WeakMap,Yr=new WeakMap,Yi=new WeakMap,er=new WeakMap,Wc=new WeakMap,Qi=new WeakMap,yn=new WeakSet,ns=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...JS(n.data,this.options),fetchMeta:t.meta??null};case"success":return ce(this,Gi,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return bp(s)&&s.revert&&T(this,Gi)?{...T(this,Gi),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),It.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),T(this,Yr).notify({query:this,type:"updated",action:t})})},Zb);function JS(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:KS(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function ID(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Dn,e_,OD=(e_=class extends ol{constructor(t={}){super();xe(this,Dn);this.config=t,ce(this,Dn,new Map)}build(t,r,n){const s=r.queryKey,a=r.queryHash??ay(s,r);let o=this.get(a);return o||(o=new AD({client:t,queryKey:s,queryHash:a,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){T(this,Dn).has(t.queryHash)||(T(this,Dn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=T(this,Dn).get(t.queryHash);r&&(t.destroy(),r===t&&T(this,Dn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){It.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return T(this,Dn).get(t)}getAll(){return[...T(this,Dn).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>w0(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>w0(t,n)):r}notify(t){It.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){It.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){It.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Dn=new WeakMap,e_),Ln,ar,Ji,$n,Rs,t_,MD=(t_=class extends QS{constructor(t){super();xe(this,$n);xe(this,Ln);xe(this,ar);xe(this,Ji);this.mutationId=t.mutationId,ce(this,ar,t.mutationCache),ce(this,Ln,[]),this.state=t.state||XS(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){T(this,Ln).includes(t)||(T(this,Ln).push(t),this.clearGcTimeout(),T(this,ar).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ce(this,Ln,T(this,Ln).filter(r=>r!==t)),this.scheduleGc(),T(this,ar).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){T(this,Ln).length||(this.state.status==="pending"?this.scheduleGc():T(this,ar).remove(this))}continue(){var t;return((t=T(this,Ji))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,o,l,c,u,h,f,p,m,w,g,v,y,x,b,_,S,j,N,k;const r=()=>{Re(this,$n,Rs).call(this,{type:"continue"})};ce(this,Ji,YS({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(R,E)=>{Re(this,$n,Rs).call(this,{type:"failed",failureCount:R,error:E})},onPause:()=>{Re(this,$n,Rs).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>T(this,ar).canRun(this)}));const n=this.state.status==="pending",s=!T(this,Ji).canStart();try{if(n)r();else{Re(this,$n,Rs).call(this,{type:"pending",variables:t,isPaused:s}),await((o=(a=T(this,ar).config).onMutate)==null?void 0:o.call(a,t,this));const E=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));E!==this.state.context&&Re(this,$n,Rs).call(this,{type:"pending",context:E,variables:t,isPaused:s})}const R=await T(this,Ji).start();return await((h=(u=T(this,ar).config).onSuccess)==null?void 0:h.call(u,R,t,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,R,t,this.state.context)),await((w=(m=T(this,ar).config).onSettled)==null?void 0:w.call(m,R,null,this.state.variables,this.state.context,this)),await((v=(g=this.options).onSettled)==null?void 0:v.call(g,R,null,t,this.state.context)),Re(this,$n,Rs).call(this,{type:"success",data:R}),R}catch(R){try{throw await((x=(y=T(this,ar).config).onError)==null?void 0:x.call(y,R,t,this.state.context,this)),await((_=(b=this.options).onError)==null?void 0:_.call(b,R,t,this.state.context)),await((j=(S=T(this,ar).config).onSettled)==null?void 0:j.call(S,void 0,R,this.state.variables,this.state.context,this)),await((k=(N=this.options).onSettled)==null?void 0:k.call(N,void 0,R,t,this.state.context)),R}finally{Re(this,$n,Rs).call(this,{type:"error",error:R})}}finally{T(this,ar).runNext(this)}}},Ln=new WeakMap,ar=new WeakMap,Ji=new WeakMap,$n=new WeakSet,Rs=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),It.batch(()=>{T(this,Ln).forEach(n=>{n.onMutationUpdate(t)}),T(this,ar).notify({mutation:this,type:"updated",action:t})})},t_);function XS(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var os,xn,Vc,r_,DD=(r_=class extends ol{constructor(t={}){super();xe(this,os);xe(this,xn);xe(this,Vc);this.config=t,ce(this,os,new Set),ce(this,xn,new Map),ce(this,Vc,0)}build(t,r,n){const s=new MD({mutationCache:this,mutationId:++Cu(this,Vc)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){T(this,os).add(t);const r=Yu(t);if(typeof r=="string"){const n=T(this,xn).get(r);n?n.push(t):T(this,xn).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(T(this,os).delete(t)){const r=Yu(t);if(typeof r=="string"){const n=T(this,xn).get(r);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&T(this,xn).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Yu(t);if(typeof r=="string"){const n=T(this,xn).get(r),s=n==null?void 0:n.find(a=>a.state.status==="pending");return!s||s===t}else return!0}runNext(t){var n;const r=Yu(t);if(typeof r=="string"){const s=(n=T(this,xn).get(r))==null?void 0:n.find(a=>a!==t&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){It.batch(()=>{T(this,os).forEach(t=>{this.notify({type:"removed",mutation:t})}),T(this,os).clear(),T(this,xn).clear()})}getAll(){return Array.from(T(this,os))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>b0(r,n))}findAll(t={}){return this.getAll().filter(r=>b0(t,r))}notify(t){It.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return It.batch(()=>Promise.all(t.map(r=>r.continue().catch(cr))))}},os=new WeakMap,xn=new WeakMap,Vc=new WeakMap,r_);function Yu(e){var t;return(t=e.options.scope)==null?void 0:t.id}function S0(e){return{onFetch:(t,r)=>{var h,f,p,m,w;const n=t.options,s=(p=(f=(h=t.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,a=((m=t.state.data)==null?void 0:m.pages)||[],o=((w=t.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const v=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},y=VS(t.options,t.fetchOptions),x=async(b,_,S)=>{if(g)return Promise.reject();if(_==null&&b.pages.length)return Promise.resolve(b);const N=(()=>{const $={client:t.client,queryKey:t.queryKey,pageParam:_,direction:S?"backward":"forward",meta:t.options.meta};return v($),$})(),k=await y(N),{maxPages:R}=t.options,E=S?kD:ND;return{pages:E(b.pages,k,R),pageParams:E(b.pageParams,_,R)}};if(s&&a.length){const b=s==="backward",_=b?LD:N0,S={pages:a,pageParams:o},j=_(n,S);l=await x(S,j,b)}else{const b=e??a.length;do{const _=c===0?o[0]??n.initialPageParam:N0(n,l);if(c>0&&_==null)break;l=await x(l,_),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var g,v;return(v=(g=t.options).persister)==null?void 0:v.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function N0(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function LD(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var ft,Bs,zs,To,Po,qs,Ro,Ao,n_,$D=(n_=class{constructor(e={}){xe(this,ft);xe(this,Bs);xe(this,zs);xe(this,To);xe(this,Po);xe(this,qs);xe(this,Ro);xe(this,Ao);ce(this,ft,e.queryCache||new OD),ce(this,Bs,e.mutationCache||new DD),ce(this,zs,e.defaultOptions||{}),ce(this,To,new Map),ce(this,Po,new Map),ce(this,qs,0)}mount(){Cu(this,qs)._++,T(this,qs)===1&&(ce(this,Ro,ly.subscribe(async e=>{e&&(await this.resumePausedMutations(),T(this,ft).onFocus())})),ce(this,Ao,th.subscribe(async e=>{e&&(await this.resumePausedMutations(),T(this,ft).onOnline())})))}unmount(){var e,t;Cu(this,qs)._--,T(this,qs)===0&&((e=T(this,Ro))==null||e.call(this),ce(this,Ro,void 0),(t=T(this,Ao))==null||t.call(this),ce(this,Ao,void 0))}isFetching(e){return T(this,ft).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return T(this,Bs).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=T(this,ft).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=T(this,ft).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(oi(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return T(this,ft).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=T(this,ft).get(n.queryHash),a=s==null?void 0:s.state.data,o=jD(t,a);if(o!==void 0)return T(this,ft).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return It.batch(()=>T(this,ft).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=T(this,ft).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=T(this,ft);It.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=T(this,ft);return It.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=It.batch(()=>T(this,ft).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(cr).catch(cr)}invalidateQueries(e,t={}){return It.batch(()=>(T(this,ft).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=It.batch(()=>T(this,ft).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,r);return r.throwOnError||(a=a.catch(cr)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(cr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=T(this,ft).build(this,t);return r.isStaleByTime(oi(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(cr).catch(cr)}fetchInfiniteQuery(e){return e.behavior=S0(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(cr).catch(cr)}ensureInfiniteQueryData(e){return e.behavior=S0(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return th.isOnline()?T(this,Bs).resumePausedMutations():Promise.resolve()}getQueryCache(){return T(this,ft)}getMutationCache(){return T(this,Bs)}getDefaultOptions(){return T(this,zs)}setDefaultOptions(e){ce(this,zs,e)}setQueryDefaults(e,t){T(this,To).set(ha(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...T(this,To).values()],r={};return t.forEach(n=>{Cc(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){T(this,Po).set(ha(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...T(this,Po).values()],r={};return t.forEach(n=>{Cc(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...T(this,zs).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=ay(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===oy&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...T(this,zs).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){T(this,ft).clear(),T(this,Bs).clear()}},ft=new WeakMap,Bs=new WeakMap,zs=new WeakMap,To=new WeakMap,Po=new WeakMap,qs=new WeakMap,Ro=new WeakMap,Ao=new WeakMap,n_),xr,Fe,Hc,or,Xi,Io,Ws,Vs,Kc,Oo,Mo,Zi,ea,Hs,Do,Ge,zl,ng,sg,ig,ag,og,lg,cg,ZS,s_,FD=(s_=class extends ol{constructor(t,r){super();xe(this,Ge);xe(this,xr);xe(this,Fe);xe(this,Hc);xe(this,or);xe(this,Xi);xe(this,Io);xe(this,Ws);xe(this,Vs);xe(this,Kc);xe(this,Oo);xe(this,Mo);xe(this,Zi);xe(this,ea);xe(this,Hs);xe(this,Do,new Set);this.options=r,ce(this,xr,t),ce(this,Vs,null),ce(this,Ws,rg()),this.options.experimental_prefetchInRender||T(this,Ws).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(T(this,Fe).addObserver(this),k0(T(this,Fe),this.options)?Re(this,Ge,zl).call(this):this.updateResult(),Re(this,Ge,ag).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ug(T(this,Fe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ug(T(this,Fe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Re(this,Ge,og).call(this),Re(this,Ge,lg).call(this),T(this,Fe).removeObserver(this)}setOptions(t){const r=this.options,n=T(this,Fe);if(this.options=T(this,xr).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Qr(this.options.enabled,T(this,Fe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Re(this,Ge,cg).call(this),T(this,Fe).setOptions(this.options),r._defaulted&&!eh(this.options,r)&&T(this,xr).getQueryCache().notify({type:"observerOptionsUpdated",query:T(this,Fe),observer:this});const s=this.hasListeners();s&&C0(T(this,Fe),n,this.options,r)&&Re(this,Ge,zl).call(this),this.updateResult(),s&&(T(this,Fe)!==n||Qr(this.options.enabled,T(this,Fe))!==Qr(r.enabled,T(this,Fe))||oi(this.options.staleTime,T(this,Fe))!==oi(r.staleTime,T(this,Fe)))&&Re(this,Ge,ng).call(this);const a=Re(this,Ge,sg).call(this);s&&(T(this,Fe)!==n||Qr(this.options.enabled,T(this,Fe))!==Qr(r.enabled,T(this,Fe))||a!==T(this,Hs))&&Re(this,Ge,ig).call(this,a)}getOptimisticResult(t){const r=T(this,xr).getQueryCache().build(T(this,xr),t),n=this.createResult(r,t);return BD(this,n)&&(ce(this,or,n),ce(this,Io,this.options),ce(this,Xi,T(this,Fe).state)),n}getCurrentResult(){return T(this,or)}trackResult(t,r){return new Proxy(t,{get:(n,s)=>(this.trackProp(s),r==null||r(s),Reflect.get(n,s))})}trackProp(t){T(this,Do).add(t)}getCurrentQuery(){return T(this,Fe)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=T(this,xr).defaultQueryOptions(t),n=T(this,xr).getQueryCache().build(T(this,xr),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return Re(this,Ge,zl).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),T(this,or)))}createResult(t,r){var R;const n=T(this,Fe),s=this.options,a=T(this,or),o=T(this,Xi),l=T(this,Io),u=t!==n?t.state:T(this,Hc),{state:h}=t;let f={...h},p=!1,m;if(r._optimisticResults){const E=this.hasListeners(),$=!E&&k0(t,r),M=E&&C0(t,n,r,s);($||M)&&(f={...f,...JS(h.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:w,errorUpdatedAt:g,status:v}=f;m=f.data;let y=!1;if(r.placeholderData!==void 0&&m===void 0&&v==="pending"){let E;a!=null&&a.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(E=a.data,y=!0):E=typeof r.placeholderData=="function"?r.placeholderData((R=T(this,Mo))==null?void 0:R.state.data,T(this,Mo)):r.placeholderData,E!==void 0&&(v="success",m=tg(a==null?void 0:a.data,E,r),p=!0)}if(r.select&&m!==void 0&&!y)if(a&&m===(o==null?void 0:o.data)&&r.select===T(this,Kc))m=T(this,Oo);else try{ce(this,Kc,r.select),m=r.select(m),m=tg(a==null?void 0:a.data,m,r),ce(this,Oo,m),ce(this,Vs,null)}catch(E){ce(this,Vs,E)}T(this,Vs)&&(w=T(this,Vs),m=T(this,Oo),g=Date.now(),v="error");const x=f.fetchStatus==="fetching",b=v==="pending",_=v==="error",S=b&&x,j=m!==void 0,k={status:v,fetchStatus:f.fetchStatus,isPending:b,isSuccess:v==="success",isError:_,isInitialLoading:S,isLoading:S,data:m,dataUpdatedAt:f.dataUpdatedAt,error:w,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:x,isRefetching:x&&!b,isLoadingError:_&&!j,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:_&&j,isStale:cy(t,r),refetch:this.refetch,promise:T(this,Ws),isEnabled:Qr(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const E=O=>{k.status==="error"?O.reject(k.error):k.data!==void 0&&O.resolve(k.data)},$=()=>{const O=ce(this,Ws,k.promise=rg());E(O)},M=T(this,Ws);switch(M.status){case"pending":t.queryHash===n.queryHash&&E(M);break;case"fulfilled":(k.status==="error"||k.data!==M.value)&&$();break;case"rejected":(k.status!=="error"||k.error!==M.reason)&&$();break}}return k}updateResult(){const t=T(this,or),r=this.createResult(T(this,Fe),this.options);if(ce(this,Xi,T(this,Fe).state),ce(this,Io,this.options),T(this,Xi).data!==void 0&&ce(this,Mo,T(this,Fe)),eh(r,t))return;ce(this,or,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!T(this,Do).size)return!0;const o=new Set(a??T(this,Do));return this.options.throwOnError&&o.add("error"),Object.keys(T(this,or)).some(l=>{const c=l;return T(this,or)[c]!==t[c]&&o.has(c)})};Re(this,Ge,ZS).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Re(this,Ge,ag).call(this)}},xr=new WeakMap,Fe=new WeakMap,Hc=new WeakMap,or=new WeakMap,Xi=new WeakMap,Io=new WeakMap,Ws=new WeakMap,Vs=new WeakMap,Kc=new WeakMap,Oo=new WeakMap,Mo=new WeakMap,Zi=new WeakMap,ea=new WeakMap,Hs=new WeakMap,Do=new WeakMap,Ge=new WeakSet,zl=function(t){Re(this,Ge,cg).call(this);let r=T(this,Fe).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(cr)),r},ng=function(){Re(this,Ge,og).call(this);const t=oi(this.options.staleTime,T(this,Fe));if(da||T(this,or).isStale||!Zm(t))return;const n=qS(T(this,or).dataUpdatedAt,t)+1;ce(this,Zi,setTimeout(()=>{T(this,or).isStale||this.updateResult()},n))},sg=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(T(this,Fe)):this.options.refetchInterval)??!1},ig=function(t){Re(this,Ge,lg).call(this),ce(this,Hs,t),!(da||Qr(this.options.enabled,T(this,Fe))===!1||!Zm(T(this,Hs))||T(this,Hs)===0)&&ce(this,ea,setInterval(()=>{(this.options.refetchIntervalInBackground||ly.isFocused())&&Re(this,Ge,zl).call(this)},T(this,Hs)))},ag=function(){Re(this,Ge,ng).call(this),Re(this,Ge,ig).call(this,Re(this,Ge,sg).call(this))},og=function(){T(this,Zi)&&(clearTimeout(T(this,Zi)),ce(this,Zi,void 0))},lg=function(){T(this,ea)&&(clearInterval(T(this,ea)),ce(this,ea,void 0))},cg=function(){const t=T(this,xr).getQueryCache().build(T(this,xr),this.options);if(t===T(this,Fe))return;const r=T(this,Fe);ce(this,Fe,t),ce(this,Hc,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},ZS=function(t){It.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(T(this,or))}),T(this,xr).getQueryCache().notify({query:T(this,Fe),type:"observerResultsUpdated"})})},s_);function UD(e,t){return Qr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function k0(e,t){return UD(e,t)||e.state.data!==void 0&&ug(e,t,t.refetchOnMount)}function ug(e,t,r){if(Qr(t.enabled,e)!==!1&&oi(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&cy(e,t)}return!1}function C0(e,t,r,n){return(e!==t||Qr(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&cy(e,r)}function cy(e,t){return Qr(t.enabled,e)!==!1&&e.isStaleByTime(oi(t.staleTime,e))}function BD(e,t){return!eh(e.getCurrentResult(),t)}var Ks,Gs,wr,ls,hs,bd,dg,i_,zD=(i_=class extends ol{constructor(r,n){super();xe(this,hs);xe(this,Ks);xe(this,Gs);xe(this,wr);xe(this,ls);ce(this,Ks,r),this.setOptions(n),this.bindMethods(),Re(this,hs,bd).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var s;const n=this.options;this.options=T(this,Ks).defaultMutationOptions(r),eh(this.options,n)||T(this,Ks).getMutationCache().notify({type:"observerOptionsUpdated",mutation:T(this,wr),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&ha(n.mutationKey)!==ha(this.options.mutationKey)?this.reset():((s=T(this,wr))==null?void 0:s.state.status)==="pending"&&T(this,wr).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=T(this,wr))==null||r.removeObserver(this)}onMutationUpdate(r){Re(this,hs,bd).call(this),Re(this,hs,dg).call(this,r)}getCurrentResult(){return T(this,Gs)}reset(){var r;(r=T(this,wr))==null||r.removeObserver(this),ce(this,wr,void 0),Re(this,hs,bd).call(this),Re(this,hs,dg).call(this)}mutate(r,n){var s;return ce(this,ls,n),(s=T(this,wr))==null||s.removeObserver(this),ce(this,wr,T(this,Ks).getMutationCache().build(T(this,Ks),this.options)),T(this,wr).addObserver(this),T(this,wr).execute(r)}},Ks=new WeakMap,Gs=new WeakMap,wr=new WeakMap,ls=new WeakMap,hs=new WeakSet,bd=function(){var n;const r=((n=T(this,wr))==null?void 0:n.state)??XS();ce(this,Gs,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},dg=function(r){It.batch(()=>{var n,s,a,o,l,c,u,h;if(T(this,ls)&&this.hasListeners()){const f=T(this,Gs).variables,p=T(this,Gs).context;(r==null?void 0:r.type)==="success"?((s=(n=T(this,ls)).onSuccess)==null||s.call(n,r.data,f,p),(o=(a=T(this,ls)).onSettled)==null||o.call(a,r.data,null,f,p)):(r==null?void 0:r.type)==="error"&&((c=(l=T(this,ls)).onError)==null||c.call(l,r.error,f,p),(h=(u=T(this,ls)).onSettled)==null||h.call(u,void 0,r.error,f,p))}this.listeners.forEach(f=>{f(T(this,Gs))})})},i_),eN=d.createContext(void 0),ir=e=>{const t=d.useContext(eN);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},qD=({client:e,children:t})=>(d.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(eN.Provider,{value:e,children:t})),tN=d.createContext(!1),WD=()=>d.useContext(tN);tN.Provider;function VD(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var HD=d.createContext(VD()),KD=()=>d.useContext(HD),GD=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},YD=e=>{d.useEffect(()=>{e.clearReset()},[e])},QD=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||HS(r,[e.error,n])),JD=e=>{if(e.suspense){const t=n=>n==="static"?n:Math.max(n??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...n)=>t(r(...n)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},XD=(e,t)=>e.isLoading&&e.isFetching&&!t,ZD=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,E0=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function eL(e,t,r){var f,p,m,w,g;const n=WD(),s=KD(),a=ir(),o=a.defaultQueryOptions(e);(p=(f=a.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,o),o._optimisticResults=n?"isRestoring":"optimistic",JD(o),GD(o,s),YD(s);const l=!a.getQueryCache().get(o.queryHash),[c]=d.useState(()=>new t(a,o)),u=c.getOptimisticResult(o),h=!n&&e.subscribed!==!1;if(d.useSyncExternalStore(d.useCallback(v=>{const y=h?c.subscribe(It.batchCalls(v)):cr;return c.updateResult(),y},[c,h]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),d.useEffect(()=>{c.setOptions(o)},[o,c]),ZD(o,u))throw E0(o,c,s);if(QD({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:a.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((w=(m=a.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||w.call(m,o,u),o.experimental_prefetchInRender&&!da&&XD(u,n)){const v=l?E0(o,c,s):(g=a.getQueryCache().get(o.queryHash))==null?void 0:g.promise;v==null||v.catch(cr).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function De(e,t){return eL(e,FD)}function $t(e,t){const r=ir(),[n]=d.useState(()=>new zD(r,e));d.useEffect(()=>{n.setOptions(e)},[n,e]);const s=d.useSyncExternalStore(d.useCallback(o=>n.subscribe(It.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=d.useCallback((o,l)=>{n.mutate(o,l).catch(cr)},[n]);if(s.error&&HS(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ec(){return Ec=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ec.apply(this,arguments)}var Js;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Js||(Js={}));const T0="popstate";function tL(e){e===void 0&&(e={});function t(n,s){let{pathname:a,search:o,hash:l}=n.location;return hg("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:rh(s)}return nL(t,r,null,e)}function wt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function rN(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function rL(){return Math.random().toString(36).substr(2,8)}function P0(e,t){return{usr:e.state,key:e.key,idx:t}}function hg(e,t,r,n){return r===void 0&&(r=null),Ec({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ll(t):t,{state:r,key:t&&t.key||n||rL()})}function rh(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ll(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function nL(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,o=s.history,l=Js.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(Ec({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){l=Js.Pop;let v=h(),y=v==null?null:v-u;u=v,c&&c({action:l,location:g.location,delta:y})}function p(v,y){l=Js.Push;let x=hg(g.location,v,y);u=h()+1;let b=P0(x,u),_=g.createHref(x);try{o.pushState(b,"",_)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(_)}a&&c&&c({action:l,location:g.location,delta:1})}function m(v,y){l=Js.Replace;let x=hg(g.location,v,y);u=h();let b=P0(x,u),_=g.createHref(x);o.replaceState(b,"",_),a&&c&&c({action:l,location:g.location,delta:0})}function w(v){let y=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof v=="string"?v:rh(v);return x=x.replace(/ $/,"%20"),wt(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let g={get action(){return l},get location(){return e(s,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(T0,f),c=v,()=>{s.removeEventListener(T0,f),c=null}},createHref(v){return t(s,v)},createURL:w,encodeLocation(v){let y=w(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:m,go(v){return o.go(v)}};return g}var R0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(R0||(R0={}));function sL(e,t,r){return r===void 0&&(r="/"),iL(e,t,r,!1)}function iL(e,t,r,n){let s=typeof t=="string"?ll(t):t,a=uy(s.pathname||"/",r);if(a==null)return null;let o=nN(e);aL(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=vL(a);l=mL(o[c],u,n)}return l}function nN(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(wt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=li([n,c.relativePath]),h=r.concat(c);a.children&&a.children.length>0&&(wt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),nN(a.children,t,h,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:fL(u,a.index),routesMeta:h})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of sN(a.path))s(a,o,c)}),t}function sN(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let o=sN(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function aL(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:pL(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const oL=/^:[\w-]+$/,lL=3,cL=2,uL=1,dL=10,hL=-2,A0=e=>e==="*";function fL(e,t){let r=e.split("/"),n=r.length;return r.some(A0)&&(n+=hL),t&&(n+=cL),r.filter(s=>!A0(s)).reduce((s,a)=>s+(oL.test(a)?lL:a===""?uL:dL),n)}function pL(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function mL(e,t,r){let{routesMeta:n}=e,s={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,h=a==="/"?t:t.slice(a.length)||"/",f=I0({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),p=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=I0({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:li([a,f.pathname]),pathnameBase:bL(li([a,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(a=li([a,f.pathnameBase]))}return o}function I0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=gL(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,h,f)=>{let{paramName:p,isOptional:m}=h;if(p==="*"){let g=l[f]||"";o=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const w=l[f];return m&&!w?u[p]=void 0:u[p]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:e}}function gL(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),rN(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function vL(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return rN(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function uy(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function yL(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?ll(e):e;return{pathname:r?r.startsWith("/")?r:xL(r,t):t,search:_L(n),hash:jL(s)}}function xL(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function _p(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wL(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function dy(e,t){let r=wL(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function hy(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=ll(e):(s=Ec({},e),wt(!s.pathname||!s.pathname.includes("?"),_p("?","pathname","search",s)),wt(!s.pathname||!s.pathname.includes("#"),_p("#","pathname","hash",s)),wt(!s.search||!s.search.includes("#"),_p("#","search","hash",s)));let a=e===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}l=f>=0?t[f]:"/"}let c=yL(s,l),u=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const li=e=>e.join("/").replace(/\/\/+/g,"/"),bL=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_L=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,jL=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function SL(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const iN=["post","put","patch","delete"];new Set(iN);const NL=["get",...iN];new Set(NL);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tc(){return Tc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tc.apply(this,arguments)}const fy=d.createContext(null),kL=d.createContext(null),Si=d.createContext(null),nf=d.createContext(null),js=d.createContext({outlet:null,matches:[],isDataRoute:!1}),aN=d.createContext(null);function CL(e,t){let{relative:r}=t===void 0?{}:t;cl()||wt(!1);let{basename:n,navigator:s}=d.useContext(Si),{hash:a,pathname:o,search:l}=lN(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:li([n,o])),s.createHref({pathname:c,search:l,hash:a})}function cl(){return d.useContext(nf)!=null}function Er(){return cl()||wt(!1),d.useContext(nf).location}function oN(e){d.useContext(Si).static||d.useLayoutEffect(e)}function Tr(){let{isDataRoute:e}=d.useContext(js);return e?UL():EL()}function EL(){cl()||wt(!1);let e=d.useContext(fy),{basename:t,future:r,navigator:n}=d.useContext(Si),{matches:s}=d.useContext(js),{pathname:a}=Er(),o=JSON.stringify(dy(s,r.v7_relativeSplatPath)),l=d.useRef(!1);return oN(()=>{l.current=!0}),d.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=hy(u,JSON.parse(o),a,h.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:li([t,f.pathname])),(h.replace?n.replace:n.push)(f,h.state,h)},[t,n,o,a,e])}function ka(){let{matches:e}=d.useContext(js),t=e[e.length-1];return t?t.params:{}}function lN(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=d.useContext(Si),{matches:s}=d.useContext(js),{pathname:a}=Er(),o=JSON.stringify(dy(s,n.v7_relativeSplatPath));return d.useMemo(()=>hy(e,JSON.parse(o),a,r==="path"),[e,o,a,r])}function TL(e,t){return PL(e,t)}function PL(e,t,r,n){cl()||wt(!1);let{navigator:s}=d.useContext(Si),{matches:a}=d.useContext(js),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Er(),h;if(t){var f;let v=typeof t=="string"?ll(t):t;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||wt(!1),h=v}else h=u;let p=h.pathname||"/",m=p;if(c!=="/"){let v=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let w=sL(e,{pathname:m}),g=ML(w&&w.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:li([c,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:li([c,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,r,n);return t&&g?d.createElement(nf.Provider,{value:{location:Tc({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Js.Pop}},g):g}function RL(){let e=FL(),t=SL(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return d.createElement(d.Fragment,null,d.createElement("h2",null,"Unexpected Application Error!"),d.createElement("h3",{style:{fontStyle:"italic"}},t),r?d.createElement("pre",{style:s},r):null,null)}const AL=d.createElement(RL,null);class IL extends d.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?d.createElement(js.Provider,{value:this.props.routeContext},d.createElement(aN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function OL(e){let{routeContext:t,match:r,children:n}=e,s=d.useContext(fy);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),d.createElement(js.Provider,{value:t},n)}function ML(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||wt(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:p,errors:m}=r,w=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||w){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let m,w=!1,g=null,v=null;r&&(m=l&&f.route.id?l[f.route.id]:void 0,g=f.route.errorElement||AL,c&&(u<0&&p===0?(w=!0,v=null):u===p&&(w=!0,v=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,p+1)),x=()=>{let b;return m?b=g:w?b=v:f.route.Component?b=d.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=h,d.createElement(OL,{match:f,routeContext:{outlet:h,matches:y,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?d.createElement(IL,{location:r.location,revalidation:r.revalidation,component:g,error:m,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}var cN=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(cN||{}),nh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(nh||{});function DL(e){let t=d.useContext(fy);return t||wt(!1),t}function LL(e){let t=d.useContext(kL);return t||wt(!1),t}function $L(e){let t=d.useContext(js);return t||wt(!1),t}function uN(e){let t=$L(),r=t.matches[t.matches.length-1];return r.route.id||wt(!1),r.route.id}function FL(){var e;let t=d.useContext(aN),r=LL(nh.UseRouteError),n=uN(nh.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function UL(){let{router:e}=DL(cN.UseNavigateStable),t=uN(nh.UseNavigateStable),r=d.useRef(!1);return oN(()=>{r.current=!0}),d.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Tc({fromRouteId:t},a)))},[e,t])}function BL(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function fa(e){let{to:t,replace:r,state:n,relative:s}=e;cl()||wt(!1);let{future:a,static:o}=d.useContext(Si),{matches:l}=d.useContext(js),{pathname:c}=Er(),u=Tr(),h=hy(t,dy(l,a.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return d.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function ht(e){wt(!1)}function zL(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Js.Pop,navigator:a,static:o=!1,future:l}=e;cl()&&wt(!1);let c=t.replace(/^\/*/,"/"),u=d.useMemo(()=>({basename:c,navigator:a,static:o,future:Tc({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof n=="string"&&(n=ll(n));let{pathname:h="/",search:f="",hash:p="",state:m=null,key:w="default"}=n,g=d.useMemo(()=>{let v=uy(h,c);return v==null?null:{location:{pathname:v,search:f,hash:p,state:m,key:w},navigationType:s}},[c,h,f,p,m,w,s]);return g==null?null:d.createElement(Si.Provider,{value:u},d.createElement(nf.Provider,{children:r,value:g}))}function qL(e){let{children:t,location:r}=e;return TL(fg(t),r)}new Promise(()=>{});function fg(e,t){t===void 0&&(t=[]);let r=[];return d.Children.forEach(e,(n,s)=>{if(!d.isValidElement(n))return;let a=[...t,s];if(n.type===d.Fragment){r.push.apply(r,fg(n.props.children,a));return}n.type!==ht&&wt(!1),!n.props.index||!n.props.children||wt(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=fg(n.props.children,a)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pg(){return pg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pg.apply(this,arguments)}function WL(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,a;for(a=0;a<n.length;a++)s=n[a],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function VL(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function HL(e,t){return e.button===0&&(!t||t==="_self")&&!VL(e)}function mg(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function KL(e,t){let r=mg(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(a=>{r.append(s,a)})}),r}const GL=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],YL="6";try{window.__reactRouterVersion=YL}catch{}const QL="startTransition",O0=Gg[QL];function JL(e){let{basename:t,children:r,future:n,window:s}=e,a=d.useRef();a.current==null&&(a.current=tL({window:s,v5Compat:!0}));let o=a.current,[l,c]=d.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},h=d.useCallback(f=>{u&&O0?O0(()=>c(f)):c(f)},[c,u]);return d.useLayoutEffect(()=>o.listen(h),[o,h]),d.useEffect(()=>BL(n),[n]),d.createElement(zL,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const XL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ZL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pe=d.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:f}=t,p=WL(t,GL),{basename:m}=d.useContext(Si),w,g=!1;if(typeof u=="string"&&ZL.test(u)&&(w=u,XL))try{let b=new URL(window.location.href),_=u.startsWith("//")?new URL(b.protocol+u):new URL(u),S=uy(_.pathname,m);_.origin===b.origin&&S!=null?u=S+_.search+_.hash:g=!0}catch{}let v=CL(u,{relative:s}),y=e3(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});function x(b){n&&n(b),b.defaultPrevented||y(b)}return d.createElement("a",pg({},p,{href:w||v,onClick:g||a?n:x,ref:r,target:c}))});var M0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(M0||(M0={}));var D0;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(D0||(D0={}));function e3(e,t){let{target:r,replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l}=t===void 0?{}:t,c=Tr(),u=Er(),h=lN(e,{relative:o});return d.useCallback(f=>{if(HL(f,r)){f.preventDefault();let p=n!==void 0?n:rh(u)===rh(h);c(e,{replace:p,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,h,n,s,r,e,a,o,l])}function su(e){let t=d.useRef(mg(e)),r=d.useRef(!1),n=Er(),s=d.useMemo(()=>KL(n.search,r.current?null:t.current),[n.search]),a=Tr(),o=d.useCallback((l,c)=>{const u=mg(typeof l=="function"?l(s):l);r.current=!0,a("?"+u,c)},[a,s]);return[s,o]}var Un=function(){return Un=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Un.apply(this,arguments)};function ul(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function t3(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(h){try{u(n.next(h))}catch(f){o(f)}}function c(h){try{u(n.throw(h))}catch(f){o(f)}}function u(h){h.done?a(h.value):s(h.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function r3(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,a;n<s;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}const n3=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class py extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class s3 extends py{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class L0 extends py{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class $0 extends py{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var gg;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(gg||(gg={}));class i3{constructor(t,{headers:r={},customFetch:n,region:s=gg.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=n3(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return t3(this,arguments,void 0,function*(r,n={}){var s;let a,o;try{const{headers:l,method:c,body:u,signal:h,timeout:f}=n;let p={},{region:m}=n;m||(m=this.region);const w=new URL(`${this.url}/${r}`);m&&m!=="any"&&(p["x-region"]=m,w.searchParams.set("forceFunctionRegion",m));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(p["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(p["Content-Type"]="application/json",g=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?g=JSON.stringify(u):g=u;let v=h;f&&(o=new AbortController,a=setTimeout(()=>o.abort(),f),h?(v=o.signal,h.addEventListener("abort",()=>o.abort())):v=o.signal);const y=yield this.fetch(w.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:g,signal:v}).catch(S=>{throw new s3(S)}),x=y.headers.get("x-relay-error");if(x&&x==="true")throw new L0(y);if(!y.ok)throw new $0(y);let b=((s=y.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return b==="application/json"?_=yield y.json():b==="application/octet-stream"||b==="application/pdf"?_=yield y.blob():b==="text/event-stream"?_=y:b==="multipart/form-data"?_=yield y.formData():_=yield y.text(),{data:_,error:null,response:y}}catch(l){return{data:null,error:l,response:l instanceof $0||l instanceof L0?l.context:void 0}}finally{a&&clearTimeout(a)}})}}var a3=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},o3=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let o=null,l=null,c=null,u=a.status,h=a.statusText;if(a.ok){var f,p;if(r.method!=="HEAD"){var m;const y=await a.text();y===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((m=r.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?l=y:l=JSON.parse(y))}const g=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),v=(p=a.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");g&&v&&v.length>1&&(c=parseInt(v[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,h="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var w;const g=await a.text();try{o=JSON.parse(g),Array.isArray(o)&&a.status===404&&(l=[],o=null,u=200,h="OK")}catch{a.status===404&&g===""?(u=204,h="No Content"):o={message:g}}if(o&&r.isMaybeSingle&&(!(o==null||(w=o.details)===null||w===void 0)&&w.includes("0 rows"))&&(o=null,u=200,h="OK"),o&&r.shouldThrowOnError)throw new a3(o)}return{error:o,data:l,count:c,status:u,statusText:h}});return this.shouldThrowOnError||(s=s.catch(a=>{var o;let l="";const c=a==null?void 0:a.cause;if(c){var u,h,f,p;const w=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",g=(h=c==null?void 0:c.code)!==null&&h!==void 0?h:"";l=`${(f=a==null?void 0:a.name)!==null&&f!==void 0?f:"FetchError"}: ${a==null?void 0:a.message}`,l+=`

Caused by: ${(p=c==null?void 0:c.name)!==null&&p!==void 0?p:"Error"}: ${w}`,g&&(l+=` (${g})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var m;l=(m=a==null?void 0:a.stack)!==null&&m!==void 0?m:""}return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},l3=class extends o3{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const a=s?`${s}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const F0=new RegExp("[,()]");var Ka=class extends l3{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&F0.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&F0.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},c3=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),n&&c.append("Prefer",`count=${n}`),new Ka({method:s,url:l,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST",{url:a,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);a.searchParams.set("columns",c.join(","))}}return new Ka({method:s,url:a,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var a;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&c.append("Prefer",`count=${n}`),s||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(u.length>0){const h=[...new Set(u)].map(f=>`"${f}"`);l.searchParams.set("columns",h.join(","))}}return new Ka({method:o,url:l,headers:c,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:s,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new Ka({method:n,url:s,headers:a,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Ka({method:r,url:n,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},u3=class dN{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new c3(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new dN(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:a}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;const h=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(h)),f=n&&Object.values(r).some(h);f?(l="POST",u=r):n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([m,w])=>w!==void 0).map(([m,w])=>[m,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([m,w])=>{c.searchParams.append(m,w)})):(l="POST",u=r);const p=new Headers(this.headers);return f?p.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&p.set("Prefer",`count=${a}`),new Ka({method:l,url:c,headers:p,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class d3{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const h3="2.91.0",f3=`realtime-js/${h3}`,p3="1.0.0",hN="2.0.0",U0=hN,vg=1e4,m3=1e3,g3=100;var Ms;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ms||(Ms={}));var Tt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Tt||(Tt={}));var bn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(bn||(bn={}));var yg;(function(e){e.websocket="websocket"})(yg||(yg={}));var Ui;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ui||(Ui={}));class v3{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var s,a;const o=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(a=t.join_ref)!==null&&a!==void 0?a:"",u=t.payload.event,h=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(h).length===0?"":JSON.stringify(h);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const p=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+f.length,m=new ArrayBuffer(this.HEADER_LENGTH+p);let w=new DataView(m),g=0;w.setUint8(g++,this.KINDS.userBroadcastPush),w.setUint8(g++,c.length),w.setUint8(g++,l.length),w.setUint8(g++,o.length),w.setUint8(g++,u.length),w.setUint8(g++,f.length),w.setUint8(g++,r),Array.from(c,y=>w.setUint8(g++,y.charCodeAt(0))),Array.from(l,y=>w.setUint8(g++,y.charCodeAt(0))),Array.from(o,y=>w.setUint8(g++,y.charCodeAt(0))),Array.from(u,y=>w.setUint8(g++,y.charCodeAt(0))),Array.from(f,y=>w.setUint8(g++,y.charCodeAt(0)));var v=new Uint8Array(m.byteLength+n.byteLength);return v.set(new Uint8Array(m),0),v.set(new Uint8Array(n),m.byteLength),v.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,a,o,l,c]=n;return r({join_ref:s,ref:a,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),a=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+s));c=c+s;const h=n.decode(t.slice(c,c+a));c=c+a;const f=n.decode(t.slice(c,c+o));c=c+o;const p=t.slice(c,t.byteLength),m=l===this.JSON_ENCODING?JSON.parse(n.decode(p)):p,w={type:this.BROADCAST_EVENT,event:h,payload:m};return o>0&&(w.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class fN{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var tt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(tt||(tt={}));const B0=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,o)=>(a[o]=y3(o,e,t,s),a),{}):{}},y3=(e,t,r,n)=>{const s=t.find(l=>l.name===e),a=s==null?void 0:s.type,o=r[e];return a&&!n.includes(a)?pN(a,o):xg(o)},pN=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return _3(t,r)}switch(e){case tt.bool:return x3(t);case tt.float4:case tt.float8:case tt.int2:case tt.int4:case tt.int8:case tt.numeric:case tt.oid:return w3(t);case tt.json:case tt.jsonb:return b3(t);case tt.timestamp:return j3(t);case tt.abstime:case tt.date:case tt.daterange:case tt.int4range:case tt.int8range:case tt.money:case tt.reltime:case tt.text:case tt.time:case tt.timestamptz:case tt.timetz:case tt.tsrange:case tt.tstzrange:return xg(t);default:return xg(t)}},xg=e=>e,x3=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},w3=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},b3=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},_3=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const o=e.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>pN(t,l))}return e},j3=e=>typeof e=="string"?e.replace(" ","T"):e,mN=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class jp{constructor(t,r,n={},s=vg){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var z0;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(z0||(z0={}));class rc{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=rc.syncState(this.state,s,a,o),this.pendingDiffs.forEach(c=>{this.state=rc.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=rc.syncDiff(this.state,s,a,o),l())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const a=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(a,(u,h)=>{o[u]||(c[u]=h)}),this.map(o,(u,h)=>{const f=a[u];if(f){const p=h.map(v=>v.presence_ref),m=f.map(v=>v.presence_ref),w=h.filter(v=>m.indexOf(v.presence_ref)<0),g=f.filter(v=>p.indexOf(v.presence_ref)<0);w.length>0&&(l[u]=w),g.length>0&&(c[u]=g)}else l[u]=h}),this.syncDiff(a,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const h=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),h.length>0){const f=t[l].map(m=>m.presence_ref),p=h.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...p)}n(l,h,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const h=c.map(f=>f.presence_ref);u=u.filter(f=>h.indexOf(f.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var q0;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(q0||(q0={}));var nc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(nc||(nc={}));var is;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(is||(is={}));class uo{constructor(t,r={config:{}},n){var s,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Tt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new jp(this,bn.join,this.params,this.timeout),this.rejoinTimer=new fN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Tt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Tt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Tt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(bn.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new rc(this),this.broadcastEndpointURL=mN(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Tt.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],h=!!this.bindings[nc.PRESENCE]&&this.bindings[nc.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,f={},p={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(is.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(is.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var w;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){t==null||t(is.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,v=(w=g==null?void 0:g.length)!==null&&w!==void 0?w:0,y=[];for(let x=0;x<v;x++){const b=g[x],{filter:{event:_,schema:S,table:j,filter:N}}=b,k=m&&m[x];if(k&&k.event===_&&uo.isFilterValueEqual(k.schema,S)&&uo.isFilterValueEqual(k.table,j)&&uo.isFilterValueEqual(k.filter,N))y.push(Object.assign(Object.assign({},b),{id:k.id}));else{this.unsubscribe(),this.state=Tt.errored,t==null||t(is.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(is.SUBSCRIBED);return}}).receive("error",m=>{this.state=Tt.errored,t==null||t(is.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(is.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Tt.joined&&t===nc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Tt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(bn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new jp(this,bn.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Tt.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new jp(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>g3){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,a;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:h}=bn;if(n&&[l,c,u,h].indexOf(o)>=0&&n!==this._joinRef())return;let p=this._onMessage(o,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var w,g,v;return((w=m.filter)===null||w===void 0?void 0:w.event)==="*"||((v=(g=m.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(m=>m.callback(p,n)):(a=this.bindings[o])===null||a===void 0||a.filter(m=>{var w,g,v,y,x,b,_,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const j=m.id,N=(w=m.filter)===null||w===void 0?void 0:w.event;return j&&((g=r.ids)===null||g===void 0?void 0:g.includes(j))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))&&(!(!((y=m.filter)===null||y===void 0)&&y.table)||m.filter.table===((x=r.data)===null||x===void 0?void 0:x.table))}else{const j=(_=(b=m==null?void 0:m.filter)===null||b===void 0?void 0:b.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return j==="*"||j===((S=r==null?void 0:r.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){const w=p.data,{schema:g,table:v,commit_timestamp:y,type:x,errors:b}=w;p=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:y,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(w))}m.callback(p,n)})}_isClosed(){return this.state===Tt.closed}_isJoined(){return this.state===Tt.joined}_isJoining(){return this.state===Tt.joining}_isLeaving(){return this.state===Tt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&uo.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(bn.close,{},t)}_onError(t){this._on(bn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Tt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=B0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=B0(t.columns,t.old_record)),r}}const Sp=()=>{},Qu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},S3=[1e3,2e3,5e3,1e4],N3=1e4,k3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class C3{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=vg,this.transport=null,this.heartbeatIntervalMs=Qu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Sp,this.ref=0,this.reconnectTimer=null,this.vsn=U0,this.logger=Sp,this.conn=null,this.sendBuffer=[],this.serializer=new v3,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${yg.websocket}`,this.httpEndpoint=mN(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=d3.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ms.connecting:return Ui.Connecting;case Ms.open:return Ui.Open;case Ms.closing:return Ui.Closing;default:return Ui.Closed}}isConnected(){return this.connectionState()===Ui.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new uo(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:s,ref:a}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(m3,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Qu.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(h){this.log("error","error in heartbeat callback",h)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:a,ref:o}=r,l=o?`(${o})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Ms.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ms.open||this.conn.readyState===Ms.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(bn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([k3],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:f3};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(bn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new fN(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Qu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,a,o,l,c,u,h,f,p,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:vg,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Qu.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Sp,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:U0,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:w=>S3[w-1]||N3,this.vsn){case p3:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(w,g)=>g(JSON.stringify(w)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(w,g)=>g(JSON.parse(w));break;case hN:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Pc=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function E3(e,t,r){const n=new URL(t,e);if(r)for(const[s,a]of Object.entries(r))a!==void 0&&n.searchParams.set(s,a);return n.toString()}async function T3(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function P3(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:a,headers:o}){const l=E3(e.baseUrl,n,s),c=await T3(e.auth),u=await t(l,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...c,...o},body:a?JSON.stringify(a):void 0}),h=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),p=f&&h?JSON.parse(h):h;if(!u.ok){const m=f?p:void 0,w=m==null?void 0:m.error;throw new Pc((w==null?void 0:w.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:w==null?void 0:w.type,icebergCode:w==null?void 0:w.code,details:m})}return{status:u.status,headers:u.headers,data:p}}}}function Ju(e){return e.join("")}var R3=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Ju(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ju(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ju(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ju(e.namespace)}`}),!0}catch(t){if(t instanceof Pc&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Pc&&r.status===409)return;throw r}}};function Ma(e){return e.join("")}var A3=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ma(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ma(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ma(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ma(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ma(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ma(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Pc&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Pc&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},I3=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=P3({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new R3(this.client,t),this.tableOps=new A3(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},sf=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function lt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var O3=class extends sf{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},wg=class extends sf{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const my=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),M3=()=>Response,bg=e=>{if(Array.isArray(e))return e.map(r=>bg(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=bg(n)}),t},D3=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},L3=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Rc(e){"@babel/helpers - typeof";return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rc(e)}function $3(e,t){if(Rc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Rc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F3(e){var t=$3(e,"string");return Rc(t)=="symbol"?t:t+""}function U3(e,t,r){return(t=F3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W0(Object(r),!0).forEach(function(n){U3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Np=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},B3=async(e,t,r)=>{e instanceof await M3()&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{const s=e.status||500,a=(n==null?void 0:n.statusCode)||s+"";t(new O3(Np(n),s,a))}).catch(n=>{t(new wg(Np(n),n))}):t(new wg(Np(e),e))},z3=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(D3(n)?(s.headers=_e({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),_e(_e({},s),r))};async function iu(e,t,r,n,s,a){return new Promise((o,l)=>{e(r,z3(t,n,s,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>B3(c,l,n))})}async function Ac(e,t,r,n){return iu(e,"GET",t,r,n)}async function vn(e,t,r,n,s){return iu(e,"POST",t,n,s,r)}async function _g(e,t,r,n,s){return iu(e,"PUT",t,n,s,r)}async function q3(e,t,r,n){return iu(e,"HEAD",t,_e(_e({},r),{},{noResolveJson:!0}),n)}async function gy(e,t,r,n,s){return iu(e,"DELETE",t,n,s,r)}var W3=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(lt(t))return{data:null,error:t};throw t}}};let gN;gN=Symbol.toStringTag;var V3=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[gN]="BlobDownloadBuilder",this.promise=null}asStream(){return new W3(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(lt(t))return{data:null,error:t};throw t}}};const H3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},V0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var K3=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=my(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){var s=this;try{let a;const o=_e(_e({},V0),n);let l=_e(_e({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",s.encodeMetadata(c)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",o.cacheControl),c&&!a.has("metadata")&&a.append("metadata",s.encodeMetadata(c))):(a=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=_e(_e({},l),n.headers));const u=s._removeEmptyFolders(t),h=s._getFinalPath(u),f=await(e=="PUT"?_g:vn)(s.fetch,`${s.url}/object/${h}`,a,_e({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(lt(a))return{data:null,error:a};throw a}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const a=s._removeEmptyFolders(e),o=s._getFinalPath(a),l=new URL(s.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const u=_e({upsert:V0.upsert},n),h=_e(_e({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType),{data:{path:a,fullPath:(await _g(s.fetch,l.toString(),c,{headers:h})).Key},error:null}}catch(c){if(s.shouldThrowOnError)throw c;if(lt(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var r=this;try{let n=r._getFinalPath(e);const s=_e({},r.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const a=await vn(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+a.url),l=o.searchParams.get("token");if(!l)throw new sf("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;try{return{data:await vn(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}}async copy(e,t,r){var n=this;try{return{data:{path:(await vn(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,r){var n=this;try{let s=n._getFinalPath(e),a=await vn(n.fetch,`${n.url}/object/sign/${s}`,_e({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${n.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,r){var n=this;try{const s=await vn(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>_e(_e({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${a}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=n?`?${n}`:"",a=this._getFinalPath(e),o=()=>Ac(this.fetch,`${this.url}/${r}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new V3(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:bg(await Ac(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await q3(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(lt(n)&&n instanceof wg){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}async remove(e){var t=this;try{return{data:await gy(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}}async list(e,t,r){var n=this;try{const s=_e(_e(_e({},H3),t),{},{prefix:e||""});return{data:await vn(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(lt(s))return{data:null,error:s};throw s}}async listV2(e,t){var r=this;try{const n=_e({},e);return{data:await vn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const vN="2.91.0",yN={"X-Client-Info":`storage-js/${vN}`};var G3=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const s=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=_e(_e({},yN),t),this.fetch=my(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await Ac(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await Ac(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await vn(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var r=this;try{return{data:await _g(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await vn(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await gy(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Y3=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=_e(_e({},yN),t),this.fetch=my(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await vn(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await Ac(t.fetch,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await gy(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(lt(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!L3(e))throw new sf("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new I3({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,a){const o=s[a];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(s,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}};const vy={"X-Client-Info":`storage-js/${vN}`,"Content-Type":"application/json"};var xN=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Lr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var kp=class extends xN{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Q3=class extends xN{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const yy=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),J3=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},H0=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),X3=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const n=e.status||500,s=e;if(typeof s.json=="function")s.json().then(a=>{const o=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||n+"";t(new kp(H0(a),n,o))}).catch(()=>{const a=n+"";t(new kp(s.statusText||`HTTP ${n} error`,n,a))});else{const a=n+"";t(new kp(s.statusText||`HTTP ${n} error`,n,a))}}else t(new Q3(H0(e),e))},Z3=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(J3(n)?(s.headers=_e({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,_e(_e({},s),r)):s};async function e$(e,t,r,n,s,a){return new Promise((o,l)=>{e(r,Z3(t,n,s,a)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>X3(c,l,n))})}async function $r(e,t,r,n,s){return e$(e,"POST",t,n,s,r)}var t$=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=_e(_e({},vy),t),this.fetch=yy(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await $r(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Lr(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await $r(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await $r(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Lr(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await $r(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Lr(n))return{data:null,error:n};throw n}}},r$=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=_e(_e({},vy),t),this.fetch=yy(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await $r(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Lr(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await $r(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Lr(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await $r(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Lr(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await $r(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Lr(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await $r(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Lr(r))return{data:null,error:r};throw r}}},n$=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=_e(_e({},vy),t),this.fetch=yy(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await $r(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Lr(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await $r(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Lr(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await $r(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Lr(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await $r(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Lr(r))return{data:null,error:r};throw r}}},s$=class extends n${constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new i$(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},i$=class extends t${constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,_e(_e({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,_e(_e({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new a$(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},a$=class extends r${constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,_e(_e({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,_e(_e({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,_e(_e({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,_e(_e({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,_e(_e({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},o$=class extends G3{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new K3(this.url,this.headers,e,this.fetch)}get vectors(){return new s$(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Y3(this.url+"/iceberg",this.headers,this.fetch)}};const wN="2.91.0",Ga=30*1e3,jg=3,Cp=jg*Ga,l$="http://localhost:9999",c$="supabase.auth.token",u$={"X-Client-Info":`gotrue-js/${wN}`},Sg="X-Supabase-Api-Version",bN={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},d$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,h$=10*60*1e3;class Ic extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ge(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class f$ extends Ic{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function p$(e){return ge(e)&&e.name==="AuthApiError"}class Bi extends Ic{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ss extends Ic{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Or extends Ss{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function m$(e){return ge(e)&&e.name==="AuthSessionMissingError"}class Da extends Ss{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xu extends Ss{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Zu extends Ss{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function g$(e){return ge(e)&&e.name==="AuthImplicitGrantRedirectError"}class K0 extends Ss{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class v$ extends Ss{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ng extends Ss{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Ep(e){return ge(e)&&e.name==="AuthRetryableFetchError"}class G0 extends Ss{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class kg extends Ss{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const sh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Y0=` 	
\r=`.split(""),y$=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Y0.length;t+=1)e[Y0[t].charCodeAt(0)]=-2;for(let t=0;t<sh.length;t+=1)e[sh[t].charCodeAt(0)]=t;return e})();function Q0(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(sh[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(sh[n]),t.queuedBits-=6}}function _N(e,t,r){const n=y$[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function J0(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{b$(o,n,r)};for(let o=0;o<e.length;o+=1)_N(e.charCodeAt(o),s,a);return t.join("")}function x$(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function w$(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}x$(n,t)}}function b$(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function bo(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)_N(e.charCodeAt(s),r,n);return new Uint8Array(t)}function _$(e){const t=[];return w$(e,r=>t.push(r)),new Uint8Array(t)}function Vi(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Q0(s,r,n)),Q0(null,r,n),t.join("")}function j$(e){return Math.round(Date.now()/1e3)+e}function S$(){return Symbol("auth-callback")}const Vt=()=>typeof window<"u"&&typeof document<"u",Ii={tested:!1,writable:!1},jN=()=>{if(!Vt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ii.tested)return Ii.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ii.tested=!0,Ii.writable=!0}catch{Ii.tested=!0,Ii.writable=!1}return Ii.writable};function N$(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const SN=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),k$=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ya=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Oi=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Wt=async(e,t)=>{await e.removeItem(t)};class af{constructor(){this.promise=new af.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}af.promiseConstructor=Promise;function Tp(e){const t=e.split(".");if(t.length!==3)throw new kg("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!d$.test(t[n]))throw new kg("JWT not in base64url format");return{header:JSON.parse(J0(t[0])),payload:JSON.parse(J0(t[1])),signature:bo(t[2]),raw:{header:t[0],payload:t[1]}}}async function C$(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function E$(e,t){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){n(o);return}}catch(o){if(!t(a,o)){s(o);return}}})()})}function T$(e){return("0"+e.toString(16)).substr(-2)}function P$(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,T$).join("")}async function R$(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function A$(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await R$(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function La(e,t,r=!1){const n=P$();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Ya(e,`${t}-code-verifier`,s);const a=await A$(n);return[a,n===a?"plain":"s256"]}const I$=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function O$(e){const t=e.headers.get(Sg);if(!t||!t.match(I$))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function M$(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function D$(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const L$=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function $a(e){if(!L$.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Pp(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function $$(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function X0(e){return JSON.parse(JSON.stringify(e))}const Li=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),F$=[502,503,504];async function Z0(e){var t;if(!k$(e))throw new Ng(Li(e),0);if(F$.includes(e.status))throw new Ng(Li(e),e.status);let r;try{r=await e.json()}catch(a){throw new Bi(Li(a),a)}let n;const s=O$(e);if(s&&s.getTime()>=bN["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new G0(Li(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Or}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new G0(Li(r),e.status,r.weak_password.reasons);throw new f$(Li(r),e.status||500,n)}const U$=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function be(e,t,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[Sg]||(a[Sg]=bN["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await B$(e,t,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function B$(e,t,r,n,s,a){const o=U$(t,n,s,a);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Ng(Li(c),0)}if(l.ok||await Z0(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Z0(c)}}function pn(e){var t;let r=null;W$(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=j$(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function eb(e){const t=pn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function $s(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function z$(e){return{data:e,error:null}}function q$(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=e,o=ul(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function tb(e){return e}function W$(e){return e.access_token&&e.refresh_token&&e.expires_in}const Rp=["global","local","others"];class V${constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=SN(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Rp[0]){if(Rp.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Rp.join(", ")}`);try{return await be(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await be(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:$s})}catch(n){if(ge(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=ul(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:q$,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ge(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await be(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:$s})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:tb});if(h.error)throw h.error;const f=await h.json(),p=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(w=>{const g=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(w.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ge(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){$a(t);try{return await be(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:$s})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){$a(t);try{return await be(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:$s})}catch(n){if(ge(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){$a(t);try{return await be(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:$s})}catch(n){if(ge(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){$a(t.userId);try{const{data:r,error:n}=await be(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(ge(r))return{data:null,error:r};throw r}}async _deleteFactor(t){$a(t.userId),$a(t.id);try{return{data:await be(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await be(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:tb});if(h.error)throw h.error;const f=await h.json(),p=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(w=>{const g=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(w.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ge(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await be(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ge(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await be(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ge(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await be(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ge(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await be(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await be(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ge(r))return{data:null,error:r};throw r}}}function rb(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Fa={debug:!!(globalThis&&jN()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class NN extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class H$ extends NN{}async function K$(e,t,r){Fa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Fa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Fa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Fa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Fa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new H$(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Fa.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function G$(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function kN(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Y$(e){return parseInt(e,16)}function Q$(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function J$(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:a=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:h,uri:f,version:p}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=kN(e.address),w=h?`${h}://${n}`:n,g=e.statement?`${e.statement}
`:"",v=`${w} wants you to sign in with your Ethereum account:
${m}

${g}`;let y=`URI: ${f}
Version: ${p}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let x=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);x+=`
- ${b}`}y+=x}return`${v}
${y}`}class _t extends Error{constructor({message:t,code:r,cause:n,name:s}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=s??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class ih extends _t{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function X$({error:e,options:t}){var r,n,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new _t({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new _t({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new _t({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new _t({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new _t({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new _t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new _t({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new _t({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(CN(o)){if(a.rp.id!==o)return new _t({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new _t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new _t({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new _t({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new _t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Z$({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new _t({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new _t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(CN(n)){if(r.rpId!==n)return new _t({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new _t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new _t({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new _t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class e5{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const t5=new e5;function r5(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=ul(e,["challenge","user","excludeCredentials"]),a=bo(t).buffer,o=Object.assign(Object.assign({},r),{id:bo(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:a,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:bo(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function n5(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=ul(e,["challenge","allowCredentials"]),s=bo(t).buffer,a=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];a.allowCredentials[o]=Object.assign(Object.assign({},l),{id:bo(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function s5(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Vi(new Uint8Array(e.response.attestationObject)),clientDataJSON:Vi(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function i5(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Vi(new Uint8Array(s.authenticatorData)),clientDataJSON:Vi(new Uint8Array(s.clientDataJSON)),signature:Vi(new Uint8Array(s.signature)),userHandle:s.userHandle?Vi(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function CN(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function nb(){var e,t;return!!(Vt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function a5(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ih("Browser returned unexpected credential type",t)}:{data:null,error:new ih("Empty credential response",t)}}catch(t){return{data:null,error:X$({error:t,options:e})}}}async function o5(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ih("Browser returned unexpected credential type",t)}:{data:null,error:new ih("Empty credential response",t)}}catch(t){return{data:null,error:Z$({error:t,options:e})}}}const l5={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},c5={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ah(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const a in s){const o=s[a];if(o!==void 0)if(Array.isArray(o))n[a]=o;else if(r(o))n[a]=o;else if(t(o)){const l=n[a];t(l)?n[a]=ah(l,o):n[a]=ah(o)}else n[a]=o}return n}function u5(e,t){return ah(l5,e,t||{})}function d5(e,t){return ah(c5,e,t||{})}class h5{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},a){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=s??t5.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=u5(o.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:h,error:f}=await a5({publicKey:u,signal:c});return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{const u=d5(o.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:h,error:f}=await o5(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(o){return ge(o)?{data:null,error:o}:{data:null,error:new Bi("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!r)return{data:null,error:new Ic("rpId is required for WebAuthn authentication")};try{if(!nb())return{data:null,error:new Bi("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:a});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return ge(o)?{data:null,error:o}:{data:null,error:new Bi("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!r)return{data:null,error:new Ic("rpId is required for WebAuthn registration")};try{if(!nb())return{data:null,error:new Bi("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(h=>{var f;return(f=h.data)===null||f===void 0?void 0:f.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:a});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return ge(o)?{data:null,error:o}:{data:null,error:new Bi("Unexpected error in register",o)}}}}G$();const f5={url:l$,storageKey:c$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:u$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function sb(e,t,r){return await r()}const Ua={};class Oc{get jwks(){var t,r;return(r=(t=Ua[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ua[this.storageKey]=Object.assign(Object.assign({},Ua[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ua[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ua[this.storageKey]=Object.assign(Object.assign({},Ua[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},f5),t);if(this.storageKey=a.storageKey,this.instanceID=(r=Oc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Oc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Vt()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new V$({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=SN(a.fetch),this.lock=a.lock||sb,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&Vt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=K$:this.lock=sb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new h5(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:jN()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=rb(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=rb(this.memoryStorage)),Vt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${wN}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Vt()&&(r=N$(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Vt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),g$(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ge(r)?this._returnResult({error:r}):this._returnResult({error:new Bi("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const a=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:pn}),{data:o,error:l}=a;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(ge(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var r,n,s;try{let a;if("email"in t){const{email:h,password:f,options:p}=t;let m=null,w=null;this.flowType==="pkce"&&([m,w]=await La(this.storage,this.storageKey)),a=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:h,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:w},xform:pn})}else if("phone"in t){const{phone:h,password:f,options:p}=t;a=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:pn})}else throw new Xu("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return await Wt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(await Wt(this.storage,`${this.storageKey}-code-verifier`),ge(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:o,options:l}=t;r=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:eb})}else if("phone"in t){const{phone:a,password:o,options:l}=t;r=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:eb})}else throw new Xu("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const a=new Da;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(ge(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,a,o,l,c,u,h,f,p;let m,w;if("message"in t)m=t.message,w=t.signature;else{const{chain:g,wallet:v,statement:y,options:x}=t;let b;if(Vt())if(typeof v=="object")b=v;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")b=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=v}const _=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href),S=await b.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=kN(S[0]);let N=(n=x==null?void 0:x.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!N){const R=await b.request({method:"eth_chainId"});N=Y$(R)}const k={domain:_.host,address:j,statement:y,uri:_.href,version:"1",chainId:N,nonce:(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(a=x==null?void 0:x.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=x==null?void 0:x.signInWithEthereum)===null||h===void 0?void 0:h.resources};m=J$(k),w=await b.request({method:"personal_sign",params:[Q$(m),j]})}try{const{data:g,error:v}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:w},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:pn});if(v)throw v;if(!g||!g.session||!g.user){const y=new Da;return this._returnResult({data:{user:null,session:null},error:y})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:v})}catch(g){if(ge(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var r,n,s,a,o,l,c,u,h,f,p,m;let w,g;if("message"in t)w=t.message,g=t.signature;else{const{chain:v,wallet:y,statement:x,options:b}=t;let _;if(Vt())if(typeof y=="object")_=y;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))_=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=y}const S=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const j=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),x?{statement:x}:null));let N;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")N=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)N=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)w=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),g=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${S.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(h=b==null?void 0:b.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const j=await _.signMessage(new TextEncoder().encode(w),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=j}}try{const{data:v,error:y}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Vi(g)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:pn});if(y)throw y;if(!v||!v.session||!v.user){const x=new Da;return this._returnResult({data:{user:null,session:null},error:x})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:y})}catch(v){if(ge(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(t){const r=await Oi(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new v$;const{data:a,error:o}=await be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:pn});if(await Wt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!a||!a.session||!a.user){const l=new Da;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",a.session)},0)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(await Wt(this.storage,`${this.storageKey}-code-verifier`),ge(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:a,nonce:o}=t,l=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:pn}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const h=new Da;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(ge(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,a,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await La(this.storage,this.storageKey));const{error:f}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:h}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new Xu("You must provide either an email or phone number.")}catch(l){if(await Wt(this.storage,`${this.storageKey}-code-verifier`),ge(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,a;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:pn});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(ge(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,a,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await La(this.storage,this.storageKey));const u=await be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:z$});return!((a=u.data)===null||a===void 0)&&a.url&&Vt()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await Wt(this.storage,`${this.storageKey}-code-verifier`),ge(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Or;const{error:s}=await be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(ge(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:a}=t,{error:o}=await be(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:a}=t,{data:o,error:l}=await be(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Xu("You must provide either an email or phone number and a type")}catch(r){if(ge(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Oi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Cp:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Oi(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Pp()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=$$(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:$s}):await this._useSession(async r=>{var n,s,a;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Or}:await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:$s})})}catch(r){if(ge(r))return m$(r)&&(await this._removeSession(),await Wt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new Or;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await La(this.storage,this.storageKey));const{data:u,error:h}=await be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:$s});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await Wt(this.storage,`${this.storageKey}-code-verifier`),ge(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Or;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:o}=Tp(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(ge(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Or;const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ge(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Vt())throw new Zu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Zu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new K0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Zu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new K0("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!a||!l||!o||!u)throw new Zu("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(l);let p=h+f;c&&(p=parseInt(c));const m=p-h;m*1e3<=Ga&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const w=p-f;h-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,p,h):h-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,p,h);const{data:g,error:v}=await this._getUser(a);if(v)throw v;const y={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:p,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(n){if(ge(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Oi(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({error:a});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(p$(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Wt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=S$(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await La(this.storage,this.storageKey,!0));try{return await be(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(await Wt(this.storage,`${this.storageKey}-code-verifier`),ge(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var o,l,c,u,h;const{data:f,error:p}=a;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await be(this.fetch,"GET",m,{headers:this.headers,jwt:(h=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return Vt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(ge(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:a}}=r;if(s)throw s;const{options:o,provider:l,token:c,access_token:u,nonce:h}=t,f=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:pn}),{data:p,error:m}=f;return m?this._returnResult({data:{user:null,session:null},error:m}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new Da}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:m}))}catch(s){if(await Wt(this.storage,`${this.storageKey}-code-verifier`),ge(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)throw o;return await be(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await E$(async s=>(s>0&&await C$(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:pn})),(s,a)=>{const o=200*Math.pow(2,s);return a&&Ep(a)&&Date.now()+o-n<Ga})}catch(n){if(this._debug(r,"error",n),ge(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Vt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Oi(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Oi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Ya(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Pp()}else if(s&&!s.user&&!s.user){const o=await Oi(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Wt(this.storage,this.storageKey+"-user"),await Ya(this.storage,this.storageKey,s)):s.user=Pp()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Cp;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Cp}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Ep(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Or;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new af;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new Or;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),ge(a)){const o={data:null,error:a};return Ep(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Wt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Ya(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=X0(s);await Ya(this.storage,this.storageKey,a)}else{const s=X0(r);await Ya(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Wt(this.storage,this.storageKey),await Wt(this.storage,this.storageKey+"-code-verifier"),await Wt(this.storage,this.storageKey+"-user"),this.userStorage&&await Wt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Vt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ga);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Ga);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ga}ms, refresh threshold is ${jg} ticks`),s<=jg&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof NN)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Vt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await La(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?this._returnResult({data:null,error:a}):await be(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await be(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?s5(t.webauthn.credential_response):i5(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await be(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=await be(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:r5(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:n5(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Tp(n.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await be(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Or})})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new Or});const o=await be(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Vt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(ge(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new Or});const o=await be(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Vt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(ge(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await be(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Or})})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await be(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Or})})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+h$>s)return n;const{data:a,error:o}=await be(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:w}=await this.getSession();if(w||!m.session)return this._returnResult({data:null,error:w});n=m.session.access_token}const{header:s,payload:a,signature:o,raw:{header:l,payload:c}}=Tp(n);r!=null&&r.allowExpired||M$(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:a,header:s,signature:o},error:null}}const h=D$(s.alg),f=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,o,_$(`${l}.${c}`)))throw new kg("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(n){if(ge(n))return this._returnResult({data:null,error:n});throw n}}}Oc.nextInstanceID={};const p5=Oc,m5="2.91.0";let ql="";typeof Deno<"u"?ql="deno":typeof document<"u"?ql="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ql="react-native":ql="node";const g5={"X-Client-Info":`supabase-js-${ql}/${m5}`},v5={headers:g5},y5={schema:"public"},x5={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},w5={};function Mc(e){"@babel/helpers - typeof";return Mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mc(e)}function b5(e,t){if(Mc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Mc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _5(e){var t=b5(e,"string");return Mc(t)=="symbol"?t:t+""}function j5(e,t,r){return(t=_5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ib(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ib(Object(r),!0).forEach(function(n){j5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ib(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const S5=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),N5=()=>Headers,k5=(e,t,r)=>{const n=S5(r),s=N5();return async(a,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,pt(pt({},o),{},{headers:u}))}};function C5(e){return e.endsWith("/")?e:e+"/"}function E5(e,t){var r,n;const{db:s,auth:a,realtime:o,global:l}=e,{db:c,auth:u,realtime:h,global:f}=t,p={db:pt(pt({},c),s),auth:pt(pt({},u),a),realtime:pt(pt({},h),o),storage:{},global:pt(pt(pt({},f),l),{},{headers:pt(pt({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function T5(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(C5(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var P5=class extends p5{constructor(e){super(e)}},R5=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const a=T5(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const o=`sb-${a.hostname.split(".")[0]}-auth-token`,l={db:y5,realtime:w5,auth:pt(pt({},x5),{},{storageKey:o}),global:v5},c=E5(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=k5(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(pt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new u3(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new o$(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new i3(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:a,flowType:o,lock:l,debug:c,throwOnError:u},h,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new P5({url:this.authUrl.href,headers:pt(pt({},p),h),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:l,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new C3(this.realtimeUrl.href,pt(pt({},e),{},{params:pt(pt({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const A5=(e,t,r)=>new R5(e,t,r);function I5(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}I5()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const O5="https://qgqqavaogicecvhopgan.supabase.co",M5="sb_publishable_jlfIHGCxV8rrJ-kXwTqV2A_YYc4sfSl",U=A5(O5,M5,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),Ni={supabaseUrl:"https://qgqqavaogicecvhopgan.supabase.co",supabaseAnonKey:"sb_publishable_jlfIHGCxV8rrJ-kXwTqV2A_YYc4sfSl",agenticBackendUrl:"https://bapi.vdsai.cloud",basePath:"/remix-of-stackwise-advisor/"};function D5(e){return`${Ni.supabaseUrl.replace(/\/$/,"")}/functions/v1/${e}`}function au(e){return`${Ni.agenticBackendUrl.replace(/\/$/,"")}/api/${e}`}const EN=d.createContext(void 0);function L5({children:e}){const[t,r]=d.useState(null),[n,s]=d.useState(null),[a,o]=d.useState(null),[l,c]=d.useState(!0),u=new URL(Ni.basePath,window.location.origin).toString(),h=async g=>{const{data:v,error:y}=await U.from("profiles").select("id, user_id, display_name, avatar_url, bio, is_public, follower_count, following_count").eq("user_id",g).single();return y?(console.error("Error fetching profile:",y),null):v};d.useEffect(()=>{const{data:{subscription:g}}=U.auth.onAuthStateChange(async(v,y)=>{s(y),r((y==null?void 0:y.user)??null),y!=null&&y.user?setTimeout(async()=>{const x=await h(y.user.id);o(x)},0):o(null),c(!1)});return U.auth.getSession().then(async({data:{session:v}})=>{s(v);let y=(v==null?void 0:v.user)??null;if(!y&&(v!=null&&v.access_token)){const{data:x}=await U.auth.getUser(v.access_token);y=x.user??null}r(y),y&&h(y.id).then(o),c(!1)}),()=>g.unsubscribe()},[]);const f=async(g,v,y)=>{const{error:x}=await U.auth.signUp({email:g,password:v,options:{emailRedirectTo:u,data:{display_name:y}}});return{error:x}},p=async(g,v)=>{const{error:y}=await U.auth.signInWithPassword({email:g,password:v});return{error:y}},m=async()=>{await U.auth.signOut(),o(null)},w=async g=>{if(!t)return{error:new Error("Not authenticated")};const{error:v}=await U.from("profiles").update(g).eq("user_id",t.id);return v||o(y=>y?{...y,...g}:null),{error:v}};return i.jsx(EN.Provider,{value:{user:t,session:n,profile:a,isLoading:l,signUp:f,signIn:p,signOut:m,updateProfile:w},children:e})}function Ne(){const e=d.useContext(EN);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const xy=tl("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-soft hover:bg-primary/90 hover:shadow-soft-md hover:-translate-y-0.5",destructive:"bg-destructive text-destructive-foreground shadow-soft hover:bg-destructive/90",outline:"border border-border/60 bg-background hover:bg-accent hover:text-accent-foreground hover:border-primary/30",secondary:"bg-secondary/80 text-secondary-foreground hover:bg-secondary/60",ghost:"hover:bg-accent/50 hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",glass:"bg-card/40 border border-border/40 text-foreground hover:bg-card/60 hover:border-primary/30 hover:shadow-soft",glow:"bg-primary text-primary-foreground shadow-glow-aqua hover:shadow-[0_0_40px_hsl(185_55%_50%_/_0.5)]",chrome:"bg-gradient-chrome border border-border/50 text-foreground hover:shadow-soft-md"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),F=d.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},a)=>{const o=n?HA:"button";return i.jsx(o,{className:H(xy({variant:t,size:r,className:e})),ref:a,...s})});F.displayName="Button";function ab({variant:e="header",mode:t="all",className:r}){const s=Er().pathname,o=[{path:"/",label:"Home",icon:X1,showWhen:"public-only"},{path:"/wall",label:"Feed",icon:Yh,showWhen:"auth-only"},{path:"/channels",label:"Channels",icon:nO,showWhen:"always"},{path:"/blueprints",label:"Blueprints",icon:J1,showWhen:"always"},{path:"/explore",label:"Explore",icon:Na,showWhen:"always"}].filter(l=>t==="public"?l.showWhen==="public-only"||l.showWhen==="always":l.showWhen==="auth-only"||l.showWhen==="always");return e==="floating"?i.jsx("nav",{className:H("fixed bottom-4 left-1/2 -translate-x-1/2 z-40 flex items-center gap-1 p-1 bg-background rounded-full border border-border/40 shadow-soft-lg transition-transform duration-200 ease-out",r),children:o.map(l=>{const c=s===l.path,u=l.icon;return i.jsx(pe,{to:l.path,children:i.jsxs(F,{variant:c?"default":"ghost",size:"sm",className:H("gap-2 rounded-full",c&&"bg-primary text-primary-foreground"),children:[i.jsx(u,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:l.label})]})},l.path)})}):i.jsx("nav",{className:H("flex items-center gap-1 p-1 bg-background rounded-xl border border-border/40",r),children:o.map(l=>{const c=s===l.path,u=l.icon;return i.jsx(pe,{to:l.path,children:i.jsxs(F,{variant:c?"glass":"ghost",size:"sm",className:H("gap-2 h-8 px-2 text-xs",c&&"bg-accent/50 pointer-events-none"),children:[i.jsx(u,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden md:inline",children:l.label})]})},l.path)})})}var $5=d.createContext(void 0);function Ca(e){const t=d.useContext($5);return e||t||"ltr"}var Ap=0;function of(){d.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??ob()),document.body.insertAdjacentElement("beforeend",e[1]??ob()),Ap++,()=>{Ap===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Ap--}},[])}function ob(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ip="focusScope.autoFocusOnMount",Op="focusScope.autoFocusOnUnmount",lb={bubbles:!1,cancelable:!0},F5="FocusScope",ou=d.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=e,[l,c]=d.useState(null),u=gt(s),h=gt(a),f=d.useRef(null),p=Se(t,g=>c(g)),m=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(n){let g=function(b){if(m.paused||!l)return;const _=b.target;l.contains(_)?f.current=_:As(f.current,{select:!0})},v=function(b){if(m.paused||!l)return;const _=b.relatedTarget;_!==null&&(l.contains(_)||As(f.current,{select:!0}))},y=function(b){if(document.activeElement===document.body)for(const S of b)S.removedNodes.length>0&&As(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",v);const x=new MutationObserver(y);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",v),x.disconnect()}}},[n,l,m.paused]),d.useEffect(()=>{if(l){ub.add(m);const g=document.activeElement;if(!l.contains(g)){const y=new CustomEvent(Ip,lb);l.addEventListener(Ip,u),l.dispatchEvent(y),y.defaultPrevented||(U5(V5(TN(l)),{select:!0}),document.activeElement===g&&As(l))}return()=>{l.removeEventListener(Ip,u),setTimeout(()=>{const y=new CustomEvent(Op,lb);l.addEventListener(Op,h),l.dispatchEvent(y),y.defaultPrevented||As(g??document.body,{select:!0}),l.removeEventListener(Op,h),ub.remove(m)},0)}}},[l,u,h,m]);const w=d.useCallback(g=>{if(!r&&!n||m.paused)return;const v=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(v&&y){const x=g.currentTarget,[b,_]=B5(x);b&&_?!g.shiftKey&&y===_?(g.preventDefault(),r&&As(b,{select:!0})):g.shiftKey&&y===b&&(g.preventDefault(),r&&As(_,{select:!0})):y===x&&g.preventDefault()}},[r,n,m.paused]);return i.jsx(se.div,{tabIndex:-1,...o,ref:p,onKeyDown:w})});ou.displayName=F5;function U5(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(As(n,{select:t}),document.activeElement!==r)return}function B5(e){const t=TN(e),r=cb(t,e),n=cb(t.reverse(),e);return[r,n]}function TN(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function cb(e,t){for(const r of e)if(!z5(r,{upTo:t}))return r}function z5(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function q5(e){return e instanceof HTMLInputElement&&"select"in e}function As(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&q5(e)&&t&&e.select()}}var ub=W5();function W5(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=db(e,t),e.unshift(t)},remove(t){var r;e=db(e,t),(r=e[0])==null||r.resume()}}}function db(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function V5(e){return e.filter(t=>t.tagName!=="A")}var Mp="rovingFocusGroup.onEntryFocus",H5={bubbles:!1,cancelable:!0},lu="RovingFocusGroup",[Cg,PN,K5]=Zc(lu),[G5,dl]=Nt(lu,[K5]),[Y5,Q5]=G5(lu),RN=d.forwardRef((e,t)=>i.jsx(Cg.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(Cg.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(J5,{...e,ref:t})})}));RN.displayName=lu;var J5=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=e,p=d.useRef(null),m=Se(t,p),w=Ca(a),[g,v]=sr({prop:o,defaultProp:l??null,onChange:c,caller:lu}),[y,x]=d.useState(!1),b=gt(u),_=PN(r),S=d.useRef(!1),[j,N]=d.useState(0);return d.useEffect(()=>{const k=p.current;if(k)return k.addEventListener(Mp,b),()=>k.removeEventListener(Mp,b)},[b]),i.jsx(Y5,{scope:r,orientation:n,dir:w,loop:s,currentTabStopId:g,onItemFocus:d.useCallback(k=>v(k),[v]),onItemShiftTab:d.useCallback(()=>x(!0),[]),onFocusableItemAdd:d.useCallback(()=>N(k=>k+1),[]),onFocusableItemRemove:d.useCallback(()=>N(k=>k-1),[]),children:i.jsx(se.div,{tabIndex:y||j===0?-1:0,"data-orientation":n,...f,ref:m,style:{outline:"none",...e.style},onMouseDown:Z(e.onMouseDown,()=>{S.current=!0}),onFocus:Z(e.onFocus,k=>{const R=!S.current;if(k.target===k.currentTarget&&R&&!y){const E=new CustomEvent(Mp,H5);if(k.currentTarget.dispatchEvent(E),!E.defaultPrevented){const $=_().filter(I=>I.focusable),M=$.find(I=>I.active),O=$.find(I=>I.id===g),D=[M,O,...$].filter(Boolean).map(I=>I.ref.current);ON(D,h)}}S.current=!1}),onBlur:Z(e.onBlur,()=>x(!1))})})}),AN="RovingFocusGroupItem",IN=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:a,children:o,...l}=e,c=Mt(),u=a||c,h=Q5(AN,r),f=h.currentTabStopId===u,p=PN(r),{onFocusableItemAdd:m,onFocusableItemRemove:w,currentTabStopId:g}=h;return d.useEffect(()=>{if(n)return m(),()=>w()},[n,m,w]),i.jsx(Cg.ItemSlot,{scope:r,id:u,focusable:n,active:s,children:i.jsx(se.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:t,onMouseDown:Z(e.onMouseDown,v=>{n?h.onItemFocus(u):v.preventDefault()}),onFocus:Z(e.onFocus,()=>h.onItemFocus(u)),onKeyDown:Z(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){h.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=eF(v,h.orientation,h.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let b=p().filter(_=>_.focusable).map(_=>_.ref.current);if(y==="last")b.reverse();else if(y==="prev"||y==="next"){y==="prev"&&b.reverse();const _=b.indexOf(v.currentTarget);b=h.loop?tF(b,_+1):b.slice(_+1)}setTimeout(()=>ON(b))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:g!=null}):o})})});IN.displayName=AN;var X5={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Z5(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function eF(e,t,r){const n=Z5(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return X5[n]}function ON(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function tF(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var wy=RN,by=IN,rF=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ba=new WeakMap,ed=new WeakMap,td={},Dp=0,MN=function(e){return e&&(e.host||MN(e.parentNode))},nF=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=MN(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},sF=function(e,t,r,n){var s=nF(t,Array.isArray(e)?e:[e]);td[r]||(td[r]=new WeakMap);var a=td[r],o=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))h(p);else try{var m=p.getAttribute(n),w=m!==null&&m!=="false",g=(Ba.get(p)||0)+1,v=(a.get(p)||0)+1;Ba.set(p,g),a.set(p,v),o.push(p),g===1&&w&&ed.set(p,!0),v===1&&p.setAttribute(r,"true"),w||p.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",p,y)}})};return h(t),l.clear(),Dp++,function(){o.forEach(function(f){var p=Ba.get(f)-1,m=a.get(f)-1;Ba.set(f,p),a.set(f,m),p||(ed.has(f)||f.removeAttribute(n),ed.delete(f)),m||f.removeAttribute(r)}),Dp--,Dp||(Ba=new WeakMap,Ba=new WeakMap,ed=new WeakMap,td={})}},lf=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=rF(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),sF(n,s,r,"aria-hidden")):function(){return null}},_d="right-scroll-bar-position",jd="width-before-scroll-bar",iF="with-scroll-bars-hidden",aF="--removed-body-scroll-bar-size";function Lp(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function oF(e,t){var r=d.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var lF=typeof window<"u"?d.useLayoutEffect:d.useEffect,hb=new WeakMap;function cF(e,t){var r=oF(null,function(n){return e.forEach(function(s){return Lp(s,n)})});return lF(function(){var n=hb.get(r);if(n){var s=new Set(n),a=new Set(e),o=r.current;s.forEach(function(l){a.has(l)||Lp(l,null)}),a.forEach(function(l){s.has(l)||Lp(l,o)})}hb.set(r,e)},[e]),r}function uF(e){return e}function dF(e,t){t===void 0&&(t=uF);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var o=t(a,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(n=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(l){return a(l)},filter:function(){return r}}},assignMedium:function(a){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(a),o=r}var c=function(){var h=o;o=[],h.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),r}}}};return s}function hF(e){e===void 0&&(e={});var t=dF(null);return t.options=Un({async:!0,ssr:!1},e),t}var DN=function(e){var t=e.sideCar,r=ul(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return d.createElement(n,Un({},r))};DN.isSideCarExport=!0;function fF(e,t){return e.useMedium(t),DN}var LN=hF(),$p=function(){},cf=d.forwardRef(function(e,t){var r=d.useRef(null),n=d.useState({onScrollCapture:$p,onWheelCapture:$p,onTouchMoveCapture:$p}),s=n[0],a=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,h=e.enabled,f=e.shards,p=e.sideCar,m=e.noRelative,w=e.noIsolation,g=e.inert,v=e.allowPinchZoom,y=e.as,x=y===void 0?"div":y,b=e.gapMode,_=ul(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=p,j=cF([r,t]),N=Un(Un({},_),s);return d.createElement(d.Fragment,null,h&&d.createElement(S,{sideCar:LN,removeScrollBar:u,shards:f,noRelative:m,noIsolation:w,inert:g,setCallbacks:a,allowPinchZoom:!!v,lockRef:r,gapMode:b}),o?d.cloneElement(d.Children.only(l),Un(Un({},N),{ref:j})):d.createElement(x,Un({},N,{className:c,ref:j}),l))});cf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};cf.classNames={fullWidth:jd,zeroRight:_d};var pF=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function mF(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=pF();return t&&e.setAttribute("nonce",t),e}function gF(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function vF(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var yF=function(){var e=0,t=null;return{add:function(r){e==0&&(t=mF())&&(gF(t,r),vF(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},xF=function(){var e=yF();return function(t,r){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},$N=function(){var e=xF(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},wF={left:0,top:0,right:0,gap:0},Fp=function(e){return parseInt(e||"",10)||0},bF=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Fp(r),Fp(n),Fp(s)]},_F=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return wF;var t=bF(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},jF=$N(),_o="data-scroll-locked",SF=function(e,t,r,n){var s=e.left,a=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(iF,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(_o,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(_d,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(jd,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(_d," .").concat(_d,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(jd," .").concat(jd,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(_o,`] {
    `).concat(aF,": ").concat(l,`px;
  }
`)},fb=function(){var e=parseInt(document.body.getAttribute(_o)||"0",10);return isFinite(e)?e:0},NF=function(){d.useEffect(function(){return document.body.setAttribute(_o,(fb()+1).toString()),function(){var e=fb()-1;e<=0?document.body.removeAttribute(_o):document.body.setAttribute(_o,e.toString())}},[])},kF=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;NF();var a=d.useMemo(function(){return _F(s)},[s]);return d.createElement(jF,{styles:SF(a,!t,s,r?"":"!important")})},Eg=!1;if(typeof window<"u")try{var rd=Object.defineProperty({},"passive",{get:function(){return Eg=!0,!0}});window.addEventListener("test",rd,rd),window.removeEventListener("test",rd,rd)}catch{Eg=!1}var za=Eg?{passive:!1}:!1,CF=function(e){return e.tagName==="TEXTAREA"},FN=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!CF(e)&&r[t]==="visible")},EF=function(e){return FN(e,"overflowY")},TF=function(e){return FN(e,"overflowX")},pb=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=UN(e,n);if(s){var a=BN(e,n),o=a[1],l=a[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},PF=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},RF=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},UN=function(e,t){return e==="v"?EF(t):TF(t)},BN=function(e,t){return e==="v"?PF(t):RF(t)},AF=function(e,t){return e==="h"&&t==="rtl"?-1:1},IF=function(e,t,r,n,s){var a=AF(e,window.getComputedStyle(t).direction),o=a*n,l=r.target,c=t.contains(l),u=!1,h=o>0,f=0,p=0;do{if(!l)break;var m=BN(e,l),w=m[0],g=m[1],v=m[2],y=g-v-a*w;(w||y)&&UN(e,l)&&(f+=y,p+=w);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(p)<1||!s))&&(u=!0),u},nd=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},mb=function(e){return[e.deltaX,e.deltaY]},gb=function(e){return e&&"current"in e?e.current:e},OF=function(e,t){return e[0]===t[0]&&e[1]===t[1]},MF=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},DF=0,qa=[];function LF(e){var t=d.useRef([]),r=d.useRef([0,0]),n=d.useRef(),s=d.useState(DF++)[0],a=d.useState($N)[0],o=d.useRef(e);d.useEffect(function(){o.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=r3([e.lockRef.current],(e.shards||[]).map(gb),!0).filter(Boolean);return g.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=d.useCallback(function(g,v){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var y=nd(g),x=r.current,b="deltaX"in g?g.deltaX:x[0]-y[0],_="deltaY"in g?g.deltaY:x[1]-y[1],S,j=g.target,N=Math.abs(b)>Math.abs(_)?"h":"v";if("touches"in g&&N==="h"&&j.type==="range")return!1;var k=pb(N,j);if(!k)return!0;if(k?S=N:(S=N==="v"?"h":"v",k=pb(N,j)),!k)return!1;if(!n.current&&"changedTouches"in g&&(b||_)&&(n.current=S),!S)return!0;var R=n.current||S;return IF(R,v,g,R==="h"?b:_,!0)},[]),c=d.useCallback(function(g){var v=g;if(!(!qa.length||qa[qa.length-1]!==a)){var y="deltaY"in v?mb(v):nd(v),x=t.current.filter(function(S){return S.name===v.type&&(S.target===v.target||v.target===S.shadowParent)&&OF(S.delta,y)})[0];if(x&&x.should){v.cancelable&&v.preventDefault();return}if(!x){var b=(o.current.shards||[]).map(gb).filter(Boolean).filter(function(S){return S.contains(v.target)}),_=b.length>0?l(v,b[0]):!o.current.noIsolation;_&&v.cancelable&&v.preventDefault()}}},[]),u=d.useCallback(function(g,v,y,x){var b={name:g,delta:v,target:y,should:x,shadowParent:$F(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(_){return _!==b})},1)},[]),h=d.useCallback(function(g){r.current=nd(g),n.current=void 0},[]),f=d.useCallback(function(g){u(g.type,mb(g),g.target,l(g,e.lockRef.current))},[]),p=d.useCallback(function(g){u(g.type,nd(g),g.target,l(g,e.lockRef.current))},[]);d.useEffect(function(){return qa.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,za),document.addEventListener("touchmove",c,za),document.addEventListener("touchstart",h,za),function(){qa=qa.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,za),document.removeEventListener("touchmove",c,za),document.removeEventListener("touchstart",h,za)}},[]);var m=e.removeScrollBar,w=e.inert;return d.createElement(d.Fragment,null,w?d.createElement(a,{styles:MF(s)}):null,m?d.createElement(kF,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function $F(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const FF=fF(LN,LF);var cu=d.forwardRef(function(e,t){return d.createElement(cf,Un({},e,{ref:t,sideCar:FF}))});cu.classNames=cf.classNames;var Tg=["Enter"," "],UF=["ArrowDown","PageUp","Home"],zN=["ArrowUp","PageDown","End"],BF=[...UF,...zN],zF={ltr:[...Tg,"ArrowRight"],rtl:[...Tg,"ArrowLeft"]},qF={ltr:["ArrowLeft"],rtl:["ArrowRight"]},uu="Menu",[Dc,WF,VF]=Zc(uu),[Ea,qN]=Nt(uu,[VF,ji,dl]),uf=ji(),WN=dl(),[HF,Ta]=Ea(uu),[KF,du]=Ea(uu),VN=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:s,onOpenChange:a,modal:o=!0}=e,l=uf(t),[c,u]=d.useState(null),h=d.useRef(!1),f=gt(a),p=Ca(s);return d.useEffect(()=>{const m=()=>{h.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>h.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),i.jsx(sy,{...l,children:i.jsx(HF,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:u,children:i.jsx(KF,{scope:t,onClose:d.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:p,modal:o,children:n})})})};VN.displayName=uu;var GF="MenuAnchor",_y=d.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=uf(r);return i.jsx(nu,{...s,...n,ref:t})});_y.displayName=GF;var jy="MenuPortal",[YF,HN]=Ea(jy,{forceMount:void 0}),KN=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:s}=e,a=Ta(jy,t);return i.jsx(YF,{scope:t,forceMount:r,children:i.jsx(Dt,{present:r||a.open,children:i.jsx(el,{asChild:!0,container:s,children:n})})})};KN.displayName=jy;var nn="MenuContent",[QF,Sy]=Ea(nn),GN=d.forwardRef((e,t)=>{const r=HN(nn,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,a=Ta(nn,e.__scopeMenu),o=du(nn,e.__scopeMenu);return i.jsx(Dc.Provider,{scope:e.__scopeMenu,children:i.jsx(Dt,{present:n||a.open,children:i.jsx(Dc.Slot,{scope:e.__scopeMenu,children:o.modal?i.jsx(JF,{...s,ref:t}):i.jsx(XF,{...s,ref:t})})})})}),JF=d.forwardRef((e,t)=>{const r=Ta(nn,e.__scopeMenu),n=d.useRef(null),s=Se(t,n);return d.useEffect(()=>{const a=n.current;if(a)return lf(a)},[]),i.jsx(Ny,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Z(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),XF=d.forwardRef((e,t)=>{const r=Ta(nn,e.__scopeMenu);return i.jsx(Ny,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),ZF=fi("MenuContent.ScrollLock"),Ny=d.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:p,onDismiss:m,disableOutsideScroll:w,...g}=e,v=Ta(nn,r),y=du(nn,r),x=uf(r),b=WN(r),_=WF(r),[S,j]=d.useState(null),N=d.useRef(null),k=Se(t,N,v.onContentChange),R=d.useRef(0),E=d.useRef(""),$=d.useRef(0),M=d.useRef(null),O=d.useRef("right"),C=d.useRef(0),D=w?cu:d.Fragment,I=w?{as:ZF,allowPinchZoom:!0}:void 0,z=P=>{var W,ae;const V=E.current+P,J=_().filter(X=>!X.disabled),L=document.activeElement,Q=(W=J.find(X=>X.ref.current===L))==null?void 0:W.textValue,q=J.map(X=>X.textValue),K=dU(q,V,Q),te=(ae=J.find(X=>X.textValue===K))==null?void 0:ae.ref.current;(function X(le){E.current=le,window.clearTimeout(R.current),le!==""&&(R.current=window.setTimeout(()=>X(""),1e3))})(V),te&&setTimeout(()=>te.focus())};d.useEffect(()=>()=>window.clearTimeout(R.current),[]),of();const A=d.useCallback(P=>{var J,L;return O.current===((J=M.current)==null?void 0:J.side)&&fU(P,(L=M.current)==null?void 0:L.area)},[]);return i.jsx(QF,{scope:r,searchRef:E,onItemEnter:d.useCallback(P=>{A(P)&&P.preventDefault()},[A]),onItemLeave:d.useCallback(P=>{var V;A(P)||((V=N.current)==null||V.focus(),j(null))},[A]),onTriggerLeave:d.useCallback(P=>{A(P)&&P.preventDefault()},[A]),pointerGraceTimerRef:$,onPointerGraceIntentChange:d.useCallback(P=>{M.current=P},[]),children:i.jsx(D,{...I,children:i.jsx(ou,{asChild:!0,trapped:s,onMountAutoFocus:Z(a,P=>{var V;P.preventDefault(),(V=N.current)==null||V.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(ja,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:p,onDismiss:m,children:i.jsx(wy,{asChild:!0,...b,dir:y.dir,orientation:"vertical",loop:n,currentTabStopId:S,onCurrentTabStopIdChange:j,onEntryFocus:Z(c,P=>{y.isUsingKeyboardRef.current||P.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(Zh,{role:"menu","aria-orientation":"vertical","data-state":uk(v.open),"data-radix-menu-content":"",dir:y.dir,...x,...g,ref:k,style:{outline:"none",...g.style},onKeyDown:Z(g.onKeyDown,P=>{const J=P.target.closest("[data-radix-menu-content]")===P.currentTarget,L=P.ctrlKey||P.altKey||P.metaKey,Q=P.key.length===1;J&&(P.key==="Tab"&&P.preventDefault(),!L&&Q&&z(P.key));const q=N.current;if(P.target!==q||!BF.includes(P.key))return;P.preventDefault();const te=_().filter(W=>!W.disabled).map(W=>W.ref.current);zN.includes(P.key)&&te.reverse(),cU(te)}),onBlur:Z(e.onBlur,P=>{P.currentTarget.contains(P.target)||(window.clearTimeout(R.current),E.current="")}),onPointerMove:Z(e.onPointerMove,Lc(P=>{const V=P.target,J=C.current!==P.clientX;if(P.currentTarget.contains(V)&&J){const L=P.clientX>C.current?"right":"left";O.current=L,C.current=P.clientX}}))})})})})})})});GN.displayName=nn;var eU="MenuGroup",ky=d.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx(se.div,{role:"group",...n,ref:t})});ky.displayName=eU;var tU="MenuLabel",YN=d.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx(se.div,{...n,ref:t})});YN.displayName=tU;var oh="MenuItem",vb="menu.itemSelect",df=d.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...s}=e,a=d.useRef(null),o=du(oh,e.__scopeMenu),l=Sy(oh,e.__scopeMenu),c=Se(t,a),u=d.useRef(!1),h=()=>{const f=a.current;if(!r&&f){const p=new CustomEvent(vb,{bubbles:!0,cancelable:!0});f.addEventListener(vb,m=>n==null?void 0:n(m),{once:!0}),Fv(f,p),p.defaultPrevented?u.current=!1:o.onClose()}};return i.jsx(QN,{...s,ref:c,disabled:r,onClick:Z(e.onClick,h),onPointerDown:f=>{var p;(p=e.onPointerDown)==null||p.call(e,f),u.current=!0},onPointerUp:Z(e.onPointerUp,f=>{var p;u.current||(p=f.currentTarget)==null||p.click()}),onKeyDown:Z(e.onKeyDown,f=>{const p=l.searchRef.current!=="";r||p&&f.key===" "||Tg.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});df.displayName=oh;var QN=d.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...a}=e,o=Sy(oh,r),l=WN(r),c=d.useRef(null),u=Se(t,c),[h,f]=d.useState(!1),[p,m]=d.useState("");return d.useEffect(()=>{const w=c.current;w&&m((w.textContent??"").trim())},[a.children]),i.jsx(Dc.ItemSlot,{scope:r,disabled:n,textValue:s??p,children:i.jsx(by,{asChild:!0,...l,focusable:!n,children:i.jsx(se.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...a,ref:u,onPointerMove:Z(e.onPointerMove,Lc(w=>{n?o.onItemLeave(w):(o.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Z(e.onPointerLeave,Lc(w=>o.onItemLeave(w))),onFocus:Z(e.onFocus,()=>f(!0)),onBlur:Z(e.onBlur,()=>f(!1))})})})}),rU="MenuCheckboxItem",JN=d.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...s}=e;return i.jsx(rk,{scope:e.__scopeMenu,checked:r,children:i.jsx(df,{role:"menuitemcheckbox","aria-checked":lh(r)?"mixed":r,...s,ref:t,"data-state":Ey(r),onSelect:Z(s.onSelect,()=>n==null?void 0:n(lh(r)?!0:!r),{checkForDefaultPrevented:!1})})})});JN.displayName=rU;var XN="MenuRadioGroup",[nU,sU]=Ea(XN,{value:void 0,onValueChange:()=>{}}),ZN=d.forwardRef((e,t)=>{const{value:r,onValueChange:n,...s}=e,a=gt(n);return i.jsx(nU,{scope:e.__scopeMenu,value:r,onValueChange:a,children:i.jsx(ky,{...s,ref:t})})});ZN.displayName=XN;var ek="MenuRadioItem",tk=d.forwardRef((e,t)=>{const{value:r,...n}=e,s=sU(ek,e.__scopeMenu),a=r===s.value;return i.jsx(rk,{scope:e.__scopeMenu,checked:a,children:i.jsx(df,{role:"menuitemradio","aria-checked":a,...n,ref:t,"data-state":Ey(a),onSelect:Z(n.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,r)},{checkForDefaultPrevented:!1})})})});tk.displayName=ek;var Cy="MenuItemIndicator",[rk,iU]=Ea(Cy,{checked:!1}),nk=d.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...s}=e,a=iU(Cy,r);return i.jsx(Dt,{present:n||lh(a.checked)||a.checked===!0,children:i.jsx(se.span,{...s,ref:t,"data-state":Ey(a.checked)})})});nk.displayName=Cy;var aU="MenuSeparator",sk=d.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx(se.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});sk.displayName=aU;var oU="MenuArrow",ik=d.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=uf(r);return i.jsx(ef,{...s,...n,ref:t})});ik.displayName=oU;var lU="MenuSub",[T9,ak]=Ea(lU),Wl="MenuSubTrigger",ok=d.forwardRef((e,t)=>{const r=Ta(Wl,e.__scopeMenu),n=du(Wl,e.__scopeMenu),s=ak(Wl,e.__scopeMenu),a=Sy(Wl,e.__scopeMenu),o=d.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:e.__scopeMenu},h=d.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return d.useEffect(()=>h,[h]),d.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),i.jsx(_y,{asChild:!0,...u,children:i.jsx(QN,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":uk(r.open),...e,ref:vs(t,s.onTriggerChange),onClick:f=>{var p;(p=e.onClick)==null||p.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Z(e.onPointerMove,Lc(f=>{a.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),h()},100))})),onPointerLeave:Z(e.onPointerLeave,Lc(f=>{var m,w;h();const p=(m=r.content)==null?void 0:m.getBoundingClientRect();if(p){const g=(w=r.content)==null?void 0:w.dataset.side,v=g==="right",y=v?-5:5,x=p[v?"left":"right"],b=p[v?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+y,y:f.clientY},{x,y:p.top},{x:b,y:p.top},{x:b,y:p.bottom},{x,y:p.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Z(e.onKeyDown,f=>{var m;const p=a.searchRef.current!=="";e.disabled||p&&f.key===" "||zF[n.dir].includes(f.key)&&(r.onOpenChange(!0),(m=r.content)==null||m.focus(),f.preventDefault())})})})});ok.displayName=Wl;var lk="MenuSubContent",ck=d.forwardRef((e,t)=>{const r=HN(nn,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,a=Ta(nn,e.__scopeMenu),o=du(nn,e.__scopeMenu),l=ak(lk,e.__scopeMenu),c=d.useRef(null),u=Se(t,c);return i.jsx(Dc.Provider,{scope:e.__scopeMenu,children:i.jsx(Dt,{present:n||a.open,children:i.jsx(Dc.Slot,{scope:e.__scopeMenu,children:i.jsx(Ny,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:Z(e.onFocusOutside,h=>{h.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Z(e.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:Z(e.onKeyDown,h=>{var m;const f=h.currentTarget.contains(h.target),p=qF[o.dir].includes(h.key);f&&p&&(a.onOpenChange(!1),(m=l.trigger)==null||m.focus(),h.preventDefault())})})})})})});ck.displayName=lk;function uk(e){return e?"open":"closed"}function lh(e){return e==="indeterminate"}function Ey(e){return lh(e)?"indeterminate":e?"checked":"unchecked"}function cU(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function uU(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function dU(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let o=uU(e,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function hU(e,t){const{x:r,y:n}=e;let s=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a],c=t[o],u=l.x,h=l.y,f=c.x,p=c.y;h>n!=p>n&&r<(f-u)*(n-h)/(p-h)+u&&(s=!s)}return s}function fU(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return hU(r,t)}function Lc(e){return t=>t.pointerType==="mouse"?e(t):void 0}var pU=VN,mU=_y,gU=KN,vU=GN,yU=ky,xU=YN,wU=df,bU=JN,_U=ZN,jU=tk,SU=nk,NU=sk,kU=ik,CU=ok,EU=ck,hf="DropdownMenu",[TU,P9]=Nt(hf,[qN]),vr=qN(),[PU,dk]=TU(hf),hk=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,c=vr(t),u=d.useRef(null),[h,f]=sr({prop:s,defaultProp:a??!1,onChange:o,caller:hf});return i.jsx(PU,{scope:t,triggerId:Mt(),triggerRef:u,contentId:Mt(),open:h,onOpenChange:f,onOpenToggle:d.useCallback(()=>f(p=>!p),[f]),modal:l,children:i.jsx(pU,{...c,open:h,onOpenChange:f,dir:n,modal:l,children:r})})};hk.displayName=hf;var fk="DropdownMenuTrigger",pk=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=e,a=dk(fk,r),o=vr(r);return i.jsx(mU,{asChild:!0,...o,children:i.jsx(se.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:vs(t,a.triggerRef),onPointerDown:Z(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:Z(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});pk.displayName=fk;var RU="DropdownMenuPortal",mk=e=>{const{__scopeDropdownMenu:t,...r}=e,n=vr(t);return i.jsx(gU,{...n,...r})};mk.displayName=RU;var gk="DropdownMenuContent",vk=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=dk(gk,r),a=vr(r),o=d.useRef(!1);return i.jsx(vU,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...n,ref:t,onCloseAutoFocus:Z(e.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Z(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;(!s.modal||h)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});vk.displayName=gk;var AU="DropdownMenuGroup",IU=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=vr(r);return i.jsx(yU,{...s,...n,ref:t})});IU.displayName=AU;var OU="DropdownMenuLabel",yk=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=vr(r);return i.jsx(xU,{...s,...n,ref:t})});yk.displayName=OU;var MU="DropdownMenuItem",xk=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=vr(r);return i.jsx(wU,{...s,...n,ref:t})});xk.displayName=MU;var DU="DropdownMenuCheckboxItem",wk=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=vr(r);return i.jsx(bU,{...s,...n,ref:t})});wk.displayName=DU;var LU="DropdownMenuRadioGroup",$U=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=vr(r);return i.jsx(_U,{...s,...n,ref:t})});$U.displayName=LU;var FU="DropdownMenuRadioItem",bk=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=vr(r);return i.jsx(jU,{...s,...n,ref:t})});bk.displayName=FU;var UU="DropdownMenuItemIndicator",_k=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=vr(r);return i.jsx(SU,{...s,...n,ref:t})});_k.displayName=UU;var BU="DropdownMenuSeparator",jk=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=vr(r);return i.jsx(NU,{...s,...n,ref:t})});jk.displayName=BU;var zU="DropdownMenuArrow",qU=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=vr(r);return i.jsx(kU,{...s,...n,ref:t})});qU.displayName=zU;var WU="DropdownMenuSubTrigger",Sk=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=vr(r);return i.jsx(CU,{...s,...n,ref:t})});Sk.displayName=WU;var VU="DropdownMenuSubContent",Nk=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=vr(r);return i.jsx(EU,{...s,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Nk.displayName=VU;var HU=hk,KU=pk,GU=mk,kk=vk,Ck=yk,Ek=xk,Tk=wk,Pk=bk,Rk=_k,Ak=jk,Ik=Sk,Ok=Nk;const YU=HU,QU=KU,JU=d.forwardRef(({className:e,inset:t,children:r,...n},s)=>i.jsxs(Ik,{ref:s,className:H("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...n,children:[r,i.jsx(Hh,{className:"ml-auto h-4 w-4"})]}));JU.displayName=Ik.displayName;const XU=d.forwardRef(({className:e,...t},r)=>i.jsx(Ok,{ref:r,className:H("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));XU.displayName=Ok.displayName;const Mk=d.forwardRef(({className:e,sideOffset:t=4,...r},n)=>i.jsx(GU,{children:i.jsx(kk,{ref:n,sideOffset:t,className:H("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Mk.displayName=kk.displayName;const $i=d.forwardRef(({className:e,inset:t,...r},n)=>i.jsx(Ek,{ref:n,className:H("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...r}));$i.displayName=Ek.displayName;const ZU=d.forwardRef(({className:e,children:t,checked:r,...n},s)=>i.jsxs(Tk,{ref:s,className:H("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:r,...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Rk,{children:i.jsx(rl,{className:"h-4 w-4"})})}),t]}));ZU.displayName=Tk.displayName;const eB=d.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(Pk,{ref:n,className:H("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Rk,{children:i.jsx(YI,{className:"h-2 w-2 fill-current"})})}),t]}));eB.displayName=Pk.displayName;const Dk=d.forwardRef(({className:e,inset:t,...r},n)=>i.jsx(Ck,{ref:n,className:H("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));Dk.displayName=Ck.displayName;const Sd=d.forwardRef(({className:e,...t},r)=>i.jsx(Ak,{ref:r,className:H("-mx-1 my-1 h-px bg-muted",e),...t}));Sd.displayName=Ak.displayName;var Lk={exports:{}},$k={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ho=d;function tB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rB=typeof Object.is=="function"?Object.is:tB,nB=Ho.useState,sB=Ho.useEffect,iB=Ho.useLayoutEffect,aB=Ho.useDebugValue;function oB(e,t){var r=t(),n=nB({inst:{value:r,getSnapshot:t}}),s=n[0].inst,a=n[1];return iB(function(){s.value=r,s.getSnapshot=t,Up(s)&&a({inst:s})},[e,r,t]),sB(function(){return Up(s)&&a({inst:s}),e(function(){Up(s)&&a({inst:s})})},[e]),aB(r),r}function Up(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!rB(e,r)}catch{return!0}}function lB(e,t){return t()}var cB=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?lB:oB;$k.useSyncExternalStore=Ho.useSyncExternalStore!==void 0?Ho.useSyncExternalStore:cB;Lk.exports=$k;var uB=Lk.exports;function dB(){return uB.useSyncExternalStore(hB,()=>!0,()=>!1)}function hB(){return()=>{}}var Ty="Avatar",[fB,R9]=Nt(Ty),[pB,Fk]=fB(Ty),Uk=d.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[s,a]=d.useState("idle");return i.jsx(pB,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:i.jsx(se.span,{...n,ref:t})})});Uk.displayName=Ty;var Bk="AvatarImage",zk=d.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...a}=e,o=Fk(Bk,r),l=mB(n,a),c=gt(u=>{s(u),o.onImageLoadingStatusChange(u)});return yt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(se.img,{...a,ref:t,src:n}):null});zk.displayName=Bk;var qk="AvatarFallback",Wk=d.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...s}=e,a=Fk(qk,r),[o,l]=d.useState(n===void 0);return d.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&a.imageLoadingStatus!=="loaded"?i.jsx(se.span,{...s,ref:t}):null});Wk.displayName=qk;function yb(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function mB(e,{referrerPolicy:t,crossOrigin:r}){const n=dB(),s=d.useRef(null),a=n?(s.current||(s.current=new window.Image),s.current):null,[o,l]=d.useState(()=>yb(a,e));return yt(()=>{l(yb(a,e))},[a,e]),yt(()=>{const c=f=>()=>{l(f)};if(!a)return;const u=c("loaded"),h=c("error");return a.addEventListener("load",u),a.addEventListener("error",h),t&&(a.referrerPolicy=t),typeof r=="string"&&(a.crossOrigin=r),()=>{a.removeEventListener("load",u),a.removeEventListener("error",h)}},[a,r,t]),o}var Vk=Uk,Hk=zk,Kk=Wk;const Kn=d.forwardRef(({className:e,...t},r)=>i.jsx(Vk,{ref:r,className:H("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Kn.displayName=Vk.displayName;const Gn=d.forwardRef(({className:e,...t},r)=>i.jsx(Hk,{ref:r,className:H("aspect-square h-full w-full",e),...t}));Gn.displayName=Hk.displayName;const Yn=d.forwardRef(({className:e,...t},r)=>i.jsx(Kk,{ref:r,className:H("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Yn.displayName=Kk.displayName;async function gB(){var s;const{data:e}=await U.auth.getSession(),t=(s=e.session)==null?void 0:s.access_token;if(!t)throw new Error("Not authenticated");const r=`${Ni.agenticBackendUrl.replace(/\/$/,"")}/api/credits`,n=await fetch(r,{headers:{Authorization:`Bearer ${t}`}});if(!n.ok)throw new Error("Unable to load credits");return n.json()}function vB(e){return De({queryKey:["ai-credits"],queryFn:gB,enabled:e&&!!Ni.agenticBackendUrl,staleTime:6e4,refetchInterval:6e4})}function yB({onOpenHelp:e}){var w;const{user:t,profile:r,signOut:n,isLoading:s}=Ne(),a=vB(!!t),[o,l]=d.useState("light");d.useEffect(()=>{const g=localStorage.getItem("blend-theme");l(g==="dark"||g==="light"?g:g==="dark-aqua"||g==="dark-orange"?"dark":"light")},[]);const c=g=>{const v=document.documentElement;v.classList.remove("dark","theme-orange"),g==="dark"&&v.classList.add("dark","theme-orange")},u=()=>{const g=o==="dark"?"light":"dark";l(g),c(g),localStorage.setItem("blend-theme",g)};if(s)return i.jsx("div",{className:"h-9 w-9 rounded-full bg-muted animate-pulse"});if(!t)return i.jsx(pe,{to:"/auth",children:i.jsxs(F,{variant:"outline",size:"sm",className:"gap-2",children:[i.jsx(Hm,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Sign In"})]})});const h=(r==null?void 0:r.display_name)||((w=t.email)==null?void 0:w.split("@")[0])||"User",f=h.slice(0,2).toUpperCase(),p=a.data,m=p!=null&&p.bypass?100:p?Math.min(100,Math.max(0,p.remaining/Math.max(1,p.limit)*100)):0;return i.jsxs(YU,{children:[i.jsx(QU,{asChild:!0,children:i.jsx(F,{variant:"ghost",className:"relative h-9 w-9 rounded-full",children:i.jsxs(Kn,{className:"h-9 w-9",children:[i.jsx(Gn,{src:(r==null?void 0:r.avatar_url)||void 0,alt:h}),i.jsx(Yn,{className:"bg-primary/10 text-primary",children:f})]})})}),i.jsxs(Mk,{className:"w-56",align:"end",forceMount:!0,children:[i.jsx(Dk,{className:"font-normal",children:i.jsxs("div",{className:"flex flex-col space-y-1",children:[i.jsx("p",{className:"text-sm font-medium leading-none",children:h}),i.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:t.email})]})}),i.jsx(Sd,{}),i.jsxs("div",{className:"px-3 py-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[i.jsx("span",{children:"AI credits"}),i.jsx("span",{children:p?p.bypass?"Unlimited":`${p.remaining}/${p.limit}`:""})]}),i.jsx("div",{className:"mt-2 h-2 w-full rounded-full bg-muted",children:i.jsx("div",{className:"h-2 rounded-full bg-primary transition-all",style:{width:`${m}%`}})}),i.jsx("p",{className:"mt-1 text-[10px] text-muted-foreground",children:a.isLoading?"Loading credits":a.isError?"Credits unavailable":"Resets daily"})]}),i.jsx(Sd,{}),i.jsx($i,{asChild:!0,children:i.jsxs(pe,{to:`/u/${t.id}`,className:"flex items-center cursor-pointer",children:[i.jsx(Hm,{className:"mr-2 h-4 w-4"}),"My Profile"]})}),i.jsx($i,{asChild:!0,children:i.jsxs(pe,{to:"/settings",className:"flex items-center cursor-pointer",children:[i.jsx(rS,{className:"mr-2 h-4 w-4"}),"Settings"]})}),i.jsxs($i,{className:"cursor-pointer",onClick:u,children:[o==="dark"?i.jsx(gO,{className:"mr-2 h-4 w-4"}):i.jsx(Z1,{className:"mr-2 h-4 w-4"}),"Toggle theme"]}),i.jsxs($i,{className:"cursor-pointer",onClick:()=>e==null?void 0:e(),children:[i.jsx(tu,{className:"mr-2 h-4 w-4"}),"Help"]}),i.jsx($i,{asChild:!0,children:i.jsxs("a",{href:"mailto:hi@vdsai.cloud",className:"flex items-center cursor-pointer",children:[i.jsx(sO,{className:"mr-2 h-4 w-4"}),"Support"]})}),i.jsx(Sd,{}),i.jsxs($i,{onClick:()=>n(),className:"text-destructive focus:text-destructive cursor-pointer",children:[i.jsx(aO,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})]})}var ff="Dialog",[Gk,Yk]=Nt(ff),[xB,Pn]=Gk(ff),Qk=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:o=!0}=e,l=d.useRef(null),c=d.useRef(null),[u,h]=sr({prop:n,defaultProp:s??!1,onChange:a,caller:ff});return i.jsx(xB,{scope:t,triggerRef:l,contentRef:c,contentId:Mt(),titleId:Mt(),descriptionId:Mt(),open:u,onOpenChange:h,onOpenToggle:d.useCallback(()=>h(f=>!f),[h]),modal:o,children:r})};Qk.displayName=ff;var Jk="DialogTrigger",Xk=d.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Pn(Jk,r),a=Se(t,s.triggerRef);return i.jsx(se.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Ay(s.open),...n,ref:a,onClick:Z(e.onClick,s.onOpenToggle)})});Xk.displayName=Jk;var Py="DialogPortal",[wB,Zk]=Gk(Py,{forceMount:void 0}),eC=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,a=Pn(Py,t);return i.jsx(wB,{scope:t,forceMount:r,children:d.Children.map(n,o=>i.jsx(Dt,{present:r||a.open,children:i.jsx(el,{asChild:!0,container:s,children:o})}))})};eC.displayName=Py;var ch="DialogOverlay",tC=d.forwardRef((e,t)=>{const r=Zk(ch,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,a=Pn(ch,e.__scopeDialog);return a.modal?i.jsx(Dt,{present:n||a.open,children:i.jsx(_B,{...s,ref:t})}):null});tC.displayName=ch;var bB=fi("DialogOverlay.RemoveScroll"),_B=d.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Pn(ch,r);return i.jsx(cu,{as:bB,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(se.div,{"data-state":Ay(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),pa="DialogContent",rC=d.forwardRef((e,t)=>{const r=Zk(pa,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,a=Pn(pa,e.__scopeDialog);return i.jsx(Dt,{present:n||a.open,children:a.modal?i.jsx(jB,{...s,ref:t}):i.jsx(SB,{...s,ref:t})})});rC.displayName=pa;var jB=d.forwardRef((e,t)=>{const r=Pn(pa,e.__scopeDialog),n=d.useRef(null),s=Se(t,r.contentRef,n);return d.useEffect(()=>{const a=n.current;if(a)return lf(a)},[]),i.jsx(nC,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Z(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Z(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:Z(e.onFocusOutside,a=>a.preventDefault())})}),SB=d.forwardRef((e,t)=>{const r=Pn(pa,e.__scopeDialog),n=d.useRef(!1),s=d.useRef(!1);return i.jsx(nC,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),nC=d.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=e,l=Pn(pa,r),c=d.useRef(null),u=Se(t,c);return of(),i.jsxs(i.Fragment,{children:[i.jsx(ou,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(ja,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Ay(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(kB,{titleId:l.titleId}),i.jsx(EB,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Ry="DialogTitle",sC=d.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Pn(Ry,r);return i.jsx(se.h2,{id:s.titleId,...n,ref:t})});sC.displayName=Ry;var iC="DialogDescription",aC=d.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Pn(iC,r);return i.jsx(se.p,{id:s.descriptionId,...n,ref:t})});aC.displayName=iC;var oC="DialogClose",lC=d.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Pn(oC,r);return i.jsx(se.button,{type:"button",...n,ref:t,onClick:Z(e.onClick,()=>s.onOpenChange(!1))})});lC.displayName=oC;function Ay(e){return e?"open":"closed"}var cC="DialogTitleWarning",[NB,uC]=WA(cC,{contentName:pa,titleName:Ry,docsSlug:"dialog"}),kB=({titleId:e})=>{const t=uC(cC),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},CB="DialogDescriptionWarning",EB=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${uC(CB).contentName}}.`;return d.useEffect(()=>{var a;const s=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},pf=Qk,Iy=Xk,mf=eC,hl=tC,fl=rC,hu=sC,fu=aC,gf=lC;const vf=pf,TB=Iy,PB=mf,dC=d.forwardRef(({className:e,...t},r)=>i.jsx(hl,{ref:r,className:H("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));dC.displayName=hl.displayName;const pu=d.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(PB,{children:[i.jsx(dC,{}),i.jsxs(fl,{ref:n,className:H("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,i.jsxs(gf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[i.jsx(rr,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));pu.displayName=fl.displayName;const yf=({className:e,...t})=>i.jsx("div",{className:H("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});yf.displayName="DialogHeader";const xf=d.forwardRef(({className:e,...t},r)=>i.jsx(hu,{ref:r,className:H("text-lg font-semibold leading-none tracking-tight",e),...t}));xf.displayName=hu.displayName;const hC=d.forwardRef(({className:e,...t},r)=>i.jsx(fu,{ref:r,className:H("text-sm text-muted-foreground",e),...t}));hC.displayName=fu.displayName;const Oe=d.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:H("rounded-lg border border-border/40 bg-background text-card-foreground shadow-none",e),...t}));Oe.displayName="Card";const RB=d.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:H("rounded-xl border border-border/50 bg-card/60 text-card-foreground shadow-soft backdrop-blur-glass transition-all duration-400 hover:shadow-soft-lg hover:bg-card/70",e),...t}));RB.displayName="GlassCard";const ur=d.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:H("flex flex-col space-y-1.5 p-6",e),...t}));ur.displayName="CardHeader";const dr=d.forwardRef(({className:e,...t},r)=>i.jsx("h3",{ref:r,className:H("text-2xl font-semibold leading-none tracking-tight",e),...t}));dr.displayName="CardTitle";const sc=d.forwardRef(({className:e,...t},r)=>i.jsx("p",{ref:r,className:H("text-sm text-muted-foreground",e),...t}));sc.displayName="CardDescription";const Be=d.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:H("p-6 pt-0",e),...t}));Be.displayName="CardContent";const fC=d.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:H("flex items-center p-6 pt-0",e),...t}));fC.displayName="CardFooter";const AB=tl("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Me({className:e,variant:t,...r}){return i.jsx("div",{className:H(AB({variant:t}),e),...r})}const IB=[{label:"Generate a Library",hint:"Describe what you need in a few words."},{label:"Build Your Blueprint",hint:"Pick items, add steps, and add context."},{label:"Review + Publish",hint:"Get an AI review, then share with the community."},{label:"Follow Tags",hint:"Shape your feed and discover similar routines."},{label:"Explore the Wall",hint:"Browse and save blueprints from others."}],OB=[{title:"Libraries",description:"Libraries are smart ingredient lists. Generate one, then use it to build a Blueprint.",icon:Br,bullets:["Generate from a short prompt","Customize categories and items","Reuse across blueprints"]},{title:"Blueprints",description:"Blueprints are step-by-step routines. Build, review, and publish when ready.",icon:ai,bullets:["Organize steps visually","Add context for each item","Publish or keep private"]},{title:"Tags",description:"Tags connect the community. Follow them to tailor what you see.",icon:nS,bullets:["Follow tags you like","See trends on the wall","Stay focused on your goals"]},{title:"Community",description:"Explore, like, and learn from other peoples blueprints.",icon:Yh,bullets:["Discover new routines","Save favorites","Share your own"]}];function MB({open:e,onOpenChange:t}){return i.jsx(vf,{open:e,onOpenChange:t,children:i.jsx(pu,{className:"max-w-5xl w-[95vw] max-h-[85vh] overflow-y-auto border border-border/60 bg-background/95 p-0",children:i.jsxs("div",{className:"relative w-full",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 via-background to-accent/10"}),i.jsxs("div",{className:"relative w-full",children:[i.jsxs("div",{className:"px-8 pt-8 pb-4 border-b border-border/60 bg-background/60 backdrop-blur sticky top-0 z-10",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-2xl bg-primary/15 text-primary flex items-center justify-center",children:i.jsx(ys,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-semibold",children:"Welcome to Blueprints"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"A friendly guide to the flow, concepts, and how to get started."})]})]}),i.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 text-xs",children:[i.jsx(Me,{variant:"secondary",children:"Libraries"}),i.jsx(Me,{variant:"secondary",children:"Blueprints"}),i.jsx(Me,{variant:"secondary",children:"Tags"}),i.jsx(Me,{variant:"secondary",children:"Community"})]})]}),i.jsx("div",{className:"px-8 py-6",children:i.jsxs("div",{className:"space-y-8",children:[i.jsx(Oe,{className:"border border-border/60 bg-background/80",children:i.jsxs(Be,{className:"p-6 space-y-2",children:[i.jsx("p",{className:"text-sm font-semibold",children:"Lets get oriented"}),i.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Heres the goal: take a simple idea, break it into parts, and turn it into a stepbystep routine you can actually follow. Libraries are your ingredients, Blueprints are your instructions, and the community is your feedback loop. As we go, youll refine your routine, learn from others, and end up with something you can reuse anytime."})]})}),i.jsx(Oe,{className:"border border-border/60 bg-background/70",children:i.jsxs(Be,{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-9 w-9 rounded-xl bg-primary/10 text-primary flex items-center justify-center",children:i.jsx(Br,{className:"h-4 w-4"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold",children:"The Flow"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"From idea  library  build  blueprint  community"})]})]}),i.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:IB.map(r=>i.jsxs("div",{className:"rounded-lg border border-border/60 bg-muted/30 p-3",children:[i.jsx("p",{className:"text-sm font-medium",children:r.label}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.hint})]},r.label))})]})}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:OB.map(r=>{const n=r.icon;return i.jsx(Oe,{className:"border border-border/60 bg-background/80",children:i.jsxs(Be,{className:"p-6 space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-9 w-9 rounded-xl bg-primary/10 text-primary flex items-center justify-center",children:i.jsx(n,{className:"h-4 w-4"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:r.title}),i.jsx("p",{className:"text-xs text-muted-foreground",children:r.description})]})]}),i.jsx("div",{className:"space-y-2",children:r.bullets.map(s=>i.jsxs("div",{className:"text-xs text-muted-foreground",children:[" ",s]},s))})]})},r.title)})}),i.jsx(Oe,{className:"border border-border/60 bg-background/80",children:i.jsxs(Be,{className:"p-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold",children:"Tip for firsttime users"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Start with Generate Library, then build a blueprint you can refine later."})]}),i.jsx(F,{variant:"outline",size:"sm",onClick:()=>t(!1),children:"Lets go"})]})})]})})]})]})})})}const ze=d.forwardRef(({className:e,type:t,...r},n)=>i.jsx("input",{type:t,className:H("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));ze.displayName="Input";const pC=4;function bt(e){return e.trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function Oy(e){const t=new Set,r=[];for(const n of e){const s=bt(n);!s||t.has(s)||(t.add(s),r.push(s))}return r.slice(0,pC)}const qr=[{slug:"general",name:"General Blueprints",description:"Fallback lane for public blueprints that are not mapped to a curated channel yet.",status:"active",tagSlug:"general",isJoinEnabled:!1,aliases:["other","misc","unlabeled"],icon:"globe",priority:999},{slug:"fitness-training",name:"Fitness Training",description:"Structured exercise plans for strength, cardio, and conditioning.",status:"active",tagSlug:"fitness-training",isJoinEnabled:!0,aliases:["strength-training","hypertrophy","bodybuilding","workout"],icon:"dumbbell",priority:10},{slug:"nutrition-meal-planning",name:"Nutrition and Meal Planning",description:"Practical meal systems for health and consistency.",status:"active",tagSlug:"nutrition-meal-planning",isJoinEnabled:!0,aliases:["nutrition","meal-prep","healthy-diet","protein","shake"],icon:"utensils",priority:20},{slug:"sleep-recovery",name:"Sleep and Recovery",description:"Protocols that improve sleep quality and recovery habits.",status:"active",tagSlug:"sleep-recovery",isJoinEnabled:!0,aliases:["sleep","circadian","recovery","evening-routine"],icon:"moon",priority:30},{slug:"mindfulness-mental-wellness",name:"Mindfulness and Mental Wellness",description:"Mental reset and stress management routines.",status:"active",tagSlug:"mindfulness-mental-wellness",isJoinEnabled:!0,aliases:["mindfulness","mental-wellness","stress-management","meditation"],icon:"brain",priority:40},{slug:"skincare-personal-care",name:"Skincare and Personal Care",description:"Repeatable self-care routines for skin and grooming.",status:"active",tagSlug:"skincare-personal-care",isJoinEnabled:!0,aliases:["skincare","hydration","grooming","self-care"],icon:"sparkles",priority:50},{slug:"cooking-home-kitchen",name:"Cooking and Home Kitchen",description:"Repeatable kitchen workflows and recipe systems.",status:"active",tagSlug:"cooking-home-kitchen",isJoinEnabled:!0,aliases:["cooking","recipe","kitchen","meal-assembly","pasta-dishes"],icon:"chef-hat",priority:60},{slug:"biohacking-supplements",name:"Biohacking and Supplements",description:"Habit-oriented protocols around supplements and optimization.",status:"active",tagSlug:"biohacking-supplements",isJoinEnabled:!0,aliases:["biohacking","nootropics","longevity","supplements"],icon:"flask-conical",priority:70},{slug:"productivity-systems",name:"Productivity Systems",description:"Planning and execution workflows for getting work done.",status:"active",tagSlug:"productivity-systems",isJoinEnabled:!0,aliases:["productivity","planning","routine","focus"],icon:"check-check",priority:80},{slug:"study-learning-systems",name:"Study and Learning Systems",description:"Methods for learning, revision, and retention.",status:"active",tagSlug:"study-learning-systems",isJoinEnabled:!0,aliases:["studying","note-taking","memory","spaced-repetition"],icon:"graduation-cap",priority:90},{slug:"writing-content-creation",name:"Writing and Content Creation",description:"Systems for drafting, publishing, and content cadence.",status:"active",tagSlug:"writing-content-creation",isJoinEnabled:!0,aliases:["writing","content-creation","publishing","copywriting"],icon:"pen-square",priority:100},{slug:"creator-growth-marketing",name:"Creator Growth and Marketing",description:"Audience growth and distribution playbooks.",status:"active",tagSlug:"creator-growth-marketing",isJoinEnabled:!0,aliases:["marketing","seo","audience-growth","social-media"],icon:"megaphone",priority:110},{slug:"business-ops-freelance",name:"Business Ops and Freelance",description:"Lightweight operating systems for solo operators.",status:"active",tagSlug:"business-ops-freelance",isJoinEnabled:!0,aliases:["freelance","consulting","operations","pricing"],icon:"briefcase-business",priority:120},{slug:"career-job-search",name:"Career and Job Search",description:"Structured workflows for finding and landing roles.",status:"active",tagSlug:"career-job-search",isJoinEnabled:!0,aliases:["job-search","resume","interview","networking"],icon:"search-check",priority:130},{slug:"personal-finance-budgeting",name:"Personal Finance and Budgeting",description:"Everyday money management routines and templates.",status:"active",tagSlug:"personal-finance-budgeting",isJoinEnabled:!0,aliases:["budgeting","savings","debt-payoff","personal-finance"],icon:"wallet",priority:140},{slug:"investing-basics",name:"Investing Basics",description:"Intro-level investing routines and frameworks.",status:"active",tagSlug:"investing-basics",isJoinEnabled:!0,aliases:["investing","index-funds","portfolio-basics"],icon:"line-chart",priority:150},{slug:"home-organization-cleaning",name:"Home Organization and Cleaning",description:"Systems for maintaining spaces with low friction.",status:"active",tagSlug:"home-organization-cleaning",isJoinEnabled:!0,aliases:["organization","declutter","home-maintenance","cleaning"],icon:"house",priority:160},{slug:"parenting-family-routines",name:"Parenting and Family Routines",description:"Family-oriented routines for daily coordination.",status:"active",tagSlug:"parenting-family-routines",isJoinEnabled:!0,aliases:["parenting","family-routine","kids-activities"],icon:"baby",priority:170},{slug:"travel-planning",name:"Travel Planning",description:"Repeatable travel prep and trip-execution workflows.",status:"active",tagSlug:"travel-planning",isJoinEnabled:!0,aliases:["travel","itinerary","packing","trip-prep"],icon:"plane",priority:180},{slug:"developer-workflows",name:"Developer Workflows",description:"Coding productivity and engineering workflow routines.",status:"active",tagSlug:"developer-workflows",isJoinEnabled:!0,aliases:["coding","developer-tools","git","testing"],icon:"code",priority:190},{slug:"ai-tools-automation",name:"AI Tools and Automation",description:"Practical usage patterns for AI tools and automations.",status:"active",tagSlug:"ai-tools-automation",isJoinEnabled:!0,aliases:["ai-tools","automation","llm","prompts"],icon:"bot",priority:200}];function My(e){return qr.find(t=>t.slug===e)||null}function Pa(){const{user:e}=Ne(),t=ir(),[r,n]=d.useState({}),[s,a]=d.useState({}),o=De({queryKey:["followed-tags",e==null?void 0:e.id],enabled:!!e,queryFn:async()=>{if(!e)return[];const{data:S,error:j}=await U.from("tag_follows").select("tag_id, tags(slug)").eq("user_id",e.id);if(j)throw j;return(S||[]).map(N=>({id:N.tag_id,slug:(N.tags||{}).slug||""})).filter(N=>N.slug)}}),l=o.data||[],c=d.useMemo(()=>new Set(qr.filter(S=>S.isJoinEnabled&&S.status==="active").map(S=>S.tagSlug)),[]),u=d.useMemo(()=>new Set(l.map(S=>S.id)),[l]),h=d.useMemo(()=>new Set(l.map(S=>S.slug)),[l]),f=$t({mutationFn:async S=>{if(!e)throw new Error("Must be logged in");const{error:j}=await U.from("tag_follows").insert({tag_id:S,user_id:e.id});if(j)throw j},onSuccess:()=>{t.invalidateQueries({queryKey:["followed-tags"]}),t.invalidateQueries({queryKey:["tags-directory"]})}}),p=$t({mutationFn:async S=>{if(!e)throw new Error("Must be logged in");const{error:j}=await U.from("tag_follows").delete().eq("tag_id",S).eq("user_id",e.id);if(j)throw j},onSuccess:()=>{t.invalidateQueries({queryKey:["followed-tags"]}),t.invalidateQueries({queryKey:["tags-directory"]})}}),m=async S=>{const j=bt(S.replace(/^#/,""));if(!j)return null;const{data:N,error:k}=await U.from("tags").select("id").eq("slug",j).maybeSingle();if(k)throw k;return(N==null?void 0:N.id)??null},w=async S=>S.id??(S.slug?await m(S.slug):null),g=S=>{const j=bt(S.replace(/^#/,""));return c.has(j)},v=async S=>{if(!e)throw new Error("Must be logged in");if(S.slug&&!g(S.slug))throw new Error("Only curated channels can be joined in MVP");const j=await w(S);if(!j)throw new Error("Tag not found");if(!(u.has(j)||r[j])){n(N=>({...N,[j]:"joining"})),a(N=>({...N,[j]:void 0}));try{await f.mutateAsync(j)}catch(N){throw a(k=>({...k,[j]:!0})),N}finally{n(N=>({...N,[j]:void 0}))}}},y=async S=>{if(!e)throw new Error("Must be logged in");if(S.slug&&!g(S.slug))throw new Error("Only curated channels can be followed in MVP");const j=await w(S);if(!j)throw new Error("Tag not found");if(!(!u.has(j)||r[j])){n(N=>({...N,[j]:"leaving"})),a(N=>({...N,[j]:void 0}));try{await p.mutateAsync(j)}catch(N){throw a(k=>({...k,[j]:!0})),N}finally{n(N=>({...N,[j]:void 0}))}}};return{followedTags:l,followedIds:u,followedSlugs:h,joinChannel:v,leaveChannel:y,toggleFollow:async S=>{if(!e)throw new Error("Must be logged in");if(S.slug&&!g(S.slug))throw new Error("Only curated channels can be joined in MVP");const j=await w(S);if(!j)throw new Error("Tag not found");u.has(j)?await y({id:j}):await v({id:j})},getFollowState:S=>{const j=S.id;return j?r[j]==="joining"?"joining":r[j]==="leaving"?"leaving":s[j]?"error":u.has(j)?"joined":"not_joined":"not_joined"},isCuratedFollowableTagSlug:g,removeNonCuratedFollows:async()=>{if(!e)return 0;const S=l.filter(N=>!g(N.slug)).map(N=>N.id);if(S.length===0)return 0;const{error:j}=await U.from("tag_follows").delete().eq("user_id",e.id).in("tag_id",S);if(j)throw j;return await t.invalidateQueries({queryKey:["followed-tags"]}),await t.invalidateQueries({queryKey:["tags-directory"]}),S.length},isLoading:o.isLoading,isUpdating:f.isPending||p.isPending,hasUser:!!e}}function mu(e){const t=Array.from(new Set(e.filter(Boolean)));return De({queryKey:["tags-by-slugs",t],enabled:t.length>0,queryFn:async()=>{const{data:r,error:n}=await U.from("tags").select("id, slug, follower_count, created_at").in("slug",t);if(n)throw n;return r||[]},staleTime:3e4})}function mC(){return De({queryKey:["tag-suggestions"],queryFn:async()=>{const{data:e,error:t}=await U.from("tags").select("slug").order("follower_count",{ascending:!1}).limit(200);if(t)throw t;return(e||[]).map(r=>r.slug)}})}const DB={baby:LI,bot:FI,brain:UI,"briefcase-business":BI,"check-check":WI,"chef-hat":VI,code:QI,dumbbell:Q1,"flask-conical":Vv,globe:ZI,"graduation-cap":eO,house:X1,"line-chart":qI,megaphone:lO,moon:Z1,"pen-square":mO,plane:uO,"search-check":pO,sparkles:Br,utensils:xO,wallet:wO};function $c(e){return DB[e]||Hv}function bs(e){const t=My(e);return!t||t.slug==="general"?!1:t.status==="active"&&t.isJoinEnabled}function gu(e){return bs(e)?My(e):null}function ma(e,t,r){const n=new URLSearchParams(r||void 0);n.set("channel",t);const s=n.toString();return s?`${e}?${s}`:e}function Ra(){return Array.from(new Set(qr.map(e=>e.tagSlug)))}function gC({open:e,onOpenChange:t,presetChannelSlug:r}){const n=Tr(),{toast:s}=St(),{user:a}=Ne(),{getFollowState:o}=Pa(),[l,c]=d.useState(""),[u,h]=d.useState(null),[f,p]=d.useState(!0),m=d.useMemo(()=>Ra(),[]),{data:w=[],isLoading:g}=mu(e?m:[]),v=d.useMemo(()=>{const j=new Map;return w.forEach(N=>j.set(N.slug,N.id)),j},[w]),y=d.useMemo(()=>{const j=l.trim().toLowerCase();return qr.filter(N=>bs(N.slug)).filter(N=>j?N.slug.toLowerCase().includes(j)||N.name.toLowerCase().includes(j)||N.description.toLowerCase().includes(j):!0).sort((N,k)=>N.priority-k.priority)},[l]);d.useEffect(()=>{if(e){if(c(""),r&&bs(r)){h(r),p(!1);return}h(null),p(!0)}},[e,r]);async function x(j,N){if(!a){s({title:"Sign in required",description:"Please sign in to post a blueprint.",variant:"destructive"}),t(!1),n("/auth");return}const k=v.get(N)||null;if(!k){s({title:"Channel not ready",description:"Channel activation pending. Please try another channel.",variant:"destructive"});return}const R=o({id:k});R==="joining"||R==="leaving"||(h(j),p(!1))}function b(j){if(!u)return;const N={intent:"post"},k=ma(j==="library"?"/inventory":"/youtube",u,N);t(!1),n(k)}const _="Create blueprint",S=u?`Posting to b/${u}`:"Pick a curated channel, then choose a source. You will be asked to join when you publish.";return i.jsx(vf,{open:e,onOpenChange:t,children:i.jsxs(pu,{className:"max-w-xl",children:[i.jsxs(yf,{children:[i.jsx(xf,{children:_}),i.jsx(hC,{children:S})]}),i.jsxs("div",{className:"space-y-3",children:[u&&!f?i.jsxs("div",{className:"border border-border/40 px-3 py-2 flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"text-sm font-semibold truncate",children:["Posting to b/",u]}),i.jsx(F,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>p(!0),children:"Change"})]}):null,(!u||f)&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Na,{className:"h-4 w-4 text-muted-foreground"}),i.jsx(ze,{value:l,onChange:j=>c(j.target.value),placeholder:"Search channels..."})]}),i.jsx("div",{className:"max-h-[44vh] overflow-auto rounded-md border border-border/50",children:y.length===0?i.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"No channels match your search."}):i.jsx("div",{className:"divide-y divide-border/40",children:y.map(j=>{const N=$c(j.icon),k=v.get(j.tagSlug)||null,R=k?o({id:k}):"not_joined",E=R==="joining"||R==="leaving",$=g||!k;return i.jsx("button",{type:"button",className:"w-full text-left p-3 hover:bg-muted/20 transition-colors disabled:opacity-60 disabled:hover:bg-transparent",disabled:$,onClick:()=>x(j.slug,j.tagSlug),children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[i.jsx("div",{className:"h-9 w-9 rounded-md bg-primary/10 text-primary flex items-center justify-center shrink-0 mt-0.5",children:i.jsx(N,{className:"h-4 w-4"})}),i.jsxs("div",{className:"min-w-0 space-y-0.5",children:[i.jsx("div",{className:"text-sm font-semibold",children:j.name}),i.jsx("div",{className:"text-xs text-muted-foreground line-clamp-2",children:j.description}),!k&&!g&&i.jsx("div",{className:"text-[11px] text-muted-foreground",children:"Channel activation pending"})]})]}),i.jsxs("div",{className:"shrink-0 flex items-center gap-2",children:[E&&i.jsx(rn,{className:"h-4 w-4 animate-spin text-muted-foreground"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:"Select"})]})]})},j.slug)})})})]}),i.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[i.jsxs(Oe,{className:"p-4 flex flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ai,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("div",{className:"text-sm font-semibold",children:"Library"})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Build from scratch or use a library."}),i.jsx(F,{onClick:()=>b("library"),className:"mt-2",disabled:!u,children:"Continue"})]}),i.jsxs(Oe,{className:"p-4 flex flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(_O,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("div",{className:"text-sm font-semibold",children:"YouTube"})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Generate a blueprint from a YouTube video."}),i.jsx(F,{onClick:()=>b("youtube"),className:"mt-2",disabled:!u,children:"Continue"})]})]}),i.jsx("div",{className:"flex items-center justify-end",children:i.jsxs(F,{variant:"outline",onClick:()=>{t(!1)},className:"gap-2",children:[i.jsx(Sa,{className:"h-4 w-4"}),"Close"]})})]})]})})}function vt({actions:e,showFloatingNav:t=!0}){const{user:r}=Ne(),n=Er(),s=Tr(),[a,o]=d.useState(!1),[l,c]=d.useState(!1),[u,h]=d.useState(!1),f=d.useMemo(()=>new URLSearchParams(n.search).get("create"),[n.search]);d.useEffect(()=>{r&&f==="1"&&c(!0)},[f,r]);const p=g=>{if(c(g),!g&&f==="1"){const v=new URLSearchParams(n.search);v.delete("create");const y=v.toString();s({pathname:n.pathname,search:y?`?${y}`:""},{replace:!0})}},m=r?"all":"public",w=n.pathname.startsWith("/auth");return d.useEffect(()=>{if(!t)return;let g=window.scrollY,v=!1;const y=()=>{const x=window.scrollY;v||(v=!0,window.requestAnimationFrame(()=>{const b=x-g,_=x>48&&b>6,S=b<-6||x<32;_?h(!0):S&&h(!1),g=x,v=!1}))};return window.addEventListener("scroll",y,{passive:!0}),()=>window.removeEventListener("scroll",y)},[t]),i.jsxs(i.Fragment,{children:[i.jsx("header",{className:"sticky top-0 z-50 border-b border-border/40 bg-background",children:i.jsxs("div",{className:"w-full px-3 sm:px-4 py-3 grid grid-cols-[auto,1fr,auto] items-center gap-3",children:[i.jsx("div",{className:"flex items-center gap-3 min-w-0",children:i.jsxs(pe,{to:"/",className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-primary to-primary/60 flex items-center justify-center glow-primary",children:i.jsx(Wv,{className:"h-4 w-4 text-primary-foreground"})}),i.jsx("span",{className:"text-lg font-semibold tracking-tight",children:"Blueprints"})]})}),i.jsx("div",{className:"hidden sm:flex justify-center min-w-0",children:i.jsx(ab,{variant:"header",mode:m})}),i.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e,r&&!w&&i.jsxs(F,{type:"button",variant:"outline",size:"sm",className:"gap-2 shrink-0 h-8 px-2 text-xs",onClick:()=>c(!0),"aria-label":"Create",children:[i.jsx(Sa,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden lg:inline",children:"Create"})]}),i.jsx(yB,{onOpenHelp:()=>o(!0)})]})]})}),t&&i.jsx("div",{className:"sm:hidden",children:i.jsx(ab,{variant:"floating",mode:m,className:u?"translate-y-24 opacity-0 pointer-events-none":"translate-y-0 opacity-100"})}),i.jsx(MB,{open:a,onOpenChange:o}),i.jsx(gC,{open:l,onOpenChange:p,presetChannelSlug:null})]})}const xb="hi@vdsai.cloud";function Kr(){return i.jsxs("footer",{className:"pt-8 border-t border-border/40 text-center space-y-4",children:[i.jsxs("nav",{className:"flex flex-wrap items-center justify-center gap-4 text-sm text-muted-foreground",children:[i.jsx(pe,{to:"/about",className:"hover:text-foreground transition-colors",children:"About"}),i.jsx("span",{className:"text-border",children:""}),i.jsx("a",{href:`mailto:${xb}`,className:"hover:text-foreground transition-colors",children:"Support"}),i.jsx("span",{className:"text-border",children:""}),i.jsx("a",{href:`mailto:${xb}`,className:"hover:text-foreground transition-colors",children:"Report issue"})]}),i.jsx("p",{className:"text-xs text-muted-foreground/70",children:"Built with curiosity. Share what works."})]})}function LB(){return De({queryKey:["community-stats"],queryFn:async()=>{const[e,t,r]=await Promise.all([U.from("blueprints").select("id",{count:"exact",head:!0}).eq("is_public",!0),U.from("inventories").select("id",{count:"exact",head:!0}).eq("is_public",!0),U.from("tags").select("id",{count:"exact",head:!0})]);return{totalBlueprints:e.count??0,totalInventories:t.count??0,activeTags:r.count??0}},staleTime:6e4})}function $B(e=4){return De({queryKey:["top-blueprints",e],queryFn:async()=>{const{data:t,error:r}=await U.from("blueprints").select("id, title, likes_count, created_at, creator_user_id").eq("is_public",!0).order("likes_count",{ascending:!1}).limit(e);if(r)throw r;if(!t||t.length===0)return[];const n=[...new Set(t.map(p=>p.creator_user_id))],{data:s}=await U.from("profiles").select("user_id, display_name").in("user_id",n),a=new Map((s||[]).map(p=>[p.user_id,p])),o=t.map(p=>p.id),{data:l}=await U.from("blueprint_tags").select("blueprint_id, tag_id").in("blueprint_id",o),c=[...new Set((l||[]).map(p=>p.tag_id))],{data:u}=c.length>0?await U.from("tags").select("id, slug").in("id",c):{data:[]},h=new Map((u||[]).map(p=>[p.id,p.slug])),f=new Map;return(l||[]).forEach(p=>{const m=f.get(p.blueprint_id)||[],w=h.get(p.tag_id);w&&m.push(w),f.set(p.blueprint_id,m)}),t.map(p=>({id:p.id,title:p.title,likes_count:p.likes_count,created_at:p.created_at,creator_profile:a.get(p.creator_user_id)||null,tags:(f.get(p.id)||[]).map(m=>({slug:m}))}))},staleTime:6e4})}function FB(e=8){return De({queryKey:["featured-tags",e],queryFn:async()=>{const{data:t,error:r}=await U.from("tags").select("id, slug, follower_count").order("follower_count",{ascending:!1}).limit(e);if(r)throw r;return t||[]},staleTime:6e4})}function UB(){const{data:e,isLoading:t}=LB(),r=[{label:"Blueprints",value:(e==null?void 0:e.totalBlueprints)??0,icon:J1},{label:"Libraries",value:(e==null?void 0:e.totalInventories)??0,icon:ai},{label:"Topics",value:(e==null?void 0:e.activeTags)??0,icon:Hv}];return i.jsx("div",{className:"flex flex-wrap items-center justify-center gap-6 sm:gap-10 py-5 px-3 border border-border/40",children:r.map(n=>i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[i.jsx(n.icon,{className:"h-4 w-4"}),i.jsx("span",{className:"font-mono text-lg tabular-nums text-foreground",children:t?"":n.value}),i.jsx("span",{className:"text-sm",children:n.label})]},n.label))})}function He(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function gi(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const vC=6048e5,BB=864e5,wb=6e4,bb=525600,ho=43200,uh=1440;let zB={};function pl(){return zB}function Fc(e,t){var l,c,u,h;const r=pl(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((h=(u=r.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,s=He(e),a=s.getDay(),o=(a<n?7:0)+a-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function dh(e){return Fc(e,{weekStartsOn:1})}function yC(e){const t=He(e),r=t.getFullYear(),n=gi(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=dh(n),a=gi(e,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=dh(a);return t.getTime()>=s.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function _b(e){const t=He(e);return t.setHours(0,0,0,0),t}function Ko(e){const t=He(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function qB(e,t){const r=_b(e),n=_b(t),s=+r-Ko(r),a=+n-Ko(n);return Math.round((s-a)/BB)}function WB(e){const t=yC(e),r=gi(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),dh(r)}function ic(e,t){const r=He(e),n=He(t),s=r.getTime()-n.getTime();return s<0?-1:s>0?1:s}function xC(e){return gi(e,Date.now())}function VB(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function HB(e){if(!VB(e)&&typeof e!="number")return!1;const t=He(e);return!isNaN(Number(t))}function KB(e,t){const r=He(e),n=He(t),s=r.getFullYear()-n.getFullYear(),a=r.getMonth()-n.getMonth();return s*12+a}function wC(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function GB(e,t){return+He(e)-+He(t)}function YB(e){const t=He(e);return t.setHours(23,59,59,999),t}function QB(e){const t=He(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function JB(e){const t=He(e);return+YB(t)==+QB(t)}function XB(e,t){const r=He(e),n=He(t),s=ic(r,n),a=Math.abs(KB(r,n));let o;if(a<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*a);let l=ic(r,n)===-s;JB(He(e))&&a===1&&ic(e,n)===1&&(l=!1),o=s*(a-Number(l))}return o===0?0:o}function ZB(e,t,r){const n=GB(e,t)/1e3;return wC(r==null?void 0:r.roundingMethod)(n)}function e6(e){const t=He(e),r=gi(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const t6={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},r6=(e,t,r)=>{let n;const s=t6[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Bp(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const n6={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},s6={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},i6={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},a6={date:Bp({formats:n6,defaultWidth:"full"}),time:Bp({formats:s6,defaultWidth:"full"}),dateTime:Bp({formats:i6,defaultWidth:"full"})},o6={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},l6=(e,t,r,n)=>o6[e];function Al(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return s[a]}}const c6={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},u6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},d6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},h6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},f6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},p6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},m6=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},g6={ordinalNumber:m6,era:Al({values:c6,defaultWidth:"wide"}),quarter:Al({values:u6,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Al({values:d6,defaultWidth:"wide"}),day:Al({values:h6,defaultWidth:"wide"}),dayPeriod:Al({values:f6,defaultWidth:"wide",formattingValues:p6,defaultFormattingWidth:"wide"})};function Il(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const o=a[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?y6(l,f=>f.test(o)):v6(l,f=>f.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const h=t.slice(o.length);return{value:u,rest:h}}}function v6(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function y6(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function x6(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const w6=/^(\d+)(th|st|nd|rd)?/i,b6=/\d+/i,_6={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},j6={any:[/^b/i,/^(a|c)/i]},S6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},N6={any:[/1/i,/2/i,/3/i,/4/i]},k6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},C6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},E6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},T6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},P6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},R6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},A6={ordinalNumber:x6({matchPattern:w6,parsePattern:b6,valueCallback:e=>parseInt(e,10)}),era:Il({matchPatterns:_6,defaultMatchWidth:"wide",parsePatterns:j6,defaultParseWidth:"any"}),quarter:Il({matchPatterns:S6,defaultMatchWidth:"wide",parsePatterns:N6,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Il({matchPatterns:k6,defaultMatchWidth:"wide",parsePatterns:C6,defaultParseWidth:"any"}),day:Il({matchPatterns:E6,defaultMatchWidth:"wide",parsePatterns:T6,defaultParseWidth:"any"}),dayPeriod:Il({matchPatterns:P6,defaultMatchWidth:"any",parsePatterns:R6,defaultParseWidth:"any"})},Dy={code:"en-US",formatDistance:r6,formatLong:a6,formatRelative:l6,localize:g6,match:A6,options:{weekStartsOn:0,firstWeekContainsDate:1}};function I6(e){const t=He(e);return qB(t,e6(t))+1}function O6(e){const t=He(e),r=+dh(t)-+WB(t);return Math.round(r/vC)+1}function bC(e,t){var h,f,p,m;const r=He(e),n=r.getFullYear(),s=pl(),a=(t==null?void 0:t.firstWeekContainsDate)??((f=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(p=s.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,o=gi(e,0);o.setFullYear(n+1,0,a),o.setHours(0,0,0,0);const l=Fc(o,t),c=gi(e,0);c.setFullYear(n,0,a),c.setHours(0,0,0,0);const u=Fc(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function M6(e,t){var l,c,u,h;const r=pl(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((h=(u=r.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,s=bC(e,t),a=gi(e,0);return a.setFullYear(s,0,n),a.setHours(0,0,0,0),Fc(a,t)}function D6(e,t){const r=He(e),n=+Fc(r,t)-+M6(r,t);return Math.round(n/vC)+1}function Ye(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Ps={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Ye(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Ye(r+1,2)},d(e,t){return Ye(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Ye(e.getHours()%12||12,t.length)},H(e,t){return Ye(e.getHours(),t.length)},m(e,t){return Ye(e.getMinutes(),t.length)},s(e,t){return Ye(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return Ye(s,t.length)}},Wa={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},jb={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return Ps.y(e,t)},Y:function(e,t,r,n){const s=bC(e,n),a=s>0?s:1-s;if(t==="YY"){const o=a%100;return Ye(o,2)}return t==="Yo"?r.ordinalNumber(a,{unit:"year"}):Ye(a,t.length)},R:function(e,t){const r=yC(e);return Ye(r,t.length)},u:function(e,t){const r=e.getFullYear();return Ye(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Ye(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Ye(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Ps.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Ye(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=D6(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):Ye(s,t.length)},I:function(e,t,r){const n=O6(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Ye(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Ps.d(e,t)},D:function(e,t,r){const n=I6(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Ye(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Ye(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Ye(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return Ye(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=Wa.noon:n===0?s=Wa.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=Wa.evening:n>=12?s=Wa.afternoon:n>=4?s=Wa.morning:s=Wa.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Ps.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Ps.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Ye(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Ye(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ps.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Ps.s(e,t)},S:function(e,t){return Ps.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Nb(n);case"XXXX":case"XX":return Fi(n);case"XXXXX":case"XXX":default:return Fi(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return Nb(n);case"xxxx":case"xx":return Fi(n);case"xxxxx":case"xxx":default:return Fi(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Sb(n,":");case"OOOO":default:return"GMT"+Fi(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Sb(n,":");case"zzzz":default:return"GMT"+Fi(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return Ye(n,t.length)},T:function(e,t,r){const n=e.getTime();return Ye(n,t.length)}};function Sb(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),a=n%60;return a===0?r+String(s):r+String(s)+t+Ye(a,2)}function Nb(e,t){return e%60===0?(e>0?"-":"+")+Ye(Math.abs(e)/60,2):Fi(e,t)}function Fi(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Ye(Math.trunc(n/60),2),a=Ye(n%60,2);return r+s+t+a}const kb=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},_C=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},L6=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return kb(e,t);let a;switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",kb(n,t)).replace("{{time}}",_C(s,t))},$6={p:_C,P:L6},F6=/^D+$/,U6=/^Y+$/,B6=["D","DD","YY","YYYY"];function z6(e){return F6.test(e)}function q6(e){return U6.test(e)}function W6(e,t,r){const n=V6(e,t,r);if(console.warn(n),B6.includes(e))throw new RangeError(n)}function V6(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const H6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,K6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,G6=/^'([^]*?)'?$/,Y6=/''/g,Q6=/[a-zA-Z]/;function J6(e,t,r){var h,f,p,m;const n=pl(),s=n.locale??Dy,a=n.firstWeekContainsDate??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,o=n.weekStartsOn??((m=(p=n.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??0,l=He(e);if(!HB(l))throw new RangeError("Invalid time value");let c=t.match(K6).map(w=>{const g=w[0];if(g==="p"||g==="P"){const v=$6[g];return v(w,s.formatLong)}return w}).join("").match(H6).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const g=w[0];if(g==="'")return{isToken:!1,value:X6(w)};if(jb[g])return{isToken:!0,value:w};if(g.match(Q6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:w}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return c.map(w=>{if(!w.isToken)return w.value;const g=w.value;(q6(g)||z6(g))&&W6(g,t,String(e));const v=jb[g[0]];return v(l,g,s.localize,u)}).join("")}function X6(e){const t=e.match(G6);return t?t[1].replace(Y6,"'"):e}function Z6(e,t,r){const n=pl(),s=(r==null?void 0:r.locale)??n.locale??Dy,a=2520,o=ic(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,u;o>0?(c=He(t),u=He(e)):(c=He(e),u=He(t));const h=ZB(u,c),f=(Ko(u)-Ko(c))/1e3,p=Math.round((h-f)/60);let m;if(p<2)return r!=null&&r.includeSeconds?h<5?s.formatDistance("lessThanXSeconds",5,l):h<10?s.formatDistance("lessThanXSeconds",10,l):h<20?s.formatDistance("lessThanXSeconds",20,l):h<40?s.formatDistance("halfAMinute",0,l):h<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):p===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",p,l);if(p<45)return s.formatDistance("xMinutes",p,l);if(p<90)return s.formatDistance("aboutXHours",1,l);if(p<uh){const w=Math.round(p/60);return s.formatDistance("aboutXHours",w,l)}else{if(p<a)return s.formatDistance("xDays",1,l);if(p<ho){const w=Math.round(p/uh);return s.formatDistance("xDays",w,l)}else if(p<ho*2)return m=Math.round(p/ho),s.formatDistance("aboutXMonths",m,l)}if(m=XB(u,c),m<12){const w=Math.round(p/ho);return s.formatDistance("xMonths",w,l)}else{const w=m%12,g=Math.trunc(m/12);return w<3?s.formatDistance("aboutXYears",g,l):w<9?s.formatDistance("overXYears",g,l):s.formatDistance("almostXYears",g+1,l)}}function e8(e,t,r){const n=pl(),s=(r==null?void 0:r.locale)??n.locale??Dy,a=ic(e,t);if(isNaN(a))throw new RangeError("Invalid time value");const o=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:a});let l,c;a>0?(l=He(t),c=He(e)):(l=He(e),c=He(t));const u=wC((r==null?void 0:r.roundingMethod)??"round"),h=c.getTime()-l.getTime(),f=h/wb,p=Ko(c)-Ko(l),m=(h-p)/wb,w=r==null?void 0:r.unit;let g;if(w?g=w:f<1?g="second":f<60?g="minute":f<uh?g="hour":m<ho?g="day":m<bb?g="month":g="year",g==="second"){const v=u(h/1e3);return s.formatDistance("xSeconds",v,o)}else if(g==="minute"){const v=u(f);return s.formatDistance("xMinutes",v,o)}else if(g==="hour"){const v=u(f/60);return s.formatDistance("xHours",v,o)}else if(g==="day"){const v=u(m/uh);return s.formatDistance("xDays",v,o)}else if(g==="month"){const v=u(m/ho);return v===12&&w!=="month"?s.formatDistance("xYears",1,o):s.formatDistance("xMonths",v,o)}else{const v=u(m/bb);return s.formatDistance("xYears",v,o)}}function Go(e,t){return Z6(e,xC(e),t)}function t8(e,t){return e8(e,xC(e),t)}function r8(){const{data:e,isLoading:t}=$B(4);return t?i.jsxs("section",{className:"space-y-4",children:[i.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Top Blueprints"}),i.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from({length:4}).map((r,n)=>i.jsx("div",{className:"animate-pulse border border-border/40 h-28"},n))})]}):!e||e.length===0?null:i.jsxs("section",{className:"space-y-4",children:[i.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Top Blueprints"}),i.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:e.map(r=>{var n;return i.jsx(pe,{to:`/blueprint/${r.id}`,children:i.jsxs("div",{className:"group h-full border border-border/40 px-3 py-3 hover:bg-muted/20 transition-colors cursor-pointer space-y-2",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("h3",{className:"font-medium leading-tight line-clamp-2 group-hover:text-primary transition-colors",children:r.title}),i.jsxs("div",{className:"flex items-center gap-1 shrink-0 text-muted-foreground text-sm",children:[i.jsx(Kt,{className:"h-3.5 w-3.5"}),i.jsx("span",{className:"tabular-nums",children:r.likes_count})]})]}),i.jsx("div",{className:"flex flex-wrap gap-1.5",children:r.tags.slice(0,3).map(s=>i.jsxs(Me,{variant:"secondary",className:"text-xs",children:["#",s.slug]},s.slug))}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["by ",((n=r.creator_profile)==null?void 0:n.display_name)||"Anonymous"," "," ",Go(new Date(r.created_at),{addSuffix:!0})]})]})},r.id)})})]})}function n8(){const{data:e,isLoading:t}=FB(8);return t?i.jsxs("section",{className:"space-y-4",children:[i.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Trending Topics"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:6}).map((r,n)=>i.jsx("div",{className:"h-8 w-20 rounded-full bg-muted animate-pulse"},n))})]}):!e||e.length===0?null:i.jsxs("section",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Trending Topics"}),i.jsx(pe,{to:"/explore",className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:"View all "})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:e.map(r=>i.jsx(pe,{to:`/explore?q=${r.slug}`,children:i.jsxs(Me,{variant:"outline",className:"gap-1.5 px-3 py-1.5 text-sm hover:bg-accent hover:text-accent-foreground transition-colors cursor-pointer",children:[i.jsx(Hv,{className:"h-3 w-3"}),r.slug,r.follower_count>0&&i.jsxs("span",{className:"flex items-center gap-0.5 text-muted-foreground ml-1",children:[i.jsx(Yh,{className:"h-3 w-3"}),i.jsx("span",{className:"text-xs tabular-nums",children:r.follower_count})]})]})},r.id))})]})}const s8=[{icon:Vm,title:"Pick a Library",description:"Collections of ingredients for any topicsupplements, recipes, routines. Pick one to start building.",color:"bg-primary/10 text-primary"},{icon:Br,title:"Build & Review",description:"Tap items you use, hit Review, and get instant AI feedback on your setup.",color:"bg-accent/15 text-accent-foreground"},{icon:Yh,title:"Publish",description:"When you're happy with your blueprint, publish it so others can learn from it.",color:"bg-secondary/15 text-secondary-foreground"}];function i8(){return i.jsxs("section",{className:"space-y-4",children:[i.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"How It Works"}),i.jsx("div",{className:"grid gap-4 sm:grid-cols-3",children:s8.map((e,t)=>i.jsx("div",{className:"border border-border/40 px-3 py-4 animate-fade-in",style:{animationDelay:`${t*.1}s`},children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`h-10 w-10 rounded-lg flex items-center justify-center ${e.color}`,children:i.jsx(e.icon,{className:"h-5 w-5"})}),i.jsxs("span",{className:"text-xs font-bold text-muted-foreground/60 uppercase tracking-widest",children:["Step ",t+1]})]}),i.jsx("h3",{className:"font-semibold",children:e.title}),i.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:e.description})]})},e.title))})]})}function je({className:e,...t}){return i.jsx("div",{className:H("animate-pulse rounded-md bg-muted",e),...t})}var wf="Tabs",[a8,A9]=Nt(wf,[dl]),jC=dl(),[o8,Ly]=a8(wf),SC=d.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,h=Ca(l),[f,p]=sr({prop:n,onChange:s,defaultProp:a??"",caller:wf});return i.jsx(o8,{scope:r,baseId:Mt(),value:f,onValueChange:p,orientation:o,dir:h,activationMode:c,children:i.jsx(se.div,{dir:h,"data-orientation":o,...u,ref:t})})});SC.displayName=wf;var NC="TabsList",kC=d.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,a=Ly(NC,r),o=jC(r);return i.jsx(wy,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:n,children:i.jsx(se.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:t})})});kC.displayName=NC;var CC="TabsTrigger",EC=d.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...a}=e,o=Ly(CC,r),l=jC(r),c=RC(o.baseId,n),u=AC(o.baseId,n),h=n===o.value;return i.jsx(by,{asChild:!0,...l,focusable:!s,active:h,children:i.jsx(se.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:t,onMouseDown:Z(e.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:Z(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:Z(e.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(n)})})})});EC.displayName=CC;var TC="TabsContent",PC=d.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:a,...o}=e,l=Ly(TC,r),c=RC(l.baseId,n),u=AC(l.baseId,n),h=n===l.value,f=d.useRef(h);return d.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),i.jsx(Dt,{present:s||h,children:({present:p})=>i.jsx(se.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:p&&a})})});PC.displayName=TC;function RC(e,t){return`${e}-trigger-${t}`}function AC(e,t){return`${e}-content-${t}`}var l8=SC,IC=kC,OC=EC,MC=PC;const Aa=l8,ki=d.forwardRef(({className:e,...t},r)=>i.jsx(IC,{ref:r,className:H("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));ki.displayName=IC.displayName;const Sr=d.forwardRef(({className:e,...t},r)=>i.jsx(OC,{ref:r,className:H("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));Sr.displayName=OC.displayName;const en=d.forwardRef(({className:e,...t},r)=>i.jsx(MC,{ref:r,className:H("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));en.displayName=MC.displayName;var c8="Label",DC=d.forwardRef((e,t)=>i.jsx(se.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));DC.displayName=c8;var LC=DC;const u8=tl("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Pe=d.forwardRef(({className:e,...t},r)=>i.jsx(LC,{ref:r,className:H(u8(),e),...t}));Pe.displayName=LC.displayName;function Pg(e,[t,r]){return Math.min(r,Math.max(t,e))}function $y(e){const t=d.useRef({value:e,previous:e});return d.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var d8=[" ","Enter","ArrowUp","ArrowDown"],h8=[" ","Enter"],ga="Select",[bf,_f,f8]=Zc(ga),[ml,I9]=Nt(ga,[f8,ji]),jf=ji(),[p8,Ci]=ml(ga),[m8,g8]=ml(ga),$C=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:p,required:m,form:w}=e,g=jf(t),[v,y]=d.useState(null),[x,b]=d.useState(null),[_,S]=d.useState(!1),j=Ca(u),[N,k]=sr({prop:n,defaultProp:s??!1,onChange:a,caller:ga}),[R,E]=sr({prop:o,defaultProp:l,onChange:c,caller:ga}),$=d.useRef(null),M=v?w||!!v.closest("form"):!0,[O,C]=d.useState(new Set),D=Array.from(O).map(I=>I.props.value).join(";");return i.jsx(sy,{...g,children:i.jsxs(p8,{required:m,scope:t,trigger:v,onTriggerChange:y,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:_,onValueNodeHasChildrenChange:S,contentId:Mt(),value:R,onValueChange:E,open:N,onOpenChange:k,dir:j,triggerPointerDownPosRef:$,disabled:p,children:[i.jsx(bf.Provider,{scope:t,children:i.jsx(m8,{scope:e.__scopeSelect,onNativeOptionAdd:d.useCallback(I=>{C(z=>new Set(z).add(I))},[]),onNativeOptionRemove:d.useCallback(I=>{C(z=>{const A=new Set(z);return A.delete(I),A})},[]),children:r})}),M?i.jsxs(lE,{"aria-hidden":!0,required:m,tabIndex:-1,name:h,autoComplete:f,value:R,onChange:I=>E(I.target.value),disabled:p,form:w,children:[R===void 0?i.jsx("option",{value:""}):null,Array.from(O)]},D):null]})})};$C.displayName=ga;var FC="SelectTrigger",UC=d.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,a=jf(r),o=Ci(FC,r),l=o.disabled||n,c=Se(t,o.onTriggerChange),u=_f(r),h=d.useRef("touch"),[f,p,m]=uE(g=>{const v=u().filter(b=>!b.disabled),y=v.find(b=>b.value===o.value),x=dE(v,g,y);x!==void 0&&o.onValueChange(x.value)}),w=g=>{l||(o.onOpenChange(!0),m()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return i.jsx(nu,{asChild:!0,...a,children:i.jsx(se.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":cE(o.value)?"":void 0,...s,ref:c,onClick:Z(s.onClick,g=>{g.currentTarget.focus(),h.current!=="mouse"&&w(g)}),onPointerDown:Z(s.onPointerDown,g=>{h.current=g.pointerType;const v=g.target;v.hasPointerCapture(g.pointerId)&&v.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(w(g),g.preventDefault())}),onKeyDown:Z(s.onKeyDown,g=>{const v=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&p(g.key),!(v&&g.key===" ")&&d8.includes(g.key)&&(w(),g.preventDefault())})})})});UC.displayName=FC;var BC="SelectValue",zC=d.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:a,placeholder:o="",...l}=e,c=Ci(BC,r),{onValueNodeHasChildrenChange:u}=c,h=a!==void 0,f=Se(t,c.onValueNodeChange);return yt(()=>{u(h)},[u,h]),i.jsx(se.span,{...l,ref:f,style:{pointerEvents:"none"},children:cE(c.value)?i.jsx(i.Fragment,{children:o}):a})});zC.displayName=BC;var v8="SelectIcon",qC=d.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return i.jsx(se.span,{"aria-hidden":!0,...s,ref:t,children:n||""})});qC.displayName=v8;var y8="SelectPortal",WC=e=>i.jsx(el,{asChild:!0,...e});WC.displayName=y8;var va="SelectContent",VC=d.forwardRef((e,t)=>{const r=Ci(va,e.__scopeSelect),[n,s]=d.useState();if(yt(()=>{s(new DocumentFragment)},[]),!r.open){const a=n;return a?Tn.createPortal(i.jsx(HC,{scope:e.__scopeSelect,children:i.jsx(bf.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),a):null}return i.jsx(KC,{...e,ref:t})});VC.displayName=va;var mn=10,[HC,Ei]=ml(va),x8="SelectContentImpl",w8=fi("SelectContent.RemoveScroll"),KC=d.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:w,hideWhenDetached:g,avoidCollisions:v,...y}=e,x=Ci(va,r),[b,_]=d.useState(null),[S,j]=d.useState(null),N=Se(t,W=>_(W)),[k,R]=d.useState(null),[E,$]=d.useState(null),M=_f(r),[O,C]=d.useState(!1),D=d.useRef(!1);d.useEffect(()=>{if(b)return lf(b)},[b]),of();const I=d.useCallback(W=>{const[ae,...X]=M().map(ve=>ve.ref.current),[le]=X.slice(-1),ue=document.activeElement;for(const ve of W)if(ve===ue||(ve==null||ve.scrollIntoView({block:"nearest"}),ve===ae&&S&&(S.scrollTop=0),ve===le&&S&&(S.scrollTop=S.scrollHeight),ve==null||ve.focus(),document.activeElement!==ue))return},[M,S]),z=d.useCallback(()=>I([k,b]),[I,k,b]);d.useEffect(()=>{O&&z()},[O,z]);const{onOpenChange:A,triggerPointerDownPosRef:P}=x;d.useEffect(()=>{if(b){let W={x:0,y:0};const ae=le=>{var ue,ve;W={x:Math.abs(Math.round(le.pageX)-(((ue=P.current)==null?void 0:ue.x)??0)),y:Math.abs(Math.round(le.pageY)-(((ve=P.current)==null?void 0:ve.y)??0))}},X=le=>{W.x<=10&&W.y<=10?le.preventDefault():b.contains(le.target)||A(!1),document.removeEventListener("pointermove",ae),P.current=null};return P.current!==null&&(document.addEventListener("pointermove",ae),document.addEventListener("pointerup",X,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ae),document.removeEventListener("pointerup",X,{capture:!0})}}},[b,A,P]),d.useEffect(()=>{const W=()=>A(!1);return window.addEventListener("blur",W),window.addEventListener("resize",W),()=>{window.removeEventListener("blur",W),window.removeEventListener("resize",W)}},[A]);const[V,J]=uE(W=>{const ae=M().filter(ue=>!ue.disabled),X=ae.find(ue=>ue.ref.current===document.activeElement),le=dE(ae,W,X);le&&setTimeout(()=>le.ref.current.focus())}),L=d.useCallback((W,ae,X)=>{const le=!D.current&&!X;(x.value!==void 0&&x.value===ae||le)&&(R(W),le&&(D.current=!0))},[x.value]),Q=d.useCallback(()=>b==null?void 0:b.focus(),[b]),q=d.useCallback((W,ae,X)=>{const le=!D.current&&!X;(x.value!==void 0&&x.value===ae||le)&&$(W)},[x.value]),K=n==="popper"?Rg:GC,te=K===Rg?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:w,hideWhenDetached:g,avoidCollisions:v}:{};return i.jsx(HC,{scope:r,content:b,viewport:S,onViewportChange:j,itemRefCallback:L,selectedItem:k,onItemLeave:Q,itemTextRefCallback:q,focusSelectedItem:z,selectedItemText:E,position:n,isPositioned:O,searchRef:V,children:i.jsx(cu,{as:w8,allowPinchZoom:!0,children:i.jsx(ou,{asChild:!0,trapped:x.open,onMountAutoFocus:W=>{W.preventDefault()},onUnmountAutoFocus:Z(s,W=>{var ae;(ae=x.trigger)==null||ae.focus({preventScroll:!0}),W.preventDefault()}),children:i.jsx(ja,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:W=>W.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:i.jsx(K,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:W=>W.preventDefault(),...y,...te,onPlaced:()=>C(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Z(y.onKeyDown,W=>{const ae=W.ctrlKey||W.altKey||W.metaKey;if(W.key==="Tab"&&W.preventDefault(),!ae&&W.key.length===1&&J(W.key),["ArrowUp","ArrowDown","Home","End"].includes(W.key)){let le=M().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);if(["ArrowUp","End"].includes(W.key)&&(le=le.slice().reverse()),["ArrowUp","ArrowDown"].includes(W.key)){const ue=W.target,ve=le.indexOf(ue);le=le.slice(ve+1)}setTimeout(()=>I(le)),W.preventDefault()}})})})})})})});KC.displayName=x8;var b8="SelectItemAlignedPosition",GC=d.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,a=Ci(va,r),o=Ei(va,r),[l,c]=d.useState(null),[u,h]=d.useState(null),f=Se(t,N=>h(N)),p=_f(r),m=d.useRef(!1),w=d.useRef(!0),{viewport:g,selectedItem:v,selectedItemText:y,focusSelectedItem:x}=o,b=d.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&g&&v&&y){const N=a.trigger.getBoundingClientRect(),k=u.getBoundingClientRect(),R=a.valueNode.getBoundingClientRect(),E=y.getBoundingClientRect();if(a.dir!=="rtl"){const ue=E.left-k.left,ve=R.left-ue,Ve=N.left-ve,me=N.width+Ve,nt=Math.max(me,k.width),Ae=window.innerWidth-mn,kt=Pg(ve,[mn,Math.max(mn,Ae-nt)]);l.style.minWidth=me+"px",l.style.left=kt+"px"}else{const ue=k.right-E.right,ve=window.innerWidth-R.right-ue,Ve=window.innerWidth-N.right-ve,me=N.width+Ve,nt=Math.max(me,k.width),Ae=window.innerWidth-mn,kt=Pg(ve,[mn,Math.max(mn,Ae-nt)]);l.style.minWidth=me+"px",l.style.right=kt+"px"}const $=p(),M=window.innerHeight-mn*2,O=g.scrollHeight,C=window.getComputedStyle(u),D=parseInt(C.borderTopWidth,10),I=parseInt(C.paddingTop,10),z=parseInt(C.borderBottomWidth,10),A=parseInt(C.paddingBottom,10),P=D+I+O+A+z,V=Math.min(v.offsetHeight*5,P),J=window.getComputedStyle(g),L=parseInt(J.paddingTop,10),Q=parseInt(J.paddingBottom,10),q=N.top+N.height/2-mn,K=M-q,te=v.offsetHeight/2,W=v.offsetTop+te,ae=D+I+W,X=P-ae;if(ae<=q){const ue=$.length>0&&v===$[$.length-1].ref.current;l.style.bottom="0px";const ve=u.clientHeight-g.offsetTop-g.offsetHeight,Ve=Math.max(K,te+(ue?Q:0)+ve+z),me=ae+Ve;l.style.height=me+"px"}else{const ue=$.length>0&&v===$[0].ref.current;l.style.top="0px";const Ve=Math.max(q,D+g.offsetTop+(ue?L:0)+te)+X;l.style.height=Ve+"px",g.scrollTop=ae-q+g.offsetTop}l.style.margin=`${mn}px 0`,l.style.minHeight=V+"px",l.style.maxHeight=M+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[p,a.trigger,a.valueNode,l,u,g,v,y,a.dir,n]);yt(()=>b(),[b]);const[_,S]=d.useState();yt(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const j=d.useCallback(N=>{N&&w.current===!0&&(b(),x==null||x(),w.current=!1)},[b,x]);return i.jsx(j8,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:j,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:i.jsx(se.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});GC.displayName=b8;var _8="SelectPopperPosition",Rg=d.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=mn,...a}=e,o=jf(r);return i.jsx(Zh,{...o,...a,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Rg.displayName=_8;var[j8,Fy]=ml(va,{}),Ag="SelectViewport",YC=d.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...s}=e,a=Ei(Ag,r),o=Fy(Ag,r),l=Se(t,a.onViewportChange),c=d.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),i.jsx(bf.Slot,{scope:r,children:i.jsx(se.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Z(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&f){const m=Math.abs(c.current-h.scrollTop);if(m>0){const w=window.innerHeight-mn*2,g=parseFloat(f.style.minHeight),v=parseFloat(f.style.height),y=Math.max(g,v);if(y<w){const x=y+m,b=Math.min(w,x),_=x-b;f.style.height=b+"px",f.style.bottom==="0px"&&(h.scrollTop=_>0?_:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});YC.displayName=Ag;var QC="SelectGroup",[S8,N8]=ml(QC),k8=d.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Mt();return i.jsx(S8,{scope:r,id:s,children:i.jsx(se.div,{role:"group","aria-labelledby":s,...n,ref:t})})});k8.displayName=QC;var JC="SelectLabel",XC=d.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=N8(JC,r);return i.jsx(se.div,{id:s.id,...n,ref:t})});XC.displayName=JC;var hh="SelectItem",[C8,ZC]=ml(hh),eE=d.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:a,...o}=e,l=Ci(hh,r),c=Ei(hh,r),u=l.value===n,[h,f]=d.useState(a??""),[p,m]=d.useState(!1),w=Se(t,x=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,x,n,s)}),g=Mt(),v=d.useRef("touch"),y=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(C8,{scope:r,value:n,disabled:s,textId:g,isSelected:u,onItemTextChange:d.useCallback(x=>{f(b=>b||((x==null?void 0:x.textContent)??"").trim())},[]),children:i.jsx(bf.ItemSlot,{scope:r,value:n,disabled:s,textValue:h,children:i.jsx(se.div,{role:"option","aria-labelledby":g,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:w,onFocus:Z(o.onFocus,()=>m(!0)),onBlur:Z(o.onBlur,()=>m(!1)),onClick:Z(o.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:Z(o.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:Z(o.onPointerDown,x=>{v.current=x.pointerType}),onPointerMove:Z(o.onPointerMove,x=>{var b;v.current=x.pointerType,s?(b=c.onItemLeave)==null||b.call(c):v.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Z(o.onPointerLeave,x=>{var b;x.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:Z(o.onKeyDown,x=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&x.key===" "||(h8.includes(x.key)&&y(),x.key===" "&&x.preventDefault())})})})})});eE.displayName=hh;var Vl="SelectItemText",tE=d.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...a}=e,o=Ci(Vl,r),l=Ei(Vl,r),c=ZC(Vl,r),u=g8(Vl,r),[h,f]=d.useState(null),p=Se(t,y=>f(y),c.onItemTextChange,y=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,y,c.value,c.disabled)}),m=h==null?void 0:h.textContent,w=d.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:v}=u;return yt(()=>(g(w),()=>v(w)),[g,v,w]),i.jsxs(i.Fragment,{children:[i.jsx(se.span,{id:c.textId,...a,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Tn.createPortal(a.children,o.valueNode):null]})});tE.displayName=Vl;var rE="SelectItemIndicator",nE=d.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return ZC(rE,r).isSelected?i.jsx(se.span,{"aria-hidden":!0,...n,ref:t}):null});nE.displayName=rE;var Ig="SelectScrollUpButton",sE=d.forwardRef((e,t)=>{const r=Ei(Ig,e.__scopeSelect),n=Fy(Ig,e.__scopeSelect),[s,a]=d.useState(!1),o=Se(t,n.onScrollButtonChange);return yt(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?i.jsx(aE,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});sE.displayName=Ig;var Og="SelectScrollDownButton",iE=d.forwardRef((e,t)=>{const r=Ei(Og,e.__scopeSelect),n=Fy(Og,e.__scopeSelect),[s,a]=d.useState(!1),o=Se(t,n.onScrollButtonChange);return yt(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;a(h)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?i.jsx(aE,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});iE.displayName=Og;var aE=d.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,a=Ei("SelectScrollButton",r),o=d.useRef(null),l=_f(r),c=d.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return d.useEffect(()=>()=>c(),[c]),yt(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),i.jsx(se.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:Z(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Z(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Z(s.onPointerLeave,()=>{c()})})}),E8="SelectSeparator",oE=d.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return i.jsx(se.div,{"aria-hidden":!0,...n,ref:t})});oE.displayName=E8;var Mg="SelectArrow",T8=d.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=jf(r),a=Ci(Mg,r),o=Ei(Mg,r);return a.open&&o.position==="popper"?i.jsx(ef,{...s,...n,ref:t}):null});T8.displayName=Mg;var P8="SelectBubbleInput",lE=d.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const s=d.useRef(null),a=Se(n,s),o=$y(t);return d.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&h){const f=new Event("change",{bubbles:!0});h.call(l,t),l.dispatchEvent(f)}},[o,t]),i.jsx(se.select,{...r,style:{...k1,...r.style},ref:a,defaultValue:t})});lE.displayName=P8;function cE(e){return e===""||e===void 0}function uE(e){const t=gt(e),r=d.useRef(""),n=d.useRef(0),s=d.useCallback(o=>{const l=r.current+o;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=d.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return d.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,a]}function dE(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let o=R8(e,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function R8(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var A8=$C,hE=UC,I8=zC,O8=qC,M8=WC,fE=VC,D8=YC,pE=XC,mE=eE,L8=tE,$8=nE,gE=sE,vE=iE,yE=oE;const ya=A8,xa=I8,vi=d.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(hE,{ref:n,className:H("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,i.jsx(O8,{asChild:!0,children:i.jsx(nl,{className:"h-4 w-4 opacity-50"})})]}));vi.displayName=hE.displayName;const xE=d.forwardRef(({className:e,...t},r)=>i.jsx(gE,{ref:r,className:H("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(KI,{className:"h-4 w-4"})}));xE.displayName=gE.displayName;const wE=d.forwardRef(({className:e,...t},r)=>i.jsx(vE,{ref:r,className:H("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(nl,{className:"h-4 w-4"})}));wE.displayName=vE.displayName;const yi=d.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>i.jsx(M8,{children:i.jsxs(fE,{ref:s,className:H("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[i.jsx(xE,{}),i.jsx(D8,{className:H("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(wE,{})]})}));yi.displayName=fE.displayName;const F8=d.forwardRef(({className:e,...t},r)=>i.jsx(pE,{ref:r,className:H("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));F8.displayName=pE.displayName;const Vn=d.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(mE,{ref:n,className:H("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx($8,{children:i.jsx(rl,{className:"h-4 w-4"})})}),i.jsx(L8,{children:t})]}));Vn.displayName=mE.displayName;const U8=d.forwardRef(({className:e,...t},r)=>i.jsx(yE,{ref:r,className:H("-mx-1 my-1 h-px bg-muted",e),...t}));U8.displayName=yE.displayName;function bE({categories:e,selectedItems:t,onToggleItem:r,onAddCustomItem:n}){var y,x;const[s,a]=d.useState(""),[o,l]=d.useState(((y=e[0])==null?void 0:y.name)||""),[c,u]=d.useState(!1),[h,f]=d.useState(""),[p,m]=d.useState(((x=e[0])==null?void 0:x.name)||"");d.useEffect(()=>{o||e.length!==0&&(l(e[0].name),m(e[0].name))},[o,e]);const w=d.useMemo(()=>{const b=new Set;return Object.entries(t).forEach(([_,S])=>{S.forEach(j=>b.add(`${_}::${j}`))}),b},[t]),g=()=>{!h.trim()||!p||(n(p,h.trim()),f(""),u(!1))},v=d.useMemo(()=>{const b=e.find(S=>S.name===o);if(!b)return[];if(!s.trim())return b.items;const _=s.toLowerCase();return b.items.filter(S=>S.toLowerCase().includes(_))},[e,o,s]);return e.length===0?i.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No categories available in this library."}):i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Na,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(ze,{placeholder:"Search items...",value:s,onChange:b=>a(b.target.value),className:"pl-9"})]}),i.jsxs(vf,{open:c,onOpenChange:u,children:[i.jsx(TB,{asChild:!0,children:i.jsx(F,{variant:"outline",size:"icon",className:"shrink-0",children:i.jsx(Sa,{className:"h-4 w-4"})})}),i.jsxs(pu,{children:[i.jsx(yf,{children:i.jsx(xf,{children:"Add Custom Item"})}),i.jsxs("div",{className:"space-y-4 pt-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{htmlFor:"custom-item-name",children:"Item Name"}),i.jsx(ze,{id:"custom-item-name",value:h,onChange:b=>f(b.target.value),placeholder:"e.g. My Custom Item",onKeyDown:b=>b.key==="Enter"&&g()})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{children:"Category"}),i.jsxs(ya,{value:p,onValueChange:m,children:[i.jsx(vi,{children:i.jsx(xa,{})}),i.jsx(yi,{children:e.map(b=>i.jsx(Vn,{value:b.name,children:b.name},b.name))})]})]}),i.jsx(F,{onClick:g,className:"w-full",children:"Add Item"})]})]})]})]}),i.jsxs(Aa,{value:o,onValueChange:l,children:[i.jsx(ki,{className:"w-full h-auto flex-wrap gap-1 bg-transparent p-0",children:e.map(b=>i.jsx(Sr,{value:b.name,className:"text-xs px-2 py-0.5 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground whitespace-normal",children:b.name},b.name))}),e.map(b=>i.jsx(en,{value:b.name,className:"mt-3",children:i.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.map(_=>{const S=w.has(`${b.name}::${_}`);return i.jsxs(Me,{variant:S?"default":"outline",className:`cursor-pointer transition-all ${S?"bg-primary hover:bg-primary/90":"hover:bg-accent hover:text-accent-foreground"}`,onClick:()=>r(b.name,_),children:[S&&i.jsx(rl,{className:"h-3 w-3 mr-1"}),_]},_)}),v.length===0&&i.jsx("p",{className:"text-sm text-muted-foreground",children:"No items found"})]})},b.name))]})]})}var Sf="Collapsible",[B8,_E]=Nt(Sf),[z8,Uy]=B8(Sf),jE=d.forwardRef((e,t)=>{const{__scopeCollapsible:r,open:n,defaultOpen:s,disabled:a,onOpenChange:o,...l}=e,[c,u]=sr({prop:n,defaultProp:s??!1,onChange:o,caller:Sf});return i.jsx(z8,{scope:r,disabled:a,contentId:Mt(),open:c,onOpenToggle:d.useCallback(()=>u(h=>!h),[u]),children:i.jsx(se.div,{"data-state":Wy(c),"data-disabled":a?"":void 0,...l,ref:t})})});jE.displayName=Sf;var SE="CollapsibleTrigger",By=d.forwardRef((e,t)=>{const{__scopeCollapsible:r,...n}=e,s=Uy(SE,r);return i.jsx(se.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":Wy(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...n,ref:t,onClick:Z(e.onClick,s.onOpenToggle)})});By.displayName=SE;var zy="CollapsibleContent",qy=d.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Uy(zy,e.__scopeCollapsible);return i.jsx(Dt,{present:r||s.open,children:({present:a})=>i.jsx(q8,{...n,ref:t,present:a})})});qy.displayName=zy;var q8=d.forwardRef((e,t)=>{const{__scopeCollapsible:r,present:n,children:s,...a}=e,o=Uy(zy,r),[l,c]=d.useState(n),u=d.useRef(null),h=Se(t,u),f=d.useRef(0),p=f.current,m=d.useRef(0),w=m.current,g=o.open||l,v=d.useRef(g),y=d.useRef(void 0);return d.useEffect(()=>{const x=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(x)},[]),yt(()=>{const x=u.current;if(x){y.current=y.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const b=x.getBoundingClientRect();f.current=b.height,m.current=b.width,v.current||(x.style.transitionDuration=y.current.transitionDuration,x.style.animationName=y.current.animationName),c(n)}},[o.open,n]),i.jsx(se.div,{"data-state":Wy(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...a,ref:h,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...e.style},children:g&&s})});function Wy(e){return e?"open":"closed"}var NE=jE,W8=By,V8=qy;const Vy=NE,Hy=By,Ky=qy;function kE({title:e,selectedItems:t,itemContexts:r,onRemoveItem:n,onUpdateContext:s,onClear:a}){const[o,l]=d.useState(!0),c=Object.entries(t).flatMap(([h,f])=>f.map(p=>({category:h,item:p}))),u=c.length;return u===0?null:i.jsxs(Vy,{open:o,onOpenChange:l,children:[i.jsx(Hy,{asChild:!0,children:i.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5 rounded-none border border-border/40 cursor-pointer hover:bg-muted/20 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-foreground",children:e||"Your Selection"}),i.jsxs(Me,{variant:"secondary",className:"text-xs",children:[u," ",u===1?"item":"items"]})]}),i.jsx(nl,{className:H("h-4 w-4 text-muted-foreground transition-transform duration-200",o&&"rotate-180")})]})}),i.jsx(Ky,{className:"mt-2",children:i.jsxs("div",{className:"rounded-none border border-border/40 overflow-hidden",children:[i.jsx("div",{className:"divide-y divide-border/40",children:c.map(({category:h,item:f})=>{const p=`${h}::${f}`,m=r[p]||"";return i.jsxs("div",{className:"p-3 hover:bg-accent/5 transition-colors group",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:f}),i.jsx("p",{className:"text-xs text-muted-foreground",children:h})]}),i.jsx(F,{variant:"ghost",size:"icon",className:"h-7 w-7 opacity-0 group-hover:opacity-100 transition-opacity text-destructive hover:text-destructive shrink-0",onClick:w=>{w.stopPropagation(),n(h,f)},children:i.jsx(rr,{className:"h-3 w-3"})})]}),i.jsx(ze,{value:m,onChange:w=>s(h,f,w.target.value),placeholder:"Add context (e.g. 0.5mg, morning, with food...)",className:"h-7 text-xs rounded-none border-x-0 px-3"})]},p)})}),i.jsx("div",{className:"p-3 border-t border-border/40 flex justify-end",children:i.jsxs(F,{variant:"ghost",size:"sm",onClick:a,className:"text-destructive hover:text-destructive gap-1",children:[i.jsx(Yd,{className:"h-3 w-3"}),"Clear All"]})})]})})]})}function H8({categories:e,selectedItems:t,itemContexts:r,onToggleItem:n,onAddCustomItem:s,onRemoveItem:a,onUpdateItemContext:o,onClear:l,selectionTitle:c="Build Blueprint"}){return i.jsxs("div",{className:"space-y-4",children:[i.jsx(bE,{categories:e,selectedItems:t,onToggleItem:n,onAddCustomItem:s}),i.jsx(kE,{title:c,selectedItems:t,itemContexts:r,onRemoveItem:a,onUpdateContext:o,onClear:l})]})}const K8="blueprints_home_draft_v1",zp=[{key:"morning",title:"HOME MORNING ROUTINE LIBRARY",fallbackIlike:"%morning routine%library%"},{key:"skincare",title:"Home Skincare Routine Library",fallbackIlike:"%skincare%routine%library%"}];function Cb(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=e.categories;return Array.isArray(t)?t.map(r=>({name:typeof r.name=="string"?r.name:"Untitled",items:Array.isArray(r.items)?r.items.filter(n=>typeof n=="string"):[]})).filter(r=>r.name.trim().length>0&&r.items.length>0):[]}function G8(e,t,r){const n=new Set(e[t]||[]);n.add(r),e[t]=Array.from(n)}function Y8(e,t){const r=[],n=t.map(s=>s.toLowerCase());return e.forEach(s=>{s.items.forEach(a=>{const o=a.toLowerCase();n.some(l=>o.includes(l))&&r.push({category:s.name,item:a})})}),r}function Q8(e){return e.filter(t=>t.trim().length>0).slice(0,2).join(", ")}function J8(e,t,r){const n=r.toLowerCase(),s=[];return e==="skincare"?((n.includes("spf")||n.includes("sunscreen"))&&s.push("AM"),n.includes("retinol")&&s.push("PM"),(n.includes("cleanser")||n.includes("wash"))&&s.push("daily")):((n.includes("water")||n.includes("hydrate"))&&s.push("first"),(n.includes("alarm")||n.includes("light"))&&s.push("wake-up"),(n.includes("journal")||n.includes("planner")||n.includes("calendar"))&&s.push("focus")),s.push(t),Q8(s)}function Eb(e,t,r,n){const a=n.flatMap(p=>p.items.map(m=>({category:p.name,item:m}))).slice(0,10),c=e==="skincare"?[{title:"Cleanse",needles:["cleanser","wash","gel","foam"]},{title:"Treat",needles:["serum","vitamin","retinol","niacin","acid","bha","aha"]},{title:"Moisturize",needles:["moist","cream","lotion"]},{title:"Protect (AM)",needles:["sunscreen","spf"]}]:[{title:"Wake up & reset",needles:["alarm","light","water","curtain","lamp"]},{title:"Hygiene",needles:["tooth","floss","cleanser","deodor","shower","sunscreen"]},{title:"Move a bit",needles:["yoga","mat","shoe","run","band","dumbbell","stretch"]},{title:"Plan the day",needles:["journal","planner","calendar","notebook","todo","timer"]}],u={},h={};return c.forEach(p=>{const m=Y8(n,p.needles);(m.length>0?m:a).slice(0,3).forEach(g=>{G8(u,g.category,g.item);const v=`${g.category}::${g.item}`;h[v]=J8(e,p.title,g.item)})}),{version:1,inventoryId:t,title:e==="skincare"?"Skincare Routine Blueprint":"Morning Routine Blueprint",selectedItems:u,itemContexts:h,source:"home-example"}}function X8(){const e=Tr(),{user:t,session:r}=Ne(),{toast:n}=St(),[s,a]=d.useState(zp[0].key),[o,l]=d.useState({}),{data:c,isLoading:u,isError:h}=De({queryKey:["home-featured-inventories-v1"],queryFn:async()=>(await Promise.all(zp.map(async M=>{var A,P;const O=U.from("inventories").select("id, title, generated_schema, is_public").eq("is_public",!0).limit(1),D=(A=(await O.ilike("title",M.title)).data)==null?void 0:A[0];if(D)return{featureKey:M.key,...D};const z=(P=(await O.ilike("title",M.fallbackIlike)).data)==null?void 0:P[0];return z?{featureKey:M.key,...z}:null}))).filter(M=>!!M)}),f=d.useMemo(()=>!c||c.length===0?null:c.find($=>$.featureKey===s)??c[0],[c,s]),p=d.useMemo(()=>f?Cb(f.generated_schema):[],[f]);d.useEffect(()=>{f&&l($=>{if($[f.id])return $;const M=Eb(f.featureKey,f.id,f.title,p),O={};let C=3;for(const[I,z]of Object.entries(M.selectedItems)){if(C<=0)break;const A=z.slice(0,C);A.length>0&&(O[I]=A,C-=A.length)}const D={};return Object.entries(O).forEach(([I,z])=>{z.forEach(A=>{var V;const P=`${I}::${A}`;(V=M.itemContexts)!=null&&V[P]&&(D[P]=M.itemContexts[P])})}),{...$,[f.id]:{categories:p,selectedItems:O,itemContexts:D,title:f.title}}})},[f==null?void 0:f.id,p,f==null?void 0:f.title]);const m=d.useMemo(()=>f&&o[f.id]||null,[f,o]),w=(m==null?void 0:m.categories)||p,g=(m==null?void 0:m.selectedItems)||{},v=(m==null?void 0:m.itemContexts)||{},y=d.useMemo(()=>Object.values(g).reduce(($,M)=>$+M.length,0),[g]),x=$=>{f&&l(M=>({...M,[f.id]:{...M[f.id]||{categories:Cb(f.generated_schema),selectedItems:{},itemContexts:{},title:f.title},...$}}))},b=($,M)=>`${$}::${M}`,_=($,M)=>{const O=b($,M),C={...g},D=new Set(C[$]||[]),I=D.has(M);I?D.delete(M):D.add(M),C[$]=Array.from(D);const z={...v};I&&delete z[O],x({selectedItems:C,itemContexts:z})},S=($,M)=>{const O=w.map(D=>D.name===$?{...D,items:D.items.includes(M)?D.items:[...D.items,M]}:D),C={...g,[$]:[...g[$]||[],M]};x({categories:O,selectedItems:C})},j=($,M)=>{const O=b($,M),C={...g,[$]:(g[$]||[]).filter(I=>I!==M)},D={...v};delete D[O],x({selectedItems:C,itemContexts:D})},N=($,M,O)=>{x({itemContexts:{...v,[b($,M)]:O}})},k=()=>{x({selectedItems:{},itemContexts:{}})},R=()=>{if(!f)return;const $=Eb(f.featureKey,f.id,f.title,p);x({title:$.title,categories:p,selectedItems:$.selectedItems,itemContexts:$.itemContexts||{}}),n({title:"Example loaded",description:"Your blueprint has been pre-filled with selected items."})},E=$=>{if(!f)return;if(!(r!=null&&r.access_token)){n({title:"Sign in required",description:"Please sign in to use the full builder."}),e("/auth");return}const M={version:1,inventoryId:f.id,title:(m==null?void 0:m.title)||f.title,selectedItems:g,itemContexts:v,modeHint:"full",source:$};sessionStorage.setItem(K8,JSON.stringify(M)),e(`/inventory/${M.inventoryId}/build`)};return i.jsxs("section",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:"Interactive demo"}),i.jsx("h2",{className:"text-3xl font-semibold tracking-tight leading-tight",children:"TRY THE BUILDER"}),i.jsx("p",{className:"text-base font-medium text-foreground/90",children:"Build a Blueprint in minutes."}),i.jsx("p",{className:"text-sm text-muted-foreground max-w-[60ch]",children:"Pick a library, tap items, and shape a blueprint. Use AI review and banners when you're ready. Just click on your favorite items to get started."})]}),i.jsx(Me,{variant:"secondary",className:"w-fit text-xs",children:"Starter"})]}),i.jsxs(Oe,{className:"border-border/40",children:[i.jsxs(ur,{className:"pb-3",children:[i.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[i.jsx("div",{className:"flex flex-wrap gap-2",children:zp.map($=>i.jsx(F,{type:"button",size:"sm",variant:s===$.key?"default":"outline",onClick:()=>a($.key),disabled:!(c!=null&&c.some(M=>M.featureKey===$.key)),children:$.key==="morning"?"Morning routine":"Skincare"},$.key))}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(F,{type:"button",size:"sm",variant:"ghost",className:"gap-2",onClick:k,disabled:!f,children:[i.jsx(fO,{className:"h-4 w-4"}),"Clear all"]})})]}),i.jsxs(dr,{className:"text-base font-medium flex items-center gap-2",children:[i.jsx(Br,{className:"h-4 w-4 text-primary"}),(f==null?void 0:f.title)||"Loading"]})]}),i.jsx(Be,{className:"space-y-4",children:u?i.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from({length:4}).map(($,M)=>i.jsxs("div",{className:"space-y-2",children:[i.jsx(je,{className:"h-4 w-32"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(je,{className:"h-4 w-full"}),i.jsx(je,{className:"h-4 w-5/6"}),i.jsx(je,{className:"h-4 w-4/6"})]})]},M))}):h||!f?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Featured libraries are not available right now. Try browsing the Library page instead."}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-background rounded-md border border-border/40 overflow-hidden",children:[i.jsxs("div",{className:"p-4 border-b border-border/40 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:s==="morning"?"Morning routine":"Skincare"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Search items, tap to add them, and build your selection."})]}),i.jsxs(F,{type:"button",variant:"outline",className:"gap-2",onClick:R,children:[i.jsx(Br,{className:"h-4 w-4"}),"Auto-generate Blueprint"]})]}),i.jsx("div",{className:"p-4",children:i.jsx(H8,{categories:w,selectedItems:g,itemContexts:v,onToggleItem:_,onAddCustomItem:S,onRemoveItem:j,onUpdateItemContext:N,onClear:k,selectionTitle:"Build Blueprint"})})]}),i.jsxs("div",{className:"border border-border/40 px-3 py-3 space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(Wm,{className:"h-4 w-4"}),i.jsx("span",{children:"Unlock AI review, banner generation, and publishing when you're ready."})]}),i.jsx("p",{className:"text-xs text-muted-foreground/80",children:'Example AI question: "Is this routine realistic for weekdays, and what would you improve?"'}),y<3?i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Select ",3-y," more item",3-y===1?"":"s"," to continue."]}):i.jsxs(F,{type:"button",variant:"outline",className:"w-full gap-2",onClick:()=>E("home-starter"),children:[i.jsx(Wm,{className:"h-4 w-4"}),"Continue in full builder"]})]})]})})]})]})}const qp="id, inventory_id, creator_user_id, title, selected_items, mix_notes, banner_url, llm_review, is_public, likes_count, created_at, updated_at";function Wp(e,t){return t?e.or(`is_public.eq.true,creator_user_id.eq.${t}`):e.eq("is_public",!0)}async function Tb(e,t){if(e.length===0)return[];const r=e.map(w=>w.id),n=e.map(w=>w.inventory_id).filter(Boolean),[s,a,o]=await Promise.all([U.from("blueprint_tags").select("blueprint_id, tag_id").in("blueprint_id",r),t?U.from("blueprint_likes").select("blueprint_id").eq("user_id",t).in("blueprint_id",r):Promise.resolve({data:[]}),n.length>0?U.from("inventories").select("id, title").in("id",n):Promise.resolve({data:[]})]),l=s.data||[],c=[...new Set(l.map(w=>w.tag_id))],{data:u}=c.length>0?await U.from("tags").select("id, slug").in("id",c):{data:[]},h=new Map((u||[]).map(w=>[w.id,w])),f=new Map;l.forEach(w=>{const g=h.get(w.tag_id);if(!g)return;const v=f.get(w.blueprint_id)||[];v.push(g),f.set(w.blueprint_id,v)});const p=new Set((a.data||[]).map(w=>w.blueprint_id)),m=new Map((o.data||[]).map(w=>[w.id,w.title]));return e.map(w=>({...w,tags:f.get(w.id)||[],user_liked:p.has(w.id),inventory_title:w.inventory_id&&m.get(w.inventory_id)||null}))}function CE(e,t){const{user:r}=Ne();return De({queryKey:["blueprint-search",e,t,r==null?void 0:r.id],queryFn:async()=>{const n=e.trim();let s=[];const a=t==="latest"?{column:"created_at",ascending:!1}:{column:"likes_count",ascending:!1};if(!n){let f=U.from("blueprints").select(qp).order(a.column,{ascending:a.ascending}).limit(60);f=Wp(f,r==null?void 0:r.id);const{data:p,error:m}=await f;if(m)throw m;return s=p||[],Tb(s,r==null?void 0:r.id)}const o=bt(n),l=[];if(o){const{data:f}=await U.from("tags").select("id").eq("slug",o).maybeSingle();if(f!=null&&f.id){const{data:p}=await U.from("blueprint_tags").select("blueprint_id").eq("tag_id",f.id),m=(p||[]).map(w=>w.blueprint_id);if(m.length>0){let w=U.from("blueprints").select(qp).in("id",m).order(a.column,{ascending:a.ascending});w=Wp(w,r==null?void 0:r.id);const{data:g}=await w;l.push(...g||[])}}}let c=U.from("blueprints").select(qp).ilike("title",`%${n}%`).order(a.column,{ascending:a.ascending});c=Wp(c,r==null?void 0:r.id);const{data:u}=await c;return u&&l.push(...u),s=Array.from(new Map(l.map(f=>[f.id,f])).values()),Tb(s,r==null?void 0:r.id)}})}const Gy="id, inventory_id, creator_user_id, title, selected_items, steps, mix_notes, review_prompt, banner_url, llm_review, is_public, likes_count, source_blueprint_id, created_at, updated_at";function EE(e,t){const r=e,n=`${(r==null?void 0:r.message)||""} ${(r==null?void 0:r.details)||""} ${(r==null?void 0:r.hint)||""}`.toLowerCase();return n.includes("does not exist")&&n.includes(t.toLowerCase())}async function TE(e,t){const r=Oy(e);if(r.length===0)return[];const{data:n,error:s}=await U.from("tags").select("id, slug").in("slug",r);if(s)throw s;const a=n||[],o=new Set(a.map(u=>u.slug)),l=r.filter(u=>!o.has(u));let c=[];if(l.length>0){const{data:u,error:h}=await U.from("tags").insert(l.map(f=>({slug:f,created_by:t}))).select("id, slug");if(h)throw h;c=u||[]}return[...a,...c]}function Nf(e){const{user:t}=Ne();return De({queryKey:["blueprint",e,t==null?void 0:t.id],enabled:!!e,queryFn:async()=>{if(!e)return null;const{data:r,error:n}=await U.from("blueprints").select(Gy).eq("id",e).maybeSingle();if(n)throw n;if(!r)return null;const[s,a,o]=await Promise.all([U.from("blueprint_tags").select("tag_id").eq("blueprint_id",e),t?U.from("blueprint_likes").select("id").eq("blueprint_id",e).eq("user_id",t.id):Promise.resolve({data:[]}),U.from("profiles").select("display_name, avatar_url").eq("user_id",r.creator_user_id).maybeSingle()]),l=(s.data||[]).map(h=>h.tag_id),{data:c}=l.length>0?await U.from("tags").select("id, slug").in("id",l):{data:[]},u=!!(a.data&&a.data.length>0);return{...r,tags:c||[],user_liked:u,creator_profile:o.data||null}}})}function Yy(){const{user:e}=Ne(),t=ir();return $t({mutationFn:async r=>{if(!e)throw new Error("Must be logged in");const n={inventory_id:r.inventoryId,creator_user_id:e.id,title:r.title,selected_items:r.selectedItems,steps:r.steps,mix_notes:r.mixNotes,review_prompt:r.reviewPrompt,banner_url:r.bannerUrl,llm_review:r.llmReview,is_public:r.isPublic,source_blueprint_id:r.sourceBlueprintId||null},s=u=>U.from("blueprints").insert(u).select(Gy).single();let a=await s({...n,...r.generationControls?{generation_controls:r.generationControls}:{}});a.error&&r.generationControls&&EE(a.error,"generation_controls")&&(a=await s(n));const{data:o,error:l}=a;if(l)throw l;const c=await TE(r.tags,e.id);if(c.length>0){const{error:u}=await U.from("blueprint_tags").insert(c.map(h=>({blueprint_id:o.id,tag_id:h.id})));if(u)throw u}return o},onSuccess:()=>{t.invalidateQueries({queryKey:["blueprint"]}),t.invalidateQueries({queryKey:["blueprint-comments"]})}})}function Qy(){const{user:e}=Ne(),t=ir();return $t({mutationFn:async({blueprintId:r,liked:n})=>{if(!e)throw new Error("Must be logged in");if(n){const{error:s}=await U.from("blueprint_likes").delete().eq("blueprint_id",r).eq("user_id",e.id);if(s)throw s}else{const{error:s}=await U.from("blueprint_likes").insert({blueprint_id:r,user_id:e.id});if(s)throw s}},onSuccess:()=>{t.invalidateQueries({queryKey:["blueprint"]}),t.invalidateQueries({queryKey:["blueprint-search"]}),t.invalidateQueries({queryKey:["suggested-blueprints"]})}})}function Z8(){const{user:e}=Ne(),t=ir();return $t({mutationFn:async r=>{if(!e)throw new Error("Must be logged in");const n={title:r.title,selected_items:r.selectedItems,steps:r.steps,mix_notes:r.mixNotes,review_prompt:r.reviewPrompt,banner_url:r.bannerUrl,llm_review:r.llmReview,is_public:r.isPublic},s=h=>U.from("blueprints").update(h).eq("id",r.blueprintId).eq("creator_user_id",e.id).select(Gy).single();let a=await s({...n,...r.generationControls?{generation_controls:r.generationControls}:{}});a.error&&r.generationControls&&EE(a.error,"generation_controls")&&(a=await s(n));const{data:o,error:l}=a;if(l)throw l;const c=await TE(r.tags,e.id),{error:u}=await U.from("blueprint_tags").delete().eq("blueprint_id",r.blueprintId);if(u)throw u;if(c.length>0){const{error:h}=await U.from("blueprint_tags").insert(c.map(f=>({blueprint_id:r.blueprintId,tag_id:f.id})));if(h)throw h}return o},onSuccess:(r,n)=>{t.invalidateQueries({queryKey:["blueprint",n.blueprintId]}),t.invalidateQueries({queryKey:["blueprint-search"]}),t.invalidateQueries({queryKey:["suggested-blueprints"]}),t.invalidateQueries({queryKey:["blueprint-comments",n.blueprintId]})}})}function ez(e){return De({queryKey:["blueprint-comments",e],enabled:!!e,queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await U.from("blueprint_comments").select("id, content, created_at, user_id").eq("blueprint_id",e).order("created_at",{ascending:!1});if(r)throw r;const n=[...new Set((t||[]).map(o=>o.user_id))],{data:s}=n.length>0?await U.from("profiles").select("user_id, display_name, avatar_url").in("user_id",n):{data:[]},a=new Map((s||[]).map(o=>[o.user_id,o]));return(t||[]).map(o=>({...o,profile:a.get(o.user_id)||null}))}})}function tz(){const{user:e}=Ne(),t=ir();return $t({mutationFn:async({blueprintId:r,content:n})=>{if(!e)throw new Error("Must be logged in");const{error:s}=await U.from("blueprint_comments").insert({blueprint_id:r,user_id:e.id,content:n});if(s)throw s},onSuccess:(r,n)=>{t.invalidateQueries({queryKey:["blueprint-comments",n.blueprintId]})}})}const rz=["morning","skincare","workout","productivity"],nz=5,sz=50;function iz(e){const t=(e||"").trim();if(!t)return"";const r=t.split(`
`);if(r.findIndex(a=>a.trim().toLowerCase().startsWith("## ")||a.trim().toLowerCase().startsWith("### "))>=0){const a=l=>l.toLowerCase().includes("overview"),o=r.findIndex(l=>(l.trim().startsWith("## ")||l.trim().startsWith("### "))&&a(l));if(o>=0){const l=[];for(let c=o+1;c<r.length;c++){const u=r[c].trim();if(u&&(u.startsWith("## ")||u.startsWith("### ")||(u.startsWith("- ")||u.startsWith("* ")?l.push(u.replace(/^[-*]\s+/,"").trim()):l.push(u.replace(/\*\*/g,"").trim()),l.length>=4)))break}return l.join(`
`)}}const s=[];for(const a of r){const o=a.trim();if(o&&(s.push(o.replace(/\*\*/g,"").replace(/^[-*]\s+/,"").trim()),s.length>=4))break}return s.join(`
`)}function az(){const e=Tr(),{user:t}=Ne(),{toast:r}=St(),n=Qy(),s=d.useMemo(()=>new Set(Ra().map(bt)),[]),{data:a,isLoading:o}=CE("","popular"),[l,c]=d.useState(0),u=d.useRef(null),h=d.useMemo(()=>(a||[]).slice(0,nz),[a]);d.useEffect(()=>{c(0)},[h.length]);const f=d.useMemo(()=>{if(!h||h.length===0)return null;const _=(l%h.length+h.length)%h.length;return h[_]||null},[h,l]),{data:p,isLoading:m}=Nf(f==null?void 0:f.id),w=h.length>1,g=w?(l%h.length+h.length)%h.length:0,v=()=>{w&&c(_=>_-1)},y=()=>{w&&c(_=>_+1)},x=async(_,S)=>{if(!t){r({title:"Sign in required",description:"Please sign in to like blueprints.",variant:"destructive"});return}try{await n.mutateAsync({blueprintId:_,liked:S})}catch(j){r({title:"Action failed",description:j instanceof Error?j.message:"Please try again.",variant:"destructive"})}},b=_=>{e(`/explore?q=${encodeURIComponent(_)}`)};return i.jsxs("section",{className:"space-y-4 animate-fade-in",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:"Discover neat routines"}),i.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold tracking-tight",children:"Blueprints are here to help you"}),i.jsx("p",{className:"text-sm text-muted-foreground max-w-2xl leading-relaxed",children:"Blueprints are small yet effective guides to help you get things done. Browse Blueprints from the community, then come back and build your own Blueprints."})]}),i.jsx("div",{className:"space-y-3",children:o||m?i.jsx(Oe,{children:i.jsxs(Be,{className:"p-5 space-y-3",children:[i.jsx(je,{className:"h-5 w-3/5"}),i.jsx(je,{className:"h-10 w-full"}),i.jsx(je,{className:"h-24 w-full rounded-lg"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(je,{className:"h-5 w-16"}),i.jsx(je,{className:"h-5 w-20"}),i.jsx(je,{className:"h-5 w-14"})]}),i.jsx(je,{className:"h-4 w-full"})]})}):f&&p?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"relative",children:[w&&i.jsxs(i.Fragment,{children:[i.jsx(F,{type:"button",variant:"outline",size:"icon",className:"absolute left-2 top-1/2 -translate-y-1/2 z-10 bg-background border-border/60 hover:bg-muted/20",onClick:v,"aria-label":"Previous blueprint",children:i.jsx(HI,{className:"h-4 w-4"})}),i.jsx(F,{type:"button",variant:"outline",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 z-10 bg-background border-border/60 hover:bg-muted/20",onClick:y,"aria-label":"Next blueprint",children:i.jsx(Hh,{className:"h-4 w-4"})})]}),i.jsx(pe,{to:`/blueprint/${f.id}`,className:"block group","aria-label":`Open blueprint ${f.title}`,onPointerDown:_=>{u.current={x:_.clientX,y:_.clientY}},onPointerUp:_=>{const S=u.current;if(u.current=null,!S||!w)return;const j=_.clientX-S.x,N=_.clientY-S.y;Math.abs(j)<sz||Math.abs(j)<=Math.abs(N)||(_.preventDefault(),j<0?y():v())},children:i.jsxs(Oe,{className:"border-border/40 transition-colors hover:bg-muted/20 group-focus-visible:ring-2 group-focus-visible:ring-primary overflow-hidden",children:[p.banner_url&&i.jsx("div",{className:"aspect-[4/1] w-full bg-muted/20",children:i.jsx("img",{src:p.banner_url,alt:"",className:"h-full w-full object-cover",loading:"lazy"})}),i.jsxs(Be,{className:"p-5 space-y-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("h3",{className:"text-lg font-semibold leading-tight line-clamp-2 group-hover:text-primary transition-colors",children:f.title}),i.jsx("p",{className:"text-sm text-muted-foreground",children:f.inventory_title?`From ${f.inventory_title}`:"Community blueprint"})]}),i.jsx(F,{variant:"ghost",size:"sm",className:`h-8 px-2 shrink-0 ${f.user_liked?"text-red-500 hover:text-red-600":"text-muted-foreground hover:text-foreground"}`,onClick:_=>{_.preventDefault(),_.stopPropagation(),x(f.id,f.user_liked)},"aria-label":f.user_liked?"Unlike blueprint":"Like blueprint",children:i.jsx("span",{className:"text-xs tabular-nums",children:f.likes_count})})]}),f.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1.5",children:f.tags.filter(_=>!s.has(bt(_.slug))).slice(0,4).map(_=>i.jsxs(Me,{variant:"secondary",className:"text-xs cursor-pointer transition-colors border bg-muted/40 text-muted-foreground border-border/60 hover:bg-muted/60",onClick:S=>{S.preventDefault(),S.stopPropagation(),b(_.slug)},children:["#",_.slug]},_.id))}),p.llm_review&&i.jsxs("div",{className:"rounded-xl border border-border/50 bg-muted/20 p-4",children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground mb-2",children:"Review snapshot"}),i.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-line leading-relaxed line-clamp-4",children:iz(p.llm_review)})]}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[i.jsx("span",{children:"Open full blueprint"}),i.jsx("span",{className:"opacity-60",children:"Swipe or tap"})]})]})]})})]}),w&&i.jsx("div",{className:"flex items-center justify-center gap-1",children:h.map((_,S)=>{const j=S===g;return i.jsx("button",{type:"button",className:`h-1.5 w-1.5 rounded-full transition-colors ${j?"bg-primary":"bg-muted-foreground/30 hover:bg-muted-foreground/50"}`,"aria-label":`Go to blueprint ${S+1}`,onClick:()=>c(S)},_.id)})})]}):null}),i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsx(pe,{to:"/explore",children:i.jsxs(F,{className:"gap-2",children:["Explore",i.jsx(qv,{className:"h-4 w-4"})]})}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:ml-auto",children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Popular tags:"}),rz.map(_=>i.jsx(pe,{to:`/explore?tag=${encodeURIComponent(_)}`,children:i.jsxs(Me,{variant:"outline",className:"text-xs bg-muted/40 text-muted-foreground border-border/60 hover:bg-muted/60 cursor-pointer transition-colors",children:["#",_]})},_))]})]})]})}async function oz(){var e;try{const{data:t}=await U.auth.getSession(),r=(e=t.session)==null?void 0:e.access_token;if(r)return`Bearer ${r}`}catch{}return`Bearer ${Ni.supabaseAnonKey}`}async function ac(e,t={}){const r=t.pinnedToEdge?D5(e):au(e),n=await oz(),s=await fetch(r,{method:t.method??"POST",headers:{"Content-Type":"application/json",Authorization:n,...t.headers},body:t.body!=null?JSON.stringify(t.body):void 0,keepalive:t.keepalive});if(!s.ok){const o=await s.text().catch(()=>"");throw new Error(`API ${e} ${s.status}: ${o}`)}if(t.stream)return s;if(s.status===204)return;if((s.headers.get("content-type")??"").includes("application/json"))return s.json()}async function At({eventName:e,userId:t,blueprintId:r,path:n,metadata:s}){if(e)try{await ac("log-event",{body:{event_name:e,user_id:t??null,blueprint_id:r??null,path:n??window.location.pathname,metadata:s??{}},keepalive:!0,pinnedToEdge:!0})}catch{}}function lz(){const{user:e}=Ne(),t=d.useRef(!1);return d.useEffect(()=>{if(t.current)return;t.current=!0;const r=Date.now(),n=localStorage.getItem("mvp_last_visit"),s=n?Number(n):null;s&&!Number.isNaN(s)&&r-s<=6048e5&&At({eventName:"return_visit_7d",userId:e==null?void 0:e.id,path:window.location.pathname}),localStorage.setItem("mvp_last_visit",String(r)),At({eventName:"visit_home",userId:e==null?void 0:e.id,path:window.location.pathname})},[e==null?void 0:e.id]),i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx(vt,{}),i.jsxs("main",{className:"max-w-3xl mx-auto px-3 sm:px-4 py-10 pb-24 space-y-12",children:[i.jsxs("section",{className:"text-center space-y-5 animate-fade-in",children:[i.jsx("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-black tracking-tight",children:i.jsx("span",{className:"text-gradient-themed",style:{fontFamily:"'Impact', 'Haettenschweiler', 'Franklin Gothic Bold', 'Charcoal', sans-serif",letterSpacing:"0.06em"},children:"BLUEPRINTS"})}),i.jsx("p",{className:"text-sm uppercase tracking-widest text-primary/80 font-medium",children:"Create & share recipes for life routines"}),i.jsx("p",{className:"text-base text-muted-foreground max-w-md mx-auto leading-relaxed",children:"Build routines from shared libraries, get AI reviews, and publish your own."}),i.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3 pt-2",children:[i.jsx(pe,{to:"/explore",children:i.jsxs(F,{size:"lg",className:"gap-2",children:["Start Exploring",i.jsx(qv,{className:"h-4 w-4"})]})}),i.jsx(pe,{to:"/wall",children:i.jsxs(F,{size:"lg",variant:"outline",className:"gap-2",children:["Browse the Wall",i.jsx(Br,{className:"h-4 w-4"})]})})]})]}),i.jsx(UB,{}),i.jsx(i8,{}),i.jsx(az,{}),i.jsx(r8,{}),i.jsx(X8,{}),i.jsx(n8,{}),i.jsx(Kr,{})]})]})}function cz(e=10){return De({queryKey:["popular-inventory-tags",e],queryFn:async()=>{const{data:t,error:r}=await U.from("inventory_tags").select("tag_id");if(r)throw r;const n=new Map;(t||[]).forEach(c=>{n.set(c.tag_id,(n.get(c.tag_id)||0)+1)});const s=[...n.entries()].sort((c,u)=>u[1]-c[1]).slice(0,e).map(([c])=>c);if(s.length===0)return[];const{data:a,error:o}=await U.from("tags").select("id, slug").in("id",s);if(o)throw o;return(a||[]).map(c=>({id:c.id,slug:c.slug,count:n.get(c.id)||0})).sort((c,u)=>u.count-c.count)},staleTime:5*60*1e3})}const uz=/^\s{0,3}#{1,6}\s+/,dz=/^\s*(?:[-*+]\s+|\d+\.\s+|\d+\)\s+)/;function hz(e){return e.replace(uz,"").replace(dz,"").replace(/\*\*/g,"").replace(/__/g,"").replace(/`/g,"").trim()}function Pb(e){return e?e.split(`
`).map(n=>hz(n)).filter(Boolean).join(" ").replace(/\s+/g," ").trim():""}function vu({primary:e,secondary:t,fallback:r,maxChars:n=240}){const a=(Pb(e||"")||Pb(t||"")||r).trim();return a.length<=n?a:`${a.slice(0,n).trim()}...`}function yu({items:e,gapPx:t=6,className:r}){const n=d.useRef(null),s=d.useRef({}),[a,o]=d.useState(e.length),l=d.useCallback(()=>{const u=n.current;if(!u||e.length===0){o(0);return}const h=u.clientWidth;let f=0,p=0;for(let m=0;m<e.length;m+=1){const w=e[m],g=s.current[w.key];if(!g)continue;const v=Math.ceil(g.getBoundingClientRect().width),y=p===0?v:f+t+v;if(y<=h)f=y,p+=1;else break}o(p)},[t,e]);d.useLayoutEffect(()=>{l();const u=n.current;if(!u)return;const h=new ResizeObserver(l);return h.observe(u),()=>h.disconnect()},[l]),d.useLayoutEffect(()=>{l()},[e,l]);const c=e.slice(0,a);return c.length===0?null:i.jsxs(i.Fragment,{children:[i.jsx("div",{ref:n,className:r,children:c.map(u=>i.jsx(Me,{variant:u.variant||"outline",className:u.className,onClick:u.onClick,children:u.label},u.key))}),i.jsx("div",{className:"pointer-events-none absolute -left-[9999px] -top-[9999px] opacity-0","aria-hidden":"true",children:i.jsx("div",{className:"flex flex-nowrap",style:{gap:`${t}px`},children:e.map(u=>i.jsx("span",{ref:h=>{s.current[u.key]=h},children:i.jsx(Me,{variant:u.variant||"outline",className:u.className,children:u.label})},u.key))})})]})}const fz={second:"s",seconds:"s",minute:"m",minutes:"m",hour:"h",hours:"h",day:"d",days:"d",week:"w",weeks:"w",month:"mo",months:"mo",year:"y",years:"y"};function kf(e){const t=t8(new Date(e),{roundingMethod:"floor"}),[r,n]=t.split(" "),s=fz[n]||n;return`${r}${s} ago`}function pz(e){var t;return((t=e.find(r=>r.slug==="general"))==null?void 0:t.slug)||"general"}function mz(e){return bt(e.replace(/^#/,""))}function Uc(e,t=qr){const r=pz(t);if(!e||e.length===0)return r;const n=[...new Set(e.map(a=>mz(a)).filter(Boolean))];if(n.length===0)return r;const s=[];return t.forEach(a=>{a.slug!=="general"&&n.forEach(o=>{o===a.tagSlug?s.push({slug:a.slug,priority:a.priority,matchKind:"tag"}):a.aliases.includes(o)&&s.push({slug:a.slug,priority:a.priority,matchKind:"alias"})})}),s.length===0?r:(s.sort((a,o)=>a.matchKind!==o.matchKind?a.matchKind==="tag"?-1:1:a.priority!==o.priority?a.priority-o.priority:a.slug.localeCompare(o.slug)),s[0].slug)}function Cf(e,t=qr){return`b/${Uc(e,t)}`}const gz="p3_step3_v0",Rb="bleu_session_id",vz="bleu_once_";function Ab(){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`sid-${Date.now()}-${Math.random().toString(16).slice(2)}`}function yz(){try{const e=sessionStorage.getItem(Rb);if(e)return e;const t=Ab();return sessionStorage.setItem(Rb,t),t}catch{return Ab()}}function xz(e){return e?"signed_in":"anon"}function PE(e,t){try{const r=`${vz}${e}`;if(sessionStorage.getItem(r))return;sessionStorage.setItem(r,"1")}catch{}t()}function RE(e){const r=(e instanceof Error?e.message:String(e??"")).toLowerCase();if(r.includes("must be logged in")||r.includes("sign in"))return"auth_required";if(e instanceof TypeError||r.includes("failed to fetch")||r.includes("network"))return"network";const n=e==null?void 0:e.code;return typeof n=="string"&&(n.startsWith("23")||n==="409")||r.includes("duplicate")||r.includes("violat")||r.includes("constraint")?"constraint":"unknown"}function Pt({eventName:e,surface:t,user:r,blueprintId:n,metadata:s}){const a={event_version:gz,session_id:yz(),surface:t,auth_state:xz(r),...s??{}};At({eventName:e,userId:(r==null?void 0:r.id)??null,blueprintId:n??null,metadata:a})}var Ef="Popover",[AE,O9]=Nt(Ef,[ji]),xu=ji(),[wz,Ti]=AE(Ef),IE=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:o=!1}=e,l=xu(t),c=d.useRef(null),[u,h]=d.useState(!1),[f,p]=sr({prop:n,defaultProp:s??!1,onChange:a,caller:Ef});return i.jsx(sy,{...l,children:i.jsx(wz,{scope:t,contentId:Mt(),triggerRef:c,open:f,onOpenChange:p,onOpenToggle:d.useCallback(()=>p(m=>!m),[p]),hasCustomAnchor:u,onCustomAnchorAdd:d.useCallback(()=>h(!0),[]),onCustomAnchorRemove:d.useCallback(()=>h(!1),[]),modal:o,children:r})})};IE.displayName=Ef;var OE="PopoverAnchor",bz=d.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Ti(OE,r),a=xu(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return d.useEffect(()=>(o(),()=>l()),[o,l]),i.jsx(nu,{...a,...n,ref:t})});bz.displayName=OE;var ME="PopoverTrigger",DE=d.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Ti(ME,r),a=xu(r),o=Se(t,s.triggerRef),l=i.jsx(se.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":BE(s.open),...n,ref:o,onClick:Z(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:i.jsx(nu,{asChild:!0,...a,children:l})});DE.displayName=ME;var Jy="PopoverPortal",[_z,jz]=AE(Jy,{forceMount:void 0}),LE=e=>{const{__scopePopover:t,forceMount:r,children:n,container:s}=e,a=Ti(Jy,t);return i.jsx(_z,{scope:t,forceMount:r,children:i.jsx(Dt,{present:r||a.open,children:i.jsx(el,{asChild:!0,container:s,children:n})})})};LE.displayName=Jy;var Yo="PopoverContent",$E=d.forwardRef((e,t)=>{const r=jz(Yo,e.__scopePopover),{forceMount:n=r.forceMount,...s}=e,a=Ti(Yo,e.__scopePopover);return i.jsx(Dt,{present:n||a.open,children:a.modal?i.jsx(Nz,{...s,ref:t}):i.jsx(kz,{...s,ref:t})})});$E.displayName=Yo;var Sz=fi("PopoverContent.RemoveScroll"),Nz=d.forwardRef((e,t)=>{const r=Ti(Yo,e.__scopePopover),n=d.useRef(null),s=Se(t,n),a=d.useRef(!1);return d.useEffect(()=>{const o=n.current;if(o)return lf(o)},[]),i.jsx(cu,{as:Sz,allowPinchZoom:!0,children:i.jsx(FE,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Z(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),a.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Z(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Z(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),kz=d.forwardRef((e,t)=>{const r=Ti(Yo,e.__scopePopover),n=d.useRef(!1),s=d.useRef(!1);return i.jsx(FE,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),FE=d.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:h,...f}=e,p=Ti(Yo,r),m=xu(r);return of(),i.jsx(ou,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(ja,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:i.jsx(Zh,{"data-state":BE(p.open),role:"dialog",id:p.contentId,...m,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),UE="PopoverClose",Cz=d.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Ti(UE,r);return i.jsx(se.button,{type:"button",...n,ref:t,onClick:Z(e.onClick,()=>s.onOpenChange(!1))})});Cz.displayName=UE;var Ez="PopoverArrow",Tz=d.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=xu(r);return i.jsx(ef,{...s,...n,ref:t})});Tz.displayName=Ez;function BE(e){return e?"open":"closed"}var Pz=IE,Rz=DE,Az=LE,zE=$E;const Iz=Pz,Oz=Rz,qE=d.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},s)=>i.jsx(Az,{children:i.jsx(zE,{ref:s,align:t,sideOffset:r,className:H("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));qE.displayName=zE.displayName;var Ib=1,Mz=.9,Dz=.8,Lz=.17,Vp=.1,Hp=.999,$z=.9999,Fz=.99,Uz=/[\\\/_+.#"@\[\(\{&]/,Bz=/[\\\/_+.#"@\[\(\{&]/g,zz=/[\s-]/,WE=/[\s-]/g;function Dg(e,t,r,n,s,a,o){if(a===t.length)return s===e.length?Ib:Fz;var l=`${s},${a}`;if(o[l]!==void 0)return o[l];for(var c=n.charAt(a),u=r.indexOf(c,s),h=0,f,p,m,w;u>=0;)f=Dg(e,t,r,n,u+1,a+1,o),f>h&&(u===s?f*=Ib:Uz.test(e.charAt(u-1))?(f*=Dz,m=e.slice(s,u-1).match(Bz),m&&s>0&&(f*=Math.pow(Hp,m.length))):zz.test(e.charAt(u-1))?(f*=Mz,w=e.slice(s,u-1).match(WE),w&&s>0&&(f*=Math.pow(Hp,w.length))):(f*=Lz,s>0&&(f*=Math.pow(Hp,u-s))),e.charAt(u)!==t.charAt(a)&&(f*=$z)),(f<Vp&&r.charAt(u-1)===n.charAt(a+1)||n.charAt(a+1)===n.charAt(a)&&r.charAt(u-1)!==n.charAt(a))&&(p=Dg(e,t,r,n,u+1,a+2,o),p*Vp>f&&(f=p*Vp)),f>h&&(h=f),u=r.indexOf(c,u+1);return o[l]=h,h}function Ob(e){return e.toLowerCase().replace(WE," ")}function qz(e,t,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,Dg(e,t,Ob(e),Ob(t),0,0,{})}var Ol='[cmdk-group=""]',Kp='[cmdk-group-items=""]',Wz='[cmdk-group-heading=""]',VE='[cmdk-item=""]',Mb=`${VE}:not([aria-disabled="true"])`,Lg="cmdk-item-select",Qa="data-value",Vz=(e,t,r)=>qz(e,t,r),HE=d.createContext(void 0),wu=()=>d.useContext(HE),KE=d.createContext(void 0),Xy=()=>d.useContext(KE),GE=d.createContext(void 0),YE=d.forwardRef((e,t)=>{let r=Ja(()=>{var L,Q;return{search:"",value:(Q=(L=e.value)!=null?L:e.defaultValue)!=null?Q:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=Ja(()=>new Set),s=Ja(()=>new Map),a=Ja(()=>new Map),o=Ja(()=>new Set),l=QE(e),{label:c,children:u,value:h,onValueChange:f,filter:p,shouldFilter:m,loop:w,disablePointerSelection:g=!1,vimBindings:v=!0,...y}=e,x=Mt(),b=Mt(),_=Mt(),S=d.useRef(null),j=rq();wa(()=>{if(h!==void 0){let L=h.trim();r.current.value=L,N.emit()}},[h]),wa(()=>{j(6,O)},[]);let N=d.useMemo(()=>({subscribe:L=>(o.current.add(L),()=>o.current.delete(L)),snapshot:()=>r.current,setState:(L,Q,q)=>{var K,te,W,ae;if(!Object.is(r.current[L],Q)){if(r.current[L]=Q,L==="search")M(),E(),j(1,$);else if(L==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let X=document.getElementById(_);X?X.focus():(K=document.getElementById(x))==null||K.focus()}if(j(7,()=>{var X;r.current.selectedItemId=(X=C())==null?void 0:X.id,N.emit()}),q||j(5,O),((te=l.current)==null?void 0:te.value)!==void 0){let X=Q??"";(ae=(W=l.current).onValueChange)==null||ae.call(W,X);return}}N.emit()}},emit:()=>{o.current.forEach(L=>L())}}),[]),k=d.useMemo(()=>({value:(L,Q,q)=>{var K;Q!==((K=a.current.get(L))==null?void 0:K.value)&&(a.current.set(L,{value:Q,keywords:q}),r.current.filtered.items.set(L,R(Q,q)),j(2,()=>{E(),N.emit()}))},item:(L,Q)=>(n.current.add(L),Q&&(s.current.has(Q)?s.current.get(Q).add(L):s.current.set(Q,new Set([L]))),j(3,()=>{M(),E(),r.current.value||$(),N.emit()}),()=>{a.current.delete(L),n.current.delete(L),r.current.filtered.items.delete(L);let q=C();j(4,()=>{M(),(q==null?void 0:q.getAttribute("id"))===L&&$(),N.emit()})}),group:L=>(s.current.has(L)||s.current.set(L,new Set),()=>{a.current.delete(L),s.current.delete(L)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:x,inputId:_,labelId:b,listInnerRef:S}),[]);function R(L,Q){var q,K;let te=(K=(q=l.current)==null?void 0:q.filter)!=null?K:Vz;return L?te(L,r.current.search,Q):0}function E(){if(!r.current.search||l.current.shouldFilter===!1)return;let L=r.current.filtered.items,Q=[];r.current.filtered.groups.forEach(K=>{let te=s.current.get(K),W=0;te.forEach(ae=>{let X=L.get(ae);W=Math.max(X,W)}),Q.push([K,W])});let q=S.current;D().sort((K,te)=>{var W,ae;let X=K.getAttribute("id"),le=te.getAttribute("id");return((W=L.get(le))!=null?W:0)-((ae=L.get(X))!=null?ae:0)}).forEach(K=>{let te=K.closest(Kp);te?te.appendChild(K.parentElement===te?K:K.closest(`${Kp} > *`)):q.appendChild(K.parentElement===q?K:K.closest(`${Kp} > *`))}),Q.sort((K,te)=>te[1]-K[1]).forEach(K=>{var te;let W=(te=S.current)==null?void 0:te.querySelector(`${Ol}[${Qa}="${encodeURIComponent(K[0])}"]`);W==null||W.parentElement.appendChild(W)})}function $(){let L=D().find(q=>q.getAttribute("aria-disabled")!=="true"),Q=L==null?void 0:L.getAttribute(Qa);N.setState("value",Q||void 0)}function M(){var L,Q,q,K;if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let te=0;for(let W of n.current){let ae=(Q=(L=a.current.get(W))==null?void 0:L.value)!=null?Q:"",X=(K=(q=a.current.get(W))==null?void 0:q.keywords)!=null?K:[],le=R(ae,X);r.current.filtered.items.set(W,le),le>0&&te++}for(let[W,ae]of s.current)for(let X of ae)if(r.current.filtered.items.get(X)>0){r.current.filtered.groups.add(W);break}r.current.filtered.count=te}function O(){var L,Q,q;let K=C();K&&(((L=K.parentElement)==null?void 0:L.firstChild)===K&&((q=(Q=K.closest(Ol))==null?void 0:Q.querySelector(Wz))==null||q.scrollIntoView({block:"nearest"})),K.scrollIntoView({block:"nearest"}))}function C(){var L;return(L=S.current)==null?void 0:L.querySelector(`${VE}[aria-selected="true"]`)}function D(){var L;return Array.from(((L=S.current)==null?void 0:L.querySelectorAll(Mb))||[])}function I(L){let Q=D()[L];Q&&N.setState("value",Q.getAttribute(Qa))}function z(L){var Q;let q=C(),K=D(),te=K.findIndex(ae=>ae===q),W=K[te+L];(Q=l.current)!=null&&Q.loop&&(W=te+L<0?K[K.length-1]:te+L===K.length?K[0]:K[te+L]),W&&N.setState("value",W.getAttribute(Qa))}function A(L){let Q=C(),q=Q==null?void 0:Q.closest(Ol),K;for(;q&&!K;)q=L>0?eq(q,Ol):tq(q,Ol),K=q==null?void 0:q.querySelector(Mb);K?N.setState("value",K.getAttribute(Qa)):z(L)}let P=()=>I(D().length-1),V=L=>{L.preventDefault(),L.metaKey?P():L.altKey?A(1):z(1)},J=L=>{L.preventDefault(),L.metaKey?I(0):L.altKey?A(-1):z(-1)};return d.createElement(se.div,{ref:t,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:L=>{var Q;(Q=y.onKeyDown)==null||Q.call(y,L);let q=L.nativeEvent.isComposing||L.keyCode===229;if(!(L.defaultPrevented||q))switch(L.key){case"n":case"j":{v&&L.ctrlKey&&V(L);break}case"ArrowDown":{V(L);break}case"p":case"k":{v&&L.ctrlKey&&J(L);break}case"ArrowUp":{J(L);break}case"Home":{L.preventDefault(),I(0);break}case"End":{L.preventDefault(),P();break}case"Enter":{L.preventDefault();let K=C();if(K){let te=new Event(Lg);K.dispatchEvent(te)}}}}},d.createElement("label",{"cmdk-label":"",htmlFor:k.inputId,id:k.labelId,style:sq},c),Tf(e,L=>d.createElement(KE.Provider,{value:N},d.createElement(HE.Provider,{value:k},L))))}),Hz=d.forwardRef((e,t)=>{var r,n;let s=Mt(),a=d.useRef(null),o=d.useContext(GE),l=wu(),c=QE(e),u=(n=(r=c.current)==null?void 0:r.forceMount)!=null?n:o==null?void 0:o.forceMount;wa(()=>{if(!u)return l.item(s,o==null?void 0:o.id)},[u]);let h=JE(s,a,[e.value,e.children,a],e.keywords),f=Xy(),p=xi(j=>j.value&&j.value===h.current),m=xi(j=>u||l.filter()===!1?!0:j.search?j.filtered.items.get(s)>0:!0);d.useEffect(()=>{let j=a.current;if(!(!j||e.disabled))return j.addEventListener(Lg,w),()=>j.removeEventListener(Lg,w)},[m,e.onSelect,e.disabled]);function w(){var j,N;g(),(N=(j=c.current).onSelect)==null||N.call(j,h.current)}function g(){f.setState("value",h.current,!0)}if(!m)return null;let{disabled:v,value:y,onSelect:x,forceMount:b,keywords:_,...S}=e;return d.createElement(se.div,{ref:vs(a,t),...S,id:s,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!p,"data-disabled":!!v,"data-selected":!!p,onPointerMove:v||l.getDisablePointerSelection()?void 0:g,onClick:v?void 0:w},e.children)}),Kz=d.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:s,...a}=e,o=Mt(),l=d.useRef(null),c=d.useRef(null),u=Mt(),h=wu(),f=xi(m=>s||h.filter()===!1?!0:m.search?m.filtered.groups.has(o):!0);wa(()=>h.group(o),[]),JE(o,l,[e.value,e.heading,c]);let p=d.useMemo(()=>({id:o,forceMount:s}),[s]);return d.createElement(se.div,{ref:vs(l,t),...a,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},r&&d.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},r),Tf(e,m=>d.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?u:void 0},d.createElement(GE.Provider,{value:p},m))))}),Gz=d.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,s=d.useRef(null),a=xi(o=>!o.search);return!r&&!a?null:d.createElement(se.div,{ref:vs(s,t),...n,"cmdk-separator":"",role:"separator"})}),Yz=d.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,s=e.value!=null,a=Xy(),o=xi(u=>u.search),l=xi(u=>u.selectedItemId),c=wu();return d.useEffect(()=>{e.value!=null&&a.setState("search",e.value)},[e.value]),d.createElement(se.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:s?e.value:o,onChange:u=>{s||a.setState("search",u.target.value),r==null||r(u.target.value)}})}),Qz=d.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...s}=e,a=d.useRef(null),o=d.useRef(null),l=xi(u=>u.selectedItemId),c=wu();return d.useEffect(()=>{if(o.current&&a.current){let u=o.current,h=a.current,f,p=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let m=u.offsetHeight;h.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return p.observe(u),()=>{cancelAnimationFrame(f),p.unobserve(u)}}},[]),d.createElement(se.div,{ref:vs(a,t),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":n,id:c.listId},Tf(e,u=>d.createElement("div",{ref:vs(o,c.listInnerRef),"cmdk-list-sizer":""},u)))}),Jz=d.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:s,contentClassName:a,container:o,...l}=e;return d.createElement(pf,{open:r,onOpenChange:n},d.createElement(mf,{container:o},d.createElement(hl,{"cmdk-overlay":"",className:s}),d.createElement(fl,{"aria-label":e.label,"cmdk-dialog":"",className:a},d.createElement(YE,{ref:t,...l}))))}),Xz=d.forwardRef((e,t)=>xi(r=>r.filtered.count===0)?d.createElement(se.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Zz=d.forwardRef((e,t)=>{let{progress:r,children:n,label:s="Loading...",...a}=e;return d.createElement(se.div,{ref:t,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},Tf(e,o=>d.createElement("div",{"aria-hidden":!0},o)))}),Pr=Object.assign(YE,{List:Qz,Item:Hz,Input:Yz,Group:Kz,Separator:Gz,Dialog:Jz,Empty:Xz,Loading:Zz});function eq(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function tq(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function QE(e){let t=d.useRef(e);return wa(()=>{t.current=e}),t}var wa=typeof window>"u"?d.useEffect:d.useLayoutEffect;function Ja(e){let t=d.useRef();return t.current===void 0&&(t.current=e()),t}function xi(e){let t=Xy(),r=()=>e(t.snapshot());return d.useSyncExternalStore(t.subscribe,r,r)}function JE(e,t,r,n=[]){let s=d.useRef(),a=wu();return wa(()=>{var o;let l=(()=>{var u;for(let h of r){if(typeof h=="string")return h.trim();if(typeof h=="object"&&"current"in h)return h.current?(u=h.current.textContent)==null?void 0:u.trim():s.current}})(),c=n.map(u=>u.trim());a.value(e,l,c),(o=t.current)==null||o.setAttribute(Qa,l),s.current=l}),s}var rq=()=>{let[e,t]=d.useState(),r=Ja(()=>new Map);return wa(()=>{r.current.forEach(n=>n()),r.current=new Map},[e]),(n,s)=>{r.current.set(n,s),t({})}};function nq(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Tf({asChild:e,children:t},r){return e&&d.isValidElement(t)?d.cloneElement(nq(t),{ref:t.ref},r(t.props.children)):r(t)}var sq={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const XE=d.forwardRef(({className:e,...t},r)=>i.jsx(Pr,{ref:r,className:H("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));XE.displayName=Pr.displayName;const ZE=d.forwardRef(({className:e,...t},r)=>i.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[i.jsx(Na,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),i.jsx(Pr.Input,{ref:r,className:H("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));ZE.displayName=Pr.Input.displayName;const e2=d.forwardRef(({className:e,...t},r)=>i.jsx(Pr.List,{ref:r,className:H("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));e2.displayName=Pr.List.displayName;const t2=d.forwardRef((e,t)=>i.jsx(Pr.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));t2.displayName=Pr.Empty.displayName;const r2=d.forwardRef(({className:e,...t},r)=>i.jsx(Pr.Group,{ref:r,className:H("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));r2.displayName=Pr.Group.displayName;const iq=d.forwardRef(({className:e,...t},r)=>i.jsx(Pr.Separator,{ref:r,className:H("-mx-1 h-px bg-border",e),...t}));iq.displayName=Pr.Separator.displayName;const n2=d.forwardRef(({className:e,...t},r)=>i.jsx(Pr.Item,{ref:r,className:H("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));n2.displayName=Pr.Item.displayName;const aq=[{value:"latest",label:"Latest"},{value:"trending",label:"Trending"}],Va="for-you",Ha="all";function oq(){const{user:e,isLoading:t}=Ne(),{toast:r}=St(),n=ir(),[s,a]=d.useState(!1),[o,l]=d.useState(Ha),[c,u]=d.useState("latest"),[h,f]=d.useState(null);d.useEffect(()=>{t||l(C=>e?C===Ha?Va:C:C===Va?Ha:C)},[t,e]);const{data:p=[]}=cz(6),{followedTags:m}=Pa(),w=d.useMemo(()=>new Set(qr.filter(C=>C.isJoinEnabled&&C.status==="active").map(C=>C.tagSlug)),[]),g=d.useMemo(()=>m.filter(C=>w.has(bt(C.slug))).length,[w,m]),v=!e&&o===Va?Ha:o,y=v===Va&&!!e,x=C=>{f(D=>{const I=D===C?null:C;return I&&Pt({eventName:"wall_tag_filter_used",surface:"wall",user:e,metadata:{tab:v,tag_slug:bt(I)}}),I})},b=["wall-blueprints",v,c,e==null?void 0:e.id],{data:_,isLoading:S}=De({queryKey:b,queryFn:async()=>{const C=v!==Ha&&v!==Va?qr.find(me=>me.slug===v):null,D=!!C,I=y||D?140:90;let z=U.from("blueprints").select("id, creator_user_id, title, selected_items, llm_review, banner_url, likes_count, created_at").eq("is_public",!0).limit(I);if(c==="trending"){const me=new Date;me.setDate(me.getDate()-3),z=z.gte("created_at",me.toISOString()).order("likes_count",{ascending:!1}).order("created_at",{ascending:!1})}else z=z.order("created_at",{ascending:!1});const{data:A,error:P}=await z;if(P)throw P;if(!A||A.length===0)return[];const V=A.map(me=>me.id),J=[...new Set(A.map(me=>me.creator_user_id))],[L,Q,q]=await Promise.all([U.from("blueprint_tags").select("blueprint_id, tag_id").in("blueprint_id",V),e?U.from("blueprint_likes").select("blueprint_id").eq("user_id",e.id).in("blueprint_id",V):Promise.resolve({data:[]}),U.from("profiles").select("user_id, display_name, avatar_url").in("user_id",J)]),K=L.data||[],te=[...new Set(K.map(me=>me.tag_id))],{data:W}=te.length>0?await U.from("tags").select("id, slug").in("id",te):{data:[]},ae=new Map((W||[]).map(me=>[me.id,me])),X=new Map;K.forEach(me=>{const nt=ae.get(me.tag_id);if(!nt)return;const Ae=X.get(me.blueprint_id)||[];Ae.push(nt),X.set(me.blueprint_id,Ae)});const le=new Set((Q.data||[]).map(me=>me.blueprint_id)),ue=new Map((q.data||[]).map(me=>[me.user_id,me]));let ve=new Set;if(y){const me=await U.from("tag_follows").select("tag_id").eq("user_id",e.id);ve=new Set((me.data||[]).map(nt=>nt.tag_id))}const Ve=A.map(me=>({...me,profile:ue.get(me.creator_user_id)||{display_name:null,avatar_url:null},tags:X.get(me.id)||[],user_liked:le.has(me.id)}));if(D&&C)return Ve.filter(me=>resolvePrimaryChannelFromTags(me.tags.map(Ae=>Ae.slug))===C.slug);if(y){if(ve.size===0)return Ve;const me=[],nt=[];return Ve.forEach(Ae=>{Ae.tags.some(kt=>ve.has(kt.id))?me.push(Ae):nt.push(Ae)}),[...me,...nt]}return Ve}}),j=d.useMemo(()=>(_||[]).map(C=>C.id),[_]),{data:N={}}=De({queryKey:["wall-blueprint-comment-counts",j],enabled:j.length>0,staleTime:3e4,queryFn:async()=>{const{data:C,error:D}=await U.from("blueprint_comments").select("blueprint_id").in("blueprint_id",j);if(D)throw D;return(C||[]).reduce((I,z)=>(I[z.blueprint_id]=(I[z.blueprint_id]||0)+1,I),{})}}),k=$t({mutationFn:async({blueprintId:C,liked:D})=>{if(!e)throw new Error("Must be logged in");D?await U.from("blueprint_likes").delete().eq("blueprint_id",C).eq("user_id",e.id):await U.from("blueprint_likes").insert({blueprint_id:C,user_id:e.id})},onMutate:async({blueprintId:C,liked:D})=>{await n.cancelQueries({queryKey:b});const I=n.getQueryData(b);return n.setQueryData(b,z=>z==null?void 0:z.map(A=>A.id===C?{...A,user_liked:!D,likes_count:D?A.likes_count-1:A.likes_count+1}:A)),{previousPosts:I}},onError:(C,D,I)=>{n.setQueryData(b,I==null?void 0:I.previousPosts),r({title:"Error",description:"Failed to update like. Please try again.",variant:"destructive"})}}),R=(C,D)=>{if(!e){r({title:"Sign in required",description:"Please sign in to like blueprints."});return}k.mutate({blueprintId:C,liked:D})},E=!!e&&y&&g===0;d.useEffect(()=>{E&&PE("p3_wall_zero_join_cta_impression",()=>{Pt({eventName:"wall_zero_join_cta_impression",surface:"wall",user:e,metadata:{tab:v,joined_channels_count:0}})})},[v,E,e]);const $=d.useMemo(()=>_?h?_.filter(C=>C.tags.some(D=>D.slug===h)):_:[],[_,h]),M=d.useMemo(()=>{const C=e?[{value:Va,label:"For You",icon:Br}]:[],D={value:Ha,label:"All Channels",icon:tO},I=qr.filter(z=>z.status==="active").sort((z,A)=>z.priority-A.priority).map(z=>({value:z.slug,label:`b/${z.slug}`,icon:$c(z.icon),channel:z}));return[...C,D,...I]},[e]),O=d.useMemo(()=>M.find(C=>C.value===v)||M[0],[v,M]);return t?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})}):i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx(vt,{}),i.jsxs("main",{className:"max-w-3xl mx-auto px-0 pb-24",children:[i.jsx("section",{className:"mb-6 px-3 sm:px-4",children:i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:"Community Feed"}),i.jsx("h1",{className:"text-2xl font-semibold",children:"See what the community is building"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Browse public blueprints, join channels you care about, and save ideas for your next routine."})]})}),!e&&i.jsx("div",{className:"mb-6 mx-3 sm:mx-4 border border-border/40 px-3 py-4",children:i.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[i.jsx("p",{className:"text-sm font-semibold",children:"Sign in to personalize"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Join channels to shape your feed, then follow creators you trust."}),i.jsx("div",{className:"flex justify-center",children:i.jsx(pe,{to:"/auth",children:i.jsx(F,{size:"sm",children:"Sign in"})})})]})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"px-3 sm:px-4 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs(Iz,{open:s,onOpenChange:a,children:[i.jsx(Oz,{asChild:!0,children:i.jsxs(F,{variant:"outline",size:"sm",role:"combobox",className:"w-full sm:w-72 justify-between",children:[i.jsxs("span",{className:"inline-flex items-center gap-2 truncate",children:[(O==null?void 0:O.icon)&&i.jsx(O.icon,{className:"h-4 w-4 shrink-0"}),i.jsx("span",{className:"truncate",children:(O==null?void 0:O.label)||"Select scope"})]}),i.jsx(GI,{className:"h-4 w-4 shrink-0 opacity-60"})]})}),i.jsx(qE,{className:"w-[320px] p-0",align:"start",children:i.jsxs(XE,{children:[i.jsx(ZE,{placeholder:"Search channels..."}),i.jsxs(e2,{children:[i.jsx(t2,{children:"No channels found."}),i.jsx(r2,{children:M.map(C=>i.jsxs(n2,{value:`${C.label} ${C.value}`,onSelect:()=>{l(C.value),a(!1)},className:"flex items-center gap-2",children:[i.jsx(C.icon,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"truncate",children:C.label}),i.jsx(rl,{className:H("ml-auto h-4 w-4",v===C.value?"opacity-100":"opacity-0")})]},C.value))})]})]})})]}),i.jsx(Aa,{value:c,onValueChange:C=>u(C),children:i.jsx(ki,{className:"h-9 w-full sm:w-fit rounded-md bg-muted/40 p-0.5",children:aq.map(C=>i.jsx(Sr,{value:C.value,className:"flex-1 sm:flex-none",children:C.label},C.value))})})]}),i.jsxs("div",{className:"mt-0",children:[h&&i.jsxs("div",{className:"mb-3 mx-3 sm:mx-4 border border-border/40 px-3 py-2 flex items-center justify-between gap-2",children:[i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Filtered by ",i.jsx("span",{className:"font-semibold text-foreground",children:h})]}),i.jsx(F,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>f(null),children:"Clear"})]}),E&&i.jsxs("div",{className:"mb-3 mx-3 sm:mx-4 border border-border/40 px-3 py-3 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold",children:"Join channels to shape your feed"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Start with a few channels and your For You feed will prioritize those lanes."})]}),i.jsx(F,{asChild:!0,size:"sm",children:i.jsx(pe,{to:"/channels",onClick:()=>{Pt({eventName:"wall_zero_join_cta_click",surface:"wall",user:e,metadata:{tab:v}})},children:"Explore Channels"})})]}),S?Array.from({length:3}).map((C,D)=>i.jsxs("div",{className:"px-3 sm:px-4 py-4 border-t border-border/40 first:border-t-0",children:[i.jsxs("div",{className:"flex flex-row items-center gap-3 mb-3",children:[i.jsx(je,{className:"h-10 w-10 rounded-full"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(je,{className:"h-4 w-24"}),i.jsx(je,{className:"h-3 w-16"})]})]}),i.jsx(je,{className:"h-20 w-full"})]},D)):$.length>0?i.jsx("div",{className:"divide-y divide-border/40",children:$.map(C=>{const D=vu({primary:C.llm_review,fallback:"Open to view the full step-by-step guide.",maxChars:220}),I=Cf(C.tags.map(P=>P.slug)),z=kf(C.created_at),A=N[C.id]||0;return i.jsx(pe,{to:`/blueprint/${C.id}`,className:"block px-3 py-2.5 transition-colors hover:bg-muted/20",children:i.jsxs("div",{className:"relative overflow-hidden",children:[!!C.banner_url&&i.jsxs(i.Fragment,{children:[i.jsx("img",{src:C.banner_url,alt:"",className:"absolute inset-0 h-full w-full object-cover opacity-35",loading:"lazy"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-background/35 via-background/60 to-background/80"})]}),i.jsxs("div",{className:"relative space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("p",{className:"text-[11px] font-semibold tracking-wide text-foreground/75",children:I}),i.jsx("span",{className:"text-[11px] text-muted-foreground",children:z})]}),i.jsx("h3",{className:"text-base font-semibold leading-tight",children:C.title}),i.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:D}),C.tags.length>0&&i.jsx(yu,{className:"flex flex-nowrap gap-1.5 overflow-hidden",items:C.tags.map(P=>({key:P.id,label:P.slug,variant:"outline",className:"text-xs transition-colors border bg-muted/40 text-muted-foreground border-border/60"}))}),i.jsxs("div",{className:"flex items-center gap-1.5 pt-1 text-xs text-muted-foreground",children:[i.jsxs(F,{variant:"ghost",size:"sm",className:`h-7 px-2 ${C.user_liked?"text-red-500":""}`,onClick:P=>{P.preventDefault(),R(C.id,C.user_liked)},children:[i.jsx(Kt,{className:`h-4 w-4 mr-1 ${C.user_liked?"fill-current":""}`}),C.likes_count]}),i.jsxs("span",{className:"inline-flex h-7 items-center gap-1 px-2",children:[i.jsx(Kh,{className:"h-4 w-4"}),A]}),i.jsx(F,{variant:"ghost",size:"sm",className:"h-7 px-2",disabled:!0,onClick:P=>P.preventDefault(),children:i.jsx(Gh,{className:"h-4 w-4"})})]})]})]})},C.id)})}):i.jsx(Oe,{className:"text-center py-12",children:i.jsx(Be,{children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center",children:y?i.jsx(nS,{className:"h-8 w-8 text-muted-foreground"}):i.jsx(ai,{className:"h-8 w-8 text-muted-foreground"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:y?"Personalize your feed":"No blueprints yet"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:y?"Join channels to see related blueprints here.":"Be the first to share a blueprint."})]}),y&&p.length>0&&i.jsxs("div",{className:"space-y-3 w-full max-w-md",children:[!e&&i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign in to join channels and personalize this feed."}),i.jsx(pe,{to:"/auth",children:i.jsx(F,{size:"sm",children:"Sign in"})})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Popular topics:"}),i.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:p.map(C=>i.jsx(Me,{variant:"secondary",className:"gap-1.5 bg-muted/40 text-muted-foreground border border-border/60 cursor-pointer hover:bg-muted/60",onClick:()=>x(C.slug),children:C.slug},C.id))}),i.jsx(F,{asChild:!0,variant:"outline",size:"sm",children:i.jsx(pe,{to:"/channels",children:"Join Channels"})})]}),!y&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx(pe,{to:"/inventory",children:i.jsx(F,{children:"Create Blueprint"})}),i.jsx(pe,{to:"/channels",children:i.jsx(F,{variant:"outline",children:"Explore Channels"})})]})]})})})]})]}),i.jsx(Kr,{})]})]})}function s2(e){const{user:t}=Ne();return De({queryKey:["is-following",t==null?void 0:t.id,e],queryFn:async()=>{if(!t||!e||t.id===e)return!1;const{data:r,error:n}=await U.from("user_follows").select("id").eq("follower_id",t.id).eq("following_id",e).maybeSingle();if(n)throw n;return!!r},enabled:!!t&&!!e&&t.id!==e})}function i2(){const{user:e}=Ne(),t=ir();return $t({mutationFn:async r=>{if(!e)throw new Error("Must be logged in");if(e.id===r)throw new Error("Cannot follow yourself");const{error:n}=await U.from("user_follows").insert({follower_id:e.id,following_id:r});if(n)throw n},onSuccess:(r,n)=>{t.invalidateQueries({queryKey:["is-following",e==null?void 0:e.id,n]}),t.invalidateQueries({queryKey:["user-profile",n]}),t.invalidateQueries({queryKey:["user-followers",n]}),t.invalidateQueries({queryKey:["user-following",e==null?void 0:e.id]})}})}function a2(){const{user:e}=Ne(),t=ir();return $t({mutationFn:async r=>{if(!e)throw new Error("Must be logged in");const{error:n}=await U.from("user_follows").delete().eq("follower_id",e.id).eq("following_id",r);if(n)throw n},onSuccess:(r,n)=>{t.invalidateQueries({queryKey:["is-following",e==null?void 0:e.id,n]}),t.invalidateQueries({queryKey:["user-profile",n]}),t.invalidateQueries({queryKey:["user-followers",n]}),t.invalidateQueries({queryKey:["user-following",e==null?void 0:e.id]})}})}function lq(e){return De({queryKey:["user-followers",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await U.from("user_follows").select("follower_id").eq("following_id",e);if(r)throw r;if(!t||t.length===0)return[];const n=t.map(o=>o.follower_id),{data:s,error:a}=await U.from("profiles").select("user_id, display_name, avatar_url").in("user_id",n);if(a)throw a;return s||[]},enabled:!!e})}function cq(e){return De({queryKey:["user-following",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await U.from("user_follows").select("following_id").eq("follower_id",e);if(r)throw r;if(!t||t.length===0)return[];const n=t.map(o=>o.following_id),{data:s,error:a}=await U.from("profiles").select("user_id, display_name, avatar_url").in("user_id",n);if(a)throw a;return s||[]},enabled:!!e})}function uq({userId:e,displayName:t,avatarUrl:r,followerCount:n}){const{user:s}=Ne(),{data:a,isLoading:o}=s2(e),l=i2(),c=a2(),u=(s==null?void 0:s.id)===e,h=l.isPending||c.isPending,f=p=>{p.preventDefault(),p.stopPropagation(),s&&(a?c.mutate(e):l.mutate(e))};return i.jsx(Oe,{className:"p-3 hover:shadow-soft-md transition-all",children:i.jsxs(pe,{to:`/u/${e}`,className:"flex items-center gap-3",children:[i.jsxs(Kn,{className:"h-8 w-8",children:[i.jsx(Gn,{src:r||void 0,alt:t||"User"}),i.jsx(Yn,{className:"bg-muted",children:i.jsx(Hm,{className:"h-4 w-4 text-muted-foreground"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-sm truncate",children:t||"Anonymous"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[n," ",n===1?"follower":"followers"]})]}),s&&!u&&i.jsx(F,{variant:a?"outline":"default",size:"sm",onClick:f,disabled:h||o,className:"shrink-0",children:a?"Unfollow":"Follow"})]})})}function dq({result:e,commentCountByBlueprintId:t}){const r=vu({primary:e.llmReview,secondary:e.mixNotes,fallback:"Open to view the full step-by-step guide.",maxChars:190}),n=Cf(e.tags),s=new Set(Ra().map(bt)),a=e.tags.filter(u=>!s.has(bt(u))),o=kf(e.createdAt),l=(t==null?void 0:t[e.id])||0,c=!!e.bannerUrl;return i.jsx(pe,{to:`/blueprint/${e.id}`,children:i.jsx(Oe,{className:"p-3 border-border/40 bg-transparent rounded-sm hover:bg-muted/10 transition-colors shadow-none",children:i.jsxs("div",{className:"relative",children:[c&&i.jsxs(i.Fragment,{children:[i.jsx("img",{src:e.bannerUrl,alt:"",className:"absolute inset-0 h-full w-full object-cover opacity-35",loading:"lazy"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-background/35 via-background/60 to-background/80"})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[i.jsx("p",{className:"text-[11px] font-semibold tracking-wide text-foreground/75",children:n}),i.jsx("span",{className:"text-[11px] text-muted-foreground",children:o})]}),i.jsx("h3",{className:"font-semibold text-base leading-tight line-clamp-2 mb-1",children:e.title}),i.jsx("p",{className:"text-xs text-muted-foreground line-clamp-3 mb-2",children:r}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mb-2",children:[i.jsxs("span",{className:"inline-flex h-7 items-center gap-1 px-2",children:[i.jsx(Kt,{className:"h-3.5 w-3.5"}),e.likesCount]}),i.jsxs("span",{className:"inline-flex h-7 items-center gap-1 px-2",children:[i.jsx(Kh,{className:"h-3.5 w-3.5"}),l]}),i.jsx(F,{variant:"ghost",size:"sm",className:"h-7 px-2",disabled:!0,children:i.jsx(Gh,{className:"h-3.5 w-3.5"})})]}),a.length>0&&i.jsx(yu,{className:"flex flex-nowrap gap-1 overflow-hidden",items:a.map(u=>({key:u,label:u,variant:"secondary",className:"text-xs transition-colors border bg-muted/40 text-muted-foreground border-border/60"}))})]})]})})})}function hq({result:e}){const t=vu({primary:e.promptCategories,fallback:"Open to view the full step-by-step guide.",maxChars:190}),r=Cf(e.tags),n=new Set(Ra().map(bt)),s=e.tags.filter(o=>!n.has(bt(o))),a=kf(e.createdAt);return i.jsx(pe,{to:`/inventory/${e.id}`,children:i.jsxs(Oe,{className:"p-3 border-border/40 bg-transparent rounded-sm hover:bg-muted/10 transition-colors shadow-none",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[i.jsx("p",{className:"text-[11px] font-semibold tracking-wide text-foreground/75",children:r}),i.jsx("span",{className:"text-[11px] text-muted-foreground",children:a})]}),i.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[i.jsx("h3",{className:"font-semibold text-base leading-tight line-clamp-2",children:e.title}),i.jsx(ai,{className:"h-4 w-4 text-muted-foreground shrink-0 mt-0.5"})]}),i.jsx("p",{className:"text-xs text-muted-foreground line-clamp-3 mb-2",children:t}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mb-2",children:[i.jsxs("span",{className:"inline-flex h-7 items-center gap-1 px-2",children:[i.jsx(Kt,{className:"h-3.5 w-3.5"}),e.likesCount]}),i.jsx(F,{variant:"ghost",size:"sm",className:"h-7 px-2",disabled:!0,children:i.jsx(Gh,{className:"h-3.5 w-3.5"})})]}),s.length>0&&i.jsx(yu,{className:"flex flex-nowrap gap-1 overflow-hidden",items:s.map(o=>({key:o,label:o,variant:"secondary",className:"text-xs transition-colors border bg-muted/40 text-muted-foreground border-border/60"}))})]})})}function fq({result:e}){return i.jsx(uq,{userId:e.userId,displayName:e.displayName,avatarUrl:e.avatarUrl,followerCount:e.followerCount})}function sd({result:e,commentCountByBlueprintId:t}){switch(e.type){case"blueprint":return i.jsx(dq,{result:e,commentCountByBlueprintId:t});case"inventory":return i.jsx(hq,{result:e});case"user":return i.jsx(fq,{result:e});default:return null}}async function o2(e,t){const r=bt(e.replace(/^#/,""));if(t&&r){const{data:p}=await U.from("tags").select("id").ilike("slug",`%${r}%`);if(!p||p.length===0)return[];const m=p.map(_=>_.id),{data:w}=await U.from("blueprint_tags").select("blueprint_id").in("tag_id",m);if(!w||w.length===0)return[];const g=[...new Set(w.map(_=>_.blueprint_id))],{data:v,error:y}=await U.from("blueprints").select("id, title, selected_items, llm_review, mix_notes, banner_url, likes_count, creator_user_id, created_at").eq("is_public",!0).in("id",g).order("likes_count",{ascending:!1}).limit(20);if(y||!v)return[];const{data:x}=await U.from("blueprint_tags").select("blueprint_id, tags(slug)").in("blueprint_id",g),b=new Map;return x==null||x.forEach(_=>{const S=b.get(_.blueprint_id)||[];_.tags&&typeof _.tags=="object"&&"slug"in _.tags&&S.push(_.tags.slug),b.set(_.blueprint_id,S)}),v.map(_=>({type:"blueprint",id:_.id,title:_.title,selectedItems:_.selected_items,llmReview:_.llm_review,mixNotes:_.mix_notes,bannerUrl:_.banner_url,likesCount:_.likes_count,creatorUserId:_.creator_user_id,createdAt:_.created_at,tags:b.get(_.id)||[]}))}const{data:n,error:s}=await U.from("blueprints").select("id, title, selected_items, llm_review, mix_notes, banner_url, likes_count, creator_user_id, created_at").eq("is_public",!0).ilike("title",`%${e}%`).order("likes_count",{ascending:!1}).limit(20);if(s||!n)return[];const a=n.map(p=>p.id),{data:o}=await U.from("blueprint_tags").select("blueprint_id, tags(slug)").in("blueprint_id",a),l=new Map;o==null||o.forEach(p=>{const m=l.get(p.blueprint_id)||[];p.tags&&typeof p.tags=="object"&&"slug"in p.tags&&m.push(p.tags.slug),l.set(p.blueprint_id,m)});const c=n.map(p=>({type:"blueprint",id:p.id,title:p.title,selectedItems:p.selected_items,llmReview:p.llm_review,mixNotes:p.mix_notes,bannerUrl:p.banner_url,likesCount:p.likes_count,creatorUserId:p.creator_user_id,createdAt:p.created_at,tags:l.get(p.id)||[]}));if(!r)return c;const u=await o2(`#${r}`,!0);if(u.length===0)return c;const h=new Set(c.map(p=>p.id)),f=u.filter(p=>!h.has(p.id));return[...c,...f]}async function l2(e,t){const r=bt(e.replace(/^#/,""));if(t&&r){const{data:p}=await U.from("tags").select("id").ilike("slug",`%${r}%`);if(!p||p.length===0)return[];const m=p.map(_=>_.id),{data:w}=await U.from("inventory_tags").select("inventory_id").in("tag_id",m);if(!w||w.length===0)return[];const g=[...new Set(w.map(_=>_.inventory_id))],{data:v,error:y}=await U.from("inventories").select("id, title, prompt_categories, likes_count, creator_user_id, created_at").eq("is_public",!0).in("id",g).order("likes_count",{ascending:!1}).limit(20);if(y||!v)return[];const{data:x}=await U.from("inventory_tags").select("inventory_id, tags(slug)").in("inventory_id",g),b=new Map;return x==null||x.forEach(_=>{const S=b.get(_.inventory_id)||[];_.tags&&typeof _.tags=="object"&&"slug"in _.tags&&S.push(_.tags.slug),b.set(_.inventory_id,S)}),v.map(_=>({type:"inventory",id:_.id,title:_.title,promptCategories:_.prompt_categories,likesCount:_.likes_count,creatorUserId:_.creator_user_id,createdAt:_.created_at,tags:b.get(_.id)||[]}))}const{data:n,error:s}=await U.from("inventories").select("id, title, prompt_categories, likes_count, creator_user_id, created_at").eq("is_public",!0).ilike("title",`%${e}%`).order("likes_count",{ascending:!1}).limit(20);if(s||!n)return[];const a=n.map(p=>p.id),{data:o}=await U.from("inventory_tags").select("inventory_id, tags(slug)").in("inventory_id",a),l=new Map;o==null||o.forEach(p=>{const m=l.get(p.inventory_id)||[];p.tags&&typeof p.tags=="object"&&"slug"in p.tags&&m.push(p.tags.slug),l.set(p.inventory_id,m)});const c=n.map(p=>({type:"inventory",id:p.id,title:p.title,promptCategories:p.prompt_categories,likesCount:p.likes_count,creatorUserId:p.creator_user_id,createdAt:p.created_at,tags:l.get(p.id)||[]}));if(!r)return c;const u=await l2(`#${r}`,!0);if(u.length===0)return c;const h=new Set(c.map(p=>p.id)),f=u.filter(p=>!h.has(p.id));return[...c,...f]}async function pq(e){const{data:t,error:r}=await U.from("profiles").select("user_id, display_name, avatar_url, bio, follower_count").eq("is_public",!0).ilike("display_name",`%${e}%`).order("follower_count",{ascending:!1}).limit(15);return r||!t?[]:t.map(n=>({type:"user",userId:n.user_id,displayName:n.display_name,avatarUrl:n.avatar_url,bio:n.bio,followerCount:n.follower_count}))}function mq({query:e,filter:t,enabled:r=!0}){const n=e.trim(),s=n.startsWith("#");return De({queryKey:["explore-search",n,t],queryFn:async()=>{if(!n)return[];const a=[];if(t==="all"||t==="blueprints"){const o=await o2(n,s);a.push(...o)}if(t==="all"||t==="inventories"){const o=await l2(n,s);a.push(...o)}if((t==="all"||t==="users")&&!s){const o=await pq(n);a.push(...o)}return a},enabled:r&&n.length>0,staleTime:3e4})}function gq(){return De({queryKey:["trending-tags"],queryFn:async()=>{const{data:e,error:t}=await U.from("tags").select("id, slug, follower_count").order("follower_count",{ascending:!1}).limit(6);if(t)throw t;return e||[]},staleTime:6e4})}function vq(e,t){const[r,n]=d.useState(e);return d.useEffect(()=>{const s=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(s)}},[e,t]),r}function ln({className:e,children:t}){return i.jsx("div",{className:H("min-h-screen bg-background",e),children:t})}function cn({className:e,children:t,padBottom:r=!0}){return i.jsx("main",{className:H("max-w-3xl mx-auto px-3 sm:px-4 py-6",r&&"pb-24",e),children:t})}function sn({className:e,children:t}){return i.jsx("section",{className:H("space-y-3",e),children:t})}function fr({className:e}){return i.jsx("hr",{className:H("border-0 border-t border-border/40",e)})}const yq=[{value:"all",label:"All"},{value:"blueprints",label:"Blueprints"},{value:"inventories",label:"Libraries"},{value:"users",label:"Users"}];function xq(){const[e,t]=d.useState(""),[r,n]=d.useState("all"),s=d.useRef(null),[a]=su(),{user:o}=Ne(),l=d.useRef(!1),c=(a.get("q")||"").trim();d.useEffect(()=>{l.current||c&&(l.current=!0,t(c),n("all"))},[c]);const u=vq(e,300),{data:h,isLoading:f}=mq({query:u,filter:r}),{data:p}=gq(),{followedSlugs:m}=Pa(),w=u.trim().length>0,g=!!o&&m.size===0&&!w,v=d.useMemo(()=>!p||!o||m.size===0?[]:p.filter(j=>m.has(j.slug)),[p,m,o]),y=j=>{const N=j.replace(/^#/,"");t(`#${N}`),n("all")},x=()=>{var j;(j=s.current)==null||j.scrollIntoView({behavior:"smooth",block:"start"})},b=d.useMemo(()=>{if(!h||r!=="all")return null;const j={blueprints:[],inventories:[],users:[]};return h.forEach(N=>{N.type==="blueprint"?j.blueprints.push(N):N.type==="inventory"?j.inventories.push(N):N.type==="user"&&j.users.push(N)}),j},[h,r]),_=d.useMemo(()=>h?h.filter(j=>j.type==="blueprint").map(j=>j.id):[],[h]),{data:S={}}=De({queryKey:["explore-blueprint-comment-counts",_],enabled:_.length>0,staleTime:3e4,queryFn:async()=>{const{data:j,error:N}=await U.from("blueprint_comments").select("blueprint_id").in("blueprint_id",_);if(N)throw N;return(j||[]).reduce((k,R)=>(k[R.blueprint_id]=(k[R.blueprint_id]||0)+1,k),{})}});return i.jsxs(ln,{children:[i.jsx(vt,{}),i.jsxs(cn,{children:[i.jsxs(sn,{className:"mb-6",children:[i.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:"Explore"}),i.jsx("h1",{className:"text-2xl font-semibold mt-1",children:"Search blueprints, inventories, and creators"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Start with a keyword, then narrow by type or jump into trending channels below."})]}),!o&&i.jsxs("div",{className:"mb-6 border border-border/40 px-3 py-3 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold",children:"Sign in to personalize"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Join channels to shape your feed from the Channels page."})]}),i.jsx(pe,{to:"/auth",children:i.jsx(F,{size:"sm",children:"Sign in"})})]}),i.jsxs("div",{className:"relative mb-6",children:[i.jsx(Na,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),i.jsx(ze,{type:"text",placeholder:"Search blueprints, inventories, users...",value:e,onChange:j=>t(j.target.value),className:"pl-10 h-11 text-base border-border/50"})]}),w&&i.jsx("div",{className:"flex gap-2 mb-6 flex-wrap",children:yq.map(j=>i.jsx(F,{variant:r===j.value?"default":"outline",size:"sm",onClick:()=>n(j.value),children:j.label},j.value))}),!w&&i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"text-center py-8",children:[i.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Discover what works"}),i.jsx("p",{className:"text-muted-foreground",children:"Search blueprints, inventories, and creators - or explore trending topics below."})]}),!!o&&m.size>0&&i.jsxs("section",{children:[i.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Your Channels"}),v.length>0?i.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(j=>i.jsxs(Me,{variant:"secondary",className:"cursor-pointer transition-colors px-3 py-1 border bg-primary/15 text-primary border-primary/30 hover:bg-primary/20",onClick:()=>y(`#${j.slug}`),children:["#",j.slug]},j.id))}):i.jsx("p",{className:"text-sm text-muted-foreground",children:"Your channels will appear here as activity updates."})]}),g&&i.jsxs("section",{className:"border border-border/40 px-3 py-3 space-y-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold",children:"Join channels to shape your feed"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Start with a few channels and Explore will adapt to what you care about."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(F,{size:"sm",onClick:x,children:"Explore Topics"}),i.jsx(F,{asChild:!0,size:"sm",variant:"outline",children:i.jsx(pe,{to:"/channels",children:"Manage Channels"})})]})]}),p&&p.length>0&&i.jsxs("section",{ref:s,children:[i.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Trending Topics"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(j=>i.jsxs(Me,{variant:"secondary",className:`cursor-pointer transition-colors px-3 py-1 border ${m.has(j.slug)?"bg-primary/15 text-primary border-primary/30 hover:bg-primary/20":"bg-muted/40 text-muted-foreground border-border/60 hover:bg-muted/60"}`,onClick:()=>y(`#${j.slug}`),children:["#",j.slug]},j.id))})]}),i.jsx(fr,{}),i.jsxs("section",{children:[i.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Topic Search"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:["skincare","nutrition","fitness","wellness","sleep"].map(j=>i.jsx(F,{variant:"outline",size:"sm",onClick:()=>y(j),className:"capitalize",children:j},j))})]})]}),w&&f&&i.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((j,N)=>i.jsx(je,{className:"h-32 rounded-xl"},N))}),w&&!f&&b&&i.jsxs("div",{className:"space-y-8",children:[b.blueprints.length>0&&i.jsxs("section",{children:[i.jsx("h2",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Blueprints"}),i.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:b.blueprints.map(j=>i.jsx(sd,{result:j,commentCountByBlueprintId:S},j.type==="blueprint"?j.id:""))})]}),b.inventories.length>0&&i.jsxs("section",{children:[i.jsx("h2",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Libraries"}),i.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:b.inventories.map(j=>i.jsx(sd,{result:j,commentCountByBlueprintId:S},j.type==="inventory"?j.id:""))})]}),b.users.length>0&&i.jsxs("section",{children:[i.jsx("h2",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Users"}),i.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:b.users.map(j=>i.jsx(sd,{result:j},j.type==="user"?j.userId:""))})]}),(h==null?void 0:h.length)===0&&i.jsxs("div",{className:"text-center text-muted-foreground py-8 space-y-3",children:[i.jsxs("p",{children:['No results found for "',u,'"']}),i.jsx(F,{variant:"outline",size:"sm",onClick:()=>t(""),children:"Clear search"})]})]}),w&&!f&&!b&&h&&i.jsx("div",{children:h.length>0?i.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:h.map(j=>i.jsx(sd,{result:j,commentCountByBlueprintId:S},j.type==="user"?j.userId:j.id))}):i.jsxs("div",{className:"text-center text-muted-foreground py-8 space-y-3",children:[i.jsxs("p",{children:['No results found for "',u,'"']}),i.jsx(F,{variant:"outline",size:"sm",onClick:()=>t(""),children:"Clear search"})]})}),i.jsx(Kr,{})]})]})}function wq(e=10){return De({queryKey:["popular-blueprint-tags",e],queryFn:async()=>{const{data:t,error:r}=await U.from("blueprint_tags").select("tag_id");if(r)throw r;const n=new Map;(t||[]).forEach(c=>{n.set(c.tag_id,(n.get(c.tag_id)||0)+1)});const s=[...n.entries()].sort((c,u)=>u[1]-c[1]).slice(0,e).map(([c])=>c);if(s.length===0)return[];const{data:a,error:o}=await U.from("tags").select("id, slug").in("id",s);if(o)throw o;return(a||[]).map(c=>({id:c.id,slug:c.slug,count:n.get(c.id)||0})).sort((c,u)=>u.count-c.count)},staleTime:5*60*1e3})}const Db="id, inventory_id, creator_user_id, title, selected_items, mix_notes, banner_url, llm_review, is_public, likes_count, created_at, updated_at";function bq(e=6){const{user:t}=Ne();return De({queryKey:["suggested-blueprints",t==null?void 0:t.id,e],queryFn:async()=>{let r=[];if(t!=null&&t.id){const{data:v}=await U.from("blueprint_likes").select("blueprint_id").eq("user_id",t.id),y=(v||[]).map(x=>x.blueprint_id);if(y.length>0){const{data:x}=await U.from("blueprint_tags").select("tag_id").in("blueprint_id",y);r=[...new Set((x||[]).map(b=>b.tag_id))]}}let n=[];if(r.length>0&&(t!=null&&t.id)){const{data:v}=await U.from("blueprint_tags").select("blueprint_id").in("tag_id",r),y=[...new Set((v||[]).map(S=>S.blueprint_id))],{data:x}=await U.from("blueprint_likes").select("blueprint_id").eq("user_id",t.id),b=new Set((x||[]).map(S=>S.blueprint_id)),_=y.filter(S=>!b.has(S));if(_.length>0){const{data:S}=await U.from("blueprints").select(Db).in("id",_).eq("is_public",!0).order("likes_count",{ascending:!1}).limit(e);n=S||[]}}if(n.length<e){const v=n.map(b=>b.id),{data:y}=await U.from("blueprints").select(Db).eq("is_public",!0).order("likes_count",{ascending:!1}).limit(e*2),x=(y||[]).filter(b=>!v.includes(b.id)).slice(0,e-n.length);n=[...n,...x]}if(n.length===0)return[];const s=n.map(v=>v.id),a=n.map(v=>v.inventory_id).filter(Boolean),[o,l,c]=await Promise.all([U.from("blueprint_tags").select("blueprint_id, tag_id").in("blueprint_id",s),t!=null&&t.id?U.from("blueprint_likes").select("blueprint_id").eq("user_id",t.id).in("blueprint_id",s):Promise.resolve({data:[]}),a.length>0?U.from("inventories").select("id, title").in("id",a):Promise.resolve({data:[]})]),u=o.data||[],h=[...new Set(u.map(v=>v.tag_id))],{data:f}=h.length>0?await U.from("tags").select("id, slug").in("id",h):{data:[]},p=new Map((f||[]).map(v=>[v.id,v])),m=new Map;u.forEach(v=>{const y=p.get(v.tag_id);if(!y)return;const x=m.get(v.blueprint_id)||[];x.push(y),m.set(v.blueprint_id,x)});const w=new Set((l.data||[]).map(v=>v.blueprint_id)),g=new Map((c.data||[]).map(v=>[v.id,v.title]));return n.map(v=>({...v,tags:m.get(v.id)||[],user_liked:w.has(v.id),inventory_title:v.inventory_id&&g.get(v.inventory_id)||null}))},staleTime:2*60*1e3})}function _q({blueprint:e,onLike:t,onTagClick:r,commentCount:n=0,variant:s="grid_flat"}){const a=!!e.banner_url,o=d.useMemo(()=>new Set(Ra().map(bt)),[]),l=d.useMemo(()=>e.tags.filter(u=>!o.has(bt(u.slug))),[e.tags,o]),c=vu({primary:e.mix_notes,secondary:e.inventory_title?`From ${e.inventory_title}`:null,fallback:e.inventory_title?`From ${e.inventory_title}`:"Community blueprint",maxChars:170});return i.jsx(pe,{to:`/blueprint/${e.id}`,className:"block group",children:i.jsx("div",{className:H("bg-transparent","group-focus-visible:ring-2 group-focus-visible:ring-primary"),children:i.jsxs("div",{className:H("relative flex flex-col",s==="grid_flat"&&a&&"-m-3 p-3"),children:[a&&i.jsxs(i.Fragment,{children:[i.jsx("img",{src:e.banner_url,alt:"",className:"absolute inset-0 h-full w-full object-cover opacity-40",loading:"lazy"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-background/45 via-background/70 to-background/90"})]}),i.jsxs("div",{className:"relative flex flex-col",children:[i.jsx("div",{className:"flex items-start justify-between gap-2 mb-2",children:i.jsx("h3",{className:"font-semibold text-base leading-tight line-clamp-2",children:e.title})}),i.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:c}),i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.length>0?i.jsx("div",{className:"min-w-0 flex-1",children:i.jsx(yu,{className:"flex flex-nowrap gap-1.5 overflow-hidden min-w-0",items:l.map(u=>({key:u.id,label:u.slug,variant:"secondary",className:"text-xs transition-colors border bg-muted/40 text-muted-foreground border-border/60 cursor-pointer hover:bg-muted/60",onClick:h=>{r&&(h.preventDefault(),h.stopPropagation(),r(u.slug))}}))})}):i.jsx("div",{}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground shrink-0",children:[i.jsxs(F,{variant:"ghost",size:"sm",className:`h-7 px-2 ${e.user_liked?"text-red-500 hover:text-red-600":"text-muted-foreground hover:text-foreground"}`,onClick:u=>{u.preventDefault(),u.stopPropagation(),t(e.id,e.user_liked)},"aria-label":e.user_liked?"Unlike blueprint":"Like blueprint",children:[i.jsx(Kt,{className:`h-3.5 w-3.5 ${e.user_liked?"fill-current":""}`}),i.jsx("span",{className:"ml-1",children:e.likes_count})]}),i.jsxs("span",{className:"inline-flex items-center gap-1",children:[i.jsx(Kh,{className:"h-3.5 w-3.5"}),n]})]})]})]})]})})})}function jq(e,t){return d.useReducer((r,n)=>t[r][n]??r,e)}var Zy="ScrollArea",[c2,M9]=Nt(Zy),[Sq,un]=c2(Zy),u2=d.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:a=600,...o}=e,[l,c]=d.useState(null),[u,h]=d.useState(null),[f,p]=d.useState(null),[m,w]=d.useState(null),[g,v]=d.useState(null),[y,x]=d.useState(0),[b,_]=d.useState(0),[S,j]=d.useState(!1),[N,k]=d.useState(!1),R=Se(t,$=>c($)),E=Ca(s);return i.jsx(Sq,{scope:r,type:n,dir:E,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:h,content:f,onContentChange:p,scrollbarX:m,onScrollbarXChange:w,scrollbarXEnabled:S,onScrollbarXEnabledChange:j,scrollbarY:g,onScrollbarYChange:v,scrollbarYEnabled:N,onScrollbarYEnabledChange:k,onCornerWidthChange:x,onCornerHeightChange:_,children:i.jsx(se.div,{dir:E,...o,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});u2.displayName=Zy;var d2="ScrollAreaViewport",h2=d.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:s,...a}=e,o=un(d2,r),l=d.useRef(null),c=Se(t,l,o.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(se.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:i.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});h2.displayName=d2;var Jn="ScrollAreaScrollbar",ex=d.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=un(Jn,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=s,l=e.orientation==="horizontal";return d.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),s.type==="hover"?i.jsx(Nq,{...n,ref:t,forceMount:r}):s.type==="scroll"?i.jsx(kq,{...n,ref:t,forceMount:r}):s.type==="auto"?i.jsx(f2,{...n,ref:t,forceMount:r}):s.type==="always"?i.jsx(tx,{...n,ref:t}):null});ex.displayName=Jn;var Nq=d.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=un(Jn,e.__scopeScrollArea),[a,o]=d.useState(!1);return d.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},h=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(Dt,{present:r||a,children:i.jsx(f2,{"data-state":a?"visible":"hidden",...n,ref:t})})}),kq=d.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=un(Jn,e.__scopeScrollArea),a=e.orientation==="horizontal",o=Rf(()=>c("SCROLL_END"),100),[l,c]=jq("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return d.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),d.useEffect(()=>{const u=s.viewport,h=a?"scrollLeft":"scrollTop";if(u){let f=u[h];const p=()=>{const m=u[h];f!==m&&(c("SCROLL"),o()),f=m};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,a,c,o]),i.jsx(Dt,{present:r||l!=="hidden",children:i.jsx(tx,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:Z(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Z(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),f2=d.forwardRef((e,t)=>{const r=un(Jn,e.__scopeScrollArea),{forceMount:n,...s}=e,[a,o]=d.useState(!1),l=e.orientation==="horizontal",c=Rf(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,h=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:h)}},10);return Qo(r.viewport,c),Qo(r.content,c),i.jsx(Dt,{present:n||a,children:i.jsx(tx,{"data-state":a?"visible":"hidden",...s,ref:t})})}),tx=d.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,s=un(Jn,e.__scopeScrollArea),a=d.useRef(null),o=d.useRef(0),[l,c]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=y2(l.viewport,l.content),h={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:p=>a.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function f(p,m){return Aq(p,o.current,l,m)}return r==="horizontal"?i.jsx(Cq,{...h,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const p=s.viewport.scrollLeft,m=Lb(p,l,s.dir);a.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=f(p,s.dir))}}):r==="vertical"?i.jsx(Eq,{...h,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const p=s.viewport.scrollTop,m=Lb(p,l);a.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=f(p))}}):null}),Cq=d.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,a=un(Jn,e.__scopeScrollArea),[o,l]=d.useState(),c=d.useRef(null),u=Se(t,c,a.onScrollbarXChange);return d.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(m2,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Pf(r)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(a.viewport){const p=a.viewport.scrollLeft+h.deltaX;e.onWheelScroll(p),w2(p,f)&&h.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:ph(o.paddingLeft),paddingEnd:ph(o.paddingRight)}})}})}),Eq=d.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,a=un(Jn,e.__scopeScrollArea),[o,l]=d.useState(),c=d.useRef(null),u=Se(t,c,a.onScrollbarYChange);return d.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(m2,{"data-orientation":"vertical",...s,ref:u,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Pf(r)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(a.viewport){const p=a.viewport.scrollTop+h.deltaY;e.onWheelScroll(p),w2(p,f)&&h.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:ph(o.paddingTop),paddingEnd:ph(o.paddingBottom)}})}})}),[Tq,p2]=c2(Jn),m2=d.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:h,onResize:f,...p}=e,m=un(Jn,r),[w,g]=d.useState(null),v=Se(t,R=>g(R)),y=d.useRef(null),x=d.useRef(""),b=m.viewport,_=n.content-n.viewport,S=gt(h),j=gt(c),N=Rf(f,10);function k(R){if(y.current){const E=R.clientX-y.current.left,$=R.clientY-y.current.top;u({x:E,y:$})}}return d.useEffect(()=>{const R=E=>{const $=E.target;(w==null?void 0:w.contains($))&&S(E,_)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[b,w,_,S]),d.useEffect(j,[n,j]),Qo(w,N),Qo(m.content,N),i.jsx(Tq,{scope:r,scrollbar:w,hasThumb:s,onThumbChange:gt(a),onThumbPointerUp:gt(o),onThumbPositionChange:j,onThumbPointerDown:gt(l),children:i.jsx(se.div,{...p,ref:v,style:{position:"absolute",...p.style},onPointerDown:Z(e.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),y.current=w.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),k(R))}),onPointerMove:Z(e.onPointerMove,k),onPointerUp:Z(e.onPointerUp,R=>{const E=R.target;E.hasPointerCapture(R.pointerId)&&E.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=x.current,m.viewport&&(m.viewport.style.scrollBehavior=""),y.current=null})})})}),fh="ScrollAreaThumb",g2=d.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=p2(fh,e.__scopeScrollArea);return i.jsx(Dt,{present:r||s.hasThumb,children:i.jsx(Pq,{ref:t,...n})})}),Pq=d.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...s}=e,a=un(fh,r),o=p2(fh,r),{onThumbPositionChange:l}=o,c=Se(t,f=>o.onThumbChange(f)),u=d.useRef(void 0),h=Rf(()=>{u.current&&(u.current(),u.current=void 0)},100);return d.useEffect(()=>{const f=a.viewport;if(f){const p=()=>{if(h(),!u.current){const m=Iq(f,l);u.current=m,l()}};return l(),f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)}},[a.viewport,h,l]),i.jsx(se.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Z(e.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),w=f.clientX-m.left,g=f.clientY-m.top;o.onThumbPointerDown({x:w,y:g})}),onPointerUp:Z(e.onPointerUp,o.onThumbPointerUp)})});g2.displayName=fh;var rx="ScrollAreaCorner",v2=d.forwardRef((e,t)=>{const r=un(rx,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?i.jsx(Rq,{...e,ref:t}):null});v2.displayName=rx;var Rq=d.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,s=un(rx,r),[a,o]=d.useState(0),[l,c]=d.useState(0),u=!!(a&&l);return Qo(s.scrollbarX,()=>{var f;const h=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(h),c(h)}),Qo(s.scrollbarY,()=>{var f;const h=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(h),o(h)}),u?i.jsx(se.div,{...n,ref:t,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function ph(e){return e?parseInt(e,10):0}function y2(e,t){const r=e/t;return isNaN(r)?0:r}function Pf(e){const t=y2(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function Aq(e,t,r,n="ltr"){const s=Pf(r),a=s/2,o=t||a,l=s-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,h=r.content-r.viewport,f=n==="ltr"?[0,h]:[h*-1,0];return x2([c,u],f)(e)}function Lb(e,t,r="ltr"){const n=Pf(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,o=t.content-t.viewport,l=a-n,c=r==="ltr"?[0,o]:[o*-1,0],u=Pg(e,c);return x2([0,o],[0,l])(u)}function x2(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function w2(e,t){return e>0&&e<t}var Iq=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function s(){const a={left:e.scrollLeft,top:e.scrollTop},o=r.left!==a.left,l=r.top!==a.top;(o||l)&&t(),r=a,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function Rf(e,t){const r=gt(e),n=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(n.current),[]),d.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Qo(e,t){const r=gt(t);yt(()=>{let n=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(n),s.unobserve(e)}}},[e,r])}var b2=u2,Oq=h2,Mq=v2;const nx=d.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(b2,{ref:n,className:H("relative overflow-hidden",e),...r,children:[i.jsx(Oq,{className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(sx,{}),i.jsx(Mq,{})]}));nx.displayName=b2.displayName;const sx=d.forwardRef(({className:e,orientation:t="vertical",...r},n)=>i.jsx(ex,{ref:n,orientation:t,className:H("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:i.jsx(g2,{className:"relative flex-1 rounded-full bg-border"})}));sx.displayName=ex.displayName;function Dq({tags:e,selectedTag:t,onSelectTag:r,variant:n="scroll"}){const s=d.useRef(null);if(e.length===0)return null;const a=i.jsxs("div",{className:n==="wrap"?"flex flex-wrap gap-2":"flex gap-2 pb-2",children:[t&&i.jsxs(F,{variant:"outline",size:"sm",className:"h-8 gap-1 text-xs shrink-0",onClick:()=>r(null),children:[i.jsx(rr,{className:"h-3 w-3"}),"Clear filter"]}),e.map(o=>i.jsxs(Me,{variant:t===o.slug?"default":"secondary",className:`cursor-pointer shrink-0 transition-colors ${t===o.slug?"bg-primary text-primary-foreground hover:bg-primary/90":"hover:bg-secondary/80"}`,onClick:()=>{r(t===o.slug?null:o.slug)},role:"button",tabIndex:0,onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),r(t===o.slug?null:o.slug))},"aria-pressed":t===o.slug,children:["#",o.slug,i.jsxs("span",{className:"ml-1 text-xs opacity-70",children:["(",o.count,")"]})]},o.id))]});return n==="wrap"?i.jsx("div",{className:"relative",children:a}):i.jsx("div",{className:"relative",children:i.jsxs(nx,{className:"w-full whitespace-nowrap",ref:s,children:[a,i.jsx(sx,{orientation:"horizontal"})]})})}const Lq=pf,$q=Iy,Fq=mf,_2=d.forwardRef(({className:e,...t},r)=>i.jsx(hl,{className:H("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));_2.displayName=hl.displayName;const Uq=tl("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),j2=d.forwardRef(({side:e="right",className:t,children:r,...n},s)=>i.jsxs(Fq,{children:[i.jsx(_2,{}),i.jsxs(fl,{ref:s,className:H(Uq({side:e}),t),...n,children:[r,i.jsxs(gf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[i.jsx(rr,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));j2.displayName=fl.displayName;const S2=({className:e,...t})=>i.jsx("div",{className:H("flex flex-col space-y-2 text-center sm:text-left",e),...t});S2.displayName="SheetHeader";const N2=d.forwardRef(({className:e,...t},r)=>i.jsx(hu,{ref:r,className:H("text-lg font-semibold text-foreground",e),...t}));N2.displayName=hu.displayName;const k2=d.forwardRef(({className:e,...t},r)=>i.jsx(fu,{ref:r,className:H("text-sm text-muted-foreground",e),...t}));k2.displayName=fu.displayName;function mh({items:e,className:t,variant:r="table",renderItem:n}){if(r==="tiles")return i.jsx("div",{className:H("grid grid-cols-1 md:grid-cols-2 gap-2",t),children:e.map((o,l)=>i.jsx("div",{className:"border border-border/40 rounded-md p-3 overflow-hidden hover:bg-muted/10 transition-colors",children:n(o,{index:l})},l))});const s=e.length,a=s<=1?0:Math.floor((s-1)/2)*2;return i.jsx("div",{className:H("border border-border/40",t),children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2",children:e.map((o,l)=>{const c=l===s-1,u=l>=a,h=l%2===0;return i.jsx("div",{className:H("px-3 py-3",!c&&"border-b border-border/40",!u&&"md:border-b md:border-border/40",h&&"md:border-r md:border-border/40"),children:n(o,{index:l})},l)})})})}function Bq(){const e=Er(),t=Tr(),[r,n]=d.useState(""),[s,a]=d.useState(null),[o,l]=d.useState("any"),[c,u]=d.useState("popular"),[h,f]=d.useState(!1),{user:p}=Ne(),{toast:m}=St(),w=s||r,{data:g,isLoading:v}=CE(w,c),{data:y=[],isLoading:x}=wq(12),{data:b=[],isLoading:_}=bq(6),S=Qy(),j=new Set(b.map(I=>I.id)),N=d.useMemo(()=>g?w||!(!!p&&c==="popular")?g:g.filter(z=>!j.has(z.id)):[],[g,j,w,p,c]),k=async(I,z)=>{if(!p){m({title:"Sign in required",description:"Please sign in to like blueprints.",variant:"destructive"});return}try{await S.mutateAsync({blueprintId:I,liked:z})}catch(A){m({title:"Action failed",description:A instanceof Error?A.message:"Please try again.",variant:"destructive"})}},R=I=>{a(I),I&&n("")},E=!w&&p&&c==="popular",$=d.useMemo(()=>!E||!b||b.length===0||_?N:[...b,...N],[E,b,_,N]),M=d.useMemo(()=>o==="any"?$:$.filter(I=>Uc(I.tags.map(A=>A.slug))===o),[$,o]),O=d.useMemo(()=>M.map(I=>I.id),[M]),{data:C={}}=De({queryKey:["blueprints-comment-counts",O],enabled:O.length>0,staleTime:3e4,queryFn:async()=>{const{data:I,error:z}=await U.from("blueprint_comments").select("blueprint_id").in("blueprint_id",O);if(z)throw z;return(I||[]).reduce((A,P)=>(A[P.blueprint_id]=(A[P.blueprint_id]||0)+1,A),{})}}),D=d.useMemo(()=>{const I=[...qr].sort((z,A)=>z.priority-A.priority);return[{slug:"any",name:"Any channel"},...I.map(z=>({slug:z.slug,name:z.name}))]},[]);return i.jsxs(ln,{children:[i.jsx(vt,{}),i.jsxs(cn,{children:[i.jsxs(sn,{className:"space-y-3",children:[i.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:"Blueprints"}),i.jsx("h1",{className:"text-xl font-semibold tracking-tight",children:"Search and explore blueprints"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[!p&&i.jsx(pe,{to:"/auth",children:i.jsx(F,{variant:"outline",size:"sm",children:"Sign in"})}),i.jsx(F,{variant:"ghost",size:"sm",onClick:()=>f(I=>!I),children:"What is a Blueprint?"}),i.jsx(pe,{to:`${e.pathname}?create=1`,children:i.jsxs(F,{size:"sm",className:"gap-2",children:[i.jsx(Sa,{className:"h-4 w-4"}),"Create"]})})]})]}),h&&i.jsx("div",{className:"border border-border/40 px-3 py-3 text-sm text-muted-foreground leading-relaxed",children:i.jsx("p",{children:"A Blueprint is a step-by-step routine built from a library. It turns a list of items into an ordered plan. Each step can include multiple items and short context. Blueprints are meant to be practical and repeatable. You can follow a blueprint as-is or edit it to fit your style. The review helps you check gaps or risks before you publish. Banners and tags help others discover your blueprint. Public blueprints appear on the community wall. Saving a blueprint lets you return and improve it later. Think of it as a recipe for a routine you can share."})})]}),i.jsxs("div",{className:"border border-transparent px-3 py-3 flex flex-col gap-3 sm:flex-row sm:items-center",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[i.jsx(Na,{className:"h-4 w-4 text-muted-foreground shrink-0"}),i.jsx(ze,{value:r,onChange:I=>{n(I.target.value),I.target.value&&a(null)},placeholder:"Search blueprints by title or tag...",className:"border-none shadow-none focus-visible:ring-0 bg-transparent"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(Lq,{children:[i.jsx($q,{asChild:!0,children:i.jsxs(F,{variant:"outline",size:"sm",className:"gap-2",children:[i.jsx(XI,{className:"h-4 w-4"}),"Filters"]})}),i.jsxs(j2,{side:"right",className:"w-full sm:max-w-md",children:[i.jsxs(S2,{children:[i.jsx(N2,{children:"Filters"}),i.jsx(k2,{children:"Filter by channel or tag to narrow results."})]}),i.jsxs("div",{className:"mt-6 space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm font-semibold",children:"Channel"}),i.jsxs(ya,{value:o,onValueChange:I=>l(I),children:[i.jsx(vi,{children:i.jsx(xa,{placeholder:"Any channel"})}),i.jsx(yi,{children:D.map(I=>i.jsx(Vn,{value:I.slug,children:I.name},I.slug))})]})]}),!x&&y.length>0?i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm font-semibold",children:"Popular tags"}),i.jsx(Dq,{tags:y,selectedTag:s,onSelectTag:R,variant:"wrap"})]}):i.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading tags"})]})]})]}),i.jsx("div",{className:"w-full sm:w-56",children:i.jsxs(ya,{value:c,onValueChange:I=>u(I),children:[i.jsx(vi,{children:i.jsx(xa,{placeholder:"Sort by"})}),i.jsxs(yi,{children:[i.jsx(Vn,{value:"popular",children:"Most liked"}),i.jsx(Vn,{value:"latest",children:"Newest"})]})]})})]})]}),i.jsx(fr,{}),i.jsxs(sn,{className:"space-y-4",children:[w?i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsxs("h2",{className:"text-sm font-semibold text-muted-foreground",children:["Results for ",i.jsxs("span",{className:"text-foreground",children:['"',w,'"']})]}),i.jsx(F,{variant:"ghost",size:"sm",className:"text-muted-foreground",onClick:()=>{n(""),a(null)},children:"Clear"})]}):i.jsx("div",{}),v?i.jsx(mh,{variant:"tiles",items:Array.from({length:6}),renderItem:(I,{index:z})=>i.jsxs("div",{className:"space-y-3",children:[i.jsx(je,{className:"h-5 w-3/4"}),i.jsx(je,{className:"h-10 w-full"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(je,{className:"h-5 w-16"}),i.jsx(je,{className:"h-5 w-20"})]}),i.jsx(je,{className:"h-4 w-full"})]})}):M.length>0?i.jsx(mh,{variant:"tiles",items:M,renderItem:I=>i.jsx(_q,{blueprint:I,onLike:k,onTagClick:z=>t(`/explore?q=${encodeURIComponent(z)}`),commentCount:C[I.id]||0,variant:"grid_flat"})}):i.jsxs("div",{className:"border border-border/40 py-12 text-center space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"No blueprints found"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:w?"Try a different search or clear filters.":"Be the first to publish a blueprint!"}),i.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:w?i.jsx(F,{variant:"outline",onClick:()=>{n(""),a(null)},children:"Clear search"}):i.jsx(pe,{to:`${e.pathname}?create=1`,children:i.jsx(F,{children:"Create"})})})]})]}),i.jsx(Kr,{})]})]})}var zq="Separator",$b="horizontal",qq=["horizontal","vertical"],C2=d.forwardRef((e,t)=>{const{decorative:r,orientation:n=$b,...s}=e,a=Wq(n)?n:$b,l=r?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return i.jsx(se.div,{"data-orientation":a,...l,...s,ref:t})});C2.displayName=zq;function Wq(e){return qq.includes(e)}var E2=C2;const ix=d.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},s)=>i.jsx(E2,{ref:s,decorative:r,orientation:t,className:H("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));ix.displayName=E2.displayName;function Vq(){const e=Tr(),{signIn:t,signUp:r,user:n}=Ne(),{toast:s}=St(),[a,o]=d.useState(!1),[l,c]=d.useState(!1),[u,h]=d.useState(""),[f,p]=d.useState(""),[m,w]=d.useState(""),[g,v]=d.useState(""),[y,x]=d.useState("");if(n)return i.jsx(fa,{to:"/wall",replace:!0});const b=async j=>{j.preventDefault(),o(!0);const{error:N}=await t(u,f);N?s({title:"Login failed",description:N.message,variant:"destructive"}):(s({title:"Welcome back!",description:"You have successfully logged in."}),e("/wall",{replace:!0})),o(!1)},_=async j=>{j.preventDefault(),o(!0);const{error:N}=await r(m,g,y);N?s({title:"Signup failed",description:N.message,variant:"destructive"}):(s({title:"Account created!",description:"Welcome to Blueprints. Your account is ready."}),e("/wall",{replace:!0})),o(!1)},S=async()=>{c(!0);const j=new URL(Ni.basePath,window.location.origin).toString(),{error:N}=await U.auth.signInWithOAuth({provider:"google",options:{redirectTo:j}});N&&(s({title:"Google sign-in failed",description:N.message,variant:"destructive"}),c(!1))};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-3 sm:p-4",children:i.jsxs(Oe,{className:"w-full max-w-md border-border/40 shadow-none",children:[i.jsxs(ur,{className:"text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[i.jsx(Wv,{className:"h-8 w-8 text-primary"}),i.jsx("span",{className:"text-2xl font-bold",children:"Blueprints"})]}),i.jsx(dr,{children:"Welcome"}),i.jsx(sc,{children:"Sign in to save your blueprints and share with the community"})]}),i.jsxs(Be,{className:"space-y-4",children:[i.jsxs(F,{type:"button",variant:"outline",className:"w-full gap-2",onClick:S,disabled:a||l,children:[l?i.jsx(rn,{className:"h-4 w-4 animate-spin"}):i.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx(ix,{className:"w-full"})}),i.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:i.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with email"})})]}),i.jsxs(Aa,{defaultValue:"login",className:"w-full",children:[i.jsxs(ki,{className:"grid w-full grid-cols-2",children:[i.jsx(Sr,{value:"login",children:"Login"}),i.jsx(Sr,{value:"signup",children:"Sign Up"})]}),i.jsx(en,{value:"login",children:i.jsxs("form",{onSubmit:b,className:"space-y-4 mt-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{htmlFor:"login-email",children:"Email"}),i.jsx(ze,{id:"login-email",type:"email",placeholder:"you@example.com",value:u,onChange:j=>h(j.target.value),required:!0,disabled:a||l})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{htmlFor:"login-password",children:"Password"}),i.jsx(ze,{id:"login-password",type:"password",placeholder:"",value:f,onChange:j=>p(j.target.value),required:!0,disabled:a||l,minLength:6})]}),i.jsx(F,{type:"submit",className:"w-full",disabled:a||l,children:a?i.jsxs(i.Fragment,{children:[i.jsx(rn,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})}),i.jsx(en,{value:"signup",children:i.jsxs("form",{onSubmit:_,className:"space-y-4 mt-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{htmlFor:"signup-name",children:"Display Name"}),i.jsx(ze,{id:"signup-name",type:"text",placeholder:"Your name",value:y,onChange:j=>x(j.target.value),disabled:a||l})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{htmlFor:"signup-email",children:"Email"}),i.jsx(ze,{id:"signup-email",type:"email",placeholder:"you@example.com",value:m,onChange:j=>w(j.target.value),required:!0,disabled:a||l})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{htmlFor:"signup-password",children:"Password"}),i.jsx(ze,{id:"signup-password",type:"password",placeholder:"",value:g,onChange:j=>v(j.target.value),required:!0,disabled:a||l,minLength:6})]}),i.jsx(F,{type:"submit",className:"w-full",disabled:a||l,children:a?i.jsxs(i.Fragment,{children:[i.jsx(rn,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):"Create Account"})]})})]})]}),i.jsx(fC,{className:"text-center text-sm text-muted-foreground",children:i.jsx("p",{className:"w-full",children:"By signing up, you agree to our Terms of Service and Privacy Policy."})})]})})}const pr=d.forwardRef(({className:e,...t},r)=>i.jsx("textarea",{className:H("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));pr.displayName="Textarea";var Af="Switch",[Hq,D9]=Nt(Af),[Kq,Gq]=Hq(Af),T2=d.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:h,...f}=e,[p,m]=d.useState(null),w=Se(t,b=>m(b)),g=d.useRef(!1),v=p?h||!!p.closest("form"):!0,[y,x]=sr({prop:s,defaultProp:a??!1,onChange:u,caller:Af});return i.jsxs(Kq,{scope:r,checked:y,disabled:l,children:[i.jsx(se.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":I2(y),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:w,onClick:Z(e.onClick,b=>{x(_=>!_),v&&(g.current=b.isPropagationStopped(),g.current||b.stopPropagation())})}),v&&i.jsx(A2,{control:p,bubbles:!g.current,name:n,value:c,checked:y,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});T2.displayName=Af;var P2="SwitchThumb",R2=d.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=Gq(P2,r);return i.jsx(se.span,{"data-state":I2(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});R2.displayName=P2;var Yq="SwitchBubbleInput",A2=d.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...s},a)=>{const o=d.useRef(null),l=Se(o,a),c=$y(r),u=ty(t);return d.useEffect(()=>{const h=o.current;if(!h)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==r&&m){const w=new Event("click",{bubbles:n});m.call(h,r),h.dispatchEvent(w)}},[c,r,n]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});A2.displayName=Yq;function I2(e){return e?"checked":"unchecked"}var O2=T2,Qq=R2;const jn=d.forwardRef(({className:e,...t},r)=>i.jsx(O2,{className:H("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:r,children:i.jsx(Qq,{className:H("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));jn.displayName=O2.displayName;const Jq=2*1024*1024;function Xq({userId:e,currentAvatarUrl:t,displayName:r,onAvatarChange:n,disabled:s}){const{toast:a}=St(),o=d.useRef(null),[l,c]=d.useState(""),[u,h]=d.useState(!1),f=r.slice(0,2).toUpperCase(),p=async w=>{var v;const g=(v=w.target.files)==null?void 0:v[0];if(g){if(g.size>Jq){a({title:"File too large",description:"Please select an image under 2MB.",variant:"destructive"});return}if(!g.type.startsWith("image/")){a({title:"Invalid file type",description:"Please select an image file.",variant:"destructive"});return}h(!0);try{const y=g.name.split(".").pop()||"jpg",x=Date.now(),b=`${e}/${x}.${y}`,{error:_}=await U.storage.from("avatars").upload(b,g,{upsert:!0});if(_)throw _;const{data:S}=U.storage.from("avatars").getPublicUrl(b);n(S.publicUrl),a({title:"Avatar uploaded",description:"Your new avatar has been set."})}catch(y){a({title:"Upload failed",description:y instanceof Error?y.message:"Please try again.",variant:"destructive"})}finally{h(!1),o.current&&(o.current.value="")}}},m=()=>{if(l.trim())try{new URL(l.trim()),n(l.trim()),c(""),a({title:"Avatar updated",description:"Your avatar URL has been set."})}catch{a({title:"Invalid URL",description:"Please enter a valid image URL.",variant:"destructive"})}};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(Kn,{className:"h-20 w-20",children:[i.jsx(Gn,{src:t||void 0,alt:r}),i.jsx(Yn,{className:"bg-primary/10 text-primary text-xl",children:f})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.jsx("p",{className:"font-medium text-foreground",children:"Profile Picture"}),i.jsx("p",{children:"Upload an image or paste a URL"})]})]}),i.jsxs(Aa,{defaultValue:"upload",className:"w-full",children:[i.jsxs(ki,{className:"grid w-full grid-cols-2",children:[i.jsxs(Sr,{value:"upload",className:"gap-1.5",children:[i.jsx(n0,{className:"h-4 w-4"}),"Upload"]}),i.jsxs(Sr,{value:"url",className:"gap-1.5",children:[i.jsx(iO,{className:"h-4 w-4"}),"URL"]})]}),i.jsx(en,{value:"upload",className:"mt-3",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:p,className:"hidden",disabled:s||u}),i.jsx(F,{type:"button",variant:"outline",className:"w-full",onClick:()=>{var w;return(w=o.current)==null?void 0:w.click()},disabled:s||u,children:u?i.jsxs(i.Fragment,{children:[i.jsx(rn,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):i.jsxs(i.Fragment,{children:[i.jsx(n0,{className:"h-4 w-4 mr-2"}),"Choose Image"]})}),i.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Max file size: 2MB"})]})}),i.jsx(en,{value:"url",className:"mt-3",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{htmlFor:"avatar-url",children:"Image URL"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ze,{id:"avatar-url",value:l,onChange:w=>c(w.target.value),placeholder:"https://example.com/avatar.jpg",disabled:s}),i.jsx(F,{type:"button",onClick:m,disabled:s||!l.trim(),children:"Set"})]})]})})]})]})}function Zq(){var v;const{user:e,profile:t,isLoading:r,updateProfile:n}=Ne(),{toast:s}=St(),[a,o]=d.useState(""),[l,c]=d.useState(""),[u,h]=d.useState(""),[f,p]=d.useState(!1),[m,w]=d.useState(!1);if(d.useEffect(()=>{o((t==null?void 0:t.display_name)||""),c((t==null?void 0:t.avatar_url)||""),h((t==null?void 0:t.bio)||"")},[t]),d.useEffect(()=>{async function y(){if(!e)return;const{data:x}=await U.from("profiles").select("is_public").eq("user_id",e.id).maybeSingle();x&&p(x.is_public)}y()},[e]),r)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})});if(!e)return i.jsx(fa,{to:"/auth",replace:!0});const g=async y=>{var _;y.preventDefault(),w(!0);const{error:x}=await n({display_name:a.trim()||null,avatar_url:l.trim()||null,bio:u.trim()||null}),{error:b}=await U.from("profiles").update({is_public:f}).eq("user_id",e.id);s(x||b?{title:"Update failed",description:((_=x||b)==null?void 0:_.message)||"Please try again.",variant:"destructive"}:{title:"Settings saved",description:"Your profile settings have been updated."}),w(!1)};return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx(vt,{}),i.jsxs("main",{className:"max-w-3xl mx-auto px-3 sm:px-4 py-10 pb-24 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your profile and account preferences"})]}),i.jsxs("form",{onSubmit:g,className:"space-y-6",children:[i.jsxs(Oe,{children:[i.jsxs(ur,{children:[i.jsx(dr,{children:"Profile"}),i.jsx(sc,{children:"Your public profile information"})]}),i.jsxs(Be,{className:"space-y-6",children:[i.jsx(Xq,{userId:e.id,currentAvatarUrl:l,displayName:a||((v=e.email)==null?void 0:v.split("@")[0])||"User",onAvatarChange:c,disabled:m}),i.jsx(ix,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{htmlFor:"display-name",children:"Display Name"}),i.jsx(ze,{id:"display-name",value:a,onChange:y=>o(y.target.value),placeholder:"Your name",disabled:m})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{htmlFor:"bio",children:"Bio"}),i.jsx(pr,{id:"bio",value:u,onChange:y=>h(y.target.value),placeholder:"A short bio about you",rows:4,disabled:m})]})]})]}),i.jsxs(Oe,{children:[i.jsxs(ur,{children:[i.jsx(dr,{children:"Privacy"}),i.jsx(sc,{children:"Control who can see your profile"})]}),i.jsx(Be,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx(Pe,{htmlFor:"public-profile",children:"Make profile public"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"When enabled, anyone can view your profile page"})]}),i.jsx(jn,{id:"public-profile",checked:f,onCheckedChange:p,disabled:m})]})})]}),i.jsxs(Oe,{children:[i.jsxs(ur,{children:[i.jsx(dr,{children:"Account"}),i.jsx(sc,{children:"Your account information"})]}),i.jsx(Be,{className:"space-y-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{children:"Email"}),i.jsx(ze,{value:e.email||"",disabled:!0}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed"})]})})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(F,{type:"submit",disabled:m,children:m?"Saving...":"Save Changes"})})]})]})]})}function eW({targetUserId:e}){const{user:t}=Ne(),{toast:r}=St(),{data:n,isLoading:s}=s2(e),a=i2(),o=a2(),[l,c]=d.useState(!1);if(!t||t.id===e)return null;const u=async()=>{try{n?(await o.mutateAsync(e),r({title:"Unfollowed",description:"You are no longer following this user."})):(await a.mutateAsync(e),r({title:"Following!",description:"You are now following this user."}))}catch(f){r({title:"Action failed",description:f instanceof Error?f.message:"Please try again.",variant:"destructive"})}},h=a.isPending||o.isPending;return n?i.jsx(F,{variant:"outline",size:"sm",onClick:u,disabled:h||s,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),className:l?"border-destructive text-destructive hover:bg-destructive/10":"",children:l?"Unfollow":i.jsxs(i.Fragment,{children:[i.jsx(vO,{className:"h-4 w-4 mr-1"}),"Following"]})}):i.jsxs(F,{size:"sm",onClick:u,disabled:h||s,children:[i.jsx(yO,{className:"h-4 w-4 mr-1"}),"Follow"]})}function tW({profile:e,onFollowersClick:t,onFollowingClick:r}){const{user:n}=Ne(),s=(n==null?void 0:n.id)===e.user_id,a=e.display_name||"Anonymous",o=a.slice(0,2).toUpperCase(),l=J6(new Date(e.created_at),"MMMM yyyy");return i.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 items-start sm:items-center",children:[i.jsxs(Kn,{className:"h-20 w-20 sm:h-24 sm:w-24",children:[i.jsx(Gn,{src:e.avatar_url||void 0,alt:a}),i.jsx(Yn,{className:"bg-primary/10 text-primary text-2xl",children:o})]}),i.jsxs("div",{className:"flex-1 space-y-3",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h1",{className:"text-2xl font-bold",children:a}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[i.jsx(zI,{className:"h-4 w-4"}),i.jsxs("span",{children:["Joined ",l]})]})]}),i.jsx("div",{className:"flex gap-2",children:s?i.jsx(F,{variant:"outline",size:"sm",asChild:!0,children:i.jsxs(pe,{to:"/settings",children:[i.jsx(rS,{className:"h-4 w-4 mr-1"}),"Edit Profile"]})}):i.jsx(eW,{targetUserId:e.user_id})})]}),e.bio&&i.jsx("p",{className:"text-muted-foreground max-w-lg",children:e.bio}),i.jsxs("div",{className:"flex gap-4 text-sm",children:[i.jsxs("button",{onClick:t,className:"hover:underline focus:outline-none",children:[i.jsx("span",{className:"font-semibold",children:e.follower_count})," ",i.jsx("span",{className:"text-muted-foreground",children:"Followers"})]}),i.jsxs("button",{onClick:r,className:"hover:underline focus:outline-none",children:[i.jsx("span",{className:"font-semibold",children:e.following_count})," ",i.jsx("span",{className:"text-muted-foreground",children:"Following"})]})]})]})]})}function rW(e){return Ne(),De({queryKey:["user-profile",e],queryFn:async()=>{if(!e)return null;const{data:t,error:r}=await U.from("profiles").select("id, user_id, display_name, avatar_url, bio, is_public, follower_count, following_count, created_at").eq("user_id",e).maybeSingle();if(r)throw r;return t},enabled:!!e})}function nW(e,t=4){return De({queryKey:["user-blueprints",e,t],queryFn:async()=>{if(!e)return[];const{data:r,error:n}=await U.from("blueprints").select("id, title, selected_items, likes_count, created_at").eq("creator_user_id",e).eq("is_public",!0).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r||[]},enabled:!!e})}function sW(e,t=4){return De({queryKey:["user-inventories",e,t],queryFn:async()=>{if(!e)return[];const{data:r,error:n}=await U.from("inventories").select("id, title, prompt_categories, likes_count, created_at").eq("creator_user_id",e).eq("is_public",!0).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r||[]},enabled:!!e})}function iW(e,t=4){return De({queryKey:["user-liked-blueprints",e,t],queryFn:async()=>{if(!e)return[];const{data:r,error:n}=await U.from("blueprint_likes").select("blueprint_id, created_at").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(n)throw n;if(!r||r.length===0)return[];const s=r.map(h=>h.blueprint_id),{data:a,error:o}=await U.from("blueprints").select("id, title, creator_user_id, likes_count, created_at").in("id",s).eq("is_public",!0);if(o)throw o;const l=[...new Set((a||[]).map(h=>h.creator_user_id))],{data:c}=await U.from("profiles").select("user_id, display_name, avatar_url").in("user_id",l),u=new Map((c||[]).map(h=>[h.user_id,h]));return(a||[]).map(h=>({...h,creator_profile:u.get(h.creator_user_id)||null}))},enabled:!!e})}function aW(e,t=4){return De({queryKey:["user-activity",e,t],queryFn:async()=>{if(!e)return[];const{data:r}=await U.from("blueprints").select("id, title, created_at").eq("creator_user_id",e).eq("is_public",!0).order("created_at",{ascending:!1}).limit(t),{data:n}=await U.from("blueprint_likes").select("id, blueprint_id, created_at").eq("user_id",e).order("created_at",{ascending:!1}).limit(t),s=(n||[]).map(p=>p.blueprint_id),{data:a}=s.length>0?await U.from("blueprints").select("id, title").in("id",s).eq("is_public",!0):{data:[]},o=new Map((a||[]).map(p=>[p.id,p.title])),{data:l}=await U.from("blueprint_comments").select("id, blueprint_id, created_at").eq("user_id",e).order("created_at",{ascending:!1}).limit(t),c=(l||[]).map(p=>p.blueprint_id),{data:u}=c.length>0?await U.from("blueprints").select("id, title").in("id",c).eq("is_public",!0):{data:[]},h=new Map((u||[]).map(p=>[p.id,p.title]));return[...(r||[]).map(p=>({type:"blueprint_created",id:p.id,title:`Created "${p.title}"`,created_at:p.created_at,target_id:p.id})),...(n||[]).filter(p=>o.has(p.blueprint_id)).map(p=>({type:"blueprint_liked",id:p.id,title:`Liked "${o.get(p.blueprint_id)}"`,created_at:p.created_at,target_id:p.blueprint_id})),...(l||[]).filter(p=>h.has(p.blueprint_id)).map(p=>({type:"comment",id:p.id,title:`Commented on "${h.get(p.blueprint_id)}"`,created_at:p.created_at,target_id:p.blueprint_id}))].sort((p,m)=>new Date(m.created_at).getTime()-new Date(p.created_at).getTime()).slice(0,t)},enabled:!!e})}function oW(e){return!e||typeof e!="object"||Array.isArray(e)?0:Object.values(e).reduce((t,r)=>t+(Array.isArray(r)?r.length:0),0)}function lW({userId:e}){const{data:t,isLoading:r}=nW(e,4),{data:n,isLoading:s}=sW(e,4),{data:a,isLoading:o}=iW(e,4),{data:l,isLoading:c}=aW(e,4);return i.jsxs(Aa,{defaultValue:"blueprints",className:"w-full",children:[i.jsxs(ki,{className:"w-full justify-start",children:[i.jsxs(Sr,{value:"blueprints",className:"gap-1.5",children:[i.jsx(ai,{className:"h-4 w-4"}),"Blueprints"]}),i.jsxs(Sr,{value:"inventories",className:"gap-1.5",children:[i.jsx(Vm,{className:"h-4 w-4"}),"Libraries"]}),i.jsxs(Sr,{value:"liked",className:"gap-1.5",children:[i.jsx(Kt,{className:"h-4 w-4"}),"Liked"]}),i.jsxs(Sr,{value:"activity",className:"gap-1.5",children:[i.jsx(vp,{className:"h-4 w-4"}),"Activity"]})]}),i.jsx(en,{value:"blueprints",className:"mt-4",children:r?i.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:Array.from({length:4}).map((u,h)=>i.jsx(je,{className:"h-24"},h))}):t&&t.length>0?i.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:t.map(u=>i.jsx(pe,{to:`/blueprint/${u.id}`,children:i.jsx(Oe,{className:"h-full transition hover:border-primary/40",children:i.jsxs(Be,{className:"p-4",children:[i.jsx("h4",{className:"font-medium truncate",children:u.title}),i.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[i.jsxs(Me,{variant:"secondary",className:"text-xs",children:[oW(u.selected_items)," items"]}),i.jsx("span",{children:""}),i.jsx(Kt,{className:"h-3 w-3"}),i.jsx("span",{children:u.likes_count})]})]})})},u.id))}):i.jsx(id,{icon:i.jsx(ai,{className:"h-8 w-8"}),message:"No public blueprints yet"})}),i.jsx(en,{value:"inventories",className:"mt-4",children:s?i.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:Array.from({length:4}).map((u,h)=>i.jsx(je,{className:"h-24"},h))}):n&&n.length>0?i.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:n.map(u=>i.jsx(pe,{to:`/inventory/${u.id}`,children:i.jsx(Oe,{className:"h-full transition hover:border-primary/40",children:i.jsxs(Be,{className:"p-4",children:[i.jsx("h4",{className:"font-medium truncate",children:u.title}),i.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:u.prompt_categories}),i.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[i.jsx(Kt,{className:"h-3 w-3"}),i.jsx("span",{children:u.likes_count})]})]})})},u.id))}):i.jsx(id,{icon:i.jsx(Vm,{className:"h-8 w-8"}),message:"No public inventories yet"})}),i.jsx(en,{value:"liked",className:"mt-4",children:o?i.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:Array.from({length:4}).map((u,h)=>i.jsx(je,{className:"h-24"},h))}):a&&a.length>0?i.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:a.map(u=>{var h;return i.jsx(pe,{to:`/blueprint/${u.id}`,children:i.jsx(Oe,{className:"h-full transition hover:border-primary/40",children:i.jsxs(Be,{className:"p-4",children:[i.jsx("h4",{className:"font-medium truncate",children:u.title}),i.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["by ",((h=u.creator_profile)==null?void 0:h.display_name)||"Anonymous"]}),i.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[i.jsx(Kt,{className:"h-3 w-3 fill-current text-destructive"}),i.jsx("span",{children:u.likes_count})]})]})})},u.id)})}):i.jsx(id,{icon:i.jsx(Kt,{className:"h-8 w-8"}),message:"No liked blueprints yet"})}),i.jsx(en,{value:"activity",className:"mt-4",children:c?i.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((u,h)=>i.jsx(je,{className:"h-16"},h))}):l&&l.length>0?i.jsx("div",{className:"space-y-3",children:l.map(u=>i.jsx(pe,{to:`/blueprint/${u.target_id}`,children:i.jsx(Oe,{className:"transition hover:border-primary/40",children:i.jsxs(Be,{className:"p-4 flex items-center gap-3",children:[i.jsxs("div",{className:"h-8 w-8 rounded-full bg-muted flex items-center justify-center",children:[u.type==="blueprint_created"&&i.jsx(ai,{className:"h-4 w-4 text-primary"}),u.type==="blueprint_liked"&&i.jsx(Kt,{className:"h-4 w-4 text-destructive"}),u.type==="comment"&&i.jsx(vp,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium",children:u.title}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Go(new Date(u.created_at),{addSuffix:!0})})]}),i.jsx(qv,{className:"h-4 w-4 text-muted-foreground"})]})})},u.id))}):i.jsx(id,{icon:i.jsx(vp,{className:"h-8 w-8"}),message:"No recent activity"})})]})}function id({icon:e,message:t}){return i.jsx(Oe,{children:i.jsx(Be,{className:"py-12 text-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-3",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center text-muted-foreground",children:e}),i.jsx("p",{className:"text-muted-foreground",children:t})]})})})}function Fb({userId:e,type:t,open:r,onOpenChange:n}){const{data:s,isLoading:a}=lq(t==="followers"?e:void 0),{data:o,isLoading:l}=cq(t==="following"?e:void 0),c=t==="followers"?a:l,u=t==="followers"?s:o,h=t==="followers"?"Followers":"Following";return i.jsx(vf,{open:r,onOpenChange:n,children:i.jsxs(pu,{className:"sm:max-w-md",children:[i.jsx(yf,{children:i.jsx(xf,{children:h})}),i.jsx(nx,{className:"max-h-[400px]",children:c?i.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((f,p)=>i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(je,{className:"h-10 w-10 rounded-full"}),i.jsx(je,{className:"h-4 w-32"})]},p))}):u&&u.length>0?i.jsx("div",{className:"space-y-2",children:u.map(f=>i.jsx(cW,{user:f,onClose:()=>n(!1)},f.user_id))}):i.jsx("p",{className:"text-center text-muted-foreground py-8",children:t==="followers"?"No followers yet":"Not following anyone yet"})})]})})}function cW({user:e,onClose:t}){const r=e.display_name||"Anonymous",n=r.slice(0,2).toUpperCase();return i.jsxs(pe,{to:`/u/${e.user_id}`,onClick:t,className:"flex items-center gap-3 p-2 rounded-lg hover:bg-muted/50 transition-colors",children:[i.jsxs(Kn,{className:"h-10 w-10",children:[i.jsx(Gn,{src:e.avatar_url||void 0,alt:r}),i.jsx(Yn,{className:"bg-primary/10 text-primary text-sm",children:n})]}),i.jsx("span",{className:"font-medium",children:r})]})}function uW(){const{userId:e}=ka(),{user:t}=Ne(),{data:r,isLoading:n,error:s}=rW(e),[a,o]=d.useState(!1),[l,c]=d.useState(!1);if(!e)return i.jsx(fa,{to:"/auth",replace:!0});const u=(t==null?void 0:t.id)===e,h=(r==null?void 0:r.is_public)||u;return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx(vt,{}),i.jsx("main",{className:"max-w-3xl mx-auto px-3 sm:px-4 py-8 pb-24 space-y-8",children:n?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx(je,{className:"h-24 w-24 rounded-full"}),i.jsxs("div",{className:"space-y-3 flex-1",children:[i.jsx(je,{className:"h-8 w-48"}),i.jsx(je,{className:"h-4 w-32"}),i.jsx(je,{className:"h-4 w-64"})]})]}),i.jsx(je,{className:"h-10 w-full"}),i.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:Array.from({length:4}).map((f,p)=>i.jsx(je,{className:"h-24"},p))})]}):s?i.jsx("div",{className:"border border-border/40 px-3 py-10 text-center",children:i.jsx("p",{className:"text-muted-foreground",children:"Failed to load profile. Please try again."})}):r?h?i.jsxs(i.Fragment,{children:[i.jsx(tW,{profile:r,onFollowersClick:()=>o(!0),onFollowingClick:()=>c(!0)}),!r.is_public&&u&&i.jsx(Oe,{className:"border-dashed",children:i.jsxs(Be,{className:"py-4 text-center text-sm text-muted-foreground",children:["Your profile is currently ",i.jsx("strong",{children:"private"}),". Only you can see this page."," ",i.jsx("a",{href:"/settings",className:"text-primary hover:underline",children:"Make it public"})," ","to let others discover you."]})}),i.jsx(lW,{userId:e}),i.jsx(Fb,{userId:e,type:"followers",open:a,onOpenChange:o}),i.jsx(Fb,{userId:e,type:"following",open:l,onOpenChange:c})]}):i.jsx("div",{className:"border border-border/40 px-3 py-12 text-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center",children:i.jsx(Wm,{className:"h-8 w-8 text-muted-foreground"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold",children:"This profile is private"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"This user has chosen to keep their profile private."})]})]})}):i.jsx("div",{className:"border border-border/40 px-3 py-10 text-center",children:i.jsx("p",{className:"text-muted-foreground",children:"Profile not found."})})})]})}const Ub=6,dW=4;function hW(){const{user:e}=Ne(),{toast:t}=St(),r=d.useMemo(()=>Array.from(new Set(qr.map(O=>O.tagSlug))),[]),{data:n=[],isLoading:s}=mu(r),{followedTags:a,getFollowState:o,joinChannel:l,leaveChannel:c,removeNonCuratedFollows:u,isLoading:h}=Pa(),[f,p]=d.useState(!1),[m,w]=d.useState(!1),g=d.useRef(!1),v=d.useRef(!1);d.useEffect(()=>{!e||h||g.current||(g.current=!0,u().catch(()=>{t({title:"Follow cleanup failed",description:"Could not clean legacy follows. Please refresh and try again.",variant:"destructive"})}))},[h,u,t,e]);const y=d.useMemo(()=>{const O=new Map(n.map(C=>[C.slug,C]));return qr.map(C=>{const D=O.get(C.tagSlug)||null;return{slug:C.slug,tagSlug:C.tagSlug,name:C.name,description:C.description,icon:C.icon,priority:C.priority,isJoinEnabled:C.isJoinEnabled,tagId:(D==null?void 0:D.id)||null,followerCount:(D==null?void 0:D.follower_count)||0,joinAvailable:C.isJoinEnabled&&C.status==="active"&&!!(D!=null&&D.id)}}).sort((C,D)=>C.priority-D.priority)},[n]),x=d.useMemo(()=>{const O=new Set;return a.forEach(C=>{const D=Uc([C.slug]);D!=="general"&&O.add(D)}),O},[a]),b=y.filter(O=>x.has(O.slug)),_=y.filter(O=>!x.has(O.slug)),S=_.filter(O=>O.isJoinEnabled).sort((O,C)=>C.followerCount!==O.followerCount?C.followerCount-O.followerCount:O.priority-C.priority).slice(0,dW),j=new Set(S.map(O=>O.slug)),N=_.filter(O=>!j.has(O.slug)),k=m?b:b.slice(0,Ub),{data:R={}}=De({queryKey:["channels-suggested-previews",S.map(O=>O.slug)],enabled:S.length>0,staleTime:3e4,queryFn:async()=>{const{data:O,error:C}=await U.from("blueprints").select("id, title, created_at").eq("is_public",!0).order("created_at",{ascending:!1}).limit(300);if(C)throw C;if(!O||O.length===0)return{};const D=O.map(V=>V.id),{data:I,error:z}=await U.from("blueprint_tags").select("blueprint_id, tags(slug)").in("blueprint_id",D);if(z)throw z;const A=new Map;(I||[]).forEach(V=>{const J=A.get(V.blueprint_id)||[];V.tags&&typeof V.tags=="object"&&"slug"in V.tags&&J.push(V.tags.slug),A.set(V.blueprint_id,J)});const P={};return O.forEach(V=>{const J=A.get(V.id)||[],L=Uc(J);if(!j.has(L))return;const Q=P[L]||[];Q.length>=3||(Q.push({id:V.id,title:V.title}),P[L]=Q)}),P}});d.useEffect(()=>{s||h||v.current||(v.current=!0,Pt({eventName:"channels_index_view",surface:"channels_index",user:e,metadata:{joined_channels_count:b.length,suggested_channels_count:S.length}}))},[h,b.length,S.length,s,e]),d.useEffect(()=>{s||h||S.length!==0&&PE("p3_channel_suggested_impression",()=>{Pt({eventName:"channel_suggested_impression",surface:"channels_index",user:e,metadata:{suggested_slugs:S.map(O=>O.slug).slice(0,4)}})})},[h,S,s,e]);const E=async O=>{const C=O.tagId?o({id:O.tagId}):"not_joined",D=C!=="joined"&&C!=="leaving";if(!e){D&&(Pt({eventName:"channel_join_click",surface:"channels_index",user:e,metadata:{channel_slug:O.slug,join_available:O.joinAvailable,source:"channels_index"}}),Pt({eventName:"channel_join_fail",surface:"channels_index",user:e,metadata:{channel_slug:O.slug,source:"channels_index",error_bucket:"auth_required"}})),p(!0),t({title:"Sign in required",description:"Please sign in to join channels."});return}if(!(!O.joinAvailable||!O.tagId)&&!(C==="joining"||C==="leaving"))try{C==="joined"?(await c({id:O.tagId,slug:O.tagSlug}),Pt({eventName:"channel_leave_success",surface:"channels_index",user:e,metadata:{channel_slug:O.slug,source:"channels_index"}})):(Pt({eventName:"channel_join_click",surface:"channels_index",user:e,metadata:{channel_slug:O.slug,join_available:O.joinAvailable,source:"channels_index"}}),await l({id:O.tagId,slug:O.tagSlug}),Pt({eventName:"channel_join_success",surface:"channels_index",user:e,metadata:{channel_slug:O.slug,source:"channels_index"}}))}catch(I){D&&Pt({eventName:"channel_join_fail",surface:"channels_index",user:e,metadata:{channel_slug:O.slug,source:"channels_index",error_bucket:RE(I)}}),t({title:"Channel update failed",description:I instanceof Error?I.message:"Please try again.",variant:"destructive"})}},$=O=>{if(s)return i.jsx("div",{className:"flex flex-col items-end gap-1",children:i.jsx(F,{size:"sm",variant:"outline",disabled:!0,className:"h-8 px-2 text-xs",children:i.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[i.jsx(rn,{className:"h-3.5 w-3.5 animate-spin"}),"Loading..."]})})});if(!O.isJoinEnabled)return i.jsxs("div",{className:"flex flex-col items-end gap-1",children:[i.jsx(F,{size:"sm",variant:"outline",disabled:!0,className:"h-8 px-2 text-xs",children:"Read only"}),i.jsx("span",{className:"text-[11px] text-muted-foreground",children:"General lane is read-only"})]});if(!O.joinAvailable)return i.jsxs("div",{className:"flex flex-col items-end gap-1",children:[i.jsx(F,{size:"sm",variant:"outline",disabled:!0,className:"h-8 px-2 text-xs",children:"Join"}),i.jsx("span",{className:"text-[11px] text-muted-foreground",children:"Channel activation pending"})]});const C=o({id:O.tagId}),D=C==="joining"||C==="leaving",I=C==="joined"||C==="leaving",z=C==="joining"?"Joining...":C==="leaving"?"Leaving...":C==="joined"?"Joined":"Join";return i.jsxs(F,{size:"sm",variant:I?"outline":"default",disabled:D,className:"h-8 px-2 text-xs",onClick:()=>E(O),children:[D&&i.jsx(rn,{className:"mr-1 h-3.5 w-3.5 animate-spin"}),z]})},M=O=>{const C=$c(O.icon);return i.jsx(pe,{to:`/b/${O.slug}`,className:"block",children:i.jsxs("div",{className:"py-3.5 px-1 flex items-center justify-between gap-4 hover:bg-muted/20 transition-colors",children:[i.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[i.jsx("div",{className:"h-8 w-8 rounded-md bg-primary/10 text-primary flex items-center justify-center shrink-0 mt-0.5",children:i.jsx(C,{className:"h-4 w-4"})}),i.jsxs("div",{className:"space-y-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium",children:O.name}),i.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:O.description})]})]}),i.jsx("div",{onClick:D=>{D.preventDefault(),D.stopPropagation()},children:$(O)})]})},O.slug)};return i.jsxs(ln,{children:[i.jsx(vt,{}),i.jsxs(cn,{className:"space-y-6",children:[i.jsxs(sn,{className:"space-y-2",children:[i.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:"Channels"}),i.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Browse curated channels"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Channels are curated lanes for blueprint discovery. Join channels to shape your feed."})]}),!e&&f&&i.jsxs("div",{className:"border border-border/40 px-3 py-3 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold",children:"Sign in to join channels"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Join channels to personalize your feed experience."})]}),i.jsx(F,{asChild:!0,size:"sm",children:i.jsx(pe,{to:"/auth",children:"Sign in"})})]}),i.jsx(fr,{}),i.jsxs("section",{className:"space-y-3",children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Your Channels"}),b.length===0?i.jsx("div",{className:"border border-border/40 px-3 py-3 text-sm text-muted-foreground",children:"You have not joined any channels yet."}):i.jsxs("div",{className:"divide-y divide-border/40 border-y border-border/40",children:[k.map(O=>M(O)),b.length>Ub&&i.jsxs("div",{className:"flex items-center justify-between px-1 py-2",children:[i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Showing ",k.length," of ",b.length]}),i.jsx(F,{variant:"ghost",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>w(O=>!O),children:m?"Show less":"View all"})]})]})]}),i.jsxs("section",{className:"space-y-3",children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Suggested Channels"}),s||h?i.jsx("div",{className:"border border-border/40 px-3 py-3 text-sm text-muted-foreground",children:"Loading suggestions..."}):S.length===0?i.jsx("div",{className:"border border-border/40 px-3 py-3 text-sm text-muted-foreground",children:"No suggested channels right now."}):i.jsx("div",{className:"divide-y divide-border/40 border-y border-border/40",children:S.map(O=>{const C=R[O.slug]||[],D=$c(O.icon);return i.jsx(pe,{to:`/b/${O.slug}`,className:"block",children:i.jsxs("div",{className:"py-3.5 px-1 space-y-3 hover:bg-muted/20 transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[i.jsx("div",{className:"h-8 w-8 rounded-md bg-primary/10 text-primary flex items-center justify-center shrink-0 mt-0.5",children:i.jsx(D,{className:"h-4 w-4"})}),i.jsxs("div",{className:"space-y-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium",children:O.name}),i.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:O.description})]})]}),i.jsx("div",{onClick:I=>{I.preventDefault(),I.stopPropagation()},children:$(O)})]}),C.length>0&&i.jsxs("div",{className:"pl-11 space-y-1",children:[i.jsx("p",{className:"text-[11px] uppercase tracking-wide text-muted-foreground",children:"Explore"}),i.jsx("ul",{className:"space-y-1",children:C.slice(0,3).map((I,z)=>i.jsx("li",{children:i.jsx(pe,{to:`/blueprint/${I.id}`,className:"text-xs text-foreground/85 hover:text-primary line-clamp-1",onClick:A=>{A.stopPropagation(),Pt({eventName:"channel_suggested_preview_click",surface:"channels_index",user:e,blueprintId:I.id,metadata:{channel_slug:O.slug,position:z}})},children:I.title})},I.id))})]})]})},O.slug)})})]}),i.jsxs("section",{className:"space-y-3",children:[i.jsx("h2",{className:"text-lg font-semibold",children:"More Channels"}),s||h?i.jsx("div",{className:"border border-border/40 px-3 py-3 text-sm text-muted-foreground",children:"Loading channels..."}):N.length===0?i.jsx("div",{className:"border border-border/40 px-3 py-3 text-sm text-muted-foreground",children:"No more channels to show."}):i.jsx("div",{className:"divide-y divide-border/40 border-y border-border/40",children:N.map(O=>M(O))})]}),i.jsx(Kr,{})]})]})}function fW({channelSlug:e,tab:t,pageSize:r=20}){const[n,s]=d.useState(r);d.useEffect(()=>{s(r)},[e,t,r]);const a=De({queryKey:["channel-feed-base",e],queryFn:async()=>{const{data:h,error:f}=await U.from("blueprints").select("id, title, selected_items, llm_review, mix_notes, likes_count, created_at").eq("is_public",!0).order("created_at",{ascending:!1}).limit(400);if(f)throw f;if(!h||h.length===0)return[];const p=h.map(y=>y.id),{data:m,error:w}=await U.from("blueprint_tags").select("blueprint_id, tags(slug)").in("blueprint_id",p);if(w)throw w;const g=new Map;return(m||[]).forEach(y=>{const x=g.get(y.blueprint_id)||[];y.tags&&typeof y.tags=="object"&&"slug"in y.tags&&x.push(y.tags.slug),g.set(y.blueprint_id,x)}),h.map(y=>{const x=g.get(y.id)||[];return{id:y.id,title:y.title,llmReview:y.llm_review,mixNotes:y.mix_notes,selectedItems:y.selected_items,likesCount:y.likes_count,createdAt:y.created_at,tags:x,primaryChannelSlug:Uc(x)}}).filter(y=>y.primaryChannelSlug===e)},staleTime:3e4}),o=d.useMemo(()=>{const h=[...a.data||[]];return t==="top"?(h.sort((f,p)=>p.likesCount!==f.likesCount?p.likesCount-f.likesCount:new Date(p.createdAt).getTime()-new Date(f.createdAt).getTime()),h):(h.sort((f,p)=>new Date(p.createdAt).getTime()-new Date(f.createdAt).getTime()),h)},[a.data,t]),l=o.slice(0,n),c=n<o.length,u=De({queryKey:["channel-feed-comments",l.map(h=>h.id)],enabled:l.length>0,staleTime:3e4,queryFn:async()=>{const h=l.map(m=>m.id),{data:f,error:p}=await U.from("blueprint_comments").select("blueprint_id").in("blueprint_id",h);if(p)throw p;return(f||[]).reduce((m,w)=>(m[w.blueprint_id]=(m[w.blueprint_id]||0)+1,m),{})}});return{posts:l,totalCount:o.length,hasMore:c,loadMore:()=>s(h=>Math.min(h+r,o.length)),commentCountsByBlueprintId:u.data||{},isLoading:a.isLoading,isError:a.isError,error:a.error}}function pW(){const{channelSlug:e}=ka(),r=My(e||""),{user:n}=Ne(),{toast:s}=St(),a=(r==null?void 0:r.tagSlug)??"",{data:o=[],isLoading:l}=mu(a?[a]:[]),{getFollowState:c,joinChannel:u,leaveChannel:h}=Pa(),[f,p]=d.useState(!1),[m,w]=d.useState("top"),[g,v]=d.useState(!1),y=d.useRef(!1);if(!r)return i.jsxs(ln,{children:[i.jsx(vt,{}),i.jsx(cn,{className:"py-10 space-y-6",children:i.jsxs("div",{className:"border border-border/40 px-3 py-4 space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("h1",{className:"text-lg font-semibold",children:"Channel not found"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"This channel slug is not part of the curated MVP channel list."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(F,{asChild:!0,children:i.jsx(pe,{to:"/channels",children:"Back to Channels"})}),i.jsx(F,{asChild:!0,variant:"outline",children:i.jsx(pe,{to:"/wall",children:"Go to Feed"})})]})]})})]});const x=o.find(z=>z.slug===r.tagSlug),b=r.isJoinEnabled&&r.status==="active"&&!!(x!=null&&x.id),_=$c(r.icon);d.useEffect(()=>{y.current||(y.current=!0,Pt({eventName:"channel_page_view",surface:"channel_page",user:n,metadata:{channel_slug:r.slug,tab:m}}))},[r.slug,m,n]);const S=async()=>{const z=x!=null&&x.id?c({id:x.id}):"not_joined",A=z!=="joined"&&z!=="leaving";if(!n){A&&(Pt({eventName:"channel_join_click",surface:"channel_page",user:n,metadata:{channel_slug:r.slug,join_available:b,source:"channel_page"}}),Pt({eventName:"channel_join_fail",surface:"channel_page",user:n,metadata:{channel_slug:r.slug,source:"channel_page",error_bucket:"auth_required"}})),p(!0),s({title:"Sign in required",description:"Please sign in to join channels."});return}if(!l&&!(!(x!=null&&x.id)||!b)&&!(z==="joining"||z==="leaving"))try{z==="joined"?(await h({id:x.id,slug:r.slug}),Pt({eventName:"channel_leave_success",surface:"channel_page",user:n,metadata:{channel_slug:r.slug,source:"channel_page"}})):(Pt({eventName:"channel_join_click",surface:"channel_page",user:n,metadata:{channel_slug:r.slug,join_available:b,source:"channel_page"}}),await u({id:x.id,slug:r.slug}),Pt({eventName:"channel_join_success",surface:"channel_page",user:n,metadata:{channel_slug:r.slug,source:"channel_page"}}))}catch(P){A&&Pt({eventName:"channel_join_fail",surface:"channel_page",user:n,metadata:{channel_slug:r.slug,source:"channel_page",error_bucket:RE(P)}}),s({title:"Channel update failed",description:P instanceof Error?P.message:"Please try again.",variant:"destructive"})}},j=x!=null&&x.id?c({id:x.id}):"not_joined",N=j==="joining"||j==="leaving",k=j==="joined"||j==="leaving",R=j==="joining"?"Joining...":j==="leaving"?"Leaving...":j==="joined"?"Joined":"Join",{posts:E,totalCount:$,hasMore:M,loadMore:O,commentCountsByBlueprintId:C,isLoading:D,isError:I}=fW({channelSlug:r.slug,tab:m,pageSize:20});return i.jsxs(ln,{children:[i.jsx(vt,{}),i.jsxs(cn,{className:"space-y-6",children:[i.jsxs(sn,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[i.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 text-primary flex items-center justify-center shrink-0",children:i.jsx(_,{className:"h-5 w-5"})}),i.jsxs("div",{className:"space-y-1 min-w-0",children:[i.jsxs("p",{className:"text-sm font-semibold text-primary",children:["b/",r.slug]}),i.jsx("h1",{className:"text-2xl font-semibold leading-tight",children:r.name})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(F,{size:"sm",variant:"outline",className:"gap-2",disabled:!bs(r.slug)||!!n&&!k,onClick:()=>v(!0),children:[i.jsx(Sa,{className:"h-4 w-4"}),"Create"]}),r.isJoinEnabled&&i.jsxs(F,{size:"sm",variant:k?"outline":"default",disabled:l||N||!b,onClick:S,children:[l&&i.jsx(rn,{className:"mr-1 h-3.5 w-3.5 animate-spin"}),!l&&N&&i.jsx(rn,{className:"mr-1 h-3.5 w-3.5 animate-spin"}),R]})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:r.description}),!r.isJoinEnabled&&i.jsx("p",{className:"text-xs text-muted-foreground",children:"General lane is read-only."}),r.isJoinEnabled&&!l&&!b&&i.jsx("p",{className:"text-xs text-muted-foreground",children:"Channel activation pending."}),bs(r.slug)&&n&&!k&&i.jsx("p",{className:"text-xs text-muted-foreground",children:"Join this channel to post here."})]}),!n&&f&&i.jsxs("div",{className:"border border-border/40 px-3 py-3 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold",children:"Sign in to join channels"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Join channels to personalize your feed experience."})]}),i.jsx(F,{asChild:!0,size:"sm",children:i.jsx(pe,{to:"/auth",children:"Sign in"})})]}),i.jsx(fr,{}),i.jsxs("section",{className:"space-y-3",children:[i.jsxs(Aa,{value:m,onValueChange:z=>w(z),children:[i.jsxs(ki,{className:"h-9 rounded-md bg-muted/40 p-0.5",children:[i.jsx(Sr,{value:"top",children:"Top"}),i.jsx(Sr,{value:"recent",children:"Recent"})]}),i.jsx(en,{value:m,className:"mt-3",children:D?i.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((z,A)=>i.jsxs("div",{className:"border border-border/40 px-3 py-3 space-y-2",children:[i.jsx(je,{className:"h-3 w-24"}),i.jsx(je,{className:"h-5 w-2/3"}),i.jsx(je,{className:"h-12 w-full"})]},A))}):I?i.jsx("div",{className:"border border-border/40 px-3 py-3 text-sm text-muted-foreground",children:"Failed to load channel feed. Please refresh and try again."}):E.length===0?i.jsx("div",{className:"border border-border/40 px-3 py-3 text-sm text-muted-foreground",children:"No blueprints found for this channel yet."}):i.jsx("div",{className:"divide-y divide-border/40 border-y border-border/40",children:E.map(z=>{const A=vu({primary:z.llmReview,secondary:z.mixNotes,fallback:"Open to view the full step-by-step guide.",maxChars:220}),P=kf(z.createdAt),V=C[z.id]||0;return i.jsx(pe,{to:`/blueprint/${z.id}`,className:"block px-0 sm:px-1 py-2.5 transition-colors hover:bg-muted/20",children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsxs("p",{className:"text-[11px] font-semibold tracking-wide text-foreground/75",children:["b/",z.primaryChannelSlug]}),i.jsx("span",{className:"text-[11px] text-muted-foreground",children:P})]}),i.jsx("h3",{className:"text-base font-semibold leading-tight",children:z.title}),i.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:A}),z.tags.length>0&&i.jsx(yu,{className:"flex flex-nowrap gap-1.5 overflow-hidden",items:z.tags.map(J=>({key:J,label:`#${J}`,variant:"outline",className:"text-xs border bg-muted/40 text-muted-foreground border-border/60"}))}),i.jsxs("div",{className:"flex items-center gap-1.5 pt-1 text-xs text-muted-foreground",children:[i.jsxs("span",{className:"inline-flex h-7 items-center gap-1 px-2",children:[i.jsx(Kt,{className:"h-4 w-4"}),z.likesCount]}),i.jsxs("span",{className:"inline-flex h-7 items-center gap-1 px-2",children:[i.jsx(Kh,{className:"h-4 w-4"}),V]}),i.jsx(F,{variant:"ghost",size:"sm",className:"h-7 px-2",disabled:!0,onClick:J=>J.preventDefault(),children:i.jsx(Gh,{className:"h-4 w-4"})})]})]})},z.id)})})})]}),!D&&!I&&E.length>0&&i.jsxs("div",{className:"flex flex-col items-center gap-2 pt-2",children:[M?i.jsx(F,{variant:"outline",size:"sm",onClick:O,children:"Load more"}):i.jsx("p",{className:"text-xs text-muted-foreground",children:"No more posts"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Showing ",E.length," of ",$]})]})]}),i.jsx(Kr,{})]}),i.jsx(gC,{open:g,onOpenChange:v,presetChannelSlug:r.slug})]})}function mW(){const{user:e}=Ne(),t=ir(),r=De({queryKey:["post-bookmarks",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const{data:s,error:a}=await U.from("post_bookmarks").select("post_id, created_at").eq("user_id",e.id).order("created_at",{ascending:!1});if(a)throw a;return s||[]},enabled:!!e}),n=$t({mutationFn:async({postId:s,bookmarked:a})=>{if(!e)throw new Error("Must be logged in");if(a){const{error:o}=await U.from("post_bookmarks").delete().eq("post_id",s).eq("user_id",e.id);if(o)throw o}else{const{error:o}=await U.from("post_bookmarks").insert({post_id:s,user_id:e.id});if(o)throw o}},onSuccess:()=>{t.invalidateQueries({queryKey:["post-bookmarks"]}),t.invalidateQueries({queryKey:["wall-posts"]})}});return{bookmarks:r.data||[],isLoading:r.isLoading,toggleBookmark:n.mutateAsync,isUpdating:n.isPending}}function gW(e,t){const r=new Map,n=[];return e.forEach(s=>{r.set(s.id,{...s,user_liked:t.has(s.id),children:[]})}),r.forEach(s=>{s.parent_id&&r.has(s.parent_id)?r.get(s.parent_id).children.push(s):n.push(s)}),n}function M2(e,t){const r=(n,s)=>t==="latest"?new Date(s.created_at).getTime()-new Date(n.created_at).getTime():s.likes_count!==n.likes_count?s.likes_count-n.likes_count:new Date(s.created_at).getTime()-new Date(n.created_at).getTime();e.sort(r),e.forEach(n=>M2(n.children,t))}function vW(e,t){const{user:r}=Ne(),n=ir(),s=De({queryKey:["wall-comments",e,r==null?void 0:r.id,t],queryFn:async()=>{const{data:u,error:h}=await U.from("wall_comments").select("id, post_id, user_id, parent_id, body, likes_count, created_at, updated_at").eq("post_id",e).order("created_at",{ascending:!0});if(h)throw h;if(!u||u.length===0)return[];const f=u.map(b=>b.id),p=[...new Set(u.map(b=>b.user_id))],[m,w]=await Promise.all([U.from("profiles").select("user_id, display_name, avatar_url").in("user_id",p),r?U.from("comment_likes").select("comment_id").eq("user_id",r.id).in("comment_id",f):Promise.resolve({data:[]})]),g=new Map((m.data||[]).map(b=>[b.user_id,b])),v=new Set((w.data||[]).map(b=>b.comment_id)),y=u.map(b=>({...b,profile:g.get(b.user_id)||{display_name:null,avatar_url:null},user_liked:v.has(b.id),children:[]})),x=gW(y,v);return M2(x,t),x}}),a=$t({mutationFn:async({body:u,parentId:h})=>{if(!r)throw new Error("Must be logged in");const{error:f}=await U.from("wall_comments").insert({post_id:e,user_id:r.id,body:u,parent_id:h??null});if(f)throw f},onSuccess:()=>n.invalidateQueries({queryKey:["wall-comments",e]})}),o=$t({mutationFn:async({commentId:u,body:h})=>{if(!r)throw new Error("Must be logged in");const{error:f}=await U.from("wall_comments").update({body:h}).eq("id",u).eq("user_id",r.id);if(f)throw f},onSuccess:()=>n.invalidateQueries({queryKey:["wall-comments",e]})}),l=$t({mutationFn:async u=>{if(!r)throw new Error("Must be logged in");const{error:h}=await U.from("wall_comments").delete().eq("id",u).eq("user_id",r.id);if(h)throw h},onSuccess:()=>n.invalidateQueries({queryKey:["wall-comments",e]})}),c=$t({mutationFn:async({commentId:u,liked:h})=>{if(!r)throw new Error("Must be logged in");if(h){const{error:f}=await U.from("comment_likes").delete().eq("comment_id",u).eq("user_id",r.id);if(f)throw f}else{const{error:f}=await U.from("comment_likes").insert({comment_id:u,user_id:r.id});if(f)throw f}},onSuccess:()=>n.invalidateQueries({queryKey:["wall-comments",e]})});return{comments:s.data||[],isLoading:s.isLoading,addComment:a.mutateAsync,updateComment:o.mutateAsync,deleteComment:l.mutateAsync,toggleLike:c.mutateAsync,isUpdating:a.isPending||o.isPending||l.isPending||c.isPending}}function D2({comment:e,onReply:t,onEdit:r,onDelete:n,onToggleLike:s,currentUserId:a,depth:o=0}){const[l,c]=d.useState(!1),[u,h]=d.useState(!1),[f,p]=d.useState(""),[m,w]=d.useState(e.body),[g,v]=d.useState(5),y=e.profile.display_name||"Anonymous",x=y.slice(0,2).toUpperCase(),b=a===e.user_id,_=e.updated_at!==e.created_at,S=async()=>{f.trim()&&(await t(e.id,f.trim()),p(""),c(!1))},j=async()=>{m.trim()&&(await r(e.id,m.trim()),h(!1))};return i.jsxs("div",{className:H("space-y-2",o>0&&"border-l border-border/50 pl-4"),children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(Kn,{className:"h-8 w-8",children:[i.jsx(Gn,{src:e.profile.avatar_url||void 0}),i.jsx(Yn,{className:"bg-primary/10 text-primary text-xs",children:x})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[i.jsx("span",{className:"font-medium text-foreground",children:y}),i.jsx("span",{children:Go(new Date(e.created_at),{addSuffix:!0})}),_&&i.jsx("span",{children:"(edited)"})]}),u?i.jsxs("div",{className:"space-y-2 mt-2",children:[i.jsx(pr,{value:m,onChange:N=>w(N.target.value),rows:2}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(F,{size:"sm",onClick:j,children:"Save"}),i.jsx(F,{size:"sm",variant:"outline",onClick:()=>h(!1),children:"Cancel"})]})]}):i.jsx("p",{className:"text-sm mt-1 whitespace-pre-wrap",children:e.body}),i.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs",children:[i.jsxs(F,{variant:"ghost",size:"sm",className:e.user_liked?"text-red-500":"",onClick:()=>s(e.id,e.user_liked),children:[i.jsx(Kt,{className:H("h-3 w-3 mr-1",e.user_liked&&"fill-current")}),e.likes_count]}),i.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>c(!l),children:[i.jsx(hO,{className:"h-3 w-3 mr-1"})," Reply"]}),b&&i.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>h(!u),children:[i.jsx(eS,{className:"h-3 w-3 mr-1"})," Edit"]}),b&&i.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>n(e.id),children:[i.jsx(Yd,{className:"h-3 w-3 mr-1"})," Delete"]})]}),l&&i.jsxs("div",{className:"space-y-2 mt-2",children:[i.jsx(pr,{value:f,onChange:N=>p(N.target.value),placeholder:"Write a reply...",rows:2}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(F,{size:"sm",onClick:S,children:"Reply"}),i.jsx(F,{size:"sm",variant:"outline",onClick:()=>c(!1),children:"Cancel"})]})]})]})]}),e.children.length>0&&i.jsxs("div",{className:"space-y-3",children:[e.children.slice(0,g).map(N=>i.jsx(D2,{comment:N,onReply:t,onEdit:r,onDelete:n,onToggleLike:s,currentUserId:a,depth:o+1},N.id)),e.children.length>g&&i.jsxs(F,{variant:"outline",size:"sm",onClick:()=>v(N=>N+5),children:["Load more replies (",e.children.length-g,")"]})]})]})}function yW({postId:e}){const{user:t}=Ne(),[r,n]=d.useState("top"),{comments:s,isLoading:a,addComment:o,updateComment:l,deleteComment:c,toggleLike:u}=vW(e,r),[h,f]=d.useState(""),p=async()=>{h.trim()&&(await o({body:h.trim(),parentId:null}),f(""))};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:"text-sm font-medium",children:"Comments"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(F,{variant:r==="top"?"default":"outline",size:"sm",onClick:()=>n("top"),children:"Top"}),i.jsx(F,{variant:r==="latest"?"default":"outline",size:"sm",onClick:()=>n("latest"),children:"Latest"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(pr,{value:h,onChange:m=>f(m.target.value),placeholder:t?"Join the discussion...":"Sign in to comment",rows:3,disabled:!t}),i.jsx(F,{onClick:p,disabled:!t||!h.trim(),children:"Post Comment"})]}),a?i.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading comments..."}):s.length===0?i.jsx("p",{className:"text-sm text-muted-foreground",children:"No comments yet. Be the first!"}):i.jsx("div",{className:"space-y-4",children:s.map(m=>i.jsx(D2,{comment:m,onReply:async(w,g)=>o({body:g,parentId:w}),onEdit:async(w,g)=>l({commentId:w,body:g}),onDelete:c,onToggleLike:(w,g)=>u({commentId:w,liked:g}),currentUserId:t==null?void 0:t.id},m.id))})]})}const xW={blend:Vv,protein:Q1,stack:Wv},wW={blend:"bg-purple-500/10 text-purple-500",protein:"bg-green-500/10 text-green-500",stack:"bg-blue-500/10 text-blue-500"};function bW(){const{postId:e}=ka(),{user:t,isLoading:r}=Ne(),{toast:n}=St(),s=ir(),{bookmarks:a,isLoading:o,toggleBookmark:l,isUpdating:c}=mW(),u=d.useMemo(()=>a.map(v=>v.post_id),[a]),h=d.useMemo(()=>new Set(u),[u]);if(r)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})});if(!t)return i.jsx(fa,{to:"/auth",replace:!0});if(!e)return i.jsx(fa,{to:"/wall",replace:!0});const f=["wall-post",e,t==null?void 0:t.id,u],{data:p,isLoading:m}=De({queryKey:f,enabled:!!e&&!!t&&!o,queryFn:async()=>{const{data:v,error:y}=await U.from("wall_posts").select("id, user_id, recipe_id, caption, likes_count, created_at").eq("id",e).single();if(y)throw y;const[x,b,_,S]=await Promise.all([U.from("user_recipes").select("id, name, recipe_type, items, analysis, visibility").eq("id",v.recipe_id).single(),U.from("profiles").select("user_id, display_name, avatar_url").eq("user_id",v.user_id).single(),U.from("post_likes").select("post_id").eq("post_id",e).eq("user_id",t.id),U.from("recipe_tags").select("recipe_id, tag_id").eq("recipe_id",v.recipe_id)]),j=S.data||[],N=[...new Set(j.map(R=>R.tag_id))],{data:k}=N.length>0?await U.from("tags").select("id, slug").in("id",N):{data:[]};return{...v,recipe:x.data||{id:"",name:"Unknown",recipe_type:"blend",items:[],analysis:null,visibility:"public"},profile:b.data||{display_name:null,avatar_url:null},tags:k||[],user_liked:(_.data||[]).length>0,user_bookmarked:h.has(v.id)}}}),w=$t({mutationFn:async({liked:v})=>{if(!t)throw new Error("Must be logged in");v?await U.from("post_likes").delete().eq("post_id",e).eq("user_id",t.id):await U.from("post_likes").insert({post_id:e,user_id:t.id})},onMutate:async({liked:v})=>{await s.cancelQueries({queryKey:f});const y=s.getQueryData(f);return y&&s.setQueryData(f,{...y,user_liked:!v,likes_count:v?y.likes_count-1:y.likes_count+1}),{previousPost:y}},onError:(v,y,x)=>{s.setQueryData(f,x==null?void 0:x.previousPost),n({title:"Error",description:"Failed to update like. Please try again.",variant:"destructive"})}}),g=async v=>{try{await l({postId:e,bookmarked:v}),s.invalidateQueries({queryKey:f})}catch(y){n({title:"Failed to update bookmark",description:y instanceof Error?y.message:"Please try again",variant:"destructive"})}};return i.jsxs(ln,{children:[i.jsx(vt,{}),i.jsxs(cn,{className:"space-y-6",children:[m?i.jsx("div",{className:"border border-border/40 py-12 text-center text-muted-foreground",children:"Loading post..."}):p?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-row items-center gap-3 pb-2",children:[i.jsxs(Kn,{className:"h-10 w-10",children:[i.jsx(Gn,{src:p.profile.avatar_url||void 0}),i.jsx(Yn,{className:"bg-primary/10 text-primary text-sm",children:(p.profile.display_name||"Anonymous").slice(0,2).toUpperCase()})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-sm",children:p.profile.display_name||"Anonymous"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Go(new Date(p.created_at),{addSuffix:!0})})]}),i.jsxs(Me,{variant:"secondary",className:wW[p.recipe.recipe_type],children:[(()=>{const v=xW[p.recipe.recipe_type];return i.jsx(v,{className:"h-3 w-3 mr-1"})})(),p.recipe.recipe_type]})]}),i.jsx(fr,{}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"border border-border/40 px-3 py-3 space-y-2",children:[i.jsx("h3",{className:"font-semibold",children:p.recipe.name}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[Array.isArray(p.recipe.items)?p.recipe.items.length:0," ingredient",Array.isArray(p.recipe.items)&&p.recipe.items.length!==1?"s":""]}),p.caption&&i.jsx("p",{className:"text-sm pt-2 border-t border-border/40",children:p.caption})]}),p.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2",children:p.tags.map(v=>i.jsx(pe,{to:`/explore?q=${v.slug}`,children:i.jsxs(Me,{variant:"outline",className:"text-xs hover:border-primary hover:text-primary",children:["#",v.slug]})},v.id))})]}),i.jsx(fr,{}),i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4 w-full",children:[i.jsxs(F,{variant:"ghost",size:"sm",className:p.user_liked?"text-red-500":"",onClick:()=>w.mutate({liked:p.user_liked}),children:[i.jsx(Kt,{className:`h-4 w-4 mr-1 ${p.user_liked?"fill-current":""}`}),p.likes_count]}),i.jsxs(F,{variant:"ghost",size:"sm",className:p.user_bookmarked?"text-primary":"",onClick:()=>g(p.user_bookmarked),disabled:c,children:[i.jsx($I,{className:`h-4 w-4 mr-1 ${p.user_bookmarked?"fill-current":""}`}),"Save"]})]}),i.jsx(yW,{postId:p.id})]})]}):i.jsx("div",{className:"border border-border/40 py-12 text-center text-muted-foreground",children:"Post not found."}),i.jsx(Kr,{})]})]})}function _W({inventory:e,onLike:t,linkSearch:r,variant:n="grid_flat"}){const s=e.tags.map(a=>a.slug).find(a=>bs(a))||null;return i.jsx(pe,{to:`/inventory/${e.id}/build${r||""}`,className:H("block group",n==="grid_flat"&&"h-full"),children:i.jsx("div",{className:H("h-full bg-transparent transition-colors","group-focus-visible:ring-2 group-focus-visible:ring-primary","hover:bg-muted/10"),children:i.jsxs("div",{className:H("p-1 flex flex-col h-full",n==="grid_flat"?"":"p-0"),children:[s&&i.jsxs("p",{className:"text-[11px] font-semibold tracking-wide text-foreground/75 mb-1",children:["b/",s]}),i.jsx("h3",{className:"font-semibold text-lg line-clamp-1 mb-1",children:e.title}),i.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3 flex-grow",children:e.prompt_inventory}),i.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border/40",children:[i.jsx("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:i.jsxs("span",{className:"flex items-center gap-1",title:"Blueprints using this library",children:[i.jsx(JI,{className:"h-3.5 w-3.5"}),i.jsx("span",{children:e.blueprint_count})]})}),i.jsxs(F,{variant:"ghost",size:"sm",className:`h-8 px-2 ${e.user_liked?"text-red-500 hover:text-red-600":"text-muted-foreground hover:text-foreground"}`,onClick:a=>{a.preventDefault(),a.stopPropagation(),t(e.id,e.user_liked)},"aria-label":e.user_liked?"Unlike library":"Like library",children:[i.jsx(Kt,{className:`h-4 w-4 ${e.user_liked?"fill-current":""}`}),i.jsx("span",{className:"ml-1 text-xs",children:e.likes_count})]})]})]})})})}const $g="id, title, prompt_inventory, prompt_categories, generated_schema, review_sections, include_score, creator_user_id, is_public, likes_count, created_at, updated_at";function jW(e,t){const r=e,n=`${(r==null?void 0:r.message)||""} ${(r==null?void 0:r.details)||""} ${(r==null?void 0:r.hint)||""}`.toLowerCase();return n.includes("does not exist")&&n.includes(t.toLowerCase())}async function SW(e,t){const r=Oy(e);if(r.length===0)return[];const{data:n,error:s}=await U.from("tags").select("id, slug").in("slug",r);if(s)throw s;const a=n||[],o=new Set(a.map(c=>c.slug)),l=r.filter(c=>!o.has(c));if(l.length>0)throw new Error(`Channel tag(s) not found: ${l.join(", ")}`);return a}async function Fg(e,t){if(e.length===0)return[];const r=e.map(m=>m.id),[n,s,a]=await Promise.all([U.from("inventory_tags").select("inventory_id, tag_id").in("inventory_id",r),t?U.from("inventory_likes").select("inventory_id").eq("user_id",t).in("inventory_id",r):Promise.resolve({data:[]}),U.from("blueprints").select("inventory_id").in("inventory_id",r)]),o=n.data||[],l=[...new Set(o.map(m=>m.tag_id))],{data:c}=l.length>0?await U.from("tags").select("id, slug").in("id",l):{data:[]},u=new Map((c||[]).map(m=>[m.id,m])),h=new Map;o.forEach(m=>{const w=u.get(m.tag_id);if(!w)return;const g=h.get(m.inventory_id)||[];g.push(w),h.set(m.inventory_id,g)});const f=new Set((s.data||[]).map(m=>m.inventory_id)),p=new Map;return(a.data||[]).forEach(m=>{m.inventory_id&&p.set(m.inventory_id,(p.get(m.inventory_id)||0)+1)}),e.map(m=>({...m,tags:h.get(m.id)||[],user_liked:f.has(m.id),is_owner:t===m.creator_user_id,blueprint_count:p.get(m.id)||0}))}function NW(e,t="popular"){const{user:r}=Ne();return De({queryKey:["inventory-search",e,t,r==null?void 0:r.id],queryFn:async()=>{const n=e.trim();let s=[];const a=t==="latest"?{column:"created_at",ascending:!1}:{column:"likes_count",ascending:!1};if(!n){let u=U.from("inventories").select($g).order(a.column,{ascending:a.ascending}).limit(60);r!=null&&r.id?u=u.or(`is_public.eq.true,creator_user_id.eq.${r.id}`):u=u.eq("is_public",!0);const{data:h,error:f}=await u;if(f)throw f;return s=h||[],Fg(s,r==null?void 0:r.id)}const o=[],{data:l}=await U.from("inventories").select($g).ilike("title",`%${n}%`).order(a.column,{ascending:a.ascending});return l&&o.push(...l),s=Array.from(new Map(o.map(u=>[u.id,u])).values()),Fg(s,r==null?void 0:r.id)}})}function ax(e){const{user:t}=Ne();return De({queryKey:["inventory",e,t==null?void 0:t.id],enabled:!!e,queryFn:async()=>{const{data:r,error:n}=await U.from("inventories").select($g).eq("id",e).single();if(n)throw n;return r?(await Fg([r],t==null?void 0:t.id))[0]??null:null}})}function L2(){const e=ir(),{user:t}=Ne();return $t({mutationFn:async({inventoryId:r,liked:n})=>{if(!(t!=null&&t.id))throw new Error("Must be logged in");if(n){const{error:s}=await U.from("inventory_likes").delete().eq("inventory_id",r).eq("user_id",t.id);if(s)throw s}else{const{error:s}=await U.from("inventory_likes").insert({inventory_id:r,user_id:t.id});if(s)throw s}},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory-search"]}),e.invalidateQueries({queryKey:["inventory"]})}})}function kW(){const e=ir(),{user:t}=Ne();return $t({mutationFn:async r=>{if(!(t!=null&&t.id))throw new Error("Must be logged in");const n={title:r.title,prompt_inventory:r.promptInventory,prompt_categories:r.promptCategories,generated_schema:r.generatedSchema,review_sections:r.reviewSections,include_score:r.includeScore,creator_user_id:t.id,is_public:r.isPublic},s=u=>U.from("inventories").insert(u).select("id").single();let a=await s({...n,...r.generationControls?{generation_controls:r.generationControls}:{}});a.error&&r.generationControls&&jW(a.error,"generation_controls")&&(a=await s(n));const{data:o,error:l}=a;if(l)throw l;const c=await SW(r.tags,t.id);if(c.length>0){const{error:u}=await U.from("inventory_tags").insert(c.map(h=>({inventory_id:o.id,tag_id:h.id})));if(u)throw u}return r.sourceInventoryId&&await U.from("inventory_remixes").insert({inventory_id:o.id,source_inventory_id:r.sourceInventoryId,user_id:t.id}),o},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory-search"]})}})}function CW(){const e=ir(),{user:t}=Ne();return $t({mutationFn:async r=>{if(!(t!=null&&t.id))throw new Error("Must be logged in");const{error:n}=await U.from("inventories").update({review_sections:r.reviewSections,include_score:r.includeScore}).eq("id",r.inventoryId).eq("creator_user_id",t.id);if(n)throw n},onSuccess:(r,n)=>{e.invalidateQueries({queryKey:["inventory",n.inventoryId]}),e.invalidateQueries({queryKey:["inventory-search"]})}})}const Bb="id, title, prompt_inventory, prompt_categories, generated_schema, review_sections, include_score, creator_user_id, is_public, likes_count, created_at, updated_at";function EW(e=6){const{user:t}=Ne();return De({queryKey:["suggested-inventories",t==null?void 0:t.id,e],queryFn:async()=>{let r=[];if(t!=null&&t.id){const{data:g}=await U.from("inventory_likes").select("inventory_id").eq("user_id",t.id),v=(g||[]).map(y=>y.inventory_id);if(v.length>0){const{data:y}=await U.from("inventory_tags").select("tag_id").in("inventory_id",v);r=[...new Set((y||[]).map(x=>x.tag_id))]}}let n=[];if(r.length>0&&(t!=null&&t.id)){const{data:g}=await U.from("inventory_tags").select("inventory_id").in("tag_id",r),v=[...new Set((g||[]).map(_=>_.inventory_id))],{data:y}=await U.from("inventory_likes").select("inventory_id").eq("user_id",t.id),x=new Set((y||[]).map(_=>_.inventory_id)),b=v.filter(_=>!x.has(_));if(b.length>0){const{data:_}=await U.from("inventories").select(Bb).in("id",b).eq("is_public",!0).order("likes_count",{ascending:!1}).limit(e);n=_||[]}}if(n.length<e){const g=n.map(x=>x.id),{data:v}=await U.from("inventories").select(Bb).eq("is_public",!0).order("likes_count",{ascending:!1}).limit(e*2),y=(v||[]).filter(x=>!g.includes(x.id)).slice(0,e-n.length);n=[...n,...y]}if(n.length===0)return[];const s=n.map(g=>g.id),[a,o,l]=await Promise.all([U.from("inventory_tags").select("inventory_id, tag_id").in("inventory_id",s),t!=null&&t.id?U.from("inventory_likes").select("inventory_id").eq("user_id",t.id).in("inventory_id",s):Promise.resolve({data:[]}),U.from("blueprints").select("inventory_id").in("inventory_id",s)]),c=a.data||[],u=[...new Set(c.map(g=>g.tag_id))],{data:h}=u.length>0?await U.from("tags").select("id, slug").in("id",u):{data:[]},f=new Map((h||[]).map(g=>[g.id,g])),p=new Map;c.forEach(g=>{const v=f.get(g.tag_id);if(!v)return;const y=p.get(g.inventory_id)||[];y.push(v),p.set(g.inventory_id,y)});const m=new Set((o.data||[]).map(g=>g.inventory_id)),w=new Map;return(l.data||[]).forEach(g=>{g.inventory_id&&w.set(g.inventory_id,(w.get(g.inventory_id)||0)+1)}),n.map(g=>({...g,tags:p.get(g.id)||[],user_liked:m.has(g.id),is_owner:(t==null?void 0:t.id)===g.creator_user_id,blueprint_count:w.get(g.id)||0}))},staleTime:2*60*1e3})}function TW(){const e=Er(),[t]=su(),r=(t.get("channel")||"").trim(),n=r?gu(r):null,[s,a]=d.useState(""),[o,l]=d.useState("popular"),[c,u]=d.useState(!1),{user:h}=Ne(),{toast:f}=St(),p=d.useRef(!1),m=s;d.useEffect(()=>{p.current||(p.current=!0,At({eventName:"view_library",userId:h==null?void 0:h.id,path:window.location.pathname}))},[h==null?void 0:h.id]);const{data:w,isLoading:g}=NW(m,o),{data:v=[],isLoading:y}=EW(6),x=L2(),b=new Set(v.map(E=>E.id)),_=d.useMemo(()=>w?m?w:w.filter(E=>!b.has(E.id)):[],[m,w,b]),S=!m&&h&&o==="popular",j=d.useMemo(()=>!S||!v||v.length===0||y?_:[...v,..._],[_,S,v,y]),N=async(E,$)=>{if(!h){f({title:"Sign in required",description:"Please sign in to like inventories.",variant:"destructive"});return}try{await x.mutateAsync({inventoryId:E,liked:$})}catch(M){f({title:"Action failed",description:M instanceof Error?M.message:"Please try again.",variant:"destructive"})}},k=d.useMemo(()=>{const E=new Set(Ra());return Array.from(E).forEach($=>{bs($)||E.delete($)}),E},[]),R=d.useMemo(()=>j.filter($=>{const M=$.tags.map(C=>C.slug);return M.some(C=>k.has(C))?n?M.includes(n.tagSlug):!0:!1}),[j,k,n]);return i.jsxs(ln,{children:[i.jsx(vt,{}),i.jsxs(cn,{className:"space-y-6",children:[i.jsxs(sn,{children:[i.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:"Library"}),i.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Pick a library, then build your blueprint"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Browse collections of items, open one, then start shaping your routine step by step."})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(F,{variant:"ghost",size:"sm",onClick:()=>u(E=>!E),children:"What is a Library?"}),i.jsx(pe,{to:n?ma("/inventory/create",n.slug,{intent:"post"}):"/inventory/create",children:i.jsxs(F,{size:"sm",className:"gap-2",children:[i.jsx(Sa,{className:"h-4 w-4"}),"Create"]})})]})]}),n&&i.jsxs("div",{className:"border border-border/40 p-3 flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"text-sm font-semibold",children:["Posting to b/",n.slug]}),i.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:"Choose a library, then publish your blueprint into this channel."})]}),i.jsx(F,{asChild:!0,size:"sm",variant:"outline",children:i.jsx(pe,{to:`/b/${n.slug}`,children:"View"})})]}),c&&i.jsx("div",{className:"border border-border/40 p-4 text-sm text-muted-foreground leading-relaxed",children:i.jsx("p",{children:"Think of a Library as a curated list of items you can use to build a routine. It is the ingredient shelf for a blueprint. Each library is organized into categories so you can scan quickly. You do not have to use everything; it is a toolbox, not a checklist."})})]}),i.jsx(fr,{}),i.jsxs("div",{className:"border border-transparent px-3 py-3 flex flex-col gap-3 sm:flex-row sm:items-center",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[i.jsx(Na,{className:"h-4 w-4 text-muted-foreground shrink-0"}),i.jsx(ze,{value:s,onChange:E=>{a(E.target.value)},placeholder:"Search libraries by title...",className:"border-none shadow-none focus-visible:ring-0 bg-transparent"})]}),i.jsx("div",{className:"w-full sm:w-56",children:i.jsxs(ya,{value:o,onValueChange:E=>l(E),children:[i.jsx(vi,{children:i.jsx(xa,{placeholder:"Sort by"})}),i.jsxs(yi,{children:[i.jsx(Vn,{value:"popular",children:"Most liked"}),i.jsx(Vn,{value:"latest",children:"Newest"})]})]})})]}),i.jsxs("section",{className:"space-y-4",children:[m?i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsxs("h2",{className:"text-sm font-semibold text-muted-foreground",children:["Results for ",i.jsxs("span",{className:"text-foreground",children:['"',m,'"']})]}),i.jsx(F,{variant:"ghost",size:"sm",className:"text-muted-foreground",onClick:()=>{a(""),setSelectedTag(null)},children:"Clear"})]}):i.jsx("h2",{className:"text-sm font-semibold text-muted-foreground",children:o==="latest"?"Newest libraries":"Popular libraries"}),g?i.jsx(mh,{variant:"tiles",items:Array.from({length:6}),renderItem:(E,{index:$})=>i.jsxs("div",{className:"space-y-3",children:[i.jsx(je,{className:"h-5 w-3/4"}),i.jsx(je,{className:"h-10 w-full"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(je,{className:"h-5 w-16"}),i.jsx(je,{className:"h-5 w-20"})]}),i.jsx(je,{className:"h-4 w-full"})]})}):R.length>0?i.jsx(mh,{variant:"tiles",items:R,renderItem:E=>i.jsx(_W,{inventory:E,onLike:N,linkSearch:n?e.search:"",variant:"grid_flat"})}):i.jsxs("div",{className:"border border-border/40 py-12 text-center space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"No libraries found"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:m?"Try a different search or clear filters.":"Be the first to create a library!"}),i.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:m?i.jsx(F,{variant:"outline",onClick:()=>{a("")},children:"Clear search"}):i.jsx(pe,{to:"/inventory/create",children:i.jsx(F,{children:"Create Library"})})})]})]}),i.jsx(Kr,{})]})]})}const Bc="inventory_create_tour_completed",Ml=[{targetId:"domain",title:"Pick Controls",description:"Choose a domain and a few settings. No prompt needed."},{targetId:"generate",title:"Generate with AI",description:"Click Generate to create categories and items automatically."},{targetId:"edit-categories",title:"Review & Edit",description:"Rename categories, add items, or remove what you don't need."},{targetId:"publish",title:"Create & Build",description:"Publish your library and start creating blueprints!"}];function PW({isActive:e,onComplete:t,onSkip:r}){const[n,s]=d.useState(0),[a,o]=d.useState(null),l=Ml[n],c=d.useCallback(()=>{if(!l)return;const p=document.querySelector(`[data-help-id="${l.targetId}"]`);o(p?p.getBoundingClientRect():null)},[l]);d.useEffect(()=>{if(e)return c(),window.addEventListener("resize",c),window.addEventListener("scroll",c),()=>{window.removeEventListener("resize",c),window.removeEventListener("scroll",c)}},[e,c,n]),d.useEffect(()=>{if(!e)return;const p=m=>{m.key==="Escape"?r():(m.key==="ArrowRight"||m.key==="Enter")&&u()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e,n,r]);const u=d.useCallback(()=>{n<Ml.length-1?s(p=>p+1):(localStorage.setItem(Bc,"true"),t())},[n,t]),h=d.useCallback(()=>{localStorage.setItem(Bc,"true"),r()},[r]);if(!e||!l)return null;const f=(()=>{if(!a)return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};const p=window.innerHeight,m=window.innerWidth,w=320,g=180,v=16;let y=a.bottom+v,x=a.left+a.width/2-w/2;return y+g>p-20&&(y=a.top-g-v),x<20&&(x=20),x+w>m-20&&(x=m-w-20),{top:`${y}px`,left:`${x}px`}})();return Tn.createPortal(i.jsxs("div",{className:"fixed inset-0 z-50",children:[i.jsx("div",{className:"absolute inset-0",children:i.jsxs("svg",{className:"w-full h-full",children:[i.jsx("defs",{children:i.jsxs("mask",{id:"inventory-spotlight-mask",children:[i.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),a&&i.jsx("rect",{x:a.left-8,y:a.top-8,width:a.width+16,height:a.height+16,rx:"12",fill:"black"})]})}),i.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"hsl(var(--background) / 0.8)",mask:"url(#inventory-spotlight-mask)",className:"animate-in fade-in duration-300"})]})}),a&&i.jsx("div",{className:"absolute rounded-xl border-2 border-orange-500 shadow-[0_0_20px_rgba(249,115,22,0.4)] pointer-events-none animate-pulse",style:{left:a.left-8,top:a.top-8,width:a.width+16,height:a.height+16}}),i.jsx(Oe,{className:"fixed w-80 bg-card border-border shadow-lg animate-in slide-in-from-bottom-2 duration-300 z-10",style:f,children:i.jsxs(Be,{className:"p-4 space-y-4",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("h3",{className:"font-semibold",children:l.title}),i.jsx("p",{className:"text-sm text-muted-foreground",children:l.description})]}),i.jsx(F,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:h,children:i.jsx(rr,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex gap-1.5",children:Ml.map((p,m)=>i.jsx("div",{className:H("h-1.5 w-1.5 rounded-full transition-colors",m===n?"bg-orange-500":"bg-muted-foreground/30")},m))}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(F,{variant:"ghost",size:"sm",onClick:h,children:"Skip"}),i.jsxs(F,{size:"sm",onClick:u,className:"gap-1",children:[n===Ml.length-1?"Done":"Next",n<Ml.length-1&&i.jsx(Hh,{className:"h-4 w-4"})]})]})]})]})})]}),document.body)}function RW({onStartTour:e,onDismiss:t}){const[r,n]=d.useState(()=>localStorage.getItem(Bc)==="true");return r?null:i.jsxs("div",{className:"rounded-xl border border-orange-500/30 bg-orange-500/5 p-4 flex items-center justify-between gap-4 animate-in fade-in slide-in-from-top-2 duration-300",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-orange-500/10 flex items-center justify-center",children:i.jsx(ys,{className:"h-5 w-5 text-orange-500"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"New here?"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Take a quick tour to learn how to create inventories."})]})]}),i.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[i.jsx(F,{variant:"ghost",size:"sm",onClick:()=>{n(!0),localStorage.setItem(Bc,"true"),t()},children:"Maybe later"}),i.jsxs(F,{size:"sm",onClick:e,className:"gap-2 bg-orange-500 hover:bg-orange-600 text-white",children:[i.jsx(ys,{className:"h-4 w-4"}),"Take Tour"]})]})]})}function AW(){return localStorage.getItem(Bc)==="true"}function IW({onClick:e}){return i.jsx(F,{type:"button",variant:"ghost",size:"icon",onClick:e,className:"h-9 w-9 rounded-full","aria-label":"Take a tour",title:"Take a tour",children:i.jsx(ys,{className:"h-4 w-4"})})}const OW=[{id:"domain",text:"Pick a domain (skincare, fitness, nutrition, etc.)"},{id:"audience",text:"Choose who this library is for (beginner to advanced)"},{id:"style",text:"Pick the writing style for how the library is described"},{id:"length",text:"How detailed should the library be"},{id:"notes",text:"Optional preferences or constraints (kept short)"},{id:"generate",text:"AI generates categories and items for you"},{id:"advanced-options",text:"Customize how AI generates your library"},{id:"edit-categories",text:"Rename, add, or remove categories and items"},{id:"tags",text:"Help others discover your library with tags"},{id:"publish",text:"Create your library and start building"}];function MW({isOpen:e,onClose:t,onStartTour:r}){const[n,s]=d.useState([]),a=d.useCallback(()=>{const o=[];OW.forEach(({id:l,text:c})=>{const u=document.querySelector(`[data-help-id="${l}"]`);if(!u)return;const h=u.getBoundingClientRect(),f=window.innerWidth,p=window.innerHeight;let m="right",w=h.right+12,g=h.top+h.height/2;h.right+200>f&&(h.left>200?(m="left",w=h.left-12):(m="bottom",w=h.left+h.width/2,g=h.bottom+12)),(m==="left"||m==="right")&&(g<50&&(g=50),g>p-50&&(g=p-50)),o.push({id:l,text:c,x:w,y:g,side:m})}),s(o)},[]);return d.useEffect(()=>{if(e){const o=setTimeout(a,100);return()=>clearTimeout(o)}},[e,a]),d.useEffect(()=>{if(!e)return;const o=l=>{l.key==="Escape"&&t()};return window.addEventListener("keydown",o),window.addEventListener("resize",a),()=>{window.removeEventListener("keydown",o),window.removeEventListener("resize",a)}},[e,t,a]),e?Tn.createPortal(i.jsxs("div",{className:"fixed inset-0 z-50",children:[i.jsx("div",{className:"absolute inset-0 bg-background/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:t}),n.map(o=>i.jsxs("div",{className:H("fixed z-50 max-w-[200px] rounded-lg bg-foreground text-background px-3 py-2 text-sm shadow-lg animate-in fade-in zoom-in-95 duration-200",o.side==="left"&&"-translate-x-full",o.side==="top"&&"-translate-y-full -translate-x-1/2",o.side==="bottom"&&"-translate-x-1/2",(o.side==="left"||o.side==="right")&&"-translate-y-1/2"),style:{left:o.x,top:o.y},children:[o.text,i.jsx("div",{className:H("absolute w-2 h-2 bg-foreground rotate-45",o.side==="right"&&"-left-1 top-1/2 -translate-y-1/2",o.side==="left"&&"-right-1 top-1/2 -translate-y-1/2",o.side==="bottom"&&"-top-1 left-1/2 -translate-x-1/2",o.side==="top"&&"-bottom-1 left-1/2 -translate-x-1/2")})]},o.id)),i.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 bg-card border border-border rounded-2xl shadow-lg p-4 animate-in slide-in-from-bottom-4 duration-300",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(tu,{className:"h-4 w-4"}),i.jsx("span",{children:"Hover over highlighted elements"})]}),i.jsx("div",{className:"h-4 w-px bg-border"}),i.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>{t(),r()},className:"gap-2",children:[i.jsx(ys,{className:"h-4 w-4"}),"Take a tour"]}),i.jsx(F,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8",children:i.jsx(rr,{className:"h-4 w-4"})})]})})]}),document.body):null}function DW({onClick:e}){return i.jsx(F,{type:"button",variant:"outline",size:"icon",onClick:e,className:"h-9 w-9 rounded-full border-dashed","aria-label":"Show help",children:i.jsx(tu,{className:"h-4 w-4"})})}function jo(e,t){const n=(e instanceof Error?e.message:String(e??"")).toLowerCase();return n.includes("unauthorized")||n.includes("auth")?"Please sign in again and try that request.":n.includes("daily ai credits")||n.includes("credits used")?"You have used todays AI credits. Try again tomorrow.":n.includes("capacity")||n.includes("at capacity")?"High AI activity. Please try again in a minute.":n.includes("rate limit")||n.includes("too many")?"Youre doing that a bit fast. Please wait a moment and try again.":n.includes("failed to fetch")||n.includes("network")?"We could not reach the server. Check your connection and try again.":n.includes("storage")?"We could not upload the banner. Please try again in a moment.":t}const ci="Overview",LW=["Overview","Strengths","Gaps","Suggestions"],ox=LW.filter(e=>e!==ci),zc=4,oc=zc-1;function gh(e){const t=e.trim().replace(/\s+/g," ");return t?t.replace(/\b\w/g,r=>r.toUpperCase()):""}function lx(e){if(!Array.isArray(e))return[];const t=[];for(const r of e){if(typeof r!="string")continue;const n=gh(r);n&&n.toLowerCase()!==ci.toLowerCase()&&(t.some(s=>s.toLowerCase()===n.toLowerCase())||t.push(n))}return t}function cx(e){const t=e==null?ox:lx(e);return[ci,...t]}var $2="Toggle",ux=d.forwardRef((e,t)=>{const{pressed:r,defaultPressed:n,onPressedChange:s,...a}=e,[o,l]=sr({prop:r,onChange:s,defaultProp:n??!1,caller:$2});return i.jsx(se.button,{type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":e.disabled?"":void 0,...a,ref:t,onClick:Z(e.onClick,()=>{e.disabled||l(!o)})})});ux.displayName=$2;var F2=ux,Pi="ToggleGroup",[U2,L9]=Nt(Pi,[dl]),B2=dl(),dx=Y.forwardRef((e,t)=>{const{type:r,...n}=e;if(r==="single"){const s=n;return i.jsx($W,{...s,ref:t})}if(r==="multiple"){const s=n;return i.jsx(FW,{...s,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${Pi}\``)});dx.displayName=Pi;var[z2,q2]=U2(Pi),$W=Y.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:s=()=>{},...a}=e,[o,l]=sr({prop:r,defaultProp:n??"",onChange:s,caller:Pi});return i.jsx(z2,{scope:e.__scopeToggleGroup,type:"single",value:Y.useMemo(()=>o?[o]:[],[o]),onItemActivate:l,onItemDeactivate:Y.useCallback(()=>l(""),[l]),children:i.jsx(W2,{...a,ref:t})})}),FW=Y.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:s=()=>{},...a}=e,[o,l]=sr({prop:r,defaultProp:n??[],onChange:s,caller:Pi}),c=Y.useCallback(h=>l((f=[])=>[...f,h]),[l]),u=Y.useCallback(h=>l((f=[])=>f.filter(p=>p!==h)),[l]);return i.jsx(z2,{scope:e.__scopeToggleGroup,type:"multiple",value:o,onItemActivate:c,onItemDeactivate:u,children:i.jsx(W2,{...a,ref:t})})});dx.displayName=Pi;var[UW,BW]=U2(Pi),W2=Y.forwardRef((e,t)=>{const{__scopeToggleGroup:r,disabled:n=!1,rovingFocus:s=!0,orientation:a,dir:o,loop:l=!0,...c}=e,u=B2(r),h=Ca(o),f={role:"group",dir:h,...c};return i.jsx(UW,{scope:r,rovingFocus:s,disabled:n,children:s?i.jsx(wy,{asChild:!0,...u,orientation:a,dir:h,loop:l,children:i.jsx(se.div,{...f,ref:t})}):i.jsx(se.div,{...f,ref:t})})}),vh="ToggleGroupItem",V2=Y.forwardRef((e,t)=>{const r=q2(vh,e.__scopeToggleGroup),n=BW(vh,e.__scopeToggleGroup),s=B2(e.__scopeToggleGroup),a=r.value.includes(e.value),o=n.disabled||e.disabled,l={...e,pressed:a,disabled:o},c=Y.useRef(null);return n.rovingFocus?i.jsx(by,{asChild:!0,...s,focusable:!o,active:a,ref:c,children:i.jsx(zb,{...l,ref:t})}):i.jsx(zb,{...l,ref:t})});V2.displayName=vh;var zb=Y.forwardRef((e,t)=>{const{__scopeToggleGroup:r,value:n,...s}=e,a=q2(vh,r),o={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l=a.type==="single"?o:void 0;return i.jsx(ux,{...l,...s,ref:t,onPressedChange:c=>{c?a.onItemActivate(n):a.onItemDeactivate(n)}})}),H2=dx,K2=V2;const G2=tl("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),zW=d.forwardRef(({className:e,variant:t,size:r,...n},s)=>i.jsx(F2,{ref:s,className:H(G2({variant:t,size:r,className:e})),...n}));zW.displayName=F2.displayName;const Y2=d.createContext({size:"default",variant:"default"}),na=d.forwardRef(({className:e,variant:t,size:r,children:n,...s},a)=>i.jsx(H2,{ref:a,className:H("flex items-center justify-center gap-1",e),...s,children:i.jsx(Y2.Provider,{value:{variant:t,size:r},children:n})}));na.displayName=H2.displayName;const sa=d.forwardRef(({className:e,children:t,variant:r,size:n,...s},a)=>{const o=d.useContext(Y2);return i.jsx(K2,{ref:a,className:H(G2({variant:o.variant||r,size:o.size||n}),e),...s,children:t})});sa.displayName=K2.displayName;const qW=[{value:"skincare",label:"Skincare"},{value:"fitness",label:"Fitness"},{value:"nutrition",label:"Nutrition"},{value:"productivity",label:"Productivity"},{value:"sleep",label:"Sleep"},{value:"mindfulness",label:"Mindfulness"},{value:"supplements",label:"Supplements"},{value:"cooking",label:"Cooking"},{value:"general",label:"General"},{value:"custom",label:"Custom..."}],WW=[{value:"beginner",label:"Beginner"},{value:"intermediate",label:"Intermediate"},{value:"advanced",label:"Advanced"}],VW=[{value:"friendly",label:"Friendly"},{value:"practical",label:"Practical"},{value:"coach",label:"Coach"},{value:"clinical",label:"Clinical"}],Q2=[{value:"short",label:"Short"},{value:"medium",label:"Medium"},{value:"long",label:"Long"}],HW=[{value:"starter",label:"Quick Starter"},{value:"hydration",label:"Hydration Focus",domains:["skincare","nutrition"]},{value:"weekly-reset",label:"Weekly Reset",domains:["skincare","productivity","general"]},{value:"barrier-care",label:"Barrier Care",domains:["skincare"]},{value:"strength-basics",label:"Strength Basics",domains:["fitness"]},{value:"hypertrophy",label:"Hypertrophy",domains:["fitness"]},{value:"conditioning",label:"Conditioning",domains:["fitness"]},{value:"mobility",label:"Mobility",domains:["fitness"]},{value:"recovery-day",label:"Recovery Day",domains:["fitness"]},{value:"balanced-basics",label:"Balanced Basics",domains:["nutrition"]},{value:"protein-focus",label:"Protein Focus",domains:["nutrition"]},{value:"meal-prep",label:"Meal Prep",domains:["nutrition"]},{value:"morning-focus",label:"Morning Focus",domains:["productivity","general"]},{value:"daily-plan",label:"Daily Plan",domains:["productivity"]},{value:"deep-work",label:"Deep Work",domains:["productivity"]},{value:"evening-reset",label:"Evening Reset",domains:["productivity","general"]},{value:"weekly-review",label:"Weekly Review",domains:["productivity"]},{value:"custom",label:"Custom focus..."}];function qb(e){return String(e||"").trim().replace(/[_-]+/g," ").replace(/\s+/g," ").split(" ").filter(Boolean).map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}function J2(e){const t=e.domain,r=e.audience,n=e.length,s=(()=>{if(t==="skincare")return"home skincare routine";if(t==="fitness")return"home strength workout";if(t==="nutrition")return"healthy daily nutrition";if(t==="productivity")return"daily focus routine";if(t==="sleep")return"sleep routine";if(t==="mindfulness")return"mindfulness routine";if(t==="supplements")return"supplement routine";if(t==="cooking")return"home cooking routine";if(t==="custom"){const l=String(e.domain_custom||"").trim();return l?`${l} routine`:"life routine essentials"}return"life routine essentials"})();return`${n==="short"?"simple":n==="long"?"detailed":"practical"} ${s} ${r==="beginner"?"for beginners":r==="advanced"?"for advanced users":"for intermediate users"}`}function X2(e){const t=[];return t.push("Mode: controls_v0"),t.push(`Domain: ${e.domain}`),e.domain==="custom"&&e.domain_custom&&e.domain_custom.trim()&&t.push(`DomainCustom: ${e.domain_custom.trim()}`),t.push(`Audience: ${e.audience}`),t.push(`Style: ${e.style}`),t.push(`Strictness: ${e.strictness}`),t.push(`Length: ${e.length}`),e.notes&&e.notes.trim()&&t.push(`Notes: ${e.notes.trim()}`),t.join(" | ")}function KW(e){var a,o;const t=J2({domain:e.controls.domain,domain_custom:e.controls.domainCustom,audience:e.controls.audience,length:e.controls.lengthHint}),r=String(((a=e.optional)==null?void 0:a.name)||"").trim()||`${t}`.split(" ").slice(0,6).map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" ")+" Library",n=X2({domain:e.controls.domain,domain_custom:e.controls.domainCustom,audience:e.controls.audience,style:e.controls.style,strictness:e.controls.strictness,length:e.controls.lengthHint,notes:(o=e.optional)==null?void 0:o.notes});return{version:0,kind:"library",controls:{domain:e.controls.domain,...e.controls.domainCustom&&e.controls.domainCustom.trim()?{domain_custom:e.controls.domainCustom.trim()}:{},audience:e.controls.audience,style:e.controls.style,strictness:e.controls.strictness,length_hint:e.controls.lengthHint},...e.optional&&Object.keys(e.optional).length>0?{optional:e.optional}:{},derived:{keywords:t,title:r,customInstructions:n}}}function GW(e,t){if(e==="custom"){const n=String(t||"").trim();return n?qb(n):"Custom Focus"}return{starter:"Quick Starter",hydration:"Hydration Focus","weekly-reset":"Weekly Reset","barrier-care":"Barrier Care","strength-basics":"Strength Basics",hypertrophy:"Hypertrophy Focus",conditioning:"Conditioning Sprint",mobility:"Mobility and Recovery","recovery-day":"Recovery Day","balanced-basics":"Balanced Basics","protein-focus":"Protein Focus","meal-prep":"Meal Prep Plan","morning-focus":"Morning Focus Block","daily-plan":"Daily Plan","deep-work":"Deep Work Sprint","evening-reset":"Evening Reset","weekly-review":"Weekly Review"}[e]||qb(e)}function YW(e,t,r){const n=e==="custom"?String(r||"").trim()||"custom":String(e).replace(/-/g," ");return t==="skincare"?`A ${n} routine that stays gentle and beginner friendly.`:t==="fitness"?`A ${n} routine built for safe form and realistic progression.`:t==="nutrition"?`A ${n} routine focused on sustainable daily habits.`:t==="productivity"?`A ${n} routine designed for low-friction repeatability.`:t==="sleep"?`A ${n} routine designed to support consistent, restorative sleep.`:t==="mindfulness"?`A ${n} routine focused on calm, consistency, and mental clarity.`:t==="supplements"?`A ${n} routine that keeps supplements simple and repeatable.`:t==="cooking"?`A ${n} routine that makes home cooking easier to repeat.`:`A ${n} routine aligned with your library.`}function QW(e){const t=[];return t.push("Mode: controls_v0"),t.push(`Focus: ${e.focus}`),e.focus==="custom"&&e.focus_custom&&e.focus_custom.trim()&&t.push(`FocusCustom: ${e.focus_custom.trim()}`),t.push(`Length: ${e.length}`),t.push(`Strictness: ${e.strictness}`),t.push(`Variety: ${e.variety}`),t.push(`Caution: ${e.caution}`),e.notes&&e.notes.trim()&&t.push(`Notes: ${e.notes.trim()}`),t.join(" | ")}function JW(e){var o,l;const t=GW(e.controls.focus,e.controls.focusCustom),r=String(((o=e.optional)==null?void 0:o.name)||"").trim()||t,n=YW(e.controls.focus,e.domainHint,e.controls.focusCustom),s=QW({focus:e.controls.focus,focus_custom:e.controls.focusCustom,length:e.controls.length,strictness:e.controls.strictness,variety:e.controls.variety,caution:e.controls.caution,notes:(l=e.optional)==null?void 0:l.notes});return{version:0,kind:"blueprint",controls:{focus:e.controls.focus,...e.controls.focusCustom&&e.controls.focusCustom.trim()?{focus_custom:e.controls.focusCustom.trim()}:{},length:e.controls.length,strictness:e.controls.strictness,variety:e.controls.variety,caution:e.controls.caution},...e.optional&&Object.keys(e.optional).length>0?{optional:e.optional}:{},derived:{title:r,description:n,notes:s}}}const XW=au("generate-inventory");function ZW(){const e=Tr(),[t]=su(),{toast:r}=St(),{session:n,isLoading:s}=Ne(),a=kW(),o=(t.get("channel")||"").trim(),l=o?gu(o):null,[c,u]=d.useState("skincare"),[h,f]=d.useState(""),[p,m]=d.useState("beginner"),[w,g]=d.useState("friendly"),[v,y]=d.useState("medium"),[x,b]=d.useState(""),_="medium",[S,j]=d.useState(!1),[N,k]=d.useState([]),[R,E]=d.useState(""),[$,M]=d.useState(""),[O,C]=d.useState(!1),[D,I]=d.useState(""),[z,A]=d.useState(""),[P,V]=d.useState(null),[J,L]=d.useState(""),[Q,q]=d.useState(!0),K=6,[te,W]=d.useState(!1),[ae,X]=d.useState(!1),[le,ue]=d.useState(()=>!AW()),ve=d.useMemo(()=>P?P.categories.map(re=>re.name.trim()).filter(Boolean):[],[P]),[Ve,me]=d.useState({}),[nt,Ae]=d.useState("");if(s)return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx(vt,{}),i.jsx("main",{className:"max-w-3xl mx-auto px-4 py-12",children:i.jsx(Oe,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:i.jsx(Be,{className:"py-12 text-center",children:i.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading"})})})})]});if(!(n!=null&&n.access_token))return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx(vt,{}),i.jsx("main",{className:"max-w-3xl mx-auto px-4 py-12",children:i.jsxs(Oe,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:[i.jsx(ur,{children:i.jsx(dr,{children:"Sign in required"})}),i.jsxs(Be,{className:"space-y-3 text-center",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Creating a library requires an account. Sign in to generate and publish libraries."}),i.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[i.jsx(F,{onClick:()=>e("/auth"),children:"Sign in"}),i.jsx(F,{variant:"outline",onClick:()=>e(l?ma("/inventory",l.slug,{intent:"post"}):"/inventory"),children:"Back to Library"})]})]})]})})]});const kt=async()=>{var re;if(!(n!=null&&n.access_token)){r({title:"Sign in required",description:"Please sign in to generate a library.",variant:"destructive"});return}j(!0);try{const Ee=J2({domain:c,domain_custom:c==="custom"?h:void 0,audience:p,length:v}),We=D.trim()||`${Ee}`.split(" ").slice(0,6).map(Ke=>Ke.charAt(0).toUpperCase()+Ke.slice(1).toLowerCase()).join(" ")+" Library",Je=X2({domain:c,domain_custom:c==="custom"?h:void 0,audience:p,style:w,strictness:_,length:v,notes:x}),$e={"Content-Type":"application/json"};n!=null&&n.access_token&&($e.Authorization=`Bearer ${n.access_token}`);const Ut=await fetch(XW,{method:"POST",headers:$e,body:JSON.stringify({keywords:Ee,title:We,customInstructions:Je,preferredCategories:N.length>0?N:void 0})});if(!Ut.ok){const Ke=await Ut.json().catch(()=>({}));throw new Error(Ke.error||"Failed to generate library")}const Xe=await Ut.json();V(Xe),A(Xe.summary||""),me({}),D.trim()||I(We),r({title:"Library generated!",description:`Created ${Xe.categories.length} categories with ${Xe.categories.reduce((Ke,Bt)=>Ke+Bt.items.length,0)} items.`}),At({eventName:"generate_library",userId:(re=n==null?void 0:n.user)==null?void 0:re.id,path:window.location.pathname,metadata:{categoryCount:Xe.categories.length,itemCount:Xe.categories.reduce((Ke,Bt)=>Ke+Bt.items.length,0),domain:c,audience:p,style:w,lengthHint:v,domainCustom:c==="custom"?h:void 0}})}catch(Ee){r({title:"Generation failed",description:jo(Ee,"Please try again."),variant:"destructive"})}finally{j(!1)}},Qt=async()=>{if(!D.trim()){r({title:"Title required",description:"Add a title before creating the library.",variant:"destructive"});return}if(!P){r({title:"Generate library first",description:"Use the generate button to create your library.",variant:"destructive"});return}const re=(l==null?void 0:l.slug)||J;if(!re||!bs(re)){r({title:"Channel required",description:"Select a channel to connect this library to.",variant:"destructive"});return}try{const Ee=ve.join(", "),We=(l==null?void 0:l.slug)||re,Je=await a.mutateAsync({title:D.trim(),promptInventory:z.trim(),promptCategories:Ee,generatedSchema:P,reviewSections:ox,includeScore:!0,tags:[We],isPublic:Q,generationControls:KW({controls:{domain:c,domainCustom:c==="custom"?h:void 0,audience:p,style:w,strictness:_,lengthHint:v},optional:{name:D.trim()||void 0,notes:x.trim()||void 0,tags:[We]}})});e(`/inventory/${Je.id}/build`)}catch(Ee){r({title:"Creation failed",description:Ee instanceof Error?Ee.message:"Please try again.",variant:"destructive"})}};return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx(vt,{}),i.jsxs("main",{className:"max-w-3xl mx-auto px-3 sm:px-4 py-6 pb-24 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Library"}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(IW,{onClick:()=>X(!0)}),i.jsx(DW,{onClick:()=>W(!0)})]})]}),le&&i.jsx(RW,{onStartTour:()=>{ue(!1),X(!0)},onDismiss:()=>ue(!1)}),i.jsxs("div",{className:"text-center mb-12 pt-8 animate-fade-in",children:[i.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-black tracking-tight mb-4 relative inline-block",children:[i.jsxs("span",{className:"relative inline-block",style:{fontFamily:"'Impact', 'Haettenschweiler', 'Franklin Gothic Bold', 'Charcoal', 'Helvetica Inserat', sans-serif",letterSpacing:"0.06em"},children:[i.jsx("span",{className:"absolute inset-0 text-border/40",style:{transform:"translate(4px, 4px)"},"aria-hidden":"true",children:"CREATE INVENTORY"}),i.jsx("span",{className:"absolute inset-0 text-border/60",style:{transform:"translate(2px, 2px)"},"aria-hidden":"true",children:"CREATE INVENTORY"}),i.jsx("span",{className:"text-gradient-themed animate-shimmer bg-[length:200%_auto] relative",children:"CREATE INVENTORY"})]}),i.jsx("span",{className:"absolute -inset-4 bg-primary/10 blur-2xl rounded-full animate-pulse-soft -z-10"})]}),i.jsx("p",{className:"text-lg text-muted-foreground max-w-md mx-auto",children:"Use simple controls to shape a library. No prompt required."})]}),i.jsxs(Oe,{className:"bg-card/60 backdrop-blur-glass border-border/50 animate-fade-in",children:[i.jsxs(ur,{className:"flex flex-row items-center justify-between space-y-0",children:[i.jsxs(dr,{className:"flex items-center gap-2",children:[i.jsx(bO,{className:"h-5 w-5 text-primary"}),"What kind of library?"]}),i.jsxs(F,{onClick:kt,disabled:S,className:"gap-2","data-help-id":"generate",children:[S?i.jsx(rn,{className:"h-4 w-4 animate-spin"}):i.jsx(Br,{className:"h-4 w-4"}),S?"Generating...":P?"Regenerate":"Generate"]})]}),i.jsxs(Be,{className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2","data-help-id":"domain",children:[i.jsx(Pe,{children:"Domain"}),i.jsxs(ya,{value:c,onValueChange:re=>u(re),children:[i.jsx(vi,{children:i.jsx(xa,{placeholder:"Choose domain"})}),i.jsx(yi,{children:qW.map(re=>i.jsx(Vn,{value:re.value,children:re.label},re.value))})]}),c==="custom"&&i.jsxs("div",{className:"space-y-2 pt-2",children:[i.jsx(Pe,{htmlFor:"domainCustom",className:"text-xs text-muted-foreground",children:"Custom domain (optional)"}),i.jsx(ze,{id:"domainCustom",value:h,onChange:re=>f(re.target.value),placeholder:"e.g., Longevity, Running, ADHD focus, Budget cooking..."})]})]}),i.jsxs("div",{className:"space-y-2","data-help-id":"audience",children:[i.jsx(Pe,{children:"Audience"}),i.jsx(na,{type:"single",value:p,onValueChange:re=>re&&m(re),className:"flex flex-wrap justify-start gap-2",children:WW.map(re=>i.jsx(sa,{value:re.value,variant:"outline",className:"rounded-full px-3",children:re.label},re.value))})]}),i.jsxs("div",{className:"space-y-2","data-help-id":"style",children:[i.jsx(Pe,{children:"Style"}),i.jsx(na,{type:"single",value:w,onValueChange:re=>re&&g(re),className:"flex flex-wrap justify-start gap-2",children:VW.map(re=>i.jsx(sa,{value:re.value,variant:"outline",className:"rounded-full px-3",children:re.label},re.value))})]}),i.jsxs("div",{className:"space-y-2 sm:col-span-2","data-help-id":"length",children:[i.jsx(Pe,{children:"Length"}),i.jsx(na,{type:"single",value:v,onValueChange:re=>re&&y(re),className:"flex flex-wrap justify-start gap-2",children:Q2.map(re=>i.jsx(sa,{value:re.value,variant:"outline",className:"rounded-full px-3",children:re.label},re.value))})]}),i.jsxs("div",{className:"space-y-2 sm:col-span-2","data-help-id":"notes",children:[i.jsx(Pe,{htmlFor:"notes",children:"Notes (optional)"}),i.jsx(pr,{id:"notes",value:x,onChange:re=>b(re.target.value),placeholder:"Any constraints or preferences? (Optional)",rows:3})]})]}),i.jsxs(Vy,{open:O,onOpenChange:C,children:[i.jsx(Hy,{asChild:!0,children:i.jsxs(F,{variant:"ghost",className:"w-full justify-between text-muted-foreground hover:text-foreground","data-help-id":"advanced-options",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(tS,{className:"h-4 w-4"}),"Advanced Options"]}),i.jsx(nl,{className:`h-4 w-4 transition-transform ${O?"rotate-180":""}`})]})}),i.jsx(Ky,{className:"space-y-4 pt-4",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx(Pe,{children:"Preferred categories (optional)"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"We will always generate 6 categories total."})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:N.map((re,Ee)=>i.jsxs(Me,{variant:"secondary",className:"gap-1",children:[re,i.jsx(F,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4",onClick:()=>{k(We=>We.filter((Je,$e)=>$e!==Ee)),M("")},"aria-label":"Remove category",children:i.jsx(rr,{className:"h-3 w-3"})})]},`${re}-${Ee}`))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ze,{value:R,onChange:re=>E(re.target.value),placeholder:"Add category",onKeyDown:re=>{if(re.key==="Enter"){re.preventDefault();const Ee=R.trim();if(!Ee)return;if(N.length>=K){M("You can only add up to 6 categories.");return}k(We=>[...We,Ee]),E(""),M("")}}}),i.jsx(F,{type:"button",variant:"outline",onClick:()=>{const re=R.trim();if(re){if(N.length>=K){M("You can only add up to 6 categories.");return}k(Ee=>[...Ee,re]),E(""),M("")}},children:"Add"})]}),$&&i.jsx("p",{className:"text-xs text-destructive",children:$})]})})]})]})]}),P&&i.jsxs(i.Fragment,{children:[i.jsxs(Oe,{className:"bg-card/60 backdrop-blur-glass border-border/50 animate-fade-in",children:[i.jsx(ur,{children:i.jsx(dr,{children:"Library Details"})}),i.jsxs(Be,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{htmlFor:"inventory-title",children:"Title"}),i.jsx(ze,{id:"inventory-title",value:D,onChange:re=>I(re.target.value),placeholder:"My Custom Library"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{htmlFor:"inventory-description",children:"Description"}),i.jsx(pr,{id:"inventory-description",value:z,onChange:re=>A(re.target.value),placeholder:"What this library is for...",rows:3})]})]})]}),i.jsxs(Oe,{className:"bg-card/60 backdrop-blur-glass border-border/50 animate-fade-in","data-help-id":"edit-categories",children:[i.jsx(ur,{children:i.jsx(dr,{children:"Generated Categories"})}),i.jsxs(Be,{className:"space-y-4",children:[P.categories.map((re,Ee)=>i.jsxs("div",{className:"space-y-3 rounded-lg border border-border/60 p-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ze,{value:re.name,onChange:We=>{const Je=We.target.value;V($e=>{if(!$e)return $e;const Ut=$e.categories.map((Xe,Ke)=>Ke===Ee?{...Xe,name:Je}:Xe);return{...$e,categories:Ut}})},className:"font-semibold",placeholder:"Category name"}),i.jsx(F,{type:"button",variant:"ghost",size:"icon",onClick:()=>{V(We=>{if(!We)return We;const Je=We.categories.filter(($e,Ut)=>Ut!==Ee);return{...We,categories:Je}})},"aria-label":"Remove category",children:i.jsx(rr,{className:"h-4 w-4"})}),i.jsxs(Me,{variant:"secondary",children:[re.items.length," items"]})]}),i.jsx("div",{className:"flex flex-wrap gap-1.5",children:re.items.map((We,Je)=>i.jsxs(Me,{variant:"outline",className:"text-xs gap-1",children:[We,i.jsx(F,{type:"button",variant:"ghost",size:"icon",className:"h-3 w-3",onClick:()=>{V($e=>{if(!$e)return $e;const Ut=$e.categories.map((Xe,Ke)=>Ke!==Ee?Xe:{...Xe,items:Xe.items.filter((Bt,Ri)=>Ri!==Je)});return{...$e,categories:Ut}})},"aria-label":"Remove item",children:i.jsx(rr,{className:"h-3 w-3"})})]},Je))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ze,{value:Ve[Ee]||"",onChange:We=>me(Je=>({...Je,[Ee]:We.target.value})),placeholder:`Add item to ${re.name||"category"}`}),i.jsx(F,{type:"button",variant:"outline",onClick:()=>{var Je;const We=(Je=Ve[Ee])==null?void 0:Je.trim();We&&(V($e=>{if(!$e)return $e;const Ut=$e.categories.map((Xe,Ke)=>Ke===Ee?{...Xe,items:[...Xe.items,We]}:Xe);return{...$e,categories:Ut}}),me($e=>({...$e,[Ee]:""})))},children:"Add item"})]})]},Ee)),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ze,{value:nt,onChange:re=>Ae(re.target.value),placeholder:"New category name"}),i.jsx(F,{type:"button",variant:"outline",onClick:()=>{const re=nt.trim();re&&(V(Ee=>Ee&&{...Ee,categories:[...Ee.categories,{name:re,items:[]}]}),Ae(""))},children:"Add category"})]})]})]}),i.jsxs(Oe,{className:"bg-card/60 backdrop-blur-glass border-border/50 animate-fade-in","data-help-id":"tags",children:[i.jsx(ur,{children:i.jsx(dr,{children:"Discovery"})}),i.jsxs(Be,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{children:"Channel"}),l?i.jsxs("div",{className:"rounded-md border border-border/40 px-3 py-2 text-sm",children:["b/",l.slug]}):i.jsxs(ya,{value:J,onValueChange:L,children:[i.jsx(vi,{children:i.jsx(xa,{placeholder:"Select a channel"})}),i.jsx(yi,{children:qr.filter(re=>bs(re.slug)).sort((re,Ee)=>re.priority-Ee.priority).map(re=>i.jsx(Vn,{value:re.slug,children:re.name},re.slug))})]})]}),i.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 px-4 py-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Public library"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Public libraries appear in search."})]}),i.jsx(jn,{checked:Q,onCheckedChange:q})]})]})]}),i.jsxs(F,{onClick:Qt,disabled:a.isPending,className:"w-full gap-2",size:"lg","data-help-id":"publish",children:[a.isPending?i.jsx(rn,{className:"h-4 w-4 animate-spin"}):i.jsx(Br,{className:"h-4 w-4"}),"Create Library"]})]})]}),i.jsx(PW,{isActive:ae,onComplete:()=>X(!1),onSkip:()=>X(!1)}),i.jsx(MW,{isOpen:te,onClose:()=>W(!1),onStartTour:()=>{W(!1),X(!0)}})]})}function e7(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=e.categories;return Array.isArray(t)?t.map(r=>typeof r.name=="string"?r.name:"").filter(Boolean):[]}function t7(){const{inventoryId:e}=ka(),t=Er(),[r]=su(),{data:n,isLoading:s}=ax(e),a=L2(),o=CW(),{toast:l}=St(),[c,u]=d.useState([]),[h,f]=d.useState(""),[p,m]=d.useState(""),[w,g]=d.useState(!0),v=r.get("channel")||"",y=v?gu(v):null;d.useEffect(()=>{n&&(u(lx(n.review_sections)),g(n.include_score??!0),f(""),m(""))},[n]);const x=d.useMemo(()=>ox.filter(k=>!c.some(R=>R.toLowerCase()===k.toLowerCase())),[c]),b=d.useMemo(()=>cx((n==null?void 0:n.review_sections)??null),[n]),_=async()=>{if(n)try{await a.mutateAsync({inventoryId:n.id,liked:n.user_liked})}catch(k){l({title:"Action failed",description:k instanceof Error?k.message:"Please try again.",variant:"destructive"})}},S=k=>{const R=gh(k);if(R){if(R.toLowerCase()===ci.toLowerCase()){f("");return}if(c.some(E=>E.toLowerCase()===R.toLowerCase())){f(""),m("");return}if(c.length>=oc){m(`You can add up to ${zc} sections total.`);return}u(E=>[...E,R]),f(""),m("")}},j=k=>{u(R=>R.filter(E=>E!==k)),m("")},N=async()=>{if(n){if(c.length>oc){l({title:"Too many sections",description:`Please use ${zc} sections or fewer.`,variant:"destructive"});return}try{await o.mutateAsync({inventoryId:n.id,reviewSections:c,includeScore:w}),l({title:"Saved",description:"Review settings updated."})}catch(k){l({title:"Save failed",description:k instanceof Error?k.message:"Please try again.",variant:"destructive"})}}};return i.jsxs(ln,{children:[i.jsx(vt,{}),i.jsxs(cn,{className:"space-y-6",children:[s?i.jsxs("div",{className:"border border-border/40 px-3 py-3 space-y-3",children:[i.jsx(je,{className:"h-6 w-40"}),i.jsx(je,{className:"h-24 w-full"})]}):n?i.jsxs(i.Fragment,{children:[i.jsxs(sn,{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("h1",{className:"text-2xl font-semibold leading-tight",children:n.title}),i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:n.prompt_inventory})]}),i.jsxs(F,{variant:"ghost",size:"sm",className:n.user_liked?"text-red-500":"text-muted-foreground",onClick:_,children:[i.jsx(Kt,{className:`h-4 w-4 ${n.user_liked?"fill-current":""}`}),i.jsx("span",{className:"ml-1 text-xs",children:n.likes_count})]})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:n.tags.map(k=>i.jsxs(Me,{variant:"outline",children:["#",k.slug]},k.id))})]}),i.jsx(fr,{}),i.jsxs("section",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:"Categories"}),i.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:e7(n.generated_schema).map(k=>i.jsx(Me,{variant:"secondary",children:k},k))})]}),i.jsx(fr,{}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:"Review sections"}),n.is_owner?i.jsxs("div",{className:"mt-3 space-y-3",children:[i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(Me,{variant:"secondary",children:ci}),c.map(k=>i.jsxs(Me,{variant:"secondary",className:"gap-1",children:[k,i.jsx(F,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4",onClick:()=>j(k),children:i.jsx(rr,{className:"h-3 w-3"})})]},k))]}),x.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(k=>i.jsx(F,{type:"button",size:"sm",variant:"outline",onClick:()=>S(k),children:k},k))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ze,{value:h,onChange:k=>f(k.target.value),placeholder:"Add custom section",onKeyDown:k=>{k.key==="Enter"&&(k.preventDefault(),S(h))}}),i.jsx(F,{type:"button",variant:"outline",onClick:()=>S(h),children:"Add"})]}),p&&i.jsx("p",{className:"text-sm text-destructive",children:p}),i.jsxs("div",{className:"flex items-center justify-between rounded-md border border-border/40 px-3 py-2",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Include score"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Adds a 1100 score in Overview."})]}),i.jsx(jn,{checked:w,onCheckedChange:g})]}),i.jsx(F,{type:"button",onClick:N,disabled:o.isPending,children:"Save review settings"})]}):i.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:b.map(k=>i.jsx(Me,{variant:"outline",children:k},k))})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(pe,{to:y?ma(`/inventory/${n.id}/build`,y.slug,{intent:"post"}):`/inventory/${n.id}/build${t.search||""}`,children:i.jsx(F,{children:"Create Blueprint"})}),i.jsx(pe,{to:y?ma("/inventory",y.slug,{intent:"post"}):"/inventory",children:i.jsx(F,{variant:"outline",children:"Back to Library"})})]})]})]}):i.jsx("div",{className:"border border-border/40 py-12 text-center",children:"Library not found."}),i.jsx(Kr,{})]})]})}var Z2="AlertDialog",[r7,$9]=Nt(Z2,[Yk]),Ns=Yk(),eT=e=>{const{__scopeAlertDialog:t,...r}=e,n=Ns(t);return i.jsx(pf,{...n,...r,modal:!0})};eT.displayName=Z2;var n7="AlertDialogTrigger",s7=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Ns(r);return i.jsx(Iy,{...s,...n,ref:t})});s7.displayName=n7;var i7="AlertDialogPortal",tT=e=>{const{__scopeAlertDialog:t,...r}=e,n=Ns(t);return i.jsx(mf,{...n,...r})};tT.displayName=i7;var a7="AlertDialogOverlay",rT=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Ns(r);return i.jsx(hl,{...s,...n,ref:t})});rT.displayName=a7;var So="AlertDialogContent",[o7,l7]=r7(So),c7=_1("AlertDialogContent"),nT=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...s}=e,a=Ns(r),o=d.useRef(null),l=Se(t,o),c=d.useRef(null);return i.jsx(NB,{contentName:So,titleName:sT,docsSlug:"alert-dialog",children:i.jsx(o7,{scope:r,cancelRef:c,children:i.jsxs(fl,{role:"alertdialog",...a,...s,ref:l,onOpenAutoFocus:Z(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(c7,{children:n}),i.jsx(d7,{contentRef:o})]})})})});nT.displayName=So;var sT="AlertDialogTitle",iT=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Ns(r);return i.jsx(hu,{...s,...n,ref:t})});iT.displayName=sT;var aT="AlertDialogDescription",oT=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Ns(r);return i.jsx(fu,{...s,...n,ref:t})});oT.displayName=aT;var u7="AlertDialogAction",lT=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Ns(r);return i.jsx(gf,{...s,...n,ref:t})});lT.displayName=u7;var cT="AlertDialogCancel",uT=d.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:s}=l7(cT,r),a=Ns(r),o=Se(t,s);return i.jsx(gf,{...a,...n,ref:o})});uT.displayName=cT;var d7=({contentRef:e})=>{const t=`\`${So}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${So}\` by passing a \`${aT}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${So}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return d.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},h7=eT,f7=tT,dT=rT,hT=nT,fT=lT,pT=uT,mT=iT,gT=oT;const Ug=h7,p7=f7,vT=d.forwardRef(({className:e,...t},r)=>i.jsx(dT,{className:H("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));vT.displayName=dT.displayName;const yh=d.forwardRef(({className:e,...t},r)=>i.jsxs(p7,{children:[i.jsx(vT,{}),i.jsx(hT,{ref:r,className:H("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));yh.displayName=hT.displayName;const xh=({className:e,...t})=>i.jsx("div",{className:H("flex flex-col space-y-2 text-center sm:text-left",e),...t});xh.displayName="AlertDialogHeader";const wh=({className:e,...t})=>i.jsx("div",{className:H("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});wh.displayName="AlertDialogFooter";const bh=d.forwardRef(({className:e,...t},r)=>i.jsx(mT,{ref:r,className:H("text-lg font-semibold",e),...t}));bh.displayName=mT.displayName;const _h=d.forwardRef(({className:e,...t},r)=>i.jsx(gT,{ref:r,className:H("text-sm text-muted-foreground",e),...t}));_h.displayName=gT.displayName;const jh=d.forwardRef(({className:e,...t},r)=>i.jsx(fT,{ref:r,className:H(xy(),e),...t}));jh.displayName=fT.displayName;const Sh=d.forwardRef(({className:e,...t},r)=>i.jsx(pT,{ref:r,className:H(xy({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Sh.displayName=pT.displayName;function yT({value:e,onChange:t,suggestions:r=[],maxTags:n=pC,disabled:s}){const[a,o]=d.useState(""),l=e.length<n,c=d.useMemo(()=>{const p=bt(a);return p?r.filter(m=>m.includes(p)).filter(m=>!e.includes(m)).slice(0,6):[]},[a,r,e]),u=p=>{if(!l)return;const m=bt(p);!m||e.includes(m)||(t([...e,m].slice(0,n)),o(""))},h=p=>{t(e.filter(m=>m!==p))},f=p=>{(p.key==="Enter"||p.key===",")&&(p.preventDefault(),a.trim()&&u(a))};return i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"flex flex-wrap gap-2",children:e.map(p=>i.jsxs(Me,{variant:"secondary",className:"gap-1",children:["#",p,i.jsx(F,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4",onClick:()=>h(p),disabled:s,children:i.jsx(rr,{className:"h-3 w-3"})})]},p))}),i.jsx(ze,{value:a,onChange:p=>o(p.target.value),onKeyDown:f,placeholder:l?"Add tag (press Enter)":"Tag limit reached",disabled:s||!l}),c.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(p=>i.jsxs(F,{type:"button",variant:"outline",size:"sm",onClick:()=>u(p),disabled:s,children:["#",p]},p))})]})}function m7({onClick:e,disabled:t,isLoading:r,itemCount:n}){return i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsxs("button",{onClick:e,disabled:t||r,className:H("relative w-28 h-28 rounded-full transition-all duration-500","bg-gradient-to-br from-primary via-primary/90 to-primary/70","border-2 border-primary/30","flex items-center justify-center","shadow-glow-aqua","group",t&&!r&&"opacity-40 cursor-not-allowed shadow-none",!t&&!r&&"hover:scale-105 hover:shadow-[0_0_60px_hsl(185_55%_50%/0.5)] animate-glow-pulse",r&&"animate-pulse cursor-wait"),children:[!t&&!r&&i.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/20 animate-ping opacity-30"}),i.jsx("div",{className:"relative z-10 flex flex-col items-center gap-1",children:r?i.jsx(rn,{className:"h-10 w-10 text-primary-foreground animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(Vv,{className:"h-10 w-10 text-primary-foreground group-hover:rotate-12 transition-transform duration-300"}),i.jsx("span",{className:"text-xs font-bold text-primary-foreground/90 uppercase tracking-widest",children:"Review"})]})}),!t&&i.jsx("div",{className:"absolute inset-0 rounded-full opacity-50 group-hover:opacity-100 transition-opacity duration-300",children:i.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-primary via-accent to-primary animate-iridescent",style:{padding:"2px"},children:i.jsx("div",{className:"w-full h-full rounded-full bg-primary"})})})]}),i.jsx("p",{className:H("text-sm font-medium transition-colors",t&&!r?"text-muted-foreground":"text-foreground"),children:r?"Analyzing your blend...":n===0?"Review your Blueprint":`Ready to review ${n} item${n!==1?"s":""}`})]})}function Bg(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}function g7(e){const t=e.toLowerCase();return t.includes("strength")?"+":t.includes("gap")||t.includes("risk")?"!":t.includes("suggest")?">":"-"}function v7(e){if(!e)return[];const t=[];let r=null;const n=e.split(`
`);for(const s of n){if(s.startsWith("### ")||s.startsWith("## ")){const l=s.replace(/^#+\s*/,"").trim();if(!l)continue;r={title:l,key:Bg(l),bullets:[],text:""},t.push(r);continue}const a=s.trim();if(!a)continue;r||(r={title:"Overview",key:"overview",bullets:[],text:""},t.push(r));const o=a.replace(/^\*\*|\*\*$/g,"").replace(/^\*|\*$/g,"").replace(/^[-*+]\s+/,"");a.startsWith("- ")||a.startsWith("* ")||a.startsWith("+ ")?r.bullets.push(o):r.text+=(r.text?" ":"")+o}return t}function y7(e,t){if(!t||t.length===0)return e.length>0?e:[{title:"Overview",key:"overview",bullets:[],text:""}];const r=new Map(e.map(a=>[Bg(a.title),a])),n=t.map(a=>{const o=Bg(a);return r.get(o)||{title:a,key:o,bullets:[],text:""}}),s=e.filter(a=>!n.some(o=>o.key===a.key));return n.concat(s)}function x7(e){const t=/score\s*:\s*(\d{1,3})\s*\/\s*100/i;let r=null;const n=e.text.match(t);n&&(r=parseInt(n[1],10));const s=e.bullets.filter(o=>{const l=o.match(t);return l&&r===null&&(r=parseInt(l[1],10)),!l}),a=e.text.replace(t,"").replace(/\s{2,}/g," ").trim();return{score:r,text:a,bullets:s}}function Nh({review:e,isStreaming:t,sectionOrder:r,density:n="default"}){var l;const s=v7(e),a=y7(s,r),o=n==="compact";return i.jsx(Oe,{className:"bg-transparent border-border/40 overflow-hidden shadow-none",children:i.jsxs(Be,{className:"p-0",children:[i.jsxs(Aa,{defaultValue:((l=a[0])==null?void 0:l.key)||"overview",className:"w-full",children:[i.jsx(ki,{className:H("w-full justify-start rounded-none border-b border-border/40 bg-muted/20","flex-nowrap overflow-x-auto",o?"px-3 py-2":"px-4 pt-4"),children:a.map(c=>i.jsx(Sr,{value:c.key,className:H("shrink-0 data-[state=active]:bg-background uppercase tracking-wide",o?"text-[11px] px-2 py-1":""),children:c.title},c.key))}),i.jsx("div",{className:H(o?"p-3 sm:p-4":"p-6"),children:a.map(c=>{const u=c.key==="overview"||c.title.toLowerCase().includes("overview"),{score:h,text:f,bullets:p}=u?x7(c):{score:null,text:c.text,bullets:c.bullets},m=h!==null&&h>=80?"text-green-500":h!==null&&h>=60?"text-amber-500":"text-red-500";return i.jsxs(en,{value:c.key,className:H("mt-0",o?"space-y-2.5":"space-y-4"),children:[i.jsx("h3",{className:H(o?"text-base font-semibold":"text-2xl font-bold tracking-tight"),children:c.title}),u&&h!==null&&i.jsxs("div",{className:H("text-center",o?"py-2":"py-4"),children:[i.jsx("p",{className:"text-xs uppercase tracking-wider text-muted-foreground mb-2",children:"Blueprint score"}),i.jsxs("p",{className:H(o?"text-4xl font-black":"text-6xl font-black",m),children:[h,i.jsx("span",{className:H(o?"text-lg":"text-2xl","text-muted-foreground"),children:"/100"})]})]}),f?i.jsx("p",{className:H("text-muted-foreground",o?"text-sm leading-snug":"leading-relaxed"),children:f}):null,p.length>0?i.jsx("ul",{className:H(o?"space-y-2":"space-y-3"),children:p.map((w,g)=>i.jsxs("li",{className:H("flex",o?"gap-2 text-sm":"gap-3"),children:[i.jsx("span",{className:"text-primary font-bold",children:g7(c.title)}),i.jsx("span",{children:w})]},g))}):null,!f&&p.length===0&&i.jsx("p",{className:"text-muted-foreground leading-relaxed",children:t?"Generating...":"No details yet."})]},c.key)})})]}),t&&i.jsx("div",{className:H(o?"px-3 pb-3":"px-6 pb-4"),children:i.jsx("div",{className:"h-1 w-full bg-muted rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-primary animate-pulse",style:{width:"60%"}})})})]})})}var Rn="Accordion",w7=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[hx,b7,_7]=Zc(Rn),[If,F9]=Nt(Rn,[_7,_E]),fx=_E(),xT=Y.forwardRef((e,t)=>{const{type:r,...n}=e,s=n,a=n;return i.jsx(hx.Provider,{scope:e.__scopeAccordion,children:r==="multiple"?i.jsx(k7,{...a,ref:t}):i.jsx(N7,{...s,ref:t})})});xT.displayName=Rn;var[wT,j7]=If(Rn),[bT,S7]=If(Rn,{collapsible:!1}),N7=Y.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:s=()=>{},collapsible:a=!1,...o}=e,[l,c]=sr({prop:r,defaultProp:n??"",onChange:s,caller:Rn});return i.jsx(wT,{scope:e.__scopeAccordion,value:Y.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:Y.useCallback(()=>a&&c(""),[a,c]),children:i.jsx(bT,{scope:e.__scopeAccordion,collapsible:a,children:i.jsx(_T,{...o,ref:t})})})}),k7=Y.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:s=()=>{},...a}=e,[o,l]=sr({prop:r,defaultProp:n??[],onChange:s,caller:Rn}),c=Y.useCallback(h=>l((f=[])=>[...f,h]),[l]),u=Y.useCallback(h=>l((f=[])=>f.filter(p=>p!==h)),[l]);return i.jsx(wT,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:i.jsx(bT,{scope:e.__scopeAccordion,collapsible:!0,children:i.jsx(_T,{...a,ref:t})})})}),[C7,Of]=If(Rn),_T=Y.forwardRef((e,t)=>{const{__scopeAccordion:r,disabled:n,dir:s,orientation:a="vertical",...o}=e,l=Y.useRef(null),c=Se(l,t),u=b7(r),f=Ca(s)==="ltr",p=Z(e.onKeyDown,m=>{var k;if(!w7.includes(m.key))return;const w=m.target,g=u().filter(R=>{var E;return!((E=R.ref.current)!=null&&E.disabled)}),v=g.findIndex(R=>R.ref.current===w),y=g.length;if(v===-1)return;m.preventDefault();let x=v;const b=0,_=y-1,S=()=>{x=v+1,x>_&&(x=b)},j=()=>{x=v-1,x<b&&(x=_)};switch(m.key){case"Home":x=b;break;case"End":x=_;break;case"ArrowRight":a==="horizontal"&&(f?S():j());break;case"ArrowDown":a==="vertical"&&S();break;case"ArrowLeft":a==="horizontal"&&(f?j():S());break;case"ArrowUp":a==="vertical"&&j();break}const N=x%y;(k=g[N].ref.current)==null||k.focus()});return i.jsx(C7,{scope:r,disabled:n,direction:s,orientation:a,children:i.jsx(hx.Slot,{scope:r,children:i.jsx(se.div,{...o,"data-orientation":a,ref:c,onKeyDown:n?void 0:p})})})}),kh="AccordionItem",[E7,px]=If(kh),jT=Y.forwardRef((e,t)=>{const{__scopeAccordion:r,value:n,...s}=e,a=Of(kh,r),o=j7(kh,r),l=fx(r),c=Mt(),u=n&&o.value.includes(n)||!1,h=a.disabled||e.disabled;return i.jsx(E7,{scope:r,open:u,disabled:h,triggerId:c,children:i.jsx(NE,{"data-orientation":a.orientation,"data-state":TT(u),...l,...s,ref:t,disabled:h,open:u,onOpenChange:f=>{f?o.onItemOpen(n):o.onItemClose(n)}})})});jT.displayName=kh;var ST="AccordionHeader",NT=Y.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,s=Of(Rn,r),a=px(ST,r);return i.jsx(se.h3,{"data-orientation":s.orientation,"data-state":TT(a.open),"data-disabled":a.disabled?"":void 0,...n,ref:t})});NT.displayName=ST;var zg="AccordionTrigger",kT=Y.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,s=Of(Rn,r),a=px(zg,r),o=S7(zg,r),l=fx(r);return i.jsx(hx.ItemSlot,{scope:r,children:i.jsx(W8,{"aria-disabled":a.open&&!o.collapsible||void 0,"data-orientation":s.orientation,id:a.triggerId,...l,...n,ref:t})})});kT.displayName=zg;var CT="AccordionContent",ET=Y.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,s=Of(Rn,r),a=px(CT,r),o=fx(r);return i.jsx(V8,{role:"region","aria-labelledby":a.triggerId,"data-orientation":s.orientation,...o,...n,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});ET.displayName=CT;function TT(e){return e?"open":"closed"}var T7=xT,P7=jT,R7=NT,PT=kT,RT=ET;const A7=T7,AT=d.forwardRef(({className:e,...t},r)=>i.jsx(P7,{ref:r,className:H("border-b",e),...t}));AT.displayName="AccordionItem";const IT=d.forwardRef(({className:e,children:t,...r},n)=>i.jsx(R7,{className:"flex",children:i.jsxs(PT,{ref:n,className:H("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...r,children:[t,i.jsx(nl,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));IT.displayName=PT.displayName;const OT=d.forwardRef(({className:e,children:t,...r},n)=>i.jsx(RT,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:i.jsx("div",{className:H("pb-4 pt-0",e),children:t})}));OT.displayName=RT.displayName;function I7({steps:e,activeStepId:t,onSetActive:r,onUpdateStep:n,onRemoveStep:s,onAddStep:a,onReorderSteps:o,onRemoveItem:l,onUpdateItemContext:c,itemContexts:u,showQuickAdd:h=!0}){const[f,p]=d.useState(null),[m,w]=d.useState(""),[g,v]=d.useState(null),y=d.useCallback(R=>{const[E,$]=R.split("::");return!E||!$?null:{key:R,category:E,item:$}},[]),x=d.useCallback(R=>{p(R.id),w(R.title)},[]),b=d.useCallback(R=>{n(R,{title:m.trim()}),p(null),w("")},[n,m]),_=d.useCallback(()=>{p(null),w("")},[]),S=d.useCallback(R=>{v(R)},[]),j=d.useCallback(R=>{R.preventDefault()},[]),N=d.useCallback(R=>{g!==null&&g!==R&&o(g,R),v(null)},[g,o]),k=d.useCallback(()=>{v(null)},[]);return i.jsxs("div",{className:"space-y-1",children:[h&&i.jsxs(F,{type:"button",variant:"outline",onClick:a,className:"w-full gap-2 border-dashed","data-help-id":"add-step",children:[i.jsx(Sa,{className:"h-4 w-4"}),"Add Step"]}),e.length===0?i.jsx("div",{className:"rounded-md border border-dashed border-border/60 p-4 text-center",children:i.jsx("p",{className:"text-sm text-muted-foreground leading-snug",children:"No steps yet. Select items from the library above  they'll appear in your first step automatically."})}):i.jsx(A7,{type:"single",collapsible:!0,value:t||void 0,onValueChange:R=>R&&r(R),className:"space-y-0","data-help-id":"steps",children:e.map((R,E)=>{const $=R.title.trim()||`Step ${E+1}`,M=R.itemKeys.map(y).filter(D=>D!==null),O=t===R.id,C=f===R.id;return i.jsxs(AT,{value:R.id,className:H("border border-border/40 rounded-none overflow-hidden transition-colors",O?"border-primary/30 bg-muted/15":"border-border/40 bg-background hover:bg-muted/10"),draggable:!0,onDragStart:()=>S(E),onDragOver:j,onDrop:()=>N(E),onDragEnd:k,children:[i.jsx(IT,{className:"px-3 py-2 hover:no-underline [&>svg]:hidden",children:i.jsxs("div",{className:"flex w-full items-center gap-3",children:[i.jsx(rO,{className:"h-4 w-4 text-muted-foreground/70 cursor-grab shrink-0"}),C?i.jsxs("div",{className:"flex items-center gap-2 flex-1",onClick:D=>D.stopPropagation(),children:[i.jsx(ze,{value:m,onChange:D=>w(D.target.value),placeholder:`Step ${E+1}`,className:"h-8 flex-1",autoFocus:!0,onKeyDown:D=>{D.key==="Enter"?(D.preventDefault(),b(R.id)):D.key==="Escape"&&_()}}),i.jsx(F,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:D=>{D.stopPropagation(),b(R.id)},children:i.jsx(rl,{className:"h-4 w-4"})}),i.jsx(F,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:D=>{D.stopPropagation(),_()},children:i.jsx(rr,{className:"h-4 w-4"})})]}):i.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[i.jsx("span",{className:"font-semibold text-sm truncate",children:$}),i.jsx(F,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:D=>{D.stopPropagation(),x(R)},children:i.jsx(eS,{className:"h-3 w-3"})})]}),i.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[M.length>0&&i.jsxs(Me,{variant:"secondary",className:"text-[11px] px-2 py-0.5",children:[M.length," ",M.length===1?"item":"items"]}),O&&i.jsxs(Me,{variant:"outline",className:"gap-1 text-[11px] px-2 py-0.5 border-primary/30 text-primary",children:[i.jsx(jO,{className:"h-3 w-3"}),"Active"]}),i.jsx(F,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:D=>{D.stopPropagation(),s(R.id)},children:i.jsx(Yd,{className:"h-4 w-4 text-destructive"})})]})]})}),i.jsx(OT,{className:"px-0 pb-0",children:i.jsxs("div",{className:"space-y-0",children:[i.jsx(pr,{value:R.description,onChange:D=>n(R.id,{description:D.target.value}),placeholder:"Add step notes or instructions...",rows:2,className:"resize-none text-sm min-h-[56px] rounded-none border-x-0 border-t border-b-0 px-3"}),O&&M.length===0&&i.jsx("div",{className:"border-t border-border/40 px-3 py-2 text-center","data-help-id":"active-step",children:i.jsx("p",{className:"text-sm text-muted-foreground",children:"Items you select will be added here automatically"})}),M.length>0&&i.jsx("div",{className:"border-t border-border/40 divide-y divide-border/40",children:M.map(D=>i.jsxs("div",{className:"px-3 py-2 space-y-1",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-sm font-semibold truncate leading-tight",children:D.item}),i.jsx("p",{className:"text-[11px] text-muted-foreground leading-tight",children:D.category})]}),i.jsx(F,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:()=>l(D.category,D.item),children:i.jsx(Yd,{className:"h-4 w-4 text-destructive"})})]}),i.jsx(ze,{value:u[D.key]||"",onChange:I=>c(D.category,D.item,I.target.value),placeholder:"Add context (e.g., 0.5 mg, morning, with food...)",className:"h-7 text-xs rounded-none border-x-0 px-3","data-help-id":"context"})]},D.key))})]})})]},R.id)})})]})}const O7=[{id:"picker",text:"Browse and select items by category"},{id:"steps",text:"Organize your items into ordered steps"},{id:"active-step",text:"Selected items appear here"},{id:"add-step",text:"Create a new step in your routine"},{id:"context",text:'Add notes like "2 drops" or "morning"'},{id:"mix",text:"Generate AI analysis of your blueprint"}];function M7({isOpen:e,onClose:t,onStartTour:r}){const[n,s]=d.useState([]),a=d.useCallback(()=>{const o=[];O7.forEach(({id:l,text:c})=>{const u=document.querySelector(`[data-help-id="${l}"]`);if(!u)return;const h=u.getBoundingClientRect(),f=window.innerWidth,p=window.innerHeight;let m="right",w=h.right+12,g=h.top+h.height/2;h.right+200>f&&(h.left>200?(m="left",w=h.left-12):(m="bottom",w=h.left+h.width/2,g=h.bottom+12)),(m==="left"||m==="right")&&(g<50&&(g=50),g>p-50&&(g=p-50)),o.push({id:l,text:c,x:w,y:g,side:m})}),s(o)},[]);return d.useEffect(()=>{if(e){const o=setTimeout(a,100);return()=>clearTimeout(o)}},[e,a]),d.useEffect(()=>{if(!e)return;const o=l=>{l.key==="Escape"&&t()};return window.addEventListener("keydown",o),window.addEventListener("resize",a),()=>{window.removeEventListener("keydown",o),window.removeEventListener("resize",a)}},[e,t,a]),e?Tn.createPortal(i.jsxs("div",{className:"fixed inset-0 z-50",children:[i.jsx("div",{className:"absolute inset-0 bg-background/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:t}),n.map(o=>i.jsxs("div",{className:H("fixed z-50 max-w-[200px] rounded-lg bg-foreground text-background px-3 py-2 text-sm shadow-lg animate-in fade-in zoom-in-95 duration-200",o.side==="left"&&"-translate-x-full",o.side==="top"&&"-translate-y-full -translate-x-1/2",o.side==="bottom"&&"-translate-x-1/2",(o.side==="left"||o.side==="right")&&"-translate-y-1/2"),style:{left:o.x,top:o.y},children:[o.text,i.jsx("div",{className:H("absolute w-2 h-2 bg-foreground rotate-45",o.side==="right"&&"-left-1 top-1/2 -translate-y-1/2",o.side==="left"&&"-right-1 top-1/2 -translate-y-1/2",o.side==="bottom"&&"-top-1 left-1/2 -translate-x-1/2",o.side==="top"&&"-bottom-1 left-1/2 -translate-x-1/2")})]},o.id)),i.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 bg-card border border-border rounded-2xl shadow-lg p-4 animate-in slide-in-from-bottom-4 duration-300",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(tu,{className:"h-4 w-4"}),i.jsx("span",{children:"Hover over highlighted elements"})]}),i.jsx("div",{className:"h-4 w-px bg-border"}),i.jsxs(F,{variant:"ghost",size:"sm",onClick:()=>{t(),r()},className:"gap-2",children:[i.jsx(ys,{className:"h-4 w-4"}),"Take a tour"]}),i.jsx(F,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8",children:i.jsx(rr,{className:"h-4 w-4"})})]})})]}),document.body):null}function D7({onClick:e}){return i.jsx(F,{type:"button",variant:"outline",size:"icon",onClick:e,className:"h-9 w-9 rounded-full border-dashed","aria-label":"Show help",children:i.jsx(tu,{className:"h-4 w-4"})})}const qc="blueprint_build_tour_completed",Dl=[{targetId:"picker",title:"Browse Your Library",description:"Click on categories to explore items. Select the ones you want to include in your blueprint."},{targetId:"add-step",title:"Organize Into Steps",description:"Create steps to organize your routine. Items you select flow into the active step."},{targetId:"steps",title:"Manage Your Steps",description:"Click a step to make it active. Add context like dosage or timing to each item."},{targetId:"mix",title:"Generate AI Analysis",description:"When you're ready, hit Build to get an AI-powered review of your blueprint!"}];function L7({isActive:e,onComplete:t,onSkip:r}){const[n,s]=d.useState(0),[a,o]=d.useState(null),l=Dl[n],c=d.useCallback(()=>{if(!l)return;const p=document.querySelector(`[data-help-id="${l.targetId}"]`);o(p?p.getBoundingClientRect():null)},[l]);d.useEffect(()=>{if(e)return c(),window.addEventListener("resize",c),window.addEventListener("scroll",c),()=>{window.removeEventListener("resize",c),window.removeEventListener("scroll",c)}},[e,c,n]),d.useEffect(()=>{if(!e)return;const p=m=>{m.key==="Escape"?r():(m.key==="ArrowRight"||m.key==="Enter")&&u()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e,n,r]);const u=d.useCallback(()=>{n<Dl.length-1?s(p=>p+1):(localStorage.setItem(qc,"true"),t())},[n,t]),h=d.useCallback(()=>{localStorage.setItem(qc,"true"),r()},[r]);if(!e||!l)return null;const f=(()=>{if(!a)return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};const p=window.innerHeight,m=window.innerWidth,w=320,g=180,v=16;let y=a.bottom+v,x=a.left+a.width/2-w/2;return y+g>p-20&&(y=a.top-g-v),x<20&&(x=20),x+w>m-20&&(x=m-w-20),{top:`${y}px`,left:`${x}px`}})();return Tn.createPortal(i.jsxs("div",{className:"fixed inset-0 z-50",children:[i.jsx("div",{className:"absolute inset-0",children:i.jsxs("svg",{className:"w-full h-full",children:[i.jsx("defs",{children:i.jsxs("mask",{id:"spotlight-mask",children:[i.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),a&&i.jsx("rect",{x:a.left-8,y:a.top-8,width:a.width+16,height:a.height+16,rx:"12",fill:"black"})]})}),i.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"hsl(var(--background) / 0.8)",mask:"url(#spotlight-mask)",className:"animate-in fade-in duration-300"})]})}),a&&i.jsx("div",{className:"absolute rounded-xl border-2 border-primary shadow-glow-aqua pointer-events-none animate-pulse",style:{left:a.left-8,top:a.top-8,width:a.width+16,height:a.height+16}}),i.jsx(Oe,{className:"fixed w-80 bg-card border-border shadow-lg animate-in slide-in-from-bottom-2 duration-300 z-10",style:f,children:i.jsxs(Be,{className:"p-4 space-y-4",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("h3",{className:"font-semibold",children:l.title}),i.jsx("p",{className:"text-sm text-muted-foreground",children:l.description})]}),i.jsx(F,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:h,children:i.jsx(rr,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex gap-1.5",children:Dl.map((p,m)=>i.jsx("div",{className:H("h-1.5 w-1.5 rounded-full transition-colors",m===n?"bg-primary":"bg-muted-foreground/30")},m))}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(F,{variant:"ghost",size:"sm",onClick:h,children:"Skip"}),i.jsxs(F,{size:"sm",onClick:u,className:"gap-1",children:[n===Dl.length-1?"Done":"Next",n<Dl.length-1&&i.jsx(Hh,{className:"h-4 w-4"})]})]})]})]})})]}),document.body)}function $7({onStartTour:e,onDismiss:t}){const[r,n]=d.useState(()=>localStorage.getItem(qc)==="true");return r?null:i.jsxs("div",{className:"rounded-xl border border-primary/30 bg-primary/5 p-4 flex items-center justify-between gap-4 animate-in fade-in slide-in-from-top-2 duration-300",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:i.jsx(ys,{className:"h-5 w-5 text-primary"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"New here?"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Take a quick tour to learn how to build blueprints."})]})]}),i.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[i.jsx(F,{variant:"ghost",size:"sm",onClick:()=>{n(!0),localStorage.setItem(qc,"true"),t()},children:"Maybe later"}),i.jsxs(F,{size:"sm",onClick:e,className:"gap-2",children:[i.jsx(ys,{className:"h-4 w-4"}),"Take Tour"]})]})]})}function F7(){return localStorage.getItem(qc)==="true"}function U7({onClick:e}){return i.jsx(F,{type:"button",variant:"ghost",size:"icon",onClick:e,className:"h-9 w-9 rounded-full","aria-label":"Take a tour",title:"Take a tour",children:i.jsx(ys,{className:"h-4 w-4"})})}const B7=8;function z7(e){return e?`stacklab-recent-tags:${e}`:null}function q7(e){if(!e)return[];try{const t=localStorage.getItem(e);if(!t)return[];const r=JSON.parse(t);if(Array.isArray(r))return r}catch{return[]}return[]}function W7(e,t){if(e)try{localStorage.setItem(e,JSON.stringify(t))}catch{}}function MT(){const{user:e}=Ne(),t=d.useMemo(()=>z7(e==null?void 0:e.id),[e==null?void 0:e.id]),[r,n]=d.useState([]);d.useEffect(()=>{n(q7(t))},[t]);const s=d.useCallback(a=>{if(!t)return[];const o=Oy(a);if(o.length===0)return r;const l=[...o,...r.filter(c=>!o.includes(c))].slice(0,B7);return n(l),W7(t,l),l},[t,r]);return{recentTags:r,addRecentTags:s}}const V7=au("generate-banner"),H7=au("generate-blueprint"),Wb="blueprints_home_draft_v1";function K7(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=e.categories;return Array.isArray(t)?t.map(r=>({name:typeof r.name=="string"?r.name:"Untitled",items:Array.isArray(r.items)?r.items.filter(n=>typeof n=="string"):[]})).filter(r=>r.name.trim().length>0):[]}function Vb(){var $x;const{inventoryId:e,blueprintId:t}=ka(),r=Tr(),n=Er(),{toast:s}=St(),{session:a,user:o}=Ne(),l=!!t,{data:c,isLoading:u}=Nf(t),h=e||(c==null?void 0:c.inventory_id)||void 0,{data:f,isLoading:p}=ax(h),{data:m}=mC(),{recentTags:w,addRecentTags:g}=MT(),v=Yy(),y=Z8(),{getFollowState:x,joinChannel:b}=Pa(),_=d.useMemo(()=>(new URLSearchParams(n.search).get("channel")||"").trim(),[n.search]),S=_?gu(_):null,{data:j=[]}=mu(S?[S.tagSlug]:[]),N=(($x=j.find(B=>B.slug===(S==null?void 0:S.tagSlug)))==null?void 0:$x.id)||null,k=N?x({id:N}):"not_joined",R=k==="joined"||k==="leaving",[E,$]=d.useState(!1),[M,O]=d.useState(!1),[C,D]=d.useState(""),[I,z]=d.useState("full"),[A,P]=d.useState({}),[V,J]=d.useState({}),[L,Q]=d.useState(""),[q,K]=d.useState(""),[te,W]=d.useState(""),[ae,X]=d.useState(!0),[le,ue]=d.useState(null),[ve,Ve]=d.useState(!1),[me,nt]=d.useState(!1),[Ae,kt]=d.useState([]),[Qt,re]=d.useState(!0),[Ee,We]=d.useState(!1),[Je,$e]=d.useState([]),[Ut,Xe]=d.useState(""),[Ke,Bt]=d.useState(""),[Ri,bu]=d.useState(!0),[Xn,zt]=d.useState([]),[An,Ct]=d.useState(null),[Zn,_u]=d.useState(!1),[ks,ju]=d.useState(!1),[gl,vl]=d.useState(""),[Ia,Df]=d.useState(""),[Gr,In]=d.useState("starter"),[Ai,ke]=d.useState(""),[Ue,et]=d.useState("medium"),[Jt,Rr]=d.useState("medium"),[Ar,es]=d.useState("balanced"),[yr,dn]=d.useState(!1),[QT,Lf]=d.useState(!1),[xx,JT]=d.useState(null),[XT,$f]=d.useState(!1),[ZT,yl]=d.useState(!1),[eP,wx]=d.useState(()=>!F7()),bx=d.useRef(!1),[xl,_x]=d.useState([]),jx=!!(l&&c&&o&&c.creator_user_id===o.id),tP=p||l&&u,rP=!!o||!!(a!=null&&a.access_token),Sx=!o&&!(a!=null&&a.access_token)?"Sign in to generate a banner.":null,Nx=a!=null&&a.access_token?null:"Sign in to auto-generate a blueprint.",kx=d.useCallback(B=>{const G={},de={};return!B||typeof B!="object"||Array.isArray(B)?{items:G,contexts:de}:(Object.entries(B).forEach(([ne,oe])=>{if(!Array.isArray(oe))return;const ye=[];oe.forEach(fe=>{if(typeof fe=="string"){ye.push(fe);return}if(!fe||typeof fe!="object")return;const Ce=typeof fe.name=="string"?fe.name:"";Ce&&(ye.push(Ce),typeof fe.context=="string"&&fe.context.trim()&&(de[`${ne}::${Ce}`]=fe.context.trim()))}),ye.length>0&&(G[ne]=ye)}),{items:G,contexts:de})},[]),Cx=d.useCallback(B=>!B||typeof B!="object"||!Array.isArray(B)?[]:B.filter(G=>G&&typeof G=="object").map((G,de)=>{const ne=G,oe=(ne.items||[]).map(ye=>{const fe=typeof ye.category=="string"?ye.category:"",Ce=typeof ye.name=="string"?ye.name:"";return!fe||!Ce?null:`${fe}::${Ce}`}).filter(ye=>!!ye);return{id:ne.id||`step-${de}`,title:ne.title||"",description:typeof ne.description=="string"?ne.description:"",itemKeys:oe}}),[]),Ex=d.useCallback(B=>{const G={},de={};return!B||typeof B!="object"||!Array.isArray(B)?{items:G,contexts:de}:(B.forEach(ne=>{(ne.items||[]).forEach(ye=>{const fe=typeof ye.category=="string"?ye.category:"",Ce=typeof ye.name=="string"?ye.name:"";!fe||!Ce||(G[fe]||(G[fe]=[]),G[fe].includes(Ce)||G[fe].push(Ce),typeof ye.context=="string"&&ye.context.trim()&&(de[`${fe}::${Ce}`]=ye.context.trim()))})}),{items:G,contexts:de})},[]);d.useEffect(()=>{var B,G;if(!(!f||Zn)&&!(l&&!c)){if(_x(K7(f.generated_schema)),$e(lx(f.review_sections).slice(0,oc)),bu(f.include_score??!0),l&&c){const de=kx(c.selected_items),ne=Ex(c.steps),oe={...de.items};Object.entries(ne.items).forEach(([Ce,Ie])=>{const we=new Set(oe[Ce]||[]);Ie.forEach(Ze=>we.add(Ze)),oe[Ce]=Array.from(we)});const ye={...de.contexts,...ne.contexts};D(c.title||f.title),P(oe),J(ye),Q(c.mix_notes||""),K(c.review_prompt||""),W(c.llm_review||""),ue(c.banner_url||null),X(!0),kt(c.tags.map(Ce=>Ce.slug)),re(c.is_public);const fe=Cx(c.steps);zt(fe),Ct(((B=fe[0])==null?void 0:B.id)||null),z("full")}else{D(""),zt([]),Ct(null),ue(null),X(!0),z("full");try{const de=sessionStorage.getItem(Wb);if(de){const ne=JSON.parse(de);if(sessionStorage.removeItem(Wb),ne&&ne.version===1&&typeof ne.inventoryId=="string"&&ne.inventoryId===f.id){D(typeof ne.title=="string"&&ne.title.trim()?ne.title:"");const oe=ne.selectedItems&&typeof ne.selectedItems=="object"?ne.selectedItems:{};P(oe);const ye=ne.itemContexts&&typeof ne.itemContexts=="object"?ne.itemContexts:{};J(ye),Q(""),K(""),W(""),kt([]),re(!0),ue(null),X(!0);const fe=ne.modeHint==="simple"?"simple":ne.modeHint==="full"?"full":null;fe&&z(fe);const Ce=Array.isArray(ne.steps)?ne.steps:[];if(Ce.length>0)zt(Ce),Ct(((G=Ce[0])==null?void 0:G.id)||null);else if(fe!=="simple"){const Ie=Object.entries(oe).flatMap(([we,Ze])=>(Ze||[]).map(Et=>`${we}::${Et}`));if(Ie.length>0){const we=crypto.randomUUID();zt([{id:we,title:"",description:"",itemKeys:Ie}]),Ct(we)}else zt([]),Ct(null)}else zt([]),Ct(null)}}}catch{}}_u(!0)}},[f,c,l,Zn,kx,Cx,Ex]),d.useEffect(()=>{f&&vl(B=>B||C||f.title)},[f,C]);const Ir=d.useMemo(()=>Object.values(A).reduce((B,G)=>B+G.length,0),[A]),Tx=d.useMemo(()=>{const B=new Map;return xl.forEach(G=>{B.set(G.name,new Set(G.items))}),B},[xl]),Px=Ir>0||Xn.length>0;d.useEffect(()=>{bx.current||f&&(Ir<=0||(bx.current=!0,At({eventName:"edit_blueprint",userId:o==null?void 0:o.id,blueprintId:t??null,path:n.pathname,metadata:{inventoryId:f.id,selectedCount:Ir,isEditing:l}})))},[f,Ir,o==null?void 0:o.id,t,n.pathname,l]),d.useEffect(()=>{f&&(l||At({eventName:"start_build",userId:o==null?void 0:o.id,blueprintId:t??null,path:n.pathname,metadata:{inventoryId:f.id}}))},[f,l,o==null?void 0:o.id,t,n.pathname]);const Su=d.useMemo(()=>cx(Je),[Je]);l?c!=null&&c.title:f!=null&&f.title;const ts=d.useCallback((B,G)=>`${B}::${G}`,[]),Nu=d.useCallback(B=>{zt(G=>G.map(de=>({...de,itemKeys:de.itemKeys.filter(ne=>ne!==B)})))},[]),ku=d.useCallback(B=>{zt(G=>{var ne;if(G.length===0){const oe=crypto.randomUUID();return Ct(oe),[{id:oe,title:"",description:"",itemKeys:[B]}]}const de=((ne=G.find(oe=>oe.id===An))==null?void 0:ne.id)||G[G.length-1].id;return G.map(oe=>oe.id!==de||oe.itemKeys.includes(B)?oe:{...oe,itemKeys:[...oe.itemKeys,B]})})},[An]),nP=d.useCallback((B,G)=>{const de=ts(B,G);P(ne=>{const oe=new Set(ne[B]||[]),ye=oe.has(G);return ye?oe.delete(G):oe.add(G),I==="full"?ye?Nu(de):ku(de):ye&&J(fe=>{const Ce={...fe};return delete Ce[de],Ce}),{...ne,[B]:Array.from(oe)}})},[ku,I,ts,Nu]),sP=d.useCallback((B,G)=>{_x(de=>de.map(ne=>ne.name===B?{...ne,items:ne.items.includes(G)?ne.items:[...ne.items,G]}:ne)),P(de=>({...de,[B]:[...de[B]||[],G]})),I==="full"&&ku(ts(B,G))},[ku,I,ts]),Rx=d.useCallback((B,G)=>{const de=ts(B,G);P(ne=>({...ne,[B]:(ne[B]||[]).filter(oe=>oe!==G)})),J(ne=>{const oe={...ne};return delete oe[de],oe}),I==="full"&&Nu(de)},[I,ts,Nu]),Ax=d.useCallback((B,G,de)=>{J(ne=>({...ne,[`${B}::${G}`]:de}))},[]),iP=d.useCallback(()=>{P({}),J({}),zt(B=>B.map(G=>({...G,itemKeys:[]})))},[]),Ix=d.useCallback(()=>{const B={id:crypto.randomUUID(),title:"",description:"",itemKeys:[]};zt(G=>[...G,B]),Ct(B.id)},[]),aP=d.useCallback((B,G)=>{zt(de=>de.map(ne=>ne.id===B?{...ne,...G}:ne))},[]),oP=d.useCallback(B=>{zt(G=>{const de=G.find(ye=>ye.id===B);if(!de)return G;const ne=new Set(de.itemKeys);ne.size>0&&(P(ye=>{const fe={};return Object.entries(ye).forEach(([Ce,Ie])=>{const we=Ie.filter(Ze=>!ne.has(ts(Ce,Ze)));we.length>0&&(fe[Ce]=we)}),fe}),J(ye=>{const fe={...ye};return ne.forEach(Ce=>{delete fe[Ce]}),fe}));const oe=G.filter(ye=>ye.id!==B);return An===B&&oe.length>0?Ct(oe[oe.length-1].id):oe.length===0&&Ct(null),oe})},[An,ts]),lP=d.useCallback((B,G)=>{zt(de=>{if(B===G)return de;const ne=[...de],[oe]=ne.splice(B,1);return ne.splice(G,0,oe),ne})},[]),cP=B=>{X(B),B||ue(null)},uP=d.useCallback(async()=>{var G,de,ne;if(!f)return;if(Ir===0){s({title:"No items selected",description:"Select at least one item before generating the review.",variant:"destructive"});return}if(!(a!=null&&a.access_token)){s({title:"Sign in required",description:"Please sign in to generate a review.",variant:"destructive"});return}const B={};Object.entries(A).forEach(([oe,ye])=>{ye.length>0&&(B[oe]=ye.map(fe=>({name:fe,context:V[`${oe}::${fe}`]||void 0})))}),We(!0),W("");try{const oe=await ac("analyze-blueprint",{stream:!0,body:{title:C.trim()||f.title,inventoryTitle:f.title,selectedItems:B,mixNotes:L.trim(),reviewPrompt:q.trim(),reviewSections:Su,includeScore:Ri}});if(!oe.body)throw new Error("No response body");const ye=oe.body.getReader(),fe=new TextDecoder;let Ce="",Ie="";for(;;){const{done:we,value:Ze}=await ye.read();if(we)break;Ie+=fe.decode(Ze,{stream:!0});let Et;for(;(Et=Ie.indexOf(`
`))!==-1;){let qt=Ie.slice(0,Et);if(Ie=Ie.slice(Et+1),qt.endsWith("\r")&&(qt=qt.slice(0,-1)),qt.startsWith(":")||qt.trim()===""||!qt.startsWith("data: "))continue;const wl=qt.slice(6).trim();if(wl==="[DONE]")break;try{const bl=(ne=(de=(G=JSON.parse(wl).choices)==null?void 0:G[0])==null?void 0:de.delta)==null?void 0:ne.content;bl&&(Ce+=bl,W(Ce))}catch{Ie=qt+`
`+Ie;break}}}s({title:"Analysis complete!",description:"Your blueprint has been reviewed."}),At({eventName:"generate_ai_review",userId:o==null?void 0:o.id,blueprintId:t??null,path:n.pathname,metadata:{inventoryId:(f==null?void 0:f.id)??null,selectedCount:Ir,isEditing:l}})}catch(oe){s({title:"Analysis failed",description:jo(oe,"Please try again."),variant:"destructive"})}finally{We(!1)}},[f,A,V,C,L,q,Su,Ri,Ir,s,t,n.pathname,o==null?void 0:o.id,l,a==null?void 0:a.access_token]),Ox=d.useCallback(async()=>{var de,ne;if(a!=null&&a.access_token)return a.access_token;const{data:B}=await U.auth.getSession();if((de=B.session)!=null&&de.access_token)return B.session.access_token;const{data:G}=await U.auth.refreshSession();return((ne=G.session)==null?void 0:ne.access_token)??null},[a==null?void 0:a.access_token]),Mx=d.useCallback(B=>{var oe,ye;const G={},de={},ne=[];(B.steps||[]).forEach(fe=>{var Ie,we;const Ce=[];(fe.items||[]).forEach(Ze=>{var bl,Fx;const Et=(bl=Ze.category)==null?void 0:bl.trim(),qt=(Fx=Ze.name)==null?void 0:Fx.trim();if(!Et||!qt)return;const wl=Tx.get(Et);if(!wl||!wl.has(qt))return;G[Et]||(G[Et]=[]),G[Et].includes(qt)||G[Et].push(qt);const Uf=`${Et}::${qt}`;Ce.push(Uf),Ze.context&&Ze.context.trim()&&(de[Uf]=Ze.context.trim())}),Ce.length>0&&ne.push({id:crypto.randomUUID(),title:((Ie=fe.title)==null?void 0:Ie.trim())||"",description:((we=fe.description)==null?void 0:we.trim())||"",itemKeys:Ce})}),(oe=B.title)!=null&&oe.trim()&&D(B.title.trim()),P(G),J(de),zt(ne),Ct(((ye=ne[0])==null?void 0:ye.id)??null),W(""),ue(null)},[Tx]),Ff=d.useCallback(async()=>{if(f){if(!H7){s({title:"Auto-generation unavailable",description:"The generation endpoint is not configured.",variant:"destructive"});return}if(!(a!=null&&a.access_token)){s({title:"Sign in required",description:"Please sign in to auto-generate a blueprint.",variant:"destructive"});return}dn(!0);try{const B=(f.tags||[]).some(fe=>String(fe||"").toLowerCase().includes("skincare"))?"skincare":(f.tags||[]).some(fe=>String(fe||"").toLowerCase().includes("workout")||String(fe||"").toLowerCase().includes("fitness"))?"fitness":(f.tags||[]).some(fe=>String(fe||"").toLowerCase().includes("nutrition")||String(fe||"").toLowerCase().includes("diet"))?"nutrition":(f.tags||[]).some(fe=>String(fe||"").toLowerCase().includes("productivity")||String(fe||"").toLowerCase().includes("planning"))?"productivity":"general",G=JW({controls:{focus:Gr,focusCustom:Gr==="custom"?Ai:void 0,length:Ue,strictness:"medium",variety:Jt,caution:Ar},domainHint:B,optional:{name:gl.trim()||void 0,notes:Ia.trim()||void 0,tags:Ae,inventoryTitle:f.title}});JT(G);const de=G.derived.title,ne=G.derived.description,oe=G.derived.notes,ye=await ac("generate-blueprint",{body:{title:de,description:ne,notes:oe,inventoryTitle:f.title,categories:xl.map(fe=>({name:fe.name,items:fe.items}))}});if(!(ye!=null&&ye.steps)||ye.steps.length===0)throw new Error("No steps were generated");Mx(ye),ju(!1),s({title:"Blueprint generated",description:"Your steps and items have been updated."}),At({eventName:"auto_generate_blueprint",userId:o==null?void 0:o.id,blueprintId:t??null,path:n.pathname,metadata:{inventoryId:f.id,stepCount:ye.steps.length,focus:Gr,focusCustom:Gr==="custom"?Ai:void 0,length:Ue,variety:Jt,caution:Ar,domainHint:B}})}catch(B){s({title:"Auto-generation failed",description:jo(B,"Please try again."),variant:"destructive"})}finally{dn(!1)}}},[f,xl,gl,Ia,Gr,Ai,Ue,Jt,Ar,Mx,s,a==null?void 0:a.access_token,o==null?void 0:o.id,t,n.pathname]),dP=d.useCallback(()=>{if(Px){Lf(!0);return}Ff()},[Px,Ff]),Dx=d.useCallback(async()=>{if(!f)return;if(!V7)return s({title:"Banner generation unavailable",description:"The banner endpoint is not configured.",variant:"destructive"}),null;if(!await Ox())return s({title:"Sign in required",description:"Please sign in to generate a banner.",variant:"destructive"}),null;if(!C.trim())return s({title:"Title required",description:"Add a blueprint title before generating a banner.",variant:"destructive"}),null;Ve(!0);try{const G=await ac("generate-banner",{body:{title:C.trim(),inventoryTitle:f.title,tags:Ae}});if(!(G!=null&&G.bannerUrl))throw new Error("No banner URL returned");return ue(G.bannerUrl),G.bannerUrl}catch(G){throw s({title:"Banner generation failed",description:jo(G,"Please try again."),variant:"destructive"}),G}finally{Ve(!1)}},[f,Ox,C,Ae,s]),Lx=async B=>{if(l&&t&&!jx){s({title:"Permission denied",description:"Only the blueprint owner can edit this blueprint.",variant:"destructive"});return}if(!(a!=null&&a.access_token)){s({title:"Sign in required",description:"Please sign in to publish your blueprint.",variant:"destructive"});return}if(f){if(Qt){if(!S){s({title:"Choose a channel to post",description:"Public blueprints must be posted to a channel. Start from a channel page or use Create.",variant:"destructive"});return}if(!(B!=null&&B.bypassJoinCheck)&&!R){$(!0);return}}if(!C.trim()){s({title:"Title required",description:l?"Add a blueprint title before saving changes.":"Add a blueprint title before publishing.",variant:"destructive"});return}if(Ir===0){s({title:"Select items",description:l?"Pick at least one item before saving changes.":"Pick at least one item before publishing.",variant:"destructive"});return}if(Ae.length>4){s({title:"Too many tags",description:"Please use 4 tags or fewer.",variant:"destructive"});return}try{const G={};Object.entries(A).forEach(([we,Ze])=>{Ze.length>0&&(G[we]=Ze.map(Et=>({name:Et,context:V[`${we}::${Et}`]||void 0})))});const de=new Map;Object.entries(A).forEach(([we,Ze])=>{Ze.forEach(Et=>{const qt=ts(we,Et);de.set(qt,{category:we,name:Et,context:V[qt]||void 0})})});const ne=Xn.map(we=>({id:we.id,title:we.title,description:we.description||null,items:we.itemKeys.map(Ze=>de.get(Ze)).filter(Ze=>!!Ze)})),oe=new Set(ne.flatMap(we=>we.items.map(Ze=>`${Ze.category}::${Ze.name}`))),ye=Array.from(de.entries()).filter(([we])=>!oe.has(we)).map(([,we])=>we),fe=I==="simple"?null:ne.length>0?[...ne,...ye.length>0?[{id:"unassigned",title:"Unassigned",description:null,items:ye}]:[]]:null;let Ce=le;if(ae&&!Ce&&(Ce=await Dx()),ae&&!Ce)throw new Error("Banner generation is required before publishing.");const Ie=S?Array.from(new Set([...Ae,S.tagSlug])):Ae;if(l&&t){const we=await y.mutateAsync({blueprintId:t,title:C.trim(),selectedItems:G,steps:fe,mixNotes:L.trim()?L.trim():null,reviewPrompt:q.trim()?q.trim():null,bannerUrl:Ce,llmReview:te,generationControls:xx,tags:Ie,isPublic:Qt});g(Ae),At({eventName:"save_blueprint",userId:o==null?void 0:o.id,blueprintId:we.id,path:n.pathname,metadata:{isEditing:!0,hasReview:!!te,tagCount:Ie.length}}),At({eventName:"publish_blueprint",userId:o==null?void 0:o.id,blueprintId:we.id,path:n.pathname,metadata:{isPublic:Qt,isEditing:!0}}),r(`/blueprint/${we.id}`)}else{const we=await v.mutateAsync({inventoryId:f.id,title:C.trim(),selectedItems:G,steps:fe,mixNotes:L.trim()?L.trim():null,reviewPrompt:q.trim()?q.trim():null,bannerUrl:Ce,llmReview:te,generationControls:xx,tags:Ie,isPublic:Qt,sourceBlueprintId:null});g(Ae),At({eventName:"save_blueprint",userId:o==null?void 0:o.id,blueprintId:we.id,path:n.pathname,metadata:{isEditing:!1,hasReview:!!te,tagCount:Ie.length}}),At({eventName:"publish_blueprint",userId:o==null?void 0:o.id,blueprintId:we.id,path:n.pathname,metadata:{isPublic:Qt,isEditing:!1}}),r(`/blueprint/${we.id}`)}}catch(G){s({title:l?"Update failed":"Publish failed",description:G instanceof Error?G.message:"Please try again.",variant:"destructive"})}}},hP=async()=>{if(!(!S||!N)){O(!0);try{await b({id:N,slug:S.tagSlug}),$(!1),await Lx({bypassJoinCheck:!0})}catch(B){s({title:"Join failed",description:B instanceof Error?B.message:"Please try again.",variant:"destructive"})}finally{O(!1)}}};return l&&c&&!jx?i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx(vt,{}),i.jsx("main",{className:"max-w-3xl mx-auto px-3 sm:px-4 py-10 pb-24",children:i.jsxs("div",{className:"border border-border/40 px-3 py-10 text-center space-y-3",children:[i.jsx("h2",{className:"text-lg font-semibold",children:"You cannot edit this blueprint"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Only the original creator can make changes."}),i.jsx(pe,{to:`/blueprint/${c.id}`,children:i.jsx(F,{children:"Back to blueprint"})})]})})]}):i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx(vt,{}),i.jsxs("main",{className:"max-w-3xl mx-auto px-3 sm:px-4 py-6 pb-24",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs(pe,{to:l&&t?`/blueprint/${t}`:S?ma("/inventory",S.slug,{intent:"post"}):"/inventory",className:"inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground",children:[i.jsx(Y1,{className:"h-4 w-4"}),l?"Back to blueprint":"Back to library"]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(U7,{onClick:()=>yl(!0)}),i.jsx(D7,{onClick:()=>$f(!0)})]})]}),tP?i.jsxs("div",{className:"border border-border/40 px-3 py-3 space-y-3",children:[i.jsx(je,{className:"h-6 w-48"}),i.jsx(je,{className:"h-24 w-full"})]}):f?i.jsxs("div",{className:"space-y-4",children:[eP&&i.jsx($7,{onStartTour:()=>{wx(!1),yl(!0)},onDismiss:()=>wx(!1)}),i.jsx("section",{className:"animate-fade-in",style:{animationDelay:"0.05s"},children:i.jsxs("div",{className:"border border-border/40 rounded-none overflow-hidden divide-y divide-border/40",children:[i.jsxs("div",{className:"px-3 py-2 space-y-2",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-sm font-semibold truncate",children:f.title}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Build your blueprint from this library."})]}),i.jsxs(F,{type:"button",variant:"outline",className:"gap-2 shrink-0",onClick:()=>ju(B=>!B),children:[i.jsx(Br,{className:"h-4 w-4"}),"AI-generate"]})]}),i.jsx(ze,{value:C,onChange:B=>D(B.target.value),placeholder:"Name your blueprint...",className:"text-xl font-bold bg-transparent border-none focus-visible:ring-2 focus-visible:ring-primary/50 h-10 px-0"}),Nx&&i.jsx("p",{className:"text-xs text-muted-foreground",children:Nx}),ks&&i.jsxs("div",{className:"grid gap-3 rounded-lg border border-border/40 bg-muted/20 p-4",children:[i.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[i.jsxs("div",{className:"grid gap-2 sm:col-span-2",children:[i.jsx(Pe,{children:"Name (optional)"}),i.jsx(ze,{value:gl,onChange:B=>vl(B.target.value),placeholder:"Give your blueprint a name (Optional)"})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(Pe,{children:"Focus"}),i.jsxs(ya,{value:Gr,onValueChange:B=>In(B),children:[i.jsx(vi,{children:i.jsx(xa,{placeholder:"Choose focus"})}),i.jsx(yi,{children:HW.map(B=>i.jsx(Vn,{value:B.value,children:B.label},B.value))})]})]}),Gr==="custom"&&i.jsxs("div",{className:"grid gap-2 sm:col-span-2",children:[i.jsx(Pe,{children:"Custom focus (optional)"}),i.jsx(ze,{value:Ai,onChange:B=>ke(B.target.value),placeholder:"e.g., Knee-friendly strength, Marathon base, Acne-safe barrier..."})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(Pe,{children:"Length"}),i.jsx(na,{type:"single",value:Ue,onValueChange:B=>B&&et(B),className:"flex flex-wrap justify-start gap-2",children:Q2.map(B=>i.jsx(sa,{value:B.value,variant:"outline",className:"rounded-full px-3",children:B.label},B.value))})]}),i.jsxs("div",{className:"grid gap-2",children:[i.jsx(Pe,{children:"Variety"}),i.jsx(na,{type:"single",value:Jt,onValueChange:B=>B&&Rr(B),className:"flex flex-wrap justify-start gap-2",children:["low","medium","high"].map(B=>i.jsx(sa,{value:B,variant:"outline",className:"rounded-full px-3",children:B.charAt(0).toUpperCase()+B.slice(1)},B))})]}),i.jsxs("div",{className:"grid gap-2 sm:col-span-2",children:[i.jsx(Pe,{children:"Caution"}),i.jsx(na,{type:"single",value:Ar,onValueChange:B=>B&&es(B),className:"flex flex-wrap justify-start gap-2",children:["conservative","balanced","aggressive"].map(B=>i.jsx(sa,{value:B,variant:"outline",className:"rounded-full px-3",children:B==="conservative"?"Conservative":B==="aggressive"?"Aggressive":"Balanced"},B))})]}),i.jsxs("div",{className:"grid gap-2 sm:col-span-2",children:[i.jsx(Pe,{children:"Notes (optional)"}),i.jsx(pr,{value:Ia,onChange:B=>Df(B.target.value),placeholder:"Any constraints or preferences? (Optional)",rows:2})]})]}),i.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:"This will replace your current steps and selected items."}),i.jsx(F,{type:"button",onClick:dP,disabled:yr||!(a!=null&&a.access_token)||Gr==="custom"&&!Ai.trim(),children:yr?"Generating...":"Generate blueprint"})]})]})]}),i.jsx("div",{className:"px-3 py-2","data-help-id":"picker",children:i.jsx(bE,{categories:xl,selectedItems:A,onToggleItem:nP,onAddCustomItem:sP})})]})}),i.jsx(Ug,{open:QT,onOpenChange:Lf,children:i.jsxs(yh,{children:[i.jsxs(xh,{children:[i.jsx(bh,{children:"Replace current blueprint?"}),i.jsx(_h,{children:"This will overwrite your current steps and selected items. You cant undo this action."})]}),i.jsxs(wh,{children:[i.jsx(Sh,{children:"Cancel"}),i.jsx(jh,{onClick:()=>{Lf(!1),Ff()},children:"Replace and generate"})]})]})}),i.jsx("section",{className:"animate-fade-in",style:{animationDelay:"0.1s"},children:i.jsxs("div",{className:"border border-border/40 rounded-none overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between gap-3 px-3 py-3 border-b border-border/40",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("h2",{className:"text-sm font-semibold",children:I==="simple"?"Selected items":"Steps"}),I==="simple"&&i.jsx("p",{className:"text-xs text-muted-foreground",children:"Simple mode hides steps. If you publish in simple mode, your blueprint will be published without steps."})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`text-xs ${I==="full"?"text-foreground":"text-muted-foreground"}`,children:"Full"}),i.jsx(jn,{checked:I==="simple",onCheckedChange:B=>{var Ce;const G=B?"simple":"full";if(z(G),G!=="full")return;const de=Object.entries(A).flatMap(([Ie,we])=>we.map(Ze=>`${Ie}::${Ze}`)),ne=new Set(de);let oe=Xn.map(Ie=>({...Ie,itemKeys:Ie.itemKeys.filter(we=>ne.has(we))}));const ye=new Set(oe.flatMap(Ie=>Ie.itemKeys)),fe=de.filter(Ie=>!ye.has(Ie));if(fe.length>0)if(oe.length===0){const Ie=crypto.randomUUID();oe=[{id:Ie,title:"",description:"",itemKeys:fe}],Ct(Ie)}else{const Ie=((Ce=oe.find(we=>we.id===An))==null?void 0:Ce.id)||oe[oe.length-1].id;oe=oe.map(we=>we.id!==Ie?we:{...we,itemKeys:Array.from(new Set([...we.itemKeys,...fe]))})}zt(oe),oe.length===0?Ct(null):oe.some(Ie=>Ie.id===An)||Ct(oe[oe.length-1].id)}}),i.jsx("span",{className:`text-xs ${I==="simple"?"text-foreground":"text-muted-foreground"}`,children:"Simple"})]})]}),i.jsx("div",{className:"px-0 py-0 space-y-2",children:I==="simple"?Ir>0?i.jsx(kE,{title:"Build Blueprint",selectedItems:A,itemContexts:V,onRemoveItem:Rx,onUpdateContext:Ax,onClear:iP}):i.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select items from the library above to start building."}):i.jsxs(i.Fragment,{children:[i.jsx(I7,{steps:Xn,activeStepId:An,onSetActive:Ct,onUpdateStep:aP,onRemoveStep:oP,onAddStep:Ix,onReorderSteps:lP,onRemoveItem:Rx,onUpdateItemContext:Ax,itemContexts:V,showQuickAdd:!1}),Ir>0&&i.jsx("div",{className:"flex items-center justify-start gap-2 px-3 py-2 border-t border-border/40",children:i.jsx(F,{type:"button",variant:"outline",size:"sm",className:"h-8 px-3",onClick:Ix,children:"Add Step"})})]})})]})}),i.jsx("section",{className:"flex justify-center py-4 animate-fade-in",style:{animationDelay:"0.2s"},"data-help-id":"mix",children:i.jsx(m7,{onClick:uP,disabled:Ir===0,isLoading:Ee,itemCount:Ir})}),i.jsx("section",{className:"animate-fade-in",style:{animationDelay:"0.15s"},children:i.jsx(Vy,{children:i.jsxs("div",{className:"border border-border/40 rounded-md overflow-hidden",children:[i.jsx(Hy,{asChild:!0,children:i.jsxs("div",{className:"cursor-pointer hover:bg-muted/20 transition-colors px-3 py-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm font-semibold flex items-center gap-2",children:[i.jsx(tS,{className:"h-4 w-4 text-muted-foreground"}),"Review Options"]}),i.jsx(nl,{className:"h-4 w-4 text-muted-foreground transition-transform [[data-state=open]>&]:rotate-180"})]}),i.jsx("p",{className:"text-xs text-muted-foreground text-left",children:"Build notes, review focus, custom sections"})]})}),i.jsx(Ky,{children:i.jsx("div",{className:"pt-0 pb-3 px-3 space-y-4",children:i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{htmlFor:"mix-notes",children:"Blueprint Notes"}),i.jsx(pr,{id:"mix-notes",value:L,onChange:B=>Q(B.target.value),placeholder:"Any additional context for your blueprint...",rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{htmlFor:"review-prompt",children:"Review focus (optional)"}),i.jsx(pr,{id:"review-prompt",value:q,onChange:B=>K(B.target.value),placeholder:"What should the AI focus on?",rows:3})]}),i.jsxs("div",{className:"space-y-3 sm:col-span-2",children:[i.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx(Pe,{children:"Review sections"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Overview is always included."})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-xs font-medium",children:"Include score"}),i.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Adds a 1100 score in Overview."})]}),i.jsx(jn,{checked:Ri,onCheckedChange:bu,className:"scale-90"})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(Me,{variant:"secondary",children:ci}),Je.map(B=>i.jsxs(Me,{variant:"secondary",className:"gap-1",children:[B,i.jsx(F,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4",onClick:()=>{$e(G=>G.filter(de=>de!==B)),Bt("")},"aria-label":"Remove section",children:i.jsx(rr,{className:"h-3 w-3"})})]},B))]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ze,{value:Ut,onChange:B=>Xe(B.target.value),placeholder:"Add custom section",onKeyDown:B=>{if(B.key==="Enter"){B.preventDefault();const G=gh(Ut);if(!G)return;if(G.toLowerCase()===ci.toLowerCase()){Xe("");return}if(Je.some(de=>de.toLowerCase()===G.toLowerCase())){Xe("");return}if(Je.length>=oc){Bt(`You can add up to ${zc} sections total.`);return}$e(de=>[...de,G]),Xe(""),Bt("")}}}),i.jsx(F,{type:"button",variant:"outline",onClick:()=>{const B=gh(Ut);if(B){if(B.toLowerCase()===ci.toLowerCase()){Xe("");return}if(Je.some(G=>G.toLowerCase()===B.toLowerCase())){Xe("");return}if(Je.length>=oc){Bt(`You can add up to ${zc} sections total.`);return}$e(G=>[...G,B]),Xe(""),Bt("")}},children:"Add"})]}),Ke&&i.jsx("p",{className:"text-sm text-destructive",children:Ke})]})]})})})]})})}),te&&!Ee&&i.jsx("section",{className:"animate-fade-in-up",children:i.jsx(Nh,{review:te,sectionOrder:Su})}),te&&Ee&&i.jsx("section",{className:"animate-fade-in",children:i.jsx(Nh,{review:te,isStreaming:!0,sectionOrder:Su})}),Ir>0&&!Ee&&i.jsx("section",{className:"animate-fade-in",style:{animationDelay:"0.25s"},children:i.jsxs("div",{className:"border border-border/40 rounded-none overflow-hidden",children:[i.jsx("div",{className:"px-3 py-3 border-b border-border/40",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[i.jsx(Br,{className:"h-5 w-5 text-primary"}),l?"Save changes":"Publish Blueprint"]})}),i.jsxs("div",{className:"divide-y divide-border/40",children:[i.jsxs("div",{className:"p-3 space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold",children:"Generate banner"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Create a banner for this blueprint."})]}),i.jsx(jn,{checked:ae,onCheckedChange:cP,className:"scale-90"})]}),ae&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:me?"w-full overflow-hidden rounded-none border border-border/50 bg-muted/20":"aspect-[4/1] w-full overflow-hidden rounded-none border border-border/50 bg-muted/40",children:le?i.jsx("img",{src:le,alt:"Blueprint banner",className:me?"w-full max-h-[60vh] object-contain":"h-full w-full object-cover",loading:"lazy"}):i.jsx("div",{className:"h-full w-full flex items-center justify-center text-xs text-muted-foreground",children:"No banner yet"})}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs(F,{type:"button",variant:"outline",size:"sm",className:"gap-2 h-8 px-3",onClick:()=>Dx(),disabled:ve||!rP,children:[i.jsx(dO,{className:`h-3.5 w-3.5 ${ve?"animate-spin":""}`}),le?"Regenerate":"Generate"]}),le&&i.jsx(F,{type:"button",variant:"ghost",size:"sm",className:"h-8 px-2 text-xs text-muted-foreground",onClick:()=>nt(B=>!B),children:me?"Collapse":"Expand"}),le&&i.jsx(F,{type:"button",variant:"ghost",size:"sm",className:"h-8 px-2 text-xs text-muted-foreground",onClick:()=>ue(null),disabled:ve,children:"Remove"})]}),Sx&&i.jsx("p",{className:"text-xs text-muted-foreground",children:Sx})]})]}),i.jsxs("div",{className:"p-3 space-y-2",children:[w.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2",children:w.map(B=>i.jsxs(F,{type:"button",size:"sm",variant:"outline",className:"h-8 px-3",onClick:()=>kt(G=>G.includes(B)?G:[...G,B]),children:["#",B]},B))}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{children:"Tags (optional)"}),i.jsx(yT,{value:Ae,onChange:kt,suggestions:m||[],maxTags:12})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold",children:"Public blueprint"}),Qt?S?i.jsxs("p",{className:"text-[11px] text-muted-foreground",children:["Posting to b/",S.slug,". ",R?"Ready to publish.":"Join required to publish."]}):i.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Choose a channel to publish publicly."}):i.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Private (not shown on the feed)."})]}),i.jsx(jn,{checked:Qt,onCheckedChange:re,className:"scale-90"})]})]}),i.jsx("div",{className:"p-3",children:i.jsxs(F,{onClick:()=>Lx(),disabled:l?y.isPending:v.isPending,className:"w-full gap-2",size:"lg",children:[i.jsx(Br,{className:"h-4 w-4"}),l?"Save Changes":"Publish Blueprint"]})}),S&&i.jsx(Ug,{open:E,onOpenChange:$,children:i.jsxs(yh,{children:[i.jsxs(xh,{children:[i.jsxs(bh,{children:["Join b/",S.slug," to publish"]}),i.jsx(_h,{children:"You need to join this channel before you can publish publicly."})]}),i.jsxs(wh,{children:[i.jsx(Sh,{disabled:M,children:"Cancel"}),i.jsx(jh,{onClick:B=>{B.preventDefault(),hP()},disabled:M,children:M?"Joining...":"Join"})]})]})})]})]})}),i.jsx("footer",{className:"text-center py-8 text-sm text-muted-foreground border-t border-border/30 mt-8",children:i.jsx("p",{children:"Blueprint analysis is for informational purposes only. Always do your own research."})}),i.jsx(Kr,{})]}):i.jsx("div",{className:"border border-border/40 px-3 py-10 text-center text-sm text-muted-foreground",children:"Library not found."})]}),i.jsx(M7,{isOpen:XT,onClose:()=>$f(!1),onStartTour:()=>{$f(!1),yl(!0)}}),i.jsx(L7,{isActive:ZT,onComplete:()=>yl(!1),onSkip:()=>yl(!1)})]})}function G7(e){if(typeof e=="string")return e;if(!e||typeof e!="object")return String(e);const t=typeof e.name=="string"?e.name:"Untitled",r=typeof e.context=="string"&&e.context.trim()?e.context.trim():"";return r?`${t} [${r}]`:t}function Y7(e){const t=typeof e.name=="string"?e.name:"Untitled",r=typeof e.context=="string"&&e.context.trim()?e.context.trim():"";return r?`${t} [${r}]`:t}function Q7(e){return!e||typeof e!="object"||Array.isArray(e)?[]:Object.entries(e).filter(([,t])=>Array.isArray(t))}function J7(e){return!e||typeof e!="object"?[]:Array.isArray(e)?e.filter(t=>!!t&&typeof t=="object"):[]}function X7(){var N,k,R;const e=Tr(),{blueprintId:t}=ka(),{data:r,isLoading:n}=Nf(t),{data:s,isLoading:a}=ez(t),o=tz(),l=Qy(),{toast:c}=St(),{user:u}=Ne(),[h,f]=d.useState(""),[p,m]=d.useState(!0),w=Er(),g=d.useRef(null),v=r?J7(r.steps):[],y=!!(u&&r&&u.id===r.creator_user_id),x=d.useMemo(()=>new Set(Ra().map(bt)),[]),b=d.useMemo(()=>{var E;return(E=r==null?void 0:r.tags)!=null&&E.length?r.tags.filter($=>!x.has(bt($.slug))):[]},[r==null?void 0:r.tags,x]);d.useEffect(()=>{r!=null&&r.id&&g.current!==r.id&&(g.current=r.id,At({eventName:"view_blueprint",userId:u==null?void 0:u.id,blueprintId:r.id,path:w.pathname}))},[r==null?void 0:r.id,w.pathname,u==null?void 0:u.id]);const _=async()=>{if(r)try{await l.mutateAsync({blueprintId:r.id,liked:r.user_liked})}catch(E){c({title:"Action failed",description:E instanceof Error?E.message:"Please try again.",variant:"destructive"})}},S=async()=>{if(t&&h.trim())try{await o.mutateAsync({blueprintId:t,content:h.trim()}),f("")}catch(E){c({title:"Comment failed",description:E instanceof Error?E.message:"Please try again.",variant:"destructive"})}},j=E=>{e(`/explore?q=${encodeURIComponent(E)}`)};return i.jsxs(ln,{children:[i.jsx(vt,{}),i.jsxs(cn,{className:"space-y-6",children:[n?i.jsxs("div",{className:"border border-border/40 px-3 py-3 space-y-3",children:[i.jsx(je,{className:"h-6 w-48"}),i.jsx(je,{className:"h-24 w-full"})]}):r?i.jsxs(i.Fragment,{children:[i.jsxs(sn,{className:"space-y-2",children:[i.jsx("div",{className:"text-xs font-semibold text-muted-foreground",children:Cf(r.tags.map(E=>E.slug))}),i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[i.jsx(F,{variant:"ghost",size:"icon",onClick:()=>e(-1),"aria-label":"Go back",children:i.jsx(Y1,{className:"h-4 w-4"})}),i.jsx("h1",{className:"text-2xl font-semibold leading-tight break-words",children:r.title})]}),y&&i.jsx(pe,{to:`/blueprint/${r.id}/edit`,className:"shrink-0",children:i.jsx(F,{variant:"outline",size:"sm",children:"Edit"})})]}),i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsxs(pe,{to:`/u/${r.creator_user_id}`,className:"flex items-center gap-2 hover:opacity-80 transition-opacity min-w-0",children:[i.jsxs(Kn,{className:"h-6 w-6",children:[i.jsx(Gn,{src:((N=r.creator_profile)==null?void 0:N.avatar_url)||void 0}),i.jsx(Yn,{className:"text-[10px]",children:(((k=r.creator_profile)==null?void 0:k.display_name)||"U").slice(0,2).toUpperCase()})]}),i.jsx("span",{className:"text-sm text-muted-foreground truncate",children:((R=r.creator_profile)==null?void 0:R.display_name)||"Anonymous"})]}),i.jsx("span",{className:"text-xs text-muted-foreground shrink-0",children:Go(new Date(r.created_at),{addSuffix:!0})})]}),i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsx("div",{className:"flex flex-wrap gap-2 flex-1 min-w-0",children:b.map(E=>i.jsxs(Me,{variant:"outline",className:"text-xs cursor-pointer transition-colors border bg-muted/40 text-muted-foreground border-border/60 hover:bg-muted/60",onClick:()=>j(E.slug),children:["#",E.slug]},E.id))}),i.jsxs(F,{variant:"ghost",size:"sm",className:`shrink-0 ${r.user_liked?"text-red-500":"text-muted-foreground"}`,onClick:_,children:[i.jsx(Kt,{className:`h-4 w-4 ${r.user_liked?"fill-current":""}`}),i.jsx("span",{className:"ml-1 text-xs",children:r.likes_count})]})]})]}),i.jsx(fr,{}),i.jsxs("section",{className:"space-y-4",children:[r.mix_notes&&i.jsx("p",{className:"text-sm text-muted-foreground",children:r.mix_notes}),r.banner_url&&i.jsxs("button",{type:"button",className:"relative w-full overflow-hidden rounded-md border border-border/40 bg-muted/30 p-2 text-left",onClick:()=>m(E=>!E),title:p?"Collapse banner":"Expand banner",children:[p?i.jsx("img",{src:r.banner_url,alt:"Blueprint banner",className:"w-full h-auto max-h-[560px] object-contain rounded-md",loading:"lazy"}):i.jsx("div",{className:"aspect-[3/1] w-full",children:i.jsx("img",{src:r.banner_url,alt:"Blueprint banner",className:"h-full w-full object-cover object-center rounded-md",loading:"lazy"})}),i.jsx("span",{className:"absolute right-4 top-4 inline-flex h-8 w-8 items-center justify-center rounded-full bg-background/80 text-foreground shadow-sm",children:p?i.jsx(cO,{className:"h-4 w-4"}):i.jsx(oO,{className:"h-4 w-4"})})]}),i.jsx("div",{children:v.length>0?i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Steps"}),i.jsx("div",{className:"mt-2 space-y-2",children:v.map((E,$)=>{var M;return i.jsxs("div",{className:"rounded-md border border-border/40 px-3 py-2.5",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("p",{className:"text-sm font-medium",children:(M=E.title)!=null&&M.trim()?E.title:`Step ${$+1}`}),E.items&&E.items.length>0?i.jsxs(Me,{variant:"secondary",className:"text-xs",children:[E.items.length," items"]}):null]}),E.description&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:E.description}),i.jsx("div",{className:"mt-1.5 space-y-1.5",children:E.items&&E.items.length>0?E.items.map((O,C)=>i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"text-sm leading-snug",children:Y7(O)}),O.category&&i.jsx("p",{className:"text-xs text-muted-foreground",children:O.category})]},`${E.id||$}-${C}`)):i.jsx("p",{className:"text-xs text-muted-foreground",children:"No items assigned."})})]},E.id||`${E.title}-${$}`)})})]}):i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"font-semibold",children:"Selected items"}),i.jsx("div",{className:"mt-2 space-y-2",children:Q7(r.selected_items).map(([E,$])=>i.jsxs("div",{className:"rounded-md border border-border/40 p-3",children:[i.jsx("p",{className:"text-sm font-medium",children:E}),i.jsx("p",{className:"text-sm text-muted-foreground",children:$.length>0?$.map(G7).join(", "):"No items listed"})]},E))})]})}),i.jsx(fr,{}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:"AI Review"}),i.jsx("div",{className:"mt-2",children:i.jsx(Nh,{review:r.llm_review||"",density:"compact"})})]})]}),i.jsx(fr,{}),i.jsxs("section",{className:"space-y-4",children:[i.jsx("div",{className:"flex items-end justify-between gap-3",children:i.jsx("h2",{className:"text-lg font-semibold",children:"Comments"})}),i.jsxs("div",{className:"space-y-2 border border-border/40 px-3 py-3",children:[i.jsx(pr,{value:h,onChange:E=>f(E.target.value),placeholder:"Share your thoughts",rows:3}),i.jsx(F,{onClick:S,disabled:o.isPending,children:"Post Comment"})]}),a?i.jsx(je,{className:"h-20 w-full"}):s&&s.length>0?i.jsx("div",{className:"divide-y divide-border/40 border-y border-border/40",children:s.map(E=>{var $,M,O;return i.jsxs("div",{className:"py-3",children:[i.jsxs(pe,{to:`/u/${E.user_id}`,className:"flex items-center gap-2 hover:opacity-80 transition-opacity w-fit",children:[i.jsxs(Kn,{className:"h-8 w-8",children:[i.jsx(Gn,{src:(($=E.profile)==null?void 0:$.avatar_url)||void 0}),i.jsx(Yn,{children:(((M=E.profile)==null?void 0:M.display_name)||"U").slice(0,2).toUpperCase()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:((O=E.profile)==null?void 0:O.display_name)||"Anonymous"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Go(new Date(E.created_at),{addSuffix:!0})})]})]}),i.jsx("p",{className:"text-sm mt-2",children:E.content})]},E.id)})}):i.jsx("p",{className:"text-sm text-muted-foreground",children:"No comments yet."})]})]}):i.jsx("div",{className:"border border-border/40 py-12 text-center",children:"Blueprint not found."}),i.jsx(Kr,{})]})]})}const Hb=["Analyzing your blueprint...","Checking synergies...","Reviewing dosages...","Checking interactions...","Finding harmony...","Almost ready..."];function Z7({className:e}){const[t,r]=d.useState(0),[n,s]=d.useState("pour");return d.useEffect(()=>{const a=setInterval(()=>{r(l=>(l+1)%Hb.length)},2e3),o=setInterval(()=>{s(l=>l==="pour"?"shake":l==="shake"?"serve":"pour")},3e3);return()=>{clearInterval(a),clearInterval(o)}},[]),i.jsxs("div",{className:H("flex flex-col items-center justify-center py-16 relative overflow-hidden",e),children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/5 via-transparent to-accent/10"}),i.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[...Array(8)].map((a,o)=>i.jsx("div",{className:"absolute rounded-full bg-primary/20 blur-sm animate-float",style:{width:`${4+Math.random()*8}px`,height:`${4+Math.random()*8}px`,left:`${10+Math.random()*80}%`,top:`${10+Math.random()*80}%`,animationDelay:`${o*.5}s`,animationDuration:`${4+Math.random()*4}s`}},o))}),i.jsxs("div",{className:"relative w-48 h-48 mb-8",children:[i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:H("w-32 h-32 rounded-full blur-2xl transition-all duration-1000",n==="pour"&&"bg-primary/20",n==="shake"&&"bg-primary/30 scale-110",n==="serve"&&"bg-accent/25 scale-105")})}),i.jsx("div",{className:H("absolute inset-0 flex items-center justify-center transition-all duration-500",n==="shake"&&"animate-[shake_0.3s_ease-in-out_infinite]"),children:i.jsxs("svg",{viewBox:"0 0 100 120",className:"w-36 h-36 drop-shadow-lg",children:[i.jsxs("defs",{children:[i.jsxs("linearGradient",{id:"chromeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[i.jsx("stop",{offset:"0%",stopColor:"hsl(200, 15%, 70%)"}),i.jsx("stop",{offset:"30%",stopColor:"hsl(195, 20%, 85%)"}),i.jsx("stop",{offset:"50%",stopColor:"hsl(195, 25%, 92%)"}),i.jsx("stop",{offset:"70%",stopColor:"hsl(195, 20%, 85%)"}),i.jsx("stop",{offset:"100%",stopColor:"hsl(200, 15%, 70%)"})]}),i.jsxs("linearGradient",{id:"liquidGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[i.jsx("stop",{offset:"0%",stopColor:"hsl(185, 60%, 65%)",stopOpacity:"0.8"}),i.jsx("stop",{offset:"50%",stopColor:"hsl(185, 55%, 50%)",stopOpacity:"0.9"}),i.jsx("stop",{offset:"100%",stopColor:"hsl(190, 50%, 45%)",stopOpacity:"1"})]}),i.jsx("filter",{id:"frosted",children:i.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0.5"})})]}),i.jsx("path",{d:"M30 15 L70 15 L65 30 L35 30 Z",fill:"url(#chromeGradient)"}),i.jsx("ellipse",{cx:"50",cy:"15",rx:"20",ry:"5",fill:"url(#chromeGradient)"}),i.jsx("ellipse",{cx:"50",cy:"15",rx:"20",ry:"5",fill:"white",fillOpacity:"0.3"}),i.jsx("path",{d:"M35 30 L30 100 L70 100 L65 30 Z",fill:"url(#chromeGradient)"}),i.jsx("path",{d:"M35 30 L30 100 L40 100 L45 30 Z",fill:"white",fillOpacity:"0.15"}),i.jsx("path",{d:n==="pour"?"M36 85 L69 85 L68 95 L33 95 Z":n==="shake"?"M34 45 L66 50 L68 95 L33 95 Z":"M35 55 L65 55 L68 95 L33 95 Z",fill:"url(#liquidGradient)",className:"transition-all duration-700 ease-out"}),i.jsx("ellipse",{cx:"50",cy:n==="pour"?85:n==="shake"?47:55,rx:"16",ry:"3",fill:"white",fillOpacity:"0.3",className:"transition-all duration-700"}),n==="shake"&&i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"42",cy:"60",r:"3",fill:"white",fillOpacity:"0.5",className:"animate-ping"}),i.jsx("circle",{cx:"55",cy:"68",r:"2",fill:"white",fillOpacity:"0.4",className:"animate-ping",style:{animationDelay:"0.2s"}}),i.jsx("circle",{cx:"48",cy:"78",r:"2.5",fill:"white",fillOpacity:"0.45",className:"animate-ping",style:{animationDelay:"0.4s"}}),i.jsx("circle",{cx:"58",cy:"85",r:"2",fill:"white",fillOpacity:"0.35",className:"animate-ping",style:{animationDelay:"0.6s"}})]}),i.jsx("path",{d:"M65 30 L70 100",stroke:"white",strokeWidth:"1",strokeOpacity:"0.3"})]})}),n==="pour"&&i.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(6)].map((a,o)=>i.jsx("div",{className:"absolute rounded-full bg-gradient-to-b from-primary/70 to-primary/40 backdrop-blur-sm animate-[fall_1.2s_ease-in_infinite]",style:{width:`${6+Math.random()*6}px`,height:`${8+Math.random()*8}px`,left:`${35+Math.random()*30}%`,animationDelay:`${o*.2}s`,borderRadius:"50% 50% 50% 50% / 60% 60% 40% 40%"}},o))}),n==="serve"&&i.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(8)].map((a,o)=>i.jsx("div",{className:"absolute w-1 h-1 rounded-full bg-primary shadow-glow-aqua animate-pulse-soft",style:{left:`${15+Math.random()*70}%`,top:`${15+Math.random()*50}%`,animationDelay:`${o*.2}s`,boxShadow:"0 0 8px hsl(185, 55%, 50%)"}},o))}),i.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-2",children:[...Array(3)].map((a,o)=>i.jsx("div",{className:H("w-4 h-4 rounded bg-gradient-to-br from-white/70 to-secondary/50 border border-white/30 backdrop-blur-sm shadow-sm",n==="shake"&&"animate-bounce"),style:{animationDelay:`${o*.1}s`,transform:`rotate(${o*15-15}deg)`}},o))})]}),i.jsxs("div",{className:"text-center space-y-3 relative z-10",children:[i.jsx("p",{className:"text-lg font-medium text-foreground animate-pulse-soft tracking-wide",children:Hb[t]}),i.jsx("div",{className:"flex items-center justify-center gap-2",children:[...Array(3)].map((a,o)=>i.jsx("div",{className:"w-2 h-2 rounded-full bg-primary/70 animate-bounce shadow-glow-aqua",style:{animationDelay:`${o*.15}s`}},o))})]}),i.jsx("style",{children:`
        @keyframes fall {
          0% { transform: translateY(-20px) scale(0.8); opacity: 0; }
          10% { opacity: 1; }
          90% { opacity: 0.6; }
          100% { transform: translateY(120px) scale(1); opacity: 0; }
        }
        @keyframes shake {
          0%, 100% { transform: translateX(0) rotate(0deg); }
          25% { transform: translateX(-4px) rotate(-2deg); }
          75% { transform: translateX(4px) rotate(2deg); }
        }
      `})]})}var Mf="Checkbox",[e9,U9]=Nt(Mf),[t9,mx]=e9(Mf);function r9(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:s,disabled:a,form:o,name:l,onCheckedChange:c,required:u,value:h="on",internal_do_not_use_render:f}=e,[p,m]=sr({prop:r,defaultProp:s??!1,onChange:c,caller:Mf}),[w,g]=d.useState(null),[v,y]=d.useState(null),x=d.useRef(!1),b=w?!!o||!!w.closest("form"):!0,_={checked:p,disabled:a,setChecked:m,control:w,setControl:g,name:l,form:o,value:h,hasConsumerStoppedPropagationRef:x,required:u,defaultChecked:ui(s)?!1:s,isFormControl:b,bubbleInput:v,setBubbleInput:y};return i.jsx(t9,{scope:t,..._,children:n9(f)?f(_):n})}var DT="CheckboxTrigger",LT=d.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},s)=>{const{control:a,value:o,disabled:l,checked:c,required:u,setControl:h,setChecked:f,hasConsumerStoppedPropagationRef:p,isFormControl:m,bubbleInput:w}=mx(DT,e),g=Se(s,h),v=d.useRef(c);return d.useEffect(()=>{const y=a==null?void 0:a.form;if(y){const x=()=>f(v.current);return y.addEventListener("reset",x),()=>y.removeEventListener("reset",x)}},[a,f]),i.jsx(se.button,{type:"button",role:"checkbox","aria-checked":ui(c)?"mixed":c,"aria-required":u,"data-state":zT(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:g,onKeyDown:Z(t,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:Z(r,y=>{f(x=>ui(x)?!0:!x),w&&m&&(p.current=y.isPropagationStopped(),p.current||y.stopPropagation())})})});LT.displayName=DT;var gx=d.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:a,required:o,disabled:l,value:c,onCheckedChange:u,form:h,...f}=e;return i.jsx(r9,{__scopeCheckbox:r,checked:s,defaultChecked:a,disabled:l,required:o,onCheckedChange:u,name:n,form:h,value:c,internal_do_not_use_render:({isFormControl:p})=>i.jsxs(i.Fragment,{children:[i.jsx(LT,{...f,ref:t,__scopeCheckbox:r}),p&&i.jsx(BT,{__scopeCheckbox:r})]})})});gx.displayName=Mf;var $T="CheckboxIndicator",FT=d.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...s}=e,a=mx($T,r);return i.jsx(Dt,{present:n||ui(a.checked)||a.checked===!0,children:i.jsx(se.span,{"data-state":zT(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});FT.displayName=$T;var UT="CheckboxBubbleInput",BT=d.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:o,required:l,disabled:c,name:u,value:h,form:f,bubbleInput:p,setBubbleInput:m}=mx(UT,e),w=Se(r,m),g=$y(a),v=ty(n);d.useEffect(()=>{const x=p;if(!x)return;const b=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(b,"checked").set,j=!s.current;if(g!==a&&S){const N=new Event("click",{bubbles:j});x.indeterminate=ui(a),S.call(x,ui(a)?!1:a),x.dispatchEvent(N)}},[p,g,a,s]);const y=d.useRef(ui(a)?!1:a);return i.jsx(se.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??y.current,required:l,disabled:c,name:u,value:h,form:f,...t,tabIndex:-1,ref:w,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});BT.displayName=UT;function n9(e){return typeof e=="function"}function ui(e){return e==="indeterminate"}function zT(e){return ui(e)?"indeterminate":e?"checked":"unchecked"}const qT=d.forwardRef(({className:e,...t},r)=>i.jsx(gx,{ref:r,className:H("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:i.jsx(FT,{className:H("flex items-center justify-center text-current"),children:i.jsx(rl,{className:"h-4 w-4"})})}));qT.displayName=gx.displayName;function s9(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=e.categories;return Array.isArray(t)?t.map(r=>({name:typeof r.name=="string"?r.name:"Untitled",items:Array.isArray(r.items)?r.items.filter(n=>typeof n=="string"):[]})).filter(r=>r.name.trim().length>0):[]}function i9({inventory:e,initialTitle:t,initialSelectedItems:r,initialMixNotes:n,initialReviewPrompt:s,initialReview:a,sourceBlueprintId:o}){const l=Tr(),{toast:c}=St(),{session:u}=Ne(),{data:h}=mC(),{recentTags:f,addRecentTags:p}=MT(),m=Yy(),[w,g]=d.useState(t||e.title),[v,y]=d.useState(r||{}),[x,b]=d.useState(n||""),[_,S]=d.useState(s||""),[j,N]=d.useState(a||""),[k,R]=d.useState([]),[E,$]=d.useState(!0),[M,O]=d.useState(!1),[C,D]=d.useState(()=>s9(e.generated_schema)),[I,z]=d.useState({}),A=d.useMemo(()=>cx(e.review_sections),[e]),P=d.useMemo(()=>Object.values(v).reduce((q,K)=>q+K.length,0),[v]),V=(q,K)=>{y(te=>{const W=new Set(te[q]||[]);return W.has(K)?W.delete(K):W.add(K),{...te,[q]:Array.from(W)}})},J=q=>{var te;const K=(te=I[q])==null?void 0:te.trim();K&&(D(W=>W.map(ae=>ae.name===q?{...ae,items:ae.items.includes(K)?ae.items:[...ae.items,K]}:ae)),z(W=>({...W,[q]:""})))},L=async()=>{var K,te,W;if(!w.trim()){c({title:"Title required",description:"Add a blueprint title before generating the review.",variant:"destructive"});return}if(P===0){c({title:"No items selected",description:"Select at least one item before generating the review.",variant:"destructive"});return}if(!(u!=null&&u.access_token)){c({title:"Sign in required",description:"Please sign in to generate a review.",variant:"destructive"});return}const q={};Object.entries(v).forEach(([ae,X])=>{X.length>0&&(q[ae]=X)}),O(!0),N("");try{const ae=await ac("analyze-blueprint",{stream:!0,body:{title:w.trim(),inventoryTitle:e.title,selectedItems:q,mixNotes:x.trim(),reviewPrompt:_.trim(),reviewSections:A,includeScore:e.include_score??!0}});if(!ae.body)throw new Error("No response body");const X=ae.body.getReader(),le=new TextDecoder;let ue="",ve="";for(;;){const{done:Ve,value:me}=await X.read();if(Ve)break;ve+=le.decode(me,{stream:!0});let nt;for(;(nt=ve.indexOf(`
`))!==-1;){let Ae=ve.slice(0,nt);if(ve=ve.slice(nt+1),Ae.endsWith("\r")&&(Ae=Ae.slice(0,-1)),Ae.startsWith(":")||Ae.trim()===""||!Ae.startsWith("data: "))continue;const kt=Ae.slice(6).trim();if(kt==="[DONE]")break;try{const re=(W=(te=(K=JSON.parse(kt).choices)==null?void 0:K[0])==null?void 0:te.delta)==null?void 0:W.content;re&&(ue+=re,N(ue))}catch{ve=Ae+`
`+ve;break}}}}catch(ae){c({title:"Analysis failed",description:jo(ae,"Please try again."),variant:"destructive"})}finally{O(!1)}},Q=async()=>{if(!w.trim()){c({title:"Title required",description:"Add a blueprint title before publishing.",variant:"destructive"});return}if(P===0){c({title:"Select items",description:"Pick at least one item before publishing.",variant:"destructive"});return}if(!j.trim()){c({title:"Generate review",description:"Generate the review before publishing.",variant:"destructive"});return}if(k.length>4){c({title:"Too many tags",description:"Please use 4 tags or fewer.",variant:"destructive"});return}if(k.length===0){c({title:"Tags required",description:"Add at least one tag so the wall can surface your blueprint.",variant:"destructive"});return}try{const q={};Object.entries(v).forEach(([te,W])=>{W.length>0&&(q[te]=W)});const K=await m.mutateAsync({inventoryId:e.id,title:w.trim(),selectedItems:q,steps:null,mixNotes:x.trim()?x.trim():null,reviewPrompt:_.trim()?_.trim():null,bannerUrl:null,llmReview:j,tags:k,isPublic:E,sourceBlueprintId:o||null});p(k),l(`/blueprint/${K.id}`)}catch(q){c({title:"Publish failed",description:jo(q,"Please try again."),variant:"destructive"})}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs(Oe,{children:[i.jsx(ur,{children:i.jsx(dr,{children:"Create Blueprint"})}),i.jsxs(Be,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{htmlFor:"blueprint-title",children:"Blueprint title"}),i.jsx(ze,{id:"blueprint-title",value:w,onChange:q=>g(q.target.value),placeholder:"Name your blueprint"})]}),i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{htmlFor:"mix-notes",children:"Build notes"}),i.jsx(pr,{id:"mix-notes",value:x,onChange:q=>b(q.target.value),placeholder:"Optional notes for your build",rows:4})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{htmlFor:"review-prompt",children:"LLM review focus"}),i.jsx(pr,{id:"review-prompt",value:_,onChange:q=>S(q.target.value),placeholder:"What should the review focus on?",rows:4})]})]})]})]}),i.jsxs(Oe,{children:[i.jsx(ur,{children:i.jsx(dr,{children:"Library"})}),i.jsx(Be,{className:"space-y-6",children:C.length===0?i.jsx("p",{className:"text-sm text-muted-foreground",children:"No library items yet. Add categories in the library builder."}):C.map(q=>{var K;return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"font-semibold",children:q.name}),i.jsxs(Me,{variant:"secondary",children:[((K=v[q.name])==null?void 0:K.length)||0," selected"]})]}),i.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:q.items.map(te=>i.jsxs("label",{className:"flex items-center gap-2 rounded-md border border-border/60 px-3 py-2 text-sm",children:[i.jsx(qT,{checked:(v[q.name]||[]).includes(te),onCheckedChange:()=>V(q.name,te)}),i.jsx("span",{children:te})]},`${q.name}-${te}`))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ze,{value:I[q.name]||"",onChange:te=>z(W=>({...W,[q.name]:te.target.value})),placeholder:`Add item to ${q.name}`}),i.jsx(F,{type:"button",variant:"outline",onClick:()=>J(q.name),children:"Add"})]})]},q.name)})})]}),M&&i.jsx(Oe,{className:"overflow-hidden bg-card/60 backdrop-blur-glass border-primary/20",children:i.jsx(Be,{className:"p-0",children:i.jsx(Z7,{})})}),i.jsxs(Oe,{children:[i.jsx(ur,{children:i.jsx(dr,{children:"LLM Review"})}),i.jsxs(Be,{className:"space-y-4",children:[i.jsx(F,{type:"button",onClick:L,disabled:M||m.isPending,children:M?"Building...":"Build Blueprint"}),i.jsx(pr,{value:j,onChange:q=>N(q.target.value),rows:12})]})]}),i.jsxs(Oe,{children:[i.jsx(ur,{children:i.jsx(dr,{children:"Publish"})}),i.jsxs(Be,{className:"space-y-4",children:[f.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(q=>i.jsxs(F,{type:"button",size:"sm",variant:"outline",onClick:()=>R(K=>K.includes(q)?K:[...K,q]),children:["#",q]},q))}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{children:"Tags"}),i.jsx(yT,{value:k,onChange:R,suggestions:h||[],maxTags:12})]}),i.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 px-4 py-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Public blueprint"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Public blueprints appear on the wall."})]}),i.jsx(jn,{checked:E,onCheckedChange:$})]}),i.jsx(F,{type:"button",onClick:Q,disabled:m.isPending||M,className:"w-full",children:"Publish Blueprint"})]})]})]})}function a9(e){return!e||typeof e!="object"||Array.isArray(e)?{}:Object.fromEntries(Object.entries(e).filter(([,t])=>Array.isArray(t)))}function o9(){const{blueprintId:e}=ka(),{data:t,isLoading:r}=Nf(e),{data:n,isLoading:s}=ax((t==null?void 0:t.inventory_id)||void 0),a=d.useMemo(()=>t?a9(t.selected_items):{},[t]),o=r||s;return i.jsxs(ln,{children:[i.jsx(vt,{}),i.jsx(cn,{className:"space-y-6",children:o?i.jsxs("div",{className:"border border-border/40 px-3 py-3",children:[i.jsx(je,{className:"h-6 w-48"}),i.jsx(je,{className:"h-24 w-full mt-4"})]}):n&&t?i.jsxs(i.Fragment,{children:[i.jsxs(sn,{className:"space-y-2",children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Remix Blueprint"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Source: ",t.title]})]}),i.jsx(fr,{}),i.jsx(i9,{inventory:n,initialTitle:`${t.title} Remix`,initialSelectedItems:a,initialMixNotes:t.mix_notes,initialReviewPrompt:t.review_prompt,initialReview:t.llm_review,sourceBlueprintId:t.id})]}):i.jsx("div",{className:"border border-border/40 py-12 text-center",children:"Blueprint or library not found."})})]})}var vx="Progress",yx=100,[l9,B9]=Nt(vx),[c9,u9]=l9(vx),WT=d.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:s,getValueLabel:a=d9,...o}=e;(s||s===0)&&!Kb(s)&&console.error(h9(`${s}`,"Progress"));const l=Kb(s)?s:yx;n!==null&&!Gb(n,l)&&console.error(f9(`${n}`,"Progress"));const c=Gb(n,l)?n:null,u=Ch(c)?a(c,l):void 0;return i.jsx(c9,{scope:r,value:c,max:l,children:i.jsx(se.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Ch(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":KT(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});WT.displayName=vx;var VT="ProgressIndicator",HT=d.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,s=u9(VT,r);return i.jsx(se.div,{"data-state":KT(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...n,ref:t})});HT.displayName=VT;function d9(e,t){return`${Math.round(e/t*100)}%`}function KT(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Ch(e){return typeof e=="number"}function Kb(e){return Ch(e)&&!isNaN(e)&&e>0}function Gb(e,t){return Ch(e)&&!isNaN(e)&&e<=t&&e>=0}function h9(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${yx}\`.`}function f9(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${yx} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var GT=WT,p9=HT;const YT=d.forwardRef(({className:e,value:t,...r},n)=>i.jsx(GT,{ref:n,className:H("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:i.jsx(p9,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));YT.displayName=GT.displayName;const Yb=au("youtube-to-blueprint"),qg="Could not complete the blueprint. Please test another video.";function m9(e){try{const t=new URL(e.trim()),r=t.hostname.replace(/^www\./,"");if(t.searchParams.has("list"))return{ok:!1,code:"playlist"};if(r==="youtube.com"||r==="m.youtube.com"){if(t.pathname!=="/watch")return{ok:!1,code:"invalid"};const n=t.searchParams.get("v")||"";return/^[a-zA-Z0-9_-]{8,15}$/.test(n)?{ok:!0}:{ok:!1,code:"invalid"}}if(r==="youtu.be"){const n=t.pathname.replace(/^\/+/,"").split("/")[0]||"";return/^[a-zA-Z0-9_-]{8,15}$/.test(n)?{ok:!0}:{ok:!1,code:"invalid"}}return{ok:!1,code:"invalid"}}catch{return{ok:!1,code:"invalid"}}}function g9(e){return e.map((t,r)=>({id:`yt-step-${r+1}`,title:t.name,description:t.notes,items:[]}))}function v9(e){switch(e){case"INVALID_URL":return"Please enter a valid single YouTube video URL.";case"NO_CAPTIONS":case"TRANSCRIPT_EMPTY":return"Transcript unavailable for this video. Please try another video.";case"PROVIDER_FAIL":case"TRANSCRIPT_FETCH_FAIL":return"Transcript provider is currently unavailable. Please try another video.";case"SERVICE_DISABLED":return"YouTube to Blueprint is temporarily unavailable. Please try again later.";case"TIMEOUT":return"This video took too long to process. Please try another video.";case"RATE_LIMITED":return"Too many requests right now. Please wait a bit and try again.";case"SAFETY_BLOCKED":return"This video content could not be converted safely. Please try another video.";default:return qg}}function y9(){var ae;const e=Tr(),[t]=su(),{session:r,user:n}=Ne(),{toast:s}=St(),a=Yy(),{getFollowState:o,joinChannel:l}=Pa(),c=(t.get("channel")||"").trim(),u=c?gu(c):null,{data:h=[]}=mu(u?[u.tagSlug]:[]),f=((ae=h.find(X=>X.slug===(u==null?void 0:u.tagSlug)))==null?void 0:ae.id)||null,p=f?o({id:f}):"not_joined",m=p==="joined"||p==="leaving",[w,g]=d.useState(!1),[v,y]=d.useState(!1),[x,b]=d.useState(""),[_,S]=d.useState(!0),[j,N]=d.useState(!0),[k,R]=d.useState(!1),[E,$]=d.useState(""),[M,O]=d.useState(0),[C,D]=d.useState(null),[I,z]=d.useState(null),[A,P]=d.useState(!1),V=d.useRef(null),J=d.useRef(null),L=d.useMemo(()=>m9(x),[x]);d.useEffect(()=>()=>{V.current&&clearTimeout(V.current),J.current&&clearInterval(J.current)},[]);function Q(X){J.current&&(clearInterval(J.current),J.current=null);const le=X.length>0?X:["Generating blueprint"];let ue=0;$(le[ue]),O(15),le.length!==1&&(J.current=setInterval(()=>{ue=Math.min(ue+1,le.length-1);const ve=ue/(le.length-1),Ve=Math.min(92,15+Math.round(ve*77));O(Ve),$(le[ue]),ue>=le.length-1&&J.current&&(clearInterval(J.current),J.current=null)},1400))}const q=!k&&x.trim().length>0&&L.ok;async function K(){if(D(null),z(null),!L.ok){D(L.code==="playlist"?"Playlist URLs are not supported in MVP. Please use a single video URL.":"Please enter a valid YouTube single-video URL.");return}if(!Yb){D(qg);return}const X={video_url:x.trim(),generate_review:_,generate_banner:j,source:"youtube_mvp"};R(!0),Q(["Submitting video","Fetching transcript","Generating blueprint",...X.generate_review?["Generating AI review"]:[],...X.generate_banner?["Generating banner"]:[],"Finalizing result"]),await At({eventName:"youtube_submit",userId:n==null?void 0:n.id,metadata:{source:"youtube_mvp"}});try{const le=await fetch(Yb,{method:"POST",headers:{"Content-Type":"application/json",...r!=null&&r.access_token?{Authorization:`Bearer ${r.access_token}`}:{}},body:JSON.stringify(X)}),ue=await le.json().catch(()=>null);if(!le.ok||!ue||!("ok"in ue)||!ue.ok){const ve=ue&&"error_code"in ue?ue.error_code:"GENERATION_FAIL";await At({eventName:"youtube_fail",userId:n==null?void 0:n.id,metadata:{source:"youtube_mvp",reason:ve,rate_limited:ve==="RATE_LIMITED"}}),D(v9(ve)),$("Generation failed");return}z(ue),$(""),await At({eventName:"youtube_success",userId:n==null?void 0:n.id,metadata:{source:"youtube_mvp",run_id:ue.run_id}})}catch{await At({eventName:"youtube_fail",userId:n==null?void 0:n.id,metadata:{source:"youtube_mvp",reason:"NETWORK"}}),D(qg),$("Generation failed")}finally{J.current&&(clearInterval(J.current),J.current=null),R(!1),O(100),V.current&&clearTimeout(V.current),V.current=setTimeout(()=>{O(0)},1500)}}async function te(X){if(!(!I||!n||A)){if(!u){s({title:"Choose a channel to post",description:"Public blueprints must be posted to a channel. Start from a channel page or use Create.",variant:"destructive"});return}if(!(X!=null&&X.bypassJoinCheck)&&!m){g(!0);return}P(!0);try{const le=Array.from(new Set([...I.draft.tags||[],u.tagSlug])),ue=await a.mutateAsync({inventoryId:null,title:I.draft.title,selectedItems:{},steps:g9(I.draft.steps),mixNotes:I.draft.notes,reviewPrompt:"youtube_mvp",bannerUrl:I.banner.url,llmReview:I.review.summary,tags:le,isPublic:!0});await At({eventName:"youtube_publish",userId:n.id,blueprintId:ue.id,metadata:{source:"youtube_mvp"}}),e(`/blueprint/${ue.id}`)}catch(le){s({title:"Publish failed",description:le instanceof Error?le.message:"Could not publish blueprint.",variant:"destructive"})}finally{P(!1)}}}async function W(){if(!(!u||!f)){y(!0);try{await l({id:f,slug:u.tagSlug}),g(!1),await te({bypassJoinCheck:!0})}catch(X){s({title:"Join failed",description:X instanceof Error?X.message:"Please try again.",variant:"destructive"})}finally{y(!1)}}}return i.jsxs(ln,{children:[i.jsx(vt,{}),i.jsxs(cn,{className:"space-y-6",children:[i.jsx(sn,{children:u?i.jsxs("div",{className:"border border-border/40 px-3 py-3 flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("p",{className:"text-sm font-semibold",children:["Posting to b/",u.slug]}),i.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:m?"Publish will post into this channel.":"Join this channel to publish publicly."})]}),i.jsx("div",{className:"shrink-0",children:i.jsx(F,{asChild:!0,size:"sm",variant:"outline",children:i.jsx(pe,{to:`/b/${u.slug}`,children:m?"View":"Join"})})})]}):i.jsxs("div",{className:"border border-border/40 px-3 py-3 flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-sm font-semibold",children:"Choose a channel to post"}),i.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:"Public blueprints must be posted to a channel. Start from a channel page or use + Create."})]}),i.jsx("div",{className:"shrink-0",children:i.jsx(F,{asChild:!0,size:"sm",variant:"outline",children:i.jsx(pe,{to:"/channels?create=1",children:"Pick channel"})})})]})}),i.jsx(fr,{}),i.jsxs(sn,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("h1",{className:"text-xl font-semibold",children:"YouTube to Blueprint"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Paste one YouTube video URL and generate a step-by-step blueprint."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Pe,{htmlFor:"video-url",children:"YouTube URL"}),i.jsx(ze,{id:"video-url",placeholder:"https://www.youtube.com/watch?v=...",value:x,onChange:X=>b(X.target.value)})]}),i.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[i.jsxs("div",{className:"flex items-center justify-between rounded-md border border-border/40 px-3 py-2",children:[i.jsx(Pe,{htmlFor:"yt-review",className:"text-sm",children:"Generate AI review"}),i.jsx(jn,{id:"yt-review",checked:_,onCheckedChange:S})]}),i.jsxs("div",{className:"flex items-center justify-between rounded-md border border-border/40 px-3 py-2",children:[i.jsx(Pe,{htmlFor:"yt-banner",className:"text-sm",children:"Generate banner"}),i.jsx(jn,{id:"yt-banner",checked:j,onCheckedChange:N})]})]}),i.jsx(F,{onClick:K,disabled:!q,children:k?"Generating...":"Generate Blueprint"}),M>0&&i.jsxs("div",{className:"space-y-1",children:[i.jsx(YT,{value:M,className:"h-3 border border-border/40 bg-muted/50"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(M),"%"]})]}),E&&i.jsx("p",{className:"text-sm text-muted-foreground",children:E}),C&&i.jsx("p",{className:"text-sm text-destructive",children:C})]}),I&&i.jsxs(i.Fragment,{children:[i.jsx(fr,{}),i.jsxs(sn,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("h2",{className:"text-lg font-semibold",children:I.draft.title}),i.jsx("p",{className:"text-sm text-muted-foreground",children:I.draft.description})]}),I.banner.url&&i.jsx("div",{className:"overflow-hidden rounded-md border border-border/40",children:i.jsx("img",{src:I.banner.url,alt:"Generated banner",className:"w-full object-cover"})}),i.jsx("div",{className:"space-y-3",children:I.draft.steps.map((X,le)=>i.jsxs("div",{className:"rounded-md border border-border/40 p-3",children:[i.jsxs("p",{className:"font-medium",children:[le+1,". ",X.name]}),i.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:X.notes}),X.timestamp&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:X.timestamp})]},`${X.name}-${le}`))}),I.review.available&&I.review.summary&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-sm font-semibold",children:"AI Review"}),i.jsx(Nh,{review:I.review.summary,density:"compact"})]}),I.draft.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2",children:I.draft.tags.map(X=>i.jsxs(Me,{variant:"secondary",children:["#",X]},X))}),n?u?m?i.jsx("div",{className:"flex flex-wrap gap-2",children:i.jsx(F,{onClick:te,disabled:A,children:A?"Publishing...":"Publish"})}):i.jsxs("div",{className:"rounded-md border border-border/40 p-3 flex items-center justify-between gap-3",children:[i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Join b/",u.slug," to publish publicly."]}),i.jsx(F,{size:"sm",variant:"outline",onClick:()=>g(!0),children:"Join"})]}):i.jsxs("div",{className:"rounded-md border border-border/40 p-3 flex items-center justify-between gap-3",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a channel before publishing."}),i.jsx(F,{asChild:!0,size:"sm",variant:"outline",children:i.jsx(pe,{to:"/channels?create=1",children:"Pick channel"})})]}):i.jsxs("div",{className:"rounded-md border border-border/40 p-3 flex items-center justify-between gap-3",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Log in to publish this blueprint."}),i.jsx(F,{asChild:!0,size:"sm",children:i.jsx(pe,{to:"/auth",children:"Log in to publish"})})]})]})]}),u&&i.jsx(Ug,{open:w,onOpenChange:g,children:i.jsxs(yh,{children:[i.jsxs(xh,{children:[i.jsxs(bh,{children:["Join b/",u.slug," to publish"]}),i.jsx(_h,{children:"You need to join this channel before you can publish publicly."})]}),i.jsxs(wh,{children:[i.jsx(Sh,{disabled:v,children:"Cancel"}),i.jsx(jh,{onClick:X=>{X.preventDefault(),W()},disabled:v,children:v?"Joining...":"Join"})]})]})}),i.jsx(Kr,{})]})]})}function x9(){return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx(vt,{}),i.jsxs("main",{className:"max-w-3xl mx-auto px-3 sm:px-4 py-10 pb-24 space-y-6",children:[i.jsxs("div",{className:"border border-border/40 px-3 py-4 space-y-4",children:[i.jsx("h1",{className:"text-lg font-semibold",children:"About Blueprints"}),i.jsxs("div",{className:"space-y-4 text-sm text-muted-foreground",children:[i.jsx("p",{children:"Blueprints is a community space for sharing step-by-step routines built from libraries. Use it to discover what works, remix it for your needs, and share back with others."}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-foreground",children:"Contact"}),i.jsxs("p",{children:["Email: ",i.jsx("a",{href:"mailto:hi@vdsai.cloud",className:"underline",children:"hi@vdsai.cloud"})]}),i.jsx("p",{children:"Based in Sweden"})]})]})]}),i.jsx(Kr,{})]})]})}const w9=()=>{const e=Er();return d.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),i.jsxs(ln,{children:[i.jsx(vt,{}),i.jsx(cn,{children:i.jsx("div",{className:"flex min-h-[70vh] items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),i.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),i.jsx(pe,{to:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})})]})};function Ll({children:e}){const{user:t,isLoading:r}=Ne();return r?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})}):t?i.jsx(i.Fragment,{children:e}):i.jsx(fa,{to:"/auth",replace:!0})}const b9=new $D,_9=()=>i.jsx(qD,{client:b9,children:i.jsx(L5,{children:i.jsxs(bD,{children:[i.jsx(i4,{}),i.jsx(L4,{}),i.jsx(JL,{basename:Ni.basePath,children:i.jsxs(qL,{children:[i.jsx(ht,{path:"/",element:i.jsx(lz,{})}),i.jsx(ht,{path:"/explore",element:i.jsx(xq,{})}),i.jsx(ht,{path:"/blueprints",element:i.jsx(Bq,{})}),i.jsx(ht,{path:"/youtube",element:i.jsx(y9,{})}),i.jsx(ht,{path:"/channels",element:i.jsx(hW,{})}),i.jsx(ht,{path:"/b/:channelSlug",element:i.jsx(pW,{})}),i.jsx(ht,{path:"/wall",element:i.jsx(oq,{})}),i.jsx(ht,{path:"/wall/:postId",element:i.jsx(Ll,{children:i.jsx(bW,{})})}),i.jsx(ht,{path:"/auth",element:i.jsx(Vq,{})}),i.jsx(ht,{path:"/inventory",element:i.jsx(TW,{})}),i.jsx(ht,{path:"/inventory/create",element:i.jsx(Ll,{children:i.jsx(ZW,{})})}),i.jsx(ht,{path:"/inventory/:inventoryId",element:i.jsx(t7,{})}),i.jsx(ht,{path:"/inventory/:inventoryId/build",element:i.jsx(Vb,{})}),i.jsx(ht,{path:"/blueprint/:blueprintId/edit",element:i.jsx(Ll,{children:i.jsx(Vb,{})})}),i.jsx(ht,{path:"/blueprint/:blueprintId",element:i.jsx(X7,{})}),i.jsx(ht,{path:"/blueprint/:blueprintId/remix",element:i.jsx(Ll,{children:i.jsx(o9,{})})}),i.jsx(ht,{path:"/settings",element:i.jsx(Ll,{children:i.jsx(Zq,{})})}),i.jsx(ht,{path:"/u/:userId",element:i.jsx(uW,{})}),i.jsx(ht,{path:"/tags",element:i.jsx(fa,{to:"/channels",replace:!0})}),i.jsx(ht,{path:"/about",element:i.jsx(x9,{})}),i.jsx(ht,{path:"*",element:i.jsx(w9,{})})]})})]})})});w1(document.getElementById("root")).render(i.jsx(_9,{}));
