var py=e=>{throw TypeError(e)};var kh=(e,t,r)=>t.has(e)||py("Cannot "+r);var C=(e,t,r)=>(kh(e,t,"read from private field"),r?r.call(e):t.get(e)),me=(e,t,r)=>t.has(e)?py("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ie=(e,t,r,n)=>(kh(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Pe=(e,t,r)=>(kh(e,t,"access private method"),r);var Cc=(e,t,r,n)=>({set _(s){ie(e,t,s,r)},get _(){return C(e,t,n)}});function UE(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function P0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var A0={exports:{}},bd={},I0={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zl=Symbol.for("react.element"),BE=Symbol.for("react.portal"),zE=Symbol.for("react.fragment"),qE=Symbol.for("react.strict_mode"),WE=Symbol.for("react.profiler"),VE=Symbol.for("react.provider"),HE=Symbol.for("react.context"),KE=Symbol.for("react.forward_ref"),GE=Symbol.for("react.suspense"),YE=Symbol.for("react.memo"),QE=Symbol.for("react.lazy"),my=Symbol.iterator;function JE(e){return e===null||typeof e!="object"?null:(e=my&&e[my]||e["@@iterator"],typeof e=="function"?e:null)}var O0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M0=Object.assign,D0={};function ao(e,t,r){this.props=e,this.context=t,this.refs=D0,this.updater=r||O0}ao.prototype.isReactComponent={};ao.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ao.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function L0(){}L0.prototype=ao.prototype;function Sm(e,t,r){this.props=e,this.context=t,this.refs=D0,this.updater=r||O0}var Nm=Sm.prototype=new L0;Nm.constructor=Sm;M0(Nm,ao.prototype);Nm.isPureReactComponent=!0;var gy=Array.isArray,$0=Object.prototype.hasOwnProperty,km={current:null},F0={key:!0,ref:!0,__self:!0,__source:!0};function U0(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)$0.call(t,n)&&!F0.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Zl,type:e,key:i,ref:o,props:s,_owner:km.current}}function XE(e,t){return{$$typeof:Zl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Cm(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zl}function ZE(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var vy=/\/+/g;function Ch(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ZE(""+e.key):t.toString(36)}function ou(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Zl:case BE:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Ch(o,0):n,gy(s)?(r="",e!=null&&(r=e.replace(vy,"$&/")+"/"),ou(s,t,r,"",function(u){return u})):s!=null&&(Cm(s)&&(s=XE(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(vy,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",gy(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Ch(i,l);o+=ou(i,t,r,c,s)}else if(c=JE(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Ch(i,l++),o+=ou(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ec(e,t,r){if(e==null)return e;var n=[],s=0;return ou(e,n,"","",function(i){return t.call(r,i,s++)}),n}function eT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Xt={current:null},lu={transition:null},tT={ReactCurrentDispatcher:Xt,ReactCurrentBatchConfig:lu,ReactCurrentOwner:km};function B0(){throw Error("act(...) is not supported in production builds of React.")}De.Children={map:Ec,forEach:function(e,t,r){Ec(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ec(e,function(){t++}),t},toArray:function(e){return Ec(e,function(t){return t})||[]},only:function(e){if(!Cm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};De.Component=ao;De.Fragment=zE;De.Profiler=WE;De.PureComponent=Sm;De.StrictMode=qE;De.Suspense=GE;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tT;De.act=B0;De.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=M0({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=km.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)$0.call(t,c)&&!F0.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Zl,type:e.type,key:s,ref:i,props:n,_owner:o}};De.createContext=function(e){return e={$$typeof:HE,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:VE,_context:e},e.Consumer=e};De.createElement=U0;De.createFactory=function(e){var t=U0.bind(null,e);return t.type=e,t};De.createRef=function(){return{current:null}};De.forwardRef=function(e){return{$$typeof:KE,render:e}};De.isValidElement=Cm;De.lazy=function(e){return{$$typeof:QE,_payload:{_status:-1,_result:e},_init:eT}};De.memo=function(e,t){return{$$typeof:YE,type:e,compare:t===void 0?null:t}};De.startTransition=function(e){var t=lu.transition;lu.transition={};try{e()}finally{lu.transition=t}};De.unstable_act=B0;De.useCallback=function(e,t){return Xt.current.useCallback(e,t)};De.useContext=function(e){return Xt.current.useContext(e)};De.useDebugValue=function(){};De.useDeferredValue=function(e){return Xt.current.useDeferredValue(e)};De.useEffect=function(e,t){return Xt.current.useEffect(e,t)};De.useId=function(){return Xt.current.useId()};De.useImperativeHandle=function(e,t,r){return Xt.current.useImperativeHandle(e,t,r)};De.useInsertionEffect=function(e,t){return Xt.current.useInsertionEffect(e,t)};De.useLayoutEffect=function(e,t){return Xt.current.useLayoutEffect(e,t)};De.useMemo=function(e,t){return Xt.current.useMemo(e,t)};De.useReducer=function(e,t,r){return Xt.current.useReducer(e,t,r)};De.useRef=function(e){return Xt.current.useRef(e)};De.useState=function(e){return Xt.current.useState(e)};De.useSyncExternalStore=function(e,t,r){return Xt.current.useSyncExternalStore(e,t,r)};De.useTransition=function(){return Xt.current.useTransition()};De.version="18.3.1";I0.exports=De;var f=I0.exports;const W=P0(f),Em=UE({__proto__:null,default:W},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rT=f,nT=Symbol.for("react.element"),sT=Symbol.for("react.fragment"),iT=Object.prototype.hasOwnProperty,aT=rT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oT={key:!0,ref:!0,__self:!0,__source:!0};function z0(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)iT.call(t,n)&&!oT.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:nT,type:e,key:i,ref:o,props:s,_owner:aT.current}}bd.Fragment=sT;bd.jsx=z0;bd.jsxs=z0;A0.exports=bd;var a=A0.exports,q0={exports:{}},Nr={},W0={exports:{}},V0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,E){var B=T.length;T.push(E);e:for(;0<B;){var re=B-1>>>1,Y=T[re];if(0<s(Y,E))T[re]=E,T[B]=Y,B=re;else break e}}function r(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var E=T[0],B=T.pop();if(B!==E){T[0]=B;e:for(var re=0,Y=T.length,fe=Y>>>1;re<fe;){var q=2*(re+1)-1,de=T[q],he=q+1,z=T[he];if(0>s(de,B))he<Y&&0>s(z,de)?(T[re]=z,T[he]=B,re=he):(T[re]=de,T[q]=B,re=q);else if(he<Y&&0>s(z,B))T[re]=z,T[he]=B,re=he;else break e}}return E}function s(T,E){var B=T.sortIndex-E.sortIndex;return B!==0?B:T.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,m=!1,b=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(T){for(var E=r(u);E!==null;){if(E.callback===null)n(u);else if(E.startTime<=T)n(u),E.sortIndex=E.expirationTime,t(c,E);else break;E=r(u)}}function _(T){if(g=!1,w(T),!b)if(r(c)!==null)b=!0,U(j);else{var E=r(u);E!==null&&J(_,E.startTime-T)}}function j(T,E){b=!1,g&&(g=!1,x(k),k=-1),m=!0;var B=p;try{for(w(E),h=r(c);h!==null&&(!(h.expirationTime>E)||T&&!D());){var re=h.callback;if(typeof re=="function"){h.callback=null,p=h.priorityLevel;var Y=re(h.expirationTime<=E);E=e.unstable_now(),typeof Y=="function"?h.callback=Y:h===r(c)&&n(c),w(E)}else n(c);h=r(c)}if(h!==null)var fe=!0;else{var q=r(u);q!==null&&J(_,q.startTime-E),fe=!1}return fe}finally{h=null,p=B,m=!1}}var S=!1,N=null,k=-1,R=5,I=-1;function D(){return!(e.unstable_now()-I<R)}function A(){if(N!==null){var T=e.unstable_now();I=T;var E=!0;try{E=N(!0,T)}finally{E?$():(S=!1,N=null)}}else S=!1}var $;if(typeof y=="function")$=function(){y(A)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,X=O.port2;O.port1.onmessage=A,$=function(){X.postMessage(null)}}else $=function(){v(A,0)};function U(T){N=T,S||(S=!0,$())}function J(T,E){k=v(function(){T(e.unstable_now())},E)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){b||m||(b=!0,U(j))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(T){switch(p){case 1:case 2:case 3:var E=3;break;default:E=p}var B=p;p=E;try{return T()}finally{p=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,E){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var B=p;p=T;try{return E()}finally{p=B}},e.unstable_scheduleCallback=function(T,E,B){var re=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?re+B:re):B=re,T){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=B+Y,T={id:d++,callback:E,priorityLevel:T,startTime:B,expirationTime:Y,sortIndex:-1},B>re?(T.sortIndex=B,t(u,T),r(c)===null&&T===r(u)&&(g?(x(k),k=-1):g=!0,J(_,B-re))):(T.sortIndex=Y,t(c,T),b||m||(b=!0,U(j))),T},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(T){var E=p;return function(){var B=p;p=E;try{return T.apply(this,arguments)}finally{p=B}}}})(V0);W0.exports=V0;var lT=W0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cT=f,Sr=lT;function V(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var H0=new Set,pl={};function Wi(e,t){Ya(e,t),Ya(e+"Capture",t)}function Ya(e,t){for(pl[e]=t,e=0;e<t.length;e++)H0.add(t[e])}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Af=Object.prototype.hasOwnProperty,uT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yy={},xy={};function dT(e){return Af.call(xy,e)?!0:Af.call(yy,e)?!1:uT.test(e)?xy[e]=!0:(yy[e]=!0,!1)}function hT(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function fT(e,t,r,n){if(t===null||typeof t>"u"||hT(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Zt(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){It[e]=new Zt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];It[t]=new Zt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){It[e]=new Zt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){It[e]=new Zt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){It[e]=new Zt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){It[e]=new Zt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){It[e]=new Zt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){It[e]=new Zt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){It[e]=new Zt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Tm=/[\-:]([a-z])/g;function Rm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Tm,Rm);It[t]=new Zt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Tm,Rm);It[t]=new Zt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Tm,Rm);It[t]=new Zt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){It[e]=new Zt(e,1,!1,e.toLowerCase(),null,!1,!1)});It.xlinkHref=new Zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){It[e]=new Zt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Pm(e,t,r,n){var s=It.hasOwnProperty(t)?It[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(fT(t,r,s,n)&&(r=null),n||s===null?dT(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Xn=cT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tc=Symbol.for("react.element"),ha=Symbol.for("react.portal"),fa=Symbol.for("react.fragment"),Am=Symbol.for("react.strict_mode"),If=Symbol.for("react.profiler"),K0=Symbol.for("react.provider"),G0=Symbol.for("react.context"),Im=Symbol.for("react.forward_ref"),Of=Symbol.for("react.suspense"),Mf=Symbol.for("react.suspense_list"),Om=Symbol.for("react.memo"),hs=Symbol.for("react.lazy"),Y0=Symbol.for("react.offscreen"),wy=Symbol.iterator;function Po(e){return e===null||typeof e!="object"?null:(e=wy&&e[wy]||e["@@iterator"],typeof e=="function"?e:null)}var at=Object.assign,Eh;function Ho(e){if(Eh===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Eh=t&&t[1]||""}return`
`+Eh+e}var Th=!1;function Rh(e,t){if(!e||Th)return"";Th=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Th=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ho(e):""}function pT(e){switch(e.tag){case 5:return Ho(e.type);case 16:return Ho("Lazy");case 13:return Ho("Suspense");case 19:return Ho("SuspenseList");case 0:case 2:case 15:return e=Rh(e.type,!1),e;case 11:return e=Rh(e.type.render,!1),e;case 1:return e=Rh(e.type,!0),e;default:return""}}function Df(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fa:return"Fragment";case ha:return"Portal";case If:return"Profiler";case Am:return"StrictMode";case Of:return"Suspense";case Mf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case G0:return(e.displayName||"Context")+".Consumer";case K0:return(e._context.displayName||"Context")+".Provider";case Im:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Om:return t=e.displayName||null,t!==null?t:Df(e.type)||"Memo";case hs:t=e._payload,e=e._init;try{return Df(e(t))}catch{}}return null}function mT(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Df(t);case 8:return t===Am?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Q0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function gT(e){var t=Q0(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Rc(e){e._valueTracker||(e._valueTracker=gT(e))}function J0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Q0(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Eu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Lf(e,t){var r=t.checked;return at({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function by(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=qs(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function X0(e,t){t=t.checked,t!=null&&Pm(e,"checked",t,!1)}function $f(e,t){X0(e,t);var r=qs(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ff(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ff(e,t.type,qs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function _y(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ff(e,t,r){(t!=="number"||Eu(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ko=Array.isArray;function Na(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+qs(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Uf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(V(91));return at({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function jy(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(V(92));if(Ko(r)){if(1<r.length)throw Error(V(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:qs(r)}}function Z0(e,t){var r=qs(t.value),n=qs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Sy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function eb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?eb(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Pc,tb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Pc=Pc||document.createElement("div"),Pc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Pc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ml(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var el={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vT=["Webkit","ms","Moz","O"];Object.keys(el).forEach(function(e){vT.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),el[t]=el[e]})});function rb(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||el.hasOwnProperty(e)&&el[e]?(""+t).trim():t+"px"}function nb(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=rb(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var yT=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zf(e,t){if(t){if(yT[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(V(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(V(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(V(61))}if(t.style!=null&&typeof t.style!="object")throw Error(V(62))}}function qf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wf=null;function Mm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vf=null,ka=null,Ca=null;function Ny(e){if(e=rc(e)){if(typeof Vf!="function")throw Error(V(280));var t=e.stateNode;t&&(t=kd(t),Vf(e.stateNode,e.type,t))}}function sb(e){ka?Ca?Ca.push(e):Ca=[e]:ka=e}function ib(){if(ka){var e=ka,t=Ca;if(Ca=ka=null,Ny(e),t)for(e=0;e<t.length;e++)Ny(t[e])}}function ab(e,t){return e(t)}function ob(){}var Ph=!1;function lb(e,t,r){if(Ph)return e(t,r);Ph=!0;try{return ab(e,t,r)}finally{Ph=!1,(ka!==null||Ca!==null)&&(ob(),ib())}}function gl(e,t){var r=e.stateNode;if(r===null)return null;var n=kd(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(V(231,t,typeof r));return r}var Hf=!1;if(Vn)try{var Ao={};Object.defineProperty(Ao,"passive",{get:function(){Hf=!0}}),window.addEventListener("test",Ao,Ao),window.removeEventListener("test",Ao,Ao)}catch{Hf=!1}function xT(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var tl=!1,Tu=null,Ru=!1,Kf=null,wT={onError:function(e){tl=!0,Tu=e}};function bT(e,t,r,n,s,i,o,l,c){tl=!1,Tu=null,xT.apply(wT,arguments)}function _T(e,t,r,n,s,i,o,l,c){if(bT.apply(this,arguments),tl){if(tl){var u=Tu;tl=!1,Tu=null}else throw Error(V(198));Ru||(Ru=!0,Kf=u)}}function Vi(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function cb(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ky(e){if(Vi(e)!==e)throw Error(V(188))}function jT(e){var t=e.alternate;if(!t){if(t=Vi(e),t===null)throw Error(V(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return ky(s),e;if(i===n)return ky(s),t;i=i.sibling}throw Error(V(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(V(189))}}if(r.alternate!==n)throw Error(V(190))}if(r.tag!==3)throw Error(V(188));return r.stateNode.current===r?e:t}function ub(e){return e=jT(e),e!==null?db(e):null}function db(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=db(e);if(t!==null)return t;e=e.sibling}return null}var hb=Sr.unstable_scheduleCallback,Cy=Sr.unstable_cancelCallback,ST=Sr.unstable_shouldYield,NT=Sr.unstable_requestPaint,ft=Sr.unstable_now,kT=Sr.unstable_getCurrentPriorityLevel,Dm=Sr.unstable_ImmediatePriority,fb=Sr.unstable_UserBlockingPriority,Pu=Sr.unstable_NormalPriority,CT=Sr.unstable_LowPriority,pb=Sr.unstable_IdlePriority,_d=null,Nn=null;function ET(e){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(_d,e,void 0,(e.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:PT,TT=Math.log,RT=Math.LN2;function PT(e){return e>>>=0,e===0?32:31-(TT(e)/RT|0)|0}var Ac=64,Ic=4194304;function Go(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Au(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Go(l):(i&=o,i!==0&&(n=Go(i)))}else o=r&~s,o!==0?n=Go(o):i!==0&&(n=Go(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-rn(t),s=1<<r,n|=e[r],t&=~s;return n}function AT(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IT(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-rn(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=AT(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Gf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function mb(){var e=Ac;return Ac<<=1,!(Ac&4194240)&&(Ac=64),e}function Ah(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ec(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-rn(t),e[t]=r}function OT(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-rn(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function Lm(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-rn(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var He=0;function gb(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var vb,$m,yb,xb,wb,Yf=!1,Oc=[],Ps=null,As=null,Is=null,vl=new Map,yl=new Map,ms=[],MT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ey(e,t){switch(e){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":As=null;break;case"mouseover":case"mouseout":Is=null;break;case"pointerover":case"pointerout":vl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yl.delete(t.pointerId)}}function Io(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=rc(t),t!==null&&$m(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function DT(e,t,r,n,s){switch(t){case"focusin":return Ps=Io(Ps,e,t,r,n,s),!0;case"dragenter":return As=Io(As,e,t,r,n,s),!0;case"mouseover":return Is=Io(Is,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return vl.set(i,Io(vl.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,yl.set(i,Io(yl.get(i)||null,e,t,r,n,s)),!0}return!1}function bb(e){var t=pi(e.target);if(t!==null){var r=Vi(t);if(r!==null){if(t=r.tag,t===13){if(t=cb(r),t!==null){e.blockedOn=t,wb(e.priority,function(){yb(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Qf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Wf=n,r.target.dispatchEvent(n),Wf=null}else return t=rc(r),t!==null&&$m(t),e.blockedOn=r,!1;t.shift()}return!0}function Ty(e,t,r){cu(e)&&r.delete(t)}function LT(){Yf=!1,Ps!==null&&cu(Ps)&&(Ps=null),As!==null&&cu(As)&&(As=null),Is!==null&&cu(Is)&&(Is=null),vl.forEach(Ty),yl.forEach(Ty)}function Oo(e,t){e.blockedOn===t&&(e.blockedOn=null,Yf||(Yf=!0,Sr.unstable_scheduleCallback(Sr.unstable_NormalPriority,LT)))}function xl(e){function t(s){return Oo(s,e)}if(0<Oc.length){Oo(Oc[0],e);for(var r=1;r<Oc.length;r++){var n=Oc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ps!==null&&Oo(Ps,e),As!==null&&Oo(As,e),Is!==null&&Oo(Is,e),vl.forEach(t),yl.forEach(t),r=0;r<ms.length;r++)n=ms[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ms.length&&(r=ms[0],r.blockedOn===null);)bb(r),r.blockedOn===null&&ms.shift()}var Ea=Xn.ReactCurrentBatchConfig,Iu=!0;function $T(e,t,r,n){var s=He,i=Ea.transition;Ea.transition=null;try{He=1,Fm(e,t,r,n)}finally{He=s,Ea.transition=i}}function FT(e,t,r,n){var s=He,i=Ea.transition;Ea.transition=null;try{He=4,Fm(e,t,r,n)}finally{He=s,Ea.transition=i}}function Fm(e,t,r,n){if(Iu){var s=Qf(e,t,r,n);if(s===null)zh(e,t,n,Ou,r),Ey(e,n);else if(DT(s,e,t,r,n))n.stopPropagation();else if(Ey(e,n),t&4&&-1<MT.indexOf(e)){for(;s!==null;){var i=rc(s);if(i!==null&&vb(i),i=Qf(e,t,r,n),i===null&&zh(e,t,n,Ou,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else zh(e,t,n,null,r)}}var Ou=null;function Qf(e,t,r,n){if(Ou=null,e=Mm(n),e=pi(e),e!==null)if(t=Vi(e),t===null)e=null;else if(r=t.tag,r===13){if(e=cb(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ou=e,null}function _b(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kT()){case Dm:return 1;case fb:return 4;case Pu:case CT:return 16;case pb:return 536870912;default:return 16}default:return 16}}var Es=null,Um=null,uu=null;function jb(){if(uu)return uu;var e,t=Um,r=t.length,n,s="value"in Es?Es.value:Es.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return uu=s.slice(e,1<n?1-n:void 0)}function du(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mc(){return!0}function Ry(){return!1}function kr(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Mc:Ry,this.isPropagationStopped=Ry,this}return at(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Mc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Mc)},persist:function(){},isPersistent:Mc}),t}var oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bm=kr(oo),tc=at({},oo,{view:0,detail:0}),UT=kr(tc),Ih,Oh,Mo,jd=at({},tc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mo&&(Mo&&e.type==="mousemove"?(Ih=e.screenX-Mo.screenX,Oh=e.screenY-Mo.screenY):Oh=Ih=0,Mo=e),Ih)},movementY:function(e){return"movementY"in e?e.movementY:Oh}}),Py=kr(jd),BT=at({},jd,{dataTransfer:0}),zT=kr(BT),qT=at({},tc,{relatedTarget:0}),Mh=kr(qT),WT=at({},oo,{animationName:0,elapsedTime:0,pseudoElement:0}),VT=kr(WT),HT=at({},oo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),KT=kr(HT),GT=at({},oo,{data:0}),Ay=kr(GT),YT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=JT[e])?!!t[e]:!1}function zm(){return XT}var ZT=at({},tc,{key:function(e){if(e.key){var t=YT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=du(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?QT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zm,charCode:function(e){return e.type==="keypress"?du(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?du(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),e2=kr(ZT),t2=at({},jd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Iy=kr(t2),r2=at({},tc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zm}),n2=kr(r2),s2=at({},oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),i2=kr(s2),a2=at({},jd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),o2=kr(a2),l2=[9,13,27,32],qm=Vn&&"CompositionEvent"in window,rl=null;Vn&&"documentMode"in document&&(rl=document.documentMode);var c2=Vn&&"TextEvent"in window&&!rl,Sb=Vn&&(!qm||rl&&8<rl&&11>=rl),Oy=" ",My=!1;function Nb(e,t){switch(e){case"keyup":return l2.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kb(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pa=!1;function u2(e,t){switch(e){case"compositionend":return kb(t);case"keypress":return t.which!==32?null:(My=!0,Oy);case"textInput":return e=t.data,e===Oy&&My?null:e;default:return null}}function d2(e,t){if(pa)return e==="compositionend"||!qm&&Nb(e,t)?(e=jb(),uu=Um=Es=null,pa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sb&&t.locale!=="ko"?null:t.data;default:return null}}var h2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!h2[e.type]:t==="textarea"}function Cb(e,t,r,n){sb(n),t=Mu(t,"onChange"),0<t.length&&(r=new Bm("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var nl=null,wl=null;function f2(e){$b(e,0)}function Sd(e){var t=va(e);if(J0(t))return e}function p2(e,t){if(e==="change")return t}var Eb=!1;if(Vn){var Dh;if(Vn){var Lh="oninput"in document;if(!Lh){var Ly=document.createElement("div");Ly.setAttribute("oninput","return;"),Lh=typeof Ly.oninput=="function"}Dh=Lh}else Dh=!1;Eb=Dh&&(!document.documentMode||9<document.documentMode)}function $y(){nl&&(nl.detachEvent("onpropertychange",Tb),wl=nl=null)}function Tb(e){if(e.propertyName==="value"&&Sd(wl)){var t=[];Cb(t,wl,e,Mm(e)),lb(f2,t)}}function m2(e,t,r){e==="focusin"?($y(),nl=t,wl=r,nl.attachEvent("onpropertychange",Tb)):e==="focusout"&&$y()}function g2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sd(wl)}function v2(e,t){if(e==="click")return Sd(t)}function y2(e,t){if(e==="input"||e==="change")return Sd(t)}function x2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sn=typeof Object.is=="function"?Object.is:x2;function bl(e,t){if(sn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Af.call(t,s)||!sn(e[s],t[s]))return!1}return!0}function Fy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Uy(e,t){var r=Fy(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Fy(r)}}function Rb(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Rb(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pb(){for(var e=window,t=Eu();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Eu(e.document)}return t}function Wm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function w2(e){var t=Pb(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Rb(r.ownerDocument.documentElement,r)){if(n!==null&&Wm(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Uy(r,i);var o=Uy(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var b2=Vn&&"documentMode"in document&&11>=document.documentMode,ma=null,Jf=null,sl=null,Xf=!1;function By(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Xf||ma==null||ma!==Eu(n)||(n=ma,"selectionStart"in n&&Wm(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),sl&&bl(sl,n)||(sl=n,n=Mu(Jf,"onSelect"),0<n.length&&(t=new Bm("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ma)))}function Dc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ga={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},$h={},Ab={};Vn&&(Ab=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function Nd(e){if($h[e])return $h[e];if(!ga[e])return e;var t=ga[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Ab)return $h[e]=t[r];return e}var Ib=Nd("animationend"),Ob=Nd("animationiteration"),Mb=Nd("animationstart"),Db=Nd("transitionend"),Lb=new Map,zy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gs(e,t){Lb.set(e,t),Wi(t,[e])}for(var Fh=0;Fh<zy.length;Fh++){var Uh=zy[Fh],_2=Uh.toLowerCase(),j2=Uh[0].toUpperCase()+Uh.slice(1);Gs(_2,"on"+j2)}Gs(Ib,"onAnimationEnd");Gs(Ob,"onAnimationIteration");Gs(Mb,"onAnimationStart");Gs("dblclick","onDoubleClick");Gs("focusin","onFocus");Gs("focusout","onBlur");Gs(Db,"onTransitionEnd");Ya("onMouseEnter",["mouseout","mouseover"]);Ya("onMouseLeave",["mouseout","mouseover"]);Ya("onPointerEnter",["pointerout","pointerover"]);Ya("onPointerLeave",["pointerout","pointerover"]);Wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yo));function qy(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,_T(n,t,void 0,e),e.currentTarget=null}function $b(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;qy(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;qy(s,l,u),i=c}}}if(Ru)throw e=Kf,Ru=!1,Kf=null,e}function et(e,t){var r=t[np];r===void 0&&(r=t[np]=new Set);var n=e+"__bubble";r.has(n)||(Fb(t,e,2,!1),r.add(n))}function Bh(e,t,r){var n=0;t&&(n|=4),Fb(r,e,n,t)}var Lc="_reactListening"+Math.random().toString(36).slice(2);function _l(e){if(!e[Lc]){e[Lc]=!0,H0.forEach(function(r){r!=="selectionchange"&&(S2.has(r)||Bh(r,!1,e),Bh(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Lc]||(t[Lc]=!0,Bh("selectionchange",!1,t))}}function Fb(e,t,r,n){switch(_b(t)){case 1:var s=$T;break;case 4:s=FT;break;default:s=Fm}r=s.bind(null,t,r,e),s=void 0,!Hf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function zh(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=pi(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}lb(function(){var u=i,d=Mm(r),h=[];e:{var p=Lb.get(e);if(p!==void 0){var m=Bm,b=e;switch(e){case"keypress":if(du(r)===0)break e;case"keydown":case"keyup":m=e2;break;case"focusin":b="focus",m=Mh;break;case"focusout":b="blur",m=Mh;break;case"beforeblur":case"afterblur":m=Mh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Py;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=zT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=n2;break;case Ib:case Ob:case Mb:m=VT;break;case Db:m=i2;break;case"scroll":m=UT;break;case"wheel":m=o2;break;case"copy":case"cut":case"paste":m=KT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Iy}var g=(t&4)!==0,v=!g&&e==="scroll",x=g?p!==null?p+"Capture":null:p;g=[];for(var y=u,w;y!==null;){w=y;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,x!==null&&(_=gl(y,x),_!=null&&g.push(jl(y,_,w)))),v)break;y=y.return}0<g.length&&(p=new m(p,b,null,r,d),h.push({event:p,listeners:g}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&r!==Wf&&(b=r.relatedTarget||r.fromElement)&&(pi(b)||b[Hn]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(b=r.relatedTarget||r.toElement,m=u,b=b?pi(b):null,b!==null&&(v=Vi(b),b!==v||b.tag!==5&&b.tag!==6)&&(b=null)):(m=null,b=u),m!==b)){if(g=Py,_="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=Iy,_="onPointerLeave",x="onPointerEnter",y="pointer"),v=m==null?p:va(m),w=b==null?p:va(b),p=new g(_,y+"leave",m,r,d),p.target=v,p.relatedTarget=w,_=null,pi(d)===u&&(g=new g(x,y+"enter",b,r,d),g.target=w,g.relatedTarget=v,_=g),v=_,m&&b)t:{for(g=m,x=b,y=0,w=g;w;w=Xi(w))y++;for(w=0,_=x;_;_=Xi(_))w++;for(;0<y-w;)g=Xi(g),y--;for(;0<w-y;)x=Xi(x),w--;for(;y--;){if(g===x||x!==null&&g===x.alternate)break t;g=Xi(g),x=Xi(x)}g=null}else g=null;m!==null&&Wy(h,p,m,g,!1),b!==null&&v!==null&&Wy(h,v,b,g,!0)}}e:{if(p=u?va(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var j=p2;else if(Dy(p))if(Eb)j=y2;else{j=g2;var S=m2}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(j=v2);if(j&&(j=j(e,u))){Cb(h,j,r,d);break e}S&&S(e,p,u),e==="focusout"&&(S=p._wrapperState)&&S.controlled&&p.type==="number"&&Ff(p,"number",p.value)}switch(S=u?va(u):window,e){case"focusin":(Dy(S)||S.contentEditable==="true")&&(ma=S,Jf=u,sl=null);break;case"focusout":sl=Jf=ma=null;break;case"mousedown":Xf=!0;break;case"contextmenu":case"mouseup":case"dragend":Xf=!1,By(h,r,d);break;case"selectionchange":if(b2)break;case"keydown":case"keyup":By(h,r,d)}var N;if(qm)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else pa?Nb(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(Sb&&r.locale!=="ko"&&(pa||k!=="onCompositionStart"?k==="onCompositionEnd"&&pa&&(N=jb()):(Es=d,Um="value"in Es?Es.value:Es.textContent,pa=!0)),S=Mu(u,k),0<S.length&&(k=new Ay(k,e,null,r,d),h.push({event:k,listeners:S}),N?k.data=N:(N=kb(r),N!==null&&(k.data=N)))),(N=c2?u2(e,r):d2(e,r))&&(u=Mu(u,"onBeforeInput"),0<u.length&&(d=new Ay("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=N))}$b(h,t)})}function jl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Mu(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=gl(e,r),i!=null&&n.unshift(jl(e,i,s)),i=gl(e,t),i!=null&&n.push(jl(e,i,s))),e=e.return}return n}function Xi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Wy(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=gl(r,i),c!=null&&o.unshift(jl(r,c,l))):s||(c=gl(r,i),c!=null&&o.push(jl(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var N2=/\r\n?/g,k2=/\u0000|\uFFFD/g;function Vy(e){return(typeof e=="string"?e:""+e).replace(N2,`
`).replace(k2,"")}function $c(e,t,r){if(t=Vy(t),Vy(e)!==t&&r)throw Error(V(425))}function Du(){}var Zf=null,ep=null;function tp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rp=typeof setTimeout=="function"?setTimeout:void 0,C2=typeof clearTimeout=="function"?clearTimeout:void 0,Hy=typeof Promise=="function"?Promise:void 0,E2=typeof queueMicrotask=="function"?queueMicrotask:typeof Hy<"u"?function(e){return Hy.resolve(null).then(e).catch(T2)}:rp;function T2(e){setTimeout(function(){throw e})}function qh(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),xl(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);xl(t)}function Os(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ky(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var lo=Math.random().toString(36).slice(2),_n="__reactFiber$"+lo,Sl="__reactProps$"+lo,Hn="__reactContainer$"+lo,np="__reactEvents$"+lo,R2="__reactListeners$"+lo,P2="__reactHandles$"+lo;function pi(e){var t=e[_n];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Hn]||r[_n]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Ky(e);e!==null;){if(r=e[_n])return r;e=Ky(e)}return t}e=r,r=e.parentNode}return null}function rc(e){return e=e[_n]||e[Hn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function va(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(V(33))}function kd(e){return e[Sl]||null}var sp=[],ya=-1;function Ys(e){return{current:e}}function tt(e){0>ya||(e.current=sp[ya],sp[ya]=null,ya--)}function Xe(e,t){ya++,sp[ya]=e.current,e.current=t}var Ws={},Ht=Ys(Ws),ur=Ys(!1),Pi=Ws;function Qa(e,t){var r=e.type.contextTypes;if(!r)return Ws;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function dr(e){return e=e.childContextTypes,e!=null}function Lu(){tt(ur),tt(Ht)}function Gy(e,t,r){if(Ht.current!==Ws)throw Error(V(168));Xe(Ht,t),Xe(ur,r)}function Ub(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(V(108,mT(e)||"Unknown",s));return at({},r,n)}function $u(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ws,Pi=Ht.current,Xe(Ht,e),Xe(ur,ur.current),!0}function Yy(e,t,r){var n=e.stateNode;if(!n)throw Error(V(169));r?(e=Ub(e,t,Pi),n.__reactInternalMemoizedMergedChildContext=e,tt(ur),tt(Ht),Xe(Ht,e)):tt(ur),Xe(ur,r)}var Ln=null,Cd=!1,Wh=!1;function Bb(e){Ln===null?Ln=[e]:Ln.push(e)}function A2(e){Cd=!0,Bb(e)}function Qs(){if(!Wh&&Ln!==null){Wh=!0;var e=0,t=He;try{var r=Ln;for(He=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ln=null,Cd=!1}catch(s){throw Ln!==null&&(Ln=Ln.slice(e+1)),hb(Dm,Qs),s}finally{He=t,Wh=!1}}return null}var xa=[],wa=0,Fu=null,Uu=0,Tr=[],Rr=0,Ai=null,Un=1,Bn="";function li(e,t){xa[wa++]=Uu,xa[wa++]=Fu,Fu=e,Uu=t}function zb(e,t,r){Tr[Rr++]=Un,Tr[Rr++]=Bn,Tr[Rr++]=Ai,Ai=e;var n=Un;e=Bn;var s=32-rn(n)-1;n&=~(1<<s),r+=1;var i=32-rn(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Un=1<<32-rn(t)+s|r<<s|n,Bn=i+e}else Un=1<<i|r<<s|n,Bn=e}function Vm(e){e.return!==null&&(li(e,1),zb(e,1,0))}function Hm(e){for(;e===Fu;)Fu=xa[--wa],xa[wa]=null,Uu=xa[--wa],xa[wa]=null;for(;e===Ai;)Ai=Tr[--Rr],Tr[Rr]=null,Bn=Tr[--Rr],Tr[Rr]=null,Un=Tr[--Rr],Tr[Rr]=null}var br=null,wr=null,rt=!1,tn=null;function qb(e,t){var r=Pr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Qy(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,br=e,wr=Os(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,br=e,wr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ai!==null?{id:Un,overflow:Bn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Pr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,br=e,wr=null,!0):!1;default:return!1}}function ip(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ap(e){if(rt){var t=wr;if(t){var r=t;if(!Qy(e,t)){if(ip(e))throw Error(V(418));t=Os(r.nextSibling);var n=br;t&&Qy(e,t)?qb(n,r):(e.flags=e.flags&-4097|2,rt=!1,br=e)}}else{if(ip(e))throw Error(V(418));e.flags=e.flags&-4097|2,rt=!1,br=e}}}function Jy(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;br=e}function Fc(e){if(e!==br)return!1;if(!rt)return Jy(e),rt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!tp(e.type,e.memoizedProps)),t&&(t=wr)){if(ip(e))throw Wb(),Error(V(418));for(;t;)qb(e,t),t=Os(t.nextSibling)}if(Jy(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(V(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){wr=Os(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}wr=null}}else wr=br?Os(e.stateNode.nextSibling):null;return!0}function Wb(){for(var e=wr;e;)e=Os(e.nextSibling)}function Ja(){wr=br=null,rt=!1}function Km(e){tn===null?tn=[e]:tn.push(e)}var I2=Xn.ReactCurrentBatchConfig;function Do(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(V(309));var n=r.stateNode}if(!n)throw Error(V(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(V(284));if(!r._owner)throw Error(V(290,e))}return e}function Uc(e,t){throw e=Object.prototype.toString.call(t),Error(V(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xy(e){var t=e._init;return t(e._payload)}function Vb(e){function t(x,y){if(e){var w=x.deletions;w===null?(x.deletions=[y],x.flags|=16):w.push(y)}}function r(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function n(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function s(x,y){return x=$s(x,y),x.index=0,x.sibling=null,x}function i(x,y,w){return x.index=w,e?(w=x.alternate,w!==null?(w=w.index,w<y?(x.flags|=2,y):w):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,y,w,_){return y===null||y.tag!==6?(y=Jh(w,x.mode,_),y.return=x,y):(y=s(y,w),y.return=x,y)}function c(x,y,w,_){var j=w.type;return j===fa?d(x,y,w.props.children,_,w.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===hs&&Xy(j)===y.type)?(_=s(y,w.props),_.ref=Do(x,y,w),_.return=x,_):(_=yu(w.type,w.key,w.props,null,x.mode,_),_.ref=Do(x,y,w),_.return=x,_)}function u(x,y,w,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Xh(w,x.mode,_),y.return=x,y):(y=s(y,w.children||[]),y.return=x,y)}function d(x,y,w,_,j){return y===null||y.tag!==7?(y=Ti(w,x.mode,_,j),y.return=x,y):(y=s(y,w),y.return=x,y)}function h(x,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Jh(""+y,x.mode,w),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Tc:return w=yu(y.type,y.key,y.props,null,x.mode,w),w.ref=Do(x,null,y),w.return=x,w;case ha:return y=Xh(y,x.mode,w),y.return=x,y;case hs:var _=y._init;return h(x,_(y._payload),w)}if(Ko(y)||Po(y))return y=Ti(y,x.mode,w,null),y.return=x,y;Uc(x,y)}return null}function p(x,y,w,_){var j=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(x,y,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Tc:return w.key===j?c(x,y,w,_):null;case ha:return w.key===j?u(x,y,w,_):null;case hs:return j=w._init,p(x,y,j(w._payload),_)}if(Ko(w)||Po(w))return j!==null?null:d(x,y,w,_,null);Uc(x,w)}return null}function m(x,y,w,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return x=x.get(w)||null,l(y,x,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Tc:return x=x.get(_.key===null?w:_.key)||null,c(y,x,_,j);case ha:return x=x.get(_.key===null?w:_.key)||null,u(y,x,_,j);case hs:var S=_._init;return m(x,y,w,S(_._payload),j)}if(Ko(_)||Po(_))return x=x.get(w)||null,d(y,x,_,j,null);Uc(y,_)}return null}function b(x,y,w,_){for(var j=null,S=null,N=y,k=y=0,R=null;N!==null&&k<w.length;k++){N.index>k?(R=N,N=null):R=N.sibling;var I=p(x,N,w[k],_);if(I===null){N===null&&(N=R);break}e&&N&&I.alternate===null&&t(x,N),y=i(I,y,k),S===null?j=I:S.sibling=I,S=I,N=R}if(k===w.length)return r(x,N),rt&&li(x,k),j;if(N===null){for(;k<w.length;k++)N=h(x,w[k],_),N!==null&&(y=i(N,y,k),S===null?j=N:S.sibling=N,S=N);return rt&&li(x,k),j}for(N=n(x,N);k<w.length;k++)R=m(N,x,k,w[k],_),R!==null&&(e&&R.alternate!==null&&N.delete(R.key===null?k:R.key),y=i(R,y,k),S===null?j=R:S.sibling=R,S=R);return e&&N.forEach(function(D){return t(x,D)}),rt&&li(x,k),j}function g(x,y,w,_){var j=Po(w);if(typeof j!="function")throw Error(V(150));if(w=j.call(w),w==null)throw Error(V(151));for(var S=j=null,N=y,k=y=0,R=null,I=w.next();N!==null&&!I.done;k++,I=w.next()){N.index>k?(R=N,N=null):R=N.sibling;var D=p(x,N,I.value,_);if(D===null){N===null&&(N=R);break}e&&N&&D.alternate===null&&t(x,N),y=i(D,y,k),S===null?j=D:S.sibling=D,S=D,N=R}if(I.done)return r(x,N),rt&&li(x,k),j;if(N===null){for(;!I.done;k++,I=w.next())I=h(x,I.value,_),I!==null&&(y=i(I,y,k),S===null?j=I:S.sibling=I,S=I);return rt&&li(x,k),j}for(N=n(x,N);!I.done;k++,I=w.next())I=m(N,x,k,I.value,_),I!==null&&(e&&I.alternate!==null&&N.delete(I.key===null?k:I.key),y=i(I,y,k),S===null?j=I:S.sibling=I,S=I);return e&&N.forEach(function(A){return t(x,A)}),rt&&li(x,k),j}function v(x,y,w,_){if(typeof w=="object"&&w!==null&&w.type===fa&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Tc:e:{for(var j=w.key,S=y;S!==null;){if(S.key===j){if(j=w.type,j===fa){if(S.tag===7){r(x,S.sibling),y=s(S,w.props.children),y.return=x,x=y;break e}}else if(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===hs&&Xy(j)===S.type){r(x,S.sibling),y=s(S,w.props),y.ref=Do(x,S,w),y.return=x,x=y;break e}r(x,S);break}else t(x,S);S=S.sibling}w.type===fa?(y=Ti(w.props.children,x.mode,_,w.key),y.return=x,x=y):(_=yu(w.type,w.key,w.props,null,x.mode,_),_.ref=Do(x,y,w),_.return=x,x=_)}return o(x);case ha:e:{for(S=w.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){r(x,y.sibling),y=s(y,w.children||[]),y.return=x,x=y;break e}else{r(x,y);break}else t(x,y);y=y.sibling}y=Xh(w,x.mode,_),y.return=x,x=y}return o(x);case hs:return S=w._init,v(x,y,S(w._payload),_)}if(Ko(w))return b(x,y,w,_);if(Po(w))return g(x,y,w,_);Uc(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(r(x,y.sibling),y=s(y,w),y.return=x,x=y):(r(x,y),y=Jh(w,x.mode,_),y.return=x,x=y),o(x)):r(x,y)}return v}var Xa=Vb(!0),Hb=Vb(!1),Bu=Ys(null),zu=null,ba=null,Gm=null;function Ym(){Gm=ba=zu=null}function Qm(e){var t=Bu.current;tt(Bu),e._currentValue=t}function op(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ta(e,t){zu=e,Gm=ba=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(cr=!0),e.firstContext=null)}function $r(e){var t=e._currentValue;if(Gm!==e)if(e={context:e,memoizedValue:t,next:null},ba===null){if(zu===null)throw Error(V(308));ba=e,zu.dependencies={lanes:0,firstContext:e}}else ba=ba.next=e;return t}var mi=null;function Jm(e){mi===null?mi=[e]:mi.push(e)}function Kb(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Jm(t)):(r.next=s.next,s.next=r),t.interleaved=r,Kn(e,n)}function Kn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var fs=!1;function Xm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gb(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ms(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Fe&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Kn(e,r)}return s=n.interleaved,s===null?(t.next=t,Jm(n)):(t.next=s.next,s.next=t),n.interleaved=t,Kn(e,r)}function hu(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Lm(e,r)}}function Zy(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function qu(e,t,r,n){var s=e.updateQueue;fs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var p=l.lane,m=l.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,g=l;switch(p=t,m=r,g.tag){case 1:if(b=g.payload,typeof b=="function"){h=b.call(m,h,p);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=g.payload,p=typeof b=="function"?b.call(m,h,p):b,p==null)break e;h=at({},h,p);break e;case 2:fs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else m={eventTime:m,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Oi|=o,e.lanes=o,e.memoizedState=h}}function ex(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(V(191,s));s.call(n)}}}var nc={},kn=Ys(nc),Nl=Ys(nc),kl=Ys(nc);function gi(e){if(e===nc)throw Error(V(174));return e}function Zm(e,t){switch(Xe(kl,t),Xe(Nl,e),Xe(kn,nc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Bf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Bf(t,e)}tt(kn),Xe(kn,t)}function Za(){tt(kn),tt(Nl),tt(kl)}function Yb(e){gi(kl.current);var t=gi(kn.current),r=Bf(t,e.type);t!==r&&(Xe(Nl,e),Xe(kn,r))}function eg(e){Nl.current===e&&(tt(kn),tt(Nl))}var st=Ys(0);function Wu(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vh=[];function tg(){for(var e=0;e<Vh.length;e++)Vh[e]._workInProgressVersionPrimary=null;Vh.length=0}var fu=Xn.ReactCurrentDispatcher,Hh=Xn.ReactCurrentBatchConfig,Ii=0,it=null,_t=null,Ct=null,Vu=!1,il=!1,Cl=0,O2=0;function Ft(){throw Error(V(321))}function rg(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!sn(e[r],t[r]))return!1;return!0}function ng(e,t,r,n,s,i){if(Ii=i,it=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fu.current=e===null||e.memoizedState===null?$2:F2,e=r(n,s),il){i=0;do{if(il=!1,Cl=0,25<=i)throw Error(V(301));i+=1,Ct=_t=null,t.updateQueue=null,fu.current=U2,e=r(n,s)}while(il)}if(fu.current=Hu,t=_t!==null&&_t.next!==null,Ii=0,Ct=_t=it=null,Vu=!1,t)throw Error(V(300));return e}function sg(){var e=Cl!==0;return Cl=0,e}function yn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?it.memoizedState=Ct=e:Ct=Ct.next=e,Ct}function Fr(){if(_t===null){var e=it.alternate;e=e!==null?e.memoizedState:null}else e=_t.next;var t=Ct===null?it.memoizedState:Ct.next;if(t!==null)Ct=t,_t=e;else{if(e===null)throw Error(V(310));_t=e,e={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Ct===null?it.memoizedState=Ct=e:Ct=Ct.next=e}return Ct}function El(e,t){return typeof t=="function"?t(e):t}function Kh(e){var t=Fr(),r=t.queue;if(r===null)throw Error(V(311));r.lastRenderedReducer=e;var n=_t,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Ii&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,it.lanes|=d,Oi|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,sn(n,t.memoizedState)||(cr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,it.lanes|=i,Oi|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Gh(e){var t=Fr(),r=t.queue;if(r===null)throw Error(V(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);sn(i,t.memoizedState)||(cr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Qb(){}function Jb(e,t){var r=it,n=Fr(),s=t(),i=!sn(n.memoizedState,s);if(i&&(n.memoizedState=s,cr=!0),n=n.queue,ig(e_.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Ct!==null&&Ct.memoizedState.tag&1){if(r.flags|=2048,Tl(9,Zb.bind(null,r,n,s,t),void 0,null),Et===null)throw Error(V(349));Ii&30||Xb(r,t,s)}return s}function Xb(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=it.updateQueue,t===null?(t={lastEffect:null,stores:null},it.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Zb(e,t,r,n){t.value=r,t.getSnapshot=n,t_(t)&&r_(e)}function e_(e,t,r){return r(function(){t_(t)&&r_(e)})}function t_(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sn(e,r)}catch{return!0}}function r_(e){var t=Kn(e,1);t!==null&&nn(t,e,1,-1)}function tx(e){var t=yn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:e},t.queue=e,e=e.dispatch=L2.bind(null,it,e),[t.memoizedState,e]}function Tl(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=it.updateQueue,t===null?(t={lastEffect:null,stores:null},it.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function n_(){return Fr().memoizedState}function pu(e,t,r,n){var s=yn();it.flags|=e,s.memoizedState=Tl(1|t,r,void 0,n===void 0?null:n)}function Ed(e,t,r,n){var s=Fr();n=n===void 0?null:n;var i=void 0;if(_t!==null){var o=_t.memoizedState;if(i=o.destroy,n!==null&&rg(n,o.deps)){s.memoizedState=Tl(t,r,i,n);return}}it.flags|=e,s.memoizedState=Tl(1|t,r,i,n)}function rx(e,t){return pu(8390656,8,e,t)}function ig(e,t){return Ed(2048,8,e,t)}function s_(e,t){return Ed(4,2,e,t)}function i_(e,t){return Ed(4,4,e,t)}function a_(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function o_(e,t,r){return r=r!=null?r.concat([e]):null,Ed(4,4,a_.bind(null,t,e),r)}function ag(){}function l_(e,t){var r=Fr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&rg(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function c_(e,t){var r=Fr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&rg(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function u_(e,t,r){return Ii&21?(sn(r,t)||(r=mb(),it.lanes|=r,Oi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,cr=!0),e.memoizedState=r)}function M2(e,t){var r=He;He=r!==0&&4>r?r:4,e(!0);var n=Hh.transition;Hh.transition={};try{e(!1),t()}finally{He=r,Hh.transition=n}}function d_(){return Fr().memoizedState}function D2(e,t,r){var n=Ls(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},h_(e))f_(t,r);else if(r=Kb(e,t,r,n),r!==null){var s=Jt();nn(r,e,n,s),p_(r,t,n)}}function L2(e,t,r){var n=Ls(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(h_(e))f_(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,sn(l,o)){var c=t.interleaved;c===null?(s.next=s,Jm(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=Kb(e,t,s,n),r!==null&&(s=Jt(),nn(r,e,n,s),p_(r,t,n))}}function h_(e){var t=e.alternate;return e===it||t!==null&&t===it}function f_(e,t){il=Vu=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function p_(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Lm(e,r)}}var Hu={readContext:$r,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},$2={readContext:$r,useCallback:function(e,t){return yn().memoizedState=[e,t===void 0?null:t],e},useContext:$r,useEffect:rx,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,pu(4194308,4,a_.bind(null,t,e),r)},useLayoutEffect:function(e,t){return pu(4194308,4,e,t)},useInsertionEffect:function(e,t){return pu(4,2,e,t)},useMemo:function(e,t){var r=yn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=yn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=D2.bind(null,it,e),[n.memoizedState,e]},useRef:function(e){var t=yn();return e={current:e},t.memoizedState=e},useState:tx,useDebugValue:ag,useDeferredValue:function(e){return yn().memoizedState=e},useTransition:function(){var e=tx(!1),t=e[0];return e=M2.bind(null,e[1]),yn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=it,s=yn();if(rt){if(r===void 0)throw Error(V(407));r=r()}else{if(r=t(),Et===null)throw Error(V(349));Ii&30||Xb(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,rx(e_.bind(null,n,i,e),[e]),n.flags|=2048,Tl(9,Zb.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=yn(),t=Et.identifierPrefix;if(rt){var r=Bn,n=Un;r=(n&~(1<<32-rn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Cl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=O2++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},F2={readContext:$r,useCallback:l_,useContext:$r,useEffect:ig,useImperativeHandle:o_,useInsertionEffect:s_,useLayoutEffect:i_,useMemo:c_,useReducer:Kh,useRef:n_,useState:function(){return Kh(El)},useDebugValue:ag,useDeferredValue:function(e){var t=Fr();return u_(t,_t.memoizedState,e)},useTransition:function(){var e=Kh(El)[0],t=Fr().memoizedState;return[e,t]},useMutableSource:Qb,useSyncExternalStore:Jb,useId:d_,unstable_isNewReconciler:!1},U2={readContext:$r,useCallback:l_,useContext:$r,useEffect:ig,useImperativeHandle:o_,useInsertionEffect:s_,useLayoutEffect:i_,useMemo:c_,useReducer:Gh,useRef:n_,useState:function(){return Gh(El)},useDebugValue:ag,useDeferredValue:function(e){var t=Fr();return _t===null?t.memoizedState=e:u_(t,_t.memoizedState,e)},useTransition:function(){var e=Gh(El)[0],t=Fr().memoizedState;return[e,t]},useMutableSource:Qb,useSyncExternalStore:Jb,useId:d_,unstable_isNewReconciler:!1};function Yr(e,t){if(e&&e.defaultProps){t=at({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function lp(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:at({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Td={isMounted:function(e){return(e=e._reactInternals)?Vi(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Jt(),s=Ls(e),i=qn(n,s);i.payload=t,r!=null&&(i.callback=r),t=Ms(e,i,s),t!==null&&(nn(t,e,s,n),hu(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Jt(),s=Ls(e),i=qn(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Ms(e,i,s),t!==null&&(nn(t,e,s,n),hu(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Jt(),n=Ls(e),s=qn(r,n);s.tag=2,t!=null&&(s.callback=t),t=Ms(e,s,n),t!==null&&(nn(t,e,n,r),hu(t,e,n))}};function nx(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!bl(r,n)||!bl(s,i):!0}function m_(e,t,r){var n=!1,s=Ws,i=t.contextType;return typeof i=="object"&&i!==null?i=$r(i):(s=dr(t)?Pi:Ht.current,n=t.contextTypes,i=(n=n!=null)?Qa(e,s):Ws),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Td,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function sx(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Td.enqueueReplaceState(t,t.state,null)}function cp(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Xm(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=$r(i):(i=dr(t)?Pi:Ht.current,s.context=Qa(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(lp(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Td.enqueueReplaceState(s,s.state,null),qu(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function eo(e,t){try{var r="",n=t;do r+=pT(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Yh(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function up(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var B2=typeof WeakMap=="function"?WeakMap:Map;function g_(e,t,r){r=qn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Gu||(Gu=!0,wp=n),up(e,t)},r}function v_(e,t,r){r=qn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){up(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){up(e,t),typeof n!="function"&&(Ds===null?Ds=new Set([this]):Ds.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function ix(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new B2;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=tR.bind(null,e,t,r),t.then(e,e))}function ax(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ox(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=qn(-1,1),t.tag=2,Ms(r,t,1))),r.lanes|=1),e)}var z2=Xn.ReactCurrentOwner,cr=!1;function Yt(e,t,r,n){t.child=e===null?Hb(t,null,r,n):Xa(t,e.child,r,n)}function lx(e,t,r,n,s){r=r.render;var i=t.ref;return Ta(t,s),n=ng(e,t,r,n,i,s),r=sg(),e!==null&&!cr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Gn(e,t,s)):(rt&&r&&Vm(t),t.flags|=1,Yt(e,t,n,s),t.child)}function cx(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!pg(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,y_(e,t,i,n,s)):(e=yu(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:bl,r(o,n)&&e.ref===t.ref)return Gn(e,t,s)}return t.flags|=1,e=$s(i,n),e.ref=t.ref,e.return=t,t.child=e}function y_(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(bl(i,n)&&e.ref===t.ref)if(cr=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(cr=!0);else return t.lanes=e.lanes,Gn(e,t,s)}return dp(e,t,r,n,s)}function x_(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(ja,mr),mr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Xe(ja,mr),mr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Xe(ja,mr),mr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Xe(ja,mr),mr|=n;return Yt(e,t,s,r),t.child}function w_(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function dp(e,t,r,n,s){var i=dr(r)?Pi:Ht.current;return i=Qa(t,i),Ta(t,s),r=ng(e,t,r,n,i,s),n=sg(),e!==null&&!cr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Gn(e,t,s)):(rt&&n&&Vm(t),t.flags|=1,Yt(e,t,r,s),t.child)}function ux(e,t,r,n,s){if(dr(r)){var i=!0;$u(t)}else i=!1;if(Ta(t,s),t.stateNode===null)mu(e,t),m_(t,r,n),cp(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=$r(u):(u=dr(r)?Pi:Ht.current,u=Qa(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&sx(t,o,n,u),fs=!1;var p=t.memoizedState;o.state=p,qu(t,n,o,s),c=t.memoizedState,l!==n||p!==c||ur.current||fs?(typeof d=="function"&&(lp(t,r,d,n),c=t.memoizedState),(l=fs||nx(t,r,l,n,p,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Gb(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Yr(t.type,l),o.props=u,h=t.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=$r(c):(c=dr(r)?Pi:Ht.current,c=Qa(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||p!==c)&&sx(t,o,n,c),fs=!1,p=t.memoizedState,o.state=p,qu(t,n,o,s);var b=t.memoizedState;l!==h||p!==b||ur.current||fs?(typeof m=="function"&&(lp(t,r,m,n),b=t.memoizedState),(u=fs||nx(t,r,u,n,p,b,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,b,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=b),o.props=n,o.state=b,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return hp(e,t,r,n,i,s)}function hp(e,t,r,n,s,i){w_(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&Yy(t,r,!1),Gn(e,t,i);n=t.stateNode,z2.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Xa(t,e.child,null,i),t.child=Xa(t,null,l,i)):Yt(e,t,l,i),t.memoizedState=n.state,s&&Yy(t,r,!0),t.child}function b_(e){var t=e.stateNode;t.pendingContext?Gy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Gy(e,t.context,!1),Zm(e,t.containerInfo)}function dx(e,t,r,n,s){return Ja(),Km(s),t.flags|=256,Yt(e,t,r,n),t.child}var fp={dehydrated:null,treeContext:null,retryLane:0};function pp(e){return{baseLanes:e,cachePool:null,transitions:null}}function __(e,t,r){var n=t.pendingProps,s=st.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Xe(st,s&1),e===null)return ap(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ad(o,n,0,null),e=Ti(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=pp(r),t.memoizedState=fp,e):og(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return q2(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=$s(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=$s(l,i):(i=Ti(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?pp(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=fp,n}return i=e.child,e=i.sibling,n=$s(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function og(e,t){return t=Ad({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bc(e,t,r,n){return n!==null&&Km(n),Xa(t,e.child,null,r),e=og(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function q2(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Yh(Error(V(422))),Bc(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Ad({mode:"visible",children:n.children},s,0,null),i=Ti(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Xa(t,e.child,null,o),t.child.memoizedState=pp(o),t.memoizedState=fp,i);if(!(t.mode&1))return Bc(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(V(419)),n=Yh(i,n,void 0),Bc(e,t,o,n)}if(l=(o&e.childLanes)!==0,cr||l){if(n=Et,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Kn(e,s),nn(n,e,s,-1))}return fg(),n=Yh(Error(V(421))),Bc(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=rR.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,wr=Os(s.nextSibling),br=t,rt=!0,tn=null,e!==null&&(Tr[Rr++]=Un,Tr[Rr++]=Bn,Tr[Rr++]=Ai,Un=e.id,Bn=e.overflow,Ai=t),t=og(t,n.children),t.flags|=4096,t)}function hx(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),op(e.return,t,r)}function Qh(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function j_(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Yt(e,t,n.children,r),n=st.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hx(e,r,t);else if(e.tag===19)hx(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Xe(st,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Wu(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Qh(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Wu(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Qh(t,!0,r,null,i);break;case"together":Qh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function mu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Oi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(V(153));if(t.child!==null){for(e=t.child,r=$s(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=$s(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function W2(e,t,r){switch(t.tag){case 3:b_(t),Ja();break;case 5:Yb(t);break;case 1:dr(t.type)&&$u(t);break;case 4:Zm(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Xe(Bu,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Xe(st,st.current&1),t.flags|=128,null):r&t.child.childLanes?__(e,t,r):(Xe(st,st.current&1),e=Gn(e,t,r),e!==null?e.sibling:null);Xe(st,st.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return j_(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Xe(st,st.current),n)break;return null;case 22:case 23:return t.lanes=0,x_(e,t,r)}return Gn(e,t,r)}var S_,mp,N_,k_;S_=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};mp=function(){};N_=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,gi(kn.current);var i=null;switch(r){case"input":s=Lf(e,s),n=Lf(e,n),i=[];break;case"select":s=at({},s,{value:void 0}),n=at({},n,{value:void 0}),i=[];break;case"textarea":s=Uf(e,s),n=Uf(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Du)}zf(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(pl.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(pl.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&et("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};k_=function(e,t,r,n){r!==n&&(t.flags|=4)};function Lo(e,t){if(!rt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function V2(e,t,r){var n=t.pendingProps;switch(Hm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(t),null;case 1:return dr(t.type)&&Lu(),Ut(t),null;case 3:return n=t.stateNode,Za(),tt(ur),tt(Ht),tg(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Fc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,tn!==null&&(jp(tn),tn=null))),mp(e,t),Ut(t),null;case 5:eg(t);var s=gi(kl.current);if(r=t.type,e!==null&&t.stateNode!=null)N_(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(V(166));return Ut(t),null}if(e=gi(kn.current),Fc(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[_n]=t,n[Sl]=i,e=(t.mode&1)!==0,r){case"dialog":et("cancel",n),et("close",n);break;case"iframe":case"object":case"embed":et("load",n);break;case"video":case"audio":for(s=0;s<Yo.length;s++)et(Yo[s],n);break;case"source":et("error",n);break;case"img":case"image":case"link":et("error",n),et("load",n);break;case"details":et("toggle",n);break;case"input":by(n,i),et("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},et("invalid",n);break;case"textarea":jy(n,i),et("invalid",n)}zf(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&$c(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&$c(n.textContent,l,e),s=["children",""+l]):pl.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&et("scroll",n)}switch(r){case"input":Rc(n),_y(n,i,!0);break;case"textarea":Rc(n),Sy(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Du)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=eb(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[_n]=t,e[Sl]=n,S_(e,t,!1,!1),t.stateNode=e;e:{switch(o=qf(r,n),r){case"dialog":et("cancel",e),et("close",e),s=n;break;case"iframe":case"object":case"embed":et("load",e),s=n;break;case"video":case"audio":for(s=0;s<Yo.length;s++)et(Yo[s],e);s=n;break;case"source":et("error",e),s=n;break;case"img":case"image":case"link":et("error",e),et("load",e),s=n;break;case"details":et("toggle",e),s=n;break;case"input":by(e,n),s=Lf(e,n),et("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=at({},n,{value:void 0}),et("invalid",e);break;case"textarea":jy(e,n),s=Uf(e,n),et("invalid",e);break;default:s=n}zf(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?nb(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&tb(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ml(e,c):typeof c=="number"&&ml(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(pl.hasOwnProperty(i)?c!=null&&i==="onScroll"&&et("scroll",e):c!=null&&Pm(e,i,c,o))}switch(r){case"input":Rc(e),_y(e,n,!1);break;case"textarea":Rc(e),Sy(e);break;case"option":n.value!=null&&e.setAttribute("value",""+qs(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Na(e,!!n.multiple,i,!1):n.defaultValue!=null&&Na(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Du)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ut(t),null;case 6:if(e&&t.stateNode!=null)k_(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(V(166));if(r=gi(kl.current),gi(kn.current),Fc(t)){if(n=t.stateNode,r=t.memoizedProps,n[_n]=t,(i=n.nodeValue!==r)&&(e=br,e!==null))switch(e.tag){case 3:$c(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$c(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[_n]=t,t.stateNode=n}return Ut(t),null;case 13:if(tt(st),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(rt&&wr!==null&&t.mode&1&&!(t.flags&128))Wb(),Ja(),t.flags|=98560,i=!1;else if(i=Fc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(V(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(V(317));i[_n]=t}else Ja(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ut(t),i=!1}else tn!==null&&(jp(tn),tn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||st.current&1?St===0&&(St=3):fg())),t.updateQueue!==null&&(t.flags|=4),Ut(t),null);case 4:return Za(),mp(e,t),e===null&&_l(t.stateNode.containerInfo),Ut(t),null;case 10:return Qm(t.type._context),Ut(t),null;case 17:return dr(t.type)&&Lu(),Ut(t),null;case 19:if(tt(st),i=t.memoizedState,i===null)return Ut(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Lo(i,!1);else{if(St!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Wu(e),o!==null){for(t.flags|=128,Lo(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Xe(st,st.current&1|2),t.child}e=e.sibling}i.tail!==null&&ft()>to&&(t.flags|=128,n=!0,Lo(i,!1),t.lanes=4194304)}else{if(!n)if(e=Wu(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Lo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!rt)return Ut(t),null}else 2*ft()-i.renderingStartTime>to&&r!==1073741824&&(t.flags|=128,n=!0,Lo(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ft(),t.sibling=null,r=st.current,Xe(st,n?r&1|2:r&1),t):(Ut(t),null);case 22:case 23:return hg(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?mr&1073741824&&(Ut(t),t.subtreeFlags&6&&(t.flags|=8192)):Ut(t),null;case 24:return null;case 25:return null}throw Error(V(156,t.tag))}function H2(e,t){switch(Hm(t),t.tag){case 1:return dr(t.type)&&Lu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Za(),tt(ur),tt(Ht),tg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return eg(t),null;case 13:if(tt(st),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(V(340));Ja()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return tt(st),null;case 4:return Za(),null;case 10:return Qm(t.type._context),null;case 22:case 23:return hg(),null;case 24:return null;default:return null}}var zc=!1,zt=!1,K2=typeof WeakSet=="function"?WeakSet:Set,ae=null;function _a(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ut(e,t,n)}else r.current=null}function gp(e,t,r){try{r()}catch(n){ut(e,t,n)}}var fx=!1;function G2(e,t){if(Zf=Iu,e=Pb(),Wm(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===e)break t;if(p===r&&++u===s&&(l=o),p===i&&++d===n&&(c=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ep={focusedElem:e,selectionRange:r},Iu=!1,ae=t;ae!==null;)if(t=ae,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ae=e;else for(;ae!==null;){t=ae;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var g=b.memoizedProps,v=b.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:Yr(t.type,g),v);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(_){ut(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,ae=e;break}ae=t.return}return b=fx,fx=!1,b}function al(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&gp(t,r,i)}s=s.next}while(s!==n)}}function Rd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function vp(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function C_(e){var t=e.alternate;t!==null&&(e.alternate=null,C_(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_n],delete t[Sl],delete t[np],delete t[R2],delete t[P2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function E_(e){return e.tag===5||e.tag===3||e.tag===4}function px(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||E_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Du));else if(n!==4&&(e=e.child,e!==null))for(yp(e,t,r),e=e.sibling;e!==null;)yp(e,t,r),e=e.sibling}function xp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(xp(e,t,r),e=e.sibling;e!==null;)xp(e,t,r),e=e.sibling}var Pt=null,Zr=!1;function as(e,t,r){for(r=r.child;r!==null;)T_(e,t,r),r=r.sibling}function T_(e,t,r){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(_d,r)}catch{}switch(r.tag){case 5:zt||_a(r,t);case 6:var n=Pt,s=Zr;Pt=null,as(e,t,r),Pt=n,Zr=s,Pt!==null&&(Zr?(e=Pt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Pt.removeChild(r.stateNode));break;case 18:Pt!==null&&(Zr?(e=Pt,r=r.stateNode,e.nodeType===8?qh(e.parentNode,r):e.nodeType===1&&qh(e,r),xl(e)):qh(Pt,r.stateNode));break;case 4:n=Pt,s=Zr,Pt=r.stateNode.containerInfo,Zr=!0,as(e,t,r),Pt=n,Zr=s;break;case 0:case 11:case 14:case 15:if(!zt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&gp(r,t,o),s=s.next}while(s!==n)}as(e,t,r);break;case 1:if(!zt&&(_a(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ut(r,t,l)}as(e,t,r);break;case 21:as(e,t,r);break;case 22:r.mode&1?(zt=(n=zt)||r.memoizedState!==null,as(e,t,r),zt=n):as(e,t,r);break;default:as(e,t,r)}}function mx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new K2),t.forEach(function(n){var s=nR.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Vr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Pt=l.stateNode,Zr=!1;break e;case 3:Pt=l.stateNode.containerInfo,Zr=!0;break e;case 4:Pt=l.stateNode.containerInfo,Zr=!0;break e}l=l.return}if(Pt===null)throw Error(V(160));T_(i,o,s),Pt=null,Zr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ut(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)R_(t,e),t=t.sibling}function R_(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vr(t,e),vn(e),n&4){try{al(3,e,e.return),Rd(3,e)}catch(g){ut(e,e.return,g)}try{al(5,e,e.return)}catch(g){ut(e,e.return,g)}}break;case 1:Vr(t,e),vn(e),n&512&&r!==null&&_a(r,r.return);break;case 5:if(Vr(t,e),vn(e),n&512&&r!==null&&_a(r,r.return),e.flags&32){var s=e.stateNode;try{ml(s,"")}catch(g){ut(e,e.return,g)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&X0(s,i),qf(l,o);var u=qf(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?nb(s,h):d==="dangerouslySetInnerHTML"?tb(s,h):d==="children"?ml(s,h):Pm(s,d,h,u)}switch(l){case"input":$f(s,i);break;case"textarea":Z0(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Na(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?Na(s,!!i.multiple,i.defaultValue,!0):Na(s,!!i.multiple,i.multiple?[]:"",!1))}s[Sl]=i}catch(g){ut(e,e.return,g)}}break;case 6:if(Vr(t,e),vn(e),n&4){if(e.stateNode===null)throw Error(V(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(g){ut(e,e.return,g)}}break;case 3:if(Vr(t,e),vn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{xl(t.containerInfo)}catch(g){ut(e,e.return,g)}break;case 4:Vr(t,e),vn(e);break;case 13:Vr(t,e),vn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ug=ft())),n&4&&mx(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(zt=(u=zt)||d,Vr(t,e),zt=u):Vr(t,e),vn(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(ae=e,d=e.child;d!==null;){for(h=ae=d;ae!==null;){switch(p=ae,m=p.child,p.tag){case 0:case 11:case 14:case 15:al(4,p,p.return);break;case 1:_a(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(g){ut(n,r,g)}}break;case 5:_a(p,p.return);break;case 22:if(p.memoizedState!==null){vx(h);continue}}m!==null?(m.return=p,ae=m):vx(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=rb("display",o))}catch(g){ut(e,e.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){ut(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Vr(t,e),vn(e),n&4&&mx(e);break;case 21:break;default:Vr(t,e),vn(e)}}function vn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(E_(r)){var n=r;break e}r=r.return}throw Error(V(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(ml(s,""),n.flags&=-33);var i=px(e);xp(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=px(e);yp(e,l,o);break;default:throw Error(V(161))}}catch(c){ut(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Y2(e,t,r){ae=e,P_(e)}function P_(e,t,r){for(var n=(e.mode&1)!==0;ae!==null;){var s=ae,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||zc;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||zt;l=zc;var u=zt;if(zc=o,(zt=c)&&!u)for(ae=s;ae!==null;)o=ae,c=o.child,o.tag===22&&o.memoizedState!==null?yx(s):c!==null?(c.return=o,ae=c):yx(s);for(;i!==null;)ae=i,P_(i),i=i.sibling;ae=s,zc=l,zt=u}gx(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ae=i):gx(e)}}function gx(e){for(;ae!==null;){var t=ae;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:zt||Rd(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!zt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Yr(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&ex(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}ex(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&xl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}zt||t.flags&512&&vp(t)}catch(p){ut(t,t.return,p)}}if(t===e){ae=null;break}if(r=t.sibling,r!==null){r.return=t.return,ae=r;break}ae=t.return}}function vx(e){for(;ae!==null;){var t=ae;if(t===e){ae=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ae=r;break}ae=t.return}}function yx(e){for(;ae!==null;){var t=ae;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Rd(4,t)}catch(c){ut(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){ut(t,s,c)}}var i=t.return;try{vp(t)}catch(c){ut(t,i,c)}break;case 5:var o=t.return;try{vp(t)}catch(c){ut(t,o,c)}}}catch(c){ut(t,t.return,c)}if(t===e){ae=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ae=l;break}ae=t.return}}var Q2=Math.ceil,Ku=Xn.ReactCurrentDispatcher,lg=Xn.ReactCurrentOwner,Or=Xn.ReactCurrentBatchConfig,Fe=0,Et=null,xt=null,At=0,mr=0,ja=Ys(0),St=0,Rl=null,Oi=0,Pd=0,cg=0,ol=null,lr=null,ug=0,to=1/0,Mn=null,Gu=!1,wp=null,Ds=null,qc=!1,Ts=null,Yu=0,ll=0,bp=null,gu=-1,vu=0;function Jt(){return Fe&6?ft():gu!==-1?gu:gu=ft()}function Ls(e){return e.mode&1?Fe&2&&At!==0?At&-At:I2.transition!==null?(vu===0&&(vu=mb()),vu):(e=He,e!==0||(e=window.event,e=e===void 0?16:_b(e.type)),e):1}function nn(e,t,r,n){if(50<ll)throw ll=0,bp=null,Error(V(185));ec(e,r,n),(!(Fe&2)||e!==Et)&&(e===Et&&(!(Fe&2)&&(Pd|=r),St===4&&gs(e,At)),hr(e,n),r===1&&Fe===0&&!(t.mode&1)&&(to=ft()+500,Cd&&Qs()))}function hr(e,t){var r=e.callbackNode;IT(e,t);var n=Au(e,e===Et?At:0);if(n===0)r!==null&&Cy(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Cy(r),t===1)e.tag===0?A2(xx.bind(null,e)):Bb(xx.bind(null,e)),E2(function(){!(Fe&6)&&Qs()}),r=null;else{switch(gb(n)){case 1:r=Dm;break;case 4:r=fb;break;case 16:r=Pu;break;case 536870912:r=pb;break;default:r=Pu}r=F_(r,A_.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function A_(e,t){if(gu=-1,vu=0,Fe&6)throw Error(V(327));var r=e.callbackNode;if(Ra()&&e.callbackNode!==r)return null;var n=Au(e,e===Et?At:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Qu(e,n);else{t=n;var s=Fe;Fe|=2;var i=O_();(Et!==e||At!==t)&&(Mn=null,to=ft()+500,Ei(e,t));do try{Z2();break}catch(l){I_(e,l)}while(!0);Ym(),Ku.current=i,Fe=s,xt!==null?t=0:(Et=null,At=0,t=St)}if(t!==0){if(t===2&&(s=Gf(e),s!==0&&(n=s,t=_p(e,s))),t===1)throw r=Rl,Ei(e,0),gs(e,n),hr(e,ft()),r;if(t===6)gs(e,n);else{if(s=e.current.alternate,!(n&30)&&!J2(s)&&(t=Qu(e,n),t===2&&(i=Gf(e),i!==0&&(n=i,t=_p(e,i))),t===1))throw r=Rl,Ei(e,0),gs(e,n),hr(e,ft()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(V(345));case 2:ci(e,lr,Mn);break;case 3:if(gs(e,n),(n&130023424)===n&&(t=ug+500-ft(),10<t)){if(Au(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Jt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rp(ci.bind(null,e,lr,Mn),t);break}ci(e,lr,Mn);break;case 4:if(gs(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-rn(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=ft()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Q2(n/1960))-n,10<n){e.timeoutHandle=rp(ci.bind(null,e,lr,Mn),n);break}ci(e,lr,Mn);break;case 5:ci(e,lr,Mn);break;default:throw Error(V(329))}}}return hr(e,ft()),e.callbackNode===r?A_.bind(null,e):null}function _p(e,t){var r=ol;return e.current.memoizedState.isDehydrated&&(Ei(e,t).flags|=256),e=Qu(e,t),e!==2&&(t=lr,lr=r,t!==null&&jp(t)),e}function jp(e){lr===null?lr=e:lr.push.apply(lr,e)}function J2(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!sn(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gs(e,t){for(t&=~cg,t&=~Pd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-rn(t),n=1<<r;e[r]=-1,t&=~n}}function xx(e){if(Fe&6)throw Error(V(327));Ra();var t=Au(e,0);if(!(t&1))return hr(e,ft()),null;var r=Qu(e,t);if(e.tag!==0&&r===2){var n=Gf(e);n!==0&&(t=n,r=_p(e,n))}if(r===1)throw r=Rl,Ei(e,0),gs(e,t),hr(e,ft()),r;if(r===6)throw Error(V(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ci(e,lr,Mn),hr(e,ft()),null}function dg(e,t){var r=Fe;Fe|=1;try{return e(t)}finally{Fe=r,Fe===0&&(to=ft()+500,Cd&&Qs())}}function Mi(e){Ts!==null&&Ts.tag===0&&!(Fe&6)&&Ra();var t=Fe;Fe|=1;var r=Or.transition,n=He;try{if(Or.transition=null,He=1,e)return e()}finally{He=n,Or.transition=r,Fe=t,!(Fe&6)&&Qs()}}function hg(){mr=ja.current,tt(ja)}function Ei(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,C2(r)),xt!==null)for(r=xt.return;r!==null;){var n=r;switch(Hm(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Lu();break;case 3:Za(),tt(ur),tt(Ht),tg();break;case 5:eg(n);break;case 4:Za();break;case 13:tt(st);break;case 19:tt(st);break;case 10:Qm(n.type._context);break;case 22:case 23:hg()}r=r.return}if(Et=e,xt=e=$s(e.current,null),At=mr=t,St=0,Rl=null,cg=Pd=Oi=0,lr=ol=null,mi!==null){for(t=0;t<mi.length;t++)if(r=mi[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}mi=null}return e}function I_(e,t){do{var r=xt;try{if(Ym(),fu.current=Hu,Vu){for(var n=it.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Vu=!1}if(Ii=0,Ct=_t=it=null,il=!1,Cl=0,lg.current=null,r===null||r.return===null){St=1,Rl=t,xt=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=At,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=ax(o);if(m!==null){m.flags&=-257,ox(m,o,l,i,t),m.mode&1&&ix(i,u,t),t=m,c=u;var b=t.updateQueue;if(b===null){var g=new Set;g.add(c),t.updateQueue=g}else b.add(c);break e}else{if(!(t&1)){ix(i,u,t),fg();break e}c=Error(V(426))}}else if(rt&&l.mode&1){var v=ax(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),ox(v,o,l,i,t),Km(eo(c,l));break e}}i=c=eo(c,l),St!==4&&(St=2),ol===null?ol=[i]:ol.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=g_(i,c,t);Zy(i,x);break e;case 1:l=c;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ds===null||!Ds.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=v_(i,l,t);Zy(i,_);break e}}i=i.return}while(i!==null)}D_(r)}catch(j){t=j,xt===r&&r!==null&&(xt=r=r.return);continue}break}while(!0)}function O_(){var e=Ku.current;return Ku.current=Hu,e===null?Hu:e}function fg(){(St===0||St===3||St===2)&&(St=4),Et===null||!(Oi&268435455)&&!(Pd&268435455)||gs(Et,At)}function Qu(e,t){var r=Fe;Fe|=2;var n=O_();(Et!==e||At!==t)&&(Mn=null,Ei(e,t));do try{X2();break}catch(s){I_(e,s)}while(!0);if(Ym(),Fe=r,Ku.current=n,xt!==null)throw Error(V(261));return Et=null,At=0,St}function X2(){for(;xt!==null;)M_(xt)}function Z2(){for(;xt!==null&&!ST();)M_(xt)}function M_(e){var t=$_(e.alternate,e,mr);e.memoizedProps=e.pendingProps,t===null?D_(e):xt=t,lg.current=null}function D_(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=H2(r,t),r!==null){r.flags&=32767,xt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{St=6,xt=null;return}}else if(r=V2(r,t,mr),r!==null){xt=r;return}if(t=t.sibling,t!==null){xt=t;return}xt=t=e}while(t!==null);St===0&&(St=5)}function ci(e,t,r){var n=He,s=Or.transition;try{Or.transition=null,He=1,eR(e,t,r,n)}finally{Or.transition=s,He=n}return null}function eR(e,t,r,n){do Ra();while(Ts!==null);if(Fe&6)throw Error(V(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(V(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(OT(e,i),e===Et&&(xt=Et=null,At=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||qc||(qc=!0,F_(Pu,function(){return Ra(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Or.transition,Or.transition=null;var o=He;He=1;var l=Fe;Fe|=4,lg.current=null,G2(e,r),R_(r,e),w2(ep),Iu=!!Zf,ep=Zf=null,e.current=r,Y2(r),NT(),Fe=l,He=o,Or.transition=i}else e.current=r;if(qc&&(qc=!1,Ts=e,Yu=s),i=e.pendingLanes,i===0&&(Ds=null),ET(r.stateNode),hr(e,ft()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Gu)throw Gu=!1,e=wp,wp=null,e;return Yu&1&&e.tag!==0&&Ra(),i=e.pendingLanes,i&1?e===bp?ll++:(ll=0,bp=e):ll=0,Qs(),null}function Ra(){if(Ts!==null){var e=gb(Yu),t=Or.transition,r=He;try{if(Or.transition=null,He=16>e?16:e,Ts===null)var n=!1;else{if(e=Ts,Ts=null,Yu=0,Fe&6)throw Error(V(331));var s=Fe;for(Fe|=4,ae=e.current;ae!==null;){var i=ae,o=i.child;if(ae.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ae=u;ae!==null;){var d=ae;switch(d.tag){case 0:case 11:case 15:al(8,d,i)}var h=d.child;if(h!==null)h.return=d,ae=h;else for(;ae!==null;){d=ae;var p=d.sibling,m=d.return;if(C_(d),d===u){ae=null;break}if(p!==null){p.return=m,ae=p;break}ae=m}}}var b=i.alternate;if(b!==null){var g=b.child;if(g!==null){b.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}ae=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ae=o;else e:for(;ae!==null;){if(i=ae,i.flags&2048)switch(i.tag){case 0:case 11:case 15:al(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,ae=x;break e}ae=i.return}}var y=e.current;for(ae=y;ae!==null;){o=ae;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ae=w;else e:for(o=y;ae!==null;){if(l=ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Rd(9,l)}}catch(j){ut(l,l.return,j)}if(l===o){ae=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,ae=_;break e}ae=l.return}}if(Fe=s,Qs(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(_d,e)}catch{}n=!0}return n}finally{He=r,Or.transition=t}}return!1}function wx(e,t,r){t=eo(r,t),t=g_(e,t,1),e=Ms(e,t,1),t=Jt(),e!==null&&(ec(e,1,t),hr(e,t))}function ut(e,t,r){if(e.tag===3)wx(e,e,r);else for(;t!==null;){if(t.tag===3){wx(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ds===null||!Ds.has(n))){e=eo(r,e),e=v_(t,e,1),t=Ms(t,e,1),e=Jt(),t!==null&&(ec(t,1,e),hr(t,e));break}}t=t.return}}function tR(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Jt(),e.pingedLanes|=e.suspendedLanes&r,Et===e&&(At&r)===r&&(St===4||St===3&&(At&130023424)===At&&500>ft()-ug?Ei(e,0):cg|=r),hr(e,t)}function L_(e,t){t===0&&(e.mode&1?(t=Ic,Ic<<=1,!(Ic&130023424)&&(Ic=4194304)):t=1);var r=Jt();e=Kn(e,t),e!==null&&(ec(e,t,r),hr(e,r))}function rR(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),L_(e,r)}function nR(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(V(314))}n!==null&&n.delete(t),L_(e,r)}var $_;$_=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ur.current)cr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return cr=!1,W2(e,t,r);cr=!!(e.flags&131072)}else cr=!1,rt&&t.flags&1048576&&zb(t,Uu,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;mu(e,t),e=t.pendingProps;var s=Qa(t,Ht.current);Ta(t,r),s=ng(null,t,n,e,s,r);var i=sg();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dr(n)?(i=!0,$u(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Xm(t),s.updater=Td,t.stateNode=s,s._reactInternals=t,cp(t,n,e,r),t=hp(null,t,n,!0,i,r)):(t.tag=0,rt&&i&&Vm(t),Yt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(mu(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=iR(n),e=Yr(n,e),s){case 0:t=dp(null,t,n,e,r);break e;case 1:t=ux(null,t,n,e,r);break e;case 11:t=lx(null,t,n,e,r);break e;case 14:t=cx(null,t,n,Yr(n.type,e),r);break e}throw Error(V(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Yr(n,s),dp(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Yr(n,s),ux(e,t,n,s,r);case 3:e:{if(b_(t),e===null)throw Error(V(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Gb(e,t),qu(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=eo(Error(V(423)),t),t=dx(e,t,n,r,s);break e}else if(n!==s){s=eo(Error(V(424)),t),t=dx(e,t,n,r,s);break e}else for(wr=Os(t.stateNode.containerInfo.firstChild),br=t,rt=!0,tn=null,r=Hb(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ja(),n===s){t=Gn(e,t,r);break e}Yt(e,t,n,r)}t=t.child}return t;case 5:return Yb(t),e===null&&ap(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,tp(n,s)?o=null:i!==null&&tp(n,i)&&(t.flags|=32),w_(e,t),Yt(e,t,o,r),t.child;case 6:return e===null&&ap(t),null;case 13:return __(e,t,r);case 4:return Zm(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Xa(t,null,n,r):Yt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Yr(n,s),lx(e,t,n,s,r);case 7:return Yt(e,t,t.pendingProps,r),t.child;case 8:return Yt(e,t,t.pendingProps.children,r),t.child;case 12:return Yt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Xe(Bu,n._currentValue),n._currentValue=o,i!==null)if(sn(i.value,o)){if(i.children===s.children&&!ur.current){t=Gn(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=qn(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),op(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(V(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),op(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Yt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Ta(t,r),s=$r(s),n=n(s),t.flags|=1,Yt(e,t,n,r),t.child;case 14:return n=t.type,s=Yr(n,t.pendingProps),s=Yr(n.type,s),cx(e,t,n,s,r);case 15:return y_(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Yr(n,s),mu(e,t),t.tag=1,dr(n)?(e=!0,$u(t)):e=!1,Ta(t,r),m_(t,n,s),cp(t,n,s,r),hp(null,t,n,!0,e,r);case 19:return j_(e,t,r);case 22:return x_(e,t,r)}throw Error(V(156,t.tag))};function F_(e,t){return hb(e,t)}function sR(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(e,t,r,n){return new sR(e,t,r,n)}function pg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function iR(e){if(typeof e=="function")return pg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Im)return 11;if(e===Om)return 14}return 2}function $s(e,t){var r=e.alternate;return r===null?(r=Pr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function yu(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")pg(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case fa:return Ti(r.children,s,i,t);case Am:o=8,s|=8;break;case If:return e=Pr(12,r,t,s|2),e.elementType=If,e.lanes=i,e;case Of:return e=Pr(13,r,t,s),e.elementType=Of,e.lanes=i,e;case Mf:return e=Pr(19,r,t,s),e.elementType=Mf,e.lanes=i,e;case Y0:return Ad(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case K0:o=10;break e;case G0:o=9;break e;case Im:o=11;break e;case Om:o=14;break e;case hs:o=16,n=null;break e}throw Error(V(130,e==null?e:typeof e,""))}return t=Pr(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Ti(e,t,r,n){return e=Pr(7,e,n,t),e.lanes=r,e}function Ad(e,t,r,n){return e=Pr(22,e,n,t),e.elementType=Y0,e.lanes=r,e.stateNode={isHidden:!1},e}function Jh(e,t,r){return e=Pr(6,e,null,t),e.lanes=r,e}function Xh(e,t,r){return t=Pr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function aR(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ah(0),this.expirationTimes=Ah(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ah(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function mg(e,t,r,n,s,i,o,l,c){return e=new aR(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Pr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xm(i),e}function oR(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ha,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function U_(e){if(!e)return Ws;e=e._reactInternals;e:{if(Vi(e)!==e||e.tag!==1)throw Error(V(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(V(171))}if(e.tag===1){var r=e.type;if(dr(r))return Ub(e,r,t)}return t}function B_(e,t,r,n,s,i,o,l,c){return e=mg(r,n,!0,e,s,i,o,l,c),e.context=U_(null),r=e.current,n=Jt(),s=Ls(r),i=qn(n,s),i.callback=t??null,Ms(r,i,s),e.current.lanes=s,ec(e,s,n),hr(e,n),e}function Id(e,t,r,n){var s=t.current,i=Jt(),o=Ls(s);return r=U_(r),t.context===null?t.context=r:t.pendingContext=r,t=qn(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ms(s,t,o),e!==null&&(nn(e,s,o,i),hu(e,s,o)),o}function Ju(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function bx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function gg(e,t){bx(e,t),(e=e.alternate)&&bx(e,t)}function lR(){return null}var z_=typeof reportError=="function"?reportError:function(e){console.error(e)};function vg(e){this._internalRoot=e}Od.prototype.render=vg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(V(409));Id(e,t,null,null)};Od.prototype.unmount=vg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Mi(function(){Id(null,e,null,null)}),t[Hn]=null}};function Od(e){this._internalRoot=e}Od.prototype.unstable_scheduleHydration=function(e){if(e){var t=xb();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ms.length&&t!==0&&t<ms[r].priority;r++);ms.splice(r,0,e),r===0&&bb(e)}};function yg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Md(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _x(){}function cR(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Ju(o);i.call(u)}}var o=B_(t,n,e,0,null,!1,!1,"",_x);return e._reactRootContainer=o,e[Hn]=o.current,_l(e.nodeType===8?e.parentNode:e),Mi(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Ju(c);l.call(u)}}var c=mg(e,0,!1,null,null,!1,!1,"",_x);return e._reactRootContainer=c,e[Hn]=c.current,_l(e.nodeType===8?e.parentNode:e),Mi(function(){Id(t,c,r,n)}),c}function Dd(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Ju(o);l.call(c)}}Id(t,o,e,s)}else o=cR(r,t,e,s,n);return Ju(o)}vb=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Go(t.pendingLanes);r!==0&&(Lm(t,r|1),hr(t,ft()),!(Fe&6)&&(to=ft()+500,Qs()))}break;case 13:Mi(function(){var n=Kn(e,1);if(n!==null){var s=Jt();nn(n,e,1,s)}}),gg(e,1)}};$m=function(e){if(e.tag===13){var t=Kn(e,134217728);if(t!==null){var r=Jt();nn(t,e,134217728,r)}gg(e,134217728)}};yb=function(e){if(e.tag===13){var t=Ls(e),r=Kn(e,t);if(r!==null){var n=Jt();nn(r,e,t,n)}gg(e,t)}};xb=function(){return He};wb=function(e,t){var r=He;try{return He=e,t()}finally{He=r}};Vf=function(e,t,r){switch(t){case"input":if($f(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=kd(n);if(!s)throw Error(V(90));J0(n),$f(n,s)}}}break;case"textarea":Z0(e,r);break;case"select":t=r.value,t!=null&&Na(e,!!r.multiple,t,!1)}};ab=dg;ob=Mi;var uR={usingClientEntryPoint:!1,Events:[rc,va,kd,sb,ib,dg]},$o={findFiberByHostInstance:pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dR={bundleType:$o.bundleType,version:$o.version,rendererPackageName:$o.rendererPackageName,rendererConfig:$o.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ub(e),e===null?null:e.stateNode},findFiberByHostInstance:$o.findFiberByHostInstance||lR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wc.isDisabled&&Wc.supportsFiber)try{_d=Wc.inject(dR),Nn=Wc}catch{}}Nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uR;Nr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yg(t))throw Error(V(200));return oR(e,t,null,r)};Nr.createRoot=function(e,t){if(!yg(e))throw Error(V(299));var r=!1,n="",s=z_;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=mg(e,1,!1,null,null,r,!1,n,s),e[Hn]=t.current,_l(e.nodeType===8?e.parentNode:e),new vg(t)};Nr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(V(188)):(e=Object.keys(e).join(","),Error(V(268,e)));return e=ub(t),e=e===null?null:e.stateNode,e};Nr.flushSync=function(e){return Mi(e)};Nr.hydrate=function(e,t,r){if(!Md(t))throw Error(V(200));return Dd(null,e,t,!0,r)};Nr.hydrateRoot=function(e,t,r){if(!yg(e))throw Error(V(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=z_;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=B_(t,null,e,1,r??null,s,!1,i,o),e[Hn]=t.current,_l(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Od(t)};Nr.render=function(e,t,r){if(!Md(t))throw Error(V(200));return Dd(null,e,t,!1,r)};Nr.unmountComponentAtNode=function(e){if(!Md(e))throw Error(V(40));return e._reactRootContainer?(Mi(function(){Dd(null,null,e,!1,function(){e._reactRootContainer=null,e[Hn]=null})}),!0):!1};Nr.unstable_batchedUpdates=dg;Nr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Md(r))throw Error(V(200));if(e==null||e._reactInternals===void 0)throw Error(V(38));return Dd(e,t,r,!1,n)};Nr.version="18.3.1-next-f1338f8080-20240426";function q_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(q_)}catch(e){console.error(e)}}q_(),q0.exports=Nr;var hn=q0.exports;const W_=P0(hn);var V_,jx=hn;V_=jx.createRoot,jx.hydrateRoot;const hR=1,fR=1e6;let Zh=0;function pR(){return Zh=(Zh+1)%Number.MAX_SAFE_INTEGER,Zh.toString()}const ef=new Map,Sx=e=>{if(ef.has(e))return;const t=setTimeout(()=>{ef.delete(e),cl({type:"REMOVE_TOAST",toastId:e})},fR);ef.set(e,t)},mR=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,hR)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Sx(r):e.toasts.forEach(n=>{Sx(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},xu=[];let wu={toasts:[]};function cl(e){wu=mR(wu,e),xu.forEach(t=>{t(wu)})}function gR({...e}){const t=pR(),r=s=>cl({type:"UPDATE_TOAST",toast:{...s,id:t}}),n=()=>cl({type:"DISMISS_TOAST",toastId:t});return cl({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||n()}}}),{id:t,dismiss:n,update:r}}function Ot(){const[e,t]=f.useState(wu);return f.useEffect(()=>(xu.push(t),()=>{const r=xu.indexOf(t);r>-1&&xu.splice(r,1)}),[e]),{...e,toast:gR,dismiss:r=>cl({type:"DISMISS_TOAST",toastId:r})}}function G(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Nx(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Ld(...e){return t=>{let r=!1;const n=e.map(s=>{const i=Nx(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():Nx(e[s],null)}}}}function Ne(...e){return f.useCallback(Ld(...e),e)}function vR(e,t){const r=f.createContext(t),n=i=>{const{children:o,...l}=i,c=f.useMemo(()=>l,Object.values(l));return a.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function s(i){const o=f.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,s]}function Mt(e,t=[]){let r=[];function n(i,o){const l=f.createContext(o),c=r.length;r=[...r,o];const u=h=>{var x;const{scope:p,children:m,...b}=h,g=((x=p==null?void 0:p[e])==null?void 0:x[c])||l,v=f.useMemo(()=>b,Object.values(b));return a.jsx(g.Provider,{value:v,children:m})};u.displayName=i+"Provider";function d(h,p){var g;const m=((g=p==null?void 0:p[e])==null?void 0:g[c])||l,b=f.useContext(m);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=r.map(o=>f.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,yR(s,...t)]}function yR(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Di(e){const t=wR(e),r=f.forwardRef((n,s)=>{const{children:i,...o}=n,l=f.Children.toArray(i),c=l.find(bR);if(c){const u=c.props.children,d=l.map(h=>h===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:h);return a.jsx(t,{...o,ref:s,children:f.isValidElement(u)?f.cloneElement(u,void 0,d):null})}return a.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}var xR=Di("Slot");function wR(e){const t=f.forwardRef((r,n)=>{const{children:s,...i}=r;if(f.isValidElement(s)){const o=jR(s),l=_R(i,s.props);return s.type!==f.Fragment&&(l.ref=n?Ld(n,o):o),f.cloneElement(s,l)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var H_=Symbol("radix.slottable");function K_(e){const t=({children:r})=>a.jsx(a.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=H_,t}function bR(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===H_}function _R(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function jR(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function sc(e){const t=e+"CollectionProvider",[r,n]=Mt(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:v,children:x}=g,y=W.useRef(null),w=W.useRef(new Map).current;return a.jsx(s,{scope:v,itemMap:w,collectionRef:y,children:x})};o.displayName=t;const l=e+"CollectionSlot",c=Di(l),u=W.forwardRef((g,v)=>{const{scope:x,children:y}=g,w=i(l,x),_=Ne(v,w.collectionRef);return a.jsx(c,{ref:_,children:y})});u.displayName=l;const d=e+"CollectionItemSlot",h="data-radix-collection-item",p=Di(d),m=W.forwardRef((g,v)=>{const{scope:x,children:y,...w}=g,_=W.useRef(null),j=Ne(v,_),S=i(d,x);return W.useEffect(()=>(S.itemMap.set(_,{ref:_,...w}),()=>void S.itemMap.delete(_))),a.jsx(p,{[h]:"",ref:j,children:y})});m.displayName=d;function b(g){const v=i(e+"CollectionConsumer",g);return W.useCallback(()=>{const y=v.collectionRef.current;if(!y)return[];const w=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((S,N)=>w.indexOf(S.ref.current)-w.indexOf(N.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},b,n]}var SR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],oe=SR.reduce((e,t)=>{const r=Di(`Primitive.${t}`),n=f.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function xg(e,t){e&&hn.flushSync(()=>e.dispatchEvent(t))}function dt(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function NR(e,t=globalThis==null?void 0:globalThis.document){const r=dt(e);f.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var kR="DismissableLayer",Sp="dismissableLayer.update",CR="dismissableLayer.pointerDownOutside",ER="dismissableLayer.focusOutside",kx,G_=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),co=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=f.useContext(G_),[d,h]=f.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=f.useState({}),b=Ne(t,N=>h(N)),g=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(v),y=d?g.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,_=y>=x,j=RR(N=>{const k=N.target,R=[...u.branches].some(I=>I.contains(k));!_||R||(s==null||s(N),o==null||o(N),N.defaultPrevented||l==null||l())},p),S=PR(N=>{const k=N.target;[...u.branches].some(I=>I.contains(k))||(i==null||i(N),o==null||o(N),N.defaultPrevented||l==null||l())},p);return NR(N=>{y===u.layers.size-1&&(n==null||n(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},p),f.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(kx=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Cx(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=kx)}},[d,p,r,u]),f.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Cx())},[d,u]),f.useEffect(()=>{const N=()=>m({});return document.addEventListener(Sp,N),()=>document.removeEventListener(Sp,N)},[]),a.jsx(oe.div,{...c,ref:b,style:{pointerEvents:w?_?"auto":"none":void 0,...e.style},onFocusCapture:G(e.onFocusCapture,S.onFocusCapture),onBlurCapture:G(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:G(e.onPointerDownCapture,j.onPointerDownCapture)})});co.displayName=kR;var TR="DismissableLayerBranch",Y_=f.forwardRef((e,t)=>{const r=f.useContext(G_),n=f.useRef(null),s=Ne(t,n);return f.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),a.jsx(oe.div,{...e,ref:s})});Y_.displayName=TR;function RR(e,t=globalThis==null?void 0:globalThis.document){const r=dt(e),n=f.useRef(!1),s=f.useRef(()=>{});return f.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){Q_(CR,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function PR(e,t=globalThis==null?void 0:globalThis.document){const r=dt(e),n=f.useRef(!1);return f.useEffect(()=>{const s=i=>{i.target&&!n.current&&Q_(ER,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Cx(){const e=new CustomEvent(Sp);document.dispatchEvent(e)}function Q_(e,t,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?xg(s,i):s.dispatchEvent(i)}var AR=co,IR=Y_,ht=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},OR="Portal",ic=f.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,i]=f.useState(!1);ht(()=>i(!0),[]);const o=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?W_.createPortal(a.jsx(oe.div,{...n,ref:t}),o):null});ic.displayName=OR;function MR(e,t){return f.useReducer((r,n)=>t[r][n]??r,e)}var Dt=e=>{const{present:t,children:r}=e,n=DR(t),s=typeof r=="function"?r({present:n.isPresent}):f.Children.only(r),i=Ne(n.ref,LR(s));return typeof r=="function"||n.isPresent?f.cloneElement(s,{ref:i}):null};Dt.displayName="Presence";function DR(e){const[t,r]=f.useState(),n=f.useRef(null),s=f.useRef(e),i=f.useRef("none"),o=e?"mounted":"unmounted",[l,c]=MR(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const u=Vc(n.current);i.current=l==="mounted"?u:"none"},[l]),ht(()=>{const u=n.current,d=s.current;if(d!==e){const p=i.current,m=Vc(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&p!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),ht(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=m=>{const g=Vc(n.current).includes(m.animationName);if(m.target===t&&g&&(c("ANIMATION_END"),!s.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},p=m=>{m.target===t&&(i.current=Vc(n.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Vc(e){return(e==null?void 0:e.animationName)||"none"}function LR(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var $R=Em[" useInsertionEffect ".trim().toString()]||ht;function Ur({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,i,o]=FR({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:s;{const d=f.useRef(e!==void 0);f.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=f.useCallback(d=>{var h;if(l){const p=UR(d)?d(e):d;p!==e&&((h=o.current)==null||h.call(o,p))}else i(d)},[l,e,i,o]);return[c,u]}function FR({defaultProp:e,onChange:t}){const[r,n]=f.useState(e),s=f.useRef(r),i=f.useRef(t);return $R(()=>{i.current=t},[t]),f.useEffect(()=>{var o;s.current!==r&&((o=i.current)==null||o.call(i,r),s.current=r)},[r,s]),[r,n,i]}function UR(e){return typeof e=="function"}var J_=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),BR="VisuallyHidden",$d=f.forwardRef((e,t)=>a.jsx(oe.span,{...e,ref:t,style:{...J_,...e.style}}));$d.displayName=BR;var zR=$d,wg="ToastProvider",[bg,qR,WR]=sc("Toast"),[X_,cz]=Mt("Toast",[WR]),[VR,Fd]=X_(wg),Z_=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=e,[l,c]=f.useState(null),[u,d]=f.useState(0),h=f.useRef(!1),p=f.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${wg}\`. Expected non-empty \`string\`.`),a.jsx(bg.Provider,{scope:t,children:a.jsx(VR,{scope:t,label:r,duration:n,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:f.useCallback(()=>d(m=>m+1),[]),onToastRemove:f.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:o})})};Z_.displayName=wg;var ej="ToastViewport",HR=["F8"],Np="toast.viewportPause",kp="toast.viewportResume",tj=f.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=HR,label:s="Notifications ({hotkey})",...i}=e,o=Fd(ej,r),l=qR(r),c=f.useRef(null),u=f.useRef(null),d=f.useRef(null),h=f.useRef(null),p=Ne(t,h,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=o.toastCount>0;f.useEffect(()=>{const v=x=>{var w;n.length!==0&&n.every(_=>x[_]||x.code===_)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[n]),f.useEffect(()=>{const v=c.current,x=h.current;if(b&&v&&x){const y=()=>{if(!o.isClosePausedRef.current){const S=new CustomEvent(Np);x.dispatchEvent(S),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const S=new CustomEvent(kp);x.dispatchEvent(S),o.isClosePausedRef.current=!1}},_=S=>{!v.contains(S.relatedTarget)&&w()},j=()=>{v.contains(document.activeElement)||w()};return v.addEventListener("focusin",y),v.addEventListener("focusout",_),v.addEventListener("pointermove",y),v.addEventListener("pointerleave",j),window.addEventListener("blur",y),window.addEventListener("focus",w),()=>{v.removeEventListener("focusin",y),v.removeEventListener("focusout",_),v.removeEventListener("pointermove",y),v.removeEventListener("pointerleave",j),window.removeEventListener("blur",y),window.removeEventListener("focus",w)}}},[b,o.isClosePausedRef]);const g=f.useCallback(({tabbingDirection:v})=>{const y=l().map(w=>{const _=w.ref.current,j=[_,...iP(_)];return v==="forwards"?j:j.reverse()});return(v==="forwards"?y.reverse():y).flat()},[l]);return f.useEffect(()=>{const v=h.current;if(v){const x=y=>{var j,S,N;const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!w){const k=document.activeElement,R=y.shiftKey;if(y.target===v&&R){(j=u.current)==null||j.focus();return}const A=g({tabbingDirection:R?"backwards":"forwards"}),$=A.findIndex(O=>O===k);tf(A.slice($+1))?y.preventDefault():R?(S=u.current)==null||S.focus():(N=d.current)==null||N.focus()}};return v.addEventListener("keydown",x),()=>v.removeEventListener("keydown",x)}},[l,g]),a.jsxs(IR,{ref:c,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&a.jsx(Cp,{ref:u,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"forwards"});tf(v)}}),a.jsx(bg.Slot,{scope:r,children:a.jsx(oe.ol,{tabIndex:-1,...i,ref:p})}),b&&a.jsx(Cp,{ref:d,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"backwards"});tf(v)}})]})});tj.displayName=ej;var rj="ToastFocusProxy",Cp=f.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=e,i=Fd(rj,r);return a.jsx($d,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&n()}})});Cp.displayName=rj;var ac="Toast",KR="toast.swipeStart",GR="toast.swipeMove",YR="toast.swipeCancel",QR="toast.swipeEnd",nj=f.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:i,...o}=e,[l,c]=Ur({prop:n,defaultProp:s??!0,onChange:i,caller:ac});return a.jsx(Dt,{present:r||l,children:a.jsx(ZR,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:dt(e.onPause),onResume:dt(e.onResume),onSwipeStart:G(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:G(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:G(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:G(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});nj.displayName=ac;var[JR,XR]=X_(ac,{onClose(){}}),ZR=f.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:m,...b}=e,g=Fd(ac,r),[v,x]=f.useState(null),y=Ne(t,O=>x(O)),w=f.useRef(null),_=f.useRef(null),j=s||g.duration,S=f.useRef(0),N=f.useRef(j),k=f.useRef(0),{onToastAdd:R,onToastRemove:I}=g,D=dt(()=>{var X;(v==null?void 0:v.contains(document.activeElement))&&((X=g.viewport)==null||X.focus()),o()}),A=f.useCallback(O=>{!O||O===1/0||(window.clearTimeout(k.current),S.current=new Date().getTime(),k.current=window.setTimeout(D,O))},[D]);f.useEffect(()=>{const O=g.viewport;if(O){const X=()=>{A(N.current),u==null||u()},U=()=>{const J=new Date().getTime()-S.current;N.current=N.current-J,window.clearTimeout(k.current),c==null||c()};return O.addEventListener(Np,U),O.addEventListener(kp,X),()=>{O.removeEventListener(Np,U),O.removeEventListener(kp,X)}}},[g.viewport,j,c,u,A]),f.useEffect(()=>{i&&!g.isClosePausedRef.current&&A(j)},[i,j,g.isClosePausedRef,A]),f.useEffect(()=>(R(),()=>I()),[R,I]);const $=f.useMemo(()=>v?uj(v):null,[v]);return g.viewport?a.jsxs(a.Fragment,{children:[$&&a.jsx(eP,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:$}),a.jsx(JR,{scope:r,onClose:D,children:hn.createPortal(a.jsx(bg.ItemSlot,{scope:r,children:a.jsx(AR,{asChild:!0,onEscapeKeyDown:G(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||D(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(oe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...b,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:G(e.onKeyDown,O=>{O.key==="Escape"&&(l==null||l(O.nativeEvent),O.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:G(e.onPointerDown,O=>{O.button===0&&(w.current={x:O.clientX,y:O.clientY})}),onPointerMove:G(e.onPointerMove,O=>{if(!w.current)return;const X=O.clientX-w.current.x,U=O.clientY-w.current.y,J=!!_.current,T=["left","right"].includes(g.swipeDirection),E=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,B=T?E(0,X):0,re=T?0:E(0,U),Y=O.pointerType==="touch"?10:2,fe={x:B,y:re},q={originalEvent:O,delta:fe};J?(_.current=fe,Hc(GR,h,q,{discrete:!1})):Ex(fe,g.swipeDirection,Y)?(_.current=fe,Hc(KR,d,q,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(X)>Y||Math.abs(U)>Y)&&(w.current=null)}),onPointerUp:G(e.onPointerUp,O=>{const X=_.current,U=O.target;if(U.hasPointerCapture(O.pointerId)&&U.releasePointerCapture(O.pointerId),_.current=null,w.current=null,X){const J=O.currentTarget,T={originalEvent:O,delta:X};Ex(X,g.swipeDirection,g.swipeThreshold)?Hc(QR,m,T,{discrete:!0}):Hc(YR,p,T,{discrete:!0}),J.addEventListener("click",E=>E.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),eP=e=>{const{__scopeToast:t,children:r,...n}=e,s=Fd(ac,t),[i,o]=f.useState(!1),[l,c]=f.useState(!1);return nP(()=>o(!0)),f.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(ic,{asChild:!0,children:a.jsx($d,{...n,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",r]})})})},tP="ToastTitle",sj=f.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return a.jsx(oe.div,{...n,ref:t})});sj.displayName=tP;var rP="ToastDescription",ij=f.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return a.jsx(oe.div,{...n,ref:t})});ij.displayName=rP;var aj="ToastAction",oj=f.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?a.jsx(cj,{altText:r,asChild:!0,children:a.jsx(_g,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${aj}\`. Expected non-empty \`string\`.`),null)});oj.displayName=aj;var lj="ToastClose",_g=f.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,s=XR(lj,r);return a.jsx(cj,{asChild:!0,children:a.jsx(oe.button,{type:"button",...n,ref:t,onClick:G(e.onClick,s.onClose)})})});_g.displayName=lj;var cj=f.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...s}=e;return a.jsx(oe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:t})});function uj(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),sP(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...uj(n))}}),t}function Hc(e,t,r,{discrete:n}){const s=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?xg(s,i):s.dispatchEvent(i)}var Ex=(e,t,r=0)=>{const n=Math.abs(e.x),s=Math.abs(e.y),i=n>s;return t==="left"||t==="right"?i&&n>r:!i&&s>r};function nP(e=()=>{}){const t=dt(e);ht(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function sP(e){return e.nodeType===e.ELEMENT_NODE}function iP(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function tf(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var aP=Z_,dj=tj,hj=nj,fj=sj,pj=ij,mj=oj,gj=_g;function vj(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=vj(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function yj(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=vj(e))&&(n&&(n+=" "),n+=t);return n}const Tx=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Rx=yj,oc=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Rx(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],h=i==null?void 0:i[u];if(d===null)return null;const p=Tx(d)||Tx(h);return s[u][p]}),l=r&&Object.entries(r).reduce((u,d)=>{let[h,p]=d;return p===void 0||(u[h]=p),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:h,className:p,...m}=d;return Object.entries(m).every(b=>{let[g,v]=b;return Array.isArray(v)?v.includes({...i,...l}[g]):{...i,...l}[g]===v})?[...u,h,p]:u},[]);return Rx(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xj=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},c)=>f.createElement("svg",{ref:c,...lP,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:xj("lucide",s),...l},[...o.map(([u,d])=>f.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=(e,t)=>{const r=f.forwardRef(({className:n,...s},i)=>f.createElement(cP,{ref:i,iconNode:t,className:xj(`lucide-${oP(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=ge("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=ge("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=ge("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=ge("Beaker",[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=ge("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=ge("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=ge("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=ge("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=ge("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=ge("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=ge("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=ge("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=ge("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=ge("FileStack",[["path",{d:"M21 7h-3a2 2 0 0 1-2-2V2",key:"9rb54x"}],["path",{d:"M21 6v6.5c0 .8-.7 1.5-1.5 1.5h-7c-.8 0-1.5-.7-1.5-1.5v-9c0-.8.7-1.5 1.5-1.5H17Z",key:"1059l0"}],["path",{d:"M7 8v8.8c0 .3.2.6.4.8.2.2.5.4.8.4H15",key:"16874u"}],["path",{d:"M3 12v8.8c0 .3.2.6.4.8.2.2.5.4.8.4H11",key:"k2ox98"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=ge("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=ge("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=ge("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=ge("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=ge("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=ge("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=ge("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=ge("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=ge("LifeBuoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=ge("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=ge("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=ge("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=ge("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=ge("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=ge("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=ge("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=ge("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=ge("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=ge("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=ge("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=ge("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=ge("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=ge("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=ge("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=ge("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=ge("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=ge("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=ge("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=ge("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=ge("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),kg="-",RP=e=>{const t=AP(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(kg);return l[0]===""&&l.length!==1&&l.shift(),Cj(l,t)||PP(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},Cj=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?Cj(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(kg);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},Ox=/^\[(.+)\]$/,PP=e=>{if(Ox.test(e)){const t=Ox.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},AP=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return OP(Object.entries(e.classGroups),r).forEach(([i,o])=>{Pp(o,n,i,t)}),n},Pp=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:Mx(t,s);i.classGroupId=r;return}if(typeof s=="function"){if(IP(s)){Pp(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,o])=>{Pp(o,Mx(t,i),r,n)})})},Mx=(e,t)=>{let r=e;return t.split(kg).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},IP=e=>e.isThemeGetter,OP=(e,t)=>t?e.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,s]}):e,MP=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){r.has(i)?r.set(i,o):s(i,o)}}},Ej="!",DP=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],i=t.length,o=l=>{const c=[];let u=0,d=0,h;for(let v=0;v<l.length;v++){let x=l[v];if(u===0){if(x===s&&(n||l.slice(v,v+i)===t)){c.push(l.slice(d,v)),d=v+i;continue}if(x==="/"){h=v;continue}}x==="["?u++:x==="]"&&u--}const p=c.length===0?l:l.substring(d),m=p.startsWith(Ej),b=m?p.substring(1):p,g=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:b,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:o}):o},LP=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},$P=e=>({cache:MP(e.cacheSize),parseClassName:DP(e),...RP(e)}),FP=/\s+/,UP=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,i=[],o=e.trim().split(FP);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=r(u);let b=!!m,g=n(b?p.substring(0,m):p);if(!g){if(!b){l=u+(l.length>0?" "+l:l);continue}if(g=n(p),!g){l=u+(l.length>0?" "+l:l);continue}b=!1}const v=LP(d).join(":"),x=h?v+Ej:v,y=x+g;if(i.includes(y))continue;i.push(y);const w=s(g,b);for(let _=0;_<w.length;++_){const j=w[_];i.push(x+j)}l=u+(l.length>0?" "+l:l)}return l};function BP(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Tj(t))&&(n&&(n+=" "),n+=r);return n}const Tj=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Tj(e[n]))&&(r&&(r+=" "),r+=t);return r};function zP(e,...t){let r,n,s,i=o;function o(c){const u=t.reduce((d,h)=>h(d),e());return r=$P(u),n=r.cache.get,s=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=UP(c,r);return s(c,d),d}return function(){return i(BP.apply(null,arguments))}}const Ze=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Rj=/^\[(?:([a-z-]+):)?(.+)\]$/i,qP=/^\d+\/\d+$/,WP=new Set(["px","full","screen"]),VP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,HP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,KP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,GP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,YP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,In=e=>Pa(e)||WP.has(e)||qP.test(e),os=e=>fo(e,"length",nA),Pa=e=>!!e&&!Number.isNaN(Number(e)),nf=e=>fo(e,"number",Pa),Fo=e=>!!e&&Number.isInteger(Number(e)),QP=e=>e.endsWith("%")&&Pa(e.slice(0,-1)),Re=e=>Rj.test(e),ls=e=>VP.test(e),JP=new Set(["length","size","percentage"]),XP=e=>fo(e,JP,Pj),ZP=e=>fo(e,"position",Pj),eA=new Set(["image","url"]),tA=e=>fo(e,eA,iA),rA=e=>fo(e,"",sA),Uo=()=>!0,fo=(e,t,r)=>{const n=Rj.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},nA=e=>HP.test(e)&&!KP.test(e),Pj=()=>!1,sA=e=>GP.test(e),iA=e=>YP.test(e),aA=()=>{const e=Ze("colors"),t=Ze("spacing"),r=Ze("blur"),n=Ze("brightness"),s=Ze("borderColor"),i=Ze("borderRadius"),o=Ze("borderSpacing"),l=Ze("borderWidth"),c=Ze("contrast"),u=Ze("grayscale"),d=Ze("hueRotate"),h=Ze("invert"),p=Ze("gap"),m=Ze("gradientColorStops"),b=Ze("gradientColorStopPositions"),g=Ze("inset"),v=Ze("margin"),x=Ze("opacity"),y=Ze("padding"),w=Ze("saturate"),_=Ze("scale"),j=Ze("sepia"),S=Ze("skew"),N=Ze("space"),k=Ze("translate"),R=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",Re,t],A=()=>[Re,t],$=()=>["",In,os],O=()=>["auto",Pa,Re],X=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],J=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],E=()=>["","0",Re],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],re=()=>[Pa,Re];return{cacheSize:500,separator:":",theme:{colors:[Uo],spacing:[In,os],blur:["none","",ls,Re],brightness:re(),borderColor:[e],borderRadius:["none","","full",ls,Re],borderSpacing:A(),borderWidth:$(),contrast:re(),grayscale:E(),hueRotate:re(),invert:E(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[QP,os],inset:D(),margin:D(),opacity:re(),padding:A(),saturate:re(),scale:re(),sepia:E(),skew:re(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",Re]}],container:["container"],columns:[{columns:[ls]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...X(),Re]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Fo,Re]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Re]}],grow:[{grow:E()}],shrink:[{shrink:E()}],order:[{order:["first","last","none",Fo,Re]}],"grid-cols":[{"grid-cols":[Uo]}],"col-start-end":[{col:["auto",{span:["full",Fo,Re]},Re]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[Uo]}],"row-start-end":[{row:["auto",{span:[Fo,Re]},Re]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Re]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Re]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Re,t]}],"min-w":[{"min-w":[Re,t,"min","max","fit"]}],"max-w":[{"max-w":[Re,t,"none","full","min","max","fit","prose",{screen:[ls]},ls]}],h:[{h:[Re,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Re,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Re,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Re,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ls,os]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",nf]}],"font-family":[{font:[Uo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Re]}],"line-clamp":[{"line-clamp":["none",Pa,nf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",In,Re]}],"list-image":[{"list-image":["none",Re]}],"list-style-type":[{list:["none","disc","decimal",Re]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",In,os]}],"underline-offset":[{"underline-offset":["auto",In,Re]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...X(),ZP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",XP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},tA]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:U()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[In,Re]}],"outline-w":[{outline:[In,os]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[In,os]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ls,rA]}],"shadow-color":[{shadow:[Uo]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...J(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":J()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ls,Re]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Re]}],duration:[{duration:re()}],ease:[{ease:["linear","in","out","in-out",Re]}],delay:[{delay:re()}],animate:[{animate:["none","spin","ping","pulse","bounce",Re]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Fo,Re]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Re]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Re]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Re]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[In,os,nf]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},oA=zP(aA);function H(...e){return oA(yj(e))}const lA=aP,Aj=f.forwardRef(({className:e,...t},r)=>a.jsx(dj,{ref:r,className:H("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Aj.displayName=dj.displayName;const cA=oc("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ij=f.forwardRef(({className:e,variant:t,...r},n)=>a.jsx(hj,{ref:n,className:H(cA({variant:t}),e),...r}));Ij.displayName=hj.displayName;const uA=f.forwardRef(({className:e,...t},r)=>a.jsx(mj,{ref:r,className:H("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));uA.displayName=mj.displayName;const Oj=f.forwardRef(({className:e,...t},r)=>a.jsx(gj,{ref:r,className:H("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:a.jsx(Vt,{className:"h-4 w-4"})}));Oj.displayName=gj.displayName;const Mj=f.forwardRef(({className:e,...t},r)=>a.jsx(fj,{ref:r,className:H("text-sm font-semibold",e),...t}));Mj.displayName=fj.displayName;const Dj=f.forwardRef(({className:e,...t},r)=>a.jsx(pj,{ref:r,className:H("text-sm opacity-90",e),...t}));Dj.displayName=pj.displayName;function dA(){const{toasts:e}=Ot();return a.jsxs(lA,{children:[e.map(function({id:t,title:r,description:n,action:s,...i}){return a.jsxs(Ij,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[r&&a.jsx(Mj,{children:r}),n&&a.jsx(Dj,{children:n})]}),s,a.jsx(Oj,{})]},t)}),a.jsx(Aj,{})]})}var Dx=["light","dark"],hA="(prefers-color-scheme: dark)",fA=f.createContext(void 0),pA={setTheme:e=>{},themes:[]},mA=()=>{var e;return(e=f.useContext(fA))!=null?e:pA};f.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=s?Dx.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(b,g=!1,v=!0)=>{let x=o?o[b]:b,y=g?b+"|| ''":`'${x}'`,w="";return s&&v&&!g&&Dx.includes(b)&&(w+=`d.style.colorScheme = '${b}';`),r==="class"?g||x?w+=`c.add(${y})`:w+="null":x&&(w+=`d[s](n,${y})`),w},m=e?`!function(){${d}${p(e)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${hA}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${u?"":"else{"+p(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(i,!1,!1)};}${h}}catch(t){}}();`;return f.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var gA=e=>{switch(e){case"success":return xA;case"info":return bA;case"warning":return wA;case"error":return _A;default:return null}},vA=Array(12).fill(0),yA=({visible:e,className:t})=>W.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},W.createElement("div",{className:"sonner-spinner"},vA.map((r,n)=>W.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),xA=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),wA=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),bA=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),_A=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),jA=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},W.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),W.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),SA=()=>{let[e,t]=W.useState(document.hidden);return W.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},Ap=1,NA=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Ap++,i=this.toasts.find(l=>l.id===s),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:o,title:r}):l):this.addToast({title:r,...n,dismissible:o,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),s=r!==void 0,i,o=n.then(async c=>{if(i=["resolve",c],W.isValidElement(c))s=!1,this.create({id:r,type:"default",message:c});else if(CA(c)&&!c.ok){s=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:d})}else if(t.success!==void 0){s=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){s=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||Ap++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},or=new NA,kA=(e,t)=>{let r=(t==null?void 0:t.id)||Ap++;return or.addToast({title:e,...t,id:r}),r},CA=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",EA=kA,TA=()=>or.toasts,RA=()=>or.getActiveToasts();Object.assign(EA,{success:or.success,info:or.info,warning:or.warning,error:or.error,custom:or.custom,message:or.message,promise:or.promise,dismiss:or.dismiss,loading:or.loading},{getHistory:TA,getToasts:RA});function PA(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}PA(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Kc(e){return e.label!==void 0}var AA=3,IA="32px",OA="16px",Lx=4e3,MA=356,DA=14,LA=20,$A=200;function Hr(...e){return e.filter(Boolean).join(" ")}function FA(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var UA=e=>{var t,r,n,s,i,o,l,c,u,d,h;let{invert:p,toast:m,unstyled:b,interacting:g,setHeights:v,visibleToasts:x,heights:y,index:w,toasts:_,expanded:j,removeToast:S,defaultRichColors:N,closeButton:k,style:R,cancelButtonStyle:I,actionButtonStyle:D,className:A="",descriptionClassName:$="",duration:O,position:X,gap:U,loadingIcon:J,expandByDefault:T,classNames:E,icons:B,closeButtonAriaLabel:re="Close toast",pauseWhenPageIsHidden:Y}=e,[fe,q]=W.useState(null),[de,he]=W.useState(null),[z,ce]=W.useState(!1),[_e,Ce]=W.useState(!1),[K,te]=W.useState(!1),[xe,Te]=W.useState(!1),[Ee,Oe]=W.useState(!1),[Me,vt]=W.useState(0),[Qe,ei]=W.useState(0),ti=W.useRef(m.duration||O||Lx),wc=W.useRef(null),gn=W.useRef(null),No=w===0,bc=w+1<=x,$t=m.type,ns=m.dismissible!==!1,ko=m.className||"",wh=m.descriptionClassName||"",ri=W.useMemo(()=>y.findIndex(je=>je.toastId===m.id)||0,[y,m.id]),_c=W.useMemo(()=>{var je;return(je=m.closeButton)!=null?je:k},[m.closeButton,k]),jc=W.useMemo(()=>m.duration||O||Lx,[m.duration,O]),ni=W.useRef(0),ss=W.useRef(0),Qi=W.useRef(0),is=W.useRef(null),[si,bh]=X.split("-"),Co=W.useMemo(()=>y.reduce((je,ze,Ke)=>Ke>=ri?je:je+ze.height,0),[y,ri]),Eo=SA(),ii=m.invert||p,Ji=$t==="loading";ss.current=W.useMemo(()=>ri*U+Co,[ri,Co]),W.useEffect(()=>{ti.current=jc},[jc]),W.useEffect(()=>{ce(!0)},[]),W.useEffect(()=>{let je=gn.current;if(je){let ze=je.getBoundingClientRect().height;return ei(ze),v(Ke=>[{toastId:m.id,height:ze,position:m.position},...Ke]),()=>v(Ke=>Ke.filter(tr=>tr.toastId!==m.id))}},[v,m.id]),W.useLayoutEffect(()=>{if(!z)return;let je=gn.current,ze=je.style.height;je.style.height="auto";let Ke=je.getBoundingClientRect().height;je.style.height=ze,ei(Ke),v(tr=>tr.find(rr=>rr.toastId===m.id)?tr.map(rr=>rr.toastId===m.id?{...rr,height:Ke}:rr):[{toastId:m.id,height:Ke,position:m.position},...tr])},[z,m.title,m.description,v,m.id]);let zr=W.useCallback(()=>{Ce(!0),vt(ss.current),v(je=>je.filter(ze=>ze.toastId!==m.id)),setTimeout(()=>{S(m)},$A)},[m,S,v,ss]);W.useEffect(()=>{if(m.promise&&$t==="loading"||m.duration===1/0||m.type==="loading")return;let je;return j||g||Y&&Eo?(()=>{if(Qi.current<ni.current){let ze=new Date().getTime()-ni.current;ti.current=ti.current-ze}Qi.current=new Date().getTime()})():ti.current!==1/0&&(ni.current=new Date().getTime(),je=setTimeout(()=>{var ze;(ze=m.onAutoClose)==null||ze.call(m,m),zr()},ti.current)),()=>clearTimeout(je)},[j,g,m,$t,Y,Eo,zr]),W.useEffect(()=>{m.delete&&zr()},[zr,m.delete]);function _h(){var je,ze,Ke;return B!=null&&B.loading?W.createElement("div",{className:Hr(E==null?void 0:E.loader,(je=m==null?void 0:m.classNames)==null?void 0:je.loader,"sonner-loader"),"data-visible":$t==="loading"},B.loading):J?W.createElement("div",{className:Hr(E==null?void 0:E.loader,(ze=m==null?void 0:m.classNames)==null?void 0:ze.loader,"sonner-loader"),"data-visible":$t==="loading"},J):W.createElement(yA,{className:Hr(E==null?void 0:E.loader,(Ke=m==null?void 0:m.classNames)==null?void 0:Ke.loader),visible:$t==="loading"})}return W.createElement("li",{tabIndex:0,ref:gn,className:Hr(A,ko,E==null?void 0:E.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,E==null?void 0:E.default,E==null?void 0:E[$t],(r=m==null?void 0:m.classNames)==null?void 0:r[$t]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:N,"data-styled":!(m.jsx||m.unstyled||b),"data-mounted":z,"data-promise":!!m.promise,"data-swiped":Ee,"data-removed":_e,"data-visible":bc,"data-y-position":si,"data-x-position":bh,"data-index":w,"data-front":No,"data-swiping":K,"data-dismissible":ns,"data-type":$t,"data-invert":ii,"data-swipe-out":xe,"data-swipe-direction":de,"data-expanded":!!(j||T&&z),style:{"--index":w,"--toasts-before":w,"--z-index":_.length-w,"--offset":`${_e?Me:ss.current}px`,"--initial-height":T?"auto":`${Qe}px`,...R,...m.style},onDragEnd:()=>{te(!1),q(null),is.current=null},onPointerDown:je=>{Ji||!ns||(wc.current=new Date,vt(ss.current),je.target.setPointerCapture(je.pointerId),je.target.tagName!=="BUTTON"&&(te(!0),is.current={x:je.clientX,y:je.clientY}))},onPointerUp:()=>{var je,ze,Ke,tr;if(xe||!ns)return;is.current=null;let rr=Number(((je=gn.current)==null?void 0:je.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),qr=Number(((ze=gn.current)==null?void 0:ze.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ot=new Date().getTime()-((Ke=wc.current)==null?void 0:Ke.getTime()),nr=fe==="x"?rr:qr,Wr=Math.abs(nr)/ot;if(Math.abs(nr)>=LA||Wr>.11){vt(ss.current),(tr=m.onDismiss)==null||tr.call(m,m),he(fe==="x"?rr>0?"right":"left":qr>0?"down":"up"),zr(),Te(!0),Oe(!1);return}te(!1),q(null)},onPointerMove:je=>{var ze,Ke,tr,rr;if(!is.current||!ns||((ze=window.getSelection())==null?void 0:ze.toString().length)>0)return;let qr=je.clientY-is.current.y,ot=je.clientX-is.current.x,nr=(Ke=e.swipeDirections)!=null?Ke:FA(X);!fe&&(Math.abs(ot)>1||Math.abs(qr)>1)&&q(Math.abs(ot)>Math.abs(qr)?"x":"y");let Wr={x:0,y:0};fe==="y"?(nr.includes("top")||nr.includes("bottom"))&&(nr.includes("top")&&qr<0||nr.includes("bottom")&&qr>0)&&(Wr.y=qr):fe==="x"&&(nr.includes("left")||nr.includes("right"))&&(nr.includes("left")&&ot<0||nr.includes("right")&&ot>0)&&(Wr.x=ot),(Math.abs(Wr.x)>0||Math.abs(Wr.y)>0)&&Oe(!0),(tr=gn.current)==null||tr.style.setProperty("--swipe-amount-x",`${Wr.x}px`),(rr=gn.current)==null||rr.style.setProperty("--swipe-amount-y",`${Wr.y}px`)}},_c&&!m.jsx?W.createElement("button",{"aria-label":re,"data-disabled":Ji,"data-close-button":!0,onClick:Ji||!ns?()=>{}:()=>{var je;zr(),(je=m.onDismiss)==null||je.call(m,m)},className:Hr(E==null?void 0:E.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=B==null?void 0:B.close)!=null?i:jA):null,m.jsx||f.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:W.createElement(W.Fragment,null,$t||m.icon||m.promise?W.createElement("div",{"data-icon":"",className:Hr(E==null?void 0:E.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||_h():null,m.type!=="loading"?m.icon||(B==null?void 0:B[$t])||gA($t):null):null,W.createElement("div",{"data-content":"",className:Hr(E==null?void 0:E.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},W.createElement("div",{"data-title":"",className:Hr(E==null?void 0:E.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?W.createElement("div",{"data-description":"",className:Hr($,wh,E==null?void 0:E.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),f.isValidElement(m.cancel)?m.cancel:m.cancel&&Kc(m.cancel)?W.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||I,onClick:je=>{var ze,Ke;Kc(m.cancel)&&ns&&((Ke=(ze=m.cancel).onClick)==null||Ke.call(ze,je),zr())},className:Hr(E==null?void 0:E.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,f.isValidElement(m.action)?m.action:m.action&&Kc(m.action)?W.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||D,onClick:je=>{var ze,Ke;Kc(m.action)&&((Ke=(ze=m.action).onClick)==null||Ke.call(ze,je),!je.defaultPrevented&&zr())},className:Hr(E==null?void 0:E.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function $x(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function BA(e,t){let r={};return[e,t].forEach((n,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",l=i?OA:IA;function c(u){["top","right","bottom","left"].forEach(d=>{r[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=l:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(l)}),r}var zA=f.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:p,style:m,visibleToasts:b=AA,toastOptions:g,dir:v=$x(),gap:x=DA,loadingIcon:y,icons:w,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:j}=e,[S,N]=W.useState([]),k=W.useMemo(()=>Array.from(new Set([n].concat(S.filter(Y=>Y.position).map(Y=>Y.position)))),[S,n]),[R,I]=W.useState([]),[D,A]=W.useState(!1),[$,O]=W.useState(!1),[X,U]=W.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),J=W.useRef(null),T=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=W.useRef(null),B=W.useRef(!1),re=W.useCallback(Y=>{N(fe=>{var q;return(q=fe.find(de=>de.id===Y.id))!=null&&q.delete||or.dismiss(Y.id),fe.filter(({id:de})=>de!==Y.id)})},[]);return W.useEffect(()=>or.subscribe(Y=>{if(Y.dismiss){N(fe=>fe.map(q=>q.id===Y.id?{...q,delete:!0}:q));return}setTimeout(()=>{W_.flushSync(()=>{N(fe=>{let q=fe.findIndex(de=>de.id===Y.id);return q!==-1?[...fe.slice(0,q),{...fe[q],...Y},...fe.slice(q+1)]:[Y,...fe]})})})}),[]),W.useEffect(()=>{if(d!=="system"){U(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;let Y=window.matchMedia("(prefers-color-scheme: dark)");try{Y.addEventListener("change",({matches:fe})=>{U(fe?"dark":"light")})}catch{Y.addListener(({matches:q})=>{try{U(q?"dark":"light")}catch(de){console.error(de)}})}},[d]),W.useEffect(()=>{S.length<=1&&A(!1)},[S]),W.useEffect(()=>{let Y=fe=>{var q,de;s.every(he=>fe[he]||fe.code===he)&&(A(!0),(q=J.current)==null||q.focus()),fe.code==="Escape"&&(document.activeElement===J.current||(de=J.current)!=null&&de.contains(document.activeElement))&&A(!1)};return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[s]),W.useEffect(()=>{if(J.current)return()=>{E.current&&(E.current.focus({preventScroll:!0}),E.current=null,B.current=!1)}},[J.current]),W.createElement("section",{ref:t,"aria-label":`${_} ${T}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((Y,fe)=>{var q;let[de,he]=Y.split("-");return S.length?W.createElement("ol",{key:Y,dir:v==="auto"?$x():v,tabIndex:-1,ref:J,className:l,"data-sonner-toaster":!0,"data-theme":X,"data-y-position":de,"data-lifted":D&&S.length>1&&!i,"data-x-position":he,style:{"--front-toast-height":`${((q=R[0])==null?void 0:q.height)||0}px`,"--width":`${MA}px`,"--gap":`${x}px`,...m,...BA(c,u)},onBlur:z=>{B.current&&!z.currentTarget.contains(z.relatedTarget)&&(B.current=!1,E.current&&(E.current.focus({preventScroll:!0}),E.current=null))},onFocus:z=>{z.target instanceof HTMLElement&&z.target.dataset.dismissible==="false"||B.current||(B.current=!0,E.current=z.relatedTarget)},onMouseEnter:()=>A(!0),onMouseMove:()=>A(!0),onMouseLeave:()=>{$||A(!1)},onDragEnd:()=>A(!1),onPointerDown:z=>{z.target instanceof HTMLElement&&z.target.dataset.dismissible==="false"||O(!0)},onPointerUp:()=>O(!1)},S.filter(z=>!z.position&&fe===0||z.position===Y).map((z,ce)=>{var _e,Ce;return W.createElement(UA,{key:z.id,icons:w,index:ce,toast:z,defaultRichColors:h,duration:(_e=g==null?void 0:g.duration)!=null?_e:p,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:b,closeButton:(Ce=g==null?void 0:g.closeButton)!=null?Ce:o,interacting:$,position:Y,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:re,toasts:S.filter(K=>K.position==z.position),heights:R.filter(K=>K.position==z.position),setHeights:I,expandByDefault:i,gap:x,loadingIcon:y,expanded:D,pauseWhenPageIsHidden:j,swipeDirections:e.swipeDirections})})):null}))});const qA=({...e})=>{const{theme:t="system"}=mA();return a.jsx(zA,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var WA=Em[" useId ".trim().toString()]||(()=>{}),VA=0;function Dr(e){const[t,r]=f.useState(WA());return ht(()=>{e||r(n=>n??String(VA++))},[e]),e||(t?`radix-${t}`:"")}const HA=["top","right","bottom","left"],Vs=Math.min,vr=Math.max,Zu=Math.round,Gc=Math.floor,Cn=e=>({x:e,y:e}),KA={left:"right",right:"left",bottom:"top",top:"bottom"},GA={start:"end",end:"start"};function Ip(e,t,r){return vr(e,Vs(t,r))}function Qn(e,t){return typeof e=="function"?e(t):e}function Jn(e){return e.split("-")[0]}function po(e){return e.split("-")[1]}function Cg(e){return e==="x"?"y":"x"}function Eg(e){return e==="y"?"height":"width"}const YA=new Set(["top","bottom"]);function Sn(e){return YA.has(Jn(e))?"y":"x"}function Tg(e){return Cg(Sn(e))}function QA(e,t,r){r===void 0&&(r=!1);const n=po(e),s=Tg(e),i=Eg(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=ed(o)),[o,ed(o)]}function JA(e){const t=ed(e);return[Op(e),t,Op(t)]}function Op(e){return e.replace(/start|end/g,t=>GA[t])}const Fx=["left","right"],Ux=["right","left"],XA=["top","bottom"],ZA=["bottom","top"];function eI(e,t,r){switch(e){case"top":case"bottom":return r?t?Ux:Fx:t?Fx:Ux;case"left":case"right":return t?XA:ZA;default:return[]}}function tI(e,t,r,n){const s=po(e);let i=eI(Jn(e),r==="start",n);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(Op)))),i}function ed(e){return e.replace(/left|right|bottom|top/g,t=>KA[t])}function rI(e){return{top:0,right:0,bottom:0,left:0,...e}}function Lj(e){return typeof e!="number"?rI(e):{top:e,right:e,bottom:e,left:e}}function td(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function Bx(e,t,r){let{reference:n,floating:s}=e;const i=Sn(t),o=Tg(t),l=Eg(o),c=Jn(t),u=i==="y",d=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,p=n[l]/2-s[l]/2;let m;switch(c){case"top":m={x:d,y:n.y-s.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:h};break;case"left":m={x:n.x-s.width,y:h};break;default:m={x:n.x,y:n.y}}switch(po(t)){case"start":m[o]-=p*(r&&u?-1:1);break;case"end":m[o]+=p*(r&&u?-1:1);break}return m}const nI=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:h}=Bx(u,n,c),p=n,m={},b=0;for(let g=0;g<l.length;g++){const{name:v,fn:x}=l[g],{x:y,y:w,data:_,reset:j}=await x({x:d,y:h,initialPlacement:n,placement:p,strategy:s,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});d=y??d,h=w??h,m={...m,[v]:{...m[v],..._}},j&&b<=50&&(b++,typeof j=="object"&&(j.placement&&(p=j.placement),j.rects&&(u=j.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):j.rects),{x:d,y:h}=Bx(u,p,c)),g=-1)}return{x:d,y:h,placement:p,strategy:s,middlewareData:m}};async function Pl(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=Qn(t,e),b=Lj(m),v=l[p?h==="floating"?"reference":"floating":h],x=td(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(v)))==null||r?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),y=h==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),_=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},j=td(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:w,strategy:c}):y);return{top:(x.top-j.top+b.top)/_.y,bottom:(j.bottom-x.bottom+b.bottom)/_.y,left:(x.left-j.left+b.left)/_.x,right:(j.right-x.right+b.right)/_.x}}const sI=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=Qn(e,t)||{};if(u==null)return{};const h=Lj(d),p={x:r,y:n},m=Tg(s),b=Eg(m),g=await o.getDimensions(u),v=m==="y",x=v?"top":"left",y=v?"bottom":"right",w=v?"clientHeight":"clientWidth",_=i.reference[b]+i.reference[m]-p[m]-i.floating[b],j=p[m]-i.reference[m],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let N=S?S[w]:0;(!N||!await(o.isElement==null?void 0:o.isElement(S)))&&(N=l.floating[w]||i.floating[b]);const k=_/2-j/2,R=N/2-g[b]/2-1,I=Vs(h[x],R),D=Vs(h[y],R),A=I,$=N-g[b]-D,O=N/2-g[b]/2+k,X=Ip(A,O,$),U=!c.arrow&&po(s)!=null&&O!==X&&i.reference[b]/2-(O<A?I:D)-g[b]/2<0,J=U?O<A?O-A:O-$:0;return{[m]:p[m]+J,data:{[m]:X,centerOffset:O-X-J,...U&&{alignmentOffset:J}},reset:U}}}),iI=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:g=!0,...v}=Qn(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const x=Jn(s),y=Sn(l),w=Jn(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=p||(w||!g?[ed(l)]:JA(l)),S=b!=="none";!p&&S&&j.push(...tI(l,g,b,_));const N=[l,...j],k=await Pl(t,v),R=[];let I=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&R.push(k[x]),h){const O=QA(s,o,_);R.push(k[O[0]],k[O[1]])}if(I=[...I,{placement:s,overflows:R}],!R.every(O=>O<=0)){var D,A;const O=(((D=i.flip)==null?void 0:D.index)||0)+1,X=N[O];if(X&&(!(h==="alignment"?y!==Sn(X):!1)||I.every(T=>T.overflows[0]>0&&Sn(T.placement)===y)))return{data:{index:O,overflows:I},reset:{placement:X}};let U=(A=I.filter(J=>J.overflows[0]<=0).sort((J,T)=>J.overflows[1]-T.overflows[1])[0])==null?void 0:A.placement;if(!U)switch(m){case"bestFit":{var $;const J=($=I.filter(T=>{if(S){const E=Sn(T.placement);return E===y||E==="y"}return!0}).map(T=>[T.placement,T.overflows.filter(E=>E>0).reduce((E,B)=>E+B,0)]).sort((T,E)=>T[1]-E[1])[0])==null?void 0:$[0];J&&(U=J);break}case"initialPlacement":U=l;break}if(s!==U)return{reset:{placement:U}}}return{}}}};function zx(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function qx(e){return HA.some(t=>e[t]>=0)}const aI=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=Qn(e,t);switch(n){case"referenceHidden":{const i=await Pl(t,{...s,elementContext:"reference"}),o=zx(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:qx(o)}}}case"escaped":{const i=await Pl(t,{...s,altBoundary:!0}),o=zx(i,r.floating);return{data:{escapedOffsets:o,escaped:qx(o)}}}default:return{}}}}},$j=new Set(["left","top"]);async function oI(e,t){const{placement:r,platform:n,elements:s}=e,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=Jn(r),l=po(r),c=Sn(r)==="y",u=$j.has(o)?-1:1,d=i&&c?-1:1,h=Qn(t,e);let{mainAxis:p,crossAxis:m,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof b=="number"&&(m=l==="end"?b*-1:b),c?{x:m*d,y:p*u}:{x:p*u,y:m*d}}const lI=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:i,placement:o,middlewareData:l}=t,c=await oI(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},cI=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x,y}=v;return{x,y}}},...c}=Qn(e,t),u={x:r,y:n},d=await Pl(t,c),h=Sn(Jn(s)),p=Cg(h);let m=u[p],b=u[h];if(i){const v=p==="y"?"top":"left",x=p==="y"?"bottom":"right",y=m+d[v],w=m-d[x];m=Ip(y,m,w)}if(o){const v=h==="y"?"top":"left",x=h==="y"?"bottom":"right",y=b+d[v],w=b-d[x];b=Ip(y,b,w)}const g=l.fn({...t,[p]:m,[h]:b});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[p]:i,[h]:o}}}}}},uI=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Qn(e,t),d={x:r,y:n},h=Sn(s),p=Cg(h);let m=d[p],b=d[h];const g=Qn(l,t),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const w=p==="y"?"height":"width",_=i.reference[p]-i.floating[w]+v.mainAxis,j=i.reference[p]+i.reference[w]-v.mainAxis;m<_?m=_:m>j&&(m=j)}if(u){var x,y;const w=p==="y"?"width":"height",_=$j.has(Jn(s)),j=i.reference[h]-i.floating[w]+(_&&((x=o.offset)==null?void 0:x[h])||0)+(_?0:v.crossAxis),S=i.reference[h]+i.reference[w]+(_?0:((y=o.offset)==null?void 0:y[h])||0)-(_?v.crossAxis:0);b<j?b=j:b>S&&(b=S)}return{[p]:m,[h]:b}}}},dI=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=Qn(e,t),d=await Pl(t,u),h=Jn(s),p=po(s),m=Sn(s)==="y",{width:b,height:g}=i.floating;let v,x;h==="top"||h==="bottom"?(v=h,x=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=h,v=p==="end"?"top":"bottom");const y=g-d.top-d.bottom,w=b-d.left-d.right,_=Vs(g-d[v],y),j=Vs(b-d[x],w),S=!t.middlewareData.shift;let N=_,k=j;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(k=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(N=y),S&&!p){const I=vr(d.left,0),D=vr(d.right,0),A=vr(d.top,0),$=vr(d.bottom,0);m?k=b-2*(I!==0||D!==0?I+D:vr(d.left,d.right)):N=g-2*(A!==0||$!==0?A+$:vr(d.top,d.bottom))}await c({...t,availableWidth:k,availableHeight:N});const R=await o.getDimensions(l.floating);return b!==R.width||g!==R.height?{reset:{rects:!0}}:{}}}};function qd(){return typeof window<"u"}function mo(e){return Fj(e)?(e.nodeName||"").toLowerCase():"#document"}function jr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Tn(e){var t;return(t=(Fj(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Fj(e){return qd()?e instanceof Node||e instanceof jr(e).Node:!1}function an(e){return qd()?e instanceof Element||e instanceof jr(e).Element:!1}function En(e){return qd()?e instanceof HTMLElement||e instanceof jr(e).HTMLElement:!1}function Wx(e){return!qd()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof jr(e).ShadowRoot}const hI=new Set(["inline","contents"]);function uc(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=on(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!hI.has(s)}const fI=new Set(["table","td","th"]);function pI(e){return fI.has(mo(e))}const mI=[":popover-open",":modal"];function Wd(e){return mI.some(t=>{try{return e.matches(t)}catch{return!1}})}const gI=["transform","translate","scale","rotate","perspective"],vI=["transform","translate","scale","rotate","perspective","filter"],yI=["paint","layout","strict","content"];function Rg(e){const t=Pg(),r=an(e)?on(e):e;return gI.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||vI.some(n=>(r.willChange||"").includes(n))||yI.some(n=>(r.contain||"").includes(n))}function xI(e){let t=Hs(e);for(;En(t)&&!ro(t);){if(Rg(t))return t;if(Wd(t))return null;t=Hs(t)}return null}function Pg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const wI=new Set(["html","body","#document"]);function ro(e){return wI.has(mo(e))}function on(e){return jr(e).getComputedStyle(e)}function Vd(e){return an(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Hs(e){if(mo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Wx(e)&&e.host||Tn(e);return Wx(t)?t.host:t}function Uj(e){const t=Hs(e);return ro(t)?e.ownerDocument?e.ownerDocument.body:e.body:En(t)&&uc(t)?t:Uj(t)}function Al(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=Uj(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),o=jr(s);if(i){const l=Mp(o);return t.concat(o,o.visualViewport||[],uc(s)?s:[],l&&r?Al(l):[])}return t.concat(s,Al(s,[],r))}function Mp(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Bj(e){const t=on(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=En(e),i=s?e.offsetWidth:r,o=s?e.offsetHeight:n,l=Zu(r)!==i||Zu(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function Ag(e){return an(e)?e:e.contextElement}function Aa(e){const t=Ag(e);if(!En(t))return Cn(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:i}=Bj(t);let o=(i?Zu(r.width):r.width)/n,l=(i?Zu(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const bI=Cn(0);function zj(e){const t=jr(e);return!Pg()||!t.visualViewport?bI:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function _I(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==jr(e)?!1:t}function Li(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),i=Ag(e);let o=Cn(1);t&&(n?an(n)&&(o=Aa(n)):o=Aa(e));const l=_I(i,r,n)?zj(i):Cn(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const p=jr(i),m=n&&an(n)?jr(n):n;let b=p,g=Mp(b);for(;g&&n&&m!==b;){const v=Aa(g),x=g.getBoundingClientRect(),y=on(g),w=x.left+(g.clientLeft+parseFloat(y.paddingLeft))*v.x,_=x.top+(g.clientTop+parseFloat(y.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,h*=v.y,c+=w,u+=_,b=jr(g),g=Mp(b)}}return td({width:d,height:h,x:c,y:u})}function Ig(e,t){const r=Vd(e).scrollLeft;return t?t.left+r:Li(Tn(e)).left+r}function qj(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:Ig(e,n)),i=n.top+t.scrollTop;return{x:s,y:i}}function jI(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const i=s==="fixed",o=Tn(n),l=t?Wd(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=Cn(1);const d=Cn(0),h=En(n);if((h||!h&&!i)&&((mo(n)!=="body"||uc(o))&&(c=Vd(n)),En(n))){const m=Li(n);u=Aa(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const p=o&&!h&&!i?qj(o,c,!0):Cn(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+p.x,y:r.y*u.y-c.scrollTop*u.y+d.y+p.y}}function SI(e){return Array.from(e.getClientRects())}function NI(e){const t=Tn(e),r=Vd(e),n=e.ownerDocument.body,s=vr(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=vr(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Ig(e);const l=-r.scrollTop;return on(n).direction==="rtl"&&(o+=vr(t.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:l}}function kI(e,t){const r=jr(e),n=Tn(e),s=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=Pg();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}const CI=new Set(["absolute","fixed"]);function EI(e,t){const r=Li(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,i=En(e)?Aa(e):Cn(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,u=n*i.y;return{width:o,height:l,x:c,y:u}}function Vx(e,t,r){let n;if(t==="viewport")n=kI(e,r);else if(t==="document")n=NI(Tn(e));else if(an(t))n=EI(t,r);else{const s=zj(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return td(n)}function Wj(e,t){const r=Hs(e);return r===t||!an(r)||ro(r)?!1:on(r).position==="fixed"||Wj(r,t)}function TI(e,t){const r=t.get(e);if(r)return r;let n=Al(e,[],!1).filter(l=>an(l)&&mo(l)!=="body"),s=null;const i=on(e).position==="fixed";let o=i?Hs(e):e;for(;an(o)&&!ro(o);){const l=on(o),c=Rg(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&CI.has(s.position)||uc(o)&&!c&&Wj(e,o))?n=n.filter(d=>d!==o):s=l,o=Hs(o)}return t.set(e,n),n}function RI(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const o=[...r==="clippingAncestors"?Wd(t)?[]:TI(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const h=Vx(t,d,s);return u.top=vr(h.top,u.top),u.right=Vs(h.right,u.right),u.bottom=Vs(h.bottom,u.bottom),u.left=vr(h.left,u.left),u},Vx(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function PI(e){const{width:t,height:r}=Bj(e);return{width:t,height:r}}function AI(e,t,r){const n=En(t),s=Tn(t),i=r==="fixed",o=Li(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Cn(0);function u(){c.x=Ig(s)}if(n||!n&&!i)if((mo(t)!=="body"||uc(s))&&(l=Vd(t)),n){const m=Li(t,!0,i,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else s&&u();i&&!n&&s&&u();const d=s&&!n&&!i?qj(s,l):Cn(0),h=o.left+l.scrollLeft-c.x-d.x,p=o.top+l.scrollTop-c.y-d.y;return{x:h,y:p,width:o.width,height:o.height}}function sf(e){return on(e).position==="static"}function Hx(e,t){if(!En(e)||on(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Tn(e)===r&&(r=r.ownerDocument.body),r}function Vj(e,t){const r=jr(e);if(Wd(e))return r;if(!En(e)){let s=Hs(e);for(;s&&!ro(s);){if(an(s)&&!sf(s))return s;s=Hs(s)}return r}let n=Hx(e,t);for(;n&&pI(n)&&sf(n);)n=Hx(n,t);return n&&ro(n)&&sf(n)&&!Rg(n)?r:n||xI(e)||r}const II=async function(e){const t=this.getOffsetParent||Vj,r=this.getDimensions,n=await r(e.floating);return{reference:AI(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function OI(e){return on(e).direction==="rtl"}const MI={convertOffsetParentRelativeRectToViewportRelativeRect:jI,getDocumentElement:Tn,getClippingRect:RI,getOffsetParent:Vj,getElementRects:II,getClientRects:SI,getDimensions:PI,getScale:Aa,isElement:an,isRTL:OI};function Hj(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function DI(e,t){let r=null,n;const s=Tn(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:p,height:m}=u;if(l||t(),!p||!m)return;const b=Gc(h),g=Gc(s.clientWidth-(d+p)),v=Gc(s.clientHeight-(h+m)),x=Gc(d),w={rootMargin:-b+"px "+-g+"px "+-v+"px "+-x+"px",threshold:vr(0,Vs(1,c))||1};let _=!0;function j(S){const N=S[0].intersectionRatio;if(N!==c){if(!_)return o();N?o(!1,N):n=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!Hj(u,e.getBoundingClientRect())&&o(),_=!1}try{r=new IntersectionObserver(j,{...w,root:s.ownerDocument})}catch{r=new IntersectionObserver(j,w)}r.observe(e)}return o(!0),i}function LI(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Ag(e),d=s||i?[...u?Al(u):[],...Al(t)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",r,{passive:!0}),i&&x.addEventListener("resize",r)});const h=u&&l?DI(u,r):null;let p=-1,m=null;o&&(m=new ResizeObserver(x=>{let[y]=x;y&&y.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(t)})),r()}),u&&!c&&m.observe(u),m.observe(t));let b,g=c?Li(e):null;c&&v();function v(){const x=Li(e);g&&!Hj(g,x)&&r(),g=x,b=requestAnimationFrame(v)}return r(),()=>{var x;d.forEach(y=>{s&&y.removeEventListener("scroll",r),i&&y.removeEventListener("resize",r)}),h==null||h(),(x=m)==null||x.disconnect(),m=null,c&&cancelAnimationFrame(b)}}const $I=lI,FI=cI,UI=iI,BI=dI,zI=aI,Kx=sI,qI=uI,WI=(e,t,r)=>{const n=new Map,s={platform:MI,...r},i={...s.platform,_c:n};return nI(e,t,{...s,platform:i})};var VI=typeof document<"u",HI=function(){},bu=VI?f.useLayoutEffect:HI;function rd(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!rd(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&e.$$typeof)&&!rd(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function Kj(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Gx(e,t){const r=Kj(e);return Math.round(t*r)/r}function af(e){const t=f.useRef(e);return bu(()=>{t.current=e}),t}function KI(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=f.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,m]=f.useState(n);rd(p,n)||m(n);const[b,g]=f.useState(null),[v,x]=f.useState(null),y=f.useCallback(T=>{T!==S.current&&(S.current=T,g(T))},[]),w=f.useCallback(T=>{T!==N.current&&(N.current=T,x(T))},[]),_=i||b,j=o||v,S=f.useRef(null),N=f.useRef(null),k=f.useRef(d),R=c!=null,I=af(c),D=af(s),A=af(u),$=f.useCallback(()=>{if(!S.current||!N.current)return;const T={placement:t,strategy:r,middleware:p};D.current&&(T.platform=D.current),WI(S.current,N.current,T).then(E=>{const B={...E,isPositioned:A.current!==!1};O.current&&!rd(k.current,B)&&(k.current=B,hn.flushSync(()=>{h(B)}))})},[p,t,r,D,A]);bu(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,h(T=>({...T,isPositioned:!1})))},[u]);const O=f.useRef(!1);bu(()=>(O.current=!0,()=>{O.current=!1}),[]),bu(()=>{if(_&&(S.current=_),j&&(N.current=j),_&&j){if(I.current)return I.current(_,j,$);$()}},[_,j,$,I,R]);const X=f.useMemo(()=>({reference:S,floating:N,setReference:y,setFloating:w}),[y,w]),U=f.useMemo(()=>({reference:_,floating:j}),[_,j]),J=f.useMemo(()=>{const T={position:r,left:0,top:0};if(!U.floating)return T;const E=Gx(U.floating,d.x),B=Gx(U.floating,d.y);return l?{...T,transform:"translate("+E+"px, "+B+"px)",...Kj(U.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:E,top:B}},[r,l,U.floating,d.x,d.y]);return f.useMemo(()=>({...d,update:$,refs:X,elements:U,floatingStyles:J}),[d,$,X,U,J])}const GI=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Kx({element:n.current,padding:s}).fn(r):{}:n?Kx({element:n,padding:s}).fn(r):{}}}},YI=(e,t)=>({...$I(e),options:[e,t]}),QI=(e,t)=>({...FI(e),options:[e,t]}),JI=(e,t)=>({...qI(e),options:[e,t]}),XI=(e,t)=>({...UI(e),options:[e,t]}),ZI=(e,t)=>({...BI(e),options:[e,t]}),eO=(e,t)=>({...zI(e),options:[e,t]}),tO=(e,t)=>({...GI(e),options:[e,t]});var rO="Arrow",Gj=f.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...i}=e;return a.jsx(oe.svg,{...i,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});Gj.displayName=rO;var nO=Gj;function Og(e){const[t,r]=f.useState(void 0);return ht(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Mg="Popper",[Yj,go]=Mt(Mg),[sO,Qj]=Yj(Mg),Jj=e=>{const{__scopePopper:t,children:r}=e,[n,s]=f.useState(null);return a.jsx(sO,{scope:t,anchor:n,onAnchorChange:s,children:r})};Jj.displayName=Mg;var Xj="PopperAnchor",Zj=f.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,i=Qj(Xj,r),o=f.useRef(null),l=Ne(t,o);return f.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:a.jsx(oe.div,{...s,ref:l})});Zj.displayName=Xj;var Dg="PopperContent",[iO,aO]=Yj(Dg),e1=f.forwardRef((e,t)=>{var z,ce,_e,Ce,K,te;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:b,...g}=e,v=Qj(Dg,r),[x,y]=f.useState(null),w=Ne(t,xe=>y(xe)),[_,j]=f.useState(null),S=Og(_),N=(S==null?void 0:S.width)??0,k=(S==null?void 0:S.height)??0,R=n+(i!=="center"?"-"+i:""),I=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},D=Array.isArray(u)?u:[u],A=D.length>0,$={padding:I,boundary:D.filter(lO),altBoundary:A},{refs:O,floatingStyles:X,placement:U,isPositioned:J,middlewareData:T}=KI({strategy:"fixed",placement:R,whileElementsMounted:(...xe)=>LI(...xe,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[YI({mainAxis:s+k,alignmentAxis:o}),c&&QI({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?JI():void 0,...$}),c&&XI({...$}),ZI({...$,apply:({elements:xe,rects:Te,availableWidth:Ee,availableHeight:Oe})=>{const{width:Me,height:vt}=Te.reference,Qe=xe.floating.style;Qe.setProperty("--radix-popper-available-width",`${Ee}px`),Qe.setProperty("--radix-popper-available-height",`${Oe}px`),Qe.setProperty("--radix-popper-anchor-width",`${Me}px`),Qe.setProperty("--radix-popper-anchor-height",`${vt}px`)}}),_&&tO({element:_,padding:l}),cO({arrowWidth:N,arrowHeight:k}),p&&eO({strategy:"referenceHidden",...$})]}),[E,B]=n1(U),re=dt(b);ht(()=>{J&&(re==null||re())},[J,re]);const Y=(z=T.arrow)==null?void 0:z.x,fe=(ce=T.arrow)==null?void 0:ce.y,q=((_e=T.arrow)==null?void 0:_e.centerOffset)!==0,[de,he]=f.useState();return ht(()=>{x&&he(window.getComputedStyle(x).zIndex)},[x]),a.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:J?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:de,"--radix-popper-transform-origin":[(Ce=T.transformOrigin)==null?void 0:Ce.x,(K=T.transformOrigin)==null?void 0:K.y].join(" "),...((te=T.hide)==null?void 0:te.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(iO,{scope:r,placedSide:E,onArrowChange:j,arrowX:Y,arrowY:fe,shouldHideArrow:q,children:a.jsx(oe.div,{"data-side":E,"data-align":B,...g,ref:w,style:{...g.style,animation:J?void 0:"none"}})})})});e1.displayName=Dg;var t1="PopperArrow",oO={top:"bottom",right:"left",bottom:"top",left:"right"},r1=f.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,i=aO(t1,n),o=oO[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(nO,{...s,ref:r,style:{...s.style,display:"block"}})})});r1.displayName=t1;function lO(e){return e!==null}var cO=e=>({name:"transformOrigin",options:e,fn(t){var v,x,y;const{placement:r,rects:n,middlewareData:s}=t,o=((v=s.arrow)==null?void 0:v.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=n1(r),h={start:"0%",center:"50%",end:"100%"}[d],p=(((x=s.arrow)==null?void 0:x.x)??0)+l/2,m=(((y=s.arrow)==null?void 0:y.y)??0)+c/2;let b="",g="";return u==="bottom"?(b=o?h:`${p}px`,g=`${-c}px`):u==="top"?(b=o?h:`${p}px`,g=`${n.floating.height+c}px`):u==="right"?(b=`${-c}px`,g=o?h:`${m}px`):u==="left"&&(b=`${n.floating.width+c}px`,g=o?h:`${m}px`),{data:{x:b,y:g}}}});function n1(e){const[t,r="center"]=e.split("-");return[t,r]}var s1=Jj,Lg=Zj,$g=e1,Fg=r1,[Hd,uz]=Mt("Tooltip",[go]),Ug=go(),i1="TooltipProvider",uO=700,Yx="tooltip.open",[dO,a1]=Hd(i1),o1=e=>{const{__scopeTooltip:t,delayDuration:r=uO,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=e,o=f.useRef(!0),l=f.useRef(!1),c=f.useRef(0);return f.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(dO,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:f.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:f.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:f.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};o1.displayName=i1;var l1="Tooltip",[dz,Kd]=Hd(l1),Dp="TooltipTrigger",hO=f.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=Kd(Dp,r),i=a1(Dp,r),o=Ug(r),l=f.useRef(null),c=Ne(t,l,s.onTriggerChange),u=f.useRef(!1),d=f.useRef(!1),h=f.useCallback(()=>u.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),a.jsx(Lg,{asChild:!0,...o,children:a.jsx(oe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:G(e.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:G(e.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:G(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:G(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:G(e.onBlur,s.onClose),onClick:G(e.onClick,s.onClose)})})});hO.displayName=Dp;var fO="TooltipPortal",[hz,pO]=Hd(fO,{forceMount:void 0}),no="TooltipContent",c1=f.forwardRef((e,t)=>{const r=pO(no,e.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...i}=e,o=Kd(no,e.__scopeTooltip);return a.jsx(Dt,{present:n||o.open,children:o.disableHoverableContent?a.jsx(u1,{side:s,...i,ref:t}):a.jsx(mO,{side:s,...i,ref:t})})}),mO=f.forwardRef((e,t)=>{const r=Kd(no,e.__scopeTooltip),n=a1(no,e.__scopeTooltip),s=f.useRef(null),i=Ne(t,s),[o,l]=f.useState(null),{trigger:c,onClose:u}=r,d=s.current,{onPointerInTransitChange:h}=n,p=f.useCallback(()=>{l(null),h(!1)},[h]),m=f.useCallback((b,g)=>{const v=b.currentTarget,x={x:b.clientX,y:b.clientY},y=wO(x,v.getBoundingClientRect()),w=bO(x,y),_=_O(g.getBoundingClientRect()),j=SO([...w,..._]);l(j),h(!0)},[h]);return f.useEffect(()=>()=>p(),[p]),f.useEffect(()=>{if(c&&d){const b=v=>m(v,d),g=v=>m(v,c);return c.addEventListener("pointerleave",b),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",b),d.removeEventListener("pointerleave",g)}}},[c,d,m,p]),f.useEffect(()=>{if(o){const b=g=>{const v=g.target,x={x:g.clientX,y:g.clientY},y=(c==null?void 0:c.contains(v))||(d==null?void 0:d.contains(v)),w=!jO(x,o);y?p():w&&(p(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,d,o,u,p]),a.jsx(u1,{...e,ref:i})}),[gO,vO]=Hd(l1,{isInside:!1}),yO=K_("TooltipContent"),u1=f.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=Kd(no,r),u=Ug(r),{onClose:d}=c;return f.useEffect(()=>(document.addEventListener(Yx,d),()=>document.removeEventListener(Yx,d)),[d]),f.useEffect(()=>{if(c.trigger){const h=p=>{const m=p.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),a.jsx(co,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:a.jsxs($g,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(yO,{children:n}),a.jsx(gO,{scope:r,isInside:!0,children:a.jsx(zR,{id:c.contentId,role:"tooltip",children:s||n})})]})})});c1.displayName=no;var d1="TooltipArrow",xO=f.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=Ug(r);return vO(d1,r).isInside?null:a.jsx(Fg,{...s,...n,ref:t})});xO.displayName=d1;function wO(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,s,i)){case i:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function bO(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function _O(e){const{top:t,right:r,bottom:n,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:n},{x:s,y:n}]}function jO(e,t){const{x:r,y:n}=e;let s=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,h=c.x,p=c.y;d>n!=p>n&&r<(h-u)*(n-d)/(p-d)+u&&(s=!s)}return s}function SO(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),NO(t)}function NO(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const s=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const s=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))r.pop();else break}r.push(s)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var kO=o1,h1=c1;const CO=kO,EO=f.forwardRef(({className:e,sideOffset:t=4,...r},n)=>a.jsx(h1,{ref:n,sideOffset:t,className:H("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));EO.displayName=h1.displayName;var vo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$i=typeof window>"u"||"Deno"in globalThis;function Qt(){}function TO(e,t){return typeof e=="function"?e(t):e}function Lp(e){return typeof e=="number"&&e>=0&&e!==1/0}function f1(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Fs(e,t){return typeof e=="function"?e(t):e}function Er(e,t){return typeof e=="function"?e(t):e}function Qx(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==Bg(o,t.options))return!1}else if(!Il(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function Jx(e,t){const{exact:r,status:n,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Fi(t.options.mutationKey)!==Fi(i))return!1}else if(!Il(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function Bg(e,t){return((t==null?void 0:t.queryKeyHashFn)||Fi)(e)}function Fi(e){return JSON.stringify(e,(t,r)=>$p(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Il(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Il(e[r],t[r])):!1}function p1(e,t){if(e===t)return e;const r=Xx(e)&&Xx(t);if(r||$p(e)&&$p(t)){const n=r?e:Object.keys(e),s=n.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{},c=new Set(n);let u=0;for(let d=0;d<o;d++){const h=r?d:i[d];(!r&&c.has(h)||r)&&e[h]===void 0&&t[h]===void 0?(l[h]=void 0,u++):(l[h]=p1(e[h],t[h]),l[h]===e[h]&&e[h]!==void 0&&u++)}return s===o&&u===s?e:l}return t}function nd(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Xx(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function $p(e){if(!Zx(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Zx(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Zx(e){return Object.prototype.toString.call(e)==="[object Object]"}function RO(e){return new Promise(t=>{setTimeout(t,e)})}function Fp(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?p1(e,t):t}function PO(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function AO(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var zg=Symbol();function m1(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===zg?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function g1(e,t){return typeof e=="function"?e(...t):!!e}var xi,ys,La,b0,IO=(b0=class extends vo{constructor(){super();me(this,xi);me(this,ys);me(this,La);ie(this,La,t=>{if(!$i&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){C(this,ys)||this.setEventListener(C(this,La))}onUnsubscribe(){var t;this.hasListeners()||((t=C(this,ys))==null||t.call(this),ie(this,ys,void 0))}setEventListener(t){var r;ie(this,La,t),(r=C(this,ys))==null||r.call(this),ie(this,ys,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){C(this,xi)!==t&&(ie(this,xi,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof C(this,xi)=="boolean"?C(this,xi):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},xi=new WeakMap,ys=new WeakMap,La=new WeakMap,b0),qg=new IO,$a,xs,Fa,_0,OO=(_0=class extends vo{constructor(){super();me(this,$a,!0);me(this,xs);me(this,Fa);ie(this,Fa,t=>{if(!$i&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){C(this,xs)||this.setEventListener(C(this,Fa))}onUnsubscribe(){var t;this.hasListeners()||((t=C(this,xs))==null||t.call(this),ie(this,xs,void 0))}setEventListener(t){var r;ie(this,Fa,t),(r=C(this,xs))==null||r.call(this),ie(this,xs,t(this.setOnline.bind(this)))}setOnline(t){C(this,$a)!==t&&(ie(this,$a,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return C(this,$a)}},$a=new WeakMap,xs=new WeakMap,Fa=new WeakMap,_0),sd=new OO;function Up(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function MO(e){return Math.min(1e3*2**e,3e4)}function v1(e){return(e??"online")==="online"?sd.isOnline():!0}var y1=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function of(e){return e instanceof y1}function x1(e){let t=!1,r=0,n=!1,s;const i=Up(),o=g=>{var v;n||(p(new y1(g)),(v=e.abort)==null||v.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>qg.isFocused()&&(e.networkMode==="always"||sd.isOnline())&&e.canRun(),d=()=>v1(e.networkMode)&&e.canRun(),h=g=>{var v;n||(n=!0,(v=e.onSuccess)==null||v.call(e,g),s==null||s(),i.resolve(g))},p=g=>{var v;n||(n=!0,(v=e.onError)==null||v.call(e,g),s==null||s(),i.reject(g))},m=()=>new Promise(g=>{var v;s=x=>{(n||u())&&g(x)},(v=e.onPause)==null||v.call(e)}).then(()=>{var g;s=void 0,n||(g=e.onContinue)==null||g.call(e)}),b=()=>{if(n)return;let g;const v=r===0?e.initialPromise:void 0;try{g=v??e.fn()}catch(x){g=Promise.reject(x)}Promise.resolve(g).then(h).catch(x=>{var S;if(n)return;const y=e.retry??($i?0:3),w=e.retryDelay??MO,_=typeof w=="function"?w(r,x):w,j=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,x);if(t||!j){p(x);return}r++,(S=e.onFail)==null||S.call(e,r,x),RO(_).then(()=>u()?void 0:m()).then(()=>{t?p(x):b()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?b():m().then(b),i)}}var DO=e=>setTimeout(e,0);function LO(){let e=[],t=0,r=l=>{l()},n=l=>{l()},s=DO;const i=l=>{t?e.push(l):s(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var jt=LO(),wi,j0,w1=(j0=class{constructor(){me(this,wi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Lp(this.gcTime)&&ie(this,wi,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??($i?1/0:5*60*1e3))}clearGcTimeout(){C(this,wi)&&(clearTimeout(C(this,wi)),ie(this,wi,void 0))}},wi=new WeakMap,j0),Ua,bi,Cr,_i,Bt,Yl,ji,Jr,On,S0,$O=(S0=class extends w1{constructor(t){super();me(this,Jr);me(this,Ua);me(this,bi);me(this,Cr);me(this,_i);me(this,Bt);me(this,Yl);me(this,ji);ie(this,ji,!1),ie(this,Yl,t.defaultOptions),this.setOptions(t.options),this.observers=[],ie(this,_i,t.client),ie(this,Cr,C(this,_i).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ie(this,Ua,FO(this.options)),this.state=t.state??C(this,Ua),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=C(this,Bt))==null?void 0:t.promise}setOptions(t){this.options={...C(this,Yl),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&C(this,Cr).remove(this)}setData(t,r){const n=Fp(this.state.data,t,this.options);return Pe(this,Jr,On).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Pe(this,Jr,On).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=C(this,Bt))==null?void 0:n.promise;return(s=C(this,Bt))==null||s.cancel(t),r?r.then(Qt).catch(Qt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(C(this,Ua))}isActive(){return this.observers.some(t=>Er(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===zg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Fs(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!f1(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=C(this,Bt))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=C(this,Bt))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),C(this,Cr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(C(this,Bt)&&(C(this,ji)?C(this,Bt).cancel({revert:!0}):C(this,Bt).cancelRetry()),this.scheduleGc()),C(this,Cr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Pe(this,Jr,On).call(this,{type:"invalidate"})}fetch(t,r){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(C(this,Bt))return C(this,Bt).continueRetry(),C(this,Bt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const p=this.observers.find(m=>m.options.queryFn);p&&this.setOptions(p.options)}const n=new AbortController,s=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(ie(this,ji,!0),n.signal)})},i=()=>{const p=m1(this.options,r),b=(()=>{const g={client:C(this,_i),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return ie(this,ji,!1),this.options.persister?this.options.persister(p,b,this):p(b)},l=(()=>{const p={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:C(this,_i),state:this.state,fetchFn:i};return s(p),p})();(u=this.options.behavior)==null||u.onFetch(l,this),ie(this,bi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Pe(this,Jr,On).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=p=>{var m,b,g,v;of(p)&&p.silent||Pe(this,Jr,On).call(this,{type:"error",error:p}),of(p)||((b=(m=C(this,Cr).config).onError)==null||b.call(m,p,this),(v=(g=C(this,Cr).config).onSettled)==null||v.call(g,this.state.data,p,this)),this.scheduleGc()};return ie(this,Bt,x1({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:p=>{var m,b,g,v;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(x){c(x);return}(b=(m=C(this,Cr).config).onSuccess)==null||b.call(m,p,this),(v=(g=C(this,Cr).config).onSettled)==null||v.call(g,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,m)=>{Pe(this,Jr,On).call(this,{type:"failed",failureCount:p,error:m})},onPause:()=>{Pe(this,Jr,On).call(this,{type:"pause"})},onContinue:()=>{Pe(this,Jr,On).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),C(this,Bt).start()}},Ua=new WeakMap,bi=new WeakMap,Cr=new WeakMap,_i=new WeakMap,Bt=new WeakMap,Yl=new WeakMap,ji=new WeakMap,Jr=new WeakSet,On=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...b1(n.data,this.options),fetchMeta:t.meta??null};case"success":return ie(this,bi,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return of(s)&&s.revert&&C(this,bi)?{...C(this,bi),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),jt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),C(this,Cr).notify({query:this,type:"updated",action:t})})},S0);function b1(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:v1(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function FO(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var xn,N0,UO=(N0=class extends vo{constructor(t={}){super();me(this,xn);this.config=t,ie(this,xn,new Map)}build(t,r,n){const s=r.queryKey,i=r.queryHash??Bg(s,r);let o=this.get(i);return o||(o=new $O({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){C(this,xn).has(t.queryHash)||(C(this,xn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=C(this,xn).get(t.queryHash);r&&(t.destroy(),r===t&&C(this,xn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){jt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return C(this,xn).get(t)}getAll(){return[...C(this,xn).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Qx(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>Qx(t,n)):r}notify(t){jt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){jt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){jt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},xn=new WeakMap,N0),wn,Kt,Si,bn,us,k0,BO=(k0=class extends w1{constructor(t){super();me(this,bn);me(this,wn);me(this,Kt);me(this,Si);this.mutationId=t.mutationId,ie(this,Kt,t.mutationCache),ie(this,wn,[]),this.state=t.state||_1(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){C(this,wn).includes(t)||(C(this,wn).push(t),this.clearGcTimeout(),C(this,Kt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ie(this,wn,C(this,wn).filter(r=>r!==t)),this.scheduleGc(),C(this,Kt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){C(this,wn).length||(this.state.status==="pending"?this.scheduleGc():C(this,Kt).remove(this))}continue(){var t;return((t=C(this,Si))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,l,c,u,d,h,p,m,b,g,v,x,y,w,_,j,S,N,k;const r=()=>{Pe(this,bn,us).call(this,{type:"continue"})};ie(this,Si,x1({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(R,I)=>{Pe(this,bn,us).call(this,{type:"failed",failureCount:R,error:I})},onPause:()=>{Pe(this,bn,us).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>C(this,Kt).canRun(this)}));const n=this.state.status==="pending",s=!C(this,Si).canStart();try{if(n)r();else{Pe(this,bn,us).call(this,{type:"pending",variables:t,isPaused:s}),await((o=(i=C(this,Kt).config).onMutate)==null?void 0:o.call(i,t,this));const I=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));I!==this.state.context&&Pe(this,bn,us).call(this,{type:"pending",context:I,variables:t,isPaused:s})}const R=await C(this,Si).start();return await((d=(u=C(this,Kt).config).onSuccess)==null?void 0:d.call(u,R,t,this.state.context,this)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,R,t,this.state.context)),await((b=(m=C(this,Kt).config).onSettled)==null?void 0:b.call(m,R,null,this.state.variables,this.state.context,this)),await((v=(g=this.options).onSettled)==null?void 0:v.call(g,R,null,t,this.state.context)),Pe(this,bn,us).call(this,{type:"success",data:R}),R}catch(R){try{throw await((y=(x=C(this,Kt).config).onError)==null?void 0:y.call(x,R,t,this.state.context,this)),await((_=(w=this.options).onError)==null?void 0:_.call(w,R,t,this.state.context)),await((S=(j=C(this,Kt).config).onSettled)==null?void 0:S.call(j,void 0,R,this.state.variables,this.state.context,this)),await((k=(N=this.options).onSettled)==null?void 0:k.call(N,void 0,R,t,this.state.context)),R}finally{Pe(this,bn,us).call(this,{type:"error",error:R})}}finally{C(this,Kt).runNext(this)}}},wn=new WeakMap,Kt=new WeakMap,Si=new WeakMap,bn=new WeakSet,us=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),jt.batch(()=>{C(this,wn).forEach(n=>{n.onMutationUpdate(t)}),C(this,Kt).notify({mutation:this,type:"updated",action:t})})},k0);function _1(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var $n,Xr,Ql,C0,zO=(C0=class extends vo{constructor(t={}){super();me(this,$n);me(this,Xr);me(this,Ql);this.config=t,ie(this,$n,new Set),ie(this,Xr,new Map),ie(this,Ql,0)}build(t,r,n){const s=new BO({mutationCache:this,mutationId:++Cc(this,Ql)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){C(this,$n).add(t);const r=Yc(t);if(typeof r=="string"){const n=C(this,Xr).get(r);n?n.push(t):C(this,Xr).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(C(this,$n).delete(t)){const r=Yc(t);if(typeof r=="string"){const n=C(this,Xr).get(r);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&C(this,Xr).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Yc(t);if(typeof r=="string"){const n=C(this,Xr).get(r),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var n;const r=Yc(t);if(typeof r=="string"){const s=(n=C(this,Xr).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){jt.batch(()=>{C(this,$n).forEach(t=>{this.notify({type:"removed",mutation:t})}),C(this,$n).clear(),C(this,Xr).clear()})}getAll(){return Array.from(C(this,$n))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Jx(r,n))}findAll(t={}){return this.getAll().filter(r=>Jx(t,r))}notify(t){jt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return jt.batch(()=>Promise.all(t.map(r=>r.continue().catch(Qt))))}},$n=new WeakMap,Xr=new WeakMap,Ql=new WeakMap,C0);function Yc(e){var t;return(t=e.options.scope)==null?void 0:t.id}function ew(e){return{onFetch:(t,r)=>{var d,h,p,m,b;const n=t.options,s=(p=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,i=((m=t.state.data)==null?void 0:m.pages)||[],o=((b=t.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const v=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},x=m1(t.options,t.fetchOptions),y=async(w,_,j)=>{if(g)return Promise.reject();if(_==null&&w.pages.length)return Promise.resolve(w);const N=(()=>{const D={client:t.client,queryKey:t.queryKey,pageParam:_,direction:j?"backward":"forward",meta:t.options.meta};return v(D),D})(),k=await x(N),{maxPages:R}=t.options,I=j?AO:PO;return{pages:I(w.pages,k,R),pageParams:I(w.pageParams,_,R)}};if(s&&i.length){const w=s==="backward",_=w?qO:tw,j={pages:i,pageParams:o},S=_(n,j);l=await y(j,S,w)}else{const w=e??i.length;do{const _=c===0?o[0]??n.initialPageParam:tw(n,l);if(c>0&&_==null)break;l=await y(l,_),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var g,v;return(v=(g=t.options).persister)==null?void 0:v.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function tw(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function qO(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var lt,ws,bs,Ba,za,_s,qa,Wa,E0,WO=(E0=class{constructor(e={}){me(this,lt);me(this,ws);me(this,bs);me(this,Ba);me(this,za);me(this,_s);me(this,qa);me(this,Wa);ie(this,lt,e.queryCache||new UO),ie(this,ws,e.mutationCache||new zO),ie(this,bs,e.defaultOptions||{}),ie(this,Ba,new Map),ie(this,za,new Map),ie(this,_s,0)}mount(){Cc(this,_s)._++,C(this,_s)===1&&(ie(this,qa,qg.subscribe(async e=>{e&&(await this.resumePausedMutations(),C(this,lt).onFocus())})),ie(this,Wa,sd.subscribe(async e=>{e&&(await this.resumePausedMutations(),C(this,lt).onOnline())})))}unmount(){var e,t;Cc(this,_s)._--,C(this,_s)===0&&((e=C(this,qa))==null||e.call(this),ie(this,qa,void 0),(t=C(this,Wa))==null||t.call(this),ie(this,Wa,void 0))}isFetching(e){return C(this,lt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return C(this,ws).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=C(this,lt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=C(this,lt).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Fs(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return C(this,lt).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=C(this,lt).get(n.queryHash),i=s==null?void 0:s.state.data,o=TO(t,i);if(o!==void 0)return C(this,lt).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return jt.batch(()=>C(this,lt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=C(this,lt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=C(this,lt);jt.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=C(this,lt);return jt.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=jt.batch(()=>C(this,lt).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(Qt).catch(Qt)}invalidateQueries(e,t={}){return jt.batch(()=>(C(this,lt).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=jt.batch(()=>C(this,lt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Qt)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Qt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=C(this,lt).build(this,t);return r.isStaleByTime(Fs(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Qt).catch(Qt)}fetchInfiniteQuery(e){return e.behavior=ew(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Qt).catch(Qt)}ensureInfiniteQueryData(e){return e.behavior=ew(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return sd.isOnline()?C(this,ws).resumePausedMutations():Promise.resolve()}getQueryCache(){return C(this,lt)}getMutationCache(){return C(this,ws)}getDefaultOptions(){return C(this,bs)}setDefaultOptions(e){ie(this,bs,e)}setQueryDefaults(e,t){C(this,Ba).set(Fi(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...C(this,Ba).values()],r={};return t.forEach(n=>{Il(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){C(this,za).set(Fi(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...C(this,za).values()],r={};return t.forEach(n=>{Il(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...C(this,bs).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Bg(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===zg&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...C(this,bs).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){C(this,lt).clear(),C(this,ws).clear()}},lt=new WeakMap,ws=new WeakMap,bs=new WeakMap,Ba=new WeakMap,za=new WeakMap,_s=new WeakMap,qa=new WeakMap,Wa=new WeakMap,E0),ir,Le,Jl,Gt,Ni,Va,js,Ss,Xl,Ha,Ka,ki,Ci,Ns,Ga,We,Qo,Bp,zp,qp,Wp,Vp,Hp,Kp,j1,T0,VO=(T0=class extends vo{constructor(t,r){super();me(this,We);me(this,ir);me(this,Le);me(this,Jl);me(this,Gt);me(this,Ni);me(this,Va);me(this,js);me(this,Ss);me(this,Xl);me(this,Ha);me(this,Ka);me(this,ki);me(this,Ci);me(this,Ns);me(this,Ga,new Set);this.options=r,ie(this,ir,t),ie(this,Ss,null),ie(this,js,Up()),this.options.experimental_prefetchInRender||C(this,js).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(C(this,Le).addObserver(this),rw(C(this,Le),this.options)?Pe(this,We,Qo).call(this):this.updateResult(),Pe(this,We,Wp).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Gp(C(this,Le),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Gp(C(this,Le),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Pe(this,We,Vp).call(this),Pe(this,We,Hp).call(this),C(this,Le).removeObserver(this)}setOptions(t){const r=this.options,n=C(this,Le);if(this.options=C(this,ir).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Er(this.options.enabled,C(this,Le))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Pe(this,We,Kp).call(this),C(this,Le).setOptions(this.options),r._defaulted&&!nd(this.options,r)&&C(this,ir).getQueryCache().notify({type:"observerOptionsUpdated",query:C(this,Le),observer:this});const s=this.hasListeners();s&&nw(C(this,Le),n,this.options,r)&&Pe(this,We,Qo).call(this),this.updateResult(),s&&(C(this,Le)!==n||Er(this.options.enabled,C(this,Le))!==Er(r.enabled,C(this,Le))||Fs(this.options.staleTime,C(this,Le))!==Fs(r.staleTime,C(this,Le)))&&Pe(this,We,Bp).call(this);const i=Pe(this,We,zp).call(this);s&&(C(this,Le)!==n||Er(this.options.enabled,C(this,Le))!==Er(r.enabled,C(this,Le))||i!==C(this,Ns))&&Pe(this,We,qp).call(this,i)}getOptimisticResult(t){const r=C(this,ir).getQueryCache().build(C(this,ir),t),n=this.createResult(r,t);return KO(this,n)&&(ie(this,Gt,n),ie(this,Va,this.options),ie(this,Ni,C(this,Le).state)),n}getCurrentResult(){return C(this,Gt)}trackResult(t,r){return new Proxy(t,{get:(n,s)=>(this.trackProp(s),r==null||r(s),Reflect.get(n,s))})}trackProp(t){C(this,Ga).add(t)}getCurrentQuery(){return C(this,Le)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=C(this,ir).defaultQueryOptions(t),n=C(this,ir).getQueryCache().build(C(this,ir),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return Pe(this,We,Qo).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),C(this,Gt)))}createResult(t,r){var R;const n=C(this,Le),s=this.options,i=C(this,Gt),o=C(this,Ni),l=C(this,Va),u=t!==n?t.state:C(this,Jl),{state:d}=t;let h={...d},p=!1,m;if(r._optimisticResults){const I=this.hasListeners(),D=!I&&rw(t,r),A=I&&nw(t,n,r,s);(D||A)&&(h={...h,...b1(d.data,t.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:b,errorUpdatedAt:g,status:v}=h;m=h.data;let x=!1;if(r.placeholderData!==void 0&&m===void 0&&v==="pending"){let I;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(I=i.data,x=!0):I=typeof r.placeholderData=="function"?r.placeholderData((R=C(this,Ka))==null?void 0:R.state.data,C(this,Ka)):r.placeholderData,I!==void 0&&(v="success",m=Fp(i==null?void 0:i.data,I,r),p=!0)}if(r.select&&m!==void 0&&!x)if(i&&m===(o==null?void 0:o.data)&&r.select===C(this,Xl))m=C(this,Ha);else try{ie(this,Xl,r.select),m=r.select(m),m=Fp(i==null?void 0:i.data,m,r),ie(this,Ha,m),ie(this,Ss,null)}catch(I){ie(this,Ss,I)}C(this,Ss)&&(b=C(this,Ss),m=C(this,Ha),g=Date.now(),v="error");const y=h.fetchStatus==="fetching",w=v==="pending",_=v==="error",j=w&&y,S=m!==void 0,k={status:v,fetchStatus:h.fetchStatus,isPending:w,isSuccess:v==="success",isError:_,isInitialLoading:j,isLoading:j,data:m,dataUpdatedAt:h.dataUpdatedAt,error:b,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!w,isLoadingError:_&&!S,isPaused:h.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:_&&S,isStale:Wg(t,r),refetch:this.refetch,promise:C(this,js),isEnabled:Er(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const I=$=>{k.status==="error"?$.reject(k.error):k.data!==void 0&&$.resolve(k.data)},D=()=>{const $=ie(this,js,k.promise=Up());I($)},A=C(this,js);switch(A.status){case"pending":t.queryHash===n.queryHash&&I(A);break;case"fulfilled":(k.status==="error"||k.data!==A.value)&&D();break;case"rejected":(k.status!=="error"||k.error!==A.reason)&&D();break}}return k}updateResult(){const t=C(this,Gt),r=this.createResult(C(this,Le),this.options);if(ie(this,Ni,C(this,Le).state),ie(this,Va,this.options),C(this,Ni).data!==void 0&&ie(this,Ka,C(this,Le)),nd(r,t))return;ie(this,Gt,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!C(this,Ga).size)return!0;const o=new Set(i??C(this,Ga));return this.options.throwOnError&&o.add("error"),Object.keys(C(this,Gt)).some(l=>{const c=l;return C(this,Gt)[c]!==t[c]&&o.has(c)})};Pe(this,We,j1).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Pe(this,We,Wp).call(this)}},ir=new WeakMap,Le=new WeakMap,Jl=new WeakMap,Gt=new WeakMap,Ni=new WeakMap,Va=new WeakMap,js=new WeakMap,Ss=new WeakMap,Xl=new WeakMap,Ha=new WeakMap,Ka=new WeakMap,ki=new WeakMap,Ci=new WeakMap,Ns=new WeakMap,Ga=new WeakMap,We=new WeakSet,Qo=function(t){Pe(this,We,Kp).call(this);let r=C(this,Le).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Qt)),r},Bp=function(){Pe(this,We,Vp).call(this);const t=Fs(this.options.staleTime,C(this,Le));if($i||C(this,Gt).isStale||!Lp(t))return;const n=f1(C(this,Gt).dataUpdatedAt,t)+1;ie(this,ki,setTimeout(()=>{C(this,Gt).isStale||this.updateResult()},n))},zp=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(C(this,Le)):this.options.refetchInterval)??!1},qp=function(t){Pe(this,We,Hp).call(this),ie(this,Ns,t),!($i||Er(this.options.enabled,C(this,Le))===!1||!Lp(C(this,Ns))||C(this,Ns)===0)&&ie(this,Ci,setInterval(()=>{(this.options.refetchIntervalInBackground||qg.isFocused())&&Pe(this,We,Qo).call(this)},C(this,Ns)))},Wp=function(){Pe(this,We,Bp).call(this),Pe(this,We,qp).call(this,Pe(this,We,zp).call(this))},Vp=function(){C(this,ki)&&(clearTimeout(C(this,ki)),ie(this,ki,void 0))},Hp=function(){C(this,Ci)&&(clearInterval(C(this,Ci)),ie(this,Ci,void 0))},Kp=function(){const t=C(this,ir).getQueryCache().build(C(this,ir),this.options);if(t===C(this,Le))return;const r=C(this,Le);ie(this,Le,t),ie(this,Jl,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},j1=function(t){jt.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(C(this,Gt))}),C(this,ir).getQueryCache().notify({query:C(this,Le),type:"observerResultsUpdated"})})},T0);function HO(e,t){return Er(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function rw(e,t){return HO(e,t)||e.state.data!==void 0&&Gp(e,t,t.refetchOnMount)}function Gp(e,t,r){if(Er(t.enabled,e)!==!1&&Fs(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&Wg(e,t)}return!1}function nw(e,t,r,n){return(e!==t||Er(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Wg(e,r)}function Wg(e,t){return Er(t.enabled,e)!==!1&&e.isStaleByTime(Fs(t.staleTime,e))}function KO(e,t){return!nd(e.getCurrentResult(),t)}var ks,Cs,ar,Fn,Wn,_u,Yp,R0,GO=(R0=class extends vo{constructor(r,n){super();me(this,Wn);me(this,ks);me(this,Cs);me(this,ar);me(this,Fn);ie(this,ks,r),this.setOptions(n),this.bindMethods(),Pe(this,Wn,_u).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var s;const n=this.options;this.options=C(this,ks).defaultMutationOptions(r),nd(this.options,n)||C(this,ks).getMutationCache().notify({type:"observerOptionsUpdated",mutation:C(this,ar),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Fi(n.mutationKey)!==Fi(this.options.mutationKey)?this.reset():((s=C(this,ar))==null?void 0:s.state.status)==="pending"&&C(this,ar).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=C(this,ar))==null||r.removeObserver(this)}onMutationUpdate(r){Pe(this,Wn,_u).call(this),Pe(this,Wn,Yp).call(this,r)}getCurrentResult(){return C(this,Cs)}reset(){var r;(r=C(this,ar))==null||r.removeObserver(this),ie(this,ar,void 0),Pe(this,Wn,_u).call(this),Pe(this,Wn,Yp).call(this)}mutate(r,n){var s;return ie(this,Fn,n),(s=C(this,ar))==null||s.removeObserver(this),ie(this,ar,C(this,ks).getMutationCache().build(C(this,ks),this.options)),C(this,ar).addObserver(this),C(this,ar).execute(r)}},ks=new WeakMap,Cs=new WeakMap,ar=new WeakMap,Fn=new WeakMap,Wn=new WeakSet,_u=function(){var n;const r=((n=C(this,ar))==null?void 0:n.state)??_1();ie(this,Cs,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Yp=function(r){jt.batch(()=>{var n,s,i,o,l,c,u,d;if(C(this,Fn)&&this.hasListeners()){const h=C(this,Cs).variables,p=C(this,Cs).context;(r==null?void 0:r.type)==="success"?((s=(n=C(this,Fn)).onSuccess)==null||s.call(n,r.data,h,p),(o=(i=C(this,Fn)).onSettled)==null||o.call(i,r.data,null,h,p)):(r==null?void 0:r.type)==="error"&&((c=(l=C(this,Fn)).onError)==null||c.call(l,r.error,h,p),(d=(u=C(this,Fn)).onSettled)==null||d.call(u,void 0,r.error,h,p))}this.listeners.forEach(h=>{h(C(this,Cs))})})},R0),S1=f.createContext(void 0),Lt=e=>{const t=f.useContext(S1);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},YO=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(S1.Provider,{value:e,children:t})),N1=f.createContext(!1),QO=()=>f.useContext(N1);N1.Provider;function JO(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var XO=f.createContext(JO()),ZO=()=>f.useContext(XO),eM=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},tM=e=>{f.useEffect(()=>{e.clearReset()},[e])},rM=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||g1(r,[e.error,n])),nM=e=>{if(e.suspense){const t=n=>n==="static"?n:Math.max(n??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...n)=>t(r(...n)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},sM=(e,t)=>e.isLoading&&e.isFetching&&!t,iM=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,sw=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function aM(e,t,r){var h,p,m,b,g;const n=QO(),s=ZO(),i=Lt(),o=i.defaultQueryOptions(e);(p=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||p.call(h,o),o._optimisticResults=n?"isRestoring":"optimistic",nM(o),eM(o,s),tM(s);const l=!i.getQueryCache().get(o.queryHash),[c]=f.useState(()=>new t(i,o)),u=c.getOptimisticResult(o),d=!n&&e.subscribed!==!1;if(f.useSyncExternalStore(f.useCallback(v=>{const x=d?c.subscribe(jt.batchCalls(v)):Qt;return c.updateResult(),x},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),f.useEffect(()=>{c.setOptions(o)},[o,c]),iM(o,u))throw sw(o,c,s);if(rM({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((b=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||b.call(m,o,u),o.experimental_prefetchInRender&&!$i&&sM(u,n)){const v=l?sw(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;v==null||v.catch(Qt).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Be(e,t){return aM(e,VO)}function mt(e,t){const r=Lt(),[n]=f.useState(()=>new GO(r,e));f.useEffect(()=>{n.setOptions(e)},[n,e]);const s=f.useSyncExternalStore(f.useCallback(o=>n.subscribe(jt.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=f.useCallback((o,l)=>{n.mutate(o,l).catch(Qt)},[n]);if(s.error&&g1(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ol(){return Ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ol.apply(this,arguments)}var Rs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Rs||(Rs={}));const iw="popstate";function oM(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return Qp("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:id(s)}return cM(t,r,null,e)}function gt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function k1(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function lM(){return Math.random().toString(36).substr(2,8)}function aw(e,t){return{usr:e.state,key:e.key,idx:t}}function Qp(e,t,r,n){return r===void 0&&(r=null),Ol({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?yo(t):t,{state:r,key:t&&t.key||n||lM()})}function id(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function yo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function cM(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=Rs.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Ol({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Rs.Pop;let v=d(),x=v==null?null:v-u;u=v,c&&c({action:l,location:g.location,delta:x})}function p(v,x){l=Rs.Push;let y=Qp(g.location,v,x);u=d()+1;let w=aw(y,u),_=g.createHref(y);try{o.pushState(w,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(_)}i&&c&&c({action:l,location:g.location,delta:1})}function m(v,x){l=Rs.Replace;let y=Qp(g.location,v,x);u=d();let w=aw(y,u),_=g.createHref(y);o.replaceState(w,"",_),i&&c&&c({action:l,location:g.location,delta:0})}function b(v){let x=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof v=="string"?v:id(v);return y=y.replace(/ $/,"%20"),gt(x,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,x)}let g={get action(){return l},get location(){return e(s,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(iw,h),c=v,()=>{s.removeEventListener(iw,h),c=null}},createHref(v){return t(s,v)},createURL:b,encodeLocation(v){let x=b(v);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:m,go(v){return o.go(v)}};return g}var ow;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ow||(ow={}));function uM(e,t,r){return r===void 0&&(r="/"),dM(e,t,r,!1)}function dM(e,t,r,n){let s=typeof t=="string"?yo(t):t,i=Vg(s.pathname||"/",r);if(i==null)return null;let o=C1(e);hM(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=jM(i);l=bM(o[c],u,n)}return l}function C1(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(gt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Us([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(gt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),C1(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:xM(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of E1(i.path))s(i,o,c)}),t}function E1(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=E1(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function hM(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:wM(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const fM=/^:[\w-]+$/,pM=3,mM=2,gM=1,vM=10,yM=-2,lw=e=>e==="*";function xM(e,t){let r=e.split("/"),n=r.length;return r.some(lw)&&(n+=yM),t&&(n+=mM),r.filter(s=>!lw(s)).reduce((s,i)=>s+(fM.test(i)?pM:i===""?gM:vM),n)}function wM(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function bM(e,t,r){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=cw({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=cw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Us([i,h.pathname]),pathnameBase:CM(Us([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=Us([i,h.pathnameBase]))}return o}function cw(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=_M(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:p,isOptional:m}=d;if(p==="*"){let g=l[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const b=l[h];return m&&!b?u[p]=void 0:u[p]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function _M(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),k1(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function jM(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return k1(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Vg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function SM(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?yo(e):e;return{pathname:r?r.startsWith("/")?r:NM(r,t):t,search:EM(n),hash:TM(s)}}function NM(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function lf(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kM(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Hg(e,t){let r=kM(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Kg(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=yo(e):(s=Ol({},e),gt(!s.pathname||!s.pathname.includes("?"),lf("?","pathname","search",s)),gt(!s.pathname||!s.pathname.includes("#"),lf("#","pathname","hash",s)),gt(!s.search||!s.search.includes("#"),lf("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}l=h>=0?t[h]:"/"}let c=SM(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Us=e=>e.join("/").replace(/\/\/+/g,"/"),CM=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),EM=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,TM=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function RM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const T1=["post","put","patch","delete"];new Set(T1);const PM=["get",...T1];new Set(PM);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ml(){return Ml=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ml.apply(this,arguments)}const Gg=f.createContext(null),AM=f.createContext(null),Js=f.createContext(null),Gd=f.createContext(null),Zn=f.createContext({outlet:null,matches:[],isDataRoute:!1}),R1=f.createContext(null);function IM(e,t){let{relative:r}=t===void 0?{}:t;xo()||gt(!1);let{basename:n,navigator:s}=f.useContext(Js),{hash:i,pathname:o,search:l}=A1(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Us([n,o])),s.createHref({pathname:c,search:l,hash:i})}function xo(){return f.useContext(Gd)!=null}function Rn(){return xo()||gt(!1),f.useContext(Gd).location}function P1(e){f.useContext(Js).static||f.useLayoutEffect(e)}function es(){let{isDataRoute:e}=f.useContext(Zn);return e?HM():OM()}function OM(){xo()||gt(!1);let e=f.useContext(Gg),{basename:t,future:r,navigator:n}=f.useContext(Js),{matches:s}=f.useContext(Zn),{pathname:i}=Rn(),o=JSON.stringify(Hg(s,r.v7_relativeSplatPath)),l=f.useRef(!1);return P1(()=>{l.current=!0}),f.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=Kg(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Us([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,o,i,e])}function wo(){let{matches:e}=f.useContext(Zn),t=e[e.length-1];return t?t.params:{}}function A1(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=f.useContext(Js),{matches:s}=f.useContext(Zn),{pathname:i}=Rn(),o=JSON.stringify(Hg(s,n.v7_relativeSplatPath));return f.useMemo(()=>Kg(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function MM(e,t){return DM(e,t)}function DM(e,t,r,n){xo()||gt(!1);let{navigator:s}=f.useContext(Js),{matches:i}=f.useContext(Zn),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Rn(),d;if(t){var h;let v=typeof t=="string"?yo(t):t;c==="/"||(h=v.pathname)!=null&&h.startsWith(c)||gt(!1),d=v}else d=u;let p=d.pathname||"/",m=p;if(c!=="/"){let v=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let b=uM(e,{pathname:m}),g=BM(b&&b.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:Us([c,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Us([c,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,r,n);return t&&g?f.createElement(Gd.Provider,{value:{location:Ml({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Rs.Pop}},g):g}function LM(){let e=VM(),t=RM(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),r?f.createElement("pre",{style:s},r):null,null)}const $M=f.createElement(LM,null);class FM extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?f.createElement(Zn.Provider,{value:this.props.routeContext},f.createElement(R1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function UM(e){let{routeContext:t,match:r,children:n}=e,s=f.useContext(Gg);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),f.createElement(Zn.Provider,{value:t},n)}function BM(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||gt(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:p,errors:m}=r,b=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||b){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let m,b=!1,g=null,v=null;r&&(m=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||$M,c&&(u<0&&p===0?(b=!0,v=null):u===p&&(b=!0,v=h.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,p+1)),y=()=>{let w;return m?w=g:b?w=v:h.route.Component?w=f.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,f.createElement(UM,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:w})};return r&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?f.createElement(FM,{location:r.location,revalidation:r.revalidation,component:g,error:m,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):y()},null)}var I1=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(I1||{}),ad=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ad||{});function zM(e){let t=f.useContext(Gg);return t||gt(!1),t}function qM(e){let t=f.useContext(AM);return t||gt(!1),t}function WM(e){let t=f.useContext(Zn);return t||gt(!1),t}function O1(e){let t=WM(),r=t.matches[t.matches.length-1];return r.route.id||gt(!1),r.route.id}function VM(){var e;let t=f.useContext(R1),r=qM(ad.UseRouteError),n=O1(ad.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function HM(){let{router:e}=zM(I1.UseNavigateStable),t=O1(ad.UseNavigateStable),r=f.useRef(!1);return P1(()=>{r.current=!0}),f.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Ml({fromRouteId:t},i)))},[e,t])}function KM(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Dl(e){let{to:t,replace:r,state:n,relative:s}=e;xo()||gt(!1);let{future:i,static:o}=f.useContext(Js),{matches:l}=f.useContext(Zn),{pathname:c}=Rn(),u=es(),d=Kg(t,Hg(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return f.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function wt(e){gt(!1)}function GM(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Rs.Pop,navigator:i,static:o=!1,future:l}=e;xo()&&gt(!1);let c=t.replace(/^\/*/,"/"),u=f.useMemo(()=>({basename:c,navigator:i,static:o,future:Ml({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=yo(n));let{pathname:d="/",search:h="",hash:p="",state:m=null,key:b="default"}=n,g=f.useMemo(()=>{let v=Vg(d,c);return v==null?null:{location:{pathname:v,search:h,hash:p,state:m,key:b},navigationType:s}},[c,d,h,p,m,b,s]);return g==null?null:f.createElement(Js.Provider,{value:u},f.createElement(Gd.Provider,{children:r,value:g}))}function YM(e){let{children:t,location:r}=e;return MM(Jp(t),r)}new Promise(()=>{});function Jp(e,t){t===void 0&&(t=[]);let r=[];return f.Children.forEach(e,(n,s)=>{if(!f.isValidElement(n))return;let i=[...t,s];if(n.type===f.Fragment){r.push.apply(r,Jp(n.props.children,i));return}n.type!==wt&&gt(!1),!n.props.index||!n.props.children||gt(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Jp(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xp(){return Xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xp.apply(this,arguments)}function QM(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function JM(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function XM(e,t){return e.button===0&&(!t||t==="_self")&&!JM(e)}function Zp(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function ZM(e,t){let r=Zp(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}const e4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],t4="6";try{window.__reactRouterVersion=t4}catch{}const r4="startTransition",uw=Em[r4];function n4(e){let{basename:t,children:r,future:n,window:s}=e,i=f.useRef();i.current==null&&(i.current=oM({window:s,v5Compat:!0}));let o=i.current,[l,c]=f.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=f.useCallback(h=>{u&&uw?uw(()=>c(h)):c(h)},[c,u]);return f.useLayoutEffect(()=>o.listen(d),[o,d]),f.useEffect(()=>KM(n),[n]),f.createElement(GM,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const s4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",i4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,be=f.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,p=QM(t,e4),{basename:m}=f.useContext(Js),b,g=!1;if(typeof u=="string"&&i4.test(u)&&(b=u,s4))try{let w=new URL(window.location.href),_=u.startsWith("//")?new URL(w.protocol+u):new URL(u),j=Vg(_.pathname,m);_.origin===w.origin&&j!=null?u=j+_.search+_.hash:g=!0}catch{}let v=IM(u,{relative:s}),x=a4(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function y(w){n&&n(w),w.defaultPrevented||x(w)}return f.createElement("a",Xp({},p,{href:b||v,onClick:g||i?n:y,ref:r,target:c}))});var dw;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(dw||(dw={}));var hw;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(hw||(hw={}));function a4(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=es(),u=Rn(),d=A1(e,{relative:o});return f.useCallback(h=>{if(XM(h,r)){h.preventDefault();let p=n!==void 0?n:id(u)===id(d);c(e,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,s,r,e,i,o,l])}function o4(e){let t=f.useRef(Zp(e)),r=f.useRef(!1),n=Rn(),s=f.useMemo(()=>ZM(n.search,r.current?null:t.current),[n.search]),i=es(),o=f.useCallback((l,c)=>{const u=Zp(typeof l=="function"?l(s):l);r.current=!0,i("?"+u,c)},[i,s]);return[s,o]}var jn=function(){return jn=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},jn.apply(this,arguments)};function bo(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function l4(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function c4(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}const u4=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Yg extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class d4 extends Yg{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class fw extends Yg{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class pw extends Yg{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var em;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(em||(em={}));class h4{constructor(t,{headers:r={},customFetch:n,region:s=em.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=u4(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return l4(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:l,method:c,body:u,signal:d,timeout:h}=n;let p={},{region:m}=n;m||(m=this.region);const b=new URL(`${this.url}/${r}`);m&&m!=="any"&&(p["x-region"]=m,b.searchParams.set("forceFunctionRegion",m));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(p["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(p["Content-Type"]="application/json",g=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?g=JSON.stringify(u):g=u;let v=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(v=o.signal,d.addEventListener("abort",()=>o.abort())):v=o.signal);const x=yield this.fetch(b.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),l),body:g,signal:v}).catch(j=>{throw new d4(j)}),y=x.headers.get("x-relay-error");if(y&&y==="true")throw new fw(x);if(!x.ok)throw new pw(x);let w=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return w==="application/json"?_=yield x.json():w==="application/octet-stream"||w==="application/pdf"?_=yield x.blob():w==="text/event-stream"?_=x:w==="multipart/form-data"?_=yield x.formData():_=yield x.text(),{data:_,error:null,response:x}}catch(l){return{data:null,error:l,response:l instanceof pw||l instanceof fw?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var f4=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},p4=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,u=i.status,d=i.statusText;if(i.ok){var h,p;if(r.method!=="HEAD"){var m;const x=await i.text();x===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((m=r.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?l=x:l=JSON.parse(x))}const g=(h=r.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),v=(p=i.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");g&&v&&v.length>1&&(c=parseInt(v[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var b;const g=await i.text();try{o=JSON.parse(g),Array.isArray(o)&&i.status===404&&(l=[],o=null,u=200,d="OK")}catch{i.status===404&&g===""?(u=204,d="No Content"):o={message:g}}if(o&&r.isMaybeSingle&&(!(o==null||(b=o.details)===null||b===void 0)&&b.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&r.shouldThrowOnError)throw new f4(o)}return{error:o,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let l="";const c=i==null?void 0:i.cause;if(c){var u,d,h,p;const b=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",g=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";l=`${(h=i==null?void 0:i.name)!==null&&h!==void 0?h:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(p=c==null?void 0:c.name)!==null&&p!==void 0?p:"Error"}: ${b}`,g&&(l+=` (${g})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var m;l=(m=i==null?void 0:i.stack)!==null&&m!==void 0?m:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},m4=class extends p4{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const mw=new RegExp("[,()]");var ca=class extends m4{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&mw.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&mw.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},g4=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),n&&c.append("Prefer",`count=${n}`),new ca({method:s,url:l,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);i.searchParams.set("columns",c.join(","))}}return new ca({method:s,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&c.append("Prefer",`count=${n}`),s||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);l.searchParams.set("columns",d.join(","))}}return new ca({method:o,url:l,headers:c,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new ca({method:n,url:s,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new ca({method:r,url:n,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},v4=class M1{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new g4(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new M1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;const d=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(d)),h=n&&Object.values(r).some(d);h?(l="POST",u=r):n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([m,b])=>b!==void 0).map(([m,b])=>[m,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([m,b])=>{c.searchParams.append(m,b)})):(l="POST",u=r);const p=new Headers(this.headers);return h?p.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&p.set("Prefer",`count=${i}`),new ca({method:l,url:c,headers:p,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class y4{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const x4="2.91.0",w4=`realtime-js/${x4}`,b4="1.0.0",D1="2.0.0",gw=D1,tm=1e4,_4=1e3,j4=100;var ps;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ps||(ps={}));var bt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(bt||(bt={}));var en;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(en||(en={}));var rm;(function(e){e.websocket="websocket"})(rm||(rm={}));var hi;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(hi||(hi={}));class S4{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var s,i;const o=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const p=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+h.length,m=new ArrayBuffer(this.HEADER_LENGTH+p);let b=new DataView(m),g=0;b.setUint8(g++,this.KINDS.userBroadcastPush),b.setUint8(g++,c.length),b.setUint8(g++,l.length),b.setUint8(g++,o.length),b.setUint8(g++,u.length),b.setUint8(g++,h.length),b.setUint8(g++,r),Array.from(c,x=>b.setUint8(g++,x.charCodeAt(0))),Array.from(l,x=>b.setUint8(g++,x.charCodeAt(0))),Array.from(o,x=>b.setUint8(g++,x.charCodeAt(0))),Array.from(u,x=>b.setUint8(g++,x.charCodeAt(0))),Array.from(h,x=>b.setUint8(g++,x.charCodeAt(0)));var v=new Uint8Array(m.byteLength+n.byteLength);return v.set(new Uint8Array(m),0),v.set(new Uint8Array(n),m.byteLength),v.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,o,l,c]=n;return r({join_ref:s,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+s));c=c+s;const d=n.decode(t.slice(c,c+i));c=c+i;const h=n.decode(t.slice(c,c+o));c=c+o;const p=t.slice(c,t.byteLength),m=l===this.JSON_ENCODING?JSON.parse(n.decode(p)):p,b={type:this.BROADCAST_EVENT,event:d,payload:m};return o>0&&(b.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class L1{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Je;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Je||(Je={}));const vw=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=N4(o,e,t,s),i),{}):{}},N4=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?$1(i,o):nm(o)},$1=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return T4(t,r)}switch(e){case Je.bool:return k4(t);case Je.float4:case Je.float8:case Je.int2:case Je.int4:case Je.int8:case Je.numeric:case Je.oid:return C4(t);case Je.json:case Je.jsonb:return E4(t);case Je.timestamp:return R4(t);case Je.abstime:case Je.date:case Je.daterange:case Je.int4range:case Je.int8range:case Je.money:case Je.reltime:case Je.text:case Je.time:case Je.timestamptz:case Je.timetz:case Je.tsrange:case Je.tstzrange:return nm(t);default:return nm(t)}},nm=e=>e,k4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},C4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},E4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},T4=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>$1(t,l))}return e},R4=e=>typeof e=="string"?e.replace(" ","T"):e,F1=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class cf{constructor(t,r,n={},s=tm){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var yw;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(yw||(yw={}));class ul{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ul.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=ul.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ul.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const p=d.map(v=>v.presence_ref),m=h.map(v=>v.presence_ref),b=d.filter(v=>m.indexOf(v.presence_ref)<0),g=h.filter(v=>p.indexOf(v.presence_ref)<0);b.length>0&&(l[u]=b),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(m=>m.presence_ref),p=d.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...p)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xw;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(xw||(xw={}));var dl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(dl||(dl={}));var Dn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Dn||(Dn={}));class Sa{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new cf(this,en.join,this.params,this.timeout),this.rejoinTimer=new L1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=bt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(en.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new ul(this),this.broadcastEndpointURL=F1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==bt.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[dl.PRESENCE]&&this.bindings[dl.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},p={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Dn.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Dn.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){t==null||t(Dn.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,v=(b=g==null?void 0:g.length)!==null&&b!==void 0?b:0,x=[];for(let y=0;y<v;y++){const w=g[y],{filter:{event:_,schema:j,table:S,filter:N}}=w,k=m&&m[y];if(k&&k.event===_&&Sa.isFilterValueEqual(k.schema,j)&&Sa.isFilterValueEqual(k.table,S)&&Sa.isFilterValueEqual(k.filter,N))x.push(Object.assign(Object.assign({},w),{id:k.id}));else{this.unsubscribe(),this.state=bt.errored,t==null||t(Dn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Dn.SUBSCRIBED);return}}).receive("error",m=>{this.state=bt.errored,t==null||t(Dn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Dn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===bt.joined&&t===dl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=bt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(en.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new cf(this,en.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=bt.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new cf(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>j4){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=en;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let p=this._onMessage(o,r,n);if(r&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var b,g,v;return((b=m.filter)===null||b===void 0?void 0:b.event)==="*"||((v=(g=m.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(m=>m.callback(p,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var b,g,v,x,y,w,_,j;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const S=m.id,N=(b=m.filter)===null||b===void 0?void 0:b.event;return S&&((g=r.ids)===null||g===void 0?void 0:g.includes(S))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))&&(!(!((x=m.filter)===null||x===void 0)&&x.table)||m.filter.table===((y=r.data)===null||y===void 0?void 0:y.table))}else{const S=(_=(w=m==null?void 0:m.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return S==="*"||S===((j=r==null?void 0:r.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){const b=p.data,{schema:g,table:v,commit_timestamp:x,type:y,errors:w}=b;p=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:x,eventType:y,new:{},old:{},errors:w}),this._getPayloadRecords(b))}m.callback(p,n)})}_isClosed(){return this.state===bt.closed}_isJoined(){return this.state===bt.joined}_isJoining(){return this.state===bt.joining}_isLeaving(){return this.state===bt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Sa.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(en.close,{},t)}_onError(t){this._on(en.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=bt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=vw(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=vw(t.columns,t.old_record)),r}}const uf=()=>{},Qc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},P4=[1e3,2e3,5e3,1e4],A4=1e4,I4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class O4{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=tm,this.transport=null,this.heartbeatIntervalMs=Qc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=uf,this.ref=0,this.reconnectTimer=null,this.vsn=gw,this.logger=uf,this.conn=null,this.sendBuffer=[],this.serializer=new S4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${rm.websocket}`,this.httpEndpoint=F1(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=y4.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ps.connecting:return hi.Connecting;case ps.open:return hi.Open;case ps.closing:return hi.Closing;default:return hi.Closed}}isConnected(){return this.connectionState()===hi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Sa(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(_4,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Qc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===ps.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ps.open||this.conn.readyState===ps.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(en.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([I4],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:w4};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(en.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new L1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Qc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,l,c,u,d,h,p,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:tm,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Qc.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:uf,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:gw,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:b=>P4[b-1]||A4,this.vsn){case b4:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(b,g)=>g(JSON.stringify(b)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(b,g)=>g(JSON.parse(b));break;case D1:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Ll=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function M4(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function D4(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function L4(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const l=M4(e.baseUrl,n,s),c=await D4(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),p=h&&d?JSON.parse(d):d;if(!u.ok){const m=h?p:void 0,b=m==null?void 0:m.error;throw new Ll((b==null?void 0:b.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:m})}return{status:u.status,headers:u.headers,data:p}}}}function Jc(e){return e.join("")}var $4=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Jc(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Jc(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Jc(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Jc(e.namespace)}`}),!0}catch(t){if(t instanceof Ll&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Ll&&r.status===409)return;throw r}}};function Zi(e){return e.join("")}var F4=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Zi(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Zi(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Zi(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Zi(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Zi(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Zi(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Ll&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Ll&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},U4=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=L4({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new $4(this.client,t),this.tableOps=new F4(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Yd=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function nt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var B4=class extends Yd{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},sm=class extends Yd{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Qg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),z4=()=>Response,im=e=>{if(Array.isArray(e))return e.map(r=>im(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=im(n)}),t},q4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},W4=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function $l(e){"@babel/helpers - typeof";return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$l(e)}function V4(e,t){if($l(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if($l(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function H4(e){var t=V4(e,"string");return $l(t)=="symbol"?t:t+""}function K4(e,t,r){return(t=H4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ww(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ww(Object(r),!0).forEach(function(n){K4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ww(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const df=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},G4=async(e,t,r)=>{e instanceof await z4()&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{const s=e.status||500,i=(n==null?void 0:n.statusCode)||s+"";t(new B4(df(n),s,i))}).catch(n=>{t(new sm(df(n),n))}):t(new sm(df(e),e))},Y4=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(q4(n)?(s.headers=ye({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),ye(ye({},s),r))};async function dc(e,t,r,n,s,i){return new Promise((o,l)=>{e(r,Y4(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>G4(c,l,n))})}async function Fl(e,t,r,n){return dc(e,"GET",t,r,n)}async function Qr(e,t,r,n,s){return dc(e,"POST",t,n,s,r)}async function am(e,t,r,n,s){return dc(e,"PUT",t,n,s,r)}async function Q4(e,t,r,n){return dc(e,"HEAD",t,ye(ye({},r),{},{noResolveJson:!0}),n)}async function Jg(e,t,r,n,s){return dc(e,"DELETE",t,n,s,r)}var J4=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(nt(t))return{data:null,error:t};throw t}}};let U1;U1=Symbol.toStringTag;var X4=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[U1]="BlobDownloadBuilder",this.promise=null}asStream(){return new J4(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(nt(t))return{data:null,error:t};throw t}}};const Z4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var eD=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Qg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){var s=this;try{let i;const o=ye(ye({},bw),n);let l=ye(ye({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",s.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=ye(ye({},l),n.headers));const u=s._removeEmptyFolders(t),d=s._getFinalPath(u),h=await(e=="PUT"?am:Qr)(s.fetch,`${s.url}/object/${d}`,i,ye({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(nt(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const i=s._removeEmptyFolders(e),o=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const u=ye({upsert:bw.upsert},n),d=ye(ye({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:i,fullPath:(await am(s.fetch,l.toString(),c,{headers:d})).Key},error:null}}catch(c){if(s.shouldThrowOnError)throw c;if(nt(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var r=this;try{let n=r._getFinalPath(e);const s=ye({},r.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await Qr(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new Yd("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;try{return{data:await Qr(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(nt(s))return{data:null,error:s};throw s}}async copy(e,t,r){var n=this;try{return{data:{path:(await Qr(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(nt(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,r){var n=this;try{let s=n._getFinalPath(e),i=await Qr(n.fetch,`${n.url}/object/sign/${s}`,ye({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(nt(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,r){var n=this;try{const s=await Qr(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>ye(ye({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(nt(s))return{data:null,error:s};throw s}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>Fl(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new X4(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:im(await Fl(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await Q4(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(nt(n)&&n instanceof sm){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;try{return{data:await Jg(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}}async list(e,t,r){var n=this;try{const s=ye(ye(ye({},Z4),t),{},{prefix:e||""});return{data:await Qr(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(nt(s))return{data:null,error:s};throw s}}async listV2(e,t){var r=this;try{const n=ye({},e);return{data:await Qr(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const B1="2.91.0",z1={"X-Client-Info":`storage-js/${B1}`};var tD=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const s=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=ye(ye({},z1),t),this.fetch=Qg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await Fl(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await Fl(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await Qr(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var r=this;try{return{data:await am(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(nt(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await Qr(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Jg(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},rD=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=ye(ye({},z1),t),this.fetch=Qg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Qr(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await Fl(t.fetch,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Jg(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(nt(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!W4(e))throw new Yd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new U4({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(s,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}};const Xg={"X-Client-Info":`storage-js/${B1}`,"Content-Type":"application/json"};var q1=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function yr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var hf=class extends q1{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},nD=class extends q1{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Zg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),sD=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},_w=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),iD=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const n=e.status||500,s=e;if(typeof s.json=="function")s.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";t(new hf(_w(i),n,o))}).catch(()=>{const i=n+"";t(new hf(s.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";t(new hf(s.statusText||`HTTP ${n} error`,n,i))}}else t(new nD(_w(e),e))},aD=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(sD(n)?(s.headers=ye({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,ye(ye({},s),r)):s};async function oD(e,t,r,n,s,i){return new Promise((o,l)=>{e(r,aD(t,n,s,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>iD(c,l,n))})}async function xr(e,t,r,n,s){return oD(e,"POST",t,n,s,r)}var lD=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=ye(ye({},Xg),t),this.fetch=Zg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await xr(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(yr(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await xr(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(yr(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await xr(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(yr(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await xr(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(yr(n))return{data:null,error:n};throw n}}},cD=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=ye(ye({},Xg),t),this.fetch=Zg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await xr(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(yr(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await xr(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(yr(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await xr(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(yr(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await xr(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(yr(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await xr(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(yr(r))return{data:null,error:r};throw r}}},uD=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=ye(ye({},Xg),t),this.fetch=Zg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await xr(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(yr(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await xr(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(yr(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await xr(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(yr(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await xr(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(yr(r))return{data:null,error:r};throw r}}},dD=class extends uD{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new hD(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},hD=class extends lD{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,ye(ye({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,ye(ye({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new fD(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},fD=class extends cD{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,ye(ye({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,ye(ye({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,ye(ye({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,ye(ye({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,ye(ye({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},pD=class extends tD{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new eD(this.url,this.headers,e,this.fetch)}get vectors(){return new dD(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new rD(this.url+"/iceberg",this.headers,this.fetch)}};const W1="2.91.0",ua=30*1e3,om=3,ff=om*ua,mD="http://localhost:9999",gD="supabase.auth.token",vD={"X-Client-Info":`gotrue-js/${W1}`},lm="X-Supabase-Api-Version",V1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xD=10*60*1e3;class Ul extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ue(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class wD extends Ul{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function bD(e){return ue(e)&&e.name==="AuthApiError"}class fi extends Ul{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ts extends Ul{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class pr extends ts{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _D(e){return ue(e)&&e.name==="AuthSessionMissingError"}class ea extends ts{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xc extends ts{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Zc extends ts{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function jD(e){return ue(e)&&e.name==="AuthImplicitGrantRedirectError"}class jw extends ts{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class SD extends ts{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class cm extends ts{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function pf(e){return ue(e)&&e.name==="AuthRetryableFetchError"}class Sw extends ts{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class um extends ts{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const od="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Nw=` 	
\r=`.split(""),ND=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Nw.length;t+=1)e[Nw[t].charCodeAt(0)]=-2;for(let t=0;t<od.length;t+=1)e[od[t].charCodeAt(0)]=t;return e})();function kw(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(od[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(od[n]),t.queuedBits-=6}}function H1(e,t,r){const n=ND[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Cw(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{ED(o,n,r)};for(let o=0;o<e.length;o+=1)H1(e.charCodeAt(o),s,i);return t.join("")}function kD(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function CD(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}kD(n,t)}}function ED(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Ia(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)H1(e.charCodeAt(s),r,n);return new Uint8Array(t)}function TD(e){const t=[];return CD(e,r=>t.push(r)),new Uint8Array(t)}function vi(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>kw(s,r,n)),kw(null,r,n),t.join("")}function RD(e){return Math.round(Date.now()/1e3)+e}function PD(){return Symbol("auth-callback")}const Rt=()=>typeof window<"u"&&typeof document<"u",ai={tested:!1,writable:!1},K1=()=>{if(!Rt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ai.tested)return ai.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ai.tested=!0,ai.writable=!0}catch{ai.tested=!0,ai.writable=!1}return ai.writable};function AD(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const G1=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),ID=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",da=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},oi=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Tt=async(e,t)=>{await e.removeItem(t)};class Qd{constructor(){this.promise=new Qd.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Qd.promiseConstructor=Promise;function mf(e){const t=e.split(".");if(t.length!==3)throw new um("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!yD.test(t[n]))throw new um("JWT not in base64url format");return{header:JSON.parse(Cw(t[0])),payload:JSON.parse(Cw(t[1])),signature:Ia(t[2]),raw:{header:t[0],payload:t[1]}}}async function OD(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function MD(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function DD(e){return("0"+e.toString(16)).substr(-2)}function LD(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,DD).join("")}async function $D(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function FD(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await $D(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ta(e,t,r=!1){const n=LD();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await da(e,`${t}-code-verifier`,s);const i=await FD(n);return[i,n===i?"plain":"s256"]}const UD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function BD(e){const t=e.headers.get(lm);if(!t||!t.match(UD))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function zD(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function qD(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const WD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ra(e){if(!WD.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function gf(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function VD(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function Ew(e){return JSON.parse(JSON.stringify(e))}const ui=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),HD=[502,503,504];async function Tw(e){var t;if(!ID(e))throw new cm(ui(e),0);if(HD.includes(e.status))throw new cm(ui(e),e.status);let r;try{r=await e.json()}catch(i){throw new fi(ui(i),i)}let n;const s=BD(e);if(s&&s.getTime()>=V1["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Sw(ui(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new pr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Sw(ui(r),e.status,r.weak_password.reasons);throw new wD(ui(r),e.status||500,n)}const KD=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ve(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[lm]||(i[lm]=V1["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await GD(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function GD(e,t,r,n,s,i){const o=KD(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new cm(ui(c),0)}if(l.ok||await Tw(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Tw(c)}}function Kr(e){var t;let r=null;JD(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=RD(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Rw(e){const t=Kr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function vs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function YD(e){return{data:e,error:null}}function QD(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=bo(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Pw(e){return e}function JD(e){return e.access_token&&e.refresh_token&&e.expires_in}const vf=["global","local","others"];class XD{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=G1(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=vf[0]){if(vf.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vf.join(", ")}`);try{return await ve(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:vs})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=bo(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:QD,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ue(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ve(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:vs})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Pw});if(d.error)throw d.error;const h=await d.json(),p=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(b=>{const g=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(b.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ue(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){ra(t);try{return await ve(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:vs})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ra(t);try{return await ve(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:vs})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){ra(t);try{return await ve(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:vs})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){ra(t.userId);try{const{data:r,error:n}=await ve(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ra(t.userId),ra(t.id);try{return{data:await ve(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Pw});if(d.error)throw d.error;const h=await d.json(),p=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(b=>{const g=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(b.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ue(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await ve(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await ve(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ue(r))return{data:null,error:r};throw r}}}function Aw(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const na={debug:!!(globalThis&&K1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Y1 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class ZD extends Y1{}async function eL(e,t,r){na.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),na.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){na.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{na.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw na.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ZD(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(na.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function tL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Q1(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function rL(e){return parseInt(e,16)}function nL(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function sL(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:p}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=Q1(e.address),b=d?`${d}://${n}`:n,g=e.statement?`${e.statement}
`:"",v=`${b} wants you to sign in with your Ethereum account:
${m}

${g}`;let x=`URI: ${h}
Version: ${p}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(x+=`
Expiration Time: ${s.toISOString()}`),l&&(x+=`
Not Before: ${l.toISOString()}`),c&&(x+=`
Request ID: ${c}`),u){let y=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);y+=`
- ${w}`}x+=y}return`${v}
${x}`}class yt extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class ld extends yt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function iL({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new yt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new yt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new yt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new yt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new yt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new yt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new yt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new yt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(J1(o)){if(i.rp.id!==o)return new yt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new yt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new yt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new yt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new yt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function aL({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new yt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new yt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(J1(n)){if(r.rpId!==n)return new yt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new yt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new yt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new yt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class oL{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const lL=new oL;function cL(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=bo(e,["challenge","user","excludeCredentials"]),i=Ia(t).buffer,o=Object.assign(Object.assign({},r),{id:Ia(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Ia(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function uL(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=bo(e,["challenge","allowCredentials"]),s=Ia(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Ia(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function dL(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:vi(new Uint8Array(e.response.attestationObject)),clientDataJSON:vi(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function hL(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:vi(new Uint8Array(s.authenticatorData)),clientDataJSON:vi(new Uint8Array(s.clientDataJSON)),signature:vi(new Uint8Array(s.signature)),userHandle:s.userHandle?vi(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function J1(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Iw(){var e,t;return!!(Rt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function fL(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ld("Browser returned unexpected credential type",t)}:{data:null,error:new ld("Empty credential response",t)}}catch(t){return{data:null,error:iL({error:t,options:e})}}}async function pL(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ld("Browser returned unexpected credential type",t)}:{data:null,error:new ld("Empty credential response",t)}}catch(t){return{data:null,error:aL({error:t,options:e})}}}const mL={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},gL={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function cd(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=cd(l,o):n[i]=cd(o)}else n[i]=o}return n}function vL(e,t){return cd(mL,e,t||{})}function yL(e,t){return cd(gL,e,t||{})}class xL{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=s??lL.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=vL(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await fL({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=yL(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await pL(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return ue(o)?{data:null,error:o}:{data:null,error:new fi("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Ul("rpId is required for WebAuthn authentication")};try{if(!Iw())return{data:null,error:new fi("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return ue(o)?{data:null,error:o}:{data:null,error:new fi("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Ul("rpId is required for WebAuthn registration")};try{if(!Iw())return{data:null,error:new fi("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===t&&p.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return ue(o)?{data:null,error:o}:{data:null,error:new fi("Unexpected error in register",o)}}}}tL();const wL={url:mD,storageKey:gD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Ow(e,t,r){return await r()}const sa={};class Bl{get jwks(){var t,r;return(r=(t=sa[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){sa[this.storageKey]=Object.assign(Object.assign({},sa[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=sa[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){sa[this.storageKey]=Object.assign(Object.assign({},sa[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},wL),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Bl.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Bl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Rt()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new XD({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=G1(i.fetch),this.lock=i.lock||Ow,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&Rt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=eL:this.lock=Ow,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new xL(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:K1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Aw(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Aw(this.memoryStorage)),Rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${W1}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Rt()&&(r=AD(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Rt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),jD(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ue(r)?this._returnResult({error:r}):this._returnResult({error:new fi("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Kr}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(ue(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:p}=t;let m=null,b=null;this.flowType==="pkce"&&([m,b]=await ta(this.storage,this.storageKey)),i=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:b},xform:Kr})}else if("phone"in t){const{phone:d,password:h,options:p}=t;i=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Kr})}else throw new Xc("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await Tt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),ue(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Rw})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Rw})}else throw new Xc("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new ea;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(ue(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,l,c,u,d,h,p;let m,b;if("message"in t)m=t.message,b=t.signature;else{const{chain:g,wallet:v,statement:x,options:y}=t;let w;if(Rt())if(typeof v=="object")w=v;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")w=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=v}const _=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href),j=await w.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=Q1(j[0]);let N=(n=y==null?void 0:y.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!N){const R=await w.request({method:"eth_chainId"});N=rL(R)}const k={domain:_.host,address:S,statement:x,uri:_.href,version:"1",chainId:N,nonce:(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=y==null?void 0:y.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=sL(k),b=await w.request({method:"personal_sign",params:[nL(m),S]})}try{const{data:g,error:v}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:b},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Kr});if(v)throw v;if(!g||!g.session||!g.user){const x=new ea;return this._returnResult({data:{user:null,session:null},error:x})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:v})}catch(g){if(ue(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var r,n,s,i,o,l,c,u,d,h,p,m;let b,g;if("message"in t)b=t.message,g=t.signature;else{const{chain:v,wallet:x,statement:y,options:w}=t;let _;if(Rt())if(typeof x=="object")_=x;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=x}const j=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),y?{statement:y}:null));let N;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")N=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)N=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)b=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),g=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(b),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=S}}try{const{data:v,error:x}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:vi(g)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Kr});if(x)throw x;if(!v||!v.session||!v.user){const y=new ea;return this._returnResult({data:{user:null,session:null},error:y})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:x})}catch(v){if(ue(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(t){const r=await oi(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new SD;const{data:i,error:o}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Kr});if(await Tt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new ea;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",i.session)},0)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),ue(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Kr}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new ea;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(ue(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ta(this.storage,this.storageKey));const{error:h}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Xc("You must provide either an email or phone number.")}catch(l){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),ue(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Kr});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(ue(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await ta(this.storage,this.storageKey));const u=await ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:YD});return!((i=u.data)===null||i===void 0)&&i.url&&Rt()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),ue(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new pr;const{error:s}=await ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(ue(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await ve(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await ve(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Xc("You must provide either an email or phone number and a type")}catch(r){if(ue(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await oi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<ff:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await oi(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=gf()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=VD(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:vs}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new pr}:await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:vs})})}catch(r){if(ue(r))return _D(r)&&(await this._removeSession(),await Tt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new pr;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await ta(this.storage,this.storageKey));const{data:u,error:d}=await ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:vs});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),ue(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new pr;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=mf(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(ue(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new pr;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ue(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Rt())throw new Zc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Zc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new jw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Zc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new jw("No code detected.");const{data:y,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new Zc("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let p=d+h;c&&(p=parseInt(c));const m=p-d;m*1e3<=ua&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const b=p-h;d-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,p,d):d-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,p,d);const{data:g,error:v}=await this._getUser(i);if(v)throw v;const x={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:p,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:t.type},error:null})}catch(n){if(ue(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await oi(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(bD(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Tt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=PD(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await ta(this.storage,this.storageKey,!0));try{return await ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),ue(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(ue(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:p}=i;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ve(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Rt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(ue(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,h=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Kr}),{data:p,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new ea}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:m}))}catch(s){if(await Tt(this.storage,`${this.storageKey}-code-verifier`),ue(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await ve(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(ue(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await MD(async s=>(s>0&&await OD(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Kr})),(s,i)=>{const o=200*Math.pow(2,s);return i&&pf(i)&&Date.now()+o-n<ua})}catch(n){if(this._debug(r,"error",n),ue(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Rt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await oi(this.storage,this.storageKey);if(s&&this.userStorage){let o=await oi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await da(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:gf()}else if(s&&!s.user&&!s.user){const o=await oi(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Tt(this.storage,this.storageKey+"-user"),await da(this.storage,this.storageKey,s)):s.user=gf()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<ff;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${ff}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),pf(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new pr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Qd;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new pr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),ue(i)){const o={data:null,error:i};return pf(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Tt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await da(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Ew(s);await da(this.storage,this.storageKey,i)}else{const s=Ew(r);await da(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Tt(this.storage,this.storageKey),await Tt(this.storage,this.storageKey+"-code-verifier"),await Tt(this.storage,this.storageKey+"-user"),this.userStorage&&await Tt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Rt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ua);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/ua);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ua}ms, refresh threshold is ${om} ticks`),s<=om&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Y1)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Rt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await ta(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await ve(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ue(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await ve(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(ue(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?dL(t.webauthn.credential_response):hL(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(ue(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:cL(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:uL(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ue(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=mf(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await ve(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new pr})})}catch(r){if(ue(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new pr});const o=await ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Rt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new pr});const o=await ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Rt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await ve(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new pr})})}catch(t){if(ue(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await ve(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new pr})})}catch(r){if(ue(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+xD>s)return n;const{data:i,error:o}=await ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:b}=await this.getSession();if(b||!m.session)return this._returnResult({data:null,error:b});n=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=mf(n);r!=null&&r.allowExpired||zD(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const d=qD(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,TD(`${l}.${c}`)))throw new um("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(ue(n))return this._returnResult({data:null,error:n});throw n}}}Bl.nextInstanceID={};const bL=Bl,_L="2.91.0";let Jo="";typeof Deno<"u"?Jo="deno":typeof document<"u"?Jo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Jo="react-native":Jo="node";const jL={"X-Client-Info":`supabase-js-${Jo}/${_L}`},SL={headers:jL},NL={schema:"public"},kL={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},CL={};function zl(e){"@babel/helpers - typeof";return zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zl(e)}function EL(e,t){if(zl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TL(e){var t=EL(e,"string");return zl(t)=="symbol"?t:t+""}function RL(e,t,r){return(t=TL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ct(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mw(Object(r),!0).forEach(function(n){RL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const PL=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),AL=()=>Headers,IL=(e,t,r)=>{const n=PL(r),s=AL();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,ct(ct({},o),{},{headers:u}))}};function OL(e){return e.endsWith("/")?e:e+"/"}function ML(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,p={db:ct(ct({},c),s),auth:ct(ct({},u),i),realtime:ct(ct({},d),o),storage:{},global:ct(ct(ct({},h),l),{},{headers:ct(ct({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function DL(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(OL(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var LL=class extends bL{constructor(e){super(e)}},$L=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const i=DL(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:NL,realtime:CL,auth:ct(ct({},kL),{},{storageKey:o}),global:SL},c=ML(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=IL(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(ct({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new v4(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new pD(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new h4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:u},d,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new LL({url:this.authUrl.href,headers:ct(ct({},p),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:l,debug:c,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new O4(this.realtimeUrl.href,ct(ct({},e),{},{params:ct(ct({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const FL=(e,t,r)=>new $L(e,t,r);function UL(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}UL()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const BL="https://piszvseyaefxekubphhf.supabase.co",zL="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBpc3p2c2V5YWVmeGVrdWJwaGhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwODE3NTEsImV4cCI6MjA4NDY1Nzc1MX0.odmCphs9gpipbjF7zp639J0r8s48SYHnpNsjQvfICSc",P=FL(BL,zL,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),X1=f.createContext(void 0);function qL({children:e}){const[t,r]=f.useState(null),[n,s]=f.useState(null),[i,o]=f.useState(null),[l,c]=f.useState(!0),u=new URL("/remix-of-stackwise-advisor/",window.location.origin).toString(),d=async g=>{const{data:v,error:x}=await P.from("profiles").select("id, user_id, display_name, avatar_url, bio, is_public, follower_count, following_count").eq("user_id",g).single();return x?(console.error("Error fetching profile:",x),null):v};f.useEffect(()=>{const{data:{subscription:g}}=P.auth.onAuthStateChange(async(v,x)=>{s(x),r((x==null?void 0:x.user)??null),x!=null&&x.user?setTimeout(async()=>{const y=await d(x.user.id);o(y)},0):o(null),c(!1)});return P.auth.getSession().then(async({data:{session:v}})=>{s(v);let x=(v==null?void 0:v.user)??null;if(!x&&(v!=null&&v.access_token)){const{data:y}=await P.auth.getUser(v.access_token);x=y.user??null}r(x),x&&d(x.id).then(o),c(!1)}),()=>g.unsubscribe()},[]);const h=async(g,v,x)=>{const{error:y}=await P.auth.signUp({email:g,password:v,options:{emailRedirectTo:u,data:{display_name:x}}});return{error:y}},p=async(g,v)=>{const{error:x}=await P.auth.signInWithPassword({email:g,password:v});return{error:x}},m=async()=>{await P.auth.signOut(),o(null)},b=async g=>{if(!t)return{error:new Error("Not authenticated")};const{error:v}=await P.from("profiles").update(g).eq("user_id",t.id);return v||o(x=>x?{...x,...g}:null),{error:v}};return a.jsx(X1.Provider,{value:{user:t,session:n,profile:i,isLoading:l,signUp:h,signIn:p,signOut:m,updateProfile:b},children:e})}function ke(){const e=f.useContext(X1);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const ev=oc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-soft hover:bg-primary/90 hover:shadow-soft-md hover:-translate-y-0.5",destructive:"bg-destructive text-destructive-foreground shadow-soft hover:bg-destructive/90",outline:"border border-border/60 bg-card/50 backdrop-blur-sm hover:bg-accent hover:text-accent-foreground hover:border-primary/30",secondary:"bg-secondary/80 text-secondary-foreground backdrop-blur-sm hover:bg-secondary/60",ghost:"hover:bg-accent/50 hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",glass:"bg-card/40 backdrop-blur-glass border border-border/40 text-foreground hover:bg-card/60 hover:border-primary/30 hover:shadow-soft",glow:"bg-primary text-primary-foreground shadow-glow-aqua hover:shadow-[0_0_40px_hsl(185_55%_50%_/_0.5)]",chrome:"bg-gradient-chrome border border-border/50 text-foreground hover:shadow-soft-md"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),M=f.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},i)=>{const o=n?xR:"button";return a.jsx(o,{className:H(ev({variant:t,size:r,className:e})),ref:i,...s})});M.displayName="Button";function Dw({variant:e="header",mode:t="all"}){const n=Rn().pathname,i=[{path:"/",label:"Home",icon:vP,showWhen:"public-only"},{path:"/wall",label:"Feed",icon:cc,showWhen:"auth-only"},{path:"/inventory",label:"Library",icon:Mr,showWhen:"always"},{path:"/blueprints",label:"Blueprints",icon:Ud,showWhen:"always"},{path:"/explore",label:"Explore",icon:ho,showWhen:"always"}].filter(o=>t==="public"?o.showWhen==="public-only"||o.showWhen==="always":o.showWhen==="auth-only"||o.showWhen==="always");return e==="floating"?a.jsx("nav",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-40 flex items-center gap-1 p-1 bg-card/80 backdrop-blur-glass rounded-full border border-border/50 shadow-soft-lg",children:i.map(o=>{const l=n===o.path,c=o.icon;return a.jsx(be,{to:o.path,children:a.jsxs(M,{variant:l?"default":"ghost",size:"sm",className:H("gap-2 rounded-full",l&&"bg-primary text-primary-foreground"),children:[a.jsx(c,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:o.label})]})},o.path)})}):a.jsx("nav",{className:"flex items-center gap-1 p-1 bg-card/50 backdrop-blur-sm rounded-xl border border-border/30",children:i.map(o=>{const l=n===o.path,c=o.icon;return a.jsx(be,{to:o.path,children:a.jsxs(M,{variant:l?"glass":"ghost",size:"sm",className:H("gap-2",l&&"bg-accent/50 pointer-events-none"),children:[a.jsx(c,{className:"h-4 w-4"}),o.label]})},o.path)})})}var WL=f.createContext(void 0);function _o(e){const t=f.useContext(WL);return e||t||"ltr"}var yf=0;function tv(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Lw()),document.body.insertAdjacentElement("beforeend",e[1]??Lw()),yf++,()=>{yf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),yf--}},[])}function Lw(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var xf="focusScope.autoFocusOnMount",wf="focusScope.autoFocusOnUnmount",$w={bubbles:!1,cancelable:!0},VL="FocusScope",Jd=f.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=e,[l,c]=f.useState(null),u=dt(s),d=dt(i),h=f.useRef(null),p=Ne(t,g=>c(g)),m=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(n){let g=function(w){if(m.paused||!l)return;const _=w.target;l.contains(_)?h.current=_:ds(h.current,{select:!0})},v=function(w){if(m.paused||!l)return;const _=w.relatedTarget;_!==null&&(l.contains(_)||ds(h.current,{select:!0}))},x=function(w){if(document.activeElement===document.body)for(const j of w)j.removedNodes.length>0&&ds(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",v);const y=new MutationObserver(x);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",v),y.disconnect()}}},[n,l,m.paused]),f.useEffect(()=>{if(l){Uw.add(m);const g=document.activeElement;if(!l.contains(g)){const x=new CustomEvent(xf,$w);l.addEventListener(xf,u),l.dispatchEvent(x),x.defaultPrevented||(HL(JL(Z1(l)),{select:!0}),document.activeElement===g&&ds(l))}return()=>{l.removeEventListener(xf,u),setTimeout(()=>{const x=new CustomEvent(wf,$w);l.addEventListener(wf,d),l.dispatchEvent(x),x.defaultPrevented||ds(g??document.body,{select:!0}),l.removeEventListener(wf,d),Uw.remove(m)},0)}}},[l,u,d,m]);const b=f.useCallback(g=>{if(!r&&!n||m.paused)return;const v=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(v&&x){const y=g.currentTarget,[w,_]=KL(y);w&&_?!g.shiftKey&&x===_?(g.preventDefault(),r&&ds(w,{select:!0})):g.shiftKey&&x===w&&(g.preventDefault(),r&&ds(_,{select:!0})):x===y&&g.preventDefault()}},[r,n,m.paused]);return a.jsx(oe.div,{tabIndex:-1,...o,ref:p,onKeyDown:b})});Jd.displayName=VL;function HL(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(ds(n,{select:t}),document.activeElement!==r)return}function KL(e){const t=Z1(e),r=Fw(t,e),n=Fw(t.reverse(),e);return[r,n]}function Z1(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Fw(e,t){for(const r of e)if(!GL(r,{upTo:t}))return r}function GL(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function YL(e){return e instanceof HTMLInputElement&&"select"in e}function ds(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&YL(e)&&t&&e.select()}}var Uw=QL();function QL(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=Bw(e,t),e.unshift(t)},remove(t){var r;e=Bw(e,t),(r=e[0])==null||r.resume()}}}function Bw(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function JL(e){return e.filter(t=>t.tagName!=="A")}var bf="rovingFocusGroup.onEntryFocus",XL={bubbles:!1,cancelable:!0},hc="RovingFocusGroup",[dm,eS,ZL]=sc(hc),[e$,Xd]=Mt(hc,[ZL]),[t$,r$]=e$(hc),tS=f.forwardRef((e,t)=>a.jsx(dm.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(dm.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(n$,{...e,ref:t})})}));tS.displayName=hc;var n$=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,p=f.useRef(null),m=Ne(t,p),b=_o(i),[g,v]=Ur({prop:o,defaultProp:l??null,onChange:c,caller:hc}),[x,y]=f.useState(!1),w=dt(u),_=eS(r),j=f.useRef(!1),[S,N]=f.useState(0);return f.useEffect(()=>{const k=p.current;if(k)return k.addEventListener(bf,w),()=>k.removeEventListener(bf,w)},[w]),a.jsx(t$,{scope:r,orientation:n,dir:b,loop:s,currentTabStopId:g,onItemFocus:f.useCallback(k=>v(k),[v]),onItemShiftTab:f.useCallback(()=>y(!0),[]),onFocusableItemAdd:f.useCallback(()=>N(k=>k+1),[]),onFocusableItemRemove:f.useCallback(()=>N(k=>k-1),[]),children:a.jsx(oe.div,{tabIndex:x||S===0?-1:0,"data-orientation":n,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:G(e.onMouseDown,()=>{j.current=!0}),onFocus:G(e.onFocus,k=>{const R=!j.current;if(k.target===k.currentTarget&&R&&!x){const I=new CustomEvent(bf,XL);if(k.currentTarget.dispatchEvent(I),!I.defaultPrevented){const D=_().filter(U=>U.focusable),A=D.find(U=>U.active),$=D.find(U=>U.id===g),X=[A,$,...D].filter(Boolean).map(U=>U.ref.current);sS(X,d)}}j.current=!1}),onBlur:G(e.onBlur,()=>y(!1))})})}),rS="RovingFocusGroupItem",nS=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,children:o,...l}=e,c=Dr(),u=i||c,d=r$(rS,r),h=d.currentTabStopId===u,p=eS(r),{onFocusableItemAdd:m,onFocusableItemRemove:b,currentTabStopId:g}=d;return f.useEffect(()=>{if(n)return m(),()=>b()},[n,m,b]),a.jsx(dm.ItemSlot,{scope:r,id:u,focusable:n,active:s,children:a.jsx(oe.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:G(e.onMouseDown,v=>{n?d.onItemFocus(u):v.preventDefault()}),onFocus:G(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:G(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const x=a$(v,d.orientation,d.dir);if(x!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let w=p().filter(_=>_.focusable).map(_=>_.ref.current);if(x==="last")w.reverse();else if(x==="prev"||x==="next"){x==="prev"&&w.reverse();const _=w.indexOf(v.currentTarget);w=d.loop?o$(w,_+1):w.slice(_+1)}setTimeout(()=>sS(w))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:g!=null}):o})})});nS.displayName=rS;var s$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function i$(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function a$(e,t,r){const n=i$(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return s$[n]}function sS(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function o$(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var iS=tS,aS=nS,l$=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ia=new WeakMap,eu=new WeakMap,tu={},_f=0,oS=function(e){return e&&(e.host||oS(e.parentNode))},c$=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=oS(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},u$=function(e,t,r,n){var s=c$(t,Array.isArray(e)?e:[e]);tu[r]||(tu[r]=new WeakMap);var i=tu[r],o=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(p){if(l.has(p))d(p);else try{var m=p.getAttribute(n),b=m!==null&&m!=="false",g=(ia.get(p)||0)+1,v=(i.get(p)||0)+1;ia.set(p,g),i.set(p,v),o.push(p),g===1&&b&&eu.set(p,!0),v===1&&p.setAttribute(r,"true"),b||p.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",p,x)}})};return d(t),l.clear(),_f++,function(){o.forEach(function(h){var p=ia.get(h)-1,m=i.get(h)-1;ia.set(h,p),i.set(h,m),p||(eu.has(h)||h.removeAttribute(n),eu.delete(h)),m||h.removeAttribute(r)}),_f--,_f||(ia=new WeakMap,ia=new WeakMap,eu=new WeakMap,tu={})}},rv=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=l$(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),u$(n,s,r,"aria-hidden")):function(){return null}},ju="right-scroll-bar-position",Su="width-before-scroll-bar",d$="with-scroll-bars-hidden",h$="--removed-body-scroll-bar-size";function jf(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function f$(e,t){var r=f.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var p$=typeof window<"u"?f.useLayoutEffect:f.useEffect,zw=new WeakMap;function m$(e,t){var r=f$(null,function(n){return e.forEach(function(s){return jf(s,n)})});return p$(function(){var n=zw.get(r);if(n){var s=new Set(n),i=new Set(e),o=r.current;s.forEach(function(l){i.has(l)||jf(l,null)}),i.forEach(function(l){s.has(l)||jf(l,o)})}zw.set(r,e)},[e]),r}function g$(e){return e}function v$(e,t){t===void 0&&(t=g$);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return s}function y$(e){e===void 0&&(e={});var t=v$(null);return t.options=jn({async:!0,ssr:!1},e),t}var lS=function(e){var t=e.sideCar,r=bo(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return f.createElement(n,jn({},r))};lS.isSideCarExport=!0;function x$(e,t){return e.useMedium(t),lS}var cS=y$(),Sf=function(){},Zd=f.forwardRef(function(e,t){var r=f.useRef(null),n=f.useState({onScrollCapture:Sf,onWheelCapture:Sf,onTouchMoveCapture:Sf}),s=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,p=e.sideCar,m=e.noRelative,b=e.noIsolation,g=e.inert,v=e.allowPinchZoom,x=e.as,y=x===void 0?"div":x,w=e.gapMode,_=bo(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=p,S=m$([r,t]),N=jn(jn({},_),s);return f.createElement(f.Fragment,null,d&&f.createElement(j,{sideCar:cS,removeScrollBar:u,shards:h,noRelative:m,noIsolation:b,inert:g,setCallbacks:i,allowPinchZoom:!!v,lockRef:r,gapMode:w}),o?f.cloneElement(f.Children.only(l),jn(jn({},N),{ref:S})):f.createElement(y,jn({},N,{className:c,ref:S}),l))});Zd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Zd.classNames={fullWidth:Su,zeroRight:ju};var w$=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function b$(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=w$();return t&&e.setAttribute("nonce",t),e}function _$(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function j$(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var S$=function(){var e=0,t=null;return{add:function(r){e==0&&(t=b$())&&(_$(t,r),j$(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},N$=function(){var e=S$();return function(t,r){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},uS=function(){var e=N$(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},k$={left:0,top:0,right:0,gap:0},Nf=function(e){return parseInt(e||"",10)||0},C$=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Nf(r),Nf(n),Nf(s)]},E$=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return k$;var t=C$(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},T$=uS(),Oa="data-scroll-locked",R$=function(e,t,r,n){var s=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(d$,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Oa,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ju,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Su,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(ju," .").concat(ju,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Su," .").concat(Su,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Oa,`] {
    `).concat(h$,": ").concat(l,`px;
  }
`)},qw=function(){var e=parseInt(document.body.getAttribute(Oa)||"0",10);return isFinite(e)?e:0},P$=function(){f.useEffect(function(){return document.body.setAttribute(Oa,(qw()+1).toString()),function(){var e=qw()-1;e<=0?document.body.removeAttribute(Oa):document.body.setAttribute(Oa,e.toString())}},[])},A$=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;P$();var i=f.useMemo(function(){return E$(s)},[s]);return f.createElement(T$,{styles:R$(i,!t,s,r?"":"!important")})},hm=!1;if(typeof window<"u")try{var ru=Object.defineProperty({},"passive",{get:function(){return hm=!0,!0}});window.addEventListener("test",ru,ru),window.removeEventListener("test",ru,ru)}catch{hm=!1}var aa=hm?{passive:!1}:!1,I$=function(e){return e.tagName==="TEXTAREA"},dS=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!I$(e)&&r[t]==="visible")},O$=function(e){return dS(e,"overflowY")},M$=function(e){return dS(e,"overflowX")},Ww=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=hS(e,n);if(s){var i=fS(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},D$=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},L$=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},hS=function(e,t){return e==="v"?O$(t):M$(t)},fS=function(e,t){return e==="v"?D$(t):L$(t)},$$=function(e,t){return e==="h"&&t==="rtl"?-1:1},F$=function(e,t,r,n,s){var i=$$(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),u=!1,d=o>0,h=0,p=0;do{if(!l)break;var m=fS(e,l),b=m[0],g=m[1],v=m[2],x=g-v-i*b;(b||x)&&hS(e,l)&&(h+=x,p+=b);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(p)<1||!s))&&(u=!0),u},nu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Vw=function(e){return[e.deltaX,e.deltaY]},Hw=function(e){return e&&"current"in e?e.current:e},U$=function(e,t){return e[0]===t[0]&&e[1]===t[1]},B$=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},z$=0,oa=[];function q$(e){var t=f.useRef([]),r=f.useRef([0,0]),n=f.useRef(),s=f.useState(z$++)[0],i=f.useState(uS)[0],o=f.useRef(e);f.useEffect(function(){o.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=c4([e.lockRef.current],(e.shards||[]).map(Hw),!0).filter(Boolean);return g.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(g,v){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var x=nu(g),y=r.current,w="deltaX"in g?g.deltaX:y[0]-x[0],_="deltaY"in g?g.deltaY:y[1]-x[1],j,S=g.target,N=Math.abs(w)>Math.abs(_)?"h":"v";if("touches"in g&&N==="h"&&S.type==="range")return!1;var k=Ww(N,S);if(!k)return!0;if(k?j=N:(j=N==="v"?"h":"v",k=Ww(N,S)),!k)return!1;if(!n.current&&"changedTouches"in g&&(w||_)&&(n.current=j),!j)return!0;var R=n.current||j;return F$(R,v,g,R==="h"?w:_,!0)},[]),c=f.useCallback(function(g){var v=g;if(!(!oa.length||oa[oa.length-1]!==i)){var x="deltaY"in v?Vw(v):nu(v),y=t.current.filter(function(j){return j.name===v.type&&(j.target===v.target||v.target===j.shadowParent)&&U$(j.delta,x)})[0];if(y&&y.should){v.cancelable&&v.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(Hw).filter(Boolean).filter(function(j){return j.contains(v.target)}),_=w.length>0?l(v,w[0]):!o.current.noIsolation;_&&v.cancelable&&v.preventDefault()}}},[]),u=f.useCallback(function(g,v,x,y){var w={name:g,delta:v,target:x,should:y,shadowParent:W$(x)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(_){return _!==w})},1)},[]),d=f.useCallback(function(g){r.current=nu(g),n.current=void 0},[]),h=f.useCallback(function(g){u(g.type,Vw(g),g.target,l(g,e.lockRef.current))},[]),p=f.useCallback(function(g){u(g.type,nu(g),g.target,l(g,e.lockRef.current))},[]);f.useEffect(function(){return oa.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,aa),document.addEventListener("touchmove",c,aa),document.addEventListener("touchstart",d,aa),function(){oa=oa.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,aa),document.removeEventListener("touchmove",c,aa),document.removeEventListener("touchstart",d,aa)}},[]);var m=e.removeScrollBar,b=e.inert;return f.createElement(f.Fragment,null,b?f.createElement(i,{styles:B$(s)}):null,m?f.createElement(A$,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function W$(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const V$=x$(cS,q$);var eh=f.forwardRef(function(e,t){return f.createElement(Zd,jn({},e,{ref:t,sideCar:V$}))});eh.classNames=Zd.classNames;var fm=["Enter"," "],H$=["ArrowDown","PageUp","Home"],pS=["ArrowUp","PageDown","End"],K$=[...H$,...pS],G$={ltr:[...fm,"ArrowRight"],rtl:[...fm,"ArrowLeft"]},Y$={ltr:["ArrowLeft"],rtl:["ArrowRight"]},fc="Menu",[ql,Q$,J$]=sc(fc),[Ki,mS]=Mt(fc,[J$,go,Xd]),th=go(),gS=Xd(),[X$,Gi]=Ki(fc),[Z$,pc]=Ki(fc),vS=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:s,onOpenChange:i,modal:o=!0}=e,l=th(t),[c,u]=f.useState(null),d=f.useRef(!1),h=dt(i),p=_o(s);return f.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),a.jsx(s1,{...l,children:a.jsx(X$,{scope:t,open:r,onOpenChange:h,content:c,onContentChange:u,children:a.jsx(Z$,{scope:t,onClose:f.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:p,modal:o,children:n})})})};vS.displayName=fc;var e3="MenuAnchor",nv=f.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=th(r);return a.jsx(Lg,{...s,...n,ref:t})});nv.displayName=e3;var sv="MenuPortal",[t3,yS]=Ki(sv,{forceMount:void 0}),xS=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:s}=e,i=Gi(sv,t);return a.jsx(t3,{scope:t,forceMount:r,children:a.jsx(Dt,{present:r||i.open,children:a.jsx(ic,{asChild:!0,container:s,children:n})})})};xS.displayName=sv;var Lr="MenuContent",[r3,iv]=Ki(Lr),wS=f.forwardRef((e,t)=>{const r=yS(Lr,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,i=Gi(Lr,e.__scopeMenu),o=pc(Lr,e.__scopeMenu);return a.jsx(ql.Provider,{scope:e.__scopeMenu,children:a.jsx(Dt,{present:n||i.open,children:a.jsx(ql.Slot,{scope:e.__scopeMenu,children:o.modal?a.jsx(n3,{...s,ref:t}):a.jsx(s3,{...s,ref:t})})})})}),n3=f.forwardRef((e,t)=>{const r=Gi(Lr,e.__scopeMenu),n=f.useRef(null),s=Ne(t,n);return f.useEffect(()=>{const i=n.current;if(i)return rv(i)},[]),a.jsx(av,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:G(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),s3=f.forwardRef((e,t)=>{const r=Gi(Lr,e.__scopeMenu);return a.jsx(av,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),i3=Di("MenuContent.ScrollLock"),av=f.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:p,onDismiss:m,disableOutsideScroll:b,...g}=e,v=Gi(Lr,r),x=pc(Lr,r),y=th(r),w=gS(r),_=Q$(r),[j,S]=f.useState(null),N=f.useRef(null),k=Ne(t,N,v.onContentChange),R=f.useRef(0),I=f.useRef(""),D=f.useRef(0),A=f.useRef(null),$=f.useRef("right"),O=f.useRef(0),X=b?eh:f.Fragment,U=b?{as:i3,allowPinchZoom:!0}:void 0,J=E=>{var z,ce;const B=I.current+E,re=_().filter(_e=>!_e.disabled),Y=document.activeElement,fe=(z=re.find(_e=>_e.ref.current===Y))==null?void 0:z.textValue,q=re.map(_e=>_e.textValue),de=v3(q,B,fe),he=(ce=re.find(_e=>_e.textValue===de))==null?void 0:ce.ref.current;(function _e(Ce){I.current=Ce,window.clearTimeout(R.current),Ce!==""&&(R.current=window.setTimeout(()=>_e(""),1e3))})(B),he&&setTimeout(()=>he.focus())};f.useEffect(()=>()=>window.clearTimeout(R.current),[]),tv();const T=f.useCallback(E=>{var re,Y;return $.current===((re=A.current)==null?void 0:re.side)&&x3(E,(Y=A.current)==null?void 0:Y.area)},[]);return a.jsx(r3,{scope:r,searchRef:I,onItemEnter:f.useCallback(E=>{T(E)&&E.preventDefault()},[T]),onItemLeave:f.useCallback(E=>{var B;T(E)||((B=N.current)==null||B.focus(),S(null))},[T]),onTriggerLeave:f.useCallback(E=>{T(E)&&E.preventDefault()},[T]),pointerGraceTimerRef:D,onPointerGraceIntentChange:f.useCallback(E=>{A.current=E},[]),children:a.jsx(X,{...U,children:a.jsx(Jd,{asChild:!0,trapped:s,onMountAutoFocus:G(i,E=>{var B;E.preventDefault(),(B=N.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:a.jsx(co,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:p,onDismiss:m,children:a.jsx(iS,{asChild:!0,...w,dir:x.dir,orientation:"vertical",loop:n,currentTabStopId:j,onCurrentTabStopIdChange:S,onEntryFocus:G(c,E=>{x.isUsingKeyboardRef.current||E.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx($g,{role:"menu","aria-orientation":"vertical","data-state":DS(v.open),"data-radix-menu-content":"",dir:x.dir,...y,...g,ref:k,style:{outline:"none",...g.style},onKeyDown:G(g.onKeyDown,E=>{const re=E.target.closest("[data-radix-menu-content]")===E.currentTarget,Y=E.ctrlKey||E.altKey||E.metaKey,fe=E.key.length===1;re&&(E.key==="Tab"&&E.preventDefault(),!Y&&fe&&J(E.key));const q=N.current;if(E.target!==q||!K$.includes(E.key))return;E.preventDefault();const he=_().filter(z=>!z.disabled).map(z=>z.ref.current);pS.includes(E.key)&&he.reverse(),m3(he)}),onBlur:G(e.onBlur,E=>{E.currentTarget.contains(E.target)||(window.clearTimeout(R.current),I.current="")}),onPointerMove:G(e.onPointerMove,Wl(E=>{const B=E.target,re=O.current!==E.clientX;if(E.currentTarget.contains(B)&&re){const Y=E.clientX>O.current?"right":"left";$.current=Y,O.current=E.clientX}}))})})})})})})});wS.displayName=Lr;var a3="MenuGroup",ov=f.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return a.jsx(oe.div,{role:"group",...n,ref:t})});ov.displayName=a3;var o3="MenuLabel",bS=f.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return a.jsx(oe.div,{...n,ref:t})});bS.displayName=o3;var ud="MenuItem",Kw="menu.itemSelect",rh=f.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...s}=e,i=f.useRef(null),o=pc(ud,e.__scopeMenu),l=iv(ud,e.__scopeMenu),c=Ne(t,i),u=f.useRef(!1),d=()=>{const h=i.current;if(!r&&h){const p=new CustomEvent(Kw,{bubbles:!0,cancelable:!0});h.addEventListener(Kw,m=>n==null?void 0:n(m),{once:!0}),xg(h,p),p.defaultPrevented?u.current=!1:o.onClose()}};return a.jsx(_S,{...s,ref:c,disabled:r,onClick:G(e.onClick,d),onPointerDown:h=>{var p;(p=e.onPointerDown)==null||p.call(e,h),u.current=!0},onPointerUp:G(e.onPointerUp,h=>{var p;u.current||(p=h.currentTarget)==null||p.click()}),onKeyDown:G(e.onKeyDown,h=>{const p=l.searchRef.current!=="";r||p&&h.key===" "||fm.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});rh.displayName=ud;var _S=f.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...i}=e,o=iv(ud,r),l=gS(r),c=f.useRef(null),u=Ne(t,c),[d,h]=f.useState(!1),[p,m]=f.useState("");return f.useEffect(()=>{const b=c.current;b&&m((b.textContent??"").trim())},[i.children]),a.jsx(ql.ItemSlot,{scope:r,disabled:n,textValue:s??p,children:a.jsx(aS,{asChild:!0,...l,focusable:!n,children:a.jsx(oe.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:G(e.onPointerMove,Wl(b=>{n?o.onItemLeave(b):(o.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:G(e.onPointerLeave,Wl(b=>o.onItemLeave(b))),onFocus:G(e.onFocus,()=>h(!0)),onBlur:G(e.onBlur,()=>h(!1))})})})}),l3="MenuCheckboxItem",jS=f.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...s}=e;return a.jsx(ES,{scope:e.__scopeMenu,checked:r,children:a.jsx(rh,{role:"menuitemcheckbox","aria-checked":dd(r)?"mixed":r,...s,ref:t,"data-state":cv(r),onSelect:G(s.onSelect,()=>n==null?void 0:n(dd(r)?!0:!r),{checkForDefaultPrevented:!1})})})});jS.displayName=l3;var SS="MenuRadioGroup",[c3,u3]=Ki(SS,{value:void 0,onValueChange:()=>{}}),NS=f.forwardRef((e,t)=>{const{value:r,onValueChange:n,...s}=e,i=dt(n);return a.jsx(c3,{scope:e.__scopeMenu,value:r,onValueChange:i,children:a.jsx(ov,{...s,ref:t})})});NS.displayName=SS;var kS="MenuRadioItem",CS=f.forwardRef((e,t)=>{const{value:r,...n}=e,s=u3(kS,e.__scopeMenu),i=r===s.value;return a.jsx(ES,{scope:e.__scopeMenu,checked:i,children:a.jsx(rh,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":cv(i),onSelect:G(n.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,r)},{checkForDefaultPrevented:!1})})})});CS.displayName=kS;var lv="MenuItemIndicator",[ES,d3]=Ki(lv,{checked:!1}),TS=f.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...s}=e,i=d3(lv,r);return a.jsx(Dt,{present:n||dd(i.checked)||i.checked===!0,children:a.jsx(oe.span,{...s,ref:t,"data-state":cv(i.checked)})})});TS.displayName=lv;var h3="MenuSeparator",RS=f.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return a.jsx(oe.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});RS.displayName=h3;var f3="MenuArrow",PS=f.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=th(r);return a.jsx(Fg,{...s,...n,ref:t})});PS.displayName=f3;var p3="MenuSub",[pz,AS]=Ki(p3),Xo="MenuSubTrigger",IS=f.forwardRef((e,t)=>{const r=Gi(Xo,e.__scopeMenu),n=pc(Xo,e.__scopeMenu),s=AS(Xo,e.__scopeMenu),i=iv(Xo,e.__scopeMenu),o=f.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=f.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return f.useEffect(()=>d,[d]),f.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),a.jsx(nv,{asChild:!0,...u,children:a.jsx(_S,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":DS(r.open),...e,ref:Ld(t,s.onTriggerChange),onClick:h=>{var p;(p=e.onClick)==null||p.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:G(e.onPointerMove,Wl(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:G(e.onPointerLeave,Wl(h=>{var m,b;d();const p=(m=r.content)==null?void 0:m.getBoundingClientRect();if(p){const g=(b=r.content)==null?void 0:b.dataset.side,v=g==="right",x=v?-5:5,y=p[v?"left":"right"],w=p[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:y,y:p.top},{x:w,y:p.top},{x:w,y:p.bottom},{x:y,y:p.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:G(e.onKeyDown,h=>{var m;const p=i.searchRef.current!=="";e.disabled||p&&h.key===" "||G$[n.dir].includes(h.key)&&(r.onOpenChange(!0),(m=r.content)==null||m.focus(),h.preventDefault())})})})});IS.displayName=Xo;var OS="MenuSubContent",MS=f.forwardRef((e,t)=>{const r=yS(Lr,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,i=Gi(Lr,e.__scopeMenu),o=pc(Lr,e.__scopeMenu),l=AS(OS,e.__scopeMenu),c=f.useRef(null),u=Ne(t,c);return a.jsx(ql.Provider,{scope:e.__scopeMenu,children:a.jsx(Dt,{present:n||i.open,children:a.jsx(ql.Slot,{scope:e.__scopeMenu,children:a.jsx(av,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:G(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:G(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:G(e.onKeyDown,d=>{var m;const h=d.currentTarget.contains(d.target),p=Y$[o.dir].includes(d.key);h&&p&&(i.onOpenChange(!1),(m=l.trigger)==null||m.focus(),d.preventDefault())})})})})})});MS.displayName=OS;function DS(e){return e?"open":"closed"}function dd(e){return e==="indeterminate"}function cv(e){return dd(e)?"indeterminate":e?"checked":"unchecked"}function m3(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function g3(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function v3(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=g3(e,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function y3(e,t){const{x:r,y:n}=e;let s=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,h=c.x,p=c.y;d>n!=p>n&&r<(h-u)*(n-d)/(p-d)+u&&(s=!s)}return s}function x3(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return y3(r,t)}function Wl(e){return t=>t.pointerType==="mouse"?e(t):void 0}var w3=vS,b3=nv,_3=xS,j3=wS,S3=ov,N3=bS,k3=rh,C3=jS,E3=NS,T3=CS,R3=TS,P3=RS,A3=PS,I3=IS,O3=MS,nh="DropdownMenu",[M3,mz]=Mt(nh,[mS]),er=mS(),[D3,LS]=M3(nh),$S=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:s,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=er(t),u=f.useRef(null),[d,h]=Ur({prop:s,defaultProp:i??!1,onChange:o,caller:nh});return a.jsx(D3,{scope:t,triggerId:Dr(),triggerRef:u,contentId:Dr(),open:d,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(p=>!p),[h]),modal:l,children:a.jsx(w3,{...c,open:d,onOpenChange:h,dir:n,modal:l,children:r})})};$S.displayName=nh;var FS="DropdownMenuTrigger",US=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=e,i=LS(FS,r),o=er(r);return a.jsx(b3,{asChild:!0,...o,children:a.jsx(oe.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:Ld(t,i.triggerRef),onPointerDown:G(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:G(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});US.displayName=FS;var L3="DropdownMenuPortal",BS=e=>{const{__scopeDropdownMenu:t,...r}=e,n=er(t);return a.jsx(_3,{...n,...r})};BS.displayName=L3;var zS="DropdownMenuContent",qS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=LS(zS,r),i=er(r),o=f.useRef(!1);return a.jsx(j3,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...n,ref:t,onCloseAutoFocus:G(e.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:G(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});qS.displayName=zS;var $3="DropdownMenuGroup",F3=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=er(r);return a.jsx(S3,{...s,...n,ref:t})});F3.displayName=$3;var U3="DropdownMenuLabel",WS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=er(r);return a.jsx(N3,{...s,...n,ref:t})});WS.displayName=U3;var B3="DropdownMenuItem",VS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=er(r);return a.jsx(k3,{...s,...n,ref:t})});VS.displayName=B3;var z3="DropdownMenuCheckboxItem",HS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=er(r);return a.jsx(C3,{...s,...n,ref:t})});HS.displayName=z3;var q3="DropdownMenuRadioGroup",W3=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=er(r);return a.jsx(E3,{...s,...n,ref:t})});W3.displayName=q3;var V3="DropdownMenuRadioItem",KS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=er(r);return a.jsx(T3,{...s,...n,ref:t})});KS.displayName=V3;var H3="DropdownMenuItemIndicator",GS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=er(r);return a.jsx(R3,{...s,...n,ref:t})});GS.displayName=H3;var K3="DropdownMenuSeparator",YS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=er(r);return a.jsx(P3,{...s,...n,ref:t})});YS.displayName=K3;var G3="DropdownMenuArrow",Y3=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=er(r);return a.jsx(A3,{...s,...n,ref:t})});Y3.displayName=G3;var Q3="DropdownMenuSubTrigger",QS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=er(r);return a.jsx(I3,{...s,...n,ref:t})});QS.displayName=Q3;var J3="DropdownMenuSubContent",JS=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=er(r);return a.jsx(O3,{...s,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});JS.displayName=J3;var X3=$S,Z3=US,e5=BS,XS=qS,ZS=WS,eN=VS,tN=HS,rN=KS,nN=GS,sN=YS,iN=QS,aN=JS;const oN=X3,lN=Z3,t5=f.forwardRef(({className:e,inset:t,children:r,...n},s)=>a.jsxs(iN,{ref:s,className:H("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...n,children:[r,a.jsx(Ng,{className:"ml-auto h-4 w-4"})]}));t5.displayName=iN.displayName;const r5=f.forwardRef(({className:e,...t},r)=>a.jsx(aN,{ref:r,className:H("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));r5.displayName=aN.displayName;const uv=f.forwardRef(({className:e,sideOffset:t=4,...r},n)=>a.jsx(e5,{children:a.jsx(XS,{ref:n,sideOffset:t,className:H("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));uv.displayName=XS.displayName;const yi=f.forwardRef(({className:e,inset:t,...r},n)=>a.jsx(eN,{ref:n,className:H("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...r}));yi.displayName=eN.displayName;const n5=f.forwardRef(({className:e,children:t,checked:r,...n},s)=>a.jsxs(tN,{ref:s,className:H("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:r,...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(nN,{children:a.jsx(Hi,{className:"h-4 w-4"})})}),t]}));n5.displayName=tN.displayName;const s5=f.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(rN,{ref:n,className:H("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(nN,{children:a.jsx(fP,{className:"h-2 w-2 fill-current"})})}),t]}));s5.displayName=rN.displayName;const cN=f.forwardRef(({className:e,inset:t,...r},n)=>a.jsx(ZS,{ref:n,className:H("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));cN.displayName=ZS.displayName;const Nu=f.forwardRef(({className:e,...t},r)=>a.jsx(sN,{ref:r,className:H("-mx-1 my-1 h-px bg-muted",e),...t}));Nu.displayName=sN.displayName;function i5(){const[e,t]=f.useState("light");f.useEffect(()=>{const i=localStorage.getItem("blend-theme"),o=i==="dark"||i==="light"?i:i==="dark-aqua"||i==="dark-orange"?"dark":"light";t(o),r(o),i&&i!==o&&localStorage.setItem("blend-theme",o)},[]);const r=i=>{const o=document.documentElement;o.classList.remove("dark","theme-orange"),i==="dark"&&o.classList.add("dark","theme-orange")},n=i=>{t(i),r(i),localStorage.setItem("blend-theme",i)},s=()=>{switch(e){case"light":return a.jsx(Ax,{className:"h-5 w-5"});case"dark":return a.jsx(Px,{className:"h-5 w-5"})}};return a.jsxs(oN,{children:[a.jsx(lN,{asChild:!0,children:a.jsxs(M,{variant:"ghost",size:"icon",className:"rounded-full bg-card/60 backdrop-blur-sm border border-border/50 hover:bg-card",children:[s(),a.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),a.jsxs(uv,{align:"end",className:"min-w-[160px]",children:[a.jsxs(yi,{onClick:()=>n("light"),className:e==="light"?"bg-accent":"",children:[a.jsx(Ax,{className:"mr-2 h-4 w-4"}),"Light"]}),a.jsxs(yi,{onClick:()=>n("dark"),className:e==="dark"?"bg-accent":"",children:[a.jsx(Px,{className:"mr-2 h-4 w-4"}),"Dark"]})]})]})}var uN={exports:{}},dN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var so=f;function a5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var o5=typeof Object.is=="function"?Object.is:a5,l5=so.useState,c5=so.useEffect,u5=so.useLayoutEffect,d5=so.useDebugValue;function h5(e,t){var r=t(),n=l5({inst:{value:r,getSnapshot:t}}),s=n[0].inst,i=n[1];return u5(function(){s.value=r,s.getSnapshot=t,kf(s)&&i({inst:s})},[e,r,t]),c5(function(){return kf(s)&&i({inst:s}),e(function(){kf(s)&&i({inst:s})})},[e]),d5(r),r}function kf(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!o5(e,r)}catch{return!0}}function f5(e,t){return t()}var p5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f5:h5;dN.useSyncExternalStore=so.useSyncExternalStore!==void 0?so.useSyncExternalStore:p5;uN.exports=dN;var m5=uN.exports;function g5(){return m5.useSyncExternalStore(v5,()=>!0,()=>!1)}function v5(){return()=>{}}var dv="Avatar",[y5,gz]=Mt(dv),[x5,hN]=y5(dv),fN=f.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[s,i]=f.useState("idle");return a.jsx(x5,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:a.jsx(oe.span,{...n,ref:t})})});fN.displayName=dv;var pN="AvatarImage",mN=f.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...i}=e,o=hN(pN,r),l=w5(n,i),c=dt(u=>{s(u),o.onImageLoadingStatusChange(u)});return ht(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(oe.img,{...i,ref:t,src:n}):null});mN.displayName=pN;var gN="AvatarFallback",vN=f.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...s}=e,i=hN(gN,r),[o,l]=f.useState(n===void 0);return f.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&i.imageLoadingStatus!=="loaded"?a.jsx(oe.span,{...s,ref:t}):null});vN.displayName=gN;function Gw(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function w5(e,{referrerPolicy:t,crossOrigin:r}){const n=g5(),s=f.useRef(null),i=n?(s.current||(s.current=new window.Image),s.current):null,[o,l]=f.useState(()=>Gw(i,e));return ht(()=>{l(Gw(i,e))},[i,e]),ht(()=>{const c=h=>()=>{l(h)};if(!i)return;const u=c("loaded"),d=c("error");return i.addEventListener("load",u),i.addEventListener("error",d),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,r,t]),o}var yN=fN,xN=mN,wN=vN;const ln=f.forwardRef(({className:e,...t},r)=>a.jsx(yN,{ref:r,className:H("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));ln.displayName=yN.displayName;const cn=f.forwardRef(({className:e,...t},r)=>a.jsx(xN,{ref:r,className:H("aspect-square h-full w-full",e),...t}));cn.displayName=xN.displayName;const un=f.forwardRef(({className:e,...t},r)=>a.jsx(wN,{ref:r,className:H("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));un.displayName=wN.displayName;const bN="https://bapi.vdsai.cloud";async function b5(){var s;const{data:e}=await P.auth.getSession(),t=(s=e.session)==null?void 0:s.access_token;if(!t)throw new Error("Not authenticated");const r=`${bN.replace(/\/$/,"")}/api/credits`,n=await fetch(r,{headers:{Authorization:`Bearer ${t}`}});if(!n.ok)throw new Error("Unable to load credits");return n.json()}function _5(e){return Be({queryKey:["ai-credits"],queryFn:b5,enabled:e&&!!bN,staleTime:6e4,refetchInterval:6e4})}function j5(){var u;const{user:e,profile:t,signOut:r,isLoading:n}=ke(),s=_5(!!e);if(n)return a.jsx("div",{className:"h-9 w-9 rounded-full bg-muted animate-pulse"});if(!e)return a.jsx(be,{to:"/auth",children:a.jsxs(M,{variant:"outline",size:"sm",className:"gap-2",children:[a.jsx(Rp,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Sign In"})]})});const i=(t==null?void 0:t.display_name)||((u=e.email)==null?void 0:u.split("@")[0])||"User",o=i.slice(0,2).toUpperCase(),l=s.data,c=l!=null&&l.bypass?100:l?Math.min(100,Math.max(0,l.remaining/Math.max(1,l.limit)*100)):0;return a.jsxs(oN,{children:[a.jsx(lN,{asChild:!0,children:a.jsx(M,{variant:"ghost",className:"relative h-9 w-9 rounded-full",children:a.jsxs(ln,{className:"h-9 w-9",children:[a.jsx(cn,{src:(t==null?void 0:t.avatar_url)||void 0,alt:i}),a.jsx(un,{className:"bg-primary/10 text-primary",children:o})]})})}),a.jsxs(uv,{className:"w-56",align:"end",forceMount:!0,children:[a.jsx(cN,{className:"font-normal",children:a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsx("p",{className:"text-sm font-medium leading-none",children:i}),a.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.email})]})}),a.jsx(Nu,{}),a.jsxs("div",{className:"px-3 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[a.jsx("span",{children:"AI credits"}),a.jsx("span",{children:l?l.bypass?"Unlimited":`${l.remaining}/${l.limit}`:""})]}),a.jsx("div",{className:"mt-2 h-2 w-full rounded-full bg-muted",children:a.jsx("div",{className:"h-2 rounded-full bg-primary transition-all",style:{width:`${c}%`}})}),a.jsx("p",{className:"mt-1 text-[10px] text-muted-foreground",children:s.isLoading?"Loading credits":s.isError?"Credits unavailable":"Resets daily"})]}),a.jsx(Nu,{}),a.jsx(yi,{asChild:!0,children:a.jsxs(be,{to:`/u/${e.id}`,className:"flex items-center cursor-pointer",children:[a.jsx(Rp,{className:"mr-2 h-4 w-4"}),"My Profile"]})}),a.jsx(yi,{asChild:!0,children:a.jsxs(be,{to:"/settings",className:"flex items-center cursor-pointer",children:[a.jsx(Nj,{className:"mr-2 h-4 w-4"}),"Settings"]})}),a.jsx(yi,{asChild:!0,children:a.jsxs("a",{href:"mailto:hi@vdsai.cloud",className:"flex items-center cursor-pointer",children:[a.jsx(yP,{className:"mr-2 h-4 w-4"}),"Support"]})}),a.jsx(Nu,{}),a.jsxs(yi,{onClick:()=>r(),className:"text-destructive focus:text-destructive cursor-pointer",children:[a.jsx(wP,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})]})}var sh="Dialog",[_N,jN]=Mt(sh),[S5,fn]=_N(sh),SN=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:o=!0}=e,l=f.useRef(null),c=f.useRef(null),[u,d]=Ur({prop:n,defaultProp:s??!1,onChange:i,caller:sh});return a.jsx(S5,{scope:t,triggerRef:l,contentRef:c,contentId:Dr(),titleId:Dr(),descriptionId:Dr(),open:u,onOpenChange:d,onOpenToggle:f.useCallback(()=>d(h=>!h),[d]),modal:o,children:r})};SN.displayName=sh;var NN="DialogTrigger",kN=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=fn(NN,r),i=Ne(t,s.triggerRef);return a.jsx(oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":pv(s.open),...n,ref:i,onClick:G(e.onClick,s.onOpenToggle)})});kN.displayName=NN;var hv="DialogPortal",[N5,CN]=_N(hv,{forceMount:void 0}),EN=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,i=fn(hv,t);return a.jsx(N5,{scope:t,forceMount:r,children:f.Children.map(n,o=>a.jsx(Dt,{present:r||i.open,children:a.jsx(ic,{asChild:!0,container:s,children:o})}))})};EN.displayName=hv;var hd="DialogOverlay",TN=f.forwardRef((e,t)=>{const r=CN(hd,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=fn(hd,e.__scopeDialog);return i.modal?a.jsx(Dt,{present:n||i.open,children:a.jsx(C5,{...s,ref:t})}):null});TN.displayName=hd;var k5=Di("DialogOverlay.RemoveScroll"),C5=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=fn(hd,r);return a.jsx(eh,{as:k5,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(oe.div,{"data-state":pv(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Ui="DialogContent",RN=f.forwardRef((e,t)=>{const r=CN(Ui,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=fn(Ui,e.__scopeDialog);return a.jsx(Dt,{present:n||i.open,children:i.modal?a.jsx(E5,{...s,ref:t}):a.jsx(T5,{...s,ref:t})})});RN.displayName=Ui;var E5=f.forwardRef((e,t)=>{const r=fn(Ui,e.__scopeDialog),n=f.useRef(null),s=Ne(t,r.contentRef,n);return f.useEffect(()=>{const i=n.current;if(i)return rv(i)},[]),a.jsx(PN,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:G(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:G(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:G(e.onFocusOutside,i=>i.preventDefault())})}),T5=f.forwardRef((e,t)=>{const r=fn(Ui,e.__scopeDialog),n=f.useRef(!1),s=f.useRef(!1);return a.jsx(PN,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),PN=f.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=e,l=fn(Ui,r),c=f.useRef(null),u=Ne(t,c);return tv(),a.jsxs(a.Fragment,{children:[a.jsx(Jd,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(co,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":pv(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(P5,{titleId:l.titleId}),a.jsx(I5,{contentRef:c,descriptionId:l.descriptionId})]})]})}),fv="DialogTitle",AN=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=fn(fv,r);return a.jsx(oe.h2,{id:s.titleId,...n,ref:t})});AN.displayName=fv;var IN="DialogDescription",ON=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=fn(IN,r);return a.jsx(oe.p,{id:s.descriptionId,...n,ref:t})});ON.displayName=IN;var MN="DialogClose",DN=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=fn(MN,r);return a.jsx(oe.button,{type:"button",...n,ref:t,onClick:G(e.onClick,()=>s.onOpenChange(!1))})});DN.displayName=MN;function pv(e){return e?"open":"closed"}var LN="DialogTitleWarning",[R5,$N]=vR(LN,{contentName:Ui,titleName:fv,docsSlug:"dialog"}),P5=({titleId:e})=>{const t=$N(LN),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},A5="DialogDescriptionWarning",I5=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${$N(A5).contentName}}.`;return f.useEffect(()=>{var i;const s=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},mv=SN,gv=kN,vv=EN,mc=TN,gc=RN,vc=AN,yc=ON,ih=DN;const yv=mv,O5=gv,M5=vv,FN=f.forwardRef(({className:e,...t},r)=>a.jsx(mc,{ref:r,className:H("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));FN.displayName=mc.displayName;const ah=f.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(M5,{children:[a.jsx(FN,{}),a.jsxs(gc,{ref:n,className:H("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,a.jsxs(ih,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[a.jsx(Vt,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ah.displayName=gc.displayName;const xv=({className:e,...t})=>a.jsx("div",{className:H("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});xv.displayName="DialogHeader";const wv=f.forwardRef(({className:e,...t},r)=>a.jsx(vc,{ref:r,className:H("text-lg font-semibold leading-none tracking-tight",e),...t}));wv.displayName=vc.displayName;const D5=f.forwardRef(({className:e,...t},r)=>a.jsx(yc,{ref:r,className:H("text-sm text-muted-foreground",e),...t}));D5.displayName=yc.displayName;const ee=f.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:H("rounded-xl border bg-card/80 text-card-foreground shadow-soft backdrop-blur-sm transition-all duration-300 hover:shadow-soft-md",e),...t}));ee.displayName="Card";const L5=f.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:H("rounded-xl border border-border/50 bg-card/60 text-card-foreground shadow-soft backdrop-blur-glass transition-all duration-400 hover:shadow-soft-lg hover:bg-card/70",e),...t}));L5.displayName="GlassCard";const Ge=f.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:H("flex flex-col space-y-1.5 p-6",e),...t}));Ge.displayName="CardHeader";const pt=f.forwardRef(({className:e,...t},r)=>a.jsx("h3",{ref:r,className:H("text-2xl font-semibold leading-none tracking-tight",e),...t}));pt.displayName="CardTitle";const hl=f.forwardRef(({className:e,...t},r)=>a.jsx("p",{ref:r,className:H("text-sm text-muted-foreground",e),...t}));hl.displayName="CardDescription";const se=f.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:H("p-6 pt-0",e),...t}));se.displayName="CardContent";const oh=f.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:H("flex items-center p-6 pt-0",e),...t}));oh.displayName="CardFooter";const $5=oc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ie({className:e,variant:t,...r}){return a.jsx("div",{className:H($5({variant:t}),e),...r})}const F5=[{label:"Generate a Library",hint:"Describe what you need in a few words."},{label:"Build Your Blueprint",hint:"Pick items, add steps, and add context."},{label:"Review + Publish",hint:"Get an AI review, then share with the community."},{label:"Follow Tags",hint:"Shape your feed and discover similar routines."},{label:"Explore the Wall",hint:"Browse and save blueprints from others."}],U5=[{title:"Libraries",description:"Libraries are smart ingredient lists. Generate one, then use it to build a Blueprint.",icon:_r,bullets:["Generate from a short prompt","Customize categories and items","Reuse across blueprints"]},{title:"Blueprints",description:"Blueprints are step-by-step routines. Build, review, and publish when ready.",icon:Mr,bullets:["Organize steps visually","Add context for each item","Publish or keep private"]},{title:"Tags",description:"Tags connect the community. Follow them to tailor what you see.",icon:kj,bullets:["Follow tags you like","See trends on the wall","Stay focused on your goals"]},{title:"Community",description:"Explore, like, and learn from other peoples blueprints.",icon:cc,bullets:["Discover new routines","Save favorites","Share your own"]}];function B5({open:e,onOpenChange:t}){return a.jsx(yv,{open:e,onOpenChange:t,children:a.jsx(ah,{className:"max-w-5xl w-[95vw] max-h-[85vh] overflow-y-auto border border-border/60 bg-background/95 p-0",children:a.jsxs("div",{className:"relative w-full",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 via-background to-accent/10"}),a.jsxs("div",{className:"relative w-full",children:[a.jsxs("div",{className:"px-8 pt-8 pb-4 border-b border-border/60 bg-background/60 backdrop-blur sticky top-0 z-10",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-2xl bg-primary/15 text-primary flex items-center justify-center",children:a.jsx(Yn,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-semibold",children:"Welcome to Blueprints"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"A friendly guide to the flow, concepts, and how to get started."})]})]}),a.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 text-xs",children:[a.jsx(Ie,{variant:"secondary",children:"Libraries"}),a.jsx(Ie,{variant:"secondary",children:"Blueprints"}),a.jsx(Ie,{variant:"secondary",children:"Tags"}),a.jsx(Ie,{variant:"secondary",children:"Community"})]})]}),a.jsx("div",{className:"px-8 py-6",children:a.jsxs("div",{className:"space-y-8",children:[a.jsx(ee,{className:"border border-border/60 bg-background/80",children:a.jsxs(se,{className:"p-6 space-y-2",children:[a.jsx("p",{className:"text-sm font-semibold",children:"Lets get oriented"}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Heres the goal: take a simple idea, break it into parts, and turn it into a stepbystep routine you can actually follow. Libraries are your ingredients, Blueprints are your instructions, and the community is your feedback loop. As we go, youll refine your routine, learn from others, and end up with something you can reuse anytime."})]})}),a.jsx(ee,{className:"border border-border/60 bg-background/70",children:a.jsxs(se,{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-9 w-9 rounded-xl bg-primary/10 text-primary flex items-center justify-center",children:a.jsx(_r,{className:"h-4 w-4"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold",children:"The Flow"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"From idea  library  build  blueprint  community"})]})]}),a.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:F5.map(r=>a.jsxs("div",{className:"rounded-lg border border-border/60 bg-muted/30 p-3",children:[a.jsx("p",{className:"text-sm font-medium",children:r.label}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.hint})]},r.label))})]})}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:U5.map(r=>{const n=r.icon;return a.jsx(ee,{className:"border border-border/60 bg-background/80",children:a.jsxs(se,{className:"p-6 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-9 w-9 rounded-xl bg-primary/10 text-primary flex items-center justify-center",children:a.jsx(n,{className:"h-4 w-4"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:r.title}),a.jsx("p",{className:"text-xs text-muted-foreground",children:r.description})]})]}),a.jsx("div",{className:"space-y-2",children:r.bullets.map(s=>a.jsxs("div",{className:"text-xs text-muted-foreground",children:[" ",s]},s))})]})},r.title)})}),a.jsx(ee,{className:"border border-border/60 bg-background/80",children:a.jsxs(se,{className:"p-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold",children:"Tip for firsttime users"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Start with Generate Library, then build a blueprint you can refine later."})]}),a.jsx(M,{variant:"outline",size:"sm",onClick:()=>t(!1),children:"Lets go"})]})})]})})]})]})})})}function Nt({actions:e,showFloatingNav:t=!0}){const{user:r}=ke(),[n,s]=f.useState(!1),i=r?"all":"public";return a.jsxs(a.Fragment,{children:[a.jsx("header",{className:"sticky top-0 z-50 border-b border-border/50 bg-card/70 backdrop-blur-glass",children:a.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between relative",children:[a.jsx("div",{className:"flex items-center gap-3 min-w-0",children:a.jsxs(be,{to:"/",className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-primary to-primary/60 flex items-center justify-center glow-primary",children:a.jsx(Sg,{className:"h-4 w-4 text-primary-foreground"})}),a.jsx("span",{className:"text-lg font-semibold tracking-tight",children:"Blueprints"})]})}),a.jsx("div",{className:"hidden sm:block absolute left-1/2 -translate-x-1/2",children:a.jsx(Dw,{variant:"header",mode:i})}),a.jsxs("div",{className:"flex items-center gap-2",children:[e,a.jsx(M,{type:"button",variant:"ghost",size:"icon",onClick:()=>s(!0),className:"h-9 w-9 rounded-full border border-border/60 bg-background/60 text-muted-foreground hover:text-foreground","aria-label":"Open help",children:a.jsx(lc,{className:"h-4 w-4"})}),a.jsx(i5,{}),a.jsx(j5,{})]})]})}),t&&a.jsx("div",{className:"sm:hidden",children:a.jsx(Dw,{variant:"floating",mode:i})}),a.jsx(B5,{open:n,onOpenChange:s})]})}const Yw="hi@vdsai.cloud";function pn(){return a.jsxs("footer",{className:"pt-8 border-t border-border/40 text-center space-y-4",children:[a.jsxs("nav",{className:"flex flex-wrap items-center justify-center gap-4 text-sm text-muted-foreground",children:[a.jsx(be,{to:"/about",className:"hover:text-foreground transition-colors",children:"About"}),a.jsx("span",{className:"text-border",children:""}),a.jsx("a",{href:`mailto:${Yw}`,className:"hover:text-foreground transition-colors",children:"Support"}),a.jsx("span",{className:"text-border",children:""}),a.jsx("a",{href:`mailto:${Yw}`,className:"hover:text-foreground transition-colors",children:"Report issue"})]}),a.jsx("p",{className:"text-xs text-muted-foreground/70",children:"Built with curiosity. Share what works."})]})}function z5(){return Be({queryKey:["community-stats"],queryFn:async()=>{const[e,t,r]=await Promise.all([P.from("blueprints").select("id",{count:"exact",head:!0}).eq("is_public",!0),P.from("inventories").select("id",{count:"exact",head:!0}).eq("is_public",!0),P.from("tags").select("id",{count:"exact",head:!0})]);return{totalBlueprints:e.count??0,totalInventories:t.count??0,activeTags:r.count??0}},staleTime:6e4})}function q5(e=4){return Be({queryKey:["top-blueprints",e],queryFn:async()=>{const{data:t,error:r}=await P.from("blueprints").select("id, title, likes_count, created_at, creator_user_id").eq("is_public",!0).order("likes_count",{ascending:!1}).limit(e);if(r)throw r;if(!t||t.length===0)return[];const n=[...new Set(t.map(p=>p.creator_user_id))],{data:s}=await P.from("profiles").select("user_id, display_name").in("user_id",n),i=new Map((s||[]).map(p=>[p.user_id,p])),o=t.map(p=>p.id),{data:l}=await P.from("blueprint_tags").select("blueprint_id, tag_id").in("blueprint_id",o),c=[...new Set((l||[]).map(p=>p.tag_id))],{data:u}=c.length>0?await P.from("tags").select("id, slug").in("id",c):{data:[]},d=new Map((u||[]).map(p=>[p.id,p.slug])),h=new Map;return(l||[]).forEach(p=>{const m=h.get(p.blueprint_id)||[],b=d.get(p.tag_id);b&&m.push(b),h.set(p.blueprint_id,m)}),t.map(p=>({id:p.id,title:p.title,likes_count:p.likes_count,created_at:p.created_at,creator_profile:i.get(p.creator_user_id)||null,tags:(h.get(p.id)||[]).map(m=>({slug:m}))}))},staleTime:6e4})}function W5(e=8){return Be({queryKey:["featured-tags",e],queryFn:async()=>{const{data:t,error:r}=await P.from("tags").select("id, slug, follower_count").order("follower_count",{ascending:!1}).limit(e);if(r)throw r;return t||[]},staleTime:6e4})}function V5(){const{data:e,isLoading:t}=z5(),r=[{label:"Blueprints",value:(e==null?void 0:e.totalBlueprints)??0,icon:Ud},{label:"Libraries",value:(e==null?void 0:e.totalInventories)??0,icon:Mr},{label:"Topics",value:(e==null?void 0:e.activeTags)??0,icon:Bd}];return a.jsx("div",{className:"flex flex-wrap items-center justify-center gap-6 sm:gap-10 py-6 px-4 rounded-xl border border-border/40 bg-card/40 backdrop-blur-sm",children:r.map(n=>a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(n.icon,{className:"h-4 w-4"}),a.jsx("span",{className:"font-mono text-lg tabular-nums text-foreground",children:t?"":n.value}),a.jsx("span",{className:"text-sm",children:n.label})]},n.label))})}function Ye(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Ks(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const UN=6048e5,H5=864e5,su=43200,Qw=1440;let K5={};function xc(){return K5}function Vl(e,t){var l,c,u,d;const r=xc(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Ye(e),i=s.getDay(),o=(i<n?7:0)+i-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function fd(e){return Vl(e,{weekStartsOn:1})}function BN(e){const t=Ye(e),r=t.getFullYear(),n=Ks(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=fd(n),i=Ks(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=fd(i);return t.getTime()>=s.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Jw(e){const t=Ye(e);return t.setHours(0,0,0,0),t}function pd(e){const t=Ye(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function G5(e,t){const r=Jw(e),n=Jw(t),s=+r-pd(r),i=+n-pd(n);return Math.round((s-i)/H5)}function Y5(e){const t=BN(e),r=Ks(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),fd(r)}function ku(e,t){const r=Ye(e),n=Ye(t),s=r.getTime()-n.getTime();return s<0?-1:s>0?1:s}function Q5(e){return Ks(e,Date.now())}function J5(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function X5(e){if(!J5(e)&&typeof e!="number")return!1;const t=Ye(e);return!isNaN(Number(t))}function Z5(e,t){const r=Ye(e),n=Ye(t),s=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return s*12+i}function eF(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function tF(e,t){return+Ye(e)-+Ye(t)}function rF(e){const t=Ye(e);return t.setHours(23,59,59,999),t}function nF(e){const t=Ye(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function sF(e){const t=Ye(e);return+rF(t)==+nF(t)}function iF(e,t){const r=Ye(e),n=Ye(t),s=ku(r,n),i=Math.abs(Z5(r,n));let o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*i);let l=ku(r,n)===-s;sF(Ye(e))&&i===1&&ku(e,n)===1&&(l=!1),o=s*(i-Number(l))}return o===0?0:o}function aF(e,t,r){const n=tF(e,t)/1e3;return eF(r==null?void 0:r.roundingMethod)(n)}function oF(e){const t=Ye(e),r=Ks(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const lF={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},cF=(e,t,r)=>{let n;const s=lF[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Cf(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const uF={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},dF={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},hF={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fF={date:Cf({formats:uF,defaultWidth:"full"}),time:Cf({formats:dF,defaultWidth:"full"}),dateTime:Cf({formats:hF,defaultWidth:"full"})},pF={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},mF=(e,t,r,n)=>pF[e];function Bo(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const gF={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},vF={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},yF={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},xF={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},wF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},bF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},_F=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},jF={ordinalNumber:_F,era:Bo({values:gF,defaultWidth:"wide"}),quarter:Bo({values:vF,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Bo({values:yF,defaultWidth:"wide"}),day:Bo({values:xF,defaultWidth:"wide"}),dayPeriod:Bo({values:wF,defaultWidth:"wide",formattingValues:bF,defaultFormattingWidth:"wide"})};function zo(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?NF(l,h=>h.test(o)):SF(l,h=>h.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function SF(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function NF(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function kF(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const CF=/^(\d+)(th|st|nd|rd)?/i,EF=/\d+/i,TF={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},RF={any:[/^b/i,/^(a|c)/i]},PF={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},AF={any:[/1/i,/2/i,/3/i,/4/i]},IF={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},OF={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},MF={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},DF={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},LF={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$F={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},FF={ordinalNumber:kF({matchPattern:CF,parsePattern:EF,valueCallback:e=>parseInt(e,10)}),era:zo({matchPatterns:TF,defaultMatchWidth:"wide",parsePatterns:RF,defaultParseWidth:"any"}),quarter:zo({matchPatterns:PF,defaultMatchWidth:"wide",parsePatterns:AF,defaultParseWidth:"any",valueCallback:e=>e+1}),month:zo({matchPatterns:IF,defaultMatchWidth:"wide",parsePatterns:OF,defaultParseWidth:"any"}),day:zo({matchPatterns:MF,defaultMatchWidth:"wide",parsePatterns:DF,defaultParseWidth:"any"}),dayPeriod:zo({matchPatterns:LF,defaultMatchWidth:"any",parsePatterns:$F,defaultParseWidth:"any"})},zN={code:"en-US",formatDistance:cF,formatLong:fF,formatRelative:mF,localize:jF,match:FF,options:{weekStartsOn:0,firstWeekContainsDate:1}};function UF(e){const t=Ye(e);return G5(t,oF(t))+1}function BF(e){const t=Ye(e),r=+fd(t)-+Y5(t);return Math.round(r/UN)+1}function qN(e,t){var d,h,p,m;const r=Ye(e),n=r.getFullYear(),s=xc(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(p=s.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,o=Ks(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=Vl(o,t),c=Ks(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const u=Vl(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function zF(e,t){var l,c,u,d;const r=xc(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=qN(e,t),i=Ks(e,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),Vl(i,t)}function qF(e,t){const r=Ye(e),n=+Vl(r,t)-+zF(r,t);return Math.round(n/UN)+1}function Ve(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const cs={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Ve(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Ve(r+1,2)},d(e,t){return Ve(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Ve(e.getHours()%12||12,t.length)},H(e,t){return Ve(e.getHours(),t.length)},m(e,t){return Ve(e.getMinutes(),t.length)},s(e,t){return Ve(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return Ve(s,t.length)}},la={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Xw={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return cs.y(e,t)},Y:function(e,t,r,n){const s=qN(e,n),i=s>0?s:1-s;if(t==="YY"){const o=i%100;return Ve(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Ve(i,t.length)},R:function(e,t){const r=BN(e);return Ve(r,t.length)},u:function(e,t){const r=e.getFullYear();return Ve(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Ve(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Ve(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return cs.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Ve(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=qF(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):Ve(s,t.length)},I:function(e,t,r){const n=BF(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Ve(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):cs.d(e,t)},D:function(e,t,r){const n=UF(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Ve(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Ve(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Ve(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return Ve(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=la.noon:n===0?s=la.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=la.evening:n>=12?s=la.afternoon:n>=4?s=la.morning:s=la.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return cs.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):cs.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Ve(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Ve(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):cs.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):cs.s(e,t)},S:function(e,t){return cs.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return e0(n);case"XXXX":case"XX":return di(n);case"XXXXX":case"XXX":default:return di(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return e0(n);case"xxxx":case"xx":return di(n);case"xxxxx":case"xxx":default:return di(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Zw(n,":");case"OOOO":default:return"GMT"+di(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Zw(n,":");case"zzzz":default:return"GMT"+di(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return Ve(n,t.length)},T:function(e,t,r){const n=e.getTime();return Ve(n,t.length)}};function Zw(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+t+Ve(i,2)}function e0(e,t){return e%60===0?(e>0?"-":"+")+Ve(Math.abs(e)/60,2):di(e,t)}function di(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Ve(Math.trunc(n/60),2),i=Ve(n%60,2);return r+s+t+i}const t0=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},WN=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},WF=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return t0(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",t0(n,t)).replace("{{time}}",WN(s,t))},VF={p:WN,P:WF},HF=/^D+$/,KF=/^Y+$/,GF=["D","DD","YY","YYYY"];function YF(e){return HF.test(e)}function QF(e){return KF.test(e)}function JF(e,t,r){const n=XF(e,t,r);if(console.warn(n),GF.includes(e))throw new RangeError(n)}function XF(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ZF=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,eU=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tU=/^'([^]*?)'?$/,rU=/''/g,nU=/[a-zA-Z]/;function sU(e,t,r){var d,h,p,m;const n=xc(),s=n.locale??zN,i=n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=n.weekStartsOn??((m=(p=n.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??0,l=Ye(e);if(!X5(l))throw new RangeError("Invalid time value");let c=t.match(eU).map(b=>{const g=b[0];if(g==="p"||g==="P"){const v=VF[g];return v(b,s.formatLong)}return b}).join("").match(ZF).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const g=b[0];if(g==="'")return{isToken:!1,value:iU(b)};if(Xw[g])return{isToken:!0,value:b};if(g.match(nU))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:b}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(b=>{if(!b.isToken)return b.value;const g=b.value;(QF(g)||YF(g))&&JF(g,t,String(e));const v=Xw[g[0]];return v(l,g,s.localize,u)}).join("")}function iU(e){const t=e.match(tU);return t?t[1].replace(rU,"'"):e}function aU(e,t,r){const n=xc(),s=(r==null?void 0:r.locale)??n.locale??zN,i=2520,o=ku(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,u;o>0?(c=Ye(t),u=Ye(e)):(c=Ye(e),u=Ye(t));const d=aF(u,c),h=(pd(u)-pd(c))/1e3,p=Math.round((d-h)/60);let m;if(p<2)return r!=null&&r.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,l):d<10?s.formatDistance("lessThanXSeconds",10,l):d<20?s.formatDistance("lessThanXSeconds",20,l):d<40?s.formatDistance("halfAMinute",0,l):d<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):p===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",p,l);if(p<45)return s.formatDistance("xMinutes",p,l);if(p<90)return s.formatDistance("aboutXHours",1,l);if(p<Qw){const b=Math.round(p/60);return s.formatDistance("aboutXHours",b,l)}else{if(p<i)return s.formatDistance("xDays",1,l);if(p<su){const b=Math.round(p/Qw);return s.formatDistance("xDays",b,l)}else if(p<su*2)return m=Math.round(p/su),s.formatDistance("aboutXMonths",m,l)}if(m=iF(u,c),m<12){const b=Math.round(p/su);return s.formatDistance("xMonths",b,l)}else{const b=m%12,g=Math.trunc(m/12);return b<3?s.formatDistance("aboutXYears",g,l):b<9?s.formatDistance("overXYears",g,l):s.formatDistance("almostXYears",g+1,l)}}function Bi(e,t){return aU(e,Q5(e),t)}function oU(){const{data:e,isLoading:t}=q5(4);return t?a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Top Blueprints"}),a.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from({length:4}).map((r,n)=>a.jsx(ee,{className:"animate-pulse bg-card/50",children:a.jsx(se,{className:"p-4 h-28"})},n))})]}):!e||e.length===0?null:a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Top Blueprints"}),a.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:e.map(r=>{var n;return a.jsx(be,{to:`/blueprint/${r.id}`,children:a.jsx(ee,{className:"group h-full bg-card/60 hover:bg-card/80 transition-colors cursor-pointer",children:a.jsxs(se,{className:"p-4 space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("h3",{className:"font-medium leading-tight line-clamp-2 group-hover:text-primary transition-colors",children:r.title}),a.jsxs("div",{className:"flex items-center gap-1 shrink-0 text-muted-foreground text-sm",children:[a.jsx(qt,{className:"h-3.5 w-3.5"}),a.jsx("span",{className:"tabular-nums",children:r.likes_count})]})]}),a.jsx("div",{className:"flex flex-wrap gap-1.5",children:r.tags.slice(0,3).map(s=>a.jsxs(Ie,{variant:"secondary",className:"text-xs",children:["#",s.slug]},s.slug))}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["by ",((n=r.creator_profile)==null?void 0:n.display_name)||"Anonymous"," "," ",Bi(new Date(r.created_at),{addSuffix:!0})]})]})})},r.id)})})]})}function lU(){const{data:e,isLoading:t}=W5(8);return t?a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Trending Topics"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:6}).map((r,n)=>a.jsx("div",{className:"h-8 w-20 rounded-full bg-muted animate-pulse"},n))})]}):!e||e.length===0?null:a.jsxs("section",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Trending Topics"}),a.jsx(be,{to:"/tags",className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:"View all "})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.map(r=>a.jsx(be,{to:`/wall?tag=${r.slug}`,children:a.jsxs(Ie,{variant:"outline",className:"gap-1.5 px-3 py-1.5 text-sm hover:bg-accent hover:text-accent-foreground transition-colors cursor-pointer",children:[a.jsx(Bd,{className:"h-3 w-3"}),r.slug,r.follower_count>0&&a.jsxs("span",{className:"flex items-center gap-0.5 text-muted-foreground ml-1",children:[a.jsx(cc,{className:"h-3 w-3"}),a.jsx("span",{className:"text-xs tabular-nums",children:r.follower_count})]})]})},r.id))})]})}const cU=[{icon:Tp,title:"Pick a Library",description:"Collections of ingredients for any topicsupplements, recipes, routines. Pick one to start building.",color:"bg-primary/10 text-primary"},{icon:_r,title:"Build & Review",description:"Tap items you use, hit Review, and get instant AI feedback on your setup.",color:"bg-accent/15 text-accent-foreground"},{icon:cc,title:"Publish",description:"When you're happy with your blueprint, publish it so others can learn from it.",color:"bg-secondary/15 text-secondary-foreground"}];function uU(){return a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"How It Works"}),a.jsx("div",{className:"grid gap-4 sm:grid-cols-3",children:cU.map((e,t)=>a.jsx(ee,{className:"bg-card/60 backdrop-blur-sm animate-fade-in",style:{animationDelay:`${t*.1}s`},children:a.jsxs(se,{className:"p-5 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`h-10 w-10 rounded-lg flex items-center justify-center ${e.color}`,children:a.jsx(e.icon,{className:"h-5 w-5"})}),a.jsxs("span",{className:"text-xs font-bold text-muted-foreground/60 uppercase tracking-widest",children:["Step ",t+1]})]}),a.jsx("h3",{className:"font-semibold",children:e.title}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:e.description})]})},e.title))})]})}function Ae({className:e,...t}){return a.jsx("div",{className:H("animate-pulse rounded-md bg-muted",e),...t})}const Ue=f.forwardRef(({className:e,type:t,...r},n)=>a.jsx("input",{type:t,className:H("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));Ue.displayName="Input";var lh="Tabs",[dU,vz]=Mt(lh,[Xd]),VN=Xd(),[hU,bv]=dU(lh),HN=f.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=_o(l),[h,p]=Ur({prop:n,onChange:s,defaultProp:i??"",caller:lh});return a.jsx(hU,{scope:r,baseId:Dr(),value:h,onValueChange:p,orientation:o,dir:d,activationMode:c,children:a.jsx(oe.div,{dir:d,"data-orientation":o,...u,ref:t})})});HN.displayName=lh;var KN="TabsList",GN=f.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,i=bv(KN,r),o=VN(r);return a.jsx(iS,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:a.jsx(oe.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});GN.displayName=KN;var YN="TabsTrigger",QN=f.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...i}=e,o=bv(YN,r),l=VN(r),c=ZN(o.baseId,n),u=ek(o.baseId,n),d=n===o.value;return a.jsx(aS,{asChild:!0,...l,focusable:!s,active:d,children:a.jsx(oe.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:t,onMouseDown:G(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:G(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:G(e.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!s&&h&&o.onValueChange(n)})})})});QN.displayName=YN;var JN="TabsContent",XN=f.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:i,...o}=e,l=bv(JN,r),c=ZN(l.baseId,n),u=ek(l.baseId,n),d=n===l.value,h=f.useRef(d);return f.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),a.jsx(Dt,{present:s||d,children:({present:p})=>a.jsx(oe.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:p&&i})})});XN.displayName=JN;function ZN(e,t){return`${e}-trigger-${t}`}function ek(e,t){return`${e}-content-${t}`}var fU=HN,tk=GN,rk=QN,nk=XN;const jo=fU,Yi=f.forwardRef(({className:e,...t},r)=>a.jsx(tk,{ref:r,className:H("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Yi.displayName=tk.displayName;const Ar=f.forwardRef(({className:e,...t},r)=>a.jsx(rk,{ref:r,className:H("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));Ar.displayName=rk.displayName;const Ir=f.forwardRef(({className:e,...t},r)=>a.jsx(nk,{ref:r,className:H("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ir.displayName=nk.displayName;var pU="Label",sk=f.forwardRef((e,t)=>a.jsx(oe.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));sk.displayName=pU;var ik=sk;const mU=oc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),qe=f.forwardRef(({className:e,...t},r)=>a.jsx(ik,{ref:r,className:H(mU(),e),...t}));qe.displayName=ik.displayName;function pm(e,[t,r]){return Math.min(r,Math.max(t,e))}function _v(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var gU=[" ","Enter","ArrowUp","ArrowDown"],vU=[" ","Enter"],zi="Select",[ch,uh,yU]=sc(zi),[So,yz]=Mt(zi,[yU,go]),dh=go(),[xU,Xs]=So(zi),[wU,bU]=So(zi),ak=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:p,required:m,form:b}=e,g=dh(t),[v,x]=f.useState(null),[y,w]=f.useState(null),[_,j]=f.useState(!1),S=_o(u),[N,k]=Ur({prop:n,defaultProp:s??!1,onChange:i,caller:zi}),[R,I]=Ur({prop:o,defaultProp:l,onChange:c,caller:zi}),D=f.useRef(null),A=v?b||!!v.closest("form"):!0,[$,O]=f.useState(new Set),X=Array.from($).map(U=>U.props.value).join(";");return a.jsx(s1,{...g,children:a.jsxs(xU,{required:m,scope:t,trigger:v,onTriggerChange:x,valueNode:y,onValueNodeChange:w,valueNodeHasChildren:_,onValueNodeHasChildrenChange:j,contentId:Dr(),value:R,onValueChange:I,open:N,onOpenChange:k,dir:S,triggerPointerDownPosRef:D,disabled:p,children:[a.jsx(ch.Provider,{scope:t,children:a.jsx(wU,{scope:e.__scopeSelect,onNativeOptionAdd:f.useCallback(U=>{O(J=>new Set(J).add(U))},[]),onNativeOptionRemove:f.useCallback(U=>{O(J=>{const T=new Set(J);return T.delete(U),T})},[]),children:r})}),A?a.jsxs(Rk,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:h,value:R,onChange:U=>I(U.target.value),disabled:p,form:b,children:[R===void 0?a.jsx("option",{value:""}):null,Array.from($)]},X):null]})})};ak.displayName=zi;var ok="SelectTrigger",lk=f.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,i=dh(r),o=Xs(ok,r),l=o.disabled||n,c=Ne(t,o.onTriggerChange),u=uh(r),d=f.useRef("touch"),[h,p,m]=Ak(g=>{const v=u().filter(w=>!w.disabled),x=v.find(w=>w.value===o.value),y=Ik(v,g,x);y!==void 0&&o.onValueChange(y.value)}),b=g=>{l||(o.onOpenChange(!0),m()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return a.jsx(Lg,{asChild:!0,...i,children:a.jsx(oe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Pk(o.value)?"":void 0,...s,ref:c,onClick:G(s.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&b(g)}),onPointerDown:G(s.onPointerDown,g=>{d.current=g.pointerType;const v=g.target;v.hasPointerCapture(g.pointerId)&&v.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(b(g),g.preventDefault())}),onKeyDown:G(s.onKeyDown,g=>{const v=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&p(g.key),!(v&&g.key===" ")&&gU.includes(g.key)&&(b(),g.preventDefault())})})})});lk.displayName=ok;var ck="SelectValue",uk=f.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:o="",...l}=e,c=Xs(ck,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,h=Ne(t,c.onValueNodeChange);return ht(()=>{u(d)},[u,d]),a.jsx(oe.span,{...l,ref:h,style:{pointerEvents:"none"},children:Pk(c.value)?a.jsx(a.Fragment,{children:o}):i})});uk.displayName=ck;var _U="SelectIcon",dk=f.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return a.jsx(oe.span,{"aria-hidden":!0,...s,ref:t,children:n||""})});dk.displayName=_U;var jU="SelectPortal",hk=e=>a.jsx(ic,{asChild:!0,...e});hk.displayName=jU;var qi="SelectContent",fk=f.forwardRef((e,t)=>{const r=Xs(qi,e.__scopeSelect),[n,s]=f.useState();if(ht(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?hn.createPortal(a.jsx(pk,{scope:e.__scopeSelect,children:a.jsx(ch.Slot,{scope:e.__scopeSelect,children:a.jsx("div",{children:e.children})})}),i):null}return a.jsx(mk,{...e,ref:t})});fk.displayName=qi;var Gr=10,[pk,Zs]=So(qi),SU="SelectContentImpl",NU=Di("SelectContent.RemoveScroll"),mk=f.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:b,hideWhenDetached:g,avoidCollisions:v,...x}=e,y=Xs(qi,r),[w,_]=f.useState(null),[j,S]=f.useState(null),N=Ne(t,z=>_(z)),[k,R]=f.useState(null),[I,D]=f.useState(null),A=uh(r),[$,O]=f.useState(!1),X=f.useRef(!1);f.useEffect(()=>{if(w)return rv(w)},[w]),tv();const U=f.useCallback(z=>{const[ce,..._e]=A().map(te=>te.ref.current),[Ce]=_e.slice(-1),K=document.activeElement;for(const te of z)if(te===K||(te==null||te.scrollIntoView({block:"nearest"}),te===ce&&j&&(j.scrollTop=0),te===Ce&&j&&(j.scrollTop=j.scrollHeight),te==null||te.focus(),document.activeElement!==K))return},[A,j]),J=f.useCallback(()=>U([k,w]),[U,k,w]);f.useEffect(()=>{$&&J()},[$,J]);const{onOpenChange:T,triggerPointerDownPosRef:E}=y;f.useEffect(()=>{if(w){let z={x:0,y:0};const ce=Ce=>{var K,te;z={x:Math.abs(Math.round(Ce.pageX)-(((K=E.current)==null?void 0:K.x)??0)),y:Math.abs(Math.round(Ce.pageY)-(((te=E.current)==null?void 0:te.y)??0))}},_e=Ce=>{z.x<=10&&z.y<=10?Ce.preventDefault():w.contains(Ce.target)||T(!1),document.removeEventListener("pointermove",ce),E.current=null};return E.current!==null&&(document.addEventListener("pointermove",ce),document.addEventListener("pointerup",_e,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ce),document.removeEventListener("pointerup",_e,{capture:!0})}}},[w,T,E]),f.useEffect(()=>{const z=()=>T(!1);return window.addEventListener("blur",z),window.addEventListener("resize",z),()=>{window.removeEventListener("blur",z),window.removeEventListener("resize",z)}},[T]);const[B,re]=Ak(z=>{const ce=A().filter(K=>!K.disabled),_e=ce.find(K=>K.ref.current===document.activeElement),Ce=Ik(ce,z,_e);Ce&&setTimeout(()=>Ce.ref.current.focus())}),Y=f.useCallback((z,ce,_e)=>{const Ce=!X.current&&!_e;(y.value!==void 0&&y.value===ce||Ce)&&(R(z),Ce&&(X.current=!0))},[y.value]),fe=f.useCallback(()=>w==null?void 0:w.focus(),[w]),q=f.useCallback((z,ce,_e)=>{const Ce=!X.current&&!_e;(y.value!==void 0&&y.value===ce||Ce)&&D(z)},[y.value]),de=n==="popper"?mm:gk,he=de===mm?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:b,hideWhenDetached:g,avoidCollisions:v}:{};return a.jsx(pk,{scope:r,content:w,viewport:j,onViewportChange:S,itemRefCallback:Y,selectedItem:k,onItemLeave:fe,itemTextRefCallback:q,focusSelectedItem:J,selectedItemText:I,position:n,isPositioned:$,searchRef:B,children:a.jsx(eh,{as:NU,allowPinchZoom:!0,children:a.jsx(Jd,{asChild:!0,trapped:y.open,onMountAutoFocus:z=>{z.preventDefault()},onUnmountAutoFocus:G(s,z=>{var ce;(ce=y.trigger)==null||ce.focus({preventScroll:!0}),z.preventDefault()}),children:a.jsx(co,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:z=>z.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:a.jsx(de,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:z=>z.preventDefault(),...x,...he,onPlaced:()=>O(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:G(x.onKeyDown,z=>{const ce=z.ctrlKey||z.altKey||z.metaKey;if(z.key==="Tab"&&z.preventDefault(),!ce&&z.key.length===1&&re(z.key),["ArrowUp","ArrowDown","Home","End"].includes(z.key)){let Ce=A().filter(K=>!K.disabled).map(K=>K.ref.current);if(["ArrowUp","End"].includes(z.key)&&(Ce=Ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(z.key)){const K=z.target,te=Ce.indexOf(K);Ce=Ce.slice(te+1)}setTimeout(()=>U(Ce)),z.preventDefault()}})})})})})})});mk.displayName=SU;var kU="SelectItemAlignedPosition",gk=f.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,i=Xs(qi,r),o=Zs(qi,r),[l,c]=f.useState(null),[u,d]=f.useState(null),h=Ne(t,N=>d(N)),p=uh(r),m=f.useRef(!1),b=f.useRef(!0),{viewport:g,selectedItem:v,selectedItemText:x,focusSelectedItem:y}=o,w=f.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&g&&v&&x){const N=i.trigger.getBoundingClientRect(),k=u.getBoundingClientRect(),R=i.valueNode.getBoundingClientRect(),I=x.getBoundingClientRect();if(i.dir!=="rtl"){const K=I.left-k.left,te=R.left-K,xe=N.left-te,Te=N.width+xe,Ee=Math.max(Te,k.width),Oe=window.innerWidth-Gr,Me=pm(te,[Gr,Math.max(Gr,Oe-Ee)]);l.style.minWidth=Te+"px",l.style.left=Me+"px"}else{const K=k.right-I.right,te=window.innerWidth-R.right-K,xe=window.innerWidth-N.right-te,Te=N.width+xe,Ee=Math.max(Te,k.width),Oe=window.innerWidth-Gr,Me=pm(te,[Gr,Math.max(Gr,Oe-Ee)]);l.style.minWidth=Te+"px",l.style.right=Me+"px"}const D=p(),A=window.innerHeight-Gr*2,$=g.scrollHeight,O=window.getComputedStyle(u),X=parseInt(O.borderTopWidth,10),U=parseInt(O.paddingTop,10),J=parseInt(O.borderBottomWidth,10),T=parseInt(O.paddingBottom,10),E=X+U+$+T+J,B=Math.min(v.offsetHeight*5,E),re=window.getComputedStyle(g),Y=parseInt(re.paddingTop,10),fe=parseInt(re.paddingBottom,10),q=N.top+N.height/2-Gr,de=A-q,he=v.offsetHeight/2,z=v.offsetTop+he,ce=X+U+z,_e=E-ce;if(ce<=q){const K=D.length>0&&v===D[D.length-1].ref.current;l.style.bottom="0px";const te=u.clientHeight-g.offsetTop-g.offsetHeight,xe=Math.max(de,he+(K?fe:0)+te+J),Te=ce+xe;l.style.height=Te+"px"}else{const K=D.length>0&&v===D[0].ref.current;l.style.top="0px";const xe=Math.max(q,X+g.offsetTop+(K?Y:0)+he)+_e;l.style.height=xe+"px",g.scrollTop=ce-q+g.offsetTop}l.style.margin=`${Gr}px 0`,l.style.minHeight=B+"px",l.style.maxHeight=A+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[p,i.trigger,i.valueNode,l,u,g,v,x,i.dir,n]);ht(()=>w(),[w]);const[_,j]=f.useState();ht(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const S=f.useCallback(N=>{N&&b.current===!0&&(w(),y==null||y(),b.current=!1)},[w,y]);return a.jsx(EU,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:S,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:a.jsx(oe.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});gk.displayName=kU;var CU="SelectPopperPosition",mm=f.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Gr,...i}=e,o=dh(r);return a.jsx($g,{...o,...i,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});mm.displayName=CU;var[EU,jv]=So(qi,{}),gm="SelectViewport",vk=f.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...s}=e,i=Zs(gm,r),o=jv(gm,r),l=Ne(t,i.onViewportChange),c=f.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx(ch.Slot,{scope:r,children:a.jsx(oe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:G(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&h){const m=Math.abs(c.current-d.scrollTop);if(m>0){const b=window.innerHeight-Gr*2,g=parseFloat(h.style.minHeight),v=parseFloat(h.style.height),x=Math.max(g,v);if(x<b){const y=x+m,w=Math.min(b,y),_=y-w;h.style.height=w+"px",h.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});vk.displayName=gm;var yk="SelectGroup",[TU,RU]=So(yk),PU=f.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Dr();return a.jsx(TU,{scope:r,id:s,children:a.jsx(oe.div,{role:"group","aria-labelledby":s,...n,ref:t})})});PU.displayName=yk;var xk="SelectLabel",wk=f.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=RU(xk,r);return a.jsx(oe.div,{id:s.id,...n,ref:t})});wk.displayName=xk;var md="SelectItem",[AU,bk]=So(md),_k=f.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...o}=e,l=Xs(md,r),c=Zs(md,r),u=l.value===n,[d,h]=f.useState(i??""),[p,m]=f.useState(!1),b=Ne(t,y=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,y,n,s)}),g=Dr(),v=f.useRef("touch"),x=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(AU,{scope:r,value:n,disabled:s,textId:g,isSelected:u,onItemTextChange:f.useCallback(y=>{h(w=>w||((y==null?void 0:y.textContent)??"").trim())},[]),children:a.jsx(ch.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:a.jsx(oe.div,{role:"option","aria-labelledby":g,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:b,onFocus:G(o.onFocus,()=>m(!0)),onBlur:G(o.onBlur,()=>m(!1)),onClick:G(o.onClick,()=>{v.current!=="mouse"&&x()}),onPointerUp:G(o.onPointerUp,()=>{v.current==="mouse"&&x()}),onPointerDown:G(o.onPointerDown,y=>{v.current=y.pointerType}),onPointerMove:G(o.onPointerMove,y=>{var w;v.current=y.pointerType,s?(w=c.onItemLeave)==null||w.call(c):v.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:G(o.onPointerLeave,y=>{var w;y.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:G(o.onKeyDown,y=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&y.key===" "||(vU.includes(y.key)&&x(),y.key===" "&&y.preventDefault())})})})})});_k.displayName=md;var Zo="SelectItemText",jk=f.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...i}=e,o=Xs(Zo,r),l=Zs(Zo,r),c=bk(Zo,r),u=bU(Zo,r),[d,h]=f.useState(null),p=Ne(t,x=>h(x),c.onItemTextChange,x=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,x,c.value,c.disabled)}),m=d==null?void 0:d.textContent,b=f.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:v}=u;return ht(()=>(g(b),()=>v(b)),[g,v,b]),a.jsxs(a.Fragment,{children:[a.jsx(oe.span,{id:c.textId,...i,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?hn.createPortal(i.children,o.valueNode):null]})});jk.displayName=Zo;var Sk="SelectItemIndicator",Nk=f.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return bk(Sk,r).isSelected?a.jsx(oe.span,{"aria-hidden":!0,...n,ref:t}):null});Nk.displayName=Sk;var vm="SelectScrollUpButton",kk=f.forwardRef((e,t)=>{const r=Zs(vm,e.__scopeSelect),n=jv(vm,e.__scopeSelect),[s,i]=f.useState(!1),o=Ne(t,n.onScrollButtonChange);return ht(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?a.jsx(Ek,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});kk.displayName=vm;var ym="SelectScrollDownButton",Ck=f.forwardRef((e,t)=>{const r=Zs(ym,e.__scopeSelect),n=jv(ym,e.__scopeSelect),[s,i]=f.useState(!1),o=Ne(t,n.onScrollButtonChange);return ht(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?a.jsx(Ek,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Ck.displayName=ym;var Ek=f.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,i=Zs("SelectScrollButton",r),o=f.useRef(null),l=uh(r),c=f.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return f.useEffect(()=>()=>c(),[c]),ht(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),a.jsx(oe.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:G(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:G(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:G(s.onPointerLeave,()=>{c()})})}),IU="SelectSeparator",Tk=f.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return a.jsx(oe.div,{"aria-hidden":!0,...n,ref:t})});Tk.displayName=IU;var xm="SelectArrow",OU=f.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=dh(r),i=Xs(xm,r),o=Zs(xm,r);return i.open&&o.position==="popper"?a.jsx(Fg,{...s,...n,ref:t}):null});OU.displayName=xm;var MU="SelectBubbleInput",Rk=f.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const s=f.useRef(null),i=Ne(n,s),o=_v(t);return f.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const h=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[o,t]),a.jsx(oe.select,{...r,style:{...J_,...r.style},ref:i,defaultValue:t})});Rk.displayName=MU;function Pk(e){return e===""||e===void 0}function Ak(e){const t=dt(e),r=f.useRef(""),n=f.useRef(0),s=f.useCallback(o=>{const l=r.current+o;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=f.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function Ik(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=DU(e,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function DU(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var LU=ak,Ok=lk,$U=uk,FU=dk,UU=hk,Mk=fk,BU=vk,Dk=wk,Lk=_k,zU=jk,qU=Nk,$k=kk,Fk=Ck,Uk=Tk;const Bk=LU,zk=$U,Sv=f.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(Ok,{ref:n,className:H("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,a.jsx(FU,{asChild:!0,children:a.jsx(uo,{className:"h-4 w-4 opacity-50"})})]}));Sv.displayName=Ok.displayName;const qk=f.forwardRef(({className:e,...t},r)=>a.jsx($k,{ref:r,className:H("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(hP,{className:"h-4 w-4"})}));qk.displayName=$k.displayName;const Wk=f.forwardRef(({className:e,...t},r)=>a.jsx(Fk,{ref:r,className:H("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(uo,{className:"h-4 w-4"})}));Wk.displayName=Fk.displayName;const Nv=f.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>a.jsx(UU,{children:a.jsxs(Mk,{ref:s,className:H("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[a.jsx(qk,{}),a.jsx(BU,{className:H("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),a.jsx(Wk,{})]})}));Nv.displayName=Mk.displayName;const WU=f.forwardRef(({className:e,...t},r)=>a.jsx(Dk,{ref:r,className:H("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));WU.displayName=Dk.displayName;const gd=f.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(Lk,{ref:n,className:H("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(qU,{children:a.jsx(Hi,{className:"h-4 w-4"})})}),a.jsx(zU,{children:t})]}));gd.displayName=Lk.displayName;const VU=f.forwardRef(({className:e,...t},r)=>a.jsx(Uk,{ref:r,className:H("-mx-1 my-1 h-px bg-muted",e),...t}));VU.displayName=Uk.displayName;function Vk({categories:e,selectedItems:t,onToggleItem:r,onAddCustomItem:n}){var x,y;const[s,i]=f.useState(""),[o,l]=f.useState(((x=e[0])==null?void 0:x.name)||""),[c,u]=f.useState(!1),[d,h]=f.useState(""),[p,m]=f.useState(((y=e[0])==null?void 0:y.name)||"");f.useEffect(()=>{o||e.length!==0&&(l(e[0].name),m(e[0].name))},[o,e]);const b=f.useMemo(()=>{const w=new Set;return Object.entries(t).forEach(([_,j])=>{j.forEach(S=>w.add(`${_}::${S}`))}),w},[t]),g=()=>{!d.trim()||!p||(n(p,d.trim()),h(""),u(!1))},v=f.useMemo(()=>{const w=e.find(j=>j.name===o);if(!w)return[];if(!s.trim())return w.items;const _=s.toLowerCase();return w.items.filter(j=>j.toLowerCase().includes(_))},[e,o,s]);return e.length===0?a.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No categories available in this library."}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(ho,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Ue,{placeholder:"Search items...",value:s,onChange:w=>i(w.target.value),className:"pl-9"})]}),a.jsxs(yv,{open:c,onOpenChange:u,children:[a.jsx(O5,{asChild:!0,children:a.jsx(M,{variant:"outline",size:"icon",className:"shrink-0",children:a.jsx(zd,{className:"h-4 w-4"})})}),a.jsxs(ah,{children:[a.jsx(xv,{children:a.jsx(wv,{children:"Add Custom Item"})}),a.jsxs("div",{className:"space-y-4 pt-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{htmlFor:"custom-item-name",children:"Item Name"}),a.jsx(Ue,{id:"custom-item-name",value:d,onChange:w=>h(w.target.value),placeholder:"e.g. My Custom Item",onKeyDown:w=>w.key==="Enter"&&g()})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{children:"Category"}),a.jsxs(Bk,{value:p,onValueChange:m,children:[a.jsx(Sv,{children:a.jsx(zk,{})}),a.jsx(Nv,{children:e.map(w=>a.jsx(gd,{value:w.name,children:w.name},w.name))})]})]}),a.jsx(M,{onClick:g,className:"w-full",children:"Add Item"})]})]})]})]}),a.jsxs(jo,{value:o,onValueChange:l,children:[a.jsx(Yi,{className:"w-full h-auto flex-wrap gap-1 bg-transparent p-0",children:e.map(w=>a.jsx(Ar,{value:w.name,className:"text-xs px-2 py-1 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground whitespace-normal",children:w.name},w.name))}),e.map(w=>a.jsx(Ir,{value:w.name,className:"mt-3",children:a.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.map(_=>{const j=b.has(`${w.name}::${_}`);return a.jsxs(Ie,{variant:j?"default":"outline",className:`cursor-pointer transition-all ${j?"bg-primary hover:bg-primary/90":"hover:bg-accent hover:text-accent-foreground"}`,onClick:()=>r(w.name,_),children:[j&&a.jsx(Hi,{className:"h-3 w-3 mr-1"}),_]},_)}),v.length===0&&a.jsx("p",{className:"text-sm text-muted-foreground",children:"No items found"})]})},w.name))]})]})}var hh="Collapsible",[HU,Hk]=Mt(hh),[KU,kv]=HU(hh),Kk=f.forwardRef((e,t)=>{const{__scopeCollapsible:r,open:n,defaultOpen:s,disabled:i,onOpenChange:o,...l}=e,[c,u]=Ur({prop:n,defaultProp:s??!1,onChange:o,caller:hh});return a.jsx(KU,{scope:r,disabled:i,contentId:Dr(),open:c,onOpenToggle:f.useCallback(()=>u(d=>!d),[u]),children:a.jsx(oe.div,{"data-state":Rv(c),"data-disabled":i?"":void 0,...l,ref:t})})});Kk.displayName=hh;var Gk="CollapsibleTrigger",Cv=f.forwardRef((e,t)=>{const{__scopeCollapsible:r,...n}=e,s=kv(Gk,r);return a.jsx(oe.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":Rv(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...n,ref:t,onClick:G(e.onClick,s.onOpenToggle)})});Cv.displayName=Gk;var Ev="CollapsibleContent",Tv=f.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=kv(Ev,e.__scopeCollapsible);return a.jsx(Dt,{present:r||s.open,children:({present:i})=>a.jsx(GU,{...n,ref:t,present:i})})});Tv.displayName=Ev;var GU=f.forwardRef((e,t)=>{const{__scopeCollapsible:r,present:n,children:s,...i}=e,o=kv(Ev,r),[l,c]=f.useState(n),u=f.useRef(null),d=Ne(t,u),h=f.useRef(0),p=h.current,m=f.useRef(0),b=m.current,g=o.open||l,v=f.useRef(g),x=f.useRef(void 0);return f.useEffect(()=>{const y=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(y)},[]),ht(()=>{const y=u.current;if(y){x.current=x.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const w=y.getBoundingClientRect();h.current=w.height,m.current=w.width,v.current||(y.style.transitionDuration=x.current.transitionDuration,y.style.animationName=x.current.animationName),c(n)}},[o.open,n]),a.jsx(oe.div,{"data-state":Rv(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...i,ref:d,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...e.style},children:g&&s})});function Rv(e){return e?"open":"closed"}var Yk=Kk,YU=Cv,QU=Tv;const Pv=Yk,Av=Cv,Iv=Tv;function Qk({title:e,selectedItems:t,itemContexts:r,onRemoveItem:n,onUpdateContext:s,onClear:i}){const[o,l]=f.useState(!0),c=Object.entries(t).flatMap(([d,h])=>h.map(p=>({category:d,item:p}))),u=c.length;return u===0?null:a.jsxs(Pv,{open:o,onOpenChange:l,children:[a.jsx(Av,{asChild:!0,children:a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-card/60 backdrop-blur-sm border border-border/50 cursor-pointer hover:bg-card/80 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-sm font-medium text-foreground",children:e||"Your Selection"}),a.jsxs(Ie,{variant:"secondary",className:"text-xs",children:[u," ",u===1?"item":"items"]})]}),a.jsx(uo,{className:H("h-4 w-4 text-muted-foreground transition-transform duration-200",o&&"rotate-180")})]})}),a.jsx(Iv,{className:"mt-2",children:a.jsxs("div",{className:"bg-card/40 backdrop-blur-sm rounded-xl border border-border/30 overflow-hidden",children:[a.jsx("div",{className:"divide-y divide-border/20",children:c.map(({category:d,item:h})=>{const p=`${d}::${h}`,m=r[p]||"";return a.jsxs("div",{className:"p-3 hover:bg-accent/5 transition-colors group",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:h}),a.jsx("p",{className:"text-xs text-muted-foreground",children:d})]}),a.jsx(M,{variant:"ghost",size:"icon",className:"h-7 w-7 opacity-0 group-hover:opacity-100 transition-opacity text-destructive hover:text-destructive shrink-0",onClick:b=>{b.stopPropagation(),n(d,h)},children:a.jsx(Vt,{className:"h-3 w-3"})})]}),a.jsx(Ue,{value:m,onChange:b=>s(d,h,b.target.value),placeholder:"Add context (e.g. 0.5mg, morning, with food...)",className:"h-8 text-xs bg-background/50"})]},p)})}),a.jsx("div",{className:"p-3 border-t border-border/30 flex justify-end bg-card/30",children:a.jsxs(M,{variant:"ghost",size:"sm",onClick:i,className:"text-destructive hover:text-destructive gap-1",children:[a.jsx(Xu,{className:"h-3 w-3"}),"Clear All"]})})]})})]})}function JU({categories:e,selectedItems:t,itemContexts:r,onToggleItem:n,onAddCustomItem:s,onRemoveItem:i,onUpdateItemContext:o,onClear:l,selectionTitle:c="Build Blueprint"}){return a.jsxs("div",{className:"space-y-4",children:[a.jsx(Vk,{categories:e,selectedItems:t,onToggleItem:n,onAddCustomItem:s}),a.jsx(Qk,{title:c,selectedItems:t,itemContexts:r,onRemoveItem:i,onUpdateContext:o,onClear:l})]})}const XU="blueprints_home_draft_v1",Ef=[{key:"morning",title:"HOME MORNING ROUTINE LIBRARY",fallbackIlike:"%morning routine%library%"},{key:"skincare",title:"Home Skincare Routine Library",fallbackIlike:"%skincare%routine%library%"}];function r0(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=e.categories;return Array.isArray(t)?t.map(r=>({name:typeof r.name=="string"?r.name:"Untitled",items:Array.isArray(r.items)?r.items.filter(n=>typeof n=="string"):[]})).filter(r=>r.name.trim().length>0&&r.items.length>0):[]}function ZU(e,t,r){const n=new Set(e[t]||[]);n.add(r),e[t]=Array.from(n)}function eB(e,t){const r=[],n=t.map(s=>s.toLowerCase());return e.forEach(s=>{s.items.forEach(i=>{const o=i.toLowerCase();n.some(l=>o.includes(l))&&r.push({category:s.name,item:i})})}),r}function tB(e){return e.filter(t=>t.trim().length>0).slice(0,2).join(", ")}function rB(e,t,r){const n=r.toLowerCase(),s=[];return e==="skincare"?((n.includes("spf")||n.includes("sunscreen"))&&s.push("AM"),n.includes("retinol")&&s.push("PM"),(n.includes("cleanser")||n.includes("wash"))&&s.push("daily")):((n.includes("water")||n.includes("hydrate"))&&s.push("first"),(n.includes("alarm")||n.includes("light"))&&s.push("wake-up"),(n.includes("journal")||n.includes("planner")||n.includes("calendar"))&&s.push("focus")),s.push(t),tB(s)}function n0(e,t,r,n){const i=n.flatMap(p=>p.items.map(m=>({category:p.name,item:m}))).slice(0,10),c=e==="skincare"?[{title:"Cleanse",needles:["cleanser","wash","gel","foam"]},{title:"Treat",needles:["serum","vitamin","retinol","niacin","acid","bha","aha"]},{title:"Moisturize",needles:["moist","cream","lotion"]},{title:"Protect (AM)",needles:["sunscreen","spf"]}]:[{title:"Wake up & reset",needles:["alarm","light","water","curtain","lamp"]},{title:"Hygiene",needles:["tooth","floss","cleanser","deodor","shower","sunscreen"]},{title:"Move a bit",needles:["yoga","mat","shoe","run","band","dumbbell","stretch"]},{title:"Plan the day",needles:["journal","planner","calendar","notebook","todo","timer"]}],u={},d={};return c.forEach(p=>{const m=eB(n,p.needles);(m.length>0?m:i).slice(0,3).forEach(g=>{ZU(u,g.category,g.item);const v=`${g.category}::${g.item}`;d[v]=rB(e,p.title,g.item)})}),{version:1,inventoryId:t,title:e==="skincare"?"Skincare Routine Blueprint":"Morning Routine Blueprint",selectedItems:u,itemContexts:d,source:"home-example"}}function nB(){const e=es(),{user:t,session:r}=ke(),{toast:n}=Ot(),[s,i]=f.useState(Ef[0].key),[o,l]=f.useState({}),{data:c,isLoading:u,isError:d}=Be({queryKey:["home-featured-inventories-v1"],queryFn:async()=>(await Promise.all(Ef.map(async $=>{var E,B;const O=P.from("inventories").select("id, title, generated_schema, is_public").eq("is_public",!0).limit(1),U=(E=(await O.ilike("title",$.title)).data)==null?void 0:E[0];if(U)return{featureKey:$.key,...U};const T=(B=(await O.ilike("title",$.fallbackIlike)).data)==null?void 0:B[0];return T?{featureKey:$.key,...T}:null}))).filter($=>!!$)}),h=f.useMemo(()=>!c||c.length===0?null:c.find(A=>A.featureKey===s)??c[0],[c,s]),p=f.useMemo(()=>h?r0(h.generated_schema):[],[h]);f.useEffect(()=>{h&&l(A=>{if(A[h.id])return A;const $=n0(h.featureKey,h.id,h.title,p),O={};let X=3;for(const[J,T]of Object.entries($.selectedItems)){if(X<=0)break;const E=T.slice(0,X);E.length>0&&(O[J]=E,X-=E.length)}const U={};return Object.entries(O).forEach(([J,T])=>{T.forEach(E=>{var re;const B=`${J}::${E}`;(re=$.itemContexts)!=null&&re[B]&&(U[B]=$.itemContexts[B])})}),{...A,[h.id]:{categories:p,selectedItems:O,itemContexts:U,title:h.title}}})},[h==null?void 0:h.id,p,h==null?void 0:h.title]);const m=f.useMemo(()=>h&&o[h.id]||null,[h,o]),b=(m==null?void 0:m.categories)||p,g=(m==null?void 0:m.selectedItems)||{},v=(m==null?void 0:m.itemContexts)||{},x=f.useMemo(()=>Object.values(g).reduce((A,$)=>A+$.length,0),[g]),y=Math.min(x,3),w=A=>{h&&l($=>({...$,[h.id]:{...$[h.id]||{categories:r0(h.generated_schema),selectedItems:{},itemContexts:{},title:h.title},...A}}))},_=(A,$)=>`${A}::${$}`,j=(A,$)=>{const O=_(A,$),X={...g},U=new Set(X[A]||[]),J=U.has($);J?U.delete($):U.add($),X[A]=Array.from(U);const T={...v};J&&delete T[O],w({selectedItems:X,itemContexts:T})},S=(A,$)=>{const O=b.map(U=>U.name===A?{...U,items:U.items.includes($)?U.items:[...U.items,$]}:U),X={...g,[A]:[...g[A]||[],$]};w({categories:O,selectedItems:X})},N=(A,$)=>{const O=_(A,$),X={...g,[A]:(g[A]||[]).filter(J=>J!==$)},U={...v};delete U[O],w({selectedItems:X,itemContexts:U})},k=(A,$,O)=>{w({itemContexts:{...v,[_(A,$)]:O}})},R=()=>{w({selectedItems:{},itemContexts:{}})},I=()=>{if(!h)return;const A=n0(h.featureKey,h.id,h.title,p);w({title:A.title,categories:p,selectedItems:A.selectedItems,itemContexts:A.itemContexts||{}}),n({title:"Example loaded",description:"Your blueprint has been pre-filled with selected items."})},D=A=>{if(!h)return;if(!(r!=null&&r.access_token)){n({title:"Sign in required",description:"Please sign in to use the full builder."}),e("/auth");return}const $={version:1,inventoryId:h.id,title:(m==null?void 0:m.title)||h.title,selectedItems:g,itemContexts:v,modeHint:"full",source:A};sessionStorage.setItem(XU,JSON.stringify($)),e(`/inventory/${$.inventoryId}/build`)};return a.jsxs("section",{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:"Build your first blueprint"}),a.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Featured libraries"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Pick a library, tap items to add them, and try a quick demo build. Sign in only when you're ready to use AI review, banners, and publishing."})]}),a.jsx(Ie,{variant:"secondary",className:"w-fit text-xs",children:"Starter"})]}),a.jsxs(ee,{className:"bg-card/60 backdrop-blur-sm border-border/50",children:[a.jsxs(Ge,{className:"pb-3",children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("div",{className:"flex flex-wrap gap-2",children:Ef.map(A=>a.jsx(M,{type:"button",size:"sm",variant:s===A.key?"default":"outline",onClick:()=>i(A.key),disabled:!(c!=null&&c.some($=>$.featureKey===A.key)),children:A.key==="morning"?"Morning routine":"Skincare"},A.key))}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(M,{type:"button",size:"sm",variant:"ghost",className:"gap-2",onClick:R,disabled:!h,children:[a.jsx(jP,{className:"h-4 w-4"}),"Clear all"]})})]}),a.jsxs(pt,{className:"text-base font-medium flex items-center gap-2",children:[a.jsx(_r,{className:"h-4 w-4 text-primary"}),(h==null?void 0:h.title)||"Loading"]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Demo progress: ",y,"/3 items selected"]}),a.jsx("p",{className:"text-xs text-muted-foreground/80",children:"Tip: pick any 3 items, then continue in the full builder when you're ready."})]}),a.jsx(se,{className:"space-y-4",children:u?a.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from({length:4}).map((A,$)=>a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ae,{className:"h-4 w-32"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ae,{className:"h-4 w-full"}),a.jsx(Ae,{className:"h-4 w-5/6"}),a.jsx(Ae,{className:"h-4 w-4/6"})]})]},$))}):d||!h?a.jsx("div",{className:"text-sm text-muted-foreground",children:"Featured libraries are not available right now. Try browsing the Library page instead."}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-card/60 backdrop-blur-glass rounded-2xl border border-border/50 overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-border/30 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:s==="morning"?"Morning routine":"Skincare"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Search items, tap to add them, and build your selection."})]}),a.jsxs(M,{type:"button",variant:"outline",className:"gap-2",onClick:I,children:[a.jsx(_r,{className:"h-4 w-4"}),"Auto-generate Blueprint"]})]}),a.jsx("div",{className:"p-4",children:a.jsx(JU,{categories:b,selectedItems:g,itemContexts:v,onToggleItem:j,onAddCustomItem:S,onRemoveItem:N,onUpdateItemContext:k,onClear:R,selectionTitle:"Build Blueprint"})})]}),a.jsxs("div",{className:"rounded-2xl border border-border/50 bg-card/50 p-4 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Ep,{className:"h-4 w-4"}),a.jsx("span",{children:"Unlock AI review, banner generation, and publishing when you're ready."})]}),a.jsx("p",{className:"text-xs text-muted-foreground/80",children:'Example AI question: "Is this routine realistic for weekdays, and what would you improve?"'}),x<3?a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Select ",3-y," more item",3-y===1?"":"s"," to continue."]}):a.jsxs(M,{type:"button",variant:"outline",className:"w-full gap-2",onClick:()=>D("home-starter"),children:[a.jsx(Ep,{className:"h-4 w-4"}),"Continue in full builder"]})]})]})})]})]})}const sB=["morning","skincare","workout","productivity"];function iB(){return a.jsxs("section",{className:"space-y-4 animate-fade-in",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:"Discover routines"}),a.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold tracking-tight",children:"Learn from the community"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-2xl leading-relaxed",children:"Browse what other people publish, follow tags you care about, then come back and build your own Blueprint."})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx(be,{to:"/explore",children:a.jsxs(M,{className:"gap-2",children:["Explore",a.jsx(jg,{className:"h-4 w-4"})]})}),a.jsx(be,{to:"/wall",children:a.jsxs(M,{variant:"outline",className:"gap-2",children:["Wall",a.jsx(_r,{className:"h-4 w-4"})]})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:ml-auto",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:"Popular tags:"}),sB.map(e=>a.jsx(be,{to:`/explore?tag=${encodeURIComponent(e)}`,children:a.jsxs(Ie,{variant:"outline",className:"text-xs bg-muted/40 text-muted-foreground border-border/60 hover:bg-muted/60 cursor-pointer transition-colors",children:["#",e]})},e))]})]})]})}const s0="https://piszvseyaefxekubphhf.supabase.co/functions/v1/log-event";async function gr({eventName:e,userId:t,blueprintId:r,path:n,metadata:s}){var l;if(!s0||!e)return;let i=null;try{const{data:c}=await P.auth.getSession();i=((l=c.session)==null?void 0:l.access_token)??null}catch{i=null}const o=i?`Bearer ${i}`:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBpc3p2c2V5YWVmeGVrdWJwaGhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwODE3NTEsImV4cCI6MjA4NDY1Nzc1MX0.odmCphs9gpipbjF7zp639J0r8s48SYHnpNsjQvfICSc";try{await fetch(s0,{method:"POST",headers:{"Content-Type":"application/json",Authorization:o},body:JSON.stringify({event_name:e,user_id:t??null,blueprint_id:r??null,path:n??window.location.pathname,metadata:s??{}}),keepalive:!0})}catch{}}function aB(){const{user:e}=ke(),t=f.useRef(!1);return f.useEffect(()=>{if(t.current)return;t.current=!0;const r=Date.now(),n=localStorage.getItem("mvp_last_visit"),s=n?Number(n):null;s&&!Number.isNaN(s)&&r-s<=6048e5&&gr({eventName:"return_visit_7d",userId:e==null?void 0:e.id,path:window.location.pathname}),localStorage.setItem("mvp_last_visit",String(r)),gr({eventName:"visit_home",userId:e==null?void 0:e.id,path:window.location.pathname})},[e==null?void 0:e.id]),a.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[a.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none -z-10",children:[a.jsx("div",{className:"absolute -top-40 -right-40 w-[520px] h-[520px] bg-primary/10 rounded-full blur-3xl animate-drift"}),a.jsx("div",{className:"absolute top-1/2 -left-32 w-96 h-96 bg-accent/20 rounded-full blur-3xl animate-float"}),a.jsx("div",{className:"absolute -bottom-20 right-1/4 w-80 h-80 bg-secondary/10 rounded-full blur-3xl animate-pulse-soft"})]}),a.jsx(Nt,{}),a.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-10 space-y-12",children:[a.jsxs("section",{className:"text-center space-y-5 animate-fade-in",children:[a.jsx("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-black tracking-tight",children:a.jsx("span",{className:"text-gradient-themed",style:{fontFamily:"'Impact', 'Haettenschweiler', 'Franklin Gothic Bold', 'Charcoal', sans-serif",letterSpacing:"0.06em"},children:"BLUEPRINTS"})}),a.jsx("p",{className:"text-sm uppercase tracking-widest text-primary/80 font-medium",children:"Create & share recipes for life routines"}),a.jsx("p",{className:"text-base text-muted-foreground max-w-md mx-auto leading-relaxed",children:"Build routines from shared libraries, get AI reviews, and publish when you're ready."}),a.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3 pt-2",children:[a.jsx(be,{to:"/explore",children:a.jsxs(M,{size:"lg",className:"gap-2",children:["Start Exploring",a.jsx(jg,{className:"h-4 w-4"})]})}),a.jsx(be,{to:"/wall",children:a.jsxs(M,{size:"lg",variant:"outline",className:"gap-2",children:["Browse the Wall",a.jsx(_r,{className:"h-4 w-4"})]})})]})]}),a.jsx(V5,{}),a.jsx(uU,{}),a.jsx(nB,{}),a.jsx(iB,{}),a.jsx(oU,{}),a.jsx(lU,{}),a.jsx(pn,{})]})]})}function Jk(e=10){return Be({queryKey:["popular-inventory-tags",e],queryFn:async()=>{const{data:t,error:r}=await P.from("inventory_tags").select("tag_id");if(r)throw r;const n=new Map;(t||[]).forEach(c=>{n.set(c.tag_id,(n.get(c.tag_id)||0)+1)});const s=[...n.entries()].sort((c,u)=>u[1]-c[1]).slice(0,e).map(([c])=>c);if(s.length===0)return[];const{data:i,error:o}=await P.from("tags").select("id, slug").in("id",s);if(o)throw o;return(i||[]).map(c=>({id:c.id,slug:c.slug,count:n.get(c.id)||0})).sort((c,u)=>u.count-c.count)},staleTime:5*60*1e3})}const Xk=4;function dn(e){return e.trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function Ov(e){const t=new Set,r=[];for(const n of e){const s=dn(n);!s||t.has(s)||(t.add(s),r.push(s))}return r.slice(0,Xk)}function fh(){const{user:e}=ke(),t=Lt(),r=Be({queryKey:["followed-tags",e==null?void 0:e.id],enabled:!!e,queryFn:async()=>{if(!e)return[];const{data:d,error:h}=await P.from("tag_follows").select("tag_id, tags(slug)").eq("user_id",e.id);if(h)throw h;return(d||[]).map(p=>({id:p.tag_id,slug:(p.tags||{}).slug||""})).filter(p=>p.slug)}}),n=r.data||[],s=f.useMemo(()=>new Set(n.map(d=>d.id)),[n]),i=f.useMemo(()=>new Set(n.map(d=>d.slug)),[n]),o=mt({mutationFn:async d=>{if(!e)throw new Error("Must be logged in");const{error:h}=await P.from("tag_follows").insert({tag_id:d,user_id:e.id});if(h)throw h},onSuccess:()=>{t.invalidateQueries({queryKey:["followed-tags"]}),t.invalidateQueries({queryKey:["tags-directory"]})}}),l=mt({mutationFn:async d=>{if(!e)throw new Error("Must be logged in");const{error:h}=await P.from("tag_follows").delete().eq("tag_id",d).eq("user_id",e.id);if(h)throw h},onSuccess:()=>{t.invalidateQueries({queryKey:["followed-tags"]}),t.invalidateQueries({queryKey:["tags-directory"]})}}),c=async d=>{const h=dn(d.replace(/^#/,""));if(!h)return null;const{data:p,error:m}=await P.from("tags").select("id").eq("slug",h).maybeSingle();if(m)throw m;return(p==null?void 0:p.id)??null};return{followedTags:n,followedIds:s,followedSlugs:i,toggleFollow:async d=>{if(!e)throw new Error("Must be logged in");const h=d.id??(d.slug?await c(d.slug):null);if(!h)throw new Error("Tag not found");s.has(h)?await l.mutateAsync(h):await o.mutateAsync(h)},isLoading:r.isLoading,isUpdating:o.isPending||l.isPending,hasUser:!!e}}const oB=[{value:"for-you",label:"For You"},{value:"latest",label:"Latest"},{value:"trending",label:"Trending"}];function lB(e){return!e||typeof e!="object"||Array.isArray(e)?0:Object.values(e).reduce((t,r)=>t+(Array.isArray(r)?r.length:0),0)}function cB(){const{user:e,isLoading:t}=ke(),{toast:r}=Ot(),n=Lt(),[s,i]=f.useState("for-you");f.useEffect(()=>{t||!e&&s==="for-you"&&i("trending")},[t,e,s]);const{data:o=[]}=Jk(6),{followedIds:l,toggleFollow:c}=fh(),u=async g=>{if(!e){r({title:"Sign in required",description:"Please sign in to follow tags."});return}try{await c(g),n.invalidateQueries({queryKey:["wall-blueprints"]})}catch(v){r({title:"Tag update failed",description:v instanceof Error?v.message:"Please try again.",variant:"destructive"})}},d=["wall-blueprints",s,e==null?void 0:e.id],{data:h,isLoading:p}=Be({queryKey:d,queryFn:async()=>{const g=s==="for-you"&&!!e,v=s==="for-you"?120:80;let x=P.from("blueprints").select("id, creator_user_id, title, selected_items, llm_review, likes_count, created_at").eq("is_public",!0).order("created_at",{ascending:!1}).limit(v);if(s==="trending"){const T=new Date;T.setDate(T.getDate()-3),x=x.gte("created_at",T.toISOString()).order("likes_count",{ascending:!1}).order("created_at",{ascending:!1})}const{data:y,error:w}=await x;if(w)throw w;if(!y||y.length===0)return[];const _=y.map(T=>T.id),j=[...new Set(y.map(T=>T.creator_user_id))],[S,N,k]=await Promise.all([P.from("blueprint_tags").select("blueprint_id, tag_id").in("blueprint_id",_),e?P.from("blueprint_likes").select("blueprint_id").eq("user_id",e.id).in("blueprint_id",_):Promise.resolve({data:[]}),P.from("profiles").select("user_id, display_name, avatar_url").in("user_id",j)]),R=S.data||[],I=[...new Set(R.map(T=>T.tag_id))],{data:D}=I.length>0?await P.from("tags").select("id, slug").in("id",I):{data:[]},A=new Map((D||[]).map(T=>[T.id,T])),$=new Map;R.forEach(T=>{const E=A.get(T.tag_id);if(!E)return;const B=$.get(T.blueprint_id)||[];B.push(E),$.set(T.blueprint_id,B)});const O=new Set((N.data||[]).map(T=>T.blueprint_id)),X=new Map((k.data||[]).map(T=>[T.user_id,T]));let U=new Set;if(g){const T=await P.from("tag_follows").select("tag_id").eq("user_id",e.id);U=new Set((T.data||[]).map(E=>E.tag_id))}const J=y.map(T=>({...T,profile:X.get(T.creator_user_id)||{display_name:null,avatar_url:null},tags:$.get(T.id)||[],user_liked:O.has(T.id)}));return g?U.size===0?[]:J.filter(T=>T.tags.some(E=>U.has(E.id))):J}}),m=mt({mutationFn:async({blueprintId:g,liked:v})=>{if(!e)throw new Error("Must be logged in");v?await P.from("blueprint_likes").delete().eq("blueprint_id",g).eq("user_id",e.id):await P.from("blueprint_likes").insert({blueprint_id:g,user_id:e.id})},onMutate:async({blueprintId:g,liked:v})=>{await n.cancelQueries({queryKey:d});const x=n.getQueryData(d);return n.setQueryData(d,y=>y==null?void 0:y.map(w=>w.id===g?{...w,user_liked:!v,likes_count:v?w.likes_count-1:w.likes_count+1}:w)),{previousPosts:x}},onError:(g,v,x)=>{n.setQueryData(d,x==null?void 0:x.previousPosts),r({title:"Error",description:"Failed to update like. Please try again.",variant:"destructive"})}}),b=(g,v)=>{if(!e){r({title:"Sign in required",description:"Please sign in to like blueprints."});return}m.mutate({blueprintId:g,liked:v})};return t?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})}):a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[a.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent/5 rounded-full blur-3xl"})]}),a.jsx(Nt,{}),a.jsxs("main",{className:"max-w-3xl mx-auto px-4 pb-24",children:[a.jsx("section",{className:"mb-6",children:a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:"Community Wall"}),a.jsx("h1",{className:"text-2xl font-semibold",children:"See what the community is building"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Browse public blueprints, follow tags you love, and save ideas for your next routine."})]})}),!e&&a.jsx(ee,{className:"mb-6 border-border/50 bg-card/60 backdrop-blur-sm",children:a.jsx(se,{className:"py-5",children:a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("p",{className:"text-sm font-semibold",children:"Sign in to personalize"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Follow tags and creators to tune what shows up in Explore."}),a.jsx("div",{className:"flex justify-center",children:a.jsx(be,{to:"/auth",children:a.jsx(M,{size:"sm",children:"Sign in"})})})]})})}),a.jsxs(jo,{value:s,onValueChange:g=>i(g),children:[a.jsx(Yi,{className:"mb-4",children:oB.map(g=>a.jsx(Ar,{value:g.value,children:g.label},g.value))}),a.jsx(Ir,{value:s,className:"mt-0",children:p?Array.from({length:3}).map((g,v)=>a.jsxs(ee,{children:[a.jsxs(Ge,{className:"flex flex-row items-center gap-3",children:[a.jsx(Ae,{className:"h-10 w-10 rounded-full"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ae,{className:"h-4 w-24"}),a.jsx(Ae,{className:"h-3 w-16"})]})]}),a.jsx(se,{children:a.jsx(Ae,{className:"h-20 w-full"})})]},v)):h&&h.length>0?a.jsx("div",{className:"space-y-4",children:h.map(g=>{const v=g.profile.display_name||"Anonymous",x=v.slice(0,2).toUpperCase(),y=lB(g.selected_items),w=g.llm_review?g.llm_review.slice(0,160):"";return a.jsx(be,{to:`/blueprint/${g.id}`,className:"block",children:a.jsxs(ee,{className:"overflow-hidden transition hover:border-primary/40 hover:shadow-md",children:[a.jsxs(Ge,{className:"flex flex-row items-center gap-3 pb-2",children:[a.jsxs(be,{to:`/u/${g.creator_user_id}`,onClick:_=>_.stopPropagation(),className:"flex items-center gap-3 hover:opacity-80 transition-opacity",children:[a.jsxs(ln,{className:"h-10 w-10",children:[a.jsx(cn,{src:g.profile.avatar_url||void 0}),a.jsx(un,{className:"bg-primary/10 text-primary text-sm",children:x})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:v}),a.jsx("p",{className:"text-xs text-muted-foreground",children:Bi(new Date(g.created_at),{addSuffix:!0})})]})]}),a.jsx("div",{className:"flex-1"}),a.jsxs(Ie,{variant:"secondary",className:"bg-primary/10 text-primary",children:[a.jsx(Mr,{className:"h-3 w-3 mr-1"}),"Blueprint"]})]}),a.jsxs(se,{className:"pt-0 space-y-3",children:[a.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[a.jsx("h3",{className:"font-semibold",children:g.title}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[y," item",y!==1?"s":""]}),w&&a.jsxs("p",{className:"text-sm pt-2 border-t border-border/50 text-muted-foreground",children:[w,"..."]})]}),g.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:g.tags.map(_=>a.jsxs(Ie,{variant:"outline",className:`text-xs cursor-pointer transition-colors border ${l.has(_.id)?"bg-primary/15 text-primary border-primary/30 hover:bg-primary/20":"bg-muted/40 text-muted-foreground border-border/60 hover:bg-muted/60"}`,onClick:j=>{j.preventDefault(),j.stopPropagation(),u(_)},children:["#",_.slug]},_.id))})]}),a.jsx(oh,{className:"pt-0 flex flex-col gap-4",children:a.jsxs("div",{className:"flex items-center gap-4 w-full",children:[a.jsxs(M,{variant:"ghost",size:"sm",className:g.user_liked?"text-red-500":"",onClick:_=>{_.preventDefault(),b(g.id,g.user_liked)},children:[a.jsx(qt,{className:`h-4 w-4 mr-1 ${g.user_liked?"fill-current":""}`}),g.likes_count]}),a.jsx(M,{variant:"ghost",size:"sm",disabled:!0,onClick:_=>_.preventDefault(),children:a.jsx(SP,{className:"h-4 w-4"})})]})})]})},g.id)})}):a.jsx(ee,{className:"text-center py-12",children:a.jsx(se,{children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center",children:s==="for-you"?a.jsx(kj,{className:"h-8 w-8 text-muted-foreground"}):a.jsx(Mr,{className:"h-8 w-8 text-muted-foreground"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:s==="for-you"?"Personalize your feed":"No blueprints yet"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s==="for-you"?"Follow tags to see related blueprints here.":"Be the first to share a blueprint."})]}),s==="for-you"&&o.length>0&&a.jsxs("div",{className:"space-y-3 w-full max-w-md",children:[!e&&a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign in to follow tags and personalize this feed."}),a.jsx(be,{to:"/auth",children:a.jsx(M,{size:"sm",children:"Sign in"})})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Popular tags to follow:"}),a.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:o.map(g=>a.jsxs(M,{variant:"outline",size:"sm",className:`gap-1.5 ${l.has(g.id)?"bg-primary/15 text-primary border-primary/30 hover:bg-primary/20":"text-muted-foreground"}`,onClick:()=>u(g),children:["#",g.slug]},g.id))}),a.jsx(M,{variant:"ghost",size:"sm",className:"text-muted-foreground",onClick:()=>i("latest"),children:"Or browse Latest instead "})]}),s!=="for-you"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx(be,{to:"/inventory",children:a.jsx(M,{children:"Create Blueprint"})}),a.jsx(be,{to:"/tags",children:a.jsx(M,{variant:"outline",children:"Explore Tags"})})]})]})})})})]}),a.jsx(pn,{})]})]})}function Zk(e){const{user:t}=ke();return Be({queryKey:["is-following",t==null?void 0:t.id,e],queryFn:async()=>{if(!t||!e||t.id===e)return!1;const{data:r,error:n}=await P.from("user_follows").select("id").eq("follower_id",t.id).eq("following_id",e).maybeSingle();if(n)throw n;return!!r},enabled:!!t&&!!e&&t.id!==e})}function eC(){const{user:e}=ke(),t=Lt();return mt({mutationFn:async r=>{if(!e)throw new Error("Must be logged in");if(e.id===r)throw new Error("Cannot follow yourself");const{error:n}=await P.from("user_follows").insert({follower_id:e.id,following_id:r});if(n)throw n},onSuccess:(r,n)=>{t.invalidateQueries({queryKey:["is-following",e==null?void 0:e.id,n]}),t.invalidateQueries({queryKey:["user-profile",n]}),t.invalidateQueries({queryKey:["user-followers",n]}),t.invalidateQueries({queryKey:["user-following",e==null?void 0:e.id]})}})}function tC(){const{user:e}=ke(),t=Lt();return mt({mutationFn:async r=>{if(!e)throw new Error("Must be logged in");const{error:n}=await P.from("user_follows").delete().eq("follower_id",e.id).eq("following_id",r);if(n)throw n},onSuccess:(r,n)=>{t.invalidateQueries({queryKey:["is-following",e==null?void 0:e.id,n]}),t.invalidateQueries({queryKey:["user-profile",n]}),t.invalidateQueries({queryKey:["user-followers",n]}),t.invalidateQueries({queryKey:["user-following",e==null?void 0:e.id]})}})}function uB(e){return Be({queryKey:["user-followers",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await P.from("user_follows").select("follower_id").eq("following_id",e);if(r)throw r;if(!t||t.length===0)return[];const n=t.map(o=>o.follower_id),{data:s,error:i}=await P.from("profiles").select("user_id, display_name, avatar_url").in("user_id",n);if(i)throw i;return s||[]},enabled:!!e})}function dB(e){return Be({queryKey:["user-following",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await P.from("user_follows").select("following_id").eq("follower_id",e);if(r)throw r;if(!t||t.length===0)return[];const n=t.map(o=>o.following_id),{data:s,error:i}=await P.from("profiles").select("user_id, display_name, avatar_url").in("user_id",n);if(i)throw i;return s||[]},enabled:!!e})}function hB({userId:e,displayName:t,avatarUrl:r,followerCount:n}){const{user:s}=ke(),{data:i,isLoading:o}=Zk(e),l=eC(),c=tC(),u=(s==null?void 0:s.id)===e,d=l.isPending||c.isPending,h=p=>{p.preventDefault(),p.stopPropagation(),s&&(i?c.mutate(e):l.mutate(e))};return a.jsx(ee,{className:"p-3 hover:shadow-soft-md transition-all",children:a.jsxs(be,{to:`/u/${e}`,className:"flex items-center gap-3",children:[a.jsxs(ln,{className:"h-8 w-8",children:[a.jsx(cn,{src:r||void 0,alt:t||"User"}),a.jsx(un,{className:"bg-muted",children:a.jsx(Rp,{className:"h-4 w-4 text-muted-foreground"})})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-sm truncate",children:t||"Anonymous"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[n," ",n===1?"follower":"followers"]})]}),s&&!u&&a.jsx(M,{variant:i?"outline":"default",size:"sm",onClick:h,disabled:d||o,className:"shrink-0",children:i?"Unfollow":"Follow"})]})})}function fB({result:e,onTagClick:t,followedTagSlugs:r}){const n=Array.isArray(e.selectedItems)?e.selectedItems.length:0;return a.jsx(be,{to:`/blueprint/${e.id}`,children:a.jsxs(ee,{className:"p-4 hover:shadow-soft-md transition-all h-full",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsx("h3",{className:"font-medium text-sm line-clamp-2",children:e.title}),a.jsx(Ud,{className:"h-4 w-4 text-muted-foreground shrink-0"})]}),a.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mb-3",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Mr,{className:"h-3 w-3"}),n," items"]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(qt,{className:"h-3 w-3"}),e.likesCount]})]}),e.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.slice(0,3).map(s=>a.jsxs(Ie,{variant:"secondary",className:`text-xs cursor-pointer transition-colors border ${r!=null&&r.has(s)?"bg-primary/15 text-primary border-primary/30 hover:bg-primary/20":"bg-muted/40 text-muted-foreground border-border/60 hover:bg-muted/60"}`,onClick:i=>{i.preventDefault(),i.stopPropagation(),t==null||t(`#${s}`)},children:["#",s]},s))})]})})}function pB({result:e,onTagClick:t,followedTagSlugs:r}){return a.jsx(be,{to:`/inventory/${e.id}`,children:a.jsxs(ee,{className:"p-4 hover:shadow-soft-md transition-all h-full",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsx("h3",{className:"font-medium text-sm line-clamp-2",children:e.title}),a.jsx(Mr,{className:"h-4 w-4 text-muted-foreground shrink-0"})]}),a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mb-3",children:e.promptCategories}),a.jsx("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mb-3",children:a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(qt,{className:"h-3 w-3"}),e.likesCount]})}),e.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.slice(0,3).map(n=>a.jsxs(Ie,{variant:"secondary",className:`text-xs cursor-pointer transition-colors border ${r!=null&&r.has(n)?"bg-primary/15 text-primary border-primary/30 hover:bg-primary/20":"bg-muted/40 text-muted-foreground border-border/60 hover:bg-muted/60"}`,onClick:s=>{s.preventDefault(),s.stopPropagation(),t==null||t(`#${n}`)},children:["#",n]},n))})]})})}function mB({result:e}){return a.jsx(hB,{userId:e.userId,displayName:e.displayName,avatarUrl:e.avatarUrl,followerCount:e.followerCount})}function iu({result:e,onTagClick:t,followedTagSlugs:r}){switch(e.type){case"blueprint":return a.jsx(fB,{result:e,onTagClick:t,followedTagSlugs:r});case"inventory":return a.jsx(pB,{result:e,onTagClick:t,followedTagSlugs:r});case"user":return a.jsx(mB,{result:e});default:return null}}async function gB(e,t){const r=dn(e.replace(/^#/,""));if(t&&r){const{data:c}=await P.from("tags").select("id").ilike("slug",`%${r}%`);if(!c||c.length===0)return[];const u=c.map(v=>v.id),{data:d}=await P.from("blueprint_tags").select("blueprint_id").in("tag_id",u);if(!d||d.length===0)return[];const h=[...new Set(d.map(v=>v.blueprint_id))],{data:p,error:m}=await P.from("blueprints").select("id, title, selected_items, likes_count, creator_user_id, created_at").eq("is_public",!0).in("id",h).order("likes_count",{ascending:!1}).limit(20);if(m||!p)return[];const{data:b}=await P.from("blueprint_tags").select("blueprint_id, tags(slug)").in("blueprint_id",h),g=new Map;return b==null||b.forEach(v=>{const x=g.get(v.blueprint_id)||[];v.tags&&typeof v.tags=="object"&&"slug"in v.tags&&x.push(v.tags.slug),g.set(v.blueprint_id,x)}),p.map(v=>({type:"blueprint",id:v.id,title:v.title,selectedItems:v.selected_items,likesCount:v.likes_count,creatorUserId:v.creator_user_id,createdAt:v.created_at,tags:g.get(v.id)||[]}))}const{data:n,error:s}=await P.from("blueprints").select("id, title, selected_items, likes_count, creator_user_id, created_at").eq("is_public",!0).ilike("title",`%${e}%`).order("likes_count",{ascending:!1}).limit(20);if(s||!n)return[];const i=n.map(c=>c.id),{data:o}=await P.from("blueprint_tags").select("blueprint_id, tags(slug)").in("blueprint_id",i),l=new Map;return o==null||o.forEach(c=>{const u=l.get(c.blueprint_id)||[];c.tags&&typeof c.tags=="object"&&"slug"in c.tags&&u.push(c.tags.slug),l.set(c.blueprint_id,u)}),n.map(c=>({type:"blueprint",id:c.id,title:c.title,selectedItems:c.selected_items,likesCount:c.likes_count,creatorUserId:c.creator_user_id,createdAt:c.created_at,tags:l.get(c.id)||[]}))}async function vB(e,t){const r=dn(e.replace(/^#/,""));if(t&&r){const{data:c}=await P.from("tags").select("id").ilike("slug",`%${r}%`);if(!c||c.length===0)return[];const u=c.map(v=>v.id),{data:d}=await P.from("inventory_tags").select("inventory_id").in("tag_id",u);if(!d||d.length===0)return[];const h=[...new Set(d.map(v=>v.inventory_id))],{data:p,error:m}=await P.from("inventories").select("id, title, prompt_categories, likes_count, creator_user_id, created_at").eq("is_public",!0).in("id",h).order("likes_count",{ascending:!1}).limit(20);if(m||!p)return[];const{data:b}=await P.from("inventory_tags").select("inventory_id, tags(slug)").in("inventory_id",h),g=new Map;return b==null||b.forEach(v=>{const x=g.get(v.inventory_id)||[];v.tags&&typeof v.tags=="object"&&"slug"in v.tags&&x.push(v.tags.slug),g.set(v.inventory_id,x)}),p.map(v=>({type:"inventory",id:v.id,title:v.title,promptCategories:v.prompt_categories,likesCount:v.likes_count,creatorUserId:v.creator_user_id,createdAt:v.created_at,tags:g.get(v.id)||[]}))}const{data:n,error:s}=await P.from("inventories").select("id, title, prompt_categories, likes_count, creator_user_id, created_at").eq("is_public",!0).ilike("title",`%${e}%`).order("likes_count",{ascending:!1}).limit(20);if(s||!n)return[];const i=n.map(c=>c.id),{data:o}=await P.from("inventory_tags").select("inventory_id, tags(slug)").in("inventory_id",i),l=new Map;return o==null||o.forEach(c=>{const u=l.get(c.inventory_id)||[];c.tags&&typeof c.tags=="object"&&"slug"in c.tags&&u.push(c.tags.slug),l.set(c.inventory_id,u)}),n.map(c=>({type:"inventory",id:c.id,title:c.title,promptCategories:c.prompt_categories,likesCount:c.likes_count,creatorUserId:c.creator_user_id,createdAt:c.created_at,tags:l.get(c.id)||[]}))}async function yB(e){const{data:t,error:r}=await P.from("profiles").select("user_id, display_name, avatar_url, bio, follower_count").eq("is_public",!0).ilike("display_name",`%${e}%`).order("follower_count",{ascending:!1}).limit(15);return r||!t?[]:t.map(n=>({type:"user",userId:n.user_id,displayName:n.display_name,avatarUrl:n.avatar_url,bio:n.bio,followerCount:n.follower_count}))}function xB({query:e,filter:t,enabled:r=!0}){const n=e.trim(),s=n.startsWith("#");return Be({queryKey:["explore-search",n,t],queryFn:async()=>{if(!n)return[];const i=[];if(t==="all"||t==="blueprints"){const o=await gB(n,s);i.push(...o)}if(t==="all"||t==="inventories"){const o=await vB(n,s);i.push(...o)}if((t==="all"||t==="users")&&!s){const o=await yB(n);i.push(...o)}return i},enabled:r&&n.length>0,staleTime:3e4})}function wB(){return Be({queryKey:["trending-tags"],queryFn:async()=>{const{data:e,error:t}=await P.from("tags").select("id, slug, follower_count").order("follower_count",{ascending:!1}).limit(6);if(t)throw t;return e||[]},staleTime:6e4})}function bB(e,t){const[r,n]=f.useState(e);return f.useEffect(()=>{const s=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(s)}},[e,t]),r}const _B=[{value:"all",label:"All"},{value:"blueprints",label:"Blueprints"},{value:"inventories",label:"Libraries"},{value:"users",label:"Users"}];function jB(){const[e,t]=f.useState(""),[r,n]=f.useState("all"),{user:s}=ke(),{toast:i}=Ot(),o=bB(e,300),{data:l,isLoading:c}=xB({query:o,filter:r}),{data:u}=wB(),{followedSlugs:d,toggleFollow:h}=fh(),p=o.trim().length>0,m=async g=>{if(t(g),!s){i({title:"Sign in required",description:"Please sign in to follow tags."});return}try{await h({slug:g})}catch(v){i({title:"Tag update failed",description:v instanceof Error?v.message:"Please try again.",variant:"destructive"})}},b=f.useMemo(()=>{if(!l||r!=="all")return null;const g={blueprints:[],inventories:[],users:[]};return l.forEach(v=>{v.type==="blueprint"?g.blueprints.push(v):v.type==="inventory"?g.inventories.push(v):v.type==="user"&&g.users.push(v)}),g},[l,r]);return a.jsxs("div",{className:"min-h-screen bg-gradient-soft",children:[a.jsx(Nt,{}),a.jsxs("main",{className:"container max-w-4xl mx-auto px-4 py-8",children:[a.jsxs("section",{className:"mb-6",children:[a.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:"Explore"}),a.jsx("h1",{className:"text-2xl font-semibold mt-1",children:"Search blueprints, inventories, and creators"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Start with a keyword, then narrow by type or jump into trending tags."})]}),!s&&a.jsxs("div",{className:"mb-6 rounded-2xl border border-border/50 bg-card/60 backdrop-blur-sm p-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold",children:"Sign in to personalize"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Follow tags and creators to tune what shows up in Explore."})]}),a.jsx(be,{to:"/auth",children:a.jsx(M,{size:"sm",children:"Sign in"})})]}),a.jsxs("div",{className:"relative mb-6",children:[a.jsx(ho,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),a.jsx(Ue,{type:"text",placeholder:"Search blueprints, inventories, users...",value:e,onChange:g=>t(g.target.value),className:"pl-12 h-12 text-base bg-card/60 backdrop-blur-sm border-border/50"})]}),p&&a.jsx("div",{className:"flex gap-2 mb-6 flex-wrap",children:_B.map(g=>a.jsx(M,{variant:r===g.value?"default":"outline",size:"sm",onClick:()=>n(g.value),children:g.label},g.value))}),!p&&a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"text-center py-8",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Discover what works"}),a.jsx("p",{className:"text-muted-foreground",children:"Search blueprints, inventories, and creators  or explore trending topics below"})]}),u&&u.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Trending Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(g=>a.jsxs(Ie,{variant:"secondary",className:`cursor-pointer transition-colors px-3 py-1 border ${d.has(g.slug)?"bg-primary/15 text-primary border-primary/30 hover:bg-primary/20":"bg-muted/40 text-muted-foreground border-border/60 hover:bg-muted/60"}`,onClick:()=>m(`#${g.slug}`),children:["#",g.slug]},g.id))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Popular Categories"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["skincare","nutrition","fitness","wellness","sleep"].map(g=>a.jsx(M,{variant:"outline",size:"sm",onClick:()=>m(g),className:"capitalize",children:g},g))})]})]}),p&&c&&a.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((g,v)=>a.jsx(Ae,{className:"h-32 rounded-xl"},v))}),p&&!c&&b&&a.jsxs("div",{className:"space-y-8",children:[b.blueprints.length>0&&a.jsxs("section",{children:[a.jsx("h2",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Blueprints"}),a.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:b.blueprints.map(g=>a.jsx(iu,{result:g,onTagClick:m,followedTagSlugs:d},g.type==="blueprint"?g.id:""))})]}),b.inventories.length>0&&a.jsxs("section",{children:[a.jsx("h2",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Libraries"}),a.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:b.inventories.map(g=>a.jsx(iu,{result:g,onTagClick:m,followedTagSlugs:d},g.type==="inventory"?g.id:""))})]}),b.users.length>0&&a.jsxs("section",{children:[a.jsx("h2",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Users"}),a.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:b.users.map(g=>a.jsx(iu,{result:g},g.type==="user"?g.userId:""))})]}),(l==null?void 0:l.length)===0&&a.jsxs("div",{className:"text-center text-muted-foreground py-8 space-y-3",children:[a.jsxs("p",{children:['No results found for "',o,'"']}),a.jsx(M,{variant:"outline",size:"sm",onClick:()=>t(""),children:"Clear search"})]})]}),p&&!c&&!b&&l&&a.jsx("div",{children:l.length>0?a.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:l.map(g=>a.jsx(iu,{result:g,onTagClick:m,followedTagSlugs:d},g.type==="user"?g.userId:g.id))}):a.jsxs("div",{className:"text-center text-muted-foreground py-8 space-y-3",children:[a.jsxs("p",{children:['No results found for "',o,'"']}),a.jsx(M,{variant:"outline",size:"sm",onClick:()=>t(""),children:"Clear search"})]})}),a.jsx(pn,{})]})]})}const Tf="id, inventory_id, creator_user_id, title, selected_items, mix_notes, banner_url, llm_review, is_public, likes_count, created_at, updated_at";function Rf(e,t){return t?e.or(`is_public.eq.true,creator_user_id.eq.${t}`):e.eq("is_public",!0)}async function i0(e,t){if(e.length===0)return[];const r=e.map(b=>b.id),n=e.map(b=>b.inventory_id).filter(Boolean),[s,i,o]=await Promise.all([P.from("blueprint_tags").select("blueprint_id, tag_id").in("blueprint_id",r),t?P.from("blueprint_likes").select("blueprint_id").eq("user_id",t).in("blueprint_id",r):Promise.resolve({data:[]}),n.length>0?P.from("inventories").select("id, title").in("id",n):Promise.resolve({data:[]})]),l=s.data||[],c=[...new Set(l.map(b=>b.tag_id))],{data:u}=c.length>0?await P.from("tags").select("id, slug").in("id",c):{data:[]},d=new Map((u||[]).map(b=>[b.id,b])),h=new Map;l.forEach(b=>{const g=d.get(b.tag_id);if(!g)return;const v=h.get(b.blueprint_id)||[];v.push(g),h.set(b.blueprint_id,v)});const p=new Set((i.data||[]).map(b=>b.blueprint_id)),m=new Map((o.data||[]).map(b=>[b.id,b.title]));return e.map(b=>({...b,tags:h.get(b.id)||[],user_liked:p.has(b.id),inventory_title:b.inventory_id&&m.get(b.inventory_id)||null}))}function SB(e,t){const{user:r}=ke();return Be({queryKey:["blueprint-search",e,t,r==null?void 0:r.id],queryFn:async()=>{const n=e.trim();let s=[];const i=t==="latest"?{column:"created_at",ascending:!1}:{column:"likes_count",ascending:!1};if(!n){let h=P.from("blueprints").select(Tf).order(i.column,{ascending:i.ascending}).limit(60);h=Rf(h,r==null?void 0:r.id);const{data:p,error:m}=await h;if(m)throw m;return s=p||[],i0(s,r==null?void 0:r.id)}const o=dn(n),l=[];if(o){const{data:h}=await P.from("tags").select("id").eq("slug",o).maybeSingle();if(h!=null&&h.id){const{data:p}=await P.from("blueprint_tags").select("blueprint_id").eq("tag_id",h.id),m=(p||[]).map(b=>b.blueprint_id);if(m.length>0){let b=P.from("blueprints").select(Tf).in("id",m).order(i.column,{ascending:i.ascending});b=Rf(b,r==null?void 0:r.id);const{data:g}=await b;l.push(...g||[])}}}let c=P.from("blueprints").select(Tf).ilike("title",`%${n}%`).order(i.column,{ascending:i.ascending});c=Rf(c,r==null?void 0:r.id);const{data:u}=await c;return u&&l.push(...u),s=Array.from(new Map(l.map(h=>[h.id,h])).values()),i0(s,r==null?void 0:r.id)}})}function NB(e=10){return Be({queryKey:["popular-blueprint-tags",e],queryFn:async()=>{const{data:t,error:r}=await P.from("blueprint_tags").select("tag_id");if(r)throw r;const n=new Map;(t||[]).forEach(c=>{n.set(c.tag_id,(n.get(c.tag_id)||0)+1)});const s=[...n.entries()].sort((c,u)=>u[1]-c[1]).slice(0,e).map(([c])=>c);if(s.length===0)return[];const{data:i,error:o}=await P.from("tags").select("id, slug").in("id",s);if(o)throw o;return(i||[]).map(c=>({id:c.id,slug:c.slug,count:n.get(c.id)||0})).sort((c,u)=>u.count-c.count)},staleTime:5*60*1e3})}const a0="id, inventory_id, creator_user_id, title, selected_items, mix_notes, banner_url, llm_review, is_public, likes_count, created_at, updated_at";function kB(e=6){const{user:t}=ke();return Be({queryKey:["suggested-blueprints",t==null?void 0:t.id,e],queryFn:async()=>{let r=[];if(t!=null&&t.id){const{data:v}=await P.from("blueprint_likes").select("blueprint_id").eq("user_id",t.id),x=(v||[]).map(y=>y.blueprint_id);if(x.length>0){const{data:y}=await P.from("blueprint_tags").select("tag_id").in("blueprint_id",x);r=[...new Set((y||[]).map(w=>w.tag_id))]}}let n=[];if(r.length>0&&(t!=null&&t.id)){const{data:v}=await P.from("blueprint_tags").select("blueprint_id").in("tag_id",r),x=[...new Set((v||[]).map(j=>j.blueprint_id))],{data:y}=await P.from("blueprint_likes").select("blueprint_id").eq("user_id",t.id),w=new Set((y||[]).map(j=>j.blueprint_id)),_=x.filter(j=>!w.has(j));if(_.length>0){const{data:j}=await P.from("blueprints").select(a0).in("id",_).eq("is_public",!0).order("likes_count",{ascending:!1}).limit(e);n=j||[]}}if(n.length<e){const v=n.map(w=>w.id),{data:x}=await P.from("blueprints").select(a0).eq("is_public",!0).order("likes_count",{ascending:!1}).limit(e*2),y=(x||[]).filter(w=>!v.includes(w.id)).slice(0,e-n.length);n=[...n,...y]}if(n.length===0)return[];const s=n.map(v=>v.id),i=n.map(v=>v.inventory_id).filter(Boolean),[o,l,c]=await Promise.all([P.from("blueprint_tags").select("blueprint_id, tag_id").in("blueprint_id",s),t!=null&&t.id?P.from("blueprint_likes").select("blueprint_id").eq("user_id",t.id).in("blueprint_id",s):Promise.resolve({data:[]}),i.length>0?P.from("inventories").select("id, title").in("id",i):Promise.resolve({data:[]})]),u=o.data||[],d=[...new Set(u.map(v=>v.tag_id))],{data:h}=d.length>0?await P.from("tags").select("id, slug").in("id",d):{data:[]},p=new Map((h||[]).map(v=>[v.id,v])),m=new Map;u.forEach(v=>{const x=p.get(v.tag_id);if(!x)return;const y=m.get(v.blueprint_id)||[];y.push(x),m.set(v.blueprint_id,y)});const b=new Set((l.data||[]).map(v=>v.blueprint_id)),g=new Map((c.data||[]).map(v=>[v.id,v.title]));return n.map(v=>({...v,tags:m.get(v.id)||[],user_liked:b.has(v.id),inventory_title:v.inventory_id&&g.get(v.inventory_id)||null}))},staleTime:2*60*1e3})}const Mv="id, inventory_id, creator_user_id, title, selected_items, steps, mix_notes, review_prompt, banner_url, llm_review, is_public, likes_count, source_blueprint_id, created_at, updated_at";async function rC(e,t){const r=Ov(e);if(r.length===0)return[];const{data:n,error:s}=await P.from("tags").select("id, slug").in("slug",r);if(s)throw s;const i=n||[],o=new Set(i.map(u=>u.slug)),l=r.filter(u=>!o.has(u));let c=[];if(l.length>0){const{data:u,error:d}=await P.from("tags").insert(l.map(h=>({slug:h,created_by:t}))).select("id, slug");if(d)throw d;c=u||[]}return[...i,...c]}function Dv(e){const{user:t}=ke();return Be({queryKey:["blueprint",e,t==null?void 0:t.id],enabled:!!e,queryFn:async()=>{if(!e)return null;const{data:r,error:n}=await P.from("blueprints").select(Mv).eq("id",e).maybeSingle();if(n)throw n;if(!r)return null;const[s,i,o]=await Promise.all([P.from("blueprint_tags").select("tag_id").eq("blueprint_id",e),t?P.from("blueprint_likes").select("id").eq("blueprint_id",e).eq("user_id",t.id):Promise.resolve({data:[]}),P.from("profiles").select("display_name, avatar_url").eq("user_id",r.creator_user_id).maybeSingle()]),l=(s.data||[]).map(d=>d.tag_id),{data:c}=l.length>0?await P.from("tags").select("id, slug").in("id",l):{data:[]},u=!!(i.data&&i.data.length>0);return{...r,tags:c||[],user_liked:u,creator_profile:o.data||null}}})}function nC(){const{user:e}=ke(),t=Lt();return mt({mutationFn:async r=>{if(!e)throw new Error("Must be logged in");const{data:n,error:s}=await P.from("blueprints").insert({inventory_id:r.inventoryId,creator_user_id:e.id,title:r.title,selected_items:r.selectedItems,steps:r.steps,mix_notes:r.mixNotes,review_prompt:r.reviewPrompt,banner_url:r.bannerUrl,llm_review:r.llmReview,is_public:r.isPublic,source_blueprint_id:r.sourceBlueprintId||null}).select(Mv).single();if(s)throw s;const i=await rC(r.tags,e.id);if(i.length>0){const{error:o}=await P.from("blueprint_tags").insert(i.map(l=>({blueprint_id:n.id,tag_id:l.id})));if(o)throw o}return n},onSuccess:()=>{t.invalidateQueries({queryKey:["blueprint"]}),t.invalidateQueries({queryKey:["blueprint-comments"]})}})}function sC(){const{user:e}=ke(),t=Lt();return mt({mutationFn:async({blueprintId:r,liked:n})=>{if(!e)throw new Error("Must be logged in");if(n){const{error:s}=await P.from("blueprint_likes").delete().eq("blueprint_id",r).eq("user_id",e.id);if(s)throw s}else{const{error:s}=await P.from("blueprint_likes").insert({blueprint_id:r,user_id:e.id});if(s)throw s}},onSuccess:()=>{t.invalidateQueries({queryKey:["blueprint"]}),t.invalidateQueries({queryKey:["blueprint-search"]}),t.invalidateQueries({queryKey:["suggested-blueprints"]})}})}function CB(){const{user:e}=ke(),t=Lt();return mt({mutationFn:async r=>{if(!e)throw new Error("Must be logged in");const{data:n,error:s}=await P.from("blueprints").update({title:r.title,selected_items:r.selectedItems,steps:r.steps,mix_notes:r.mixNotes,review_prompt:r.reviewPrompt,banner_url:r.bannerUrl,llm_review:r.llmReview,is_public:r.isPublic}).eq("id",r.blueprintId).eq("creator_user_id",e.id).select(Mv).single();if(s)throw s;const i=await rC(r.tags,e.id),{error:o}=await P.from("blueprint_tags").delete().eq("blueprint_id",r.blueprintId);if(o)throw o;if(i.length>0){const{error:l}=await P.from("blueprint_tags").insert(i.map(c=>({blueprint_id:r.blueprintId,tag_id:c.id})));if(l)throw l}return n},onSuccess:(r,n)=>{t.invalidateQueries({queryKey:["blueprint",n.blueprintId]}),t.invalidateQueries({queryKey:["blueprint-search"]}),t.invalidateQueries({queryKey:["suggested-blueprints"]}),t.invalidateQueries({queryKey:["blueprint-comments",n.blueprintId]})}})}function EB(e){return Be({queryKey:["blueprint-comments",e],enabled:!!e,queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await P.from("blueprint_comments").select("id, content, created_at, user_id").eq("blueprint_id",e).order("created_at",{ascending:!1});if(r)throw r;const n=[...new Set((t||[]).map(o=>o.user_id))],{data:s}=n.length>0?await P.from("profiles").select("user_id, display_name, avatar_url").in("user_id",n):{data:[]},i=new Map((s||[]).map(o=>[o.user_id,o]));return(t||[]).map(o=>({...o,profile:i.get(o.user_id)||null}))}})}function TB(){const{user:e}=ke(),t=Lt();return mt({mutationFn:async({blueprintId:r,content:n})=>{if(!e)throw new Error("Must be logged in");const{error:s}=await P.from("blueprint_comments").insert({blueprint_id:r,user_id:e.id,content:n});if(s)throw s},onSuccess:(r,n)=>{t.invalidateQueries({queryKey:["blueprint-comments",n.blueprintId]})}})}function RB(e){return!e||typeof e!="object"||Array.isArray(e)?0:Object.values(e).reduce((t,r)=>t+(Array.isArray(r)?r.length:0),0)}function PB({blueprint:e,onLike:t,followedTagIds:r,onToggleTag:n}){const s=e.tags.slice(0,3),i=e.tags.length-3,o=RB(e.selected_items);return a.jsx(be,{to:`/blueprint/${e.id}`,className:"block group",children:a.jsx(ee,{className:"h-full bg-card/60 backdrop-blur-sm border-border/50 transition-all duration-300 hover:border-border/80 hover:shadow-md hover:shadow-black/5 group-focus-visible:ring-2 group-focus-visible:ring-primary",children:a.jsxs(se,{className:"p-5 flex flex-col h-full",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsx("h3",{className:"font-semibold text-lg line-clamp-1",children:e.title}),a.jsx(Ud,{className:"h-4 w-4 text-muted-foreground shrink-0"})]}),a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3 flex-grow",children:e.inventory_title?`From ${e.inventory_title}`:"Community blueprint"}),e.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[s.map(l=>a.jsxs(Ie,{variant:"secondary",className:`text-xs cursor-pointer transition-colors border ${r!=null&&r.has(l.id)?"bg-primary/15 text-primary border-primary/30 hover:bg-primary/20":"bg-muted/40 text-muted-foreground border-border/60 hover:bg-muted/60"}`,onClick:c=>{n&&(c.preventDefault(),c.stopPropagation(),n({id:l.id,slug:l.slug}))},children:["#",l.slug]},l.id)),i>0&&a.jsxs(Ie,{variant:"outline",className:"text-xs text-muted-foreground",children:["+",i," more"]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border/50",children:[a.jsx("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:a.jsxs("span",{className:"flex items-center gap-1",title:"Items in this blueprint",children:[a.jsx(Mr,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:o})]})}),a.jsxs(M,{variant:"ghost",size:"sm",className:`h-8 px-2 ${e.user_liked?"text-red-500 hover:text-red-600":"text-muted-foreground hover:text-foreground"}`,onClick:l=>{l.preventDefault(),l.stopPropagation(),t(e.id,e.user_liked)},"aria-label":e.user_liked?"Unlike blueprint":"Like blueprint",children:[a.jsx(qt,{className:`h-4 w-4 ${e.user_liked?"fill-current":""}`}),a.jsx("span",{className:"ml-1 text-xs",children:e.likes_count})]})]})]})})})}function AB(e,t){return f.useReducer((r,n)=>t[r][n]??r,e)}var Lv="ScrollArea",[iC,xz]=Mt(Lv),[IB,Br]=iC(Lv),aC=f.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:i=600,...o}=e,[l,c]=f.useState(null),[u,d]=f.useState(null),[h,p]=f.useState(null),[m,b]=f.useState(null),[g,v]=f.useState(null),[x,y]=f.useState(0),[w,_]=f.useState(0),[j,S]=f.useState(!1),[N,k]=f.useState(!1),R=Ne(t,D=>c(D)),I=_o(s);return a.jsx(IB,{scope:r,type:n,dir:I,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:p,scrollbarX:m,onScrollbarXChange:b,scrollbarXEnabled:j,onScrollbarXEnabledChange:S,scrollbarY:g,onScrollbarYChange:v,scrollbarYEnabled:N,onScrollbarYEnabledChange:k,onCornerWidthChange:y,onCornerHeightChange:_,children:a.jsx(oe.div,{dir:I,...o,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});aC.displayName=Lv;var oC="ScrollAreaViewport",lC=f.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:s,...i}=e,o=Br(oC,r),l=f.useRef(null),c=Ne(t,l,o.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),a.jsx(oe.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:a.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});lC.displayName=oC;var Pn="ScrollAreaScrollbar",$v=f.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Br(Pn,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,l=e.orientation==="horizontal";return f.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),s.type==="hover"?a.jsx(OB,{...n,ref:t,forceMount:r}):s.type==="scroll"?a.jsx(MB,{...n,ref:t,forceMount:r}):s.type==="auto"?a.jsx(cC,{...n,ref:t,forceMount:r}):s.type==="always"?a.jsx(Fv,{...n,ref:t}):null});$v.displayName=Pn;var OB=f.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Br(Pn,e.__scopeScrollArea),[i,o]=f.useState(!1);return f.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),a.jsx(Dt,{present:r||i,children:a.jsx(cC,{"data-state":i?"visible":"hidden",...n,ref:t})})}),MB=f.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Br(Pn,e.__scopeScrollArea),i=e.orientation==="horizontal",o=mh(()=>c("SCROLL_END"),100),[l,c]=AB("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),f.useEffect(()=>{const u=s.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const p=()=>{const m=u[d];h!==m&&(c("SCROLL"),o()),h=m};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,i,c,o]),a.jsx(Dt,{present:r||l!=="hidden",children:a.jsx(Fv,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:G(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:G(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),cC=f.forwardRef((e,t)=>{const r=Br(Pn,e.__scopeScrollArea),{forceMount:n,...s}=e,[i,o]=f.useState(!1),l=e.orientation==="horizontal",c=mh(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:d)}},10);return io(r.viewport,c),io(r.content,c),a.jsx(Dt,{present:n||i,children:a.jsx(Fv,{"data-state":i?"visible":"hidden",...s,ref:t})})}),Fv=f.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,s=Br(Pn,e.__scopeScrollArea),i=f.useRef(null),o=f.useRef(0),[l,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=pC(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function h(p,m){return BB(p,o.current,l,m)}return r==="horizontal"?a.jsx(DB,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollLeft,m=o0(p,l,s.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=h(p,s.dir))}}):r==="vertical"?a.jsx(LB,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollTop,m=o0(p,l);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=h(p))}}):null}),DB=f.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,i=Br(Pn,e.__scopeScrollArea),[o,l]=f.useState(),c=f.useRef(null),u=Ne(t,c,i.onScrollbarXChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(dC,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ph(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const p=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(p),gC(p,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:yd(o.paddingLeft),paddingEnd:yd(o.paddingRight)}})}})}),LB=f.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,i=Br(Pn,e.__scopeScrollArea),[o,l]=f.useState(),c=f.useRef(null),u=Ne(t,c,i.onScrollbarYChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(dC,{"data-orientation":"vertical",...s,ref:u,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ph(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const p=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(p),gC(p,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:yd(o.paddingTop),paddingEnd:yd(o.paddingBottom)}})}})}),[$B,uC]=iC(Pn),dC=f.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...p}=e,m=Br(Pn,r),[b,g]=f.useState(null),v=Ne(t,R=>g(R)),x=f.useRef(null),y=f.useRef(""),w=m.viewport,_=n.content-n.viewport,j=dt(d),S=dt(c),N=mh(h,10);function k(R){if(x.current){const I=R.clientX-x.current.left,D=R.clientY-x.current.top;u({x:I,y:D})}}return f.useEffect(()=>{const R=I=>{const D=I.target;(b==null?void 0:b.contains(D))&&j(I,_)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[w,b,_,j]),f.useEffect(S,[n,S]),io(b,N),io(m.content,N),a.jsx($B,{scope:r,scrollbar:b,hasThumb:s,onThumbChange:dt(i),onThumbPointerUp:dt(o),onThumbPositionChange:S,onThumbPointerDown:dt(l),children:a.jsx(oe.div,{...p,ref:v,style:{position:"absolute",...p.style},onPointerDown:G(e.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),x.current=b.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),k(R))}),onPointerMove:G(e.onPointerMove,k),onPointerUp:G(e.onPointerUp,R=>{const I=R.target;I.hasPointerCapture(R.pointerId)&&I.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=y.current,m.viewport&&(m.viewport.style.scrollBehavior=""),x.current=null})})})}),vd="ScrollAreaThumb",hC=f.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=uC(vd,e.__scopeScrollArea);return a.jsx(Dt,{present:r||s.hasThumb,children:a.jsx(FB,{ref:t,...n})})}),FB=f.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...s}=e,i=Br(vd,r),o=uC(vd,r),{onThumbPositionChange:l}=o,c=Ne(t,h=>o.onThumbChange(h)),u=f.useRef(void 0),d=mh(()=>{u.current&&(u.current(),u.current=void 0)},100);return f.useEffect(()=>{const h=i.viewport;if(h){const p=()=>{if(d(),!u.current){const m=zB(h,l);u.current=m,l()}};return l(),h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[i.viewport,d,l]),a.jsx(oe.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:G(e.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),b=h.clientX-m.left,g=h.clientY-m.top;o.onThumbPointerDown({x:b,y:g})}),onPointerUp:G(e.onPointerUp,o.onThumbPointerUp)})});hC.displayName=vd;var Uv="ScrollAreaCorner",fC=f.forwardRef((e,t)=>{const r=Br(Uv,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?a.jsx(UB,{...e,ref:t}):null});fC.displayName=Uv;var UB=f.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,s=Br(Uv,r),[i,o]=f.useState(0),[l,c]=f.useState(0),u=!!(i&&l);return io(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),io(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),u?a.jsx(oe.div,{...n,ref:t,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function yd(e){return e?parseInt(e,10):0}function pC(e,t){const r=e/t;return isNaN(r)?0:r}function ph(e){const t=pC(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function BB(e,t,r,n="ltr"){const s=ph(r),i=s/2,o=t||i,l=s-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,h=n==="ltr"?[0,d]:[d*-1,0];return mC([c,u],h)(e)}function o0(e,t,r="ltr"){const n=ph(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,o=t.content-t.viewport,l=i-n,c=r==="ltr"?[0,o]:[o*-1,0],u=pm(e,c);return mC([0,o],[0,l])(u)}function mC(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function gC(e,t){return e>0&&e<t}var zB=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function s(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function mh(e,t){const r=dt(e),n=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(n.current),[]),f.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function io(e,t){const r=dt(t);ht(()=>{let n=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(n),s.unobserve(e)}}},[e,r])}var vC=aC,qB=lC,WB=fC;const Bv=f.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(vC,{ref:n,className:H("relative overflow-hidden",e),...r,children:[a.jsx(qB,{className:"h-full w-full rounded-[inherit]",children:t}),a.jsx(zv,{}),a.jsx(WB,{})]}));Bv.displayName=vC.displayName;const zv=f.forwardRef(({className:e,orientation:t="vertical",...r},n)=>a.jsx($v,{ref:n,orientation:t,className:H("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:a.jsx(hC,{className:"relative flex-1 rounded-full bg-border"})}));zv.displayName=$v.displayName;function yC({tags:e,selectedTag:t,onSelectTag:r,followedTagIds:n,onToggleFollow:s,variant:i="scroll"}){const o=f.useRef(null),l=!!n&&!!s;if(e.length===0)return null;const c=a.jsxs("div",{className:i==="wrap"?"flex flex-wrap gap-2":"flex gap-2 pb-2",children:[t&&a.jsxs(M,{variant:"outline",size:"sm",className:"h-8 gap-1 text-xs shrink-0",onClick:()=>r(null),children:[a.jsx(Vt,{className:"h-3 w-3"}),"Clear filter"]}),e.map(u=>{const d=(n==null?void 0:n.has(u.id))??!1;return a.jsxs(Ie,{variant:t===u.slug?"default":"secondary",className:`cursor-pointer shrink-0 transition-colors ${t===u.slug?"bg-primary text-primary-foreground hover:bg-primary/90":l?d?"bg-primary/15 text-primary border border-primary/30 hover:bg-primary/20":"bg-muted/40 text-muted-foreground border border-border/60 hover:bg-muted/60":"hover:bg-secondary/80"}`,onClick:()=>{r(t===u.slug?null:u.slug),s==null||s({id:u.id,slug:u.slug})},role:"button",tabIndex:0,onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),r(t===u.slug?null:u.slug),s==null||s({id:u.id,slug:u.slug}))},"aria-pressed":t===u.slug,children:["#",u.slug,a.jsxs("span",{className:"ml-1 text-xs opacity-70",children:["(",u.count,")"]})]},u.id)})]});return i==="wrap"?a.jsx("div",{className:"relative",children:c}):a.jsx("div",{className:"relative",children:a.jsxs(Bv,{className:"w-full whitespace-nowrap",ref:o,children:[c,a.jsx(zv,{orientation:"horizontal"})]})})}const xC=mv,wC=gv,VB=vv,bC=f.forwardRef(({className:e,...t},r)=>a.jsx(mc,{className:H("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));bC.displayName=mc.displayName;const HB=oc("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),qv=f.forwardRef(({side:e="right",className:t,children:r,...n},s)=>a.jsxs(VB,{children:[a.jsx(bC,{}),a.jsxs(gc,{ref:s,className:H(HB({side:e}),t),...n,children:[r,a.jsxs(ih,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[a.jsx(Vt,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));qv.displayName=gc.displayName;const Wv=({className:e,...t})=>a.jsx("div",{className:H("flex flex-col space-y-2 text-center sm:text-left",e),...t});Wv.displayName="SheetHeader";const Vv=f.forwardRef(({className:e,...t},r)=>a.jsx(vc,{ref:r,className:H("text-lg font-semibold text-foreground",e),...t}));Vv.displayName=vc.displayName;const Hv=f.forwardRef(({className:e,...t},r)=>a.jsx(yc,{ref:r,className:H("text-sm text-muted-foreground",e),...t}));Hv.displayName=yc.displayName;function KB(){const[e,t]=f.useState(""),[r,n]=f.useState(null),[s,i]=f.useState("popular"),[o,l]=f.useState(!1),{user:c}=ke(),{toast:u}=Ot(),d=r||e,{data:h,isLoading:p}=SB(d,s),{data:m=[],isLoading:b}=NB(12),{data:g=[],isLoading:v}=kB(6),x=sC(),{followedIds:y,toggleFollow:w}=fh(),_=new Set(g.map(D=>D.id)),j=f.useMemo(()=>h?d?h:h.filter(D=>!_.has(D.id)):[],[h,_,d]),S=async(D,A)=>{if(!c){u({title:"Sign in required",description:"Please sign in to like blueprints.",variant:"destructive"});return}try{await x.mutateAsync({blueprintId:D,liked:A})}catch($){u({title:"Action failed",description:$ instanceof Error?$.message:"Please try again.",variant:"destructive"})}},N=D=>{n(D),D&&t("")},k=async D=>{if(!c){u({title:"Sign in required",description:"Please sign in to follow tags."});return}try{await w(D)}catch(A){u({title:"Tag update failed",description:A instanceof Error?A.message:"Please try again.",variant:"destructive"})}},R=!d&&c,I=f.useMemo(()=>!R||!g||g.length===0||v?j:[...g,...j],[R,g,v,j]);return a.jsxs("div",{className:"min-h-screen bg-background relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute top-1/3 -left-20 w-60 h-60 bg-accent/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-20 right-1/4 w-40 h-40 bg-primary/3 rounded-full blur-2xl"})]}),a.jsx(Nt,{}),a.jsxs("main",{className:"relative max-w-4xl mx-auto px-4 py-8 space-y-6",children:[a.jsxs("section",{className:"space-y-3",children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:"Blueprints"}),a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Search and explore community blueprints"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Start with a keyword, then narrow by tag or sort by whats popular."})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[!c&&a.jsx(be,{to:"/auth",children:a.jsx(M,{variant:"outline",size:"sm",children:"Sign in"})}),a.jsx(M,{variant:"ghost",size:"sm",onClick:()=>l(D=>!D),children:"What is a Blueprint?"}),a.jsx(be,{to:"/inventory",children:a.jsxs(M,{size:"sm",className:"gap-2",children:[a.jsx(Mr,{className:"h-4 w-4"}),"Build from Library"]})})]})]}),o&&a.jsx("div",{className:"rounded-xl border border-border/50 bg-card/50 backdrop-blur-sm p-4 text-sm text-muted-foreground leading-relaxed",children:a.jsx("p",{children:"A Blueprint is a step-by-step routine built from a library. It turns a list of items into an ordered plan. Each step can include multiple items and short context. Blueprints are meant to be practical and repeatable. You can follow a blueprint as-is or edit it to fit your style. The review helps you check gaps or risks before you publish. Banners and tags help others discover your blueprint. Public blueprints appear on the community wall. Saving a blueprint lets you return and improve it later. Think of it as a recipe for a routine you can share."})})]}),a.jsx(ee,{className:"bg-card/60 backdrop-blur-sm border-border/50",children:a.jsxs(se,{className:"p-4 flex flex-col gap-3 sm:flex-row sm:items-center",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(ho,{className:"h-4 w-4 text-muted-foreground shrink-0"}),a.jsx(Ue,{value:e,onChange:D=>{t(D.target.value),D.target.value&&n(null)},placeholder:"Search blueprints by title or tag...",className:"border-none shadow-none focus-visible:ring-0 bg-transparent"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(xC,{children:[a.jsx(wC,{asChild:!0,children:a.jsxs(M,{variant:"outline",size:"sm",className:"gap-2",children:[a.jsx(bj,{className:"h-4 w-4"}),"Filters"]})}),a.jsxs(qv,{side:"right",className:"w-full sm:max-w-md",children:[a.jsxs(Wv,{children:[a.jsx(Vv,{children:"Filters"}),a.jsx(Hv,{children:"Filter by tag and follow tags to personalize."})]}),a.jsx("div",{className:"mt-6 space-y-4",children:!b&&m.length>0?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm font-semibold",children:"Popular tags"}),a.jsx(yC,{tags:m,selectedTag:r,onSelectTag:N,followedTagIds:y,onToggleFollow:k,variant:"wrap"}),!c&&a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign in to follow tags."})]}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading tags"})})]})]}),a.jsx("div",{className:"w-full sm:w-56",children:a.jsxs(Bk,{value:s,onValueChange:D=>i(D),children:[a.jsx(Sv,{children:a.jsx(zk,{placeholder:"Sort by"})}),a.jsxs(Nv,{children:[a.jsx(gd,{value:"popular",children:"Most liked"}),a.jsx(gd,{value:"latest",children:"Newest"})]})]})})]})]})}),a.jsxs("section",{className:"space-y-4",children:[d?a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("h2",{className:"text-sm font-semibold text-muted-foreground",children:["Results for ",a.jsxs("span",{className:"text-foreground",children:['"',d,'"']})]}),a.jsx(M,{variant:"ghost",size:"sm",className:"text-muted-foreground",onClick:()=>{t(""),n(null)},children:"Clear"})]}):a.jsx("h2",{className:"text-sm font-semibold text-muted-foreground",children:"Popular blueprints"}),p?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Array.from({length:6}).map((D,A)=>a.jsx(ee,{className:"bg-card/60 backdrop-blur-sm border-border/50",children:a.jsxs(se,{className:"p-5 space-y-3",children:[a.jsx(Ae,{className:"h-5 w-3/4"}),a.jsx(Ae,{className:"h-10 w-full"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ae,{className:"h-5 w-16"}),a.jsx(Ae,{className:"h-5 w-20"})]}),a.jsx(Ae,{className:"h-4 w-full"})]})},A))}):I.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:I.map(D=>a.jsx(PB,{blueprint:D,onLike:S,followedTagIds:y,onToggleTag:k},D.id))}):a.jsx(ee,{className:"bg-card/60 backdrop-blur-sm",children:a.jsxs(se,{className:"py-12 text-center space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"No blueprints found"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:d?"Try a different search or clear filters.":"Be the first to publish a blueprint!"}),a.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:d?a.jsx(M,{variant:"outline",onClick:()=>{t(""),n(null)},children:"Clear search"}):a.jsx(be,{to:"/inventory",children:a.jsx(M,{children:"Build from Library"})})})]})})]}),a.jsx(pn,{})]})]})}var GB="Separator",l0="horizontal",YB=["horizontal","vertical"],_C=f.forwardRef((e,t)=>{const{decorative:r,orientation:n=l0,...s}=e,i=QB(n)?n:l0,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(oe.div,{"data-orientation":i,...l,...s,ref:t})});_C.displayName=GB;function QB(e){return YB.includes(e)}var jC=_C;const Kv=f.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},s)=>a.jsx(jC,{ref:s,decorative:r,orientation:t,className:H("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));Kv.displayName=jC.displayName;function JB(){const e=es(),{signIn:t,signUp:r,user:n}=ke(),{toast:s}=Ot(),[i,o]=f.useState(!1),[l,c]=f.useState(!1),[u,d]=f.useState(""),[h,p]=f.useState(""),[m,b]=f.useState(""),[g,v]=f.useState(""),[x,y]=f.useState("");if(n)return e("/"),null;const w=async S=>{S.preventDefault(),o(!0);const{error:N}=await t(u,h);N?s({title:"Login failed",description:N.message,variant:"destructive"}):(s({title:"Welcome back!",description:"You have successfully logged in."}),e("/")),o(!1)},_=async S=>{S.preventDefault(),o(!0);const{error:N}=await r(m,g,x);N?s({title:"Signup failed",description:N.message,variant:"destructive"}):(s({title:"Account created!",description:"Welcome to Blueprints. Your account is ready."}),e("/")),o(!1)},j=async()=>{c(!0);const S=new URL("/remix-of-stackwise-advisor/",window.location.origin).toString(),{error:N}=await P.auth.signInWithOAuth({provider:"google",options:{redirectTo:S}});N&&(s({title:"Google sign-in failed",description:N.message,variant:"destructive"}),c(!1))};return a.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:[a.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[a.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/10 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent/10 rounded-full blur-3xl animate-pulse delay-1000"})]}),a.jsxs(ee,{className:"w-full max-w-md",children:[a.jsxs(Ge,{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[a.jsx(Sg,{className:"h-8 w-8 text-primary"}),a.jsx("span",{className:"text-2xl font-bold",children:"Blueprints"})]}),a.jsx(pt,{children:"Welcome"}),a.jsx(hl,{children:"Sign in to save your blueprints and share with the community"})]}),a.jsxs(se,{className:"space-y-4",children:[a.jsxs(M,{type:"button",variant:"outline",className:"w-full gap-2",onClick:j,disabled:i||l,children:[l?a.jsx(Ri,{className:"h-4 w-4 animate-spin"}):a.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx(Kv,{className:"w-full"})}),a.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:a.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or continue with email"})})]}),a.jsxs(jo,{defaultValue:"login",className:"w-full",children:[a.jsxs(Yi,{className:"grid w-full grid-cols-2",children:[a.jsx(Ar,{value:"login",children:"Login"}),a.jsx(Ar,{value:"signup",children:"Sign Up"})]}),a.jsx(Ir,{value:"login",children:a.jsxs("form",{onSubmit:w,className:"space-y-4 mt-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{htmlFor:"login-email",children:"Email"}),a.jsx(Ue,{id:"login-email",type:"email",placeholder:"you@example.com",value:u,onChange:S=>d(S.target.value),required:!0,disabled:i||l})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{htmlFor:"login-password",children:"Password"}),a.jsx(Ue,{id:"login-password",type:"password",placeholder:"",value:h,onChange:S=>p(S.target.value),required:!0,disabled:i||l,minLength:6})]}),a.jsx(M,{type:"submit",className:"w-full",disabled:i||l,children:i?a.jsxs(a.Fragment,{children:[a.jsx(Ri,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})}),a.jsx(Ir,{value:"signup",children:a.jsxs("form",{onSubmit:_,className:"space-y-4 mt-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{htmlFor:"signup-name",children:"Display Name"}),a.jsx(Ue,{id:"signup-name",type:"text",placeholder:"Your name",value:x,onChange:S=>y(S.target.value),disabled:i||l})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{htmlFor:"signup-email",children:"Email"}),a.jsx(Ue,{id:"signup-email",type:"email",placeholder:"you@example.com",value:m,onChange:S=>b(S.target.value),required:!0,disabled:i||l})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{htmlFor:"signup-password",children:"Password"}),a.jsx(Ue,{id:"signup-password",type:"password",placeholder:"",value:g,onChange:S=>v(S.target.value),required:!0,disabled:i||l,minLength:6})]}),a.jsx(M,{type:"submit",className:"w-full",disabled:i||l,children:i?a.jsxs(a.Fragment,{children:[a.jsx(Ri,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):"Create Account"})]})})]})]}),a.jsx(oh,{className:"text-center text-sm text-muted-foreground",children:a.jsx("p",{className:"w-full",children:"By signing up, you agree to our Terms of Service and Privacy Policy."})})]})]})}const Wt=f.forwardRef(({className:e,...t},r)=>a.jsx("textarea",{className:H("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));Wt.displayName="Textarea";var gh="Switch",[XB,wz]=Mt(gh),[ZB,e6]=XB(gh),SC=f.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=e,[p,m]=f.useState(null),b=Ne(t,w=>m(w)),g=f.useRef(!1),v=p?d||!!p.closest("form"):!0,[x,y]=Ur({prop:s,defaultProp:i??!1,onChange:u,caller:gh});return a.jsxs(ZB,{scope:r,checked:x,disabled:l,children:[a.jsx(oe.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":EC(x),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:b,onClick:G(e.onClick,w=>{y(_=>!_),v&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),v&&a.jsx(CC,{control:p,bubbles:!g.current,name:n,value:c,checked:x,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});SC.displayName=gh;var NC="SwitchThumb",kC=f.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=e6(NC,r);return a.jsx(oe.span,{"data-state":EC(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});kC.displayName=NC;var t6="SwitchBubbleInput",CC=f.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...s},i)=>{const o=f.useRef(null),l=Ne(o,i),c=_v(r),u=Og(t);return f.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&m){const b=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(b)}},[c,r,n]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});CC.displayName=t6;function EC(e){return e?"checked":"unchecked"}var TC=SC,r6=kC;const zn=f.forwardRef(({className:e,...t},r)=>a.jsx(TC,{className:H("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:r,children:a.jsx(r6,{className:H("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));zn.displayName=TC.displayName;const n6=2*1024*1024;function s6({userId:e,currentAvatarUrl:t,displayName:r,onAvatarChange:n,disabled:s}){const{toast:i}=Ot(),o=f.useRef(null),[l,c]=f.useState(""),[u,d]=f.useState(!1),h=r.slice(0,2).toUpperCase(),p=async b=>{var v;const g=(v=b.target.files)==null?void 0:v[0];if(g){if(g.size>n6){i({title:"File too large",description:"Please select an image under 2MB.",variant:"destructive"});return}if(!g.type.startsWith("image/")){i({title:"Invalid file type",description:"Please select an image file.",variant:"destructive"});return}d(!0);try{const x=g.name.split(".").pop()||"jpg",y=Date.now(),w=`${e}/${y}.${x}`,{error:_}=await P.storage.from("avatars").upload(w,g,{upsert:!0});if(_)throw _;const{data:j}=P.storage.from("avatars").getPublicUrl(w);n(j.publicUrl),i({title:"Avatar uploaded",description:"Your new avatar has been set."})}catch(x){i({title:"Upload failed",description:x instanceof Error?x.message:"Please try again.",variant:"destructive"})}finally{d(!1),o.current&&(o.current.value="")}}},m=()=>{if(l.trim())try{new URL(l.trim()),n(l.trim()),c(""),i({title:"Avatar updated",description:"Your avatar URL has been set."})}catch{i({title:"Invalid URL",description:"Please enter a valid image URL.",variant:"destructive"})}};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(ln,{className:"h-20 w-20",children:[a.jsx(cn,{src:t||void 0,alt:r}),a.jsx(un,{className:"bg-primary/10 text-primary text-xl",children:h})]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx("p",{className:"font-medium text-foreground",children:"Profile Picture"}),a.jsx("p",{children:"Upload an image or paste a URL"})]})]}),a.jsxs(jo,{defaultValue:"upload",className:"w-full",children:[a.jsxs(Yi,{className:"grid w-full grid-cols-2",children:[a.jsxs(Ar,{value:"upload",className:"gap-1.5",children:[a.jsx(Ix,{className:"h-4 w-4"}),"Upload"]}),a.jsxs(Ar,{value:"url",className:"gap-1.5",children:[a.jsx(xP,{className:"h-4 w-4"}),"URL"]})]}),a.jsx(Ir,{value:"upload",className:"mt-3",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:p,className:"hidden",disabled:s||u}),a.jsx(M,{type:"button",variant:"outline",className:"w-full",onClick:()=>{var b;return(b=o.current)==null?void 0:b.click()},disabled:s||u,children:u?a.jsxs(a.Fragment,{children:[a.jsx(Ri,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ix,{className:"h-4 w-4 mr-2"}),"Choose Image"]})}),a.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Max file size: 2MB"})]})}),a.jsx(Ir,{value:"url",className:"mt-3",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{htmlFor:"avatar-url",children:"Image URL"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ue,{id:"avatar-url",value:l,onChange:b=>c(b.target.value),placeholder:"https://example.com/avatar.jpg",disabled:s}),a.jsx(M,{type:"button",onClick:m,disabled:s||!l.trim(),children:"Set"})]})]})})]})]})}function i6(){var v;const{user:e,profile:t,isLoading:r,updateProfile:n}=ke(),{toast:s}=Ot(),[i,o]=f.useState(""),[l,c]=f.useState(""),[u,d]=f.useState(""),[h,p]=f.useState(!1),[m,b]=f.useState(!1);if(f.useEffect(()=>{o((t==null?void 0:t.display_name)||""),c((t==null?void 0:t.avatar_url)||""),d((t==null?void 0:t.bio)||"")},[t]),f.useEffect(()=>{async function x(){if(!e)return;const{data:y}=await P.from("profiles").select("is_public").eq("user_id",e.id).maybeSingle();y&&p(y.is_public)}x()},[e]),r)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})});if(!e)return a.jsx(Dl,{to:"/auth",replace:!0});const g=async x=>{var _;x.preventDefault(),b(!0);const{error:y}=await n({display_name:i.trim()||null,avatar_url:l.trim()||null,bio:u.trim()||null}),{error:w}=await P.from("profiles").update({is_public:h}).eq("user_id",e.id);s(y||w?{title:"Update failed",description:((_=y||w)==null?void 0:_.message)||"Please try again.",variant:"destructive"}:{title:"Settings saved",description:"Your profile settings have been updated."}),b(!1)};return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[a.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent/5 rounded-full blur-3xl"})]}),a.jsx(Nt,{}),a.jsxs("main",{className:"max-w-2xl mx-auto px-4 py-10 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your profile and account preferences"})]}),a.jsxs("form",{onSubmit:g,className:"space-y-6",children:[a.jsxs(ee,{children:[a.jsxs(Ge,{children:[a.jsx(pt,{children:"Profile"}),a.jsx(hl,{children:"Your public profile information"})]}),a.jsxs(se,{className:"space-y-6",children:[a.jsx(s6,{userId:e.id,currentAvatarUrl:l,displayName:i||((v=e.email)==null?void 0:v.split("@")[0])||"User",onAvatarChange:c,disabled:m}),a.jsx(Kv,{}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{htmlFor:"display-name",children:"Display Name"}),a.jsx(Ue,{id:"display-name",value:i,onChange:x=>o(x.target.value),placeholder:"Your name",disabled:m})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{htmlFor:"bio",children:"Bio"}),a.jsx(Wt,{id:"bio",value:u,onChange:x=>d(x.target.value),placeholder:"A short bio about you",rows:4,disabled:m})]})]})]}),a.jsxs(ee,{children:[a.jsxs(Ge,{children:[a.jsx(pt,{children:"Privacy"}),a.jsx(hl,{children:"Control who can see your profile"})]}),a.jsx(se,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(qe,{htmlFor:"public-profile",children:"Make profile public"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"When enabled, anyone can view your profile page"})]}),a.jsx(zn,{id:"public-profile",checked:h,onCheckedChange:p,disabled:m})]})})]}),a.jsxs(ee,{children:[a.jsxs(Ge,{children:[a.jsx(pt,{children:"Account"}),a.jsx(hl,{children:"Your account information"})]}),a.jsx(se,{className:"space-y-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{children:"Email"}),a.jsx(Ue,{value:e.email||"",disabled:!0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed"})]})})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(M,{type:"submit",disabled:m,children:m?"Saving...":"Save Changes"})})]})]})]})}function a6({targetUserId:e}){const{user:t}=ke(),{toast:r}=Ot(),{data:n,isLoading:s}=Zk(e),i=eC(),o=tC(),[l,c]=f.useState(!1);if(!t||t.id===e)return null;const u=async()=>{try{n?(await o.mutateAsync(e),r({title:"Unfollowed",description:"You are no longer following this user."})):(await i.mutateAsync(e),r({title:"Following!",description:"You are now following this user."}))}catch(h){r({title:"Action failed",description:h instanceof Error?h.message:"Please try again.",variant:"destructive"})}},d=i.isPending||o.isPending;return n?a.jsx(M,{variant:"outline",size:"sm",onClick:u,disabled:d||s,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),className:l?"border-destructive text-destructive hover:bg-destructive/10":"",children:l?"Unfollow":a.jsxs(a.Fragment,{children:[a.jsx(kP,{className:"h-4 w-4 mr-1"}),"Following"]})}):a.jsxs(M,{size:"sm",onClick:u,disabled:d||s,children:[a.jsx(CP,{className:"h-4 w-4 mr-1"}),"Follow"]})}function o6({profile:e,onFollowersClick:t,onFollowingClick:r}){const{user:n}=ke(),s=(n==null?void 0:n.id)===e.user_id,i=e.display_name||"Anonymous",o=i.slice(0,2).toUpperCase(),l=sU(new Date(e.created_at),"MMMM yyyy");return a.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 items-start sm:items-center",children:[a.jsxs(ln,{className:"h-20 w-20 sm:h-24 sm:w-24",children:[a.jsx(cn,{src:e.avatar_url||void 0,alt:i}),a.jsx(un,{className:"bg-primary/10 text-primary text-2xl",children:o})]}),a.jsxs("div",{className:"flex-1 space-y-3",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-2xl font-bold",children:i}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[a.jsx(dP,{className:"h-4 w-4"}),a.jsxs("span",{children:["Joined ",l]})]})]}),a.jsx("div",{className:"flex gap-2",children:s?a.jsx(M,{variant:"outline",size:"sm",asChild:!0,children:a.jsxs(be,{to:"/settings",children:[a.jsx(Nj,{className:"h-4 w-4 mr-1"}),"Edit Profile"]})}):a.jsx(a6,{targetUserId:e.user_id})})]}),e.bio&&a.jsx("p",{className:"text-muted-foreground max-w-lg",children:e.bio}),a.jsxs("div",{className:"flex gap-4 text-sm",children:[a.jsxs("button",{onClick:t,className:"hover:underline focus:outline-none",children:[a.jsx("span",{className:"font-semibold",children:e.follower_count})," ",a.jsx("span",{className:"text-muted-foreground",children:"Followers"})]}),a.jsxs("button",{onClick:r,className:"hover:underline focus:outline-none",children:[a.jsx("span",{className:"font-semibold",children:e.following_count})," ",a.jsx("span",{className:"text-muted-foreground",children:"Following"})]})]})]})]})}function l6(e){return ke(),Be({queryKey:["user-profile",e],queryFn:async()=>{if(!e)return null;const{data:t,error:r}=await P.from("profiles").select("id, user_id, display_name, avatar_url, bio, is_public, follower_count, following_count, created_at").eq("user_id",e).maybeSingle();if(r)throw r;return t},enabled:!!e})}function c6(e,t=4){return Be({queryKey:["user-blueprints",e,t],queryFn:async()=>{if(!e)return[];const{data:r,error:n}=await P.from("blueprints").select("id, title, selected_items, likes_count, created_at").eq("creator_user_id",e).eq("is_public",!0).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r||[]},enabled:!!e})}function u6(e,t=4){return Be({queryKey:["user-inventories",e,t],queryFn:async()=>{if(!e)return[];const{data:r,error:n}=await P.from("inventories").select("id, title, prompt_categories, likes_count, created_at").eq("creator_user_id",e).eq("is_public",!0).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r||[]},enabled:!!e})}function d6(e,t=4){return Be({queryKey:["user-liked-blueprints",e,t],queryFn:async()=>{if(!e)return[];const{data:r,error:n}=await P.from("blueprint_likes").select("blueprint_id, created_at").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(n)throw n;if(!r||r.length===0)return[];const s=r.map(d=>d.blueprint_id),{data:i,error:o}=await P.from("blueprints").select("id, title, creator_user_id, likes_count, created_at").in("id",s).eq("is_public",!0);if(o)throw o;const l=[...new Set((i||[]).map(d=>d.creator_user_id))],{data:c}=await P.from("profiles").select("user_id, display_name, avatar_url").in("user_id",l),u=new Map((c||[]).map(d=>[d.user_id,d]));return(i||[]).map(d=>({...d,creator_profile:u.get(d.creator_user_id)||null}))},enabled:!!e})}function h6(e,t=4){return Be({queryKey:["user-activity",e,t],queryFn:async()=>{if(!e)return[];const{data:r}=await P.from("blueprints").select("id, title, created_at").eq("creator_user_id",e).eq("is_public",!0).order("created_at",{ascending:!1}).limit(t),{data:n}=await P.from("blueprint_likes").select("id, blueprint_id, created_at").eq("user_id",e).order("created_at",{ascending:!1}).limit(t),s=(n||[]).map(p=>p.blueprint_id),{data:i}=s.length>0?await P.from("blueprints").select("id, title").in("id",s).eq("is_public",!0):{data:[]},o=new Map((i||[]).map(p=>[p.id,p.title])),{data:l}=await P.from("blueprint_comments").select("id, blueprint_id, created_at").eq("user_id",e).order("created_at",{ascending:!1}).limit(t),c=(l||[]).map(p=>p.blueprint_id),{data:u}=c.length>0?await P.from("blueprints").select("id, title").in("id",c).eq("is_public",!0):{data:[]},d=new Map((u||[]).map(p=>[p.id,p.title]));return[...(r||[]).map(p=>({type:"blueprint_created",id:p.id,title:`Created "${p.title}"`,created_at:p.created_at,target_id:p.id})),...(n||[]).filter(p=>o.has(p.blueprint_id)).map(p=>({type:"blueprint_liked",id:p.id,title:`Liked "${o.get(p.blueprint_id)}"`,created_at:p.created_at,target_id:p.blueprint_id})),...(l||[]).filter(p=>d.has(p.blueprint_id)).map(p=>({type:"comment",id:p.id,title:`Commented on "${d.get(p.blueprint_id)}"`,created_at:p.created_at,target_id:p.blueprint_id}))].sort((p,m)=>new Date(m.created_at).getTime()-new Date(p.created_at).getTime()).slice(0,t)},enabled:!!e})}function f6(e){return!e||typeof e!="object"||Array.isArray(e)?0:Object.values(e).reduce((t,r)=>t+(Array.isArray(r)?r.length:0),0)}function p6({userId:e}){const{data:t,isLoading:r}=c6(e,4),{data:n,isLoading:s}=u6(e,4),{data:i,isLoading:o}=d6(e,4),{data:l,isLoading:c}=h6(e,4);return a.jsxs(jo,{defaultValue:"blueprints",className:"w-full",children:[a.jsxs(Yi,{className:"w-full justify-start",children:[a.jsxs(Ar,{value:"blueprints",className:"gap-1.5",children:[a.jsx(Mr,{className:"h-4 w-4"}),"Blueprints"]}),a.jsxs(Ar,{value:"inventories",className:"gap-1.5",children:[a.jsx(Tp,{className:"h-4 w-4"}),"Libraries"]}),a.jsxs(Ar,{value:"liked",className:"gap-1.5",children:[a.jsx(qt,{className:"h-4 w-4"}),"Liked"]}),a.jsxs(Ar,{value:"activity",className:"gap-1.5",children:[a.jsx(rf,{className:"h-4 w-4"}),"Activity"]})]}),a.jsx(Ir,{value:"blueprints",className:"mt-4",children:r?a.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:Array.from({length:4}).map((u,d)=>a.jsx(Ae,{className:"h-24"},d))}):t&&t.length>0?a.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:t.map(u=>a.jsx(be,{to:`/blueprint/${u.id}`,children:a.jsx(ee,{className:"h-full transition hover:border-primary/40",children:a.jsxs(se,{className:"p-4",children:[a.jsx("h4",{className:"font-medium truncate",children:u.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[a.jsxs(Ie,{variant:"secondary",className:"text-xs",children:[f6(u.selected_items)," items"]}),a.jsx("span",{children:""}),a.jsx(qt,{className:"h-3 w-3"}),a.jsx("span",{children:u.likes_count})]})]})})},u.id))}):a.jsx(au,{icon:a.jsx(Mr,{className:"h-8 w-8"}),message:"No public blueprints yet"})}),a.jsx(Ir,{value:"inventories",className:"mt-4",children:s?a.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:Array.from({length:4}).map((u,d)=>a.jsx(Ae,{className:"h-24"},d))}):n&&n.length>0?a.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:n.map(u=>a.jsx(be,{to:`/inventory/${u.id}`,children:a.jsx(ee,{className:"h-full transition hover:border-primary/40",children:a.jsxs(se,{className:"p-4",children:[a.jsx("h4",{className:"font-medium truncate",children:u.title}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:u.prompt_categories}),a.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[a.jsx(qt,{className:"h-3 w-3"}),a.jsx("span",{children:u.likes_count})]})]})})},u.id))}):a.jsx(au,{icon:a.jsx(Tp,{className:"h-8 w-8"}),message:"No public inventories yet"})}),a.jsx(Ir,{value:"liked",className:"mt-4",children:o?a.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:Array.from({length:4}).map((u,d)=>a.jsx(Ae,{className:"h-24"},d))}):i&&i.length>0?a.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:i.map(u=>{var d;return a.jsx(be,{to:`/blueprint/${u.id}`,children:a.jsx(ee,{className:"h-full transition hover:border-primary/40",children:a.jsxs(se,{className:"p-4",children:[a.jsx("h4",{className:"font-medium truncate",children:u.title}),a.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["by ",((d=u.creator_profile)==null?void 0:d.display_name)||"Anonymous"]}),a.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[a.jsx(qt,{className:"h-3 w-3 fill-current text-destructive"}),a.jsx("span",{children:u.likes_count})]})]})})},u.id)})}):a.jsx(au,{icon:a.jsx(qt,{className:"h-8 w-8"}),message:"No liked blueprints yet"})}),a.jsx(Ir,{value:"activity",className:"mt-4",children:c?a.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((u,d)=>a.jsx(Ae,{className:"h-16"},d))}):l&&l.length>0?a.jsx("div",{className:"space-y-3",children:l.map(u=>a.jsx(be,{to:`/blueprint/${u.target_id}`,children:a.jsx(ee,{className:"transition hover:border-primary/40",children:a.jsxs(se,{className:"p-4 flex items-center gap-3",children:[a.jsxs("div",{className:"h-8 w-8 rounded-full bg-muted flex items-center justify-center",children:[u.type==="blueprint_created"&&a.jsx(Mr,{className:"h-4 w-4 text-primary"}),u.type==="blueprint_liked"&&a.jsx(qt,{className:"h-4 w-4 text-destructive"}),u.type==="comment"&&a.jsx(rf,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:u.title}),a.jsx("p",{className:"text-xs text-muted-foreground",children:Bi(new Date(u.created_at),{addSuffix:!0})})]}),a.jsx(jg,{className:"h-4 w-4 text-muted-foreground"})]})})},u.id))}):a.jsx(au,{icon:a.jsx(rf,{className:"h-8 w-8"}),message:"No recent activity"})})]})}function au({icon:e,message:t}){return a.jsx(ee,{children:a.jsx(se,{className:"py-12 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center text-muted-foreground",children:e}),a.jsx("p",{className:"text-muted-foreground",children:t})]})})})}function c0({userId:e,type:t,open:r,onOpenChange:n}){const{data:s,isLoading:i}=uB(t==="followers"?e:void 0),{data:o,isLoading:l}=dB(t==="following"?e:void 0),c=t==="followers"?i:l,u=t==="followers"?s:o,d=t==="followers"?"Followers":"Following";return a.jsx(yv,{open:r,onOpenChange:n,children:a.jsxs(ah,{className:"sm:max-w-md",children:[a.jsx(xv,{children:a.jsx(wv,{children:d})}),a.jsx(Bv,{className:"max-h-[400px]",children:c?a.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((h,p)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ae,{className:"h-10 w-10 rounded-full"}),a.jsx(Ae,{className:"h-4 w-32"})]},p))}):u&&u.length>0?a.jsx("div",{className:"space-y-2",children:u.map(h=>a.jsx(m6,{user:h,onClose:()=>n(!1)},h.user_id))}):a.jsx("p",{className:"text-center text-muted-foreground py-8",children:t==="followers"?"No followers yet":"Not following anyone yet"})})]})})}function m6({user:e,onClose:t}){const r=e.display_name||"Anonymous",n=r.slice(0,2).toUpperCase();return a.jsxs(be,{to:`/u/${e.user_id}`,onClick:t,className:"flex items-center gap-3 p-2 rounded-lg hover:bg-muted/50 transition-colors",children:[a.jsxs(ln,{className:"h-10 w-10",children:[a.jsx(cn,{src:e.avatar_url||void 0,alt:r}),a.jsx(un,{className:"bg-primary/10 text-primary text-sm",children:n})]}),a.jsx("span",{className:"font-medium",children:r})]})}function g6(){const{userId:e}=wo(),{user:t}=ke(),{data:r,isLoading:n,error:s}=l6(e),[i,o]=f.useState(!1),[l,c]=f.useState(!1);if(!e)return a.jsx(Dl,{to:"/auth",replace:!0});const u=(t==null?void 0:t.id)===e,d=(r==null?void 0:r.is_public)||u;return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[a.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent/5 rounded-full blur-3xl"})]}),a.jsx(Nt,{}),a.jsx("main",{className:"max-w-4xl mx-auto px-4 py-8 space-y-8",children:n?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx(Ae,{className:"h-24 w-24 rounded-full"}),a.jsxs("div",{className:"space-y-3 flex-1",children:[a.jsx(Ae,{className:"h-8 w-48"}),a.jsx(Ae,{className:"h-4 w-32"}),a.jsx(Ae,{className:"h-4 w-64"})]})]}),a.jsx(Ae,{className:"h-10 w-full"}),a.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:Array.from({length:4}).map((h,p)=>a.jsx(Ae,{className:"h-24"},p))})]}):s?a.jsx(ee,{children:a.jsx(se,{className:"py-12 text-center",children:a.jsx("p",{className:"text-muted-foreground",children:"Failed to load profile. Please try again."})})}):r?d?a.jsxs(a.Fragment,{children:[a.jsx(o6,{profile:r,onFollowersClick:()=>o(!0),onFollowingClick:()=>c(!0)}),!r.is_public&&u&&a.jsx(ee,{className:"border-dashed",children:a.jsxs(se,{className:"py-4 text-center text-sm text-muted-foreground",children:["Your profile is currently ",a.jsx("strong",{children:"private"}),". Only you can see this page."," ",a.jsx("a",{href:"/settings",className:"text-primary hover:underline",children:"Make it public"})," ","to let others discover you."]})}),a.jsx(p6,{userId:e}),a.jsx(c0,{userId:e,type:"followers",open:i,onOpenChange:o}),a.jsx(c0,{userId:e,type:"following",open:l,onOpenChange:c})]}):a.jsx(ee,{children:a.jsx(se,{className:"py-16 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center",children:a.jsx(Ep,{className:"h-8 w-8 text-muted-foreground"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold",children:"This profile is private"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"This user has chosen to keep their profile private."})]})]})})}):a.jsx(ee,{children:a.jsx(se,{className:"py-12 text-center",children:a.jsx("p",{className:"text-muted-foreground",children:"Profile not found."})})})})]})}function v6(){const{user:e}=ke(),t=Lt(),r=Be({queryKey:["tags-directory",e==null?void 0:e.id],queryFn:async()=>{const{data:o,error:l}=await P.from("tags").select("id, slug, follower_count, created_at").order("follower_count",{ascending:!1}).limit(200);if(l)throw l;if(!e)return o||[];const c=await P.from("tag_follows").select("tag_id").eq("user_id",e.id),u=new Set((c.data||[]).map(d=>d.tag_id));return(o||[]).map(d=>({...d,is_following:u.has(d.id)}))}}),n=mt({mutationFn:async o=>{if(!e)throw new Error("Must be logged in");const{error:l}=await P.from("tag_follows").insert({tag_id:o,user_id:e.id});if(l)throw l},onSuccess:()=>t.invalidateQueries({queryKey:["tags-directory"]})}),s=mt({mutationFn:async o=>{if(!e)throw new Error("Must be logged in");const{error:l}=await P.from("tag_follows").delete().eq("tag_id",o).eq("user_id",e.id);if(l)throw l},onSuccess:()=>t.invalidateQueries({queryKey:["tags-directory"]})}),i=mt({mutationFn:async o=>{if(!e)throw new Error("Must be logged in");const l=dn(o);if(!l)throw new Error("Invalid tag");const{data:c,error:u}=await P.from("tags").select("id, slug, follower_count, created_at").eq("slug",l).maybeSingle();if(u)throw u;if(c)return c;const{data:d,error:h}=await P.from("tags").insert({slug:l,created_by:e.id}).select("id, slug, follower_count, created_at").single();if(h)throw h;return await P.from("tag_follows").insert({tag_id:d.id,user_id:e.id}),d},onSuccess:()=>t.invalidateQueries({queryKey:["tags-directory"]})});return{tags:r.data||[],isLoading:r.isLoading,error:r.error,followTag:n.mutateAsync,unfollowTag:s.mutateAsync,createTag:i.mutateAsync,isUpdating:n.isPending||s.isPending}}function Gv(){return Be({queryKey:["tag-suggestions"],queryFn:async()=>{const{data:e,error:t}=await P.from("tags").select("slug").order("follower_count",{ascending:!1}).limit(200);if(t)throw t;return(e||[]).map(r=>r.slug)}})}function y6(e=12){const{user:t}=ke();return Be({queryKey:["suggested-tags",t==null?void 0:t.id,e],queryFn:async()=>{const{data:r,error:n}=await P.from("tags").select("id, slug, follower_count").order("follower_count",{ascending:!1}).limit(100);if(n)throw n;if(!r||r.length===0)return[];if(!t)return r.slice(0,e).map(m=>({...m,reason:"popular"}));const{data:s}=await P.from("tag_follows").select("tag_id").eq("user_id",t.id),i=new Set((s||[]).map(m=>m.tag_id));if(i.size===0)return r.slice(0,e).map(m=>({...m,reason:"popular"}));const o=Array.from(i),{data:l}=await P.from("blueprint_tags").select("blueprint_id").in("tag_id",o),c=[...new Set((l||[]).map(m=>m.blueprint_id))],u=new Map;if(c.length>0){const{data:m}=await P.from("blueprint_tags").select("tag_id").in("blueprint_id",c.slice(0,50)).not("tag_id","in",`(${o.join(",")})`);(m||[]).forEach(b=>{i.has(b.tag_id)||u.set(b.tag_id,(u.get(b.tag_id)||0)+1)})}const d=[],h=new Set,p=Array.from(u.entries()).sort((m,b)=>b[1]-m[1]).slice(0,Math.floor(e/2));for(const[m]of p){const b=r.find(g=>g.id===m);b&&!i.has(b.id)&&(d.push({...b,reason:"related"}),h.add(b.id))}for(const m of r){if(d.length>=e)break;!i.has(m.id)&&!h.has(m.id)&&d.push({...m,reason:"popular"})}return d.slice(0,e)},staleTime:6e4})}function x6(){const{user:e}=ke(),{toast:t}=Ot(),{tags:r,isLoading:n,followTag:s,unfollowTag:i,createTag:o,isUpdating:l}=v6(),{data:c,isLoading:u}=y6(12),[d,h]=f.useState(""),[p,m]=f.useState(""),[b]=o4();f.useEffect(()=>{const w=b.get("q");w&&h(w)},[b]);const{followedTags:g,allTags:v}=f.useMemo(()=>{const w=dn(d),_=w?r.filter(j=>j.slug.includes(w)):r;return{followedTags:_.filter(j=>j.is_following),allTags:_}},[d,r]),x=async()=>{if(!e){t({title:"Sign in required",description:"Please sign in to create or follow tags."});return}const w=dn(p);if(!w){t({title:"Invalid tag",description:"Use letters, numbers, and dashes only.",variant:"destructive"});return}try{await o(w),m(""),t({title:"Tag created",description:`#${w} is ready to follow.`})}catch(_){t({title:"Failed to create tag",description:_ instanceof Error?_.message:"Please try again",variant:"destructive"})}},y=async(w,_)=>{if(!e){t({title:"Sign in required",description:"Please sign in to manage tags."});return}try{_?await i(w):await s(w)}catch(j){t({title:_?"Failed to unfollow":"Failed to follow",description:j instanceof Error?j.message:"Please try again",variant:"destructive"})}};return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[a.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent/5 rounded-full blur-3xl"})]}),a.jsx(Nt,{}),a.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-8 space-y-8",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Tags"}),a.jsx("p",{className:"text-muted-foreground",children:"Follow topics to personalize your feed. Create new tags to categorize your work."})]}),a.jsx(ee,{className:"border-border/50 bg-card/60 backdrop-blur-sm",children:a.jsxs(se,{className:"pt-6 space-y-2",children:[a.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:"Discover Topics"}),a.jsx("h2",{className:"text-xl font-semibold",children:"Find your community signals"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Follow tags to shape your Wall, or create new ones as you publish."})]})}),a.jsx(ee,{children:a.jsxs(se,{className:"pt-6 space-y-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(ho,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Ue,{placeholder:"Search tags...",value:d,onChange:w=>h(w.target.value),className:"pl-9"})]}),d&&a.jsx(M,{variant:"ghost",size:"sm",onClick:()=>h(""),children:"Clear"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Bd,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Ue,{placeholder:"Create a new tag...",value:p,onChange:w=>m(w.target.value),onKeyDown:w=>w.key==="Enter"&&x(),disabled:l,className:"pl-9"})]}),a.jsxs(M,{onClick:x,disabled:l||!p.trim(),className:"gap-2",children:[a.jsx(zd,{className:"h-4 w-4"}),"Create"]})]})]})}),e&&g.length>0&&!d&&a.jsxs("section",{className:"space-y-3 animate-fade-in",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Hi,{className:"h-4 w-4 text-primary"}),a.jsx("h2",{className:"text-lg font-semibold",children:"Your Tags"}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",g.length,")"]})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(w=>a.jsx(Pf,{tag:w,isFollowing:!0,onToggle:()=>y(w.id,!0),disabled:l},w.id))})]}),e&&!d&&c&&c.length>0&&a.jsxs("section",{className:"space-y-3 animate-fade-in",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_r,{className:"h-4 w-4 text-primary"}),a.jsx("h2",{className:"text-lg font-semibold",children:"Suggested for You"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(w=>{const _=r.find(S=>S.id===w.id),j=(_==null?void 0:_.is_following)??!1;return a.jsx(Pf,{tag:w,isFollowing:j,onToggle:()=>y(w.id,j),disabled:l,badge:w.reason==="related"?"related":void 0},w.id)})}),u&&a.jsx("div",{className:"flex gap-2",children:Array.from({length:6}).map((w,_)=>a.jsx("div",{className:"h-8 w-20 rounded-full bg-muted animate-pulse"},_))})]}),a.jsxs("section",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(NP,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("h2",{className:"text-lg font-semibold",children:d?"Search Results":"All Tags"}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",v.length,")"]})]}),n?a.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:12}).map((w,_)=>a.jsx("div",{className:"h-9 w-24 rounded-full bg-muted animate-pulse"},_))}):v.length===0?a.jsx(ee,{children:a.jsx(se,{className:"py-10 text-center",children:a.jsx("p",{className:"text-muted-foreground",children:d?"No tags match your search.":"No tags yet. Create the first one!"})})}):a.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(w=>a.jsx(Pf,{tag:w,isFollowing:w.is_following??!1,onToggle:()=>y(w.id,w.is_following??!1),disabled:l},w.id))})]}),a.jsx(pn,{})]})]})}function Pf({tag:e,isFollowing:t,onToggle:r,disabled:n,badge:s}){return a.jsx("button",{type:"button",onClick:r,disabled:n,className:"group",title:t?"Unfollow tag":"Follow tag",children:a.jsxs(Ie,{variant:t?"default":"outline",className:`
          gap-1.5 px-3 py-2 text-sm cursor-pointer transition-all border
          ${t?"bg-primary/15 text-primary border-primary/30 hover:bg-primary/20":"bg-muted/40 text-muted-foreground border-border/60 hover:bg-muted/60"}
          disabled:opacity-50
        `,children:[a.jsx(Bd,{className:"h-3 w-3"}),e.slug,e.follower_count>0&&a.jsxs("span",{className:"flex items-center gap-0.5 text-xs opacity-70 ml-1",children:[a.jsx(cc,{className:"h-3 w-3"}),e.follower_count]}),s==="related"&&a.jsx("span",{className:"text-[10px] uppercase tracking-wider opacity-60 ml-1",children:"related"})]})})}function w6(){const{user:e}=ke(),t=Lt(),r=Be({queryKey:["post-bookmarks",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const{data:s,error:i}=await P.from("post_bookmarks").select("post_id, created_at").eq("user_id",e.id).order("created_at",{ascending:!1});if(i)throw i;return s||[]},enabled:!!e}),n=mt({mutationFn:async({postId:s,bookmarked:i})=>{if(!e)throw new Error("Must be logged in");if(i){const{error:o}=await P.from("post_bookmarks").delete().eq("post_id",s).eq("user_id",e.id);if(o)throw o}else{const{error:o}=await P.from("post_bookmarks").insert({post_id:s,user_id:e.id});if(o)throw o}},onSuccess:()=>{t.invalidateQueries({queryKey:["post-bookmarks"]}),t.invalidateQueries({queryKey:["wall-posts"]})}});return{bookmarks:r.data||[],isLoading:r.isLoading,toggleBookmark:n.mutateAsync,isUpdating:n.isPending}}function b6(e,t){const r=new Map,n=[];return e.forEach(s=>{r.set(s.id,{...s,user_liked:t.has(s.id),children:[]})}),r.forEach(s=>{s.parent_id&&r.has(s.parent_id)?r.get(s.parent_id).children.push(s):n.push(s)}),n}function RC(e,t){const r=(n,s)=>t==="latest"?new Date(s.created_at).getTime()-new Date(n.created_at).getTime():s.likes_count!==n.likes_count?s.likes_count-n.likes_count:new Date(s.created_at).getTime()-new Date(n.created_at).getTime();e.sort(r),e.forEach(n=>RC(n.children,t))}function _6(e,t){const{user:r}=ke(),n=Lt(),s=Be({queryKey:["wall-comments",e,r==null?void 0:r.id,t],queryFn:async()=>{const{data:u,error:d}=await P.from("wall_comments").select("id, post_id, user_id, parent_id, body, likes_count, created_at, updated_at").eq("post_id",e).order("created_at",{ascending:!0});if(d)throw d;if(!u||u.length===0)return[];const h=u.map(w=>w.id),p=[...new Set(u.map(w=>w.user_id))],[m,b]=await Promise.all([P.from("profiles").select("user_id, display_name, avatar_url").in("user_id",p),r?P.from("comment_likes").select("comment_id").eq("user_id",r.id).in("comment_id",h):Promise.resolve({data:[]})]),g=new Map((m.data||[]).map(w=>[w.user_id,w])),v=new Set((b.data||[]).map(w=>w.comment_id)),x=u.map(w=>({...w,profile:g.get(w.user_id)||{display_name:null,avatar_url:null},user_liked:v.has(w.id),children:[]})),y=b6(x,v);return RC(y,t),y}}),i=mt({mutationFn:async({body:u,parentId:d})=>{if(!r)throw new Error("Must be logged in");const{error:h}=await P.from("wall_comments").insert({post_id:e,user_id:r.id,body:u,parent_id:d??null});if(h)throw h},onSuccess:()=>n.invalidateQueries({queryKey:["wall-comments",e]})}),o=mt({mutationFn:async({commentId:u,body:d})=>{if(!r)throw new Error("Must be logged in");const{error:h}=await P.from("wall_comments").update({body:d}).eq("id",u).eq("user_id",r.id);if(h)throw h},onSuccess:()=>n.invalidateQueries({queryKey:["wall-comments",e]})}),l=mt({mutationFn:async u=>{if(!r)throw new Error("Must be logged in");const{error:d}=await P.from("wall_comments").delete().eq("id",u).eq("user_id",r.id);if(d)throw d},onSuccess:()=>n.invalidateQueries({queryKey:["wall-comments",e]})}),c=mt({mutationFn:async({commentId:u,liked:d})=>{if(!r)throw new Error("Must be logged in");if(d){const{error:h}=await P.from("comment_likes").delete().eq("comment_id",u).eq("user_id",r.id);if(h)throw h}else{const{error:h}=await P.from("comment_likes").insert({comment_id:u,user_id:r.id});if(h)throw h}},onSuccess:()=>n.invalidateQueries({queryKey:["wall-comments",e]})});return{comments:s.data||[],isLoading:s.isLoading,addComment:i.mutateAsync,updateComment:o.mutateAsync,deleteComment:l.mutateAsync,toggleLike:c.mutateAsync,isUpdating:i.isPending||o.isPending||l.isPending||c.isPending}}function PC({comment:e,onReply:t,onEdit:r,onDelete:n,onToggleLike:s,currentUserId:i,depth:o=0}){const[l,c]=f.useState(!1),[u,d]=f.useState(!1),[h,p]=f.useState(""),[m,b]=f.useState(e.body),[g,v]=f.useState(5),x=e.profile.display_name||"Anonymous",y=x.slice(0,2).toUpperCase(),w=i===e.user_id,_=e.updated_at!==e.created_at,j=async()=>{h.trim()&&(await t(e.id,h.trim()),p(""),c(!1))},S=async()=>{m.trim()&&(await r(e.id,m.trim()),d(!1))};return a.jsxs("div",{className:H("space-y-2",o>0&&"border-l border-border/50 pl-4"),children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(ln,{className:"h-8 w-8",children:[a.jsx(cn,{src:e.profile.avatar_url||void 0}),a.jsx(un,{className:"bg-primary/10 text-primary text-xs",children:y})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx("span",{className:"font-medium text-foreground",children:x}),a.jsx("span",{children:Bi(new Date(e.created_at),{addSuffix:!0})}),_&&a.jsx("span",{children:"(edited)"})]}),u?a.jsxs("div",{className:"space-y-2 mt-2",children:[a.jsx(Wt,{value:m,onChange:N=>b(N.target.value),rows:2}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(M,{size:"sm",onClick:S,children:"Save"}),a.jsx(M,{size:"sm",variant:"outline",onClick:()=>d(!1),children:"Cancel"})]})]}):a.jsx("p",{className:"text-sm mt-1 whitespace-pre-wrap",children:e.body}),a.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs",children:[a.jsxs(M,{variant:"ghost",size:"sm",className:e.user_liked?"text-red-500":"",onClick:()=>s(e.id,e.user_liked),children:[a.jsx(qt,{className:H("h-3 w-3 mr-1",e.user_liked&&"fill-current")}),e.likes_count]}),a.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>c(!l),children:[a.jsx(_P,{className:"h-3 w-3 mr-1"})," Reply"]}),w&&a.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>d(!u),children:[a.jsx(jj,{className:"h-3 w-3 mr-1"})," Edit"]}),w&&a.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>n(e.id),children:[a.jsx(Xu,{className:"h-3 w-3 mr-1"})," Delete"]})]}),l&&a.jsxs("div",{className:"space-y-2 mt-2",children:[a.jsx(Wt,{value:h,onChange:N=>p(N.target.value),placeholder:"Write a reply...",rows:2}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(M,{size:"sm",onClick:j,children:"Reply"}),a.jsx(M,{size:"sm",variant:"outline",onClick:()=>c(!1),children:"Cancel"})]})]})]})]}),e.children.length>0&&a.jsxs("div",{className:"space-y-3",children:[e.children.slice(0,g).map(N=>a.jsx(PC,{comment:N,onReply:t,onEdit:r,onDelete:n,onToggleLike:s,currentUserId:i,depth:o+1},N.id)),e.children.length>g&&a.jsxs(M,{variant:"outline",size:"sm",onClick:()=>v(N=>N+5),children:["Load more replies (",e.children.length-g,")"]})]})]})}function j6({postId:e}){const{user:t}=ke(),[r,n]=f.useState("top"),{comments:s,isLoading:i,addComment:o,updateComment:l,deleteComment:c,toggleLike:u}=_6(e,r),[d,h]=f.useState(""),p=async()=>{d.trim()&&(await o({body:d.trim(),parentId:null}),h(""))};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-sm font-medium",children:"Comments"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(M,{variant:r==="top"?"default":"outline",size:"sm",onClick:()=>n("top"),children:"Top"}),a.jsx(M,{variant:r==="latest"?"default":"outline",size:"sm",onClick:()=>n("latest"),children:"Latest"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Wt,{value:d,onChange:m=>h(m.target.value),placeholder:t?"Join the discussion...":"Sign in to comment",rows:3,disabled:!t}),a.jsx(M,{onClick:p,disabled:!t||!d.trim(),children:"Post Comment"})]}),i?a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading comments..."}):s.length===0?a.jsx("p",{className:"text-sm text-muted-foreground",children:"No comments yet. Be the first!"}):a.jsx("div",{className:"space-y-4",children:s.map(m=>a.jsx(PC,{comment:m,onReply:async(b,g)=>o({body:g,parentId:b}),onEdit:async(b,g)=>l({commentId:b,body:g}),onDelete:c,onToggleLike:(b,g)=>u({commentId:b,liked:g}),currentUserId:t==null?void 0:t.id},m.id))})]})}const S6={blend:_j,protein:pP,stack:Sg},N6={blend:"bg-purple-500/10 text-purple-500",protein:"bg-green-500/10 text-green-500",stack:"bg-blue-500/10 text-blue-500"};function k6(){const{postId:e}=wo(),{user:t,isLoading:r}=ke(),{toast:n}=Ot(),s=Lt(),{bookmarks:i,isLoading:o,toggleBookmark:l,isUpdating:c}=w6(),u=f.useMemo(()=>i.map(v=>v.post_id),[i]),d=f.useMemo(()=>new Set(u),[u]);if(r)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})});if(!t)return a.jsx(Dl,{to:"/auth",replace:!0});if(!e)return a.jsx(Dl,{to:"/wall",replace:!0});const h=["wall-post",e,t==null?void 0:t.id,u],{data:p,isLoading:m}=Be({queryKey:h,enabled:!!e&&!!t&&!o,queryFn:async()=>{const{data:v,error:x}=await P.from("wall_posts").select("id, user_id, recipe_id, caption, likes_count, created_at").eq("id",e).single();if(x)throw x;const[y,w,_,j]=await Promise.all([P.from("user_recipes").select("id, name, recipe_type, items, analysis, visibility").eq("id",v.recipe_id).single(),P.from("profiles").select("user_id, display_name, avatar_url").eq("user_id",v.user_id).single(),P.from("post_likes").select("post_id").eq("post_id",e).eq("user_id",t.id),P.from("recipe_tags").select("recipe_id, tag_id").eq("recipe_id",v.recipe_id)]),S=j.data||[],N=[...new Set(S.map(R=>R.tag_id))],{data:k}=N.length>0?await P.from("tags").select("id, slug").in("id",N):{data:[]};return{...v,recipe:y.data||{id:"",name:"Unknown",recipe_type:"blend",items:[],analysis:null,visibility:"public"},profile:w.data||{display_name:null,avatar_url:null},tags:k||[],user_liked:(_.data||[]).length>0,user_bookmarked:d.has(v.id)}}}),b=mt({mutationFn:async({liked:v})=>{if(!t)throw new Error("Must be logged in");v?await P.from("post_likes").delete().eq("post_id",e).eq("user_id",t.id):await P.from("post_likes").insert({post_id:e,user_id:t.id})},onMutate:async({liked:v})=>{await s.cancelQueries({queryKey:h});const x=s.getQueryData(h);return x&&s.setQueryData(h,{...x,user_liked:!v,likes_count:v?x.likes_count-1:x.likes_count+1}),{previousPost:x}},onError:(v,x,y)=>{s.setQueryData(h,y==null?void 0:y.previousPost),n({title:"Error",description:"Failed to update like. Please try again.",variant:"destructive"})}}),g=async v=>{try{await l({postId:e,bookmarked:v}),s.invalidateQueries({queryKey:h})}catch(x){n({title:"Failed to update bookmark",description:x instanceof Error?x.message:"Please try again",variant:"destructive"})}};return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[a.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent/5 rounded-full blur-3xl"})]}),a.jsx(Nt,{}),a.jsxs("main",{className:"max-w-3xl mx-auto px-4 py-8",children:[m?a.jsx(ee,{children:a.jsx(se,{className:"py-12 text-center text-muted-foreground",children:"Loading post..."})}):p?a.jsxs(ee,{children:[a.jsxs(Ge,{className:"flex flex-row items-center gap-3 pb-2",children:[a.jsxs(ln,{className:"h-10 w-10",children:[a.jsx(cn,{src:p.profile.avatar_url||void 0}),a.jsx(un,{className:"bg-primary/10 text-primary text-sm",children:(p.profile.display_name||"Anonymous").slice(0,2).toUpperCase()})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-sm",children:p.profile.display_name||"Anonymous"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:Bi(new Date(p.created_at),{addSuffix:!0})})]}),a.jsxs(Ie,{variant:"secondary",className:N6[p.recipe.recipe_type],children:[(()=>{const v=S6[p.recipe.recipe_type];return a.jsx(v,{className:"h-3 w-3 mr-1"})})(),p.recipe.recipe_type]})]}),a.jsxs(se,{className:"space-y-3",children:[a.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[a.jsx("h3",{className:"font-semibold",children:p.recipe.name}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[Array.isArray(p.recipe.items)?p.recipe.items.length:0," ingredient",Array.isArray(p.recipe.items)&&p.recipe.items.length!==1?"s":""]}),p.caption&&a.jsx("p",{className:"text-sm pt-2 border-t border-border/50",children:p.caption})]}),p.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:p.tags.map(v=>a.jsx(be,{to:`/tags?q=${v.slug}`,children:a.jsxs(Ie,{variant:"outline",className:"text-xs hover:border-primary hover:text-primary",children:["#",v.slug]})},v.id))})]}),a.jsxs(oh,{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4 w-full",children:[a.jsxs(M,{variant:"ghost",size:"sm",className:p.user_liked?"text-red-500":"",onClick:()=>b.mutate({liked:p.user_liked}),children:[a.jsx(qt,{className:`h-4 w-4 mr-1 ${p.user_liked?"fill-current":""}`}),p.likes_count]}),a.jsxs(M,{variant:"ghost",size:"sm",className:p.user_bookmarked?"text-primary":"",onClick:()=>g(p.user_bookmarked),disabled:c,children:[a.jsx(uP,{className:`h-4 w-4 mr-1 ${p.user_bookmarked?"fill-current":""}`}),"Save"]})]}),a.jsx(j6,{postId:p.id})]})]}):a.jsx(ee,{children:a.jsx(se,{className:"py-12 text-center text-muted-foreground",children:"Post not found."})}),a.jsx(pn,{})]})]})}const Cu="id, title, prompt_inventory, prompt_categories, generated_schema, review_sections, include_score, creator_user_id, is_public, likes_count, created_at, updated_at";async function C6(e,t){const r=Ov(e);if(r.length===0)return[];const{data:n,error:s}=await P.from("tags").select("id, slug").in("slug",r);if(s)throw s;const i=n||[],o=new Set(i.map(u=>u.slug)),l=r.filter(u=>!o.has(u));let c=[];if(l.length>0){const{data:u,error:d}=await P.from("tags").insert(l.map(h=>({slug:h,created_by:t}))).select("id, slug");if(d)throw d;c=u||[]}return[...i,...c]}async function wm(e,t){if(e.length===0)return[];const r=e.map(m=>m.id),[n,s,i]=await Promise.all([P.from("inventory_tags").select("inventory_id, tag_id").in("inventory_id",r),t?P.from("inventory_likes").select("inventory_id").eq("user_id",t).in("inventory_id",r):Promise.resolve({data:[]}),P.from("blueprints").select("inventory_id").in("inventory_id",r)]),o=n.data||[],l=[...new Set(o.map(m=>m.tag_id))],{data:c}=l.length>0?await P.from("tags").select("id, slug").in("id",l):{data:[]},u=new Map((c||[]).map(m=>[m.id,m])),d=new Map;o.forEach(m=>{const b=u.get(m.tag_id);if(!b)return;const g=d.get(m.inventory_id)||[];g.push(b),d.set(m.inventory_id,g)});const h=new Set((s.data||[]).map(m=>m.inventory_id)),p=new Map;return(i.data||[]).forEach(m=>{m.inventory_id&&p.set(m.inventory_id,(p.get(m.inventory_id)||0)+1)}),e.map(m=>({...m,tags:d.get(m.id)||[],user_liked:h.has(m.id),is_owner:t===m.creator_user_id,blueprint_count:p.get(m.id)||0}))}function E6(e){const{user:t}=ke();return Be({queryKey:["inventory-search",e,t==null?void 0:t.id],queryFn:async()=>{const r=e.trim();let n=[];if(!r){let c=P.from("inventories").select(Cu).order("likes_count",{ascending:!1}).limit(60);t!=null&&t.id?c=c.or(`is_public.eq.true,creator_user_id.eq.${t.id}`):c=c.eq("is_public",!0);const{data:u,error:d}=await c;if(d)throw d;return n=u||[],wm(n,t==null?void 0:t.id)}const s=dn(r),i=[];if(s){const{data:c}=await P.from("tags").select("id").eq("slug",s).maybeSingle();if(c!=null&&c.id){const{data:u}=await P.from("inventory_tags").select("inventory_id").eq("tag_id",c.id),d=(u||[]).map(h=>h.inventory_id);if(d.length>0){const{data:h}=await P.from("inventories").select(Cu).in("id",d).order("likes_count",{ascending:!1});i.push(...h||[])}}}const{data:o}=await P.from("inventories").select(Cu).ilike("title",`%${r}%`).order("likes_count",{ascending:!1});return o&&i.push(...o),n=Array.from(new Map(i.map(c=>[c.id,c])).values()),wm(n,t==null?void 0:t.id)}})}function Yv(e){const{user:t}=ke();return Be({queryKey:["inventory",e,t==null?void 0:t.id],enabled:!!e,queryFn:async()=>{const{data:r,error:n}=await P.from("inventories").select(Cu).eq("id",e).single();if(n)throw n;return r?(await wm([r],t==null?void 0:t.id))[0]??null:null}})}function AC(){const e=Lt(),{user:t}=ke();return mt({mutationFn:async({inventoryId:r,liked:n})=>{if(!(t!=null&&t.id))throw new Error("Must be logged in");if(n){const{error:s}=await P.from("inventory_likes").delete().eq("inventory_id",r).eq("user_id",t.id);if(s)throw s}else{const{error:s}=await P.from("inventory_likes").insert({inventory_id:r,user_id:t.id});if(s)throw s}},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory-search"]}),e.invalidateQueries({queryKey:["inventory"]})}})}function T6(){const e=Lt(),{user:t}=ke();return mt({mutationFn:async r=>{if(!(t!=null&&t.id))throw new Error("Must be logged in");const{data:n,error:s}=await P.from("inventories").insert({title:r.title,prompt_inventory:r.promptInventory,prompt_categories:r.promptCategories,generated_schema:r.generatedSchema,review_sections:r.reviewSections,include_score:r.includeScore,creator_user_id:t.id,is_public:r.isPublic}).select("id").single();if(s)throw s;const i=await C6(r.tags,t.id);if(i.length>0){const{error:o}=await P.from("inventory_tags").insert(i.map(l=>({inventory_id:n.id,tag_id:l.id})));if(o)throw o}return r.sourceInventoryId&&await P.from("inventory_remixes").insert({inventory_id:n.id,source_inventory_id:r.sourceInventoryId,user_id:t.id}),n},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory-search"]})}})}function R6(){const e=Lt(),{user:t}=ke();return mt({mutationFn:async r=>{if(!(t!=null&&t.id))throw new Error("Must be logged in");const{error:n}=await P.from("inventories").update({review_sections:r.reviewSections,include_score:r.includeScore}).eq("id",r.inventoryId).eq("creator_user_id",t.id);if(n)throw n},onSuccess:(r,n)=>{e.invalidateQueries({queryKey:["inventory",n.inventoryId]}),e.invalidateQueries({queryKey:["inventory-search"]})}})}const u0="id, title, prompt_inventory, prompt_categories, generated_schema, review_sections, include_score, creator_user_id, is_public, likes_count, created_at, updated_at";function P6(e=6){const{user:t}=ke();return Be({queryKey:["suggested-inventories",t==null?void 0:t.id,e],queryFn:async()=>{let r=[];if(t!=null&&t.id){const{data:g}=await P.from("inventory_likes").select("inventory_id").eq("user_id",t.id),v=(g||[]).map(x=>x.inventory_id);if(v.length>0){const{data:x}=await P.from("inventory_tags").select("tag_id").in("inventory_id",v);r=[...new Set((x||[]).map(y=>y.tag_id))]}}let n=[];if(r.length>0&&(t!=null&&t.id)){const{data:g}=await P.from("inventory_tags").select("inventory_id").in("tag_id",r),v=[...new Set((g||[]).map(_=>_.inventory_id))],{data:x}=await P.from("inventory_likes").select("inventory_id").eq("user_id",t.id),y=new Set((x||[]).map(_=>_.inventory_id)),w=v.filter(_=>!y.has(_));if(w.length>0){const{data:_}=await P.from("inventories").select(u0).in("id",w).eq("is_public",!0).order("likes_count",{ascending:!1}).limit(e);n=_||[]}}if(n.length<e){const g=n.map(y=>y.id),{data:v}=await P.from("inventories").select(u0).eq("is_public",!0).order("likes_count",{ascending:!1}).limit(e*2),x=(v||[]).filter(y=>!g.includes(y.id)).slice(0,e-n.length);n=[...n,...x]}if(n.length===0)return[];const s=n.map(g=>g.id),[i,o,l]=await Promise.all([P.from("inventory_tags").select("inventory_id, tag_id").in("inventory_id",s),t!=null&&t.id?P.from("inventory_likes").select("inventory_id").eq("user_id",t.id).in("inventory_id",s):Promise.resolve({data:[]}),P.from("blueprints").select("inventory_id").in("inventory_id",s)]),c=i.data||[],u=[...new Set(c.map(g=>g.tag_id))],{data:d}=u.length>0?await P.from("tags").select("id, slug").in("id",u):{data:[]},h=new Map((d||[]).map(g=>[g.id,g])),p=new Map;c.forEach(g=>{const v=h.get(g.tag_id);if(!v)return;const x=p.get(g.inventory_id)||[];x.push(v),p.set(g.inventory_id,x)});const m=new Set((o.data||[]).map(g=>g.inventory_id)),b=new Map;return(l.data||[]).forEach(g=>{g.inventory_id&&b.set(g.inventory_id,(b.get(g.inventory_id)||0)+1)}),n.map(g=>({...g,tags:p.get(g.id)||[],user_liked:m.has(g.id),is_owner:(t==null?void 0:t.id)===g.creator_user_id,blueprint_count:b.get(g.id)||0}))},staleTime:2*60*1e3})}function A6({inventory:e,onLike:t}){const r=e.tags.slice(0,3),n=e.tags.length-3;return a.jsx(be,{to:`/inventory/${e.id}/build`,className:"block group",children:a.jsx(ee,{className:"h-full bg-card/60 backdrop-blur-sm border-border/50 transition-all duration-300 hover:border-border/80 hover:shadow-md hover:shadow-black/5 group-focus-visible:ring-2 group-focus-visible:ring-primary",children:a.jsxs(se,{className:"p-5 flex flex-col h-full",children:[a.jsx("h3",{className:"font-semibold text-lg line-clamp-1 mb-1",children:e.title}),a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3 flex-grow",children:e.prompt_inventory}),e.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[r.map(s=>a.jsxs(Ie,{variant:"secondary",className:"text-xs",children:["#",s.slug]},s.id)),n>0&&a.jsxs(Ie,{variant:"outline",className:"text-xs text-muted-foreground",children:["+",n," more"]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border/50",children:[a.jsx("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:a.jsxs("span",{className:"flex items-center gap-1",title:"Blueprints using this library",children:[a.jsx(mP,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:e.blueprint_count})]})}),a.jsxs(M,{variant:"ghost",size:"sm",className:`h-8 px-2 ${e.user_liked?"text-red-500 hover:text-red-600":"text-muted-foreground hover:text-foreground"}`,onClick:s=>{s.preventDefault(),s.stopPropagation(),t(e.id,e.user_liked)},"aria-label":e.user_liked?"Unlike library":"Like library",children:[a.jsx(qt,{className:`h-4 w-4 ${e.user_liked?"fill-current":""}`}),a.jsx("span",{className:"ml-1 text-xs",children:e.likes_count})]})]})]})})})}function I6(){const[e,t]=f.useState(""),[r,n]=f.useState(null),[s,i]=f.useState(!1),{user:o}=ke(),{toast:l}=Ot(),c=f.useRef(!1),u=r||e;f.useEffect(()=>{c.current||(c.current=!0,gr({eventName:"view_library",userId:o==null?void 0:o.id,path:window.location.pathname}))},[o==null?void 0:o.id]);const{data:d,isLoading:h}=E6(u),{data:p=[],isLoading:m}=Jk(12),{data:b=[],isLoading:g}=P6(6),v=AC(),x=new Set(b.map(N=>N.id)),y=f.useMemo(()=>d?u?d:d.filter(N=>!x.has(N.id)):[],[d,x,u]),w=async(N,k)=>{if(!o){l({title:"Sign in required",description:"Please sign in to like inventories.",variant:"destructive"});return}try{await v.mutateAsync({inventoryId:N,liked:k})}catch(R){l({title:"Action failed",description:R instanceof Error?R.message:"Please try again.",variant:"destructive"})}},_=N=>{n(N),N&&t("")},j=!u&&o,S=f.useMemo(()=>!j||!b||b.length===0||g?y:[...b,...y],[j,b,g,y]);return a.jsxs("div",{className:"min-h-screen bg-background relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute top-1/3 -left-20 w-60 h-60 bg-accent/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-20 right-1/4 w-40 h-40 bg-primary/3 rounded-full blur-2xl"})]}),a.jsx(Nt,{}),a.jsxs("main",{className:"relative max-w-4xl mx-auto px-4 py-8 space-y-6",children:[a.jsxs("section",{className:"space-y-3",children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:"Library"}),a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Pick a library, then build your blueprint"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Browse collections of items, open one, then start shaping your routine step by step."})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(M,{variant:"ghost",size:"sm",onClick:()=>i(N=>!N),children:"What is a Library?"}),a.jsx(be,{to:"/inventory/create",children:a.jsxs(M,{size:"sm",className:"gap-2",children:[a.jsx(zd,{className:"h-4 w-4"}),"Create"]})})]})]}),s&&a.jsx("div",{className:"rounded-xl border border-border/50 bg-card/50 backdrop-blur-sm p-4 text-sm text-muted-foreground leading-relaxed",children:a.jsx("p",{children:"Think of a Library as a curated list of items you can use to build a routine. It is the ingredient shelf for a blueprint. Each library is organized into categories so you can scan quickly. You do not have to use everything; it is a toolbox, not a checklist. Good libraries save time by gathering the best options in one place. When you open a library, you can pick items that fit your goal. As you select items, you start shaping a blueprint. Libraries can be public so others can learn from them. You can also create your own library if something is missing. Start simple, then refine as you learn what works for you."})})]}),a.jsx(ee,{className:"bg-card/60 backdrop-blur-sm border-border/50",children:a.jsxs(se,{className:"p-4 flex flex-col gap-3 sm:flex-row sm:items-center",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(ho,{className:"h-4 w-4 text-muted-foreground shrink-0"}),a.jsx(Ue,{value:e,onChange:N=>{t(N.target.value),N.target.value&&n(null)},placeholder:"Search libraries by title or tag...",className:"border-none shadow-none focus-visible:ring-0 bg-transparent"})]}),a.jsxs(xC,{children:[a.jsx(wC,{asChild:!0,children:a.jsxs(M,{variant:"outline",size:"sm",className:"gap-2",children:[a.jsx(bj,{className:"h-4 w-4"}),"Filters"]})}),a.jsxs(qv,{side:"right",className:"w-full sm:max-w-md",children:[a.jsxs(Wv,{children:[a.jsx(Vv,{children:"Filters"}),a.jsx(Hv,{children:"Filter by tag to narrow down libraries."})]}),a.jsx("div",{className:"mt-6 space-y-4",children:!m&&p.length>0?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm font-semibold",children:"Popular tags"}),a.jsx(yC,{tags:p,selectedTag:r,onSelectTag:_,variant:"wrap"})]}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading tags"})})]})]})]})}),a.jsxs("section",{className:"space-y-4",children:[u?a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("h2",{className:"text-sm font-semibold text-muted-foreground",children:["Results for ",a.jsxs("span",{className:"text-foreground",children:['"',u,'"']})]}),a.jsx(M,{variant:"ghost",size:"sm",className:"text-muted-foreground",onClick:()=>{t(""),n(null)},children:"Clear"})]}):a.jsx("h2",{className:"text-sm font-semibold text-muted-foreground",children:"Popular libraries"}),h?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Array.from({length:6}).map((N,k)=>a.jsx(ee,{className:"bg-card/60 backdrop-blur-sm border-border/50",children:a.jsxs(se,{className:"p-5 space-y-3",children:[a.jsx(Ae,{className:"h-5 w-3/4"}),a.jsx(Ae,{className:"h-10 w-full"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ae,{className:"h-5 w-16"}),a.jsx(Ae,{className:"h-5 w-20"})]}),a.jsx(Ae,{className:"h-4 w-full"})]})},k))}):S.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:S.map(N=>a.jsx(A6,{inventory:N,onLike:w},N.id))}):a.jsx(ee,{className:"bg-card/60 backdrop-blur-sm",children:a.jsxs(se,{className:"py-12 text-center space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"No libraries found"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:u?"Try a different search or clear filters.":"Be the first to create a library!"}),a.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:u?a.jsx(M,{variant:"outline",onClick:()=>{t(""),n(null)},children:"Clear search"}):a.jsx(be,{to:"/inventory/create",children:a.jsx(M,{children:"Create Library"})})})]})})]}),a.jsx(pn,{})]})]})}function Qv({value:e,onChange:t,suggestions:r=[],maxTags:n=Xk,disabled:s}){const[i,o]=f.useState(""),l=e.length<n,c=f.useMemo(()=>{const p=dn(i);return p?r.filter(m=>m.includes(p)).filter(m=>!e.includes(m)).slice(0,6):[]},[i,r,e]),u=p=>{if(!l)return;const m=dn(p);!m||e.includes(m)||(t([...e,m].slice(0,n)),o(""))},d=p=>{t(e.filter(m=>m!==p))},h=p=>{(p.key==="Enter"||p.key===",")&&(p.preventDefault(),i.trim()&&u(i))};return a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex flex-wrap gap-2",children:e.map(p=>a.jsxs(Ie,{variant:"secondary",className:"gap-1",children:["#",p,a.jsx(M,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4",onClick:()=>d(p),disabled:s,children:a.jsx(Vt,{className:"h-3 w-3"})})]},p))}),a.jsx(Ue,{value:i,onChange:p=>o(p.target.value),onKeyDown:h,placeholder:l?"Add tag (press Enter)":"Tag limit reached",disabled:s||!l}),c.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(p=>a.jsxs(M,{type:"button",variant:"outline",size:"sm",onClick:()=>u(p),disabled:s,children:["#",p]},p))})]})}const Hl="inventory_create_tour_completed",qo=[{targetId:"keywords",title:"Describe Your Library",description:'Enter a few words like "skincare routine" or "smoothie ingredients".'},{targetId:"generate",title:"Generate with AI",description:"Click Generate to create categories and items automatically."},{targetId:"edit-categories",title:"Review & Edit",description:"Rename categories, add items, or remove what you don't need."},{targetId:"publish",title:"Create & Build",description:"Publish your library and start creating blueprints!"}];function O6({isActive:e,onComplete:t,onSkip:r}){const[n,s]=f.useState(0),[i,o]=f.useState(null),l=qo[n],c=f.useCallback(()=>{if(!l)return;const p=document.querySelector(`[data-help-id="${l.targetId}"]`);o(p?p.getBoundingClientRect():null)},[l]);f.useEffect(()=>{if(e)return c(),window.addEventListener("resize",c),window.addEventListener("scroll",c),()=>{window.removeEventListener("resize",c),window.removeEventListener("scroll",c)}},[e,c,n]),f.useEffect(()=>{if(!e)return;const p=m=>{m.key==="Escape"?r():(m.key==="ArrowRight"||m.key==="Enter")&&u()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e,n,r]);const u=f.useCallback(()=>{n<qo.length-1?s(p=>p+1):(localStorage.setItem(Hl,"true"),t())},[n,t]),d=f.useCallback(()=>{localStorage.setItem(Hl,"true"),r()},[r]);if(!e||!l)return null;const h=(()=>{if(!i)return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};const p=window.innerHeight,m=window.innerWidth,b=320,g=180,v=16;let x=i.bottom+v,y=i.left+i.width/2-b/2;return x+g>p-20&&(x=i.top-g-v),y<20&&(y=20),y+b>m-20&&(y=m-b-20),{top:`${x}px`,left:`${y}px`}})();return hn.createPortal(a.jsxs("div",{className:"fixed inset-0 z-50",children:[a.jsx("div",{className:"absolute inset-0",children:a.jsxs("svg",{className:"w-full h-full",children:[a.jsx("defs",{children:a.jsxs("mask",{id:"inventory-spotlight-mask",children:[a.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),i&&a.jsx("rect",{x:i.left-8,y:i.top-8,width:i.width+16,height:i.height+16,rx:"12",fill:"black"})]})}),a.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"hsl(var(--background) / 0.8)",mask:"url(#inventory-spotlight-mask)",className:"animate-in fade-in duration-300"})]})}),i&&a.jsx("div",{className:"absolute rounded-xl border-2 border-orange-500 shadow-[0_0_20px_rgba(249,115,22,0.4)] pointer-events-none animate-pulse",style:{left:i.left-8,top:i.top-8,width:i.width+16,height:i.height+16}}),a.jsx(ee,{className:"fixed w-80 bg-card border-border shadow-lg animate-in slide-in-from-bottom-2 duration-300 z-10",style:h,children:a.jsxs(se,{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"font-semibold",children:l.title}),a.jsx("p",{className:"text-sm text-muted-foreground",children:l.description})]}),a.jsx(M,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:d,children:a.jsx(Vt,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex gap-1.5",children:qo.map((p,m)=>a.jsx("div",{className:H("h-1.5 w-1.5 rounded-full transition-colors",m===n?"bg-orange-500":"bg-muted-foreground/30")},m))}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(M,{variant:"ghost",size:"sm",onClick:d,children:"Skip"}),a.jsxs(M,{size:"sm",onClick:u,className:"gap-1",children:[n===qo.length-1?"Done":"Next",n<qo.length-1&&a.jsx(Ng,{className:"h-4 w-4"})]})]})]})]})})]}),document.body)}function M6({onStartTour:e,onDismiss:t}){const[r,n]=f.useState(()=>localStorage.getItem(Hl)==="true");return r?null:a.jsxs("div",{className:"rounded-xl border border-orange-500/30 bg-orange-500/5 p-4 flex items-center justify-between gap-4 animate-in fade-in slide-in-from-top-2 duration-300",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-orange-500/10 flex items-center justify-center",children:a.jsx(Yn,{className:"h-5 w-5 text-orange-500"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"New here?"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Take a quick tour to learn how to create inventories."})]})]}),a.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[a.jsx(M,{variant:"ghost",size:"sm",onClick:()=>{n(!0),localStorage.setItem(Hl,"true"),t()},children:"Maybe later"}),a.jsxs(M,{size:"sm",onClick:e,className:"gap-2 bg-orange-500 hover:bg-orange-600 text-white",children:[a.jsx(Yn,{className:"h-4 w-4"}),"Take Tour"]})]})]})}function D6(){return localStorage.getItem(Hl)==="true"}function L6({onClick:e}){return a.jsx(M,{type:"button",variant:"ghost",size:"icon",onClick:e,className:"h-9 w-9 rounded-full","aria-label":"Take a tour",title:"Take a tour",children:a.jsx(Yn,{className:"h-4 w-4"})})}const $6=[{id:"keywords",text:"Describe what kind of library you want to create"},{id:"generate",text:"AI generates categories and items for you"},{id:"advanced-options",text:"Customize how AI generates your library"},{id:"edit-categories",text:"Rename, add, or remove categories and items"},{id:"tags",text:"Help others discover your library with tags"},{id:"publish",text:"Create your library and start building"}];function F6({isOpen:e,onClose:t,onStartTour:r}){const[n,s]=f.useState([]),i=f.useCallback(()=>{const o=[];$6.forEach(({id:l,text:c})=>{const u=document.querySelector(`[data-help-id="${l}"]`);if(!u)return;const d=u.getBoundingClientRect(),h=window.innerWidth,p=window.innerHeight;let m="right",b=d.right+12,g=d.top+d.height/2;d.right+200>h&&(d.left>200?(m="left",b=d.left-12):(m="bottom",b=d.left+d.width/2,g=d.bottom+12)),(m==="left"||m==="right")&&(g<50&&(g=50),g>p-50&&(g=p-50)),o.push({id:l,text:c,x:b,y:g,side:m})}),s(o)},[]);return f.useEffect(()=>{if(e){const o=setTimeout(i,100);return()=>clearTimeout(o)}},[e,i]),f.useEffect(()=>{if(!e)return;const o=l=>{l.key==="Escape"&&t()};return window.addEventListener("keydown",o),window.addEventListener("resize",i),()=>{window.removeEventListener("keydown",o),window.removeEventListener("resize",i)}},[e,t,i]),e?hn.createPortal(a.jsxs("div",{className:"fixed inset-0 z-50",children:[a.jsx("div",{className:"absolute inset-0 bg-background/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:t}),n.map(o=>a.jsxs("div",{className:H("fixed z-50 max-w-[200px] rounded-lg bg-foreground text-background px-3 py-2 text-sm shadow-lg animate-in fade-in zoom-in-95 duration-200",o.side==="left"&&"-translate-x-full",o.side==="top"&&"-translate-y-full -translate-x-1/2",o.side==="bottom"&&"-translate-x-1/2",(o.side==="left"||o.side==="right")&&"-translate-y-1/2"),style:{left:o.x,top:o.y},children:[o.text,a.jsx("div",{className:H("absolute w-2 h-2 bg-foreground rotate-45",o.side==="right"&&"-left-1 top-1/2 -translate-y-1/2",o.side==="left"&&"-right-1 top-1/2 -translate-y-1/2",o.side==="bottom"&&"-top-1 left-1/2 -translate-x-1/2",o.side==="top"&&"-bottom-1 left-1/2 -translate-x-1/2")})]},o.id)),a.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 bg-card border border-border rounded-2xl shadow-lg p-4 animate-in slide-in-from-bottom-4 duration-300",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(lc,{className:"h-4 w-4"}),a.jsx("span",{children:"Hover over highlighted elements"})]}),a.jsx("div",{className:"h-4 w-px bg-border"}),a.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>{t(),r()},className:"gap-2",children:[a.jsx(Yn,{className:"h-4 w-4"}),"Take a tour"]}),a.jsx(M,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8",children:a.jsx(Vt,{className:"h-4 w-4"})})]})})]}),document.body):null}function U6({onClick:e}){return a.jsx(M,{type:"button",variant:"outline",size:"icon",onClick:e,className:"h-9 w-9 rounded-full border-dashed","aria-label":"Show help",children:a.jsx(lc,{className:"h-4 w-4"})})}function Ma(e,t){const n=(e instanceof Error?e.message:String(e??"")).toLowerCase();return n.includes("unauthorized")||n.includes("auth")?"Please sign in again and try that request.":n.includes("daily ai credits")||n.includes("credits used")?"You have used todays AI credits. Try again tomorrow.":n.includes("capacity")||n.includes("at capacity")?"High AI activity. Please try again in a minute.":n.includes("rate limit")||n.includes("too many")?"Youre doing that a bit fast. Please wait a moment and try again.":n.includes("failed to fetch")||n.includes("network")?"We could not reach the server. Check your connection and try again.":n.includes("storage")?"We could not upload the banner. Please try again in a moment.":t}const B6=8;function z6(e){return e?`stacklab-recent-tags:${e}`:null}function q6(e){if(!e)return[];try{const t=localStorage.getItem(e);if(!t)return[];const r=JSON.parse(t);if(Array.isArray(r))return r}catch{return[]}return[]}function W6(e,t){if(e)try{localStorage.setItem(e,JSON.stringify(t))}catch{}}function Jv(){const{user:e}=ke(),t=f.useMemo(()=>z6(e==null?void 0:e.id),[e==null?void 0:e.id]),[r,n]=f.useState([]);f.useEffect(()=>{n(q6(t))},[t]);const s=f.useCallback(i=>{if(!t)return[];const o=Ov(i);if(o.length===0)return r;const l=[...o,...r.filter(c=>!o.includes(c))].slice(0,B6);return n(l),W6(t,l),l},[t,r]);return{recentTags:r,addRecentTags:s}}const Bs="Overview",V6=["Overview","Strengths","Gaps","Suggestions"],Xv=V6.filter(e=>e!==Bs),Kl=4,fl=Kl-1;function xd(e){const t=e.trim().replace(/\s+/g," ");return t?t.replace(/\b\w/g,r=>r.toUpperCase()):""}function Zv(e){if(!Array.isArray(e))return[];const t=[];for(const r of e){if(typeof r!="string")continue;const n=xd(r);n&&n.toLowerCase()!==Bs.toLowerCase()&&(t.some(s=>s.toLowerCase()===n.toLowerCase())||t.push(n))}return t}function ey(e){const t=e==null?Xv:Zv(e);return[Bs,...t]}const H6="https://piszvseyaefxekubphhf.supabase.co/functions/v1/generate-inventory",K6="https://bapi.vdsai.cloud",G6=!0,d0=`${K6.replace(/\/$/,"")}/api/generate-inventory`,Y6=d0||H6;function Q6(){const e=es(),{toast:t}=Ot(),{session:r,isLoading:n}=ke(),s=T6(),{data:i}=Gv(),{recentTags:o,addRecentTags:l}=Jv(),[c,u]=f.useState(""),[d,h]=f.useState(""),[p,m]=f.useState(!1),[b,g]=f.useState([]),[v,x]=f.useState(""),[y,w]=f.useState(""),[_,j]=f.useState(!1),[S,N]=f.useState(""),[k,R]=f.useState(""),[I,D]=f.useState(null),[A,$]=f.useState([]),[O,X]=f.useState(!0),U=5,J=6,[T,E]=f.useState(!1),[B,re]=f.useState(!1),[Y,fe]=f.useState(()=>!D6()),q=f.useMemo(()=>I?I.categories.map(K=>K.name.trim()).filter(Boolean):[],[I]),[de,he]=f.useState({}),[z,ce]=f.useState("");if(n)return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Nt,{}),a.jsx("main",{className:"max-w-3xl mx-auto px-4 py-12",children:a.jsx(ee,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:a.jsx(se,{className:"py-12 text-center",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading"})})})})]});if(!(r!=null&&r.access_token))return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Nt,{}),a.jsx("main",{className:"max-w-3xl mx-auto px-4 py-12",children:a.jsxs(ee,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:[a.jsx(Ge,{children:a.jsx(pt,{children:"Sign in required"})}),a.jsxs(se,{className:"space-y-3 text-center",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Creating a library requires an account. Sign in to generate and publish libraries."}),a.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[a.jsx(M,{onClick:()=>e("/auth"),children:"Sign in"}),a.jsx(M,{variant:"outline",onClick:()=>e("/inventory"),children:"Back to Library"})]})]})]})})]});const _e=async()=>{var K;if(!c.trim()){t({title:"Keywords required",description:"Enter what kind of library you want to create.",variant:"destructive"});return}if(!(r!=null&&r.access_token)){t({title:"Sign in required",description:"Please sign in to generate a library.",variant:"destructive"});return}m(!0);try{const te={"Content-Type":"application/json"};G6&&r!=null&&r.access_token&&(te.Authorization=`Bearer ${r.access_token}`);const xe=await fetch(Y6,{method:"POST",headers:te,body:JSON.stringify({keywords:c.trim(),title:S.trim()||void 0,customInstructions:d.trim()||void 0,preferredCategories:b.length>0?b:void 0})});if(!xe.ok){const Ee=await xe.json().catch(()=>({}));throw new Error(Ee.error||"Failed to generate library")}const Te=await xe.json();if(D(Te),R(Te.summary||""),he({}),!S.trim()){const Ee=c.trim().split(" ").slice(0,3).map(Oe=>Oe.charAt(0).toUpperCase()+Oe.slice(1).toLowerCase()).join(" ")+" Library";N(Ee)}Te.suggestedTags&&Te.suggestedTags.length>0&&$(Te.suggestedTags.slice(0,4)),t({title:"Library generated!",description:`Created ${Te.categories.length} categories with ${Te.categories.reduce((Ee,Oe)=>Ee+Oe.items.length,0)} items.`}),gr({eventName:"generate_library",userId:(K=r==null?void 0:r.user)==null?void 0:K.id,path:window.location.pathname,metadata:{categoryCount:Te.categories.length,itemCount:Te.categories.reduce((Ee,Oe)=>Ee+Oe.items.length,0)}})}catch(te){t({title:"Generation failed",description:Ma(te,"Please try again."),variant:"destructive"})}finally{m(!1)}},Ce=async()=>{if(!S.trim()){t({title:"Title required",description:"Add a title before creating the library.",variant:"destructive"});return}if(!I){t({title:"Generate library first",description:"Use the generate button to create your library.",variant:"destructive"});return}if(A.length===0){t({title:"Tags required",description:"Add at least one tag to help discovery.",variant:"destructive"});return}if(A.length>U){t({title:"Too many tags",description:`Please use ${U} tags or fewer.`,variant:"destructive"});return}try{const K=q.join(", "),te=await s.mutateAsync({title:S.trim(),promptInventory:k.trim(),promptCategories:K,generatedSchema:I,reviewSections:Xv,includeScore:!0,tags:A,isPublic:O});l(A),e(`/inventory/${te.id}/build`)}catch(K){t({title:"Creation failed",description:K instanceof Error?K.message:"Please try again.",variant:"destructive"})}};return a.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[a.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none -z-10",children:[a.jsx("div",{className:"absolute -top-40 -right-40 w-[500px] h-[500px] bg-primary/8 rounded-full blur-3xl animate-drift"}),a.jsx("div",{className:"absolute top-1/2 -left-32 w-96 h-96 bg-accent/15 rounded-full blur-3xl animate-float"}),a.jsx("div",{className:"absolute -bottom-20 right-1/4 w-80 h-80 bg-secondary/10 rounded-full blur-3xl animate-pulse-soft"})]}),a.jsx(Nt,{}),a.jsxs("main",{className:"max-w-3xl mx-auto px-4 py-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Library"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(L6,{onClick:()=>re(!0)}),a.jsx(U6,{onClick:()=>E(!0)})]})]}),Y&&a.jsx(M6,{onStartTour:()=>{fe(!1),re(!0)},onDismiss:()=>fe(!1)}),a.jsxs("div",{className:"text-center mb-12 pt-8 animate-fade-in",children:[a.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-black tracking-tight mb-4 relative inline-block",children:[a.jsxs("span",{className:"relative inline-block",style:{fontFamily:"'Impact', 'Haettenschweiler', 'Franklin Gothic Bold', 'Charcoal', 'Helvetica Inserat', sans-serif",letterSpacing:"0.06em"},children:[a.jsx("span",{className:"absolute inset-0 text-border/40",style:{transform:"translate(4px, 4px)"},"aria-hidden":"true",children:"CREATE INVENTORY"}),a.jsx("span",{className:"absolute inset-0 text-border/60",style:{transform:"translate(2px, 2px)"},"aria-hidden":"true",children:"CREATE INVENTORY"}),a.jsx("span",{className:"text-gradient-themed animate-shimmer bg-[length:200%_auto] relative",children:"CREATE INVENTORY"})]}),a.jsx("span",{className:"absolute -inset-4 bg-primary/10 blur-2xl rounded-full animate-pulse-soft -z-10"})]}),a.jsx("p",{className:"text-lg text-muted-foreground max-w-md mx-auto",children:"Describe what you want to build, and AI will generate your library"})]}),a.jsxs(ee,{className:"bg-card/60 backdrop-blur-glass border-border/50 animate-fade-in",children:[a.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0",children:[a.jsxs(pt,{className:"flex items-center gap-2",children:[a.jsx(EP,{className:"h-5 w-5 text-primary"}),"What kind of library?"]}),a.jsxs(M,{onClick:_e,disabled:p||!c.trim(),className:"gap-2","data-help-id":"generate",children:[p?a.jsx(Ri,{className:"h-4 w-4 animate-spin"}):a.jsx(_r,{className:"h-4 w-4"}),p?"Generating...":I?"Regenerate":"Generate"]})]}),a.jsxs(se,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2","data-help-id":"keywords",children:[a.jsx(qe,{htmlFor:"keywords",children:"Describe your library in a few words"}),a.jsx(Ue,{id:"keywords",value:c,onChange:K=>u(K.target.value),placeholder:"e.g., skincare routine, green smoothie, morning habits...",onKeyDown:K=>K.key==="Enter"&&_e()})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["skincare routine","green smoothie","morning routine","home workout","meditation practice"].map(K=>a.jsx(M,{type:"button",size:"sm",variant:"outline",onClick:()=>u(K),className:"text-xs",children:K},K))}),a.jsxs(Pv,{open:_,onOpenChange:j,children:[a.jsx(Av,{asChild:!0,children:a.jsxs(M,{variant:"ghost",className:"w-full justify-between text-muted-foreground hover:text-foreground","data-help-id":"advanced-options",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Sj,{className:"h-4 w-4"}),"Advanced Options"]}),a.jsx(uo,{className:`h-4 w-4 transition-transform ${_?"rotate-180":""}`})]})}),a.jsxs(Iv,{className:"space-y-4 pt-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{htmlFor:"custom-instructions",children:"Custom instructions (optional)"}),a.jsx(Wt,{id:"custom-instructions",value:d,onChange:K=>h(K.target.value),placeholder:"e.g., more beginner-friendly, fewer categories, emphasize budget options...",rows:3}),I&&a.jsx("p",{className:"text-xs text-muted-foreground",children:"Regenerating will replace the current categories and items."})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx(qe,{children:"Preferred categories (optional)"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"We will always generate 6 categories total."})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:b.map((K,te)=>a.jsxs(Ie,{variant:"secondary",className:"gap-1",children:[K,a.jsx(M,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4",onClick:()=>{g(xe=>xe.filter((Te,Ee)=>Ee!==te)),w("")},"aria-label":"Remove category",children:a.jsx(Vt,{className:"h-3 w-3"})})]},`${K}-${te}`))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ue,{value:v,onChange:K=>x(K.target.value),placeholder:"Add category",onKeyDown:K=>{if(K.key==="Enter"){K.preventDefault();const te=v.trim();if(!te)return;if(b.length>=J){w("You can only add up to 6 categories.");return}g(xe=>[...xe,te]),x(""),w("")}}}),a.jsx(M,{type:"button",variant:"outline",onClick:()=>{const K=v.trim();if(K){if(b.length>=J){w("You can only add up to 6 categories.");return}g(te=>[...te,K]),x(""),w("")}},children:"Add"})]}),y&&a.jsx("p",{className:"text-xs text-destructive",children:y})]})]})]})]})]}),I&&a.jsxs(a.Fragment,{children:[a.jsxs(ee,{className:"bg-card/60 backdrop-blur-glass border-border/50 animate-fade-in",children:[a.jsx(Ge,{children:a.jsx(pt,{children:"Library Details"})}),a.jsxs(se,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{htmlFor:"inventory-title",children:"Title"}),a.jsx(Ue,{id:"inventory-title",value:S,onChange:K=>N(K.target.value),placeholder:"My Custom Library"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{htmlFor:"inventory-description",children:"Description"}),a.jsx(Wt,{id:"inventory-description",value:k,onChange:K=>R(K.target.value),placeholder:"What this library is for...",rows:3})]})]})]}),a.jsxs(ee,{className:"bg-card/60 backdrop-blur-glass border-border/50 animate-fade-in","data-help-id":"edit-categories",children:[a.jsx(Ge,{children:a.jsx(pt,{children:"Generated Categories"})}),a.jsxs(se,{className:"space-y-4",children:[I.categories.map((K,te)=>a.jsxs("div",{className:"space-y-3 rounded-lg border border-border/60 p-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ue,{value:K.name,onChange:xe=>{const Te=xe.target.value;D(Ee=>{if(!Ee)return Ee;const Oe=Ee.categories.map((Me,vt)=>vt===te?{...Me,name:Te}:Me);return{...Ee,categories:Oe}})},className:"font-semibold",placeholder:"Category name"}),a.jsx(M,{type:"button",variant:"ghost",size:"icon",onClick:()=>{D(xe=>{if(!xe)return xe;const Te=xe.categories.filter((Ee,Oe)=>Oe!==te);return{...xe,categories:Te}})},"aria-label":"Remove category",children:a.jsx(Vt,{className:"h-4 w-4"})}),a.jsxs(Ie,{variant:"secondary",children:[K.items.length," items"]})]}),a.jsx("div",{className:"flex flex-wrap gap-1.5",children:K.items.map((xe,Te)=>a.jsxs(Ie,{variant:"outline",className:"text-xs gap-1",children:[xe,a.jsx(M,{type:"button",variant:"ghost",size:"icon",className:"h-3 w-3",onClick:()=>{D(Ee=>{if(!Ee)return Ee;const Oe=Ee.categories.map((Me,vt)=>vt!==te?Me:{...Me,items:Me.items.filter((Qe,ei)=>ei!==Te)});return{...Ee,categories:Oe}})},"aria-label":"Remove item",children:a.jsx(Vt,{className:"h-3 w-3"})})]},Te))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ue,{value:de[te]||"",onChange:xe=>he(Te=>({...Te,[te]:xe.target.value})),placeholder:`Add item to ${K.name||"category"}`}),a.jsx(M,{type:"button",variant:"outline",onClick:()=>{var Te;const xe=(Te=de[te])==null?void 0:Te.trim();xe&&(D(Ee=>{if(!Ee)return Ee;const Oe=Ee.categories.map((Me,vt)=>vt===te?{...Me,items:[...Me.items,xe]}:Me);return{...Ee,categories:Oe}}),he(Ee=>({...Ee,[te]:""})))},children:"Add item"})]})]},te)),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ue,{value:z,onChange:K=>ce(K.target.value),placeholder:"New category name"}),a.jsx(M,{type:"button",variant:"outline",onClick:()=>{const K=z.trim();K&&(D(te=>te&&{...te,categories:[...te.categories,{name:K,items:[]}]}),ce(""))},children:"Add category"})]})]})]}),a.jsxs(ee,{className:"bg-card/60 backdrop-blur-glass border-border/50 animate-fade-in","data-help-id":"tags",children:[a.jsx(Ge,{children:a.jsx(pt,{children:"Discovery"})}),a.jsxs(se,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{children:"Tags"}),a.jsx(Qv,{value:A,onChange:$,suggestions:i||[],maxTags:U})]}),a.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 px-4 py-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Public library"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Public libraries appear in search."})]}),a.jsx(zn,{checked:O,onCheckedChange:X})]})]})]}),a.jsxs(M,{onClick:Ce,disabled:s.isPending,className:"w-full gap-2",size:"lg","data-help-id":"publish",children:[s.isPending?a.jsx(Ri,{className:"h-4 w-4 animate-spin"}):a.jsx(_r,{className:"h-4 w-4"}),"Create Library"]})]})]}),a.jsx(O6,{isActive:B,onComplete:()=>re(!1),onSkip:()=>re(!1)}),a.jsx(F6,{isOpen:T,onClose:()=>E(!1),onStartTour:()=>{E(!1),re(!0)}})]})}function J6(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=e.categories;return Array.isArray(t)?t.map(r=>typeof r.name=="string"?r.name:"").filter(Boolean):[]}function X6(){const{inventoryId:e}=wo(),{data:t,isLoading:r}=Yv(e),n=AC(),s=R6(),{toast:i}=Ot(),[o,l]=f.useState([]),[c,u]=f.useState(""),[d,h]=f.useState(""),[p,m]=f.useState(!0);f.useEffect(()=>{t&&(l(Zv(t.review_sections)),m(t.include_score??!0),u(""),h(""))},[t]);const b=f.useMemo(()=>Xv.filter(_=>!o.some(j=>j.toLowerCase()===_.toLowerCase())),[o]),g=f.useMemo(()=>ey((t==null?void 0:t.review_sections)??null),[t]),v=async()=>{if(t)try{await n.mutateAsync({inventoryId:t.id,liked:t.user_liked})}catch(_){i({title:"Action failed",description:_ instanceof Error?_.message:"Please try again.",variant:"destructive"})}},x=_=>{const j=xd(_);if(j){if(j.toLowerCase()===Bs.toLowerCase()){u("");return}if(o.some(S=>S.toLowerCase()===j.toLowerCase())){u(""),h("");return}if(o.length>=fl){h(`You can add up to ${Kl} sections total.`);return}l(S=>[...S,j]),u(""),h("")}},y=_=>{l(j=>j.filter(S=>S!==_)),h("")},w=async()=>{if(t){if(o.length>fl){i({title:"Too many sections",description:`Please use ${Kl} sections or fewer.`,variant:"destructive"});return}try{await s.mutateAsync({inventoryId:t.id,reviewSections:o,includeScore:p}),i({title:"Saved",description:"Review settings updated."})}catch(_){i({title:"Save failed",description:_ instanceof Error?_.message:"Please try again.",variant:"destructive"})}}};return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Nt,{}),a.jsxs("main",{className:"max-w-3xl mx-auto px-4 py-8 space-y-6",children:[r?a.jsxs(ee,{children:[a.jsx(Ge,{children:a.jsx(Ae,{className:"h-6 w-40"})}),a.jsx(se,{children:a.jsx(Ae,{className:"h-24 w-full"})})]}):t?a.jsx(a.Fragment,{children:a.jsxs(ee,{children:[a.jsxs(Ge,{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx(pt,{children:t.title}),a.jsx("p",{className:"text-sm text-muted-foreground",children:t.prompt_inventory})]}),a.jsxs(M,{variant:"ghost",size:"sm",className:t.user_liked?"text-red-500":"text-muted-foreground",onClick:v,children:[a.jsx(qt,{className:`h-4 w-4 ${t.user_liked?"fill-current":""}`}),a.jsx("span",{className:"ml-1 text-xs",children:t.likes_count})]})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map(_=>a.jsxs(Ie,{variant:"outline",children:["#",_.slug]},_.id))})]}),a.jsxs(se,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Categories"}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:J6(t.generated_schema).map(_=>a.jsx(Ie,{variant:"secondary",children:_},_))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Review sections"}),t.is_owner?a.jsxs("div",{className:"mt-3 space-y-3",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(Ie,{variant:"secondary",children:Bs}),o.map(_=>a.jsxs(Ie,{variant:"secondary",className:"gap-1",children:[_,a.jsx(M,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4",onClick:()=>y(_),children:a.jsx(Vt,{className:"h-3 w-3"})})]},_))]}),b.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(_=>a.jsx(M,{type:"button",size:"sm",variant:"outline",onClick:()=>x(_),children:_},_))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ue,{value:c,onChange:_=>u(_.target.value),placeholder:"Add custom section",onKeyDown:_=>{_.key==="Enter"&&(_.preventDefault(),x(c))}}),a.jsx(M,{type:"button",variant:"outline",onClick:()=>x(c),children:"Add"})]}),d&&a.jsx("p",{className:"text-sm text-destructive",children:d}),a.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 px-4 py-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Include score"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Adds a 1100 score in Overview."})]}),a.jsx(zn,{checked:p,onCheckedChange:m})]}),a.jsx(M,{type:"button",onClick:w,disabled:s.isPending,children:"Save review settings"})]}):a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:g.map(_=>a.jsx(Ie,{variant:"outline",children:_},_))})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(be,{to:`/inventory/${t.id}/build`,children:a.jsx(M,{children:"Create Blueprint"})}),a.jsx(be,{to:"/inventory",children:a.jsx(M,{variant:"outline",children:"Back to Library"})})]})]})]})}):a.jsx(ee,{children:a.jsx(se,{className:"py-12 text-center",children:"Library not found."})}),a.jsx(pn,{})]})]})}var IC="AlertDialog",[Z6,bz]=Mt(IC,[jN]),rs=jN(),OC=e=>{const{__scopeAlertDialog:t,...r}=e,n=rs(t);return a.jsx(mv,{...n,...r,modal:!0})};OC.displayName=IC;var e8="AlertDialogTrigger",t8=f.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=rs(r);return a.jsx(gv,{...s,...n,ref:t})});t8.displayName=e8;var r8="AlertDialogPortal",MC=e=>{const{__scopeAlertDialog:t,...r}=e,n=rs(t);return a.jsx(vv,{...n,...r})};MC.displayName=r8;var n8="AlertDialogOverlay",DC=f.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=rs(r);return a.jsx(mc,{...s,...n,ref:t})});DC.displayName=n8;var Da="AlertDialogContent",[s8,i8]=Z6(Da),a8=K_("AlertDialogContent"),LC=f.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...s}=e,i=rs(r),o=f.useRef(null),l=Ne(t,o),c=f.useRef(null);return a.jsx(R5,{contentName:Da,titleName:$C,docsSlug:"alert-dialog",children:a.jsx(s8,{scope:r,cancelRef:c,children:a.jsxs(gc,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:G(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(a8,{children:n}),a.jsx(l8,{contentRef:o})]})})})});LC.displayName=Da;var $C="AlertDialogTitle",FC=f.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=rs(r);return a.jsx(vc,{...s,...n,ref:t})});FC.displayName=$C;var UC="AlertDialogDescription",BC=f.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=rs(r);return a.jsx(yc,{...s,...n,ref:t})});BC.displayName=UC;var o8="AlertDialogAction",zC=f.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=rs(r);return a.jsx(ih,{...s,...n,ref:t})});zC.displayName=o8;var qC="AlertDialogCancel",WC=f.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:s}=i8(qC,r),i=rs(r),o=Ne(t,s);return a.jsx(ih,{...i,...n,ref:o})});WC.displayName=qC;var l8=({contentRef:e})=>{const t=`\`${Da}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Da}\` by passing a \`${UC}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Da}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return f.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},c8=OC,u8=MC,VC=DC,HC=LC,KC=zC,GC=WC,YC=FC,QC=BC;const d8=c8,h8=u8,JC=f.forwardRef(({className:e,...t},r)=>a.jsx(VC,{className:H("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));JC.displayName=VC.displayName;const XC=f.forwardRef(({className:e,...t},r)=>a.jsxs(h8,{children:[a.jsx(JC,{}),a.jsx(HC,{ref:r,className:H("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));XC.displayName=HC.displayName;const ZC=({className:e,...t})=>a.jsx("div",{className:H("flex flex-col space-y-2 text-center sm:text-left",e),...t});ZC.displayName="AlertDialogHeader";const eE=({className:e,...t})=>a.jsx("div",{className:H("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});eE.displayName="AlertDialogFooter";const tE=f.forwardRef(({className:e,...t},r)=>a.jsx(YC,{ref:r,className:H("text-lg font-semibold",e),...t}));tE.displayName=YC.displayName;const rE=f.forwardRef(({className:e,...t},r)=>a.jsx(QC,{ref:r,className:H("text-sm text-muted-foreground",e),...t}));rE.displayName=QC.displayName;const nE=f.forwardRef(({className:e,...t},r)=>a.jsx(KC,{ref:r,className:H(ev(),e),...t}));nE.displayName=KC.displayName;const sE=f.forwardRef(({className:e,...t},r)=>a.jsx(GC,{ref:r,className:H(ev({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));sE.displayName=GC.displayName;function f8({onClick:e,disabled:t,isLoading:r,itemCount:n}){return a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsxs("button",{onClick:e,disabled:t||r,className:H("relative w-28 h-28 rounded-full transition-all duration-500","bg-gradient-to-br from-primary via-primary/90 to-primary/70","border-2 border-primary/30","flex items-center justify-center","shadow-glow-aqua","group",t&&!r&&"opacity-40 cursor-not-allowed shadow-none",!t&&!r&&"hover:scale-105 hover:shadow-[0_0_60px_hsl(185_55%_50%/0.5)] animate-glow-pulse",r&&"animate-pulse cursor-wait"),children:[!t&&!r&&a.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/20 animate-ping opacity-30"}),a.jsx("div",{className:"relative z-10 flex flex-col items-center gap-1",children:r?a.jsx(Ri,{className:"h-10 w-10 text-primary-foreground animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(_j,{className:"h-10 w-10 text-primary-foreground group-hover:rotate-12 transition-transform duration-300"}),a.jsx("span",{className:"text-xs font-bold text-primary-foreground/90 uppercase tracking-widest",children:"Review"})]})}),!t&&a.jsx("div",{className:"absolute inset-0 rounded-full opacity-50 group-hover:opacity-100 transition-opacity duration-300",children:a.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-primary via-accent to-primary animate-iridescent",style:{padding:"2px"},children:a.jsx("div",{className:"w-full h-full rounded-full bg-primary"})})})]}),a.jsx("p",{className:H("text-sm font-medium transition-colors",t&&!r?"text-muted-foreground":"text-foreground"),children:r?"Analyzing your blend...":n===0?"Review your Blueprint":`Ready to review ${n} item${n!==1?"s":""}`})]})}function bm(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}function p8(e){const t=e.toLowerCase();return t.includes("strength")?"+":t.includes("gap")||t.includes("risk")?"!":t.includes("suggest")?">":"-"}function m8(e){if(!e)return[];const t=[];let r=null;const n=e.split(`
`);for(const s of n){if(s.startsWith("### ")||s.startsWith("## ")){const l=s.replace(/^#+\s*/,"").trim();if(!l)continue;r={title:l,key:bm(l),bullets:[],text:""},t.push(r);continue}const i=s.trim();if(!i)continue;r||(r={title:"Overview",key:"overview",bullets:[],text:""},t.push(r));const o=i.replace(/^\*\*|\*\*$/g,"").replace(/^\*|\*$/g,"").replace(/^[-*+]\s+/,"");i.startsWith("- ")||i.startsWith("* ")||i.startsWith("+ ")?r.bullets.push(o):r.text+=(r.text?" ":"")+o}return t}function g8(e,t){if(!t||t.length===0)return e.length>0?e:[{title:"Overview",key:"overview",bullets:[],text:""}];const r=new Map(e.map(i=>[bm(i.title),i])),n=t.map(i=>{const o=bm(i);return r.get(o)||{title:i,key:o,bullets:[],text:""}}),s=e.filter(i=>!n.some(o=>o.key===i.key));return n.concat(s)}function v8(e){const t=/score\s*:\s*(\d{1,3})\s*\/\s*100/i;let r=null;const n=e.text.match(t);n&&(r=parseInt(n[1],10));const s=e.bullets.filter(o=>{const l=o.match(t);return l&&r===null&&(r=parseInt(l[1],10)),!l}),i=e.text.replace(t,"").replace(/\s{2,}/g," ").trim();return{score:r,text:i,bullets:s}}function _m({review:e,isStreaming:t,sectionOrder:r}){var i;const n=m8(e),s=g8(n,r);return a.jsx(ee,{className:"bg-card/80 backdrop-blur-glass border-border/50 overflow-hidden",children:a.jsxs(se,{className:"p-0",children:[a.jsxs(jo,{defaultValue:((i=s[0])==null?void 0:i.key)||"overview",className:"w-full",children:[a.jsx(Yi,{className:"w-full justify-start rounded-none border-b border-border/50 bg-muted/30 px-4 pt-4",children:s.map(o=>a.jsx(Ar,{value:o.key,className:"data-[state=active]:bg-background",children:o.title.toUpperCase()},o.key))}),a.jsx("div",{className:"p-6",children:s.map(o=>{const l=o.key==="overview"||o.title.toLowerCase().includes("overview"),{score:c,text:u,bullets:d}=l?v8(o):{score:null,text:o.text,bullets:o.bullets},h=c!==null&&c>=80?"text-green-500":c!==null&&c>=60?"text-amber-500":"text-red-500";return a.jsxs(Ir,{value:o.key,className:"mt-0 space-y-4",children:[a.jsx("h3",{className:"text-2xl font-bold tracking-tight",children:o.title}),l&&c!==null&&a.jsxs("div",{className:"text-center py-4",children:[a.jsx("p",{className:"text-xs uppercase tracking-wider text-muted-foreground mb-2",children:"Blueprint score"}),a.jsxs("p",{className:H("text-6xl font-black",h),children:[c,a.jsx("span",{className:"text-2xl text-muted-foreground",children:"/100"})]})]}),u?a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:u}):null,d.length>0?a.jsx("ul",{className:"space-y-3",children:d.map((p,m)=>a.jsxs("li",{className:"flex gap-3",children:[a.jsx("span",{className:"text-primary font-bold",children:p8(o.title)}),a.jsx("span",{children:p})]},m))}):null,!u&&d.length===0&&a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:t?"Generating...":"No details yet."})]},o.key)})})]}),t&&a.jsx("div",{className:"px-6 pb-4",children:a.jsx("div",{className:"h-1 w-full bg-muted rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-primary animate-pulse",style:{width:"60%"}})})})]})})}const h0=["Analyzing your blueprint...","Checking synergies...","Reviewing dosages...","Checking interactions...","Finding harmony...","Almost ready..."];function iE({className:e}){const[t,r]=f.useState(0),[n,s]=f.useState("pour");return f.useEffect(()=>{const i=setInterval(()=>{r(l=>(l+1)%h0.length)},2e3),o=setInterval(()=>{s(l=>l==="pour"?"shake":l==="shake"?"serve":"pour")},3e3);return()=>{clearInterval(i),clearInterval(o)}},[]),a.jsxs("div",{className:H("flex flex-col items-center justify-center py-16 relative overflow-hidden",e),children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/5 via-transparent to-accent/10"}),a.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[...Array(8)].map((i,o)=>a.jsx("div",{className:"absolute rounded-full bg-primary/20 blur-sm animate-float",style:{width:`${4+Math.random()*8}px`,height:`${4+Math.random()*8}px`,left:`${10+Math.random()*80}%`,top:`${10+Math.random()*80}%`,animationDelay:`${o*.5}s`,animationDuration:`${4+Math.random()*4}s`}},o))}),a.jsxs("div",{className:"relative w-48 h-48 mb-8",children:[a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:H("w-32 h-32 rounded-full blur-2xl transition-all duration-1000",n==="pour"&&"bg-primary/20",n==="shake"&&"bg-primary/30 scale-110",n==="serve"&&"bg-accent/25 scale-105")})}),a.jsx("div",{className:H("absolute inset-0 flex items-center justify-center transition-all duration-500",n==="shake"&&"animate-[shake_0.3s_ease-in-out_infinite]"),children:a.jsxs("svg",{viewBox:"0 0 100 120",className:"w-36 h-36 drop-shadow-lg",children:[a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:"chromeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[a.jsx("stop",{offset:"0%",stopColor:"hsl(200, 15%, 70%)"}),a.jsx("stop",{offset:"30%",stopColor:"hsl(195, 20%, 85%)"}),a.jsx("stop",{offset:"50%",stopColor:"hsl(195, 25%, 92%)"}),a.jsx("stop",{offset:"70%",stopColor:"hsl(195, 20%, 85%)"}),a.jsx("stop",{offset:"100%",stopColor:"hsl(200, 15%, 70%)"})]}),a.jsxs("linearGradient",{id:"liquidGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"hsl(185, 60%, 65%)",stopOpacity:"0.8"}),a.jsx("stop",{offset:"50%",stopColor:"hsl(185, 55%, 50%)",stopOpacity:"0.9"}),a.jsx("stop",{offset:"100%",stopColor:"hsl(190, 50%, 45%)",stopOpacity:"1"})]}),a.jsx("filter",{id:"frosted",children:a.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0.5"})})]}),a.jsx("path",{d:"M30 15 L70 15 L65 30 L35 30 Z",fill:"url(#chromeGradient)"}),a.jsx("ellipse",{cx:"50",cy:"15",rx:"20",ry:"5",fill:"url(#chromeGradient)"}),a.jsx("ellipse",{cx:"50",cy:"15",rx:"20",ry:"5",fill:"white",fillOpacity:"0.3"}),a.jsx("path",{d:"M35 30 L30 100 L70 100 L65 30 Z",fill:"url(#chromeGradient)"}),a.jsx("path",{d:"M35 30 L30 100 L40 100 L45 30 Z",fill:"white",fillOpacity:"0.15"}),a.jsx("path",{d:n==="pour"?"M36 85 L69 85 L68 95 L33 95 Z":n==="shake"?"M34 45 L66 50 L68 95 L33 95 Z":"M35 55 L65 55 L68 95 L33 95 Z",fill:"url(#liquidGradient)",className:"transition-all duration-700 ease-out"}),a.jsx("ellipse",{cx:"50",cy:n==="pour"?85:n==="shake"?47:55,rx:"16",ry:"3",fill:"white",fillOpacity:"0.3",className:"transition-all duration-700"}),n==="shake"&&a.jsxs(a.Fragment,{children:[a.jsx("circle",{cx:"42",cy:"60",r:"3",fill:"white",fillOpacity:"0.5",className:"animate-ping"}),a.jsx("circle",{cx:"55",cy:"68",r:"2",fill:"white",fillOpacity:"0.4",className:"animate-ping",style:{animationDelay:"0.2s"}}),a.jsx("circle",{cx:"48",cy:"78",r:"2.5",fill:"white",fillOpacity:"0.45",className:"animate-ping",style:{animationDelay:"0.4s"}}),a.jsx("circle",{cx:"58",cy:"85",r:"2",fill:"white",fillOpacity:"0.35",className:"animate-ping",style:{animationDelay:"0.6s"}})]}),a.jsx("path",{d:"M65 30 L70 100",stroke:"white",strokeWidth:"1",strokeOpacity:"0.3"})]})}),n==="pour"&&a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(6)].map((i,o)=>a.jsx("div",{className:"absolute rounded-full bg-gradient-to-b from-primary/70 to-primary/40 backdrop-blur-sm animate-[fall_1.2s_ease-in_infinite]",style:{width:`${6+Math.random()*6}px`,height:`${8+Math.random()*8}px`,left:`${35+Math.random()*30}%`,animationDelay:`${o*.2}s`,borderRadius:"50% 50% 50% 50% / 60% 60% 40% 40%"}},o))}),n==="serve"&&a.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(8)].map((i,o)=>a.jsx("div",{className:"absolute w-1 h-1 rounded-full bg-primary shadow-glow-aqua animate-pulse-soft",style:{left:`${15+Math.random()*70}%`,top:`${15+Math.random()*50}%`,animationDelay:`${o*.2}s`,boxShadow:"0 0 8px hsl(185, 55%, 50%)"}},o))}),a.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-2",children:[...Array(3)].map((i,o)=>a.jsx("div",{className:H("w-4 h-4 rounded bg-gradient-to-br from-white/70 to-secondary/50 border border-white/30 backdrop-blur-sm shadow-sm",n==="shake"&&"animate-bounce"),style:{animationDelay:`${o*.1}s`,transform:`rotate(${o*15-15}deg)`}},o))})]}),a.jsxs("div",{className:"text-center space-y-3 relative z-10",children:[a.jsx("p",{className:"text-lg font-medium text-foreground animate-pulse-soft tracking-wide",children:h0[t]}),a.jsx("div",{className:"flex items-center justify-center gap-2",children:[...Array(3)].map((i,o)=>a.jsx("div",{className:"w-2 h-2 rounded-full bg-primary/70 animate-bounce shadow-glow-aqua",style:{animationDelay:`${o*.15}s`}},o))})]}),a.jsx("style",{children:`
        @keyframes fall {
          0% { transform: translateY(-20px) scale(0.8); opacity: 0; }
          10% { opacity: 1; }
          90% { opacity: 0.6; }
          100% { transform: translateY(120px) scale(1); opacity: 0; }
        }
        @keyframes shake {
          0%, 100% { transform: translateX(0) rotate(0deg); }
          25% { transform: translateX(-4px) rotate(-2deg); }
          75% { transform: translateX(4px) rotate(2deg); }
        }
      `})]})}const f0=[{number:1,label:"Build Blueprint"},{number:2,label:"Review with AI"},{number:3,label:"Publish"}];function y8({currentStep:e}){return a.jsx("div",{className:"flex items-center justify-center gap-2 sm:gap-4 py-4",children:f0.map((t,r)=>{const n=e>t.number,s=e===t.number;return a.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:H("h-8 w-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors",n?"bg-primary text-primary-foreground":s?"bg-primary/20 text-primary border-2 border-primary":"bg-muted text-muted-foreground"),children:n?a.jsx(Hi,{className:"h-4 w-4"}):t.number}),a.jsx("span",{className:H("text-sm font-medium hidden sm:inline",s?"text-foreground":"text-muted-foreground"),children:t.label})]}),r<f0.length-1&&a.jsx("div",{className:H("h-0.5 w-8 sm:w-12",e>t.number?"bg-primary":"bg-muted")})]},t.number)})})}var mn="Accordion",x8=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ty,w8,b8]=sc(mn),[vh,_z]=Mt(mn,[b8,Hk]),ry=Hk(),aE=W.forwardRef((e,t)=>{const{type:r,...n}=e,s=n,i=n;return a.jsx(ty.Provider,{scope:e.__scopeAccordion,children:r==="multiple"?a.jsx(N8,{...i,ref:t}):a.jsx(S8,{...s,ref:t})})});aE.displayName=mn;var[oE,_8]=vh(mn),[lE,j8]=vh(mn,{collapsible:!1}),S8=W.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:s=()=>{},collapsible:i=!1,...o}=e,[l,c]=Ur({prop:r,defaultProp:n??"",onChange:s,caller:mn});return a.jsx(oE,{scope:e.__scopeAccordion,value:W.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:W.useCallback(()=>i&&c(""),[i,c]),children:a.jsx(lE,{scope:e.__scopeAccordion,collapsible:i,children:a.jsx(cE,{...o,ref:t})})})}),N8=W.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:s=()=>{},...i}=e,[o,l]=Ur({prop:r,defaultProp:n??[],onChange:s,caller:mn}),c=W.useCallback(d=>l((h=[])=>[...h,d]),[l]),u=W.useCallback(d=>l((h=[])=>h.filter(p=>p!==d)),[l]);return a.jsx(oE,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:a.jsx(lE,{scope:e.__scopeAccordion,collapsible:!0,children:a.jsx(cE,{...i,ref:t})})})}),[k8,yh]=vh(mn),cE=W.forwardRef((e,t)=>{const{__scopeAccordion:r,disabled:n,dir:s,orientation:i="vertical",...o}=e,l=W.useRef(null),c=Ne(l,t),u=w8(r),h=_o(s)==="ltr",p=G(e.onKeyDown,m=>{var k;if(!x8.includes(m.key))return;const b=m.target,g=u().filter(R=>{var I;return!((I=R.ref.current)!=null&&I.disabled)}),v=g.findIndex(R=>R.ref.current===b),x=g.length;if(v===-1)return;m.preventDefault();let y=v;const w=0,_=x-1,j=()=>{y=v+1,y>_&&(y=w)},S=()=>{y=v-1,y<w&&(y=_)};switch(m.key){case"Home":y=w;break;case"End":y=_;break;case"ArrowRight":i==="horizontal"&&(h?j():S());break;case"ArrowDown":i==="vertical"&&j();break;case"ArrowLeft":i==="horizontal"&&(h?S():j());break;case"ArrowUp":i==="vertical"&&S();break}const N=y%x;(k=g[N].ref.current)==null||k.focus()});return a.jsx(k8,{scope:r,disabled:n,direction:s,orientation:i,children:a.jsx(ty.Slot,{scope:r,children:a.jsx(oe.div,{...o,"data-orientation":i,ref:c,onKeyDown:n?void 0:p})})})}),wd="AccordionItem",[C8,ny]=vh(wd),uE=W.forwardRef((e,t)=>{const{__scopeAccordion:r,value:n,...s}=e,i=yh(wd,r),o=_8(wd,r),l=ry(r),c=Dr(),u=n&&o.value.includes(n)||!1,d=i.disabled||e.disabled;return a.jsx(C8,{scope:r,open:u,disabled:d,triggerId:c,children:a.jsx(Yk,{"data-orientation":i.orientation,"data-state":gE(u),...l,...s,ref:t,disabled:d,open:u,onOpenChange:h=>{h?o.onItemOpen(n):o.onItemClose(n)}})})});uE.displayName=wd;var dE="AccordionHeader",hE=W.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,s=yh(mn,r),i=ny(dE,r);return a.jsx(oe.h3,{"data-orientation":s.orientation,"data-state":gE(i.open),"data-disabled":i.disabled?"":void 0,...n,ref:t})});hE.displayName=dE;var jm="AccordionTrigger",fE=W.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,s=yh(mn,r),i=ny(jm,r),o=j8(jm,r),l=ry(r);return a.jsx(ty.ItemSlot,{scope:r,children:a.jsx(YU,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":s.orientation,id:i.triggerId,...l,...n,ref:t})})});fE.displayName=jm;var pE="AccordionContent",mE=W.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,s=yh(mn,r),i=ny(pE,r),o=ry(r);return a.jsx(QU,{role:"region","aria-labelledby":i.triggerId,"data-orientation":s.orientation,...o,...n,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});mE.displayName=pE;function gE(e){return e?"open":"closed"}var E8=aE,T8=uE,R8=hE,vE=fE,yE=mE;const P8=E8,xE=f.forwardRef(({className:e,...t},r)=>a.jsx(T8,{ref:r,className:H("border-b",e),...t}));xE.displayName="AccordionItem";const wE=f.forwardRef(({className:e,children:t,...r},n)=>a.jsx(R8,{className:"flex",children:a.jsxs(vE,{ref:n,className:H("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...r,children:[t,a.jsx(uo,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));wE.displayName=vE.displayName;const bE=f.forwardRef(({className:e,children:t,...r},n)=>a.jsx(yE,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:a.jsx("div",{className:H("pb-4 pt-0",e),children:t})}));bE.displayName=yE.displayName;function A8({steps:e,activeStepId:t,onSetActive:r,onUpdateStep:n,onRemoveStep:s,onAddStep:i,onReorderSteps:o,onRemoveItem:l,onUpdateItemContext:c,itemContexts:u}){const[d,h]=f.useState(null),[p,m]=f.useState(""),[b,g]=f.useState(null),v=f.useCallback(k=>{const[R,I]=k.split("::");return!R||!I?null:{key:k,category:R,item:I}},[]),x=f.useCallback(k=>{h(k.id),m(k.title)},[]),y=f.useCallback(k=>{n(k,{title:p.trim()}),h(null),m("")},[n,p]),w=f.useCallback(()=>{h(null),m("")},[]),_=f.useCallback(k=>{g(k)},[]),j=f.useCallback(k=>{k.preventDefault()},[]),S=f.useCallback(k=>{b!==null&&b!==k&&o(b,k),g(null)},[b,o]),N=f.useCallback(()=>{g(null)},[]);return a.jsxs("div",{className:"space-y-3",children:[a.jsxs(M,{type:"button",variant:"outline",onClick:i,className:"w-full gap-2 border-dashed","data-help-id":"add-step",children:[a.jsx(zd,{className:"h-4 w-4"}),"Add Step"]}),e.length===0?a.jsx("div",{className:"rounded-xl border border-dashed border-border/60 p-6 text-center",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"No steps yet. Select items from the library above  they'll appear in your first step automatically."})}):a.jsx(P8,{type:"single",collapsible:!0,value:t||void 0,onValueChange:k=>k&&r(k),className:"space-y-2","data-help-id":"steps",children:e.map((k,R)=>{const I=k.title.trim()||`Step ${R+1}`,D=k.itemKeys.map(v).filter(O=>O!==null),A=t===k.id,$=d===k.id;return a.jsxs(xE,{value:k.id,className:H("rounded-xl border transition-all duration-200",A?"border-primary/40 bg-card shadow-sm":"border-border/40 bg-muted/30 hover:bg-muted/50"),draggable:!0,onDragStart:()=>_(R),onDragOver:j,onDrop:()=>S(R),onDragEnd:N,children:[a.jsx(wE,{className:"px-4 py-3 hover:no-underline [&>svg]:hidden",children:a.jsxs("div",{className:"flex w-full items-center gap-3",children:[a.jsx(gP,{className:"h-4 w-4 text-muted-foreground cursor-grab shrink-0"}),$?a.jsxs("div",{className:"flex items-center gap-2 flex-1",onClick:O=>O.stopPropagation(),children:[a.jsx(Ue,{value:p,onChange:O=>m(O.target.value),placeholder:`Step ${R+1}`,className:"h-8 flex-1",autoFocus:!0,onKeyDown:O=>{O.key==="Enter"?(O.preventDefault(),y(k.id)):O.key==="Escape"&&w()}}),a.jsx(M,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:O=>{O.stopPropagation(),y(k.id)},children:a.jsx(Hi,{className:"h-4 w-4"})}),a.jsx(M,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:O=>{O.stopPropagation(),w()},children:a.jsx(Vt,{className:"h-4 w-4"})})]}):a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[a.jsx("span",{className:"font-medium truncate",children:I}),a.jsx(M,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:O=>{O.stopPropagation(),x(k)},children:a.jsx(jj,{className:"h-3 w-3"})})]}),a.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[a.jsxs(Ie,{variant:"secondary",className:"text-xs",children:[D.length," ",D.length===1?"item":"items"]}),A&&a.jsxs(Ie,{variant:"outline",className:"gap-1 text-xs border-primary/40 text-primary",children:[a.jsx(TP,{className:"h-3 w-3"}),"Active"]}),a.jsx(M,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:O=>{O.stopPropagation(),s(k.id)},children:a.jsx(Xu,{className:"h-4 w-4 text-destructive"})})]})]})}),a.jsx(bE,{className:"px-4 pb-4",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"space-y-1.5",children:a.jsx(Wt,{value:k.description,onChange:O=>n(k.id,{description:O.target.value}),placeholder:"Add step notes or instructions...",rows:2,className:"resize-none"})}),A&&D.length===0&&a.jsx("div",{className:"rounded-lg bg-primary/5 border border-primary/20 p-3 text-center","data-help-id":"active-step",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"Items you select will be added here automatically"})}),D.length>0&&a.jsx("div",{className:"space-y-2",children:D.map(O=>a.jsxs("div",{className:"rounded-lg border border-border/40 bg-background/50 p-3 space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:O.item}),a.jsx("p",{className:"text-xs text-muted-foreground",children:O.category})]}),a.jsx(M,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:()=>l(O.category,O.item),children:a.jsx(Xu,{className:"h-4 w-4 text-destructive"})})]}),a.jsx(Ue,{value:u[O.key]||"",onChange:X=>c(O.category,O.item,X.target.value),placeholder:"Add context (e.g., 0.5 mg, morning, with food...)",className:"h-8 text-sm","data-help-id":"context"})]},O.key))})]})})]},k.id)})})]})}const I8=[{id:"picker",text:"Browse and select items by category"},{id:"steps",text:"Organize your items into ordered steps"},{id:"active-step",text:"Selected items appear here"},{id:"add-step",text:"Create a new step in your routine"},{id:"context",text:'Add notes like "2 drops" or "morning"'},{id:"mix",text:"Generate AI analysis of your blueprint"}];function O8({isOpen:e,onClose:t,onStartTour:r}){const[n,s]=f.useState([]),i=f.useCallback(()=>{const o=[];I8.forEach(({id:l,text:c})=>{const u=document.querySelector(`[data-help-id="${l}"]`);if(!u)return;const d=u.getBoundingClientRect(),h=window.innerWidth,p=window.innerHeight;let m="right",b=d.right+12,g=d.top+d.height/2;d.right+200>h&&(d.left>200?(m="left",b=d.left-12):(m="bottom",b=d.left+d.width/2,g=d.bottom+12)),(m==="left"||m==="right")&&(g<50&&(g=50),g>p-50&&(g=p-50)),o.push({id:l,text:c,x:b,y:g,side:m})}),s(o)},[]);return f.useEffect(()=>{if(e){const o=setTimeout(i,100);return()=>clearTimeout(o)}},[e,i]),f.useEffect(()=>{if(!e)return;const o=l=>{l.key==="Escape"&&t()};return window.addEventListener("keydown",o),window.addEventListener("resize",i),()=>{window.removeEventListener("keydown",o),window.removeEventListener("resize",i)}},[e,t,i]),e?hn.createPortal(a.jsxs("div",{className:"fixed inset-0 z-50",children:[a.jsx("div",{className:"absolute inset-0 bg-background/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:t}),n.map(o=>a.jsxs("div",{className:H("fixed z-50 max-w-[200px] rounded-lg bg-foreground text-background px-3 py-2 text-sm shadow-lg animate-in fade-in zoom-in-95 duration-200",o.side==="left"&&"-translate-x-full",o.side==="top"&&"-translate-y-full -translate-x-1/2",o.side==="bottom"&&"-translate-x-1/2",(o.side==="left"||o.side==="right")&&"-translate-y-1/2"),style:{left:o.x,top:o.y},children:[o.text,a.jsx("div",{className:H("absolute w-2 h-2 bg-foreground rotate-45",o.side==="right"&&"-left-1 top-1/2 -translate-y-1/2",o.side==="left"&&"-right-1 top-1/2 -translate-y-1/2",o.side==="bottom"&&"-top-1 left-1/2 -translate-x-1/2",o.side==="top"&&"-bottom-1 left-1/2 -translate-x-1/2")})]},o.id)),a.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 bg-card border border-border rounded-2xl shadow-lg p-4 animate-in slide-in-from-bottom-4 duration-300",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(lc,{className:"h-4 w-4"}),a.jsx("span",{children:"Hover over highlighted elements"})]}),a.jsx("div",{className:"h-4 w-px bg-border"}),a.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>{t(),r()},className:"gap-2",children:[a.jsx(Yn,{className:"h-4 w-4"}),"Take a tour"]}),a.jsx(M,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8",children:a.jsx(Vt,{className:"h-4 w-4"})})]})})]}),document.body):null}function M8({onClick:e}){return a.jsx(M,{type:"button",variant:"outline",size:"icon",onClick:e,className:"h-9 w-9 rounded-full border-dashed","aria-label":"Show help",children:a.jsx(lc,{className:"h-4 w-4"})})}const Gl="blueprint_build_tour_completed",Wo=[{targetId:"picker",title:"Browse Your Library",description:"Click on categories to explore items. Select the ones you want to include in your blueprint."},{targetId:"add-step",title:"Organize Into Steps",description:"Create steps to organize your routine. Items you select flow into the active step."},{targetId:"steps",title:"Manage Your Steps",description:"Click a step to make it active. Add context like dosage or timing to each item."},{targetId:"mix",title:"Generate AI Analysis",description:"When you're ready, hit Build to get an AI-powered review of your blueprint!"}];function D8({isActive:e,onComplete:t,onSkip:r}){const[n,s]=f.useState(0),[i,o]=f.useState(null),l=Wo[n],c=f.useCallback(()=>{if(!l)return;const p=document.querySelector(`[data-help-id="${l.targetId}"]`);o(p?p.getBoundingClientRect():null)},[l]);f.useEffect(()=>{if(e)return c(),window.addEventListener("resize",c),window.addEventListener("scroll",c),()=>{window.removeEventListener("resize",c),window.removeEventListener("scroll",c)}},[e,c,n]),f.useEffect(()=>{if(!e)return;const p=m=>{m.key==="Escape"?r():(m.key==="ArrowRight"||m.key==="Enter")&&u()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e,n,r]);const u=f.useCallback(()=>{n<Wo.length-1?s(p=>p+1):(localStorage.setItem(Gl,"true"),t())},[n,t]),d=f.useCallback(()=>{localStorage.setItem(Gl,"true"),r()},[r]);if(!e||!l)return null;const h=(()=>{if(!i)return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};const p=window.innerHeight,m=window.innerWidth,b=320,g=180,v=16;let x=i.bottom+v,y=i.left+i.width/2-b/2;return x+g>p-20&&(x=i.top-g-v),y<20&&(y=20),y+b>m-20&&(y=m-b-20),{top:`${x}px`,left:`${y}px`}})();return hn.createPortal(a.jsxs("div",{className:"fixed inset-0 z-50",children:[a.jsx("div",{className:"absolute inset-0",children:a.jsxs("svg",{className:"w-full h-full",children:[a.jsx("defs",{children:a.jsxs("mask",{id:"spotlight-mask",children:[a.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),i&&a.jsx("rect",{x:i.left-8,y:i.top-8,width:i.width+16,height:i.height+16,rx:"12",fill:"black"})]})}),a.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"hsl(var(--background) / 0.8)",mask:"url(#spotlight-mask)",className:"animate-in fade-in duration-300"})]})}),i&&a.jsx("div",{className:"absolute rounded-xl border-2 border-primary shadow-glow-aqua pointer-events-none animate-pulse",style:{left:i.left-8,top:i.top-8,width:i.width+16,height:i.height+16}}),a.jsx(ee,{className:"fixed w-80 bg-card border-border shadow-lg animate-in slide-in-from-bottom-2 duration-300 z-10",style:h,children:a.jsxs(se,{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"font-semibold",children:l.title}),a.jsx("p",{className:"text-sm text-muted-foreground",children:l.description})]}),a.jsx(M,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:d,children:a.jsx(Vt,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex gap-1.5",children:Wo.map((p,m)=>a.jsx("div",{className:H("h-1.5 w-1.5 rounded-full transition-colors",m===n?"bg-primary":"bg-muted-foreground/30")},m))}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(M,{variant:"ghost",size:"sm",onClick:d,children:"Skip"}),a.jsxs(M,{size:"sm",onClick:u,className:"gap-1",children:[n===Wo.length-1?"Done":"Next",n<Wo.length-1&&a.jsx(Ng,{className:"h-4 w-4"})]})]})]})]})})]}),document.body)}function L8({onStartTour:e,onDismiss:t}){const[r,n]=f.useState(()=>localStorage.getItem(Gl)==="true");return r?null:a.jsxs("div",{className:"rounded-xl border border-primary/30 bg-primary/5 p-4 flex items-center justify-between gap-4 animate-in fade-in slide-in-from-top-2 duration-300",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:a.jsx(Yn,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"New here?"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Take a quick tour to learn how to build blueprints."})]})]}),a.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[a.jsx(M,{variant:"ghost",size:"sm",onClick:()=>{n(!0),localStorage.setItem(Gl,"true"),t()},children:"Maybe later"}),a.jsxs(M,{size:"sm",onClick:e,className:"gap-2",children:[a.jsx(Yn,{className:"h-4 w-4"}),"Take Tour"]})]})]})}function $8(){return localStorage.getItem(Gl)==="true"}function F8({onClick:e}){return a.jsx(M,{type:"button",variant:"ghost",size:"icon",onClick:e,className:"h-9 w-9 rounded-full","aria-label":"Take a tour",title:"Take a tour",children:a.jsx(Yn,{className:"h-4 w-4"})})}const sy="https://bapi.vdsai.cloud",p0=!0,m0=`${sy.replace(/\/$/,"")}/api/analyze-blueprint`,g0=`${sy.replace(/\/$/,"")}/api/generate-banner`,v0=`${sy.replace(/\/$/,"")}/api/generate-blueprint`,U8=m0||"https://piszvseyaefxekubphhf.supabase.co/functions/v1/analyze-blueprint",y0="blueprints_home_draft_v1";function B8(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=e.categories;return Array.isArray(t)?t.map(r=>({name:typeof r.name=="string"?r.name:"Untitled",items:Array.isArray(r.items)?r.items.filter(n=>typeof n=="string"):[]})).filter(r=>r.name.trim().length>0):[]}function x0(){const{inventoryId:e,blueprintId:t}=wo(),r=es(),n=Rn(),{toast:s}=Ot(),{session:i,user:o}=ke(),l=!!t,{data:c,isLoading:u}=Dv(t),d=e||(c==null?void 0:c.inventory_id)||void 0,{data:h,isLoading:p}=Yv(d),{data:m}=Gv(),{recentTags:b,addRecentTags:g}=Jv(),v=nC(),x=CB(),[y,w]=f.useState(""),[_,j]=f.useState("full"),[S,N]=f.useState({}),[k,R]=f.useState({}),[I,D]=f.useState(""),[A,$]=f.useState(""),[O,X]=f.useState(""),[U,J]=f.useState(!0),[T,E]=f.useState(null),[B,re]=f.useState(!1),[Y,fe]=f.useState([]),[q,de]=f.useState(!0),[he,z]=f.useState(!1),[ce,_e]=f.useState([]),[Ce,K]=f.useState(""),[te,xe]=f.useState(""),[Te,Ee]=f.useState(!0),[Oe,Me]=f.useState([]),[vt,Qe]=f.useState(null),[ei,ti]=f.useState(!1),[wc,gn]=f.useState(!1),[No,bc]=f.useState(""),[$t,ns]=f.useState(""),[ko,wh]=f.useState(""),[ri,_c]=f.useState(!1),[jc,ni]=f.useState(!1),[ss,Qi]=f.useState(!1),[is,si]=f.useState(!1),[bh,Co]=f.useState(()=>!$8()),Eo=f.useRef(!1),[ii,Ji]=f.useState([]),zr=!!(l&&c&&o&&c.creator_user_id===o.id),_h=p||l&&u,je=!!o||!!(i!=null&&i.access_token),ze=!o&&!(i!=null&&i.access_token)?"Sign in to generate a banner.":null,Ke=i!=null&&i.access_token?null:"Sign in to auto-generate a blueprint.",tr=f.useCallback(L=>{const F={},Z={};return!L||typeof L!="object"||Array.isArray(L)?{items:F,contexts:Z}:(Object.entries(L).forEach(([Q,ne])=>{if(!Array.isArray(ne))return;const we=[];ne.forEach(pe=>{if(typeof pe=="string"){we.push(pe);return}if(!pe||typeof pe!="object")return;const le=typeof pe.name=="string"?pe.name:"";le&&(we.push(le),typeof pe.context=="string"&&pe.context.trim()&&(Z[`${Q}::${le}`]=pe.context.trim()))}),we.length>0&&(F[Q]=we)}),{items:F,contexts:Z})},[]),rr=f.useCallback(L=>!L||typeof L!="object"||!Array.isArray(L)?[]:L.filter(F=>F&&typeof F=="object").map((F,Z)=>{const Q=F,ne=(Q.items||[]).map(we=>{const pe=typeof we.category=="string"?we.category:"",le=typeof we.name=="string"?we.name:"";return!pe||!le?null:`${pe}::${le}`}).filter(we=>!!we);return{id:Q.id||`step-${Z}`,title:Q.title||"",description:typeof Q.description=="string"?Q.description:"",itemKeys:ne}}),[]),qr=f.useCallback(L=>{const F={},Z={};return!L||typeof L!="object"||!Array.isArray(L)?{items:F,contexts:Z}:(L.forEach(Q=>{(Q.items||[]).forEach(we=>{const pe=typeof we.category=="string"?we.category:"",le=typeof we.name=="string"?we.name:"";!pe||!le||(F[pe]||(F[pe]=[]),F[pe].includes(le)||F[pe].push(le),typeof we.context=="string"&&we.context.trim()&&(Z[`${pe}::${le}`]=we.context.trim()))})}),{items:F,contexts:Z})},[]);f.useEffect(()=>{var L,F;if(!(!h||ei)&&!(l&&!c)){if(Ji(B8(h.generated_schema)),_e(Zv(h.review_sections).slice(0,fl)),Ee(h.include_score??!0),l&&c){const Z=tr(c.selected_items),Q=qr(c.steps),ne={...Z.items};Object.entries(Q.items).forEach(([le,Se])=>{const $e=new Set(ne[le]||[]);Se.forEach(kt=>$e.add(kt)),ne[le]=Array.from($e)});const we={...Z.contexts,...Q.contexts};w(c.title||h.title),N(ne),R(we),D(c.mix_notes||""),$(c.review_prompt||""),X(c.llm_review||""),E(c.banner_url||null),J(!0),fe(c.tags.map(le=>le.slug)),de(c.is_public);const pe=rr(c.steps);Me(pe),Qe(((L=pe[0])==null?void 0:L.id)||null),j("full")}else{w(h.title),Me([]),Qe(null),E(null),J(!0),j("full");try{const Z=sessionStorage.getItem(y0);if(Z){const Q=JSON.parse(Z);if(sessionStorage.removeItem(y0),Q&&Q.version===1&&typeof Q.inventoryId=="string"&&Q.inventoryId===h.id){w(typeof Q.title=="string"&&Q.title.trim()?Q.title:h.title);const ne=Q.selectedItems&&typeof Q.selectedItems=="object"?Q.selectedItems:{};N(ne);const we=Q.itemContexts&&typeof Q.itemContexts=="object"?Q.itemContexts:{};R(we),D(""),$(""),X(""),fe([]),de(!0),E(null),J(!0);const pe=Q.modeHint==="simple"?"simple":Q.modeHint==="full"?"full":null;pe&&j(pe);const le=Array.isArray(Q.steps)?Q.steps:[];if(le.length>0)Me(le),Qe(((F=le[0])==null?void 0:F.id)||null);else if(pe!=="simple"){const Se=Object.entries(ne).flatMap(([$e,kt])=>(kt||[]).map(fr=>`${$e}::${fr}`));if(Se.length>0){const $e=crypto.randomUUID();Me([{id:$e,title:"",description:"",itemKeys:Se}]),Qe($e)}else Me([]),Qe(null)}else Me([]),Qe(null)}}}catch{}}ti(!0)}},[h,c,l,ei,tr,rr,qr]),f.useEffect(()=>{h&&bc(L=>L||y||h.title)},[h,y]);const ot=f.useMemo(()=>Object.values(S).reduce((L,F)=>L+F.length,0),[S]),nr=f.useMemo(()=>{const L=new Map;return ii.forEach(F=>{L.set(F.name,new Set(F.items))}),L},[ii]),Wr=ot>0||Oe.length>0;f.useEffect(()=>{Eo.current||h&&(ot<=0||(Eo.current=!0,gr({eventName:"edit_blueprint",userId:o==null?void 0:o.id,blueprintId:t??null,path:n.pathname,metadata:{inventoryId:h.id,selectedCount:ot,isEditing:l}})))},[h,ot,o==null?void 0:o.id,t,n.pathname,l]),f.useEffect(()=>{h&&(l||gr({eventName:"start_build",userId:o==null?void 0:o.id,blueprintId:t??null,path:n.pathname,metadata:{inventoryId:h.id}}))},[h,l,o==null?void 0:o.id,t,n.pathname]);const Sc=f.useMemo(()=>ey(ce),[ce]),jh=(l?c==null?void 0:c.title:h==null?void 0:h.title)||(l?"EDIT":"BUILD"),An=f.useCallback((L,F)=>`${L}::${F}`,[]),Nc=f.useCallback(L=>{Me(F=>F.map(Z=>({...Z,itemKeys:Z.itemKeys.filter(Q=>Q!==L)})))},[]),kc=f.useCallback(L=>{Me(F=>{var Q;if(F.length===0){const ne=crypto.randomUUID();return Qe(ne),[{id:ne,title:"",description:"",itemKeys:[L]}]}const Z=((Q=F.find(ne=>ne.id===vt))==null?void 0:Q.id)||F[F.length-1].id;return F.map(ne=>ne.id!==Z||ne.itemKeys.includes(L)?ne:{...ne,itemKeys:[...ne.itemKeys,L]})})},[vt]),RE=f.useCallback((L,F)=>{const Z=An(L,F);N(Q=>{const ne=new Set(Q[L]||[]),we=ne.has(F);return we?ne.delete(F):ne.add(F),_==="full"?we?Nc(Z):kc(Z):we&&R(pe=>{const le={...pe};return delete le[Z],le}),{...Q,[L]:Array.from(ne)}})},[kc,_,An,Nc]),PE=f.useCallback((L,F)=>{Ji(Z=>Z.map(Q=>Q.name===L?{...Q,items:Q.items.includes(F)?Q.items:[...Q.items,F]}:Q)),N(Z=>({...Z,[L]:[...Z[L]||[],F]})),_==="full"&&kc(An(L,F))},[kc,_,An]),oy=f.useCallback((L,F)=>{const Z=An(L,F);N(Q=>({...Q,[L]:(Q[L]||[]).filter(ne=>ne!==F)})),R(Q=>{const ne={...Q};return delete ne[Z],ne}),_==="full"&&Nc(Z)},[_,An,Nc]),ly=f.useCallback((L,F,Z)=>{R(Q=>({...Q,[`${L}::${F}`]:Z}))},[]),cy=f.useCallback(()=>{N({}),R({}),Me(L=>L.map(F=>({...F,itemKeys:[]})))},[]),AE=f.useCallback(()=>{const L={id:crypto.randomUUID(),title:"",description:"",itemKeys:[]};Me(F=>[...F,L]),Qe(L.id)},[]),IE=f.useCallback((L,F)=>{Me(Z=>Z.map(Q=>Q.id===L?{...Q,...F}:Q))},[]),OE=f.useCallback(L=>{Me(F=>{const Z=F.find(we=>we.id===L);if(!Z)return F;const Q=new Set(Z.itemKeys);Q.size>0&&(N(we=>{const pe={};return Object.entries(we).forEach(([le,Se])=>{const $e=Se.filter(kt=>!Q.has(An(le,kt)));$e.length>0&&(pe[le]=$e)}),pe}),R(we=>{const pe={...we};return Q.forEach(le=>{delete pe[le]}),pe}));const ne=F.filter(we=>we.id!==L);return vt===L&&ne.length>0?Qe(ne[ne.length-1].id):ne.length===0&&Qe(null),ne})},[vt,An]),ME=f.useCallback((L,F)=>{Me(Z=>{if(L===F)return Z;const Q=[...Z],[ne]=Q.splice(L,1);return Q.splice(F,0,ne),Q})},[]),DE=L=>{J(L),L||E(null)},LE=f.useCallback(async()=>{var F,Z,Q;if(!h)return;if(ot===0){s({title:"No items selected",description:"Select at least one item before generating the review.",variant:"destructive"});return}if(!(i!=null&&i.access_token)){s({title:"Sign in required",description:"Please sign in to generate a review.",variant:"destructive"});return}const L={};Object.entries(S).forEach(([ne,we])=>{we.length>0&&(L[ne]=we.map(pe=>({name:pe,context:k[`${ne}::${pe}`]||void 0})))}),z(!0),X("");try{const ne=await fetch(U8,{method:"POST",headers:{"Content-Type":"application/json",Authorization:p0&&(i!=null&&i.access_token)?`Bearer ${i.access_token}`:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBpc3p2c2V5YWVmeGVrdWJwaGhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwODE3NTEsImV4cCI6MjA4NDY1Nzc1MX0.odmCphs9gpipbjF7zp639J0r8s48SYHnpNsjQvfICSc"},body:JSON.stringify({title:y.trim()||h.title,inventoryTitle:h.title,selectedItems:L,mixNotes:I.trim(),reviewPrompt:A.trim(),reviewSections:Sc,includeScore:Te})});if(!ne.ok){const $e=await ne.json().catch(()=>({}));throw new Error($e.error||"Failed to analyze blueprint")}if(!ne.body)throw new Error("No response body");const we=ne.body.getReader(),pe=new TextDecoder;let le="",Se="";for(;;){const{done:$e,value:kt}=await we.read();if($e)break;Se+=pe.decode(kt,{stream:!0});let fr;for(;(fr=Se.indexOf(`
`))!==-1;){let sr=Se.slice(0,fr);if(Se=Se.slice(fr+1),sr.endsWith("\r")&&(sr=sr.slice(0,-1)),sr.startsWith(":")||sr.trim()===""||!sr.startsWith("data: "))continue;const To=sr.slice(6).trim();if(To==="[DONE]")break;try{const Ro=(Q=(Z=(F=JSON.parse(To).choices)==null?void 0:F[0])==null?void 0:Z.delta)==null?void 0:Q.content;Ro&&(le+=Ro,X(le))}catch{Se=sr+`
`+Se;break}}}s({title:"Analysis complete!",description:"Your blueprint has been reviewed."}),gr({eventName:"generate_ai_review",userId:o==null?void 0:o.id,blueprintId:t??null,path:n.pathname,metadata:{inventoryId:(h==null?void 0:h.id)??null,selectedCount:ot,isEditing:l}})}catch(ne){s({title:"Analysis failed",description:Ma(ne,"Please try again."),variant:"destructive"})}finally{z(!1)}},[h,S,k,y,I,A,Sc,Te,ot,s,t,n.pathname,o==null?void 0:o.id,l,i==null?void 0:i.access_token]),uy=f.useCallback(async()=>{var Z,Q;if(i!=null&&i.access_token)return i.access_token;const{data:L}=await P.auth.getSession();if((Z=L.session)!=null&&Z.access_token)return L.session.access_token;const{data:F}=await P.auth.refreshSession();return((Q=F.session)==null?void 0:Q.access_token)??null},[i==null?void 0:i.access_token]),dy=f.useCallback(L=>{var ne,we;const F={},Z={},Q=[];(L.steps||[]).forEach(pe=>{var Se,$e;const le=[];(pe.items||[]).forEach(kt=>{var Ro,fy;const fr=(Ro=kt.category)==null?void 0:Ro.trim(),sr=(fy=kt.name)==null?void 0:fy.trim();if(!fr||!sr)return;const To=nr.get(fr);if(!To||!To.has(sr))return;F[fr]||(F[fr]=[]),F[fr].includes(sr)||F[fr].push(sr);const Nh=`${fr}::${sr}`;le.push(Nh),kt.context&&kt.context.trim()&&(Z[Nh]=kt.context.trim())}),le.length>0&&Q.push({id:crypto.randomUUID(),title:((Se=pe.title)==null?void 0:Se.trim())||"",description:(($e=pe.description)==null?void 0:$e.trim())||"",itemKeys:le})}),(ne=L.title)!=null&&ne.trim()&&w(L.title.trim()),N(F),R(Z),Me(Q),Qe(((we=Q[0])==null?void 0:we.id)??null),X(""),E(null)},[nr]),Sh=f.useCallback(async()=>{if(h){if(!v0){s({title:"Auto-generation unavailable",description:"The agentic backend is not configured.",variant:"destructive"});return}if(!(i!=null&&i.access_token)){s({title:"Sign in required",description:"Please sign in to auto-generate a blueprint.",variant:"destructive"});return}_c(!0);try{const L=await fetch(v0,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i.access_token}`},body:JSON.stringify({title:No.trim()||void 0,description:$t.trim()||void 0,notes:ko.trim()||void 0,inventoryTitle:h.title,categories:ii.map(Z=>({name:Z.name,items:Z.items}))})});if(!L.ok){const Z=await L.json().catch(()=>({}));throw new Error(Z.error||"Failed to auto-generate blueprint")}const F=await L.json();if(!(F!=null&&F.steps)||F.steps.length===0)throw new Error("No steps were generated");dy(F),gn(!1),s({title:"Blueprint generated",description:"Your steps and items have been updated."}),gr({eventName:"auto_generate_blueprint",userId:o==null?void 0:o.id,blueprintId:t??null,path:n.pathname,metadata:{inventoryId:h.id,stepCount:F.steps.length}})}catch(L){s({title:"Auto-generation failed",description:Ma(L,"Please try again."),variant:"destructive"})}finally{_c(!1)}}},[h,ii,No,$t,ko,dy,s,i==null?void 0:i.access_token,o==null?void 0:o.id,t,n.pathname]),$E=f.useCallback(()=>{if(Wr){ni(!0);return}Sh()},[Wr,Sh]),hy=f.useCallback(async()=>{if(!h)return;if(!g0)return s({title:"Banner generation unavailable",description:"The agentic backend is not configured.",variant:"destructive"}),null;const L=await uy();if(!L)return s({title:"Sign in required",description:"Please sign in to generate a banner.",variant:"destructive"}),null;if(!y.trim())return s({title:"Title required",description:"Add a blueprint title before generating a banner.",variant:"destructive"}),null;re(!0);try{const F=await fetch(g0,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${L}`},body:JSON.stringify({title:y.trim(),inventoryTitle:h.title,tags:Y})});if(!F.ok){const Q=await F.json().catch(()=>({}));throw new Error(Q.error||"Failed to generate banner")}const Z=await F.json();if(!(Z!=null&&Z.bannerUrl))throw new Error("No banner URL returned");return E(Z.bannerUrl),Z.bannerUrl}catch(F){throw s({title:"Banner generation failed",description:Ma(F,"Please try again."),variant:"destructive"}),F}finally{re(!1)}},[h,uy,y,Y,s]),FE=async()=>{if(l&&t&&!zr){s({title:"Permission denied",description:"Only the blueprint owner can edit this blueprint.",variant:"destructive"});return}if(!(i!=null&&i.access_token)){s({title:"Sign in required",description:"Please sign in to publish your blueprint.",variant:"destructive"});return}if(h){if(!y.trim()){s({title:"Title required",description:l?"Add a blueprint title before saving changes.":"Add a blueprint title before publishing.",variant:"destructive"});return}if(ot===0){s({title:"Select items",description:l?"Pick at least one item before saving changes.":"Pick at least one item before publishing.",variant:"destructive"});return}if(Y.length>4){s({title:"Too many tags",description:"Please use 4 tags or fewer.",variant:"destructive"});return}if(Y.length===0){s({title:"Tags required",description:"Add at least one tag so the wall can surface your blueprint.",variant:"destructive"});return}try{const L={};Object.entries(S).forEach(([le,Se])=>{Se.length>0&&(L[le]=Se.map($e=>({name:$e,context:k[`${le}::${$e}`]||void 0})))});const F=new Map;Object.entries(S).forEach(([le,Se])=>{Se.forEach($e=>{const kt=An(le,$e);F.set(kt,{category:le,name:$e,context:k[kt]||void 0})})});const Z=Oe.map(le=>({id:le.id,title:le.title,description:le.description||null,items:le.itemKeys.map(Se=>F.get(Se)).filter(Se=>!!Se)})),Q=new Set(Z.flatMap(le=>le.items.map(Se=>`${Se.category}::${Se.name}`))),ne=Array.from(F.entries()).filter(([le])=>!Q.has(le)).map(([,le])=>le),we=_==="simple"?null:Z.length>0?[...Z,...ne.length>0?[{id:"unassigned",title:"Unassigned",description:null,items:ne}]:[]]:null;let pe=T;if(U&&!pe&&(pe=await hy()),U&&!pe)throw new Error("Banner generation is required before publishing.");if(l&&t){const le=await x.mutateAsync({blueprintId:t,title:y.trim(),selectedItems:L,steps:we,mixNotes:I.trim()?I.trim():null,reviewPrompt:A.trim()?A.trim():null,bannerUrl:pe,llmReview:O,tags:Y,isPublic:q});g(Y),gr({eventName:"save_blueprint",userId:o==null?void 0:o.id,blueprintId:le.id,path:n.pathname,metadata:{isEditing:!0,hasReview:!!O,tagCount:Y.length}}),gr({eventName:"publish_blueprint",userId:o==null?void 0:o.id,blueprintId:le.id,path:n.pathname,metadata:{isPublic:q,isEditing:!0}}),r(`/blueprint/${le.id}`)}else{const le=await v.mutateAsync({inventoryId:h.id,title:y.trim(),selectedItems:L,steps:we,mixNotes:I.trim()?I.trim():null,reviewPrompt:A.trim()?A.trim():null,bannerUrl:pe,llmReview:O,tags:Y,isPublic:q,sourceBlueprintId:null});g(Y),gr({eventName:"save_blueprint",userId:o==null?void 0:o.id,blueprintId:le.id,path:n.pathname,metadata:{isEditing:!1,hasReview:!!O,tagCount:Y.length}}),gr({eventName:"publish_blueprint",userId:o==null?void 0:o.id,blueprintId:le.id,path:n.pathname,metadata:{isPublic:q,isEditing:!1}}),r(`/blueprint/${le.id}`)}}catch(L){s({title:l?"Update failed":"Publish failed",description:L instanceof Error?L.message:"Please try again.",variant:"destructive"})}}};return l&&c&&!zr?a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Nt,{}),a.jsx("main",{className:"max-w-3xl mx-auto px-4 py-12",children:a.jsx(ee,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:a.jsxs(se,{className:"py-12 text-center space-y-3",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"You cannot edit this blueprint"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Only the original creator can make changes."}),a.jsx(be,{to:`/blueprint/${c.id}`,children:a.jsx(M,{children:"Back to blueprint"})})]})})})]}):a.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[a.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none -z-10",children:[a.jsx("div",{className:"absolute -top-40 -right-40 w-[500px] h-[500px] bg-primary/8 rounded-full blur-3xl animate-drift"}),a.jsx("div",{className:"absolute top-1/2 -left-32 w-96 h-96 bg-accent/15 rounded-full blur-3xl animate-float"}),a.jsx("div",{className:"absolute -bottom-20 right-1/4 w-80 h-80 bg-secondary/10 rounded-full blur-3xl animate-pulse-soft"}),a.jsx("div",{className:"absolute top-20 right-20 w-4 h-4 bg-primary/20 rounded-full blur-sm animate-float-delayed"}),a.jsx("div",{className:"absolute top-40 right-40 w-2 h-2 bg-accent/30 rounded-full blur-sm animate-float-slow"}),a.jsx("div",{className:"absolute bottom-40 left-20 w-3 h-3 bg-primary/15 rounded-full blur-sm animate-drift"})]}),a.jsx(Nt,{}),a.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-3xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs(be,{to:l&&t?`/blueprint/${t}`:"/inventory",className:"inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground",children:[a.jsx(wj,{className:"h-4 w-4"}),l?"Back to blueprint":"Back to library"]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(F8,{onClick:()=>si(!0)}),a.jsx(M8,{onClick:()=>Qi(!0)})]})]}),a.jsxs("div",{className:"text-center mb-12 pt-8 animate-fade-in",children:[a.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-black tracking-tight mb-4 relative inline-block",children:[a.jsxs("span",{className:"relative inline-block",style:{fontFamily:"'Impact', 'Haettenschweiler', 'Franklin Gothic Bold', 'Charcoal', 'Helvetica Inserat', sans-serif",letterSpacing:"0.06em"},children:[a.jsx("span",{className:"absolute inset-0 text-border/40",style:{transform:"translate(4px, 4px)"},"aria-hidden":"true",children:jh.toUpperCase()}),a.jsx("span",{className:"absolute inset-0 text-border/60",style:{transform:"translate(2px, 2px)"},"aria-hidden":"true",children:jh.toUpperCase()}),a.jsx("span",{className:"text-gradient-themed animate-shimmer bg-[length:200%_auto] relative",children:jh.toUpperCase()})]}),a.jsx("span",{className:"absolute -inset-4 bg-primary/10 blur-2xl rounded-full animate-pulse-soft -z-10"})]}),a.jsx("p",{className:"text-lg text-muted-foreground max-w-md mx-auto",children:l?"Update your blueprint, regenerate the review, and save the changes.":"Build your blueprint from this library"})]}),_h?a.jsx(ee,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:a.jsxs(se,{className:"p-6",children:[a.jsx(Ae,{className:"h-6 w-48"}),a.jsx(Ae,{className:"h-24 w-full mt-4"})]})}):h?a.jsxs("div",{className:"space-y-6",children:[bh&&a.jsx(L8,{onStartTour:()=>{Co(!1),si(!0)},onDismiss:()=>Co(!1)}),a.jsx(y8,{currentStep:O?3:ot>0?2:1}),a.jsx("section",{className:"animate-fade-in",style:{animationDelay:"0.05s"},children:a.jsxs("div",{className:"bg-card/60 backdrop-blur-glass rounded-2xl border border-border/50 overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-border/30 space-y-3",children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[a.jsx(Ue,{value:y,onChange:L=>w(L.target.value),placeholder:"Name your blueprint...",className:"text-xl font-bold bg-transparent border-none focus-visible:ring-2 focus-visible:ring-primary/50 h-14 flex-1"}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(M,{type:"button",variant:"outline",className:"gap-2",onClick:()=>gn(L=>!L),disabled:!p0,children:[a.jsx(_r,{className:"h-4 w-4"}),"Auto-generate Blueprint"]})})]}),Ke&&a.jsx("p",{className:"text-xs text-muted-foreground",children:Ke}),wc&&a.jsxs("div",{className:"grid gap-3 rounded-lg border border-border/40 bg-muted/20 p-4",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(qe,{children:"Title"}),a.jsx(Ue,{value:No,onChange:L=>bc(L.target.value),placeholder:"Home Workout Blueprint"})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(qe,{children:"Description"}),a.jsx(Wt,{value:$t,onChange:L=>ns(L.target.value),placeholder:"What should this routine focus on? (Optional)",rows:2})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(qe,{children:"Notes"}),a.jsx(Wt,{value:ko,onChange:L=>wh(L.target.value),placeholder:"Any constraints or preferences? (Optional)",rows:2})]}),a.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"This will replace your current steps and selected items."}),a.jsx(M,{type:"button",onClick:$E,disabled:ri||!(i!=null&&i.access_token),children:ri?"Generating...":"Generate blueprint"})]})]})]}),a.jsx("div",{className:"p-4","data-help-id":"picker",children:a.jsx(Vk,{categories:ii,selectedItems:S,onToggleItem:RE,onAddCustomItem:PE})})]})}),a.jsx(d8,{open:jc,onOpenChange:ni,children:a.jsxs(XC,{children:[a.jsxs(ZC,{children:[a.jsx(tE,{children:"Replace current blueprint?"}),a.jsx(rE,{children:"This will overwrite your current steps and selected items. You cant undo this action."})]}),a.jsxs(eE,{children:[a.jsx(sE,{children:"Cancel"}),a.jsx(nE,{onClick:()=>{ni(!1),Sh()},children:"Replace and generate"})]})]})}),a.jsx("section",{className:"animate-fade-in",style:{animationDelay:"0.1s"},children:a.jsxs(ee,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:[a.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(pt,{children:_==="simple"?"Selected items":"Steps"}),_==="simple"&&a.jsx("p",{className:"text-xs text-muted-foreground",children:"Simple mode hides steps. If you publish in simple mode, your blueprint will be published without steps."})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`text-xs ${_==="full"?"text-foreground":"text-muted-foreground"}`,children:"Full"}),a.jsx(zn,{checked:_==="simple",onCheckedChange:L=>{var le;const F=L?"simple":"full";if(j(F),F!=="full")return;const Z=Object.entries(S).flatMap(([Se,$e])=>$e.map(kt=>`${Se}::${kt}`)),Q=new Set(Z);let ne=Oe.map(Se=>({...Se,itemKeys:Se.itemKeys.filter($e=>Q.has($e))}));const we=new Set(ne.flatMap(Se=>Se.itemKeys)),pe=Z.filter(Se=>!we.has(Se));if(pe.length>0)if(ne.length===0){const Se=crypto.randomUUID();ne=[{id:Se,title:"",description:"",itemKeys:pe}],Qe(Se)}else{const Se=((le=ne.find($e=>$e.id===vt))==null?void 0:le.id)||ne[ne.length-1].id;ne=ne.map($e=>$e.id!==Se?$e:{...$e,itemKeys:Array.from(new Set([...$e.itemKeys,...pe]))})}Me(ne),ne.length===0?Qe(null):ne.some(Se=>Se.id===vt)||Qe(ne[ne.length-1].id)}}),a.jsx("span",{className:`text-xs ${_==="simple"?"text-foreground":"text-muted-foreground"}`,children:"Simple"})]})]}),a.jsx(se,{className:"space-y-4",children:_==="simple"?ot>0?a.jsx(Qk,{title:"Build Blueprint",selectedItems:S,itemContexts:k,onRemoveItem:oy,onUpdateContext:ly,onClear:cy}):a.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select items from the library above to start building."}):a.jsxs(a.Fragment,{children:[a.jsx(A8,{steps:Oe,activeStepId:vt,onSetActive:Qe,onUpdateStep:IE,onRemoveStep:OE,onAddStep:AE,onReorderSteps:ME,onRemoveItem:oy,onUpdateItemContext:ly,itemContexts:k}),ot>0&&a.jsx("div",{className:"flex justify-end pt-2",children:a.jsx(M,{type:"button",variant:"ghost",onClick:cy,children:"Clear all selections"})})]})})]})}),a.jsx("section",{className:"flex justify-center py-8 animate-fade-in",style:{animationDelay:"0.2s"},"data-help-id":"mix",children:a.jsx(f8,{onClick:LE,disabled:ot===0,isLoading:he,itemCount:ot})}),a.jsx("section",{className:"animate-fade-in",style:{animationDelay:"0.15s"},children:a.jsx(Pv,{children:a.jsxs(ee,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:[a.jsx(Av,{asChild:!0,children:a.jsxs(Ge,{className:"cursor-pointer hover:bg-muted/20 transition-colors",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(pt,{className:"text-base flex items-center gap-2",children:[a.jsx(Sj,{className:"h-4 w-4 text-muted-foreground"}),"Review Options"]}),a.jsx(uo,{className:"h-4 w-4 text-muted-foreground transition-transform [[data-state=open]>&]:rotate-180"})]}),a.jsx("p",{className:"text-xs text-muted-foreground text-left",children:"Build notes, review focus, custom sections"})]})}),a.jsx(Iv,{children:a.jsx(se,{className:"pt-0 pb-4 px-4 space-y-4",children:a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{htmlFor:"mix-notes",children:"Blueprint Notes"}),a.jsx(Wt,{id:"mix-notes",value:I,onChange:L=>D(L.target.value),placeholder:"Any additional context for your blueprint...",rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{htmlFor:"review-prompt",children:"Review focus (optional)"}),a.jsx(Wt,{id:"review-prompt",value:A,onChange:L=>$(L.target.value),placeholder:"What should the AI focus on?",rows:3})]}),a.jsxs("div",{className:"space-y-3 sm:col-span-2",children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx(qe,{children:"Review sections"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Overview is always included."})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs font-medium",children:"Include score"}),a.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Adds a 1100 score in Overview."})]}),a.jsx(zn,{checked:Te,onCheckedChange:Ee,className:"scale-90"})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(Ie,{variant:"secondary",children:Bs}),ce.map(L=>a.jsxs(Ie,{variant:"secondary",className:"gap-1",children:[L,a.jsx(M,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4",onClick:()=>{_e(F=>F.filter(Z=>Z!==L)),xe("")},"aria-label":"Remove section",children:a.jsx(Vt,{className:"h-3 w-3"})})]},L))]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ue,{value:Ce,onChange:L=>K(L.target.value),placeholder:"Add custom section",onKeyDown:L=>{if(L.key==="Enter"){L.preventDefault();const F=xd(Ce);if(!F)return;if(F.toLowerCase()===Bs.toLowerCase()){K("");return}if(ce.some(Z=>Z.toLowerCase()===F.toLowerCase())){K("");return}if(ce.length>=fl){xe(`You can add up to ${Kl} sections total.`);return}_e(Z=>[...Z,F]),K(""),xe("")}}}),a.jsx(M,{type:"button",variant:"outline",onClick:()=>{const L=xd(Ce);if(L){if(L.toLowerCase()===Bs.toLowerCase()){K("");return}if(ce.some(F=>F.toLowerCase()===L.toLowerCase())){K("");return}if(ce.length>=fl){xe(`You can add up to ${Kl} sections total.`);return}_e(F=>[...F,L]),K(""),xe("")}},children:"Add"})]}),te&&a.jsx("p",{className:"text-sm text-destructive",children:te})]})]})})})]})})}),he&&a.jsx("section",{className:"animate-fade-in-scale",children:a.jsx(ee,{className:"overflow-hidden bg-card/60 backdrop-blur-glass border-primary/20",children:a.jsx(se,{className:"p-0",children:a.jsx(iE,{})})})}),O&&!he&&a.jsx("section",{className:"animate-fade-in-up",children:a.jsx(_m,{review:O,sectionOrder:Sc})}),O&&he&&a.jsx("section",{className:"animate-fade-in",children:a.jsx(_m,{review:O,isStreaming:!0,sectionOrder:Sc})}),ot>0&&!he&&a.jsx("section",{className:"animate-fade-in",style:{animationDelay:"0.25s"},children:a.jsxs(ee,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:[a.jsx(Ge,{children:a.jsxs(pt,{className:"flex items-center gap-2",children:[a.jsx(_r,{className:"h-5 w-5 text-primary"}),l?"Save changes":"Publish Blueprint"]})}),a.jsxs(se,{className:"space-y-4",children:[a.jsxs("div",{className:"rounded-lg border border-border/60 px-4 py-3 space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Generate banner"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a 4:1 banner for this blueprint."})]}),a.jsx(zn,{checked:U,onCheckedChange:DE})]}),U&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"aspect-[4/1] w-full overflow-hidden rounded-lg border border-border/60 bg-muted/40",children:T?a.jsx("img",{src:T,alt:"Blueprint banner",className:"h-full w-full object-cover",loading:"lazy"}):a.jsx("div",{className:"h-full w-full flex items-center justify-center text-xs text-muted-foreground",children:"No banner yet"})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs(M,{type:"button",variant:"outline",size:"sm",className:"gap-2",onClick:()=>hy(),disabled:B||!je,children:[a.jsx(bP,{className:`h-3.5 w-3.5 ${B?"animate-spin":""}`}),T?"Regenerate banner":"Generate banner"]}),T&&a.jsx(M,{type:"button",variant:"ghost",size:"sm",onClick:()=>E(null),disabled:B,children:"Remove"})]}),ze&&a.jsx("p",{className:"text-xs text-muted-foreground",children:ze})]})]}),b.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(L=>a.jsxs(M,{type:"button",size:"sm",variant:"outline",onClick:()=>fe(F=>F.includes(L)?F:[...F,L]),children:["#",L]},L))}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{children:"Tags"}),a.jsx(Qv,{value:Y,onChange:fe,suggestions:m||[],maxTags:12})]}),a.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 px-4 py-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Public blueprint"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Public blueprints appear on the wall."})]}),a.jsx(zn,{checked:q,onCheckedChange:de})]}),a.jsxs(M,{onClick:FE,disabled:l?x.isPending:v.isPending,className:"w-full gap-2",size:"lg",children:[a.jsx(_r,{className:"h-4 w-4"}),l?"Save Changes":"Publish Blueprint"]})]})]})}),a.jsx("footer",{className:"text-center py-8 text-sm text-muted-foreground border-t border-border/30 mt-8",children:a.jsx("p",{children:"Blueprint analysis is for informational purposes only. Always do your own research."})}),a.jsx(pn,{})]}):a.jsx(ee,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:a.jsx(se,{className:"py-12 text-center",children:"Library not found."})})]}),a.jsx(O8,{isOpen:ss,onClose:()=>Qi(!1),onStartTour:()=>{Qi(!1),si(!0)}}),a.jsx(D8,{isActive:is,onComplete:()=>si(!1),onSkip:()=>si(!1)})]})}function z8(e){if(typeof e=="string")return e;if(!e||typeof e!="object")return String(e);const t=typeof e.name=="string"?e.name:"Untitled",r=typeof e.context=="string"&&e.context.trim()?e.context.trim():"";return r?`${t} [${r}]`:t}function q8(e){const t=typeof e.name=="string"?e.name:"Untitled",r=typeof e.context=="string"&&e.context.trim()?e.context.trim():"";return r?`${t} [${r}]`:t}function W8(e){return!e||typeof e!="object"||Array.isArray(e)?[]:Object.entries(e).filter(([,t])=>Array.isArray(t))}function V8(e){return!e||typeof e!="object"?[]:Array.isArray(e)?e.filter(t=>!!t&&typeof t=="object"):[]}function H8(){var j,S,N;const e=es(),{blueprintId:t}=wo(),{data:r,isLoading:n}=Dv(t),{data:s,isLoading:i}=EB(t),o=TB(),l=sC(),{toast:c}=Ot(),{user:u}=ke(),{followedIds:d,toggleFollow:h}=fh(),[p,m]=f.useState(""),b=Rn(),g=f.useRef(null),v=r?V8(r.steps):[],x=!!(u&&r&&u.id===r.creator_user_id);f.useEffect(()=>{r!=null&&r.id&&g.current!==r.id&&(g.current=r.id,gr({eventName:"view_blueprint",userId:u==null?void 0:u.id,blueprintId:r.id,path:b.pathname}))},[r==null?void 0:r.id,b.pathname,u==null?void 0:u.id]);const y=async()=>{if(r)try{await l.mutateAsync({blueprintId:r.id,liked:r.user_liked})}catch(k){c({title:"Action failed",description:k instanceof Error?k.message:"Please try again.",variant:"destructive"})}},w=async()=>{if(t&&p.trim())try{await o.mutateAsync({blueprintId:t,content:p.trim()}),m("")}catch(k){c({title:"Comment failed",description:k instanceof Error?k.message:"Please try again.",variant:"destructive"})}},_=async k=>{if(!u){c({title:"Sign in required",description:"Please sign in to follow tags."});return}try{await h(k)}catch(R){c({title:"Tag update failed",description:R instanceof Error?R.message:"Please try again.",variant:"destructive"})}};return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Nt,{}),a.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-8 space-y-6",children:[n?a.jsxs(ee,{children:[a.jsx(Ge,{children:a.jsx(Ae,{className:"h-6 w-48"})}),a.jsx(se,{children:a.jsx(Ae,{className:"h-24 w-full"})})]}):r?a.jsxs(a.Fragment,{children:[a.jsxs("section",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(M,{variant:"ghost",size:"icon",onClick:()=>e(-1),"aria-label":"Go back",children:a.jsx(wj,{className:"h-4 w-4"})}),a.jsx("h1",{className:"text-3xl font-semibold",children:r.title})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.map(k=>a.jsxs(Ie,{variant:"outline",className:`text-xs cursor-pointer transition-colors border ${d.has(k.id)?"bg-primary/15 text-primary border-primary/30 hover:bg-primary/20":"bg-muted/40 text-muted-foreground border-border/60 hover:bg-muted/60"}`,onClick:()=>_(k),children:["#",k.slug]},k.id))})]}),r.banner_url&&a.jsx("div",{className:"overflow-hidden rounded-xl border border-border/60 bg-muted/30",children:a.jsx("div",{className:"aspect-[4/1] w-full",children:a.jsx("img",{src:r.banner_url,alt:"Blueprint banner",className:"h-full w-full object-cover",loading:"lazy"})})}),a.jsxs(ee,{children:[a.jsx(Ge,{className:"space-y-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(be,{to:`/u/${r.creator_user_id}`,className:"flex items-center gap-3 hover:opacity-80 transition-opacity",children:[a.jsxs(ln,{className:"h-10 w-10",children:[a.jsx(cn,{src:((j=r.creator_profile)==null?void 0:j.avatar_url)||void 0}),a.jsx(un,{children:(((S=r.creator_profile)==null?void 0:S.display_name)||"U").slice(0,2).toUpperCase()})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:((N=r.creator_profile)==null?void 0:N.display_name)||"Anonymous"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:Bi(new Date(r.created_at),{addSuffix:!0})})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[x&&a.jsx(be,{to:`/blueprint/${r.id}/edit`,children:a.jsx(M,{variant:"outline",size:"sm",children:"Edit"})}),a.jsxs(M,{variant:"ghost",size:"sm",className:r.user_liked?"text-red-500":"text-muted-foreground",onClick:y,children:[a.jsx(qt,{className:`h-4 w-4 ${r.user_liked?"fill-current":""}`}),a.jsx("span",{className:"ml-1 text-xs",children:r.likes_count})]})]})]})}),a.jsxs(se,{className:"space-y-4",children:[r.mix_notes&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Build notes"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:r.mix_notes})]}),a.jsx("div",{children:v.length>0?a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"font-semibold",children:"Steps"}),a.jsx("div",{className:"mt-3 space-y-3",children:v.map((k,R)=>{var I,D;return a.jsxs("div",{className:"rounded-lg border border-border/60 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("p",{className:"text-sm font-medium",children:(I=k.title)!=null&&I.trim()?k.title:`Step ${R+1}`}),a.jsxs(Ie,{variant:"secondary",className:"text-xs",children:[((D=k.items)==null?void 0:D.length)||0," items"]})]}),k.description&&a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:k.description}),a.jsx("div",{className:"mt-2 space-y-2",children:k.items&&k.items.length>0?k.items.map((A,$)=>a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"text-sm",children:q8(A)}),A.category&&a.jsx("p",{className:"text-xs text-muted-foreground",children:A.category})]},`${k.id||R}-${$}`)):a.jsx("p",{className:"text-xs text-muted-foreground",children:"No items assigned."})})]},k.id||`${k.title}-${R}`)})})]}):a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"font-semibold",children:"Selected items"}),a.jsx("div",{className:"mt-2 space-y-2",children:W8(r.selected_items).map(([k,R])=>a.jsxs("div",{className:"rounded-lg border border-border/60 p-3",children:[a.jsx("p",{className:"text-sm font-medium",children:k}),a.jsx("p",{className:"text-sm text-muted-foreground",children:R.length>0?R.map(z8).join(", "):"No items listed"})]},k))})]})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"LLM Review"}),a.jsx("div",{className:"mt-3",children:a.jsx(_m,{review:r.llm_review||""})})]})]})]}),a.jsxs(ee,{children:[a.jsx(Ge,{children:a.jsx(pt,{children:"Comments"})}),a.jsxs(se,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Wt,{value:p,onChange:k=>m(k.target.value),placeholder:"Share your thoughts",rows:3}),a.jsx(M,{onClick:w,disabled:o.isPending,children:"Post Comment"})]}),i?a.jsx(Ae,{className:"h-20 w-full"}):s&&s.length>0?a.jsx("div",{className:"space-y-3",children:s.map(k=>{var R,I,D;return a.jsxs("div",{className:"rounded-lg border border-border/60 p-3",children:[a.jsxs(be,{to:`/u/${k.user_id}`,className:"flex items-center gap-2 hover:opacity-80 transition-opacity w-fit",children:[a.jsxs(ln,{className:"h-8 w-8",children:[a.jsx(cn,{src:((R=k.profile)==null?void 0:R.avatar_url)||void 0}),a.jsx(un,{children:(((I=k.profile)==null?void 0:I.display_name)||"U").slice(0,2).toUpperCase()})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:((D=k.profile)==null?void 0:D.display_name)||"Anonymous"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:Bi(new Date(k.created_at),{addSuffix:!0})})]})]}),a.jsx("p",{className:"text-sm mt-2",children:k.content})]},k.id)})}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No comments yet."})]})]})]}):a.jsx(ee,{children:a.jsx(se,{className:"py-12 text-center",children:"Blueprint not found."})}),a.jsx(pn,{})]})]})}var xh="Checkbox",[K8,jz]=Mt(xh),[G8,iy]=K8(xh);function Y8(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:s,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=e,[p,m]=Ur({prop:r,defaultProp:s??!1,onChange:c,caller:xh}),[b,g]=f.useState(null),[v,x]=f.useState(null),y=f.useRef(!1),w=b?!!o||!!b.closest("form"):!0,_={checked:p,disabled:i,setChecked:m,control:b,setControl:g,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:y,required:u,defaultChecked:zs(s)?!1:s,isFormControl:w,bubbleInput:v,setBubbleInput:x};return a.jsx(G8,{scope:t,..._,children:Q8(h)?h(_):n})}var _E="CheckboxTrigger",jE=f.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},s)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:p,isFormControl:m,bubbleInput:b}=iy(_E,e),g=Ne(s,d),v=f.useRef(c);return f.useEffect(()=>{const x=i==null?void 0:i.form;if(x){const y=()=>h(v.current);return x.addEventListener("reset",y),()=>x.removeEventListener("reset",y)}},[i,h]),a.jsx(oe.button,{type:"button",role:"checkbox","aria-checked":zs(c)?"mixed":c,"aria-required":u,"data-state":EE(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:g,onKeyDown:G(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:G(r,x=>{h(y=>zs(y)?!0:!y),b&&m&&(p.current=x.isPropagationStopped(),p.current||x.stopPropagation())})})});jE.displayName=_E;var ay=f.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...h}=e;return a.jsx(Y8,{__scopeCheckbox:r,checked:s,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:n,form:d,value:c,internal_do_not_use_render:({isFormControl:p})=>a.jsxs(a.Fragment,{children:[a.jsx(jE,{...h,ref:t,__scopeCheckbox:r}),p&&a.jsx(CE,{__scopeCheckbox:r})]})})});ay.displayName=xh;var SE="CheckboxIndicator",NE=f.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...s}=e,i=iy(SE,r);return a.jsx(Dt,{present:n||zs(i.checked)||i.checked===!0,children:a.jsx(oe.span,{"data-state":EE(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});NE.displayName=SE;var kE="CheckboxBubbleInput",CE=f.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:p,setBubbleInput:m}=iy(kE,e),b=Ne(r,m),g=_v(i),v=Og(n);f.useEffect(()=>{const y=p;if(!y)return;const w=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(w,"checked").set,S=!s.current;if(g!==i&&j){const N=new Event("click",{bubbles:S});y.indeterminate=zs(i),j.call(y,zs(i)?!1:i),y.dispatchEvent(N)}},[p,g,i,s]);const x=f.useRef(zs(i)?!1:i);return a.jsx(oe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:l,disabled:c,name:u,value:d,form:h,...t,tabIndex:-1,ref:b,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});CE.displayName=kE;function Q8(e){return typeof e=="function"}function zs(e){return e==="indeterminate"}function EE(e){return zs(e)?"indeterminate":e?"checked":"unchecked"}const TE=f.forwardRef(({className:e,...t},r)=>a.jsx(ay,{ref:r,className:H("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:a.jsx(NE,{className:H("flex items-center justify-center text-current"),children:a.jsx(Hi,{className:"h-4 w-4"})})}));TE.displayName=ay.displayName;const J8="https://bapi.vdsai.cloud",X8=!0,w0=`${J8.replace(/\/$/,"")}/api/analyze-blueprint`,Z8=w0||"https://piszvseyaefxekubphhf.supabase.co/functions/v1/analyze-blueprint";function ez(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=e.categories;return Array.isArray(t)?t.map(r=>({name:typeof r.name=="string"?r.name:"Untitled",items:Array.isArray(r.items)?r.items.filter(n=>typeof n=="string"):[]})).filter(r=>r.name.trim().length>0):[]}function tz({inventory:e,initialTitle:t,initialSelectedItems:r,initialMixNotes:n,initialReviewPrompt:s,initialReview:i,sourceBlueprintId:o}){const l=es(),{toast:c}=Ot(),{session:u}=ke(),{data:d}=Gv(),{recentTags:h,addRecentTags:p}=Jv(),m=nC(),[b,g]=f.useState(t||e.title),[v,x]=f.useState(r||{}),[y,w]=f.useState(n||""),[_,j]=f.useState(s||""),[S,N]=f.useState(i||""),[k,R]=f.useState([]),[I,D]=f.useState(!0),[A,$]=f.useState(!1),[O,X]=f.useState(()=>ez(e.generated_schema)),[U,J]=f.useState({}),T=f.useMemo(()=>ey(e.review_sections),[e]),E=f.useMemo(()=>Object.values(v).reduce((q,de)=>q+de.length,0),[v]),B=(q,de)=>{x(he=>{const z=new Set(he[q]||[]);return z.has(de)?z.delete(de):z.add(de),{...he,[q]:Array.from(z)}})},re=q=>{var he;const de=(he=U[q])==null?void 0:he.trim();de&&(X(z=>z.map(ce=>ce.name===q?{...ce,items:ce.items.includes(de)?ce.items:[...ce.items,de]}:ce)),J(z=>({...z,[q]:""})))},Y=async()=>{var de,he,z;if(!b.trim()){c({title:"Title required",description:"Add a blueprint title before generating the review.",variant:"destructive"});return}if(E===0){c({title:"No items selected",description:"Select at least one item before generating the review.",variant:"destructive"});return}if(!(u!=null&&u.access_token)){c({title:"Sign in required",description:"Please sign in to generate a review.",variant:"destructive"});return}const q={};Object.entries(v).forEach(([ce,_e])=>{_e.length>0&&(q[ce]=_e)}),$(!0),N("");try{const ce=await fetch(Z8,{method:"POST",headers:{"Content-Type":"application/json",Authorization:X8&&(u!=null&&u.access_token)?`Bearer ${u.access_token}`:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBpc3p2c2V5YWVmeGVrdWJwaGhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwODE3NTEsImV4cCI6MjA4NDY1Nzc1MX0.odmCphs9gpipbjF7zp639J0r8s48SYHnpNsjQvfICSc"},body:JSON.stringify({title:b.trim(),inventoryTitle:e.title,selectedItems:q,mixNotes:y.trim(),reviewPrompt:_.trim(),reviewSections:T,includeScore:e.include_score??!0})});if(!ce.ok){const xe=await ce.json().catch(()=>({}));throw new Error(xe.error||"Failed to analyze blueprint")}if(!ce.body)throw new Error("No response body");const _e=ce.body.getReader(),Ce=new TextDecoder;let K="",te="";for(;;){const{done:xe,value:Te}=await _e.read();if(xe)break;te+=Ce.decode(Te,{stream:!0});let Ee;for(;(Ee=te.indexOf(`
`))!==-1;){let Oe=te.slice(0,Ee);if(te=te.slice(Ee+1),Oe.endsWith("\r")&&(Oe=Oe.slice(0,-1)),Oe.startsWith(":")||Oe.trim()===""||!Oe.startsWith("data: "))continue;const Me=Oe.slice(6).trim();if(Me==="[DONE]")break;try{const Qe=(z=(he=(de=JSON.parse(Me).choices)==null?void 0:de[0])==null?void 0:he.delta)==null?void 0:z.content;Qe&&(K+=Qe,N(K))}catch{te=Oe+`
`+te;break}}}}catch(ce){c({title:"Analysis failed",description:Ma(ce,"Please try again."),variant:"destructive"})}finally{$(!1)}},fe=async()=>{if(!b.trim()){c({title:"Title required",description:"Add a blueprint title before publishing.",variant:"destructive"});return}if(E===0){c({title:"Select items",description:"Pick at least one item before publishing.",variant:"destructive"});return}if(!S.trim()){c({title:"Generate review",description:"Generate the review before publishing.",variant:"destructive"});return}if(k.length>4){c({title:"Too many tags",description:"Please use 4 tags or fewer.",variant:"destructive"});return}if(k.length===0){c({title:"Tags required",description:"Add at least one tag so the wall can surface your blueprint.",variant:"destructive"});return}try{const q={};Object.entries(v).forEach(([he,z])=>{z.length>0&&(q[he]=z)});const de=await m.mutateAsync({inventoryId:e.id,title:b.trim(),selectedItems:q,steps:null,mixNotes:y.trim()?y.trim():null,reviewPrompt:_.trim()?_.trim():null,bannerUrl:null,llmReview:S,tags:k,isPublic:I,sourceBlueprintId:o||null});p(k),l(`/blueprint/${de.id}`)}catch(q){c({title:"Publish failed",description:Ma(q,"Please try again."),variant:"destructive"})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(ee,{children:[a.jsx(Ge,{children:a.jsx(pt,{children:"Create Blueprint"})}),a.jsxs(se,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{htmlFor:"blueprint-title",children:"Blueprint title"}),a.jsx(Ue,{id:"blueprint-title",value:b,onChange:q=>g(q.target.value),placeholder:"Name your blueprint"})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{htmlFor:"mix-notes",children:"Build notes"}),a.jsx(Wt,{id:"mix-notes",value:y,onChange:q=>w(q.target.value),placeholder:"Optional notes for your build",rows:4})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{htmlFor:"review-prompt",children:"LLM review focus"}),a.jsx(Wt,{id:"review-prompt",value:_,onChange:q=>j(q.target.value),placeholder:"What should the review focus on?",rows:4})]})]})]})]}),a.jsxs(ee,{children:[a.jsx(Ge,{children:a.jsx(pt,{children:"Library"})}),a.jsx(se,{className:"space-y-6",children:O.length===0?a.jsx("p",{className:"text-sm text-muted-foreground",children:"No library items yet. Add categories in the library builder."}):O.map(q=>{var de;return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold",children:q.name}),a.jsxs(Ie,{variant:"secondary",children:[((de=v[q.name])==null?void 0:de.length)||0," selected"]})]}),a.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:q.items.map(he=>a.jsxs("label",{className:"flex items-center gap-2 rounded-md border border-border/60 px-3 py-2 text-sm",children:[a.jsx(TE,{checked:(v[q.name]||[]).includes(he),onCheckedChange:()=>B(q.name,he)}),a.jsx("span",{children:he})]},`${q.name}-${he}`))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ue,{value:U[q.name]||"",onChange:he=>J(z=>({...z,[q.name]:he.target.value})),placeholder:`Add item to ${q.name}`}),a.jsx(M,{type:"button",variant:"outline",onClick:()=>re(q.name),children:"Add"})]})]},q.name)})})]}),A&&a.jsx(ee,{className:"overflow-hidden bg-card/60 backdrop-blur-glass border-primary/20",children:a.jsx(se,{className:"p-0",children:a.jsx(iE,{})})}),a.jsxs(ee,{children:[a.jsx(Ge,{children:a.jsx(pt,{children:"LLM Review"})}),a.jsxs(se,{className:"space-y-4",children:[a.jsx(M,{type:"button",onClick:Y,disabled:A||m.isPending,children:A?"Building...":"Build Blueprint"}),a.jsx(Wt,{value:S,onChange:q=>N(q.target.value),rows:12})]})]}),a.jsxs(ee,{children:[a.jsx(Ge,{children:a.jsx(pt,{children:"Publish"})}),a.jsxs(se,{className:"space-y-4",children:[h.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(q=>a.jsxs(M,{type:"button",size:"sm",variant:"outline",onClick:()=>R(de=>de.includes(q)?de:[...de,q]),children:["#",q]},q))}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(qe,{children:"Tags"}),a.jsx(Qv,{value:k,onChange:R,suggestions:d||[],maxTags:12})]}),a.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 px-4 py-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Public blueprint"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Public blueprints appear on the wall."})]}),a.jsx(zn,{checked:I,onCheckedChange:D})]}),a.jsx(M,{type:"button",onClick:fe,disabled:m.isPending||A,className:"w-full",children:"Publish Blueprint"})]})]})]})}function rz(e){return!e||typeof e!="object"||Array.isArray(e)?{}:Object.fromEntries(Object.entries(e).filter(([,t])=>Array.isArray(t)))}function nz(){const{blueprintId:e}=wo(),{data:t,isLoading:r}=Dv(e),{data:n,isLoading:s}=Yv((t==null?void 0:t.inventory_id)||void 0),i=f.useMemo(()=>t?rz(t.selected_items):{},[t]),o=r||s;return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Nt,{}),a.jsx("main",{className:"max-w-4xl mx-auto px-4 py-8 space-y-6",children:o?a.jsx(ee,{children:a.jsxs(se,{className:"p-6",children:[a.jsx(Ae,{className:"h-6 w-48"}),a.jsx(Ae,{className:"h-24 w-full mt-4"})]})}):n&&t?a.jsxs(a.Fragment,{children:[a.jsxs("section",{className:"space-y-2",children:[a.jsx("h1",{className:"text-3xl font-semibold",children:"Remix Blueprint"}),a.jsxs("p",{className:"text-muted-foreground",children:["Source: ",t.title]})]}),a.jsx(tz,{inventory:n,initialTitle:`${t.title} Remix`,initialSelectedItems:i,initialMixNotes:t.mix_notes,initialReviewPrompt:t.review_prompt,initialReview:t.llm_review,sourceBlueprintId:t.id})]}):a.jsx(ee,{children:a.jsx(se,{className:"py-12 text-center",children:"Blueprint or library not found."})})})]})}function sz(){return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Nt,{}),a.jsxs("main",{className:"max-w-3xl mx-auto px-4 py-10 space-y-6",children:[a.jsxs(ee,{className:"bg-card/60 backdrop-blur-sm border-border/50",children:[a.jsx(Ge,{children:a.jsx(pt,{children:"About Blueprints"})}),a.jsxs(se,{className:"space-y-4 text-sm text-muted-foreground",children:[a.jsx("p",{children:"Blueprints is a community space for sharing step-by-step routines built from libraries. Use it to discover what works, remix it for your needs, and share back with others."}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-foreground",children:"Contact"}),a.jsxs("p",{children:["Email: ",a.jsx("a",{href:"mailto:hi@vdsai.cloud",className:"underline",children:"hi@vdsai.cloud"})]}),a.jsx("p",{children:"Based in Sweden"})]})]})]}),a.jsx(pn,{})]})]})}const iz=()=>{const e=Rn();return f.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),a.jsxs("div",{className:"min-h-screen bg-muted",children:[a.jsx(Nt,{}),a.jsx("div",{className:"flex min-h-[70vh] items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),a.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),a.jsx(be,{to:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})]})};function Vo({children:e}){const{user:t,isLoading:r}=ke();return r?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})}):t?a.jsx(a.Fragment,{children:e}):a.jsx(Dl,{to:"/auth",replace:!0})}const az=new WO,oz=()=>a.jsx(YO,{client:az,children:a.jsx(qL,{children:a.jsxs(CO,{children:[a.jsx(dA,{}),a.jsx(qA,{}),a.jsx(n4,{basename:"/remix-of-stackwise-advisor/",children:a.jsxs(YM,{children:[a.jsx(wt,{path:"/",element:a.jsx(aB,{})}),a.jsx(wt,{path:"/explore",element:a.jsx(jB,{})}),a.jsx(wt,{path:"/blueprints",element:a.jsx(KB,{})}),a.jsx(wt,{path:"/wall",element:a.jsx(cB,{})}),a.jsx(wt,{path:"/wall/:postId",element:a.jsx(Vo,{children:a.jsx(k6,{})})}),a.jsx(wt,{path:"/auth",element:a.jsx(JB,{})}),a.jsx(wt,{path:"/inventory",element:a.jsx(I6,{})}),a.jsx(wt,{path:"/inventory/create",element:a.jsx(Vo,{children:a.jsx(Q6,{})})}),a.jsx(wt,{path:"/inventory/:inventoryId",element:a.jsx(X6,{})}),a.jsx(wt,{path:"/inventory/:inventoryId/build",element:a.jsx(x0,{})}),a.jsx(wt,{path:"/blueprint/:blueprintId/edit",element:a.jsx(Vo,{children:a.jsx(x0,{})})}),a.jsx(wt,{path:"/blueprint/:blueprintId",element:a.jsx(H8,{})}),a.jsx(wt,{path:"/blueprint/:blueprintId/remix",element:a.jsx(Vo,{children:a.jsx(nz,{})})}),a.jsx(wt,{path:"/settings",element:a.jsx(Vo,{children:a.jsx(i6,{})})}),a.jsx(wt,{path:"/u/:userId",element:a.jsx(g6,{})}),a.jsx(wt,{path:"/tags",element:a.jsx(x6,{})}),a.jsx(wt,{path:"/about",element:a.jsx(sz,{})}),a.jsx(wt,{path:"*",element:a.jsx(iz,{})})]})})]})})});V_(document.getElementById("root")).render(a.jsx(oz,{}));
