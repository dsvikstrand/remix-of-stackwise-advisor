var Fv=e=>{throw TypeError(e)};var lh=(e,t,r)=>t.has(e)||Fv("Cannot "+r);var C=(e,t,r)=>(lh(e,t,"read from private field"),r?r.call(e):t.get(e)),he=(e,t,r)=>t.has(e)?Fv("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),te=(e,t,r,n)=>(lh(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Re=(e,t,r)=>(lh(e,t,"access private method"),r);var hc=(e,t,r,n)=>({set _(s){te(e,t,s,r)},get _(){return C(e,t,n)}});function bC(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Qw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Jw={exports:{}},id={},Xw={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hl=Symbol.for("react.element"),_C=Symbol.for("react.portal"),jC=Symbol.for("react.fragment"),SC=Symbol.for("react.strict_mode"),NC=Symbol.for("react.profiler"),kC=Symbol.for("react.provider"),CC=Symbol.for("react.context"),EC=Symbol.for("react.forward_ref"),TC=Symbol.for("react.suspense"),RC=Symbol.for("react.memo"),PC=Symbol.for("react.lazy"),Uv=Symbol.iterator;function AC(e){return e===null||typeof e!="object"?null:(e=Uv&&e[Uv]||e["@@iterator"],typeof e=="function"?e:null)}var Zw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},e0=Object.assign,t0={};function eo(e,t,r){this.props=e,this.context=t,this.refs=t0,this.updater=r||Zw}eo.prototype.isReactComponent={};eo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};eo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function r0(){}r0.prototype=eo.prototype;function am(e,t,r){this.props=e,this.context=t,this.refs=t0,this.updater=r||Zw}var om=am.prototype=new r0;om.constructor=am;e0(om,eo.prototype);om.isPureReactComponent=!0;var Bv=Array.isArray,n0=Object.prototype.hasOwnProperty,lm={current:null},s0={key:!0,ref:!0,__self:!0,__source:!0};function i0(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)n0.call(t,n)&&!s0.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Hl,type:e,key:i,ref:o,props:s,_owner:lm.current}}function IC(e,t){return{$$typeof:Hl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function cm(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hl}function OC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var zv=/\/+/g;function ch(e,t){return typeof e=="object"&&e!==null&&e.key!=null?OC(""+e.key):t.toString(36)}function Hc(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Hl:case _C:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+ch(o,0):n,Bv(s)?(r="",e!=null&&(r=e.replace(zv,"$&/")+"/"),Hc(s,t,r,"",function(u){return u})):s!=null&&(cm(s)&&(s=IC(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(zv,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",Bv(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+ch(i,l);o+=Hc(i,t,r,c,s)}else if(c=AC(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+ch(i,l++),o+=Hc(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function fc(e,t,r){if(e==null)return e;var n=[],s=0;return Hc(e,n,"","",function(i){return t.call(r,i,s++)}),n}function MC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Kt={current:null},Kc={transition:null},DC={ReactCurrentDispatcher:Kt,ReactCurrentBatchConfig:Kc,ReactCurrentOwner:lm};function a0(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:fc,forEach:function(e,t,r){fc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return fc(e,function(){t++}),t},toArray:function(e){return fc(e,function(t){return t})||[]},only:function(e){if(!cm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ae.Component=eo;Ae.Fragment=jC;Ae.Profiler=NC;Ae.PureComponent=am;Ae.StrictMode=SC;Ae.Suspense=TC;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DC;Ae.act=a0;Ae.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=e0({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=lm.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)n0.call(t,c)&&!s0.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Hl,type:e.type,key:s,ref:i,props:n,_owner:o}};Ae.createContext=function(e){return e={$$typeof:CC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:kC,_context:e},e.Consumer=e};Ae.createElement=i0;Ae.createFactory=function(e){var t=i0.bind(null,e);return t.type=e,t};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(e){return{$$typeof:EC,render:e}};Ae.isValidElement=cm;Ae.lazy=function(e){return{$$typeof:PC,_payload:{_status:-1,_result:e},_init:MC}};Ae.memo=function(e,t){return{$$typeof:RC,type:e,compare:t===void 0?null:t}};Ae.startTransition=function(e){var t=Kc.transition;Kc.transition={};try{e()}finally{Kc.transition=t}};Ae.unstable_act=a0;Ae.useCallback=function(e,t){return Kt.current.useCallback(e,t)};Ae.useContext=function(e){return Kt.current.useContext(e)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(e){return Kt.current.useDeferredValue(e)};Ae.useEffect=function(e,t){return Kt.current.useEffect(e,t)};Ae.useId=function(){return Kt.current.useId()};Ae.useImperativeHandle=function(e,t,r){return Kt.current.useImperativeHandle(e,t,r)};Ae.useInsertionEffect=function(e,t){return Kt.current.useInsertionEffect(e,t)};Ae.useLayoutEffect=function(e,t){return Kt.current.useLayoutEffect(e,t)};Ae.useMemo=function(e,t){return Kt.current.useMemo(e,t)};Ae.useReducer=function(e,t,r){return Kt.current.useReducer(e,t,r)};Ae.useRef=function(e){return Kt.current.useRef(e)};Ae.useState=function(e){return Kt.current.useState(e)};Ae.useSyncExternalStore=function(e,t,r){return Kt.current.useSyncExternalStore(e,t,r)};Ae.useTransition=function(){return Kt.current.useTransition()};Ae.version="18.3.1";Xw.exports=Ae;var p=Xw.exports;const B=Qw(p),um=bC({__proto__:null,default:B},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LC=p,$C=Symbol.for("react.element"),FC=Symbol.for("react.fragment"),UC=Object.prototype.hasOwnProperty,BC=LC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zC={key:!0,ref:!0,__self:!0,__source:!0};function o0(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)UC.call(t,n)&&!zC.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:$C,type:e,key:i,ref:o,props:s,_owner:BC.current}}id.Fragment=FC;id.jsx=o0;id.jsxs=o0;Jw.exports=id;var a=Jw.exports,l0={exports:{}},wr={},c0={exports:{}},u0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,T){var D=R.length;R.push(T);e:for(;0<D;){var ee=D-1>>>1,J=R[ee];if(0<s(J,T))R[ee]=T,R[D]=J,D=ee;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var T=R[0],D=R.pop();if(D!==T){R[0]=D;e:for(var ee=0,J=R.length,de=J>>>1;ee<de;){var U=2*(ee+1)-1,ce=R[U],ae=U+1,L=R[ae];if(0>s(ce,D))ae<J&&0>s(L,ce)?(R[ee]=L,R[ae]=D,ee=ae):(R[ee]=ce,R[U]=D,ee=U);else if(ae<J&&0>s(L,D))R[ee]=L,R[ae]=D,ee=ae;else break e}}return T}function s(R,T){var D=R.sortIndex-T.sortIndex;return D!==0?D:R.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,b=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(R){for(var T=r(u);T!==null;){if(T.callback===null)n(u);else if(T.startTime<=R)n(u),T.sortIndex=T.expirationTime,t(c,T);else break;T=r(u)}}function _(R){if(g=!1,x(R),!b)if(r(c)!==null)b=!0,V(j);else{var T=r(u);T!==null&&Z(_,T.startTime-R)}}function j(R,T){b=!1,g&&(g=!1,w(S),S=-1),m=!0;var D=f;try{for(x(T),h=r(c);h!==null&&(!(h.expirationTime>T)||R&&!$());){var ee=h.callback;if(typeof ee=="function"){h.callback=null,f=h.priorityLevel;var J=ee(h.expirationTime<=T);T=e.unstable_now(),typeof J=="function"?h.callback=J:h===r(c)&&n(c),x(T)}else n(c);h=r(c)}if(h!==null)var de=!0;else{var U=r(u);U!==null&&Z(_,U.startTime-T),de=!1}return de}finally{h=null,f=D,m=!1}}var N=!1,k=null,S=-1,E=5,A=-1;function $(){return!(e.unstable_now()-A<E)}function M(){if(k!==null){var R=e.unstable_now();A=R;var T=!0;try{T=k(!0,R)}finally{T?Q():(N=!1,k=null)}}else N=!1}var Q;if(typeof y=="function")Q=function(){y(M)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,se=I.port2;I.port1.onmessage=M,Q=function(){se.postMessage(null)}}else Q=function(){v(M,0)};function V(R){k=R,N||(N=!0,Q())}function Z(R,T){S=v(function(){R(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){b||m||(b=!0,V(j))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(R){switch(f){case 1:case 2:case 3:var T=3;break;default:T=f}var D=f;f=T;try{return R()}finally{f=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,T){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var D=f;f=R;try{return T()}finally{f=D}},e.unstable_scheduleCallback=function(R,T,D){var ee=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?ee+D:ee):D=ee,R){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=D+J,R={id:d++,callback:T,priorityLevel:R,startTime:D,expirationTime:J,sortIndex:-1},D>ee?(R.sortIndex=D,t(u,R),r(c)===null&&R===r(u)&&(g?(w(S),S=-1):g=!0,Z(_,D-ee))):(R.sortIndex=J,t(c,R),b||m||(b=!0,V(j))),R},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(R){var T=f;return function(){var D=f;f=T;try{return R.apply(this,arguments)}finally{f=D}}}})(u0);c0.exports=u0;var qC=c0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WC=p,xr=qC;function z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d0=new Set,al={};function Mi(e,t){qa(e,t),qa(e+"Capture",t)}function qa(e,t){for(al[e]=t,e=0;e<t.length;e++)d0.add(t[e])}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pf=Object.prototype.hasOwnProperty,VC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qv={},Wv={};function HC(e){return pf.call(Wv,e)?!0:pf.call(qv,e)?!1:VC.test(e)?Wv[e]=!0:(qv[e]=!0,!1)}function KC(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function GC(e,t,r,n){if(t===null||typeof t>"u"||KC(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Gt(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Tt[e]=new Gt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Tt[t]=new Gt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Tt[e]=new Gt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Tt[e]=new Gt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Tt[e]=new Gt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Tt[e]=new Gt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Tt[e]=new Gt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Tt[e]=new Gt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Tt[e]=new Gt(e,5,!1,e.toLowerCase(),null,!1,!1)});var dm=/[\-:]([a-z])/g;function hm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(dm,hm);Tt[t]=new Gt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(dm,hm);Tt[t]=new Gt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(dm,hm);Tt[t]=new Gt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Tt[e]=new Gt(e,1,!1,e.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Tt[e]=new Gt(e,1,!1,e.toLowerCase(),null,!0,!0)});function fm(e,t,r,n){var s=Tt.hasOwnProperty(t)?Tt[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(GC(t,r,s,n)&&(r=null),n||s===null?HC(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Qn=WC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pc=Symbol.for("react.element"),oa=Symbol.for("react.portal"),la=Symbol.for("react.fragment"),pm=Symbol.for("react.strict_mode"),mf=Symbol.for("react.profiler"),h0=Symbol.for("react.provider"),f0=Symbol.for("react.context"),mm=Symbol.for("react.forward_ref"),gf=Symbol.for("react.suspense"),vf=Symbol.for("react.suspense_list"),gm=Symbol.for("react.memo"),os=Symbol.for("react.lazy"),p0=Symbol.for("react.offscreen"),Vv=Symbol.iterator;function jo(e){return e===null||typeof e!="object"?null:(e=Vv&&e[Vv]||e["@@iterator"],typeof e=="function"?e:null)}var st=Object.assign,uh;function $o(e){if(uh===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);uh=t&&t[1]||""}return`
`+uh+e}var dh=!1;function hh(e,t){if(!e||dh)return"";dh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{dh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?$o(e):""}function YC(e){switch(e.tag){case 5:return $o(e.type);case 16:return $o("Lazy");case 13:return $o("Suspense");case 19:return $o("SuspenseList");case 0:case 2:case 15:return e=hh(e.type,!1),e;case 11:return e=hh(e.type.render,!1),e;case 1:return e=hh(e.type,!0),e;default:return""}}function yf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case la:return"Fragment";case oa:return"Portal";case mf:return"Profiler";case pm:return"StrictMode";case gf:return"Suspense";case vf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case f0:return(e.displayName||"Context")+".Consumer";case h0:return(e._context.displayName||"Context")+".Provider";case mm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gm:return t=e.displayName||null,t!==null?t:yf(e.type)||"Memo";case os:t=e._payload,e=e._init;try{return yf(e(t))}catch{}}return null}function QC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yf(t);case 8:return t===pm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function m0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function JC(e){var t=m0(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function mc(e){e._valueTracker||(e._valueTracker=JC(e))}function g0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=m0(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function fu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xf(e,t){var r=t.checked;return st({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Hv(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Fs(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function v0(e,t){t=t.checked,t!=null&&fm(e,"checked",t,!1)}function wf(e,t){v0(e,t);var r=Fs(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?bf(e,t.type,r):t.hasOwnProperty("defaultValue")&&bf(e,t.type,Fs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Kv(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function bf(e,t,r){(t!=="number"||fu(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Fo=Array.isArray;function wa(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Fs(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function _f(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(z(91));return st({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Gv(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(z(92));if(Fo(r)){if(1<r.length)throw Error(z(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Fs(r)}}function y0(e,t){var r=Fs(t.value),n=Fs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Yv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function x0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?x0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var gc,w0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(gc=gc||document.createElement("div"),gc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=gc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ol(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ho={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XC=["Webkit","ms","Moz","O"];Object.keys(Ho).forEach(function(e){XC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ho[t]=Ho[e]})});function b0(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ho.hasOwnProperty(e)&&Ho[e]?(""+t).trim():t+"px"}function _0(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=b0(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var ZC=st({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sf(e,t){if(t){if(ZC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(z(62))}}function Nf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kf=null;function vm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Cf=null,ba=null,_a=null;function Qv(e){if(e=Yl(e)){if(typeof Cf!="function")throw Error(z(280));var t=e.stateNode;t&&(t=ud(t),Cf(e.stateNode,e.type,t))}}function j0(e){ba?_a?_a.push(e):_a=[e]:ba=e}function S0(){if(ba){var e=ba,t=_a;if(_a=ba=null,Qv(e),t)for(e=0;e<t.length;e++)Qv(t[e])}}function N0(e,t){return e(t)}function k0(){}var fh=!1;function C0(e,t,r){if(fh)return e(t,r);fh=!0;try{return N0(e,t,r)}finally{fh=!1,(ba!==null||_a!==null)&&(k0(),S0())}}function ll(e,t){var r=e.stateNode;if(r===null)return null;var n=ud(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(z(231,t,typeof r));return r}var Ef=!1;if(qn)try{var So={};Object.defineProperty(So,"passive",{get:function(){Ef=!0}}),window.addEventListener("test",So,So),window.removeEventListener("test",So,So)}catch{Ef=!1}function eE(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Ko=!1,pu=null,mu=!1,Tf=null,tE={onError:function(e){Ko=!0,pu=e}};function rE(e,t,r,n,s,i,o,l,c){Ko=!1,pu=null,eE.apply(tE,arguments)}function nE(e,t,r,n,s,i,o,l,c){if(rE.apply(this,arguments),Ko){if(Ko){var u=pu;Ko=!1,pu=null}else throw Error(z(198));mu||(mu=!0,Tf=u)}}function Di(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function E0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Jv(e){if(Di(e)!==e)throw Error(z(188))}function sE(e){var t=e.alternate;if(!t){if(t=Di(e),t===null)throw Error(z(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Jv(s),e;if(i===n)return Jv(s),t;i=i.sibling}throw Error(z(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(z(189))}}if(r.alternate!==n)throw Error(z(190))}if(r.tag!==3)throw Error(z(188));return r.stateNode.current===r?e:t}function T0(e){return e=sE(e),e!==null?R0(e):null}function R0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=R0(e);if(t!==null)return t;e=e.sibling}return null}var P0=xr.unstable_scheduleCallback,Xv=xr.unstable_cancelCallback,iE=xr.unstable_shouldYield,aE=xr.unstable_requestPaint,ut=xr.unstable_now,oE=xr.unstable_getCurrentPriorityLevel,ym=xr.unstable_ImmediatePriority,A0=xr.unstable_UserBlockingPriority,gu=xr.unstable_NormalPriority,lE=xr.unstable_LowPriority,I0=xr.unstable_IdlePriority,ad=null,bn=null;function cE(e){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(ad,e,void 0,(e.current.flags&128)===128)}catch{}}var Jr=Math.clz32?Math.clz32:hE,uE=Math.log,dE=Math.LN2;function hE(e){return e>>>=0,e===0?32:31-(uE(e)/dE|0)|0}var vc=64,yc=4194304;function Uo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vu(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Uo(l):(i&=o,i!==0&&(n=Uo(i)))}else o=r&~s,o!==0?n=Uo(o):i!==0&&(n=Uo(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Jr(t),s=1<<r,n|=e[r],t&=~s;return n}function fE(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pE(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Jr(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=fE(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Rf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function O0(){var e=vc;return vc<<=1,!(vc&4194240)&&(vc=64),e}function ph(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Kl(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Jr(t),e[t]=r}function mE(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Jr(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function xm(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Jr(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var qe=0;function M0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var D0,wm,L0,$0,F0,Pf=!1,xc=[],ks=null,Cs=null,Es=null,cl=new Map,ul=new Map,us=[],gE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zv(e,t){switch(e){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":Cs=null;break;case"mouseover":case"mouseout":Es=null;break;case"pointerover":case"pointerout":cl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ul.delete(t.pointerId)}}function No(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Yl(t),t!==null&&wm(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function vE(e,t,r,n,s){switch(t){case"focusin":return ks=No(ks,e,t,r,n,s),!0;case"dragenter":return Cs=No(Cs,e,t,r,n,s),!0;case"mouseover":return Es=No(Es,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return cl.set(i,No(cl.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,ul.set(i,No(ul.get(i)||null,e,t,r,n,s)),!0}return!1}function U0(e){var t=ai(e.target);if(t!==null){var r=Di(t);if(r!==null){if(t=r.tag,t===13){if(t=E0(r),t!==null){e.blockedOn=t,F0(e.priority,function(){L0(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Af(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);kf=n,r.target.dispatchEvent(n),kf=null}else return t=Yl(r),t!==null&&wm(t),e.blockedOn=r,!1;t.shift()}return!0}function ey(e,t,r){Gc(e)&&r.delete(t)}function yE(){Pf=!1,ks!==null&&Gc(ks)&&(ks=null),Cs!==null&&Gc(Cs)&&(Cs=null),Es!==null&&Gc(Es)&&(Es=null),cl.forEach(ey),ul.forEach(ey)}function ko(e,t){e.blockedOn===t&&(e.blockedOn=null,Pf||(Pf=!0,xr.unstable_scheduleCallback(xr.unstable_NormalPriority,yE)))}function dl(e){function t(s){return ko(s,e)}if(0<xc.length){ko(xc[0],e);for(var r=1;r<xc.length;r++){var n=xc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ks!==null&&ko(ks,e),Cs!==null&&ko(Cs,e),Es!==null&&ko(Es,e),cl.forEach(t),ul.forEach(t),r=0;r<us.length;r++)n=us[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<us.length&&(r=us[0],r.blockedOn===null);)U0(r),r.blockedOn===null&&us.shift()}var ja=Qn.ReactCurrentBatchConfig,yu=!0;function xE(e,t,r,n){var s=qe,i=ja.transition;ja.transition=null;try{qe=1,bm(e,t,r,n)}finally{qe=s,ja.transition=i}}function wE(e,t,r,n){var s=qe,i=ja.transition;ja.transition=null;try{qe=4,bm(e,t,r,n)}finally{qe=s,ja.transition=i}}function bm(e,t,r,n){if(yu){var s=Af(e,t,r,n);if(s===null)Sh(e,t,n,xu,r),Zv(e,n);else if(vE(s,e,t,r,n))n.stopPropagation();else if(Zv(e,n),t&4&&-1<gE.indexOf(e)){for(;s!==null;){var i=Yl(s);if(i!==null&&D0(i),i=Af(e,t,r,n),i===null&&Sh(e,t,n,xu,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Sh(e,t,n,null,r)}}var xu=null;function Af(e,t,r,n){if(xu=null,e=vm(n),e=ai(e),e!==null)if(t=Di(e),t===null)e=null;else if(r=t.tag,r===13){if(e=E0(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xu=e,null}function B0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oE()){case ym:return 1;case A0:return 4;case gu:case lE:return 16;case I0:return 536870912;default:return 16}default:return 16}}var js=null,_m=null,Yc=null;function z0(){if(Yc)return Yc;var e,t=_m,r=t.length,n,s="value"in js?js.value:js.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return Yc=s.slice(e,1<n?1-n:void 0)}function Qc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wc(){return!0}function ty(){return!1}function br(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?wc:ty,this.isPropagationStopped=ty,this}return st(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=wc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=wc)},persist:function(){},isPersistent:wc}),t}var to={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jm=br(to),Gl=st({},to,{view:0,detail:0}),bE=br(Gl),mh,gh,Co,od=st({},Gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Co&&(Co&&e.type==="mousemove"?(mh=e.screenX-Co.screenX,gh=e.screenY-Co.screenY):gh=mh=0,Co=e),mh)},movementY:function(e){return"movementY"in e?e.movementY:gh}}),ry=br(od),_E=st({},od,{dataTransfer:0}),jE=br(_E),SE=st({},Gl,{relatedTarget:0}),vh=br(SE),NE=st({},to,{animationName:0,elapsedTime:0,pseudoElement:0}),kE=br(NE),CE=st({},to,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),EE=br(CE),TE=st({},to,{data:0}),ny=br(TE),RE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IE(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=AE[e])?!!t[e]:!1}function Sm(){return IE}var OE=st({},Gl,{key:function(e){if(e.key){var t=RE[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?PE[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sm,charCode:function(e){return e.type==="keypress"?Qc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ME=br(OE),DE=st({},od,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sy=br(DE),LE=st({},Gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sm}),$E=br(LE),FE=st({},to,{propertyName:0,elapsedTime:0,pseudoElement:0}),UE=br(FE),BE=st({},od,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zE=br(BE),qE=[9,13,27,32],Nm=qn&&"CompositionEvent"in window,Go=null;qn&&"documentMode"in document&&(Go=document.documentMode);var WE=qn&&"TextEvent"in window&&!Go,q0=qn&&(!Nm||Go&&8<Go&&11>=Go),iy=" ",ay=!1;function W0(e,t){switch(e){case"keyup":return qE.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function V0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ca=!1;function VE(e,t){switch(e){case"compositionend":return V0(t);case"keypress":return t.which!==32?null:(ay=!0,iy);case"textInput":return e=t.data,e===iy&&ay?null:e;default:return null}}function HE(e,t){if(ca)return e==="compositionend"||!Nm&&W0(e,t)?(e=z0(),Yc=_m=js=null,ca=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return q0&&t.locale!=="ko"?null:t.data;default:return null}}var KE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!KE[e.type]:t==="textarea"}function H0(e,t,r,n){j0(n),t=wu(t,"onChange"),0<t.length&&(r=new jm("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Yo=null,hl=null;function GE(e){nb(e,0)}function ld(e){var t=ha(e);if(g0(t))return e}function YE(e,t){if(e==="change")return t}var K0=!1;if(qn){var yh;if(qn){var xh="oninput"in document;if(!xh){var ly=document.createElement("div");ly.setAttribute("oninput","return;"),xh=typeof ly.oninput=="function"}yh=xh}else yh=!1;K0=yh&&(!document.documentMode||9<document.documentMode)}function cy(){Yo&&(Yo.detachEvent("onpropertychange",G0),hl=Yo=null)}function G0(e){if(e.propertyName==="value"&&ld(hl)){var t=[];H0(t,hl,e,vm(e)),C0(GE,t)}}function QE(e,t,r){e==="focusin"?(cy(),Yo=t,hl=r,Yo.attachEvent("onpropertychange",G0)):e==="focusout"&&cy()}function JE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ld(hl)}function XE(e,t){if(e==="click")return ld(t)}function ZE(e,t){if(e==="input"||e==="change")return ld(t)}function eT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zr=typeof Object.is=="function"?Object.is:eT;function fl(e,t){if(Zr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!pf.call(t,s)||!Zr(e[s],t[s]))return!1}return!0}function uy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dy(e,t){var r=uy(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=uy(r)}}function Y0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Y0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Q0(){for(var e=window,t=fu();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=fu(e.document)}return t}function km(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function tT(e){var t=Q0(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Y0(r.ownerDocument.documentElement,r)){if(n!==null&&km(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=dy(r,i);var o=dy(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var rT=qn&&"documentMode"in document&&11>=document.documentMode,ua=null,If=null,Qo=null,Of=!1;function hy(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Of||ua==null||ua!==fu(n)||(n=ua,"selectionStart"in n&&km(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Qo&&fl(Qo,n)||(Qo=n,n=wu(If,"onSelect"),0<n.length&&(t=new jm("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ua)))}function bc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var da={animationend:bc("Animation","AnimationEnd"),animationiteration:bc("Animation","AnimationIteration"),animationstart:bc("Animation","AnimationStart"),transitionend:bc("Transition","TransitionEnd")},wh={},J0={};qn&&(J0=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function cd(e){if(wh[e])return wh[e];if(!da[e])return e;var t=da[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in J0)return wh[e]=t[r];return e}var X0=cd("animationend"),Z0=cd("animationiteration"),eb=cd("animationstart"),tb=cd("transitionend"),rb=new Map,fy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ws(e,t){rb.set(e,t),Mi(t,[e])}for(var bh=0;bh<fy.length;bh++){var _h=fy[bh],nT=_h.toLowerCase(),sT=_h[0].toUpperCase()+_h.slice(1);Ws(nT,"on"+sT)}Ws(X0,"onAnimationEnd");Ws(Z0,"onAnimationIteration");Ws(eb,"onAnimationStart");Ws("dblclick","onDoubleClick");Ws("focusin","onFocus");Ws("focusout","onBlur");Ws(tb,"onTransitionEnd");qa("onMouseEnter",["mouseout","mouseover"]);qa("onMouseLeave",["mouseout","mouseover"]);qa("onPointerEnter",["pointerout","pointerover"]);qa("onPointerLeave",["pointerout","pointerover"]);Mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bo));function py(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,nE(n,t,void 0,e),e.currentTarget=null}function nb(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;py(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;py(s,l,u),i=c}}}if(mu)throw e=Tf,mu=!1,Tf=null,e}function Je(e,t){var r=t[Ff];r===void 0&&(r=t[Ff]=new Set);var n=e+"__bubble";r.has(n)||(sb(t,e,2,!1),r.add(n))}function jh(e,t,r){var n=0;t&&(n|=4),sb(r,e,n,t)}var _c="_reactListening"+Math.random().toString(36).slice(2);function pl(e){if(!e[_c]){e[_c]=!0,d0.forEach(function(r){r!=="selectionchange"&&(iT.has(r)||jh(r,!1,e),jh(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_c]||(t[_c]=!0,jh("selectionchange",!1,t))}}function sb(e,t,r,n){switch(B0(t)){case 1:var s=xE;break;case 4:s=wE;break;default:s=bm}r=s.bind(null,t,r,e),s=void 0,!Ef||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Sh(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ai(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}C0(function(){var u=i,d=vm(r),h=[];e:{var f=rb.get(e);if(f!==void 0){var m=jm,b=e;switch(e){case"keypress":if(Qc(r)===0)break e;case"keydown":case"keyup":m=ME;break;case"focusin":b="focus",m=vh;break;case"focusout":b="blur",m=vh;break;case"beforeblur":case"afterblur":m=vh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=ry;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=jE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=$E;break;case X0:case Z0:case eb:m=kE;break;case tb:m=UE;break;case"scroll":m=bE;break;case"wheel":m=zE;break;case"copy":case"cut":case"paste":m=EE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=sy}var g=(t&4)!==0,v=!g&&e==="scroll",w=g?f!==null?f+"Capture":null:f;g=[];for(var y=u,x;y!==null;){x=y;var _=x.stateNode;if(x.tag===5&&_!==null&&(x=_,w!==null&&(_=ll(y,w),_!=null&&g.push(ml(y,_,x)))),v)break;y=y.return}0<g.length&&(f=new m(f,b,null,r,d),h.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&r!==kf&&(b=r.relatedTarget||r.fromElement)&&(ai(b)||b[Wn]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(b=r.relatedTarget||r.toElement,m=u,b=b?ai(b):null,b!==null&&(v=Di(b),b!==v||b.tag!==5&&b.tag!==6)&&(b=null)):(m=null,b=u),m!==b)){if(g=ry,_="onMouseLeave",w="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=sy,_="onPointerLeave",w="onPointerEnter",y="pointer"),v=m==null?f:ha(m),x=b==null?f:ha(b),f=new g(_,y+"leave",m,r,d),f.target=v,f.relatedTarget=x,_=null,ai(d)===u&&(g=new g(w,y+"enter",b,r,d),g.target=x,g.relatedTarget=v,_=g),v=_,m&&b)t:{for(g=m,w=b,y=0,x=g;x;x=Ki(x))y++;for(x=0,_=w;_;_=Ki(_))x++;for(;0<y-x;)g=Ki(g),y--;for(;0<x-y;)w=Ki(w),x--;for(;y--;){if(g===w||w!==null&&g===w.alternate)break t;g=Ki(g),w=Ki(w)}g=null}else g=null;m!==null&&my(h,f,m,g,!1),b!==null&&v!==null&&my(h,v,b,g,!0)}}e:{if(f=u?ha(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var j=YE;else if(oy(f))if(K0)j=ZE;else{j=JE;var N=QE}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=XE);if(j&&(j=j(e,u))){H0(h,j,r,d);break e}N&&N(e,f,u),e==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&bf(f,"number",f.value)}switch(N=u?ha(u):window,e){case"focusin":(oy(N)||N.contentEditable==="true")&&(ua=N,If=u,Qo=null);break;case"focusout":Qo=If=ua=null;break;case"mousedown":Of=!0;break;case"contextmenu":case"mouseup":case"dragend":Of=!1,hy(h,r,d);break;case"selectionchange":if(rT)break;case"keydown":case"keyup":hy(h,r,d)}var k;if(Nm)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else ca?W0(e,r)&&(S="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(S="onCompositionStart");S&&(q0&&r.locale!=="ko"&&(ca||S!=="onCompositionStart"?S==="onCompositionEnd"&&ca&&(k=z0()):(js=d,_m="value"in js?js.value:js.textContent,ca=!0)),N=wu(u,S),0<N.length&&(S=new ny(S,e,null,r,d),h.push({event:S,listeners:N}),k?S.data=k:(k=V0(r),k!==null&&(S.data=k)))),(k=WE?VE(e,r):HE(e,r))&&(u=wu(u,"onBeforeInput"),0<u.length&&(d=new ny("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=k))}nb(h,t)})}function ml(e,t,r){return{instance:e,listener:t,currentTarget:r}}function wu(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ll(e,r),i!=null&&n.unshift(ml(e,i,s)),i=ll(e,t),i!=null&&n.push(ml(e,i,s))),e=e.return}return n}function Ki(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function my(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=ll(r,i),c!=null&&o.unshift(ml(r,c,l))):s||(c=ll(r,i),c!=null&&o.push(ml(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var aT=/\r\n?/g,oT=/\u0000|\uFFFD/g;function gy(e){return(typeof e=="string"?e:""+e).replace(aT,`
`).replace(oT,"")}function jc(e,t,r){if(t=gy(t),gy(e)!==t&&r)throw Error(z(425))}function bu(){}var Mf=null,Df=null;function Lf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $f=typeof setTimeout=="function"?setTimeout:void 0,lT=typeof clearTimeout=="function"?clearTimeout:void 0,vy=typeof Promise=="function"?Promise:void 0,cT=typeof queueMicrotask=="function"?queueMicrotask:typeof vy<"u"?function(e){return vy.resolve(null).then(e).catch(uT)}:$f;function uT(e){setTimeout(function(){throw e})}function Nh(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),dl(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);dl(t)}function Ts(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function yy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ro=Math.random().toString(36).slice(2),yn="__reactFiber$"+ro,gl="__reactProps$"+ro,Wn="__reactContainer$"+ro,Ff="__reactEvents$"+ro,dT="__reactListeners$"+ro,hT="__reactHandles$"+ro;function ai(e){var t=e[yn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Wn]||r[yn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=yy(e);e!==null;){if(r=e[yn])return r;e=yy(e)}return t}e=r,r=e.parentNode}return null}function Yl(e){return e=e[yn]||e[Wn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ha(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(z(33))}function ud(e){return e[gl]||null}var Uf=[],fa=-1;function Vs(e){return{current:e}}function Xe(e){0>fa||(e.current=Uf[fa],Uf[fa]=null,fa--)}function Ge(e,t){fa++,Uf[fa]=e.current,e.current=t}var Us={},Lt=Vs(Us),rr=Vs(!1),_i=Us;function Wa(e,t){var r=e.type.contextTypes;if(!r)return Us;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function nr(e){return e=e.childContextTypes,e!=null}function _u(){Xe(rr),Xe(Lt)}function xy(e,t,r){if(Lt.current!==Us)throw Error(z(168));Ge(Lt,t),Ge(rr,r)}function ib(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(z(108,QC(e)||"Unknown",s));return st({},r,n)}function ju(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Us,_i=Lt.current,Ge(Lt,e),Ge(rr,rr.current),!0}function wy(e,t,r){var n=e.stateNode;if(!n)throw Error(z(169));r?(e=ib(e,t,_i),n.__reactInternalMemoizedMergedChildContext=e,Xe(rr),Xe(Lt),Ge(Lt,e)):Xe(rr),Ge(rr,r)}var Mn=null,dd=!1,kh=!1;function ab(e){Mn===null?Mn=[e]:Mn.push(e)}function fT(e){dd=!0,ab(e)}function Hs(){if(!kh&&Mn!==null){kh=!0;var e=0,t=qe;try{var r=Mn;for(qe=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Mn=null,dd=!1}catch(s){throw Mn!==null&&(Mn=Mn.slice(e+1)),P0(ym,Hs),s}finally{qe=t,kh=!1}}return null}var pa=[],ma=0,Su=null,Nu=0,kr=[],Cr=0,ji=null,Fn=1,Un="";function ei(e,t){pa[ma++]=Nu,pa[ma++]=Su,Su=e,Nu=t}function ob(e,t,r){kr[Cr++]=Fn,kr[Cr++]=Un,kr[Cr++]=ji,ji=e;var n=Fn;e=Un;var s=32-Jr(n)-1;n&=~(1<<s),r+=1;var i=32-Jr(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Fn=1<<32-Jr(t)+s|r<<s|n,Un=i+e}else Fn=1<<i|r<<s|n,Un=e}function Cm(e){e.return!==null&&(ei(e,1),ob(e,1,0))}function Em(e){for(;e===Su;)Su=pa[--ma],pa[ma]=null,Nu=pa[--ma],pa[ma]=null;for(;e===ji;)ji=kr[--Cr],kr[Cr]=null,Un=kr[--Cr],kr[Cr]=null,Fn=kr[--Cr],kr[Cr]=null}var vr=null,gr=null,et=!1,Qr=null;function lb(e,t){var r=Er(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function by(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,vr=e,gr=Ts(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,vr=e,gr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ji!==null?{id:Fn,overflow:Un}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Er(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,vr=e,gr=null,!0):!1;default:return!1}}function Bf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zf(e){if(et){var t=gr;if(t){var r=t;if(!by(e,t)){if(Bf(e))throw Error(z(418));t=Ts(r.nextSibling);var n=vr;t&&by(e,t)?lb(n,r):(e.flags=e.flags&-4097|2,et=!1,vr=e)}}else{if(Bf(e))throw Error(z(418));e.flags=e.flags&-4097|2,et=!1,vr=e}}}function _y(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;vr=e}function Sc(e){if(e!==vr)return!1;if(!et)return _y(e),et=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Lf(e.type,e.memoizedProps)),t&&(t=gr)){if(Bf(e))throw cb(),Error(z(418));for(;t;)lb(e,t),t=Ts(t.nextSibling)}if(_y(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){gr=Ts(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}gr=null}}else gr=vr?Ts(e.stateNode.nextSibling):null;return!0}function cb(){for(var e=gr;e;)e=Ts(e.nextSibling)}function Va(){gr=vr=null,et=!1}function Tm(e){Qr===null?Qr=[e]:Qr.push(e)}var pT=Qn.ReactCurrentBatchConfig;function Eo(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(z(309));var n=r.stateNode}if(!n)throw Error(z(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(z(284));if(!r._owner)throw Error(z(290,e))}return e}function Nc(e,t){throw e=Object.prototype.toString.call(t),Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function jy(e){var t=e._init;return t(e._payload)}function ub(e){function t(w,y){if(e){var x=w.deletions;x===null?(w.deletions=[y],w.flags|=16):x.push(y)}}function r(w,y){if(!e)return null;for(;y!==null;)t(w,y),y=y.sibling;return null}function n(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function s(w,y){return w=Is(w,y),w.index=0,w.sibling=null,w}function i(w,y,x){return w.index=x,e?(x=w.alternate,x!==null?(x=x.index,x<y?(w.flags|=2,y):x):(w.flags|=2,y)):(w.flags|=1048576,y)}function o(w){return e&&w.alternate===null&&(w.flags|=2),w}function l(w,y,x,_){return y===null||y.tag!==6?(y=Ih(x,w.mode,_),y.return=w,y):(y=s(y,x),y.return=w,y)}function c(w,y,x,_){var j=x.type;return j===la?d(w,y,x.props.children,_,x.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===os&&jy(j)===y.type)?(_=s(y,x.props),_.ref=Eo(w,y,x),_.return=w,_):(_=nu(x.type,x.key,x.props,null,w.mode,_),_.ref=Eo(w,y,x),_.return=w,_)}function u(w,y,x,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=Oh(x,w.mode,_),y.return=w,y):(y=s(y,x.children||[]),y.return=w,y)}function d(w,y,x,_,j){return y===null||y.tag!==7?(y=wi(x,w.mode,_,j),y.return=w,y):(y=s(y,x),y.return=w,y)}function h(w,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Ih(""+y,w.mode,x),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case pc:return x=nu(y.type,y.key,y.props,null,w.mode,x),x.ref=Eo(w,null,y),x.return=w,x;case oa:return y=Oh(y,w.mode,x),y.return=w,y;case os:var _=y._init;return h(w,_(y._payload),x)}if(Fo(y)||jo(y))return y=wi(y,w.mode,x,null),y.return=w,y;Nc(w,y)}return null}function f(w,y,x,_){var j=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return j!==null?null:l(w,y,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case pc:return x.key===j?c(w,y,x,_):null;case oa:return x.key===j?u(w,y,x,_):null;case os:return j=x._init,f(w,y,j(x._payload),_)}if(Fo(x)||jo(x))return j!==null?null:d(w,y,x,_,null);Nc(w,x)}return null}function m(w,y,x,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return w=w.get(x)||null,l(y,w,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case pc:return w=w.get(_.key===null?x:_.key)||null,c(y,w,_,j);case oa:return w=w.get(_.key===null?x:_.key)||null,u(y,w,_,j);case os:var N=_._init;return m(w,y,x,N(_._payload),j)}if(Fo(_)||jo(_))return w=w.get(x)||null,d(y,w,_,j,null);Nc(y,_)}return null}function b(w,y,x,_){for(var j=null,N=null,k=y,S=y=0,E=null;k!==null&&S<x.length;S++){k.index>S?(E=k,k=null):E=k.sibling;var A=f(w,k,x[S],_);if(A===null){k===null&&(k=E);break}e&&k&&A.alternate===null&&t(w,k),y=i(A,y,S),N===null?j=A:N.sibling=A,N=A,k=E}if(S===x.length)return r(w,k),et&&ei(w,S),j;if(k===null){for(;S<x.length;S++)k=h(w,x[S],_),k!==null&&(y=i(k,y,S),N===null?j=k:N.sibling=k,N=k);return et&&ei(w,S),j}for(k=n(w,k);S<x.length;S++)E=m(k,w,S,x[S],_),E!==null&&(e&&E.alternate!==null&&k.delete(E.key===null?S:E.key),y=i(E,y,S),N===null?j=E:N.sibling=E,N=E);return e&&k.forEach(function($){return t(w,$)}),et&&ei(w,S),j}function g(w,y,x,_){var j=jo(x);if(typeof j!="function")throw Error(z(150));if(x=j.call(x),x==null)throw Error(z(151));for(var N=j=null,k=y,S=y=0,E=null,A=x.next();k!==null&&!A.done;S++,A=x.next()){k.index>S?(E=k,k=null):E=k.sibling;var $=f(w,k,A.value,_);if($===null){k===null&&(k=E);break}e&&k&&$.alternate===null&&t(w,k),y=i($,y,S),N===null?j=$:N.sibling=$,N=$,k=E}if(A.done)return r(w,k),et&&ei(w,S),j;if(k===null){for(;!A.done;S++,A=x.next())A=h(w,A.value,_),A!==null&&(y=i(A,y,S),N===null?j=A:N.sibling=A,N=A);return et&&ei(w,S),j}for(k=n(w,k);!A.done;S++,A=x.next())A=m(k,w,S,A.value,_),A!==null&&(e&&A.alternate!==null&&k.delete(A.key===null?S:A.key),y=i(A,y,S),N===null?j=A:N.sibling=A,N=A);return e&&k.forEach(function(M){return t(w,M)}),et&&ei(w,S),j}function v(w,y,x,_){if(typeof x=="object"&&x!==null&&x.type===la&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case pc:e:{for(var j=x.key,N=y;N!==null;){if(N.key===j){if(j=x.type,j===la){if(N.tag===7){r(w,N.sibling),y=s(N,x.props.children),y.return=w,w=y;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===os&&jy(j)===N.type){r(w,N.sibling),y=s(N,x.props),y.ref=Eo(w,N,x),y.return=w,w=y;break e}r(w,N);break}else t(w,N);N=N.sibling}x.type===la?(y=wi(x.props.children,w.mode,_,x.key),y.return=w,w=y):(_=nu(x.type,x.key,x.props,null,w.mode,_),_.ref=Eo(w,y,x),_.return=w,w=_)}return o(w);case oa:e:{for(N=x.key;y!==null;){if(y.key===N)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){r(w,y.sibling),y=s(y,x.children||[]),y.return=w,w=y;break e}else{r(w,y);break}else t(w,y);y=y.sibling}y=Oh(x,w.mode,_),y.return=w,w=y}return o(w);case os:return N=x._init,v(w,y,N(x._payload),_)}if(Fo(x))return b(w,y,x,_);if(jo(x))return g(w,y,x,_);Nc(w,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(r(w,y.sibling),y=s(y,x),y.return=w,w=y):(r(w,y),y=Ih(x,w.mode,_),y.return=w,w=y),o(w)):r(w,y)}return v}var Ha=ub(!0),db=ub(!1),ku=Vs(null),Cu=null,ga=null,Rm=null;function Pm(){Rm=ga=Cu=null}function Am(e){var t=ku.current;Xe(ku),e._currentValue=t}function qf(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Sa(e,t){Cu=e,Rm=ga=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(tr=!0),e.firstContext=null)}function Mr(e){var t=e._currentValue;if(Rm!==e)if(e={context:e,memoizedValue:t,next:null},ga===null){if(Cu===null)throw Error(z(308));ga=e,Cu.dependencies={lanes:0,firstContext:e}}else ga=ga.next=e;return t}var oi=null;function Im(e){oi===null?oi=[e]:oi.push(e)}function hb(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Im(t)):(r.next=s.next,s.next=r),t.interleaved=r,Vn(e,n)}function Vn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ls=!1;function Om(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fb(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Rs(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Me&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Vn(e,r)}return s=n.interleaved,s===null?(t.next=t,Im(n)):(t.next=s.next,s.next=t),n.interleaved=t,Vn(e,r)}function Jc(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,xm(e,r)}}function Sy(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Eu(e,t,r,n){var s=e.updateQueue;ls=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,g=l;switch(f=t,m=r,g.tag){case 1:if(b=g.payload,typeof b=="function"){h=b.call(m,h,f);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=g.payload,f=typeof b=="function"?b.call(m,h,f):b,f==null)break e;h=st({},h,f);break e;case 2:ls=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Ni|=o,e.lanes=o,e.memoizedState=h}}function Ny(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(z(191,s));s.call(n)}}}var Ql={},_n=Vs(Ql),vl=Vs(Ql),yl=Vs(Ql);function li(e){if(e===Ql)throw Error(z(174));return e}function Mm(e,t){switch(Ge(yl,t),Ge(vl,e),Ge(_n,Ql),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:jf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=jf(t,e)}Xe(_n),Ge(_n,t)}function Ka(){Xe(_n),Xe(vl),Xe(yl)}function pb(e){li(yl.current);var t=li(_n.current),r=jf(t,e.type);t!==r&&(Ge(vl,e),Ge(_n,r))}function Dm(e){vl.current===e&&(Xe(_n),Xe(vl))}var rt=Vs(0);function Tu(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ch=[];function Lm(){for(var e=0;e<Ch.length;e++)Ch[e]._workInProgressVersionPrimary=null;Ch.length=0}var Xc=Qn.ReactCurrentDispatcher,Eh=Qn.ReactCurrentBatchConfig,Si=0,nt=null,yt=null,_t=null,Ru=!1,Jo=!1,xl=0,mT=0;function At(){throw Error(z(321))}function $m(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Zr(e[r],t[r]))return!1;return!0}function Fm(e,t,r,n,s,i){if(Si=i,nt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xc.current=e===null||e.memoizedState===null?xT:wT,e=r(n,s),Jo){i=0;do{if(Jo=!1,xl=0,25<=i)throw Error(z(301));i+=1,_t=yt=null,t.updateQueue=null,Xc.current=bT,e=r(n,s)}while(Jo)}if(Xc.current=Pu,t=yt!==null&&yt.next!==null,Si=0,_t=yt=nt=null,Ru=!1,t)throw Error(z(300));return e}function Um(){var e=xl!==0;return xl=0,e}function pn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?nt.memoizedState=_t=e:_t=_t.next=e,_t}function Dr(){if(yt===null){var e=nt.alternate;e=e!==null?e.memoizedState:null}else e=yt.next;var t=_t===null?nt.memoizedState:_t.next;if(t!==null)_t=t,yt=e;else{if(e===null)throw Error(z(310));yt=e,e={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},_t===null?nt.memoizedState=_t=e:_t=_t.next=e}return _t}function wl(e,t){return typeof t=="function"?t(e):t}function Th(e){var t=Dr(),r=t.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=e;var n=yt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Si&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,nt.lanes|=d,Ni|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Zr(n,t.memoizedState)||(tr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,nt.lanes|=i,Ni|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Rh(e){var t=Dr(),r=t.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Zr(i,t.memoizedState)||(tr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function mb(){}function gb(e,t){var r=nt,n=Dr(),s=t(),i=!Zr(n.memoizedState,s);if(i&&(n.memoizedState=s,tr=!0),n=n.queue,Bm(xb.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||_t!==null&&_t.memoizedState.tag&1){if(r.flags|=2048,bl(9,yb.bind(null,r,n,s,t),void 0,null),jt===null)throw Error(z(349));Si&30||vb(r,t,s)}return s}function vb(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=nt.updateQueue,t===null?(t={lastEffect:null,stores:null},nt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function yb(e,t,r,n){t.value=r,t.getSnapshot=n,wb(t)&&bb(e)}function xb(e,t,r){return r(function(){wb(t)&&bb(e)})}function wb(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Zr(e,r)}catch{return!0}}function bb(e){var t=Vn(e,1);t!==null&&Xr(t,e,1,-1)}function ky(e){var t=pn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wl,lastRenderedState:e},t.queue=e,e=e.dispatch=yT.bind(null,nt,e),[t.memoizedState,e]}function bl(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=nt.updateQueue,t===null?(t={lastEffect:null,stores:null},nt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function _b(){return Dr().memoizedState}function Zc(e,t,r,n){var s=pn();nt.flags|=e,s.memoizedState=bl(1|t,r,void 0,n===void 0?null:n)}function hd(e,t,r,n){var s=Dr();n=n===void 0?null:n;var i=void 0;if(yt!==null){var o=yt.memoizedState;if(i=o.destroy,n!==null&&$m(n,o.deps)){s.memoizedState=bl(t,r,i,n);return}}nt.flags|=e,s.memoizedState=bl(1|t,r,i,n)}function Cy(e,t){return Zc(8390656,8,e,t)}function Bm(e,t){return hd(2048,8,e,t)}function jb(e,t){return hd(4,2,e,t)}function Sb(e,t){return hd(4,4,e,t)}function Nb(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kb(e,t,r){return r=r!=null?r.concat([e]):null,hd(4,4,Nb.bind(null,t,e),r)}function zm(){}function Cb(e,t){var r=Dr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&$m(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Eb(e,t){var r=Dr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&$m(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Tb(e,t,r){return Si&21?(Zr(r,t)||(r=O0(),nt.lanes|=r,Ni|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,tr=!0),e.memoizedState=r)}function gT(e,t){var r=qe;qe=r!==0&&4>r?r:4,e(!0);var n=Eh.transition;Eh.transition={};try{e(!1),t()}finally{qe=r,Eh.transition=n}}function Rb(){return Dr().memoizedState}function vT(e,t,r){var n=As(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Pb(e))Ab(t,r);else if(r=hb(e,t,r,n),r!==null){var s=Ht();Xr(r,e,n,s),Ib(r,t,n)}}function yT(e,t,r){var n=As(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Pb(e))Ab(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,Zr(l,o)){var c=t.interleaved;c===null?(s.next=s,Im(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=hb(e,t,s,n),r!==null&&(s=Ht(),Xr(r,e,n,s),Ib(r,t,n))}}function Pb(e){var t=e.alternate;return e===nt||t!==null&&t===nt}function Ab(e,t){Jo=Ru=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ib(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,xm(e,r)}}var Pu={readContext:Mr,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},xT={readContext:Mr,useCallback:function(e,t){return pn().memoizedState=[e,t===void 0?null:t],e},useContext:Mr,useEffect:Cy,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Zc(4194308,4,Nb.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Zc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zc(4,2,e,t)},useMemo:function(e,t){var r=pn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=pn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=vT.bind(null,nt,e),[n.memoizedState,e]},useRef:function(e){var t=pn();return e={current:e},t.memoizedState=e},useState:ky,useDebugValue:zm,useDeferredValue:function(e){return pn().memoizedState=e},useTransition:function(){var e=ky(!1),t=e[0];return e=gT.bind(null,e[1]),pn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=nt,s=pn();if(et){if(r===void 0)throw Error(z(407));r=r()}else{if(r=t(),jt===null)throw Error(z(349));Si&30||vb(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Cy(xb.bind(null,n,i,e),[e]),n.flags|=2048,bl(9,yb.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=pn(),t=jt.identifierPrefix;if(et){var r=Un,n=Fn;r=(n&~(1<<32-Jr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=xl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=mT++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},wT={readContext:Mr,useCallback:Cb,useContext:Mr,useEffect:Bm,useImperativeHandle:kb,useInsertionEffect:jb,useLayoutEffect:Sb,useMemo:Eb,useReducer:Th,useRef:_b,useState:function(){return Th(wl)},useDebugValue:zm,useDeferredValue:function(e){var t=Dr();return Tb(t,yt.memoizedState,e)},useTransition:function(){var e=Th(wl)[0],t=Dr().memoizedState;return[e,t]},useMutableSource:mb,useSyncExternalStore:gb,useId:Rb,unstable_isNewReconciler:!1},bT={readContext:Mr,useCallback:Cb,useContext:Mr,useEffect:Bm,useImperativeHandle:kb,useInsertionEffect:jb,useLayoutEffect:Sb,useMemo:Eb,useReducer:Rh,useRef:_b,useState:function(){return Rh(wl)},useDebugValue:zm,useDeferredValue:function(e){var t=Dr();return yt===null?t.memoizedState=e:Tb(t,yt.memoizedState,e)},useTransition:function(){var e=Rh(wl)[0],t=Dr().memoizedState;return[e,t]},useMutableSource:mb,useSyncExternalStore:gb,useId:Rb,unstable_isNewReconciler:!1};function Wr(e,t){if(e&&e.defaultProps){t=st({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Wf(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:st({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var fd={isMounted:function(e){return(e=e._reactInternals)?Di(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ht(),s=As(e),i=Bn(n,s);i.payload=t,r!=null&&(i.callback=r),t=Rs(e,i,s),t!==null&&(Xr(t,e,s,n),Jc(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ht(),s=As(e),i=Bn(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Rs(e,i,s),t!==null&&(Xr(t,e,s,n),Jc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ht(),n=As(e),s=Bn(r,n);s.tag=2,t!=null&&(s.callback=t),t=Rs(e,s,n),t!==null&&(Xr(t,e,n,r),Jc(t,e,n))}};function Ey(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!fl(r,n)||!fl(s,i):!0}function Ob(e,t,r){var n=!1,s=Us,i=t.contextType;return typeof i=="object"&&i!==null?i=Mr(i):(s=nr(t)?_i:Lt.current,n=t.contextTypes,i=(n=n!=null)?Wa(e,s):Us),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=fd,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Ty(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&fd.enqueueReplaceState(t,t.state,null)}function Vf(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Om(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Mr(i):(i=nr(t)?_i:Lt.current,s.context=Wa(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Wf(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&fd.enqueueReplaceState(s,s.state,null),Eu(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ga(e,t){try{var r="",n=t;do r+=YC(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Ph(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Hf(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var _T=typeof WeakMap=="function"?WeakMap:Map;function Mb(e,t,r){r=Bn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Iu||(Iu=!0,rp=n),Hf(e,t)},r}function Db(e,t,r){r=Bn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Hf(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Hf(e,t),typeof n!="function"&&(Ps===null?Ps=new Set([this]):Ps.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Ry(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new _T;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=DT.bind(null,e,t,r),t.then(e,e))}function Py(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ay(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Bn(-1,1),t.tag=2,Rs(r,t,1))),r.lanes|=1),e)}var jT=Qn.ReactCurrentOwner,tr=!1;function Wt(e,t,r,n){t.child=e===null?db(t,null,r,n):Ha(t,e.child,r,n)}function Iy(e,t,r,n,s){r=r.render;var i=t.ref;return Sa(t,s),n=Fm(e,t,r,n,i,s),r=Um(),e!==null&&!tr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Hn(e,t,s)):(et&&r&&Cm(t),t.flags|=1,Wt(e,t,n,s),t.child)}function Oy(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Qm(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Lb(e,t,i,n,s)):(e=nu(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:fl,r(o,n)&&e.ref===t.ref)return Hn(e,t,s)}return t.flags|=1,e=Is(i,n),e.ref=t.ref,e.return=t,t.child=e}function Lb(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(fl(i,n)&&e.ref===t.ref)if(tr=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(tr=!0);else return t.lanes=e.lanes,Hn(e,t,s)}return Kf(e,t,r,n,s)}function $b(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(ya,hr),hr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ge(ya,hr),hr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Ge(ya,hr),hr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Ge(ya,hr),hr|=n;return Wt(e,t,s,r),t.child}function Fb(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Kf(e,t,r,n,s){var i=nr(r)?_i:Lt.current;return i=Wa(t,i),Sa(t,s),r=Fm(e,t,r,n,i,s),n=Um(),e!==null&&!tr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Hn(e,t,s)):(et&&n&&Cm(t),t.flags|=1,Wt(e,t,r,s),t.child)}function My(e,t,r,n,s){if(nr(r)){var i=!0;ju(t)}else i=!1;if(Sa(t,s),t.stateNode===null)eu(e,t),Ob(t,r,n),Vf(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Mr(u):(u=nr(r)?_i:Lt.current,u=Wa(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Ty(t,o,n,u),ls=!1;var f=t.memoizedState;o.state=f,Eu(t,n,o,s),c=t.memoizedState,l!==n||f!==c||rr.current||ls?(typeof d=="function"&&(Wf(t,r,d,n),c=t.memoizedState),(l=ls||Ey(t,r,l,n,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,fb(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Wr(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Mr(c):(c=nr(r)?_i:Lt.current,c=Wa(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Ty(t,o,n,c),ls=!1,f=t.memoizedState,o.state=f,Eu(t,n,o,s);var b=t.memoizedState;l!==h||f!==b||rr.current||ls?(typeof m=="function"&&(Wf(t,r,m,n),b=t.memoizedState),(u=ls||Ey(t,r,u,n,f,b,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,b,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=b),o.props=n,o.state=b,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Gf(e,t,r,n,i,s)}function Gf(e,t,r,n,s,i){Fb(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&wy(t,r,!1),Hn(e,t,i);n=t.stateNode,jT.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Ha(t,e.child,null,i),t.child=Ha(t,null,l,i)):Wt(e,t,l,i),t.memoizedState=n.state,s&&wy(t,r,!0),t.child}function Ub(e){var t=e.stateNode;t.pendingContext?xy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&xy(e,t.context,!1),Mm(e,t.containerInfo)}function Dy(e,t,r,n,s){return Va(),Tm(s),t.flags|=256,Wt(e,t,r,n),t.child}var Yf={dehydrated:null,treeContext:null,retryLane:0};function Qf(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bb(e,t,r){var n=t.pendingProps,s=rt.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ge(rt,s&1),e===null)return zf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=gd(o,n,0,null),e=wi(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Qf(r),t.memoizedState=Yf,e):qm(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return ST(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Is(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Is(l,i):(i=wi(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Qf(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Yf,n}return i=e.child,e=i.sibling,n=Is(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function qm(e,t){return t=gd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function kc(e,t,r,n){return n!==null&&Tm(n),Ha(t,e.child,null,r),e=qm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ST(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Ph(Error(z(422))),kc(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=gd({mode:"visible",children:n.children},s,0,null),i=wi(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Ha(t,e.child,null,o),t.child.memoizedState=Qf(o),t.memoizedState=Yf,i);if(!(t.mode&1))return kc(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(z(419)),n=Ph(i,n,void 0),kc(e,t,o,n)}if(l=(o&e.childLanes)!==0,tr||l){if(n=jt,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Vn(e,s),Xr(n,e,s,-1))}return Ym(),n=Ph(Error(z(421))),kc(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=LT.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,gr=Ts(s.nextSibling),vr=t,et=!0,Qr=null,e!==null&&(kr[Cr++]=Fn,kr[Cr++]=Un,kr[Cr++]=ji,Fn=e.id,Un=e.overflow,ji=t),t=qm(t,n.children),t.flags|=4096,t)}function Ly(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),qf(e.return,t,r)}function Ah(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function zb(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Wt(e,t,n.children,r),n=rt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ly(e,r,t);else if(e.tag===19)Ly(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ge(rt,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Tu(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Ah(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Tu(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Ah(t,!0,r,null,i);break;case"together":Ah(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function eu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ni|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(z(153));if(t.child!==null){for(e=t.child,r=Is(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Is(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function NT(e,t,r){switch(t.tag){case 3:Ub(t),Va();break;case 5:pb(t);break;case 1:nr(t.type)&&ju(t);break;case 4:Mm(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Ge(ku,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ge(rt,rt.current&1),t.flags|=128,null):r&t.child.childLanes?Bb(e,t,r):(Ge(rt,rt.current&1),e=Hn(e,t,r),e!==null?e.sibling:null);Ge(rt,rt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return zb(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ge(rt,rt.current),n)break;return null;case 22:case 23:return t.lanes=0,$b(e,t,r)}return Hn(e,t,r)}var qb,Jf,Wb,Vb;qb=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Jf=function(){};Wb=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,li(_n.current);var i=null;switch(r){case"input":s=xf(e,s),n=xf(e,n),i=[];break;case"select":s=st({},s,{value:void 0}),n=st({},n,{value:void 0}),i=[];break;case"textarea":s=_f(e,s),n=_f(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=bu)}Sf(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(al.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(al.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Je("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Vb=function(e,t,r,n){r!==n&&(t.flags|=4)};function To(e,t){if(!et)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function It(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function kT(e,t,r){var n=t.pendingProps;switch(Em(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(t),null;case 1:return nr(t.type)&&_u(),It(t),null;case 3:return n=t.stateNode,Ka(),Xe(rr),Xe(Lt),Lm(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Sc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qr!==null&&(ip(Qr),Qr=null))),Jf(e,t),It(t),null;case 5:Dm(t);var s=li(yl.current);if(r=t.type,e!==null&&t.stateNode!=null)Wb(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(z(166));return It(t),null}if(e=li(_n.current),Sc(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[yn]=t,n[gl]=i,e=(t.mode&1)!==0,r){case"dialog":Je("cancel",n),Je("close",n);break;case"iframe":case"object":case"embed":Je("load",n);break;case"video":case"audio":for(s=0;s<Bo.length;s++)Je(Bo[s],n);break;case"source":Je("error",n);break;case"img":case"image":case"link":Je("error",n),Je("load",n);break;case"details":Je("toggle",n);break;case"input":Hv(n,i),Je("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Je("invalid",n);break;case"textarea":Gv(n,i),Je("invalid",n)}Sf(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&jc(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&jc(n.textContent,l,e),s=["children",""+l]):al.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Je("scroll",n)}switch(r){case"input":mc(n),Kv(n,i,!0);break;case"textarea":mc(n),Yv(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=bu)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=x0(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[yn]=t,e[gl]=n,qb(e,t,!1,!1),t.stateNode=e;e:{switch(o=Nf(r,n),r){case"dialog":Je("cancel",e),Je("close",e),s=n;break;case"iframe":case"object":case"embed":Je("load",e),s=n;break;case"video":case"audio":for(s=0;s<Bo.length;s++)Je(Bo[s],e);s=n;break;case"source":Je("error",e),s=n;break;case"img":case"image":case"link":Je("error",e),Je("load",e),s=n;break;case"details":Je("toggle",e),s=n;break;case"input":Hv(e,n),s=xf(e,n),Je("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=st({},n,{value:void 0}),Je("invalid",e);break;case"textarea":Gv(e,n),s=_f(e,n),Je("invalid",e);break;default:s=n}Sf(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?_0(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&w0(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ol(e,c):typeof c=="number"&&ol(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(al.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Je("scroll",e):c!=null&&fm(e,i,c,o))}switch(r){case"input":mc(e),Kv(e,n,!1);break;case"textarea":mc(e),Yv(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Fs(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?wa(e,!!n.multiple,i,!1):n.defaultValue!=null&&wa(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=bu)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return It(t),null;case 6:if(e&&t.stateNode!=null)Vb(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(z(166));if(r=li(yl.current),li(_n.current),Sc(t)){if(n=t.stateNode,r=t.memoizedProps,n[yn]=t,(i=n.nodeValue!==r)&&(e=vr,e!==null))switch(e.tag){case 3:jc(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&jc(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[yn]=t,t.stateNode=n}return It(t),null;case 13:if(Xe(rt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(et&&gr!==null&&t.mode&1&&!(t.flags&128))cb(),Va(),t.flags|=98560,i=!1;else if(i=Sc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(z(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[yn]=t}else Va(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;It(t),i=!1}else Qr!==null&&(ip(Qr),Qr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||rt.current&1?wt===0&&(wt=3):Ym())),t.updateQueue!==null&&(t.flags|=4),It(t),null);case 4:return Ka(),Jf(e,t),e===null&&pl(t.stateNode.containerInfo),It(t),null;case 10:return Am(t.type._context),It(t),null;case 17:return nr(t.type)&&_u(),It(t),null;case 19:if(Xe(rt),i=t.memoizedState,i===null)return It(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)To(i,!1);else{if(wt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Tu(e),o!==null){for(t.flags|=128,To(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ge(rt,rt.current&1|2),t.child}e=e.sibling}i.tail!==null&&ut()>Ya&&(t.flags|=128,n=!0,To(i,!1),t.lanes=4194304)}else{if(!n)if(e=Tu(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),To(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!et)return It(t),null}else 2*ut()-i.renderingStartTime>Ya&&r!==1073741824&&(t.flags|=128,n=!0,To(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ut(),t.sibling=null,r=rt.current,Ge(rt,n?r&1|2:r&1),t):(It(t),null);case 22:case 23:return Gm(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?hr&1073741824&&(It(t),t.subtreeFlags&6&&(t.flags|=8192)):It(t),null;case 24:return null;case 25:return null}throw Error(z(156,t.tag))}function CT(e,t){switch(Em(t),t.tag){case 1:return nr(t.type)&&_u(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ka(),Xe(rr),Xe(Lt),Lm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Dm(t),null;case 13:if(Xe(rt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(z(340));Va()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Xe(rt),null;case 4:return Ka(),null;case 10:return Am(t.type._context),null;case 22:case 23:return Gm(),null;case 24:return null;default:return null}}var Cc=!1,Mt=!1,ET=typeof WeakSet=="function"?WeakSet:Set,re=null;function va(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ot(e,t,n)}else r.current=null}function Xf(e,t,r){try{r()}catch(n){ot(e,t,n)}}var $y=!1;function TT(e,t){if(Mf=yu,e=Q0(),km(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===r&&++u===s&&(l=o),f===i&&++d===n&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Df={focusedElem:e,selectionRange:r},yu=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var g=b.memoizedProps,v=b.memoizedState,w=t.stateNode,y=w.getSnapshotBeforeUpdate(t.elementType===t.type?g:Wr(t.type,g),v);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(_){ot(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return b=$y,$y=!1,b}function Xo(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Xf(t,r,i)}s=s.next}while(s!==n)}}function pd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Zf(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Hb(e){var t=e.alternate;t!==null&&(e.alternate=null,Hb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[yn],delete t[gl],delete t[Ff],delete t[dT],delete t[hT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Kb(e){return e.tag===5||e.tag===3||e.tag===4}function Fy(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Kb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ep(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=bu));else if(n!==4&&(e=e.child,e!==null))for(ep(e,t,r),e=e.sibling;e!==null;)ep(e,t,r),e=e.sibling}function tp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(tp(e,t,r),e=e.sibling;e!==null;)tp(e,t,r),e=e.sibling}var Ct=null,Gr=!1;function ts(e,t,r){for(r=r.child;r!==null;)Gb(e,t,r),r=r.sibling}function Gb(e,t,r){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(ad,r)}catch{}switch(r.tag){case 5:Mt||va(r,t);case 6:var n=Ct,s=Gr;Ct=null,ts(e,t,r),Ct=n,Gr=s,Ct!==null&&(Gr?(e=Ct,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ct.removeChild(r.stateNode));break;case 18:Ct!==null&&(Gr?(e=Ct,r=r.stateNode,e.nodeType===8?Nh(e.parentNode,r):e.nodeType===1&&Nh(e,r),dl(e)):Nh(Ct,r.stateNode));break;case 4:n=Ct,s=Gr,Ct=r.stateNode.containerInfo,Gr=!0,ts(e,t,r),Ct=n,Gr=s;break;case 0:case 11:case 14:case 15:if(!Mt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Xf(r,t,o),s=s.next}while(s!==n)}ts(e,t,r);break;case 1:if(!Mt&&(va(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ot(r,t,l)}ts(e,t,r);break;case 21:ts(e,t,r);break;case 22:r.mode&1?(Mt=(n=Mt)||r.memoizedState!==null,ts(e,t,r),Mt=n):ts(e,t,r);break;default:ts(e,t,r)}}function Uy(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new ET),t.forEach(function(n){var s=$T.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Ur(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ct=l.stateNode,Gr=!1;break e;case 3:Ct=l.stateNode.containerInfo,Gr=!0;break e;case 4:Ct=l.stateNode.containerInfo,Gr=!0;break e}l=l.return}if(Ct===null)throw Error(z(160));Gb(i,o,s),Ct=null,Gr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ot(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Yb(t,e),t=t.sibling}function Yb(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ur(t,e),fn(e),n&4){try{Xo(3,e,e.return),pd(3,e)}catch(g){ot(e,e.return,g)}try{Xo(5,e,e.return)}catch(g){ot(e,e.return,g)}}break;case 1:Ur(t,e),fn(e),n&512&&r!==null&&va(r,r.return);break;case 5:if(Ur(t,e),fn(e),n&512&&r!==null&&va(r,r.return),e.flags&32){var s=e.stateNode;try{ol(s,"")}catch(g){ot(e,e.return,g)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&v0(s,i),Nf(l,o);var u=Nf(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?_0(s,h):d==="dangerouslySetInnerHTML"?w0(s,h):d==="children"?ol(s,h):fm(s,d,h,u)}switch(l){case"input":wf(s,i);break;case"textarea":y0(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?wa(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?wa(s,!!i.multiple,i.defaultValue,!0):wa(s,!!i.multiple,i.multiple?[]:"",!1))}s[gl]=i}catch(g){ot(e,e.return,g)}}break;case 6:if(Ur(t,e),fn(e),n&4){if(e.stateNode===null)throw Error(z(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(g){ot(e,e.return,g)}}break;case 3:if(Ur(t,e),fn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{dl(t.containerInfo)}catch(g){ot(e,e.return,g)}break;case 4:Ur(t,e),fn(e);break;case 13:Ur(t,e),fn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Hm=ut())),n&4&&Uy(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Mt=(u=Mt)||d,Ur(t,e),Mt=u):Ur(t,e),fn(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(re=e,d=e.child;d!==null;){for(h=re=d;re!==null;){switch(f=re,m=f.child,f.tag){case 0:case 11:case 14:case 15:Xo(4,f,f.return);break;case 1:va(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(g){ot(n,r,g)}}break;case 5:va(f,f.return);break;case 22:if(f.memoizedState!==null){zy(h);continue}}m!==null?(m.return=f,re=m):zy(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=b0("display",o))}catch(g){ot(e,e.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){ot(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ur(t,e),fn(e),n&4&&Uy(e);break;case 21:break;default:Ur(t,e),fn(e)}}function fn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Kb(r)){var n=r;break e}r=r.return}throw Error(z(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(ol(s,""),n.flags&=-33);var i=Fy(e);tp(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Fy(e);ep(e,l,o);break;default:throw Error(z(161))}}catch(c){ot(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function RT(e,t,r){re=e,Qb(e)}function Qb(e,t,r){for(var n=(e.mode&1)!==0;re!==null;){var s=re,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Cc;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Mt;l=Cc;var u=Mt;if(Cc=o,(Mt=c)&&!u)for(re=s;re!==null;)o=re,c=o.child,o.tag===22&&o.memoizedState!==null?qy(s):c!==null?(c.return=o,re=c):qy(s);for(;i!==null;)re=i,Qb(i),i=i.sibling;re=s,Cc=l,Mt=u}By(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,re=i):By(e)}}function By(e){for(;re!==null;){var t=re;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Mt||pd(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Mt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Wr(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Ny(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Ny(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&dl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Mt||t.flags&512&&Zf(t)}catch(f){ot(t,t.return,f)}}if(t===e){re=null;break}if(r=t.sibling,r!==null){r.return=t.return,re=r;break}re=t.return}}function zy(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var r=t.sibling;if(r!==null){r.return=t.return,re=r;break}re=t.return}}function qy(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{pd(4,t)}catch(c){ot(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){ot(t,s,c)}}var i=t.return;try{Zf(t)}catch(c){ot(t,i,c)}break;case 5:var o=t.return;try{Zf(t)}catch(c){ot(t,o,c)}}}catch(c){ot(t,t.return,c)}if(t===e){re=null;break}var l=t.sibling;if(l!==null){l.return=t.return,re=l;break}re=t.return}}var PT=Math.ceil,Au=Qn.ReactCurrentDispatcher,Wm=Qn.ReactCurrentOwner,Pr=Qn.ReactCurrentBatchConfig,Me=0,jt=null,pt=null,Et=0,hr=0,ya=Vs(0),wt=0,_l=null,Ni=0,md=0,Vm=0,Zo=null,er=null,Hm=0,Ya=1/0,In=null,Iu=!1,rp=null,Ps=null,Ec=!1,Ss=null,Ou=0,el=0,np=null,tu=-1,ru=0;function Ht(){return Me&6?ut():tu!==-1?tu:tu=ut()}function As(e){return e.mode&1?Me&2&&Et!==0?Et&-Et:pT.transition!==null?(ru===0&&(ru=O0()),ru):(e=qe,e!==0||(e=window.event,e=e===void 0?16:B0(e.type)),e):1}function Xr(e,t,r,n){if(50<el)throw el=0,np=null,Error(z(185));Kl(e,r,n),(!(Me&2)||e!==jt)&&(e===jt&&(!(Me&2)&&(md|=r),wt===4&&ds(e,Et)),sr(e,n),r===1&&Me===0&&!(t.mode&1)&&(Ya=ut()+500,dd&&Hs()))}function sr(e,t){var r=e.callbackNode;pE(e,t);var n=vu(e,e===jt?Et:0);if(n===0)r!==null&&Xv(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Xv(r),t===1)e.tag===0?fT(Wy.bind(null,e)):ab(Wy.bind(null,e)),cT(function(){!(Me&6)&&Hs()}),r=null;else{switch(M0(n)){case 1:r=ym;break;case 4:r=A0;break;case 16:r=gu;break;case 536870912:r=I0;break;default:r=gu}r=s_(r,Jb.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Jb(e,t){if(tu=-1,ru=0,Me&6)throw Error(z(327));var r=e.callbackNode;if(Na()&&e.callbackNode!==r)return null;var n=vu(e,e===jt?Et:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Mu(e,n);else{t=n;var s=Me;Me|=2;var i=Zb();(jt!==e||Et!==t)&&(In=null,Ya=ut()+500,xi(e,t));do try{OT();break}catch(l){Xb(e,l)}while(!0);Pm(),Au.current=i,Me=s,pt!==null?t=0:(jt=null,Et=0,t=wt)}if(t!==0){if(t===2&&(s=Rf(e),s!==0&&(n=s,t=sp(e,s))),t===1)throw r=_l,xi(e,0),ds(e,n),sr(e,ut()),r;if(t===6)ds(e,n);else{if(s=e.current.alternate,!(n&30)&&!AT(s)&&(t=Mu(e,n),t===2&&(i=Rf(e),i!==0&&(n=i,t=sp(e,i))),t===1))throw r=_l,xi(e,0),ds(e,n),sr(e,ut()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(z(345));case 2:ti(e,er,In);break;case 3:if(ds(e,n),(n&130023424)===n&&(t=Hm+500-ut(),10<t)){if(vu(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Ht(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=$f(ti.bind(null,e,er,In),t);break}ti(e,er,In);break;case 4:if(ds(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-Jr(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=ut()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*PT(n/1960))-n,10<n){e.timeoutHandle=$f(ti.bind(null,e,er,In),n);break}ti(e,er,In);break;case 5:ti(e,er,In);break;default:throw Error(z(329))}}}return sr(e,ut()),e.callbackNode===r?Jb.bind(null,e):null}function sp(e,t){var r=Zo;return e.current.memoizedState.isDehydrated&&(xi(e,t).flags|=256),e=Mu(e,t),e!==2&&(t=er,er=r,t!==null&&ip(t)),e}function ip(e){er===null?er=e:er.push.apply(er,e)}function AT(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Zr(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ds(e,t){for(t&=~Vm,t&=~md,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Jr(t),n=1<<r;e[r]=-1,t&=~n}}function Wy(e){if(Me&6)throw Error(z(327));Na();var t=vu(e,0);if(!(t&1))return sr(e,ut()),null;var r=Mu(e,t);if(e.tag!==0&&r===2){var n=Rf(e);n!==0&&(t=n,r=sp(e,n))}if(r===1)throw r=_l,xi(e,0),ds(e,t),sr(e,ut()),r;if(r===6)throw Error(z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ti(e,er,In),sr(e,ut()),null}function Km(e,t){var r=Me;Me|=1;try{return e(t)}finally{Me=r,Me===0&&(Ya=ut()+500,dd&&Hs())}}function ki(e){Ss!==null&&Ss.tag===0&&!(Me&6)&&Na();var t=Me;Me|=1;var r=Pr.transition,n=qe;try{if(Pr.transition=null,qe=1,e)return e()}finally{qe=n,Pr.transition=r,Me=t,!(Me&6)&&Hs()}}function Gm(){hr=ya.current,Xe(ya)}function xi(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,lT(r)),pt!==null)for(r=pt.return;r!==null;){var n=r;switch(Em(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&_u();break;case 3:Ka(),Xe(rr),Xe(Lt),Lm();break;case 5:Dm(n);break;case 4:Ka();break;case 13:Xe(rt);break;case 19:Xe(rt);break;case 10:Am(n.type._context);break;case 22:case 23:Gm()}r=r.return}if(jt=e,pt=e=Is(e.current,null),Et=hr=t,wt=0,_l=null,Vm=md=Ni=0,er=Zo=null,oi!==null){for(t=0;t<oi.length;t++)if(r=oi[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}oi=null}return e}function Xb(e,t){do{var r=pt;try{if(Pm(),Xc.current=Pu,Ru){for(var n=nt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ru=!1}if(Si=0,_t=yt=nt=null,Jo=!1,xl=0,Wm.current=null,r===null||r.return===null){wt=1,_l=t,pt=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Et,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Py(o);if(m!==null){m.flags&=-257,Ay(m,o,l,i,t),m.mode&1&&Ry(i,u,t),t=m,c=u;var b=t.updateQueue;if(b===null){var g=new Set;g.add(c),t.updateQueue=g}else b.add(c);break e}else{if(!(t&1)){Ry(i,u,t),Ym();break e}c=Error(z(426))}}else if(et&&l.mode&1){var v=Py(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Ay(v,o,l,i,t),Tm(Ga(c,l));break e}}i=c=Ga(c,l),wt!==4&&(wt=2),Zo===null?Zo=[i]:Zo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var w=Mb(i,c,t);Sy(i,w);break e;case 1:l=c;var y=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ps===null||!Ps.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=Db(i,l,t);Sy(i,_);break e}}i=i.return}while(i!==null)}t_(r)}catch(j){t=j,pt===r&&r!==null&&(pt=r=r.return);continue}break}while(!0)}function Zb(){var e=Au.current;return Au.current=Pu,e===null?Pu:e}function Ym(){(wt===0||wt===3||wt===2)&&(wt=4),jt===null||!(Ni&268435455)&&!(md&268435455)||ds(jt,Et)}function Mu(e,t){var r=Me;Me|=2;var n=Zb();(jt!==e||Et!==t)&&(In=null,xi(e,t));do try{IT();break}catch(s){Xb(e,s)}while(!0);if(Pm(),Me=r,Au.current=n,pt!==null)throw Error(z(261));return jt=null,Et=0,wt}function IT(){for(;pt!==null;)e_(pt)}function OT(){for(;pt!==null&&!iE();)e_(pt)}function e_(e){var t=n_(e.alternate,e,hr);e.memoizedProps=e.pendingProps,t===null?t_(e):pt=t,Wm.current=null}function t_(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=CT(r,t),r!==null){r.flags&=32767,pt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{wt=6,pt=null;return}}else if(r=kT(r,t,hr),r!==null){pt=r;return}if(t=t.sibling,t!==null){pt=t;return}pt=t=e}while(t!==null);wt===0&&(wt=5)}function ti(e,t,r){var n=qe,s=Pr.transition;try{Pr.transition=null,qe=1,MT(e,t,r,n)}finally{Pr.transition=s,qe=n}return null}function MT(e,t,r,n){do Na();while(Ss!==null);if(Me&6)throw Error(z(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(z(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(mE(e,i),e===jt&&(pt=jt=null,Et=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ec||(Ec=!0,s_(gu,function(){return Na(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Pr.transition,Pr.transition=null;var o=qe;qe=1;var l=Me;Me|=4,Wm.current=null,TT(e,r),Yb(r,e),tT(Df),yu=!!Mf,Df=Mf=null,e.current=r,RT(r),aE(),Me=l,qe=o,Pr.transition=i}else e.current=r;if(Ec&&(Ec=!1,Ss=e,Ou=s),i=e.pendingLanes,i===0&&(Ps=null),cE(r.stateNode),sr(e,ut()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Iu)throw Iu=!1,e=rp,rp=null,e;return Ou&1&&e.tag!==0&&Na(),i=e.pendingLanes,i&1?e===np?el++:(el=0,np=e):el=0,Hs(),null}function Na(){if(Ss!==null){var e=M0(Ou),t=Pr.transition,r=qe;try{if(Pr.transition=null,qe=16>e?16:e,Ss===null)var n=!1;else{if(e=Ss,Ss=null,Ou=0,Me&6)throw Error(z(331));var s=Me;for(Me|=4,re=e.current;re!==null;){var i=re,o=i.child;if(re.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(re=u;re!==null;){var d=re;switch(d.tag){case 0:case 11:case 15:Xo(8,d,i)}var h=d.child;if(h!==null)h.return=d,re=h;else for(;re!==null;){d=re;var f=d.sibling,m=d.return;if(Hb(d),d===u){re=null;break}if(f!==null){f.return=m,re=f;break}re=m}}}var b=i.alternate;if(b!==null){var g=b.child;if(g!==null){b.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}re=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,re=o;else e:for(;re!==null;){if(i=re,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Xo(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,re=w;break e}re=i.return}}var y=e.current;for(re=y;re!==null;){o=re;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,re=x;else e:for(o=y;re!==null;){if(l=re,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:pd(9,l)}}catch(j){ot(l,l.return,j)}if(l===o){re=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,re=_;break e}re=l.return}}if(Me=s,Hs(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(ad,e)}catch{}n=!0}return n}finally{qe=r,Pr.transition=t}}return!1}function Vy(e,t,r){t=Ga(r,t),t=Mb(e,t,1),e=Rs(e,t,1),t=Ht(),e!==null&&(Kl(e,1,t),sr(e,t))}function ot(e,t,r){if(e.tag===3)Vy(e,e,r);else for(;t!==null;){if(t.tag===3){Vy(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ps===null||!Ps.has(n))){e=Ga(r,e),e=Db(t,e,1),t=Rs(t,e,1),e=Ht(),t!==null&&(Kl(t,1,e),sr(t,e));break}}t=t.return}}function DT(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ht(),e.pingedLanes|=e.suspendedLanes&r,jt===e&&(Et&r)===r&&(wt===4||wt===3&&(Et&130023424)===Et&&500>ut()-Hm?xi(e,0):Vm|=r),sr(e,t)}function r_(e,t){t===0&&(e.mode&1?(t=yc,yc<<=1,!(yc&130023424)&&(yc=4194304)):t=1);var r=Ht();e=Vn(e,t),e!==null&&(Kl(e,t,r),sr(e,r))}function LT(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),r_(e,r)}function $T(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(z(314))}n!==null&&n.delete(t),r_(e,r)}var n_;n_=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||rr.current)tr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return tr=!1,NT(e,t,r);tr=!!(e.flags&131072)}else tr=!1,et&&t.flags&1048576&&ob(t,Nu,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;eu(e,t),e=t.pendingProps;var s=Wa(t,Lt.current);Sa(t,r),s=Fm(null,t,n,e,s,r);var i=Um();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nr(n)?(i=!0,ju(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Om(t),s.updater=fd,t.stateNode=s,s._reactInternals=t,Vf(t,n,e,r),t=Gf(null,t,n,!0,i,r)):(t.tag=0,et&&i&&Cm(t),Wt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(eu(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=UT(n),e=Wr(n,e),s){case 0:t=Kf(null,t,n,e,r);break e;case 1:t=My(null,t,n,e,r);break e;case 11:t=Iy(null,t,n,e,r);break e;case 14:t=Oy(null,t,n,Wr(n.type,e),r);break e}throw Error(z(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wr(n,s),Kf(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wr(n,s),My(e,t,n,s,r);case 3:e:{if(Ub(t),e===null)throw Error(z(387));n=t.pendingProps,i=t.memoizedState,s=i.element,fb(e,t),Eu(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Ga(Error(z(423)),t),t=Dy(e,t,n,r,s);break e}else if(n!==s){s=Ga(Error(z(424)),t),t=Dy(e,t,n,r,s);break e}else for(gr=Ts(t.stateNode.containerInfo.firstChild),vr=t,et=!0,Qr=null,r=db(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Va(),n===s){t=Hn(e,t,r);break e}Wt(e,t,n,r)}t=t.child}return t;case 5:return pb(t),e===null&&zf(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Lf(n,s)?o=null:i!==null&&Lf(n,i)&&(t.flags|=32),Fb(e,t),Wt(e,t,o,r),t.child;case 6:return e===null&&zf(t),null;case 13:return Bb(e,t,r);case 4:return Mm(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ha(t,null,n,r):Wt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wr(n,s),Iy(e,t,n,s,r);case 7:return Wt(e,t,t.pendingProps,r),t.child;case 8:return Wt(e,t,t.pendingProps.children,r),t.child;case 12:return Wt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Ge(ku,n._currentValue),n._currentValue=o,i!==null)if(Zr(i.value,o)){if(i.children===s.children&&!rr.current){t=Hn(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Bn(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),qf(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),qf(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Wt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Sa(t,r),s=Mr(s),n=n(s),t.flags|=1,Wt(e,t,n,r),t.child;case 14:return n=t.type,s=Wr(n,t.pendingProps),s=Wr(n.type,s),Oy(e,t,n,s,r);case 15:return Lb(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wr(n,s),eu(e,t),t.tag=1,nr(n)?(e=!0,ju(t)):e=!1,Sa(t,r),Ob(t,n,s),Vf(t,n,s,r),Gf(null,t,n,!0,e,r);case 19:return zb(e,t,r);case 22:return $b(e,t,r)}throw Error(z(156,t.tag))};function s_(e,t){return P0(e,t)}function FT(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(e,t,r,n){return new FT(e,t,r,n)}function Qm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function UT(e){if(typeof e=="function")return Qm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===mm)return 11;if(e===gm)return 14}return 2}function Is(e,t){var r=e.alternate;return r===null?(r=Er(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function nu(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")Qm(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case la:return wi(r.children,s,i,t);case pm:o=8,s|=8;break;case mf:return e=Er(12,r,t,s|2),e.elementType=mf,e.lanes=i,e;case gf:return e=Er(13,r,t,s),e.elementType=gf,e.lanes=i,e;case vf:return e=Er(19,r,t,s),e.elementType=vf,e.lanes=i,e;case p0:return gd(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case h0:o=10;break e;case f0:o=9;break e;case mm:o=11;break e;case gm:o=14;break e;case os:o=16,n=null;break e}throw Error(z(130,e==null?e:typeof e,""))}return t=Er(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function wi(e,t,r,n){return e=Er(7,e,n,t),e.lanes=r,e}function gd(e,t,r,n){return e=Er(22,e,n,t),e.elementType=p0,e.lanes=r,e.stateNode={isHidden:!1},e}function Ih(e,t,r){return e=Er(6,e,null,t),e.lanes=r,e}function Oh(e,t,r){return t=Er(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function BT(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ph(0),this.expirationTimes=ph(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ph(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Jm(e,t,r,n,s,i,o,l,c){return e=new BT(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Er(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Om(i),e}function zT(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oa,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function i_(e){if(!e)return Us;e=e._reactInternals;e:{if(Di(e)!==e||e.tag!==1)throw Error(z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(nr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(z(171))}if(e.tag===1){var r=e.type;if(nr(r))return ib(e,r,t)}return t}function a_(e,t,r,n,s,i,o,l,c){return e=Jm(r,n,!0,e,s,i,o,l,c),e.context=i_(null),r=e.current,n=Ht(),s=As(r),i=Bn(n,s),i.callback=t??null,Rs(r,i,s),e.current.lanes=s,Kl(e,s,n),sr(e,n),e}function vd(e,t,r,n){var s=t.current,i=Ht(),o=As(s);return r=i_(r),t.context===null?t.context=r:t.pendingContext=r,t=Bn(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Rs(s,t,o),e!==null&&(Xr(e,s,o,i),Jc(e,s,o)),o}function Du(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Hy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Xm(e,t){Hy(e,t),(e=e.alternate)&&Hy(e,t)}function qT(){return null}var o_=typeof reportError=="function"?reportError:function(e){console.error(e)};function Zm(e){this._internalRoot=e}yd.prototype.render=Zm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(z(409));vd(e,t,null,null)};yd.prototype.unmount=Zm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ki(function(){vd(null,e,null,null)}),t[Wn]=null}};function yd(e){this._internalRoot=e}yd.prototype.unstable_scheduleHydration=function(e){if(e){var t=$0();e={blockedOn:null,target:e,priority:t};for(var r=0;r<us.length&&t!==0&&t<us[r].priority;r++);us.splice(r,0,e),r===0&&U0(e)}};function eg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ky(){}function WT(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Du(o);i.call(u)}}var o=a_(t,n,e,0,null,!1,!1,"",Ky);return e._reactRootContainer=o,e[Wn]=o.current,pl(e.nodeType===8?e.parentNode:e),ki(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Du(c);l.call(u)}}var c=Jm(e,0,!1,null,null,!1,!1,"",Ky);return e._reactRootContainer=c,e[Wn]=c.current,pl(e.nodeType===8?e.parentNode:e),ki(function(){vd(t,c,r,n)}),c}function wd(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Du(o);l.call(c)}}vd(t,o,e,s)}else o=WT(r,t,e,s,n);return Du(o)}D0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Uo(t.pendingLanes);r!==0&&(xm(t,r|1),sr(t,ut()),!(Me&6)&&(Ya=ut()+500,Hs()))}break;case 13:ki(function(){var n=Vn(e,1);if(n!==null){var s=Ht();Xr(n,e,1,s)}}),Xm(e,1)}};wm=function(e){if(e.tag===13){var t=Vn(e,134217728);if(t!==null){var r=Ht();Xr(t,e,134217728,r)}Xm(e,134217728)}};L0=function(e){if(e.tag===13){var t=As(e),r=Vn(e,t);if(r!==null){var n=Ht();Xr(r,e,t,n)}Xm(e,t)}};$0=function(){return qe};F0=function(e,t){var r=qe;try{return qe=e,t()}finally{qe=r}};Cf=function(e,t,r){switch(t){case"input":if(wf(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=ud(n);if(!s)throw Error(z(90));g0(n),wf(n,s)}}}break;case"textarea":y0(e,r);break;case"select":t=r.value,t!=null&&wa(e,!!r.multiple,t,!1)}};N0=Km;k0=ki;var VT={usingClientEntryPoint:!1,Events:[Yl,ha,ud,j0,S0,Km]},Ro={findFiberByHostInstance:ai,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HT={bundleType:Ro.bundleType,version:Ro.version,rendererPackageName:Ro.rendererPackageName,rendererConfig:Ro.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=T0(e),e===null?null:e.stateNode},findFiberByHostInstance:Ro.findFiberByHostInstance||qT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tc.isDisabled&&Tc.supportsFiber)try{ad=Tc.inject(HT),bn=Tc}catch{}}wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VT;wr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eg(t))throw Error(z(200));return zT(e,t,null,r)};wr.createRoot=function(e,t){if(!eg(e))throw Error(z(299));var r=!1,n="",s=o_;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Jm(e,1,!1,null,null,r,!1,n,s),e[Wn]=t.current,pl(e.nodeType===8?e.parentNode:e),new Zm(t)};wr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(z(188)):(e=Object.keys(e).join(","),Error(z(268,e)));return e=T0(t),e=e===null?null:e.stateNode,e};wr.flushSync=function(e){return ki(e)};wr.hydrate=function(e,t,r){if(!xd(t))throw Error(z(200));return wd(null,e,t,!0,r)};wr.hydrateRoot=function(e,t,r){if(!eg(e))throw Error(z(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=o_;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=a_(t,null,e,1,r??null,s,!1,i,o),e[Wn]=t.current,pl(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new yd(t)};wr.render=function(e,t,r){if(!xd(t))throw Error(z(200));return wd(null,e,t,!1,r)};wr.unmountComponentAtNode=function(e){if(!xd(e))throw Error(z(40));return e._reactRootContainer?(ki(function(){wd(null,null,e,!1,function(){e._reactRootContainer=null,e[Wn]=null})}),!0):!1};wr.unstable_batchedUpdates=Km;wr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!xd(r))throw Error(z(200));if(e==null||e._reactInternals===void 0)throw Error(z(38));return wd(e,t,r,!1,n)};wr.version="18.3.1-next-f1338f8080-20240426";function l_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l_)}catch(e){console.error(e)}}l_(),l0.exports=wr;var ln=l0.exports;const c_=Qw(ln);var u_,Gy=ln;u_=Gy.createRoot,Gy.hydrateRoot;const KT=1,GT=1e6;let Mh=0;function YT(){return Mh=(Mh+1)%Number.MAX_SAFE_INTEGER,Mh.toString()}const Dh=new Map,Yy=e=>{if(Dh.has(e))return;const t=setTimeout(()=>{Dh.delete(e),tl({type:"REMOVE_TOAST",toastId:e})},GT);Dh.set(e,t)},QT=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,KT)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Yy(r):e.toasts.forEach(n=>{Yy(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},su=[];let iu={toasts:[]};function tl(e){iu=QT(iu,e),su.forEach(t=>{t(iu)})}function JT({...e}){const t=YT(),r=s=>tl({type:"UPDATE_TOAST",toast:{...s,id:t}}),n=()=>tl({type:"DISMISS_TOAST",toastId:t});return tl({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||n()}}}),{id:t,dismiss:n,update:r}}function $t(){const[e,t]=p.useState(iu);return p.useEffect(()=>(su.push(t),()=>{const r=su.indexOf(t);r>-1&&su.splice(r,1)}),[e]),{...e,toast:JT,dismiss:r=>tl({type:"DISMISS_TOAST",toastId:r})}}function H(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Qy(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function bd(...e){return t=>{let r=!1;const n=e.map(s=>{const i=Qy(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():Qy(e[s],null)}}}}function Ne(...e){return p.useCallback(bd(...e),e)}function XT(e,t){const r=p.createContext(t),n=i=>{const{children:o,...l}=i,c=p.useMemo(()=>l,Object.values(l));return a.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function s(i){const o=p.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,s]}function Ft(e,t=[]){let r=[];function n(i,o){const l=p.createContext(o),c=r.length;r=[...r,o];const u=h=>{var w;const{scope:f,children:m,...b}=h,g=((w=f==null?void 0:f[e])==null?void 0:w[c])||l,v=p.useMemo(()=>b,Object.values(b));return a.jsx(g.Provider,{value:v,children:m})};u.displayName=i+"Provider";function d(h,f){var g;const m=((g=f==null?void 0:f[e])==null?void 0:g[c])||l,b=p.useContext(m);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,ZT(s,...t)]}function ZT(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Ci(e){const t=t2(e),r=p.forwardRef((n,s)=>{const{children:i,...o}=n,l=p.Children.toArray(i),c=l.find(n2);if(c){const u=c.props.children,d=l.map(h=>h===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:h);return a.jsx(t,{...o,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,d):null})}return a.jsx(t,{...o,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}var e2=Ci("Slot");function t2(e){const t=p.forwardRef((r,n)=>{const{children:s,...i}=r;if(p.isValidElement(s)){const o=i2(s),l=s2(i,s.props);return s.type!==p.Fragment&&(l.ref=n?bd(n,o):o),p.cloneElement(s,l)}return p.Children.count(s)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var d_=Symbol("radix.slottable");function r2(e){const t=({children:r})=>a.jsx(a.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=d_,t}function n2(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===d_}function s2(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function i2(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Jl(e){const t=e+"CollectionProvider",[r,n]=Ft(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:v,children:w}=g,y=B.useRef(null),x=B.useRef(new Map).current;return a.jsx(s,{scope:v,itemMap:x,collectionRef:y,children:w})};o.displayName=t;const l=e+"CollectionSlot",c=Ci(l),u=B.forwardRef((g,v)=>{const{scope:w,children:y}=g,x=i(l,w),_=Ne(v,x.collectionRef);return a.jsx(c,{ref:_,children:y})});u.displayName=l;const d=e+"CollectionItemSlot",h="data-radix-collection-item",f=Ci(d),m=B.forwardRef((g,v)=>{const{scope:w,children:y,...x}=g,_=B.useRef(null),j=Ne(v,_),N=i(d,w);return B.useEffect(()=>(N.itemMap.set(_,{ref:_,...x}),()=>void N.itemMap.delete(_))),a.jsx(f,{[h]:"",ref:j,children:y})});m.displayName=d;function b(g){const v=i(e+"CollectionConsumer",g);return B.useCallback(()=>{const y=v.collectionRef.current;if(!y)return[];const x=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((N,k)=>x.indexOf(N.ref.current)-x.indexOf(k.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},b,n]}var a2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ne=a2.reduce((e,t)=>{const r=Ci(`Primitive.${t}`),n=p.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function tg(e,t){e&&ln.flushSync(()=>e.dispatchEvent(t))}function lt(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function o2(e,t=globalThis==null?void 0:globalThis.document){const r=lt(e);p.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var l2="DismissableLayer",ap="dismissableLayer.update",c2="dismissableLayer.pointerDownOutside",u2="dismissableLayer.focusOutside",Jy,h_=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),no=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=p.useContext(h_),[d,h]=p.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),b=Ne(t,k=>h(k)),g=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=g.indexOf(v),y=d?g.indexOf(d):-1,x=u.layersWithOutsidePointerEventsDisabled.size>0,_=y>=w,j=h2(k=>{const S=k.target,E=[...u.branches].some(A=>A.contains(S));!_||E||(s==null||s(k),o==null||o(k),k.defaultPrevented||l==null||l())},f),N=f2(k=>{const S=k.target;[...u.branches].some(A=>A.contains(S))||(i==null||i(k),o==null||o(k),k.defaultPrevented||l==null||l())},f);return o2(k=>{y===u.layers.size-1&&(n==null||n(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},f),p.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Jy=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Xy(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Jy)}},[d,f,r,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Xy())},[d,u]),p.useEffect(()=>{const k=()=>m({});return document.addEventListener(ap,k),()=>document.removeEventListener(ap,k)},[]),a.jsx(ne.div,{...c,ref:b,style:{pointerEvents:x?_?"auto":"none":void 0,...e.style},onFocusCapture:H(e.onFocusCapture,N.onFocusCapture),onBlurCapture:H(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:H(e.onPointerDownCapture,j.onPointerDownCapture)})});no.displayName=l2;var d2="DismissableLayerBranch",f_=p.forwardRef((e,t)=>{const r=p.useContext(h_),n=p.useRef(null),s=Ne(t,n);return p.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),a.jsx(ne.div,{...e,ref:s})});f_.displayName=d2;function h2(e,t=globalThis==null?void 0:globalThis.document){const r=lt(e),n=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){p_(c2,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function f2(e,t=globalThis==null?void 0:globalThis.document){const r=lt(e),n=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!n.current&&p_(u2,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Xy(){const e=new CustomEvent(ap);document.dispatchEvent(e)}function p_(e,t,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?tg(s,i):s.dispatchEvent(i)}var p2=no,m2=f_,ct=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},g2="Portal",Xl=p.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,i]=p.useState(!1);ct(()=>i(!0),[]);const o=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?c_.createPortal(a.jsx(ne.div,{...n,ref:t}),o):null});Xl.displayName=g2;function v2(e,t){return p.useReducer((r,n)=>t[r][n]??r,e)}var Rt=e=>{const{present:t,children:r}=e,n=y2(t),s=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),i=Ne(n.ref,x2(s));return typeof r=="function"||n.isPresent?p.cloneElement(s,{ref:i}):null};Rt.displayName="Presence";function y2(e){const[t,r]=p.useState(),n=p.useRef(null),s=p.useRef(e),i=p.useRef("none"),o=e?"mounted":"unmounted",[l,c]=v2(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=Rc(n.current);i.current=l==="mounted"?u:"none"},[l]),ct(()=>{const u=n.current,d=s.current;if(d!==e){const f=i.current,m=Rc(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),ct(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=m=>{const g=Rc(n.current).includes(m.animationName);if(m.target===t&&g&&(c("ANIMATION_END"),!s.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},f=m=>{m.target===t&&(i.current=Rc(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Rc(e){return(e==null?void 0:e.animationName)||"none"}function x2(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var w2=um[" useInsertionEffect ".trim().toString()]||ct;function Lr({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,i,o]=b2({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:s;{const d=p.useRef(e!==void 0);p.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=p.useCallback(d=>{var h;if(l){const f=_2(d)?d(e):d;f!==e&&((h=o.current)==null||h.call(o,f))}else i(d)},[l,e,i,o]);return[c,u]}function b2({defaultProp:e,onChange:t}){const[r,n]=p.useState(e),s=p.useRef(r),i=p.useRef(t);return w2(()=>{i.current=t},[t]),p.useEffect(()=>{var o;s.current!==r&&((o=i.current)==null||o.call(i,r),s.current=r)},[r,s]),[r,n,i]}function _2(e){return typeof e=="function"}var m_=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),j2="VisuallyHidden",_d=p.forwardRef((e,t)=>a.jsx(ne.span,{...e,ref:t,style:{...m_,...e.style}}));_d.displayName=j2;var S2=_d,rg="ToastProvider",[ng,N2,k2]=Jl("Toast"),[g_,C6]=Ft("Toast",[k2]),[C2,jd]=g_(rg),v_=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=e,[l,c]=p.useState(null),[u,d]=p.useState(0),h=p.useRef(!1),f=p.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${rg}\`. Expected non-empty \`string\`.`),a.jsx(ng.Provider,{scope:t,children:a.jsx(C2,{scope:t,label:r,duration:n,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>d(m=>m+1),[]),onToastRemove:p.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};v_.displayName=rg;var y_="ToastViewport",E2=["F8"],op="toast.viewportPause",lp="toast.viewportResume",x_=p.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=E2,label:s="Notifications ({hotkey})",...i}=e,o=jd(y_,r),l=N2(r),c=p.useRef(null),u=p.useRef(null),d=p.useRef(null),h=p.useRef(null),f=Ne(t,h,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=o.toastCount>0;p.useEffect(()=>{const v=w=>{var x;n.length!==0&&n.every(_=>w[_]||w.code===_)&&((x=h.current)==null||x.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[n]),p.useEffect(()=>{const v=c.current,w=h.current;if(b&&v&&w){const y=()=>{if(!o.isClosePausedRef.current){const N=new CustomEvent(op);w.dispatchEvent(N),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const N=new CustomEvent(lp);w.dispatchEvent(N),o.isClosePausedRef.current=!1}},_=N=>{!v.contains(N.relatedTarget)&&x()},j=()=>{v.contains(document.activeElement)||x()};return v.addEventListener("focusin",y),v.addEventListener("focusout",_),v.addEventListener("pointermove",y),v.addEventListener("pointerleave",j),window.addEventListener("blur",y),window.addEventListener("focus",x),()=>{v.removeEventListener("focusin",y),v.removeEventListener("focusout",_),v.removeEventListener("pointermove",y),v.removeEventListener("pointerleave",j),window.removeEventListener("blur",y),window.removeEventListener("focus",x)}}},[b,o.isClosePausedRef]);const g=p.useCallback(({tabbingDirection:v})=>{const y=l().map(x=>{const _=x.ref.current,j=[_,...B2(_)];return v==="forwards"?j:j.reverse()});return(v==="forwards"?y.reverse():y).flat()},[l]);return p.useEffect(()=>{const v=h.current;if(v){const w=y=>{var j,N,k;const x=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!x){const S=document.activeElement,E=y.shiftKey;if(y.target===v&&E){(j=u.current)==null||j.focus();return}const M=g({tabbingDirection:E?"backwards":"forwards"}),Q=M.findIndex(I=>I===S);Lh(M.slice(Q+1))?y.preventDefault():E?(N=u.current)==null||N.focus():(k=d.current)==null||k.focus()}};return v.addEventListener("keydown",w),()=>v.removeEventListener("keydown",w)}},[l,g]),a.jsxs(m2,{ref:c,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&a.jsx(cp,{ref:u,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"forwards"});Lh(v)}}),a.jsx(ng.Slot,{scope:r,children:a.jsx(ne.ol,{tabIndex:-1,...i,ref:f})}),b&&a.jsx(cp,{ref:d,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"backwards"});Lh(v)}})]})});x_.displayName=y_;var w_="ToastFocusProxy",cp=p.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=e,i=jd(w_,r);return a.jsx(_d,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&n()}})});cp.displayName=w_;var Zl="Toast",T2="toast.swipeStart",R2="toast.swipeMove",P2="toast.swipeCancel",A2="toast.swipeEnd",b_=p.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:i,...o}=e,[l,c]=Lr({prop:n,defaultProp:s??!0,onChange:i,caller:Zl});return a.jsx(Rt,{present:r||l,children:a.jsx(M2,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:lt(e.onPause),onResume:lt(e.onResume),onSwipeStart:H(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:H(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:H(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:H(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});b_.displayName=Zl;var[I2,O2]=g_(Zl,{onClose(){}}),M2=p.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...b}=e,g=jd(Zl,r),[v,w]=p.useState(null),y=Ne(t,I=>w(I)),x=p.useRef(null),_=p.useRef(null),j=s||g.duration,N=p.useRef(0),k=p.useRef(j),S=p.useRef(0),{onToastAdd:E,onToastRemove:A}=g,$=lt(()=>{var se;(v==null?void 0:v.contains(document.activeElement))&&((se=g.viewport)==null||se.focus()),o()}),M=p.useCallback(I=>{!I||I===1/0||(window.clearTimeout(S.current),N.current=new Date().getTime(),S.current=window.setTimeout($,I))},[$]);p.useEffect(()=>{const I=g.viewport;if(I){const se=()=>{M(k.current),u==null||u()},V=()=>{const Z=new Date().getTime()-N.current;k.current=k.current-Z,window.clearTimeout(S.current),c==null||c()};return I.addEventListener(op,V),I.addEventListener(lp,se),()=>{I.removeEventListener(op,V),I.removeEventListener(lp,se)}}},[g.viewport,j,c,u,M]),p.useEffect(()=>{i&&!g.isClosePausedRef.current&&M(j)},[i,j,g.isClosePausedRef,M]),p.useEffect(()=>(E(),()=>A()),[E,A]);const Q=p.useMemo(()=>v?E_(v):null,[v]);return g.viewport?a.jsxs(a.Fragment,{children:[Q&&a.jsx(D2,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:Q}),a.jsx(I2,{scope:r,onClose:$,children:ln.createPortal(a.jsx(ng.ItemSlot,{scope:r,children:a.jsx(p2,{asChild:!0,onEscapeKeyDown:H(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||$(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(ne.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...b,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:H(e.onKeyDown,I=>{I.key==="Escape"&&(l==null||l(I.nativeEvent),I.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,$()))}),onPointerDown:H(e.onPointerDown,I=>{I.button===0&&(x.current={x:I.clientX,y:I.clientY})}),onPointerMove:H(e.onPointerMove,I=>{if(!x.current)return;const se=I.clientX-x.current.x,V=I.clientY-x.current.y,Z=!!_.current,R=["left","right"].includes(g.swipeDirection),T=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,D=R?T(0,se):0,ee=R?0:T(0,V),J=I.pointerType==="touch"?10:2,de={x:D,y:ee},U={originalEvent:I,delta:de};Z?(_.current=de,Pc(R2,h,U,{discrete:!1})):Zy(de,g.swipeDirection,J)?(_.current=de,Pc(T2,d,U,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(se)>J||Math.abs(V)>J)&&(x.current=null)}),onPointerUp:H(e.onPointerUp,I=>{const se=_.current,V=I.target;if(V.hasPointerCapture(I.pointerId)&&V.releasePointerCapture(I.pointerId),_.current=null,x.current=null,se){const Z=I.currentTarget,R={originalEvent:I,delta:se};Zy(se,g.swipeDirection,g.swipeThreshold)?Pc(A2,m,R,{discrete:!0}):Pc(P2,f,R,{discrete:!0}),Z.addEventListener("click",T=>T.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),D2=e=>{const{__scopeToast:t,children:r,...n}=e,s=jd(Zl,t),[i,o]=p.useState(!1),[l,c]=p.useState(!1);return F2(()=>o(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(Xl,{asChild:!0,children:a.jsx(_d,{...n,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",r]})})})},L2="ToastTitle",__=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return a.jsx(ne.div,{...n,ref:t})});__.displayName=L2;var $2="ToastDescription",j_=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return a.jsx(ne.div,{...n,ref:t})});j_.displayName=$2;var S_="ToastAction",N_=p.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?a.jsx(C_,{altText:r,asChild:!0,children:a.jsx(sg,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${S_}\`. Expected non-empty \`string\`.`),null)});N_.displayName=S_;var k_="ToastClose",sg=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,s=O2(k_,r);return a.jsx(C_,{asChild:!0,children:a.jsx(ne.button,{type:"button",...n,ref:t,onClick:H(e.onClick,s.onClose)})})});sg.displayName=k_;var C_=p.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...s}=e;return a.jsx(ne.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:t})});function E_(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),U2(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...E_(n))}}),t}function Pc(e,t,r,{discrete:n}){const s=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?tg(s,i):s.dispatchEvent(i)}var Zy=(e,t,r=0)=>{const n=Math.abs(e.x),s=Math.abs(e.y),i=n>s;return t==="left"||t==="right"?i&&n>r:!i&&s>r};function F2(e=()=>{}){const t=lt(e);ct(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function U2(e){return e.nodeType===e.ELEMENT_NODE}function B2(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Lh(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var z2=v_,T_=x_,R_=b_,P_=__,A_=j_,I_=N_,O_=sg;function M_(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=M_(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function D_(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=M_(e))&&(n&&(n+=" "),n+=t);return n}const ex=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,tx=D_,Sd=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return tx(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],h=i==null?void 0:i[u];if(d===null)return null;const f=ex(d)||ex(h);return s[u][f]}),l=r&&Object.entries(r).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(b=>{let[g,v]=b;return Array.isArray(v)?v.includes({...i,...l}[g]):{...i,...l}[g]===v})?[...u,h,f]:u},[]);return tx(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),L_=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var W2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,...W2,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:L_("lucide",s),...l},[...o.map(([u,d])=>p.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=(e,t)=>{const r=p.forwardRef(({className:n,...s},i)=>p.createElement(V2,{ref:i,iconNode:t,className:L_(`lucide-${q2(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=ye("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=ye("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=ye("Beaker",[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=ye("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=ye("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=ye("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=ye("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=ye("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=ye("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=ye("FileStack",[["path",{d:"M21 7h-3a2 2 0 0 1-2-2V2",key:"9rb54x"}],["path",{d:"M21 6v6.5c0 .8-.7 1.5-1.5 1.5h-7c-.8 0-1.5-.7-1.5-1.5v-9c0-.8.7-1.5 1.5-1.5H17Z",key:"1059l0"}],["path",{d:"M7 8v8.8c0 .3.2.6.4.8.2.2.5.4.8.4H15",key:"16874u"}],["path",{d:"M3 12v8.8c0 .3.2.6.4.8.2.2.5.4.8.4H11",key:"k2ox98"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=ye("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=ye("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=ye("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=ye("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=ye("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=ye("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=ye("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=ye("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=ye("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=ye("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=ye("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=ye("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=ye("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=ye("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=ye("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=ye("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=ye("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=ye("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=ye("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=ye("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=ye("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=ye("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=ye("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=ye("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),cg="-",dR=e=>{const t=fR(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(cg);return l[0]===""&&l.length!==1&&l.shift(),q_(l,t)||hR(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},q_=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?q_(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(cg);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},ix=/^\[(.+)\]$/,hR=e=>{if(ix.test(e)){const t=ix.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},fR=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return mR(Object.entries(e.classGroups),r).forEach(([i,o])=>{fp(o,n,i,t)}),n},fp=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:ax(t,s);i.classGroupId=r;return}if(typeof s=="function"){if(pR(s)){fp(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,o])=>{fp(o,ax(t,i),r,n)})})},ax=(e,t)=>{let r=e;return t.split(cg).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},pR=e=>e.isThemeGetter,mR=(e,t)=>t?e.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,s]}):e,gR=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){r.has(i)?r.set(i,o):s(i,o)}}},W_="!",vR=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],i=t.length,o=l=>{const c=[];let u=0,d=0,h;for(let v=0;v<l.length;v++){let w=l[v];if(u===0){if(w===s&&(n||l.slice(v,v+i)===t)){c.push(l.slice(d,v)),d=v+i;continue}if(w==="/"){h=v;continue}}w==="["?u++:w==="]"&&u--}const f=c.length===0?l:l.substring(d),m=f.startsWith(W_),b=m?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:b,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:o}):o},yR=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},xR=e=>({cache:gR(e.cacheSize),parseClassName:vR(e),...dR(e)}),wR=/\s+/,bR=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,i=[],o=e.trim().split(wR);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=r(u);let b=!!m,g=n(b?f.substring(0,m):f);if(!g){if(!b){l=u+(l.length>0?" "+l:l);continue}if(g=n(f),!g){l=u+(l.length>0?" "+l:l);continue}b=!1}const v=yR(d).join(":"),w=h?v+W_:v,y=w+g;if(i.includes(y))continue;i.push(y);const x=s(g,b);for(let _=0;_<x.length;++_){const j=x[_];i.push(w+j)}l=u+(l.length>0?" "+l:l)}return l};function _R(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=V_(t))&&(n&&(n+=" "),n+=r);return n}const V_=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=V_(e[n]))&&(r&&(r+=" "),r+=t);return r};function jR(e,...t){let r,n,s,i=o;function o(c){const u=t.reduce((d,h)=>h(d),e());return r=xR(u),n=r.cache.get,s=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=bR(c,r);return s(c,d),d}return function(){return i(_R.apply(null,arguments))}}const Qe=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},H_=/^\[(?:([a-z-]+):)?(.+)\]$/i,SR=/^\d+\/\d+$/,NR=new Set(["px","full","screen"]),kR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,CR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ER=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,TR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,RR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pn=e=>ka(e)||NR.has(e)||SR.test(e),rs=e=>ao(e,"length",$R),ka=e=>!!e&&!Number.isNaN(Number(e)),Fh=e=>ao(e,"number",ka),Po=e=>!!e&&Number.isInteger(Number(e)),PR=e=>e.endsWith("%")&&ka(e.slice(0,-1)),Te=e=>H_.test(e),ns=e=>kR.test(e),AR=new Set(["length","size","percentage"]),IR=e=>ao(e,AR,K_),OR=e=>ao(e,"position",K_),MR=new Set(["image","url"]),DR=e=>ao(e,MR,UR),LR=e=>ao(e,"",FR),Ao=()=>!0,ao=(e,t,r)=>{const n=H_.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},$R=e=>CR.test(e)&&!ER.test(e),K_=()=>!1,FR=e=>TR.test(e),UR=e=>RR.test(e),BR=()=>{const e=Qe("colors"),t=Qe("spacing"),r=Qe("blur"),n=Qe("brightness"),s=Qe("borderColor"),i=Qe("borderRadius"),o=Qe("borderSpacing"),l=Qe("borderWidth"),c=Qe("contrast"),u=Qe("grayscale"),d=Qe("hueRotate"),h=Qe("invert"),f=Qe("gap"),m=Qe("gradientColorStops"),b=Qe("gradientColorStopPositions"),g=Qe("inset"),v=Qe("margin"),w=Qe("opacity"),y=Qe("padding"),x=Qe("saturate"),_=Qe("scale"),j=Qe("sepia"),N=Qe("skew"),k=Qe("space"),S=Qe("translate"),E=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",Te,t],M=()=>[Te,t],Q=()=>["",Pn,rs],I=()=>["auto",ka,Te],se=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],V=()=>["solid","dashed","dotted","double","none"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>["start","end","center","between","around","evenly","stretch"],T=()=>["","0",Te],D=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ee=()=>[ka,Te];return{cacheSize:500,separator:":",theme:{colors:[Ao],spacing:[Pn,rs],blur:["none","",ns,Te],brightness:ee(),borderColor:[e],borderRadius:["none","","full",ns,Te],borderSpacing:M(),borderWidth:Q(),contrast:ee(),grayscale:T(),hueRotate:ee(),invert:T(),gap:M(),gradientColorStops:[e],gradientColorStopPositions:[PR,rs],inset:$(),margin:$(),opacity:ee(),padding:M(),saturate:ee(),scale:ee(),sepia:T(),skew:ee(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",Te]}],container:["container"],columns:[{columns:[ns]}],"break-after":[{"break-after":D()}],"break-before":[{"break-before":D()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...se(),Te]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Po,Te]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Te]}],grow:[{grow:T()}],shrink:[{shrink:T()}],order:[{order:["first","last","none",Po,Te]}],"grid-cols":[{"grid-cols":[Ao]}],"col-start-end":[{col:["auto",{span:["full",Po,Te]},Te]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[Ao]}],"row-start-end":[{row:["auto",{span:[Po,Te]},Te]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Te]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Te]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...R()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...R(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...R(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Te,t]}],"min-w":[{"min-w":[Te,t,"min","max","fit"]}],"max-w":[{"max-w":[Te,t,"none","full","min","max","fit","prose",{screen:[ns]},ns]}],h:[{h:[Te,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Te,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Te,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Te,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ns,rs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Fh]}],"font-family":[{font:[Ao]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Te]}],"line-clamp":[{"line-clamp":["none",ka,Fh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Pn,Te]}],"list-image":[{"list-image":["none",Te]}],"list-style-type":[{list:["none","disc","decimal",Te]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Pn,rs]}],"underline-offset":[{"underline-offset":["auto",Pn,Te]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Te]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Te]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...se(),OR]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",IR]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},DR]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...V(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:V()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...V()]}],"outline-offset":[{"outline-offset":[Pn,Te]}],"outline-w":[{outline:[Pn,rs]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Pn,rs]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ns,LR]}],"shadow-color":[{shadow:[Ao]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...Z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ns,Te]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[x]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Te]}],duration:[{duration:ee()}],ease:[{ease:["linear","in","out","in-out",Te]}],delay:[{delay:ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",Te]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Po,Te]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Te]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Te]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Te]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Pn,rs,Fh]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},zR=jR(BR);function G(...e){return zR(D_(e))}const qR=z2,G_=p.forwardRef(({className:e,...t},r)=>a.jsx(T_,{ref:r,className:G("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));G_.displayName=T_.displayName;const WR=Sd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Y_=p.forwardRef(({className:e,variant:t,...r},n)=>a.jsx(R_,{ref:n,className:G(WR({variant:t}),e),...r}));Y_.displayName=R_.displayName;const VR=p.forwardRef(({className:e,...t},r)=>a.jsx(I_,{ref:r,className:G("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));VR.displayName=I_.displayName;const Q_=p.forwardRef(({className:e,...t},r)=>a.jsx(O_,{ref:r,className:G("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:a.jsx(ir,{className:"h-4 w-4"})}));Q_.displayName=O_.displayName;const J_=p.forwardRef(({className:e,...t},r)=>a.jsx(P_,{ref:r,className:G("text-sm font-semibold",e),...t}));J_.displayName=P_.displayName;const X_=p.forwardRef(({className:e,...t},r)=>a.jsx(A_,{ref:r,className:G("text-sm opacity-90",e),...t}));X_.displayName=A_.displayName;function HR(){const{toasts:e}=$t();return a.jsxs(qR,{children:[e.map(function({id:t,title:r,description:n,action:s,...i}){return a.jsxs(Y_,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[r&&a.jsx(J_,{children:r}),n&&a.jsx(X_,{children:n})]}),s,a.jsx(Q_,{})]},t)}),a.jsx(G_,{})]})}var ox=["light","dark"],KR="(prefers-color-scheme: dark)",GR=p.createContext(void 0),YR={setTheme:e=>{},themes:[]},QR=()=>{var e;return(e=p.useContext(GR))!=null?e:YR};p.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=s?ox.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(b,g=!1,v=!0)=>{let w=o?o[b]:b,y=g?b+"|| ''":`'${w}'`,x="";return s&&v&&!g&&ox.includes(b)&&(x+=`d.style.colorScheme = '${b}';`),r==="class"?g||w?x+=`c.add(${y})`:x+="null":w&&(x+=`d[s](n,${y})`),x},m=e?`!function(){${d}${f(e)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${KR}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var JR=e=>{switch(e){case"success":return eP;case"info":return rP;case"warning":return tP;case"error":return nP;default:return null}},XR=Array(12).fill(0),ZR=({visible:e,className:t})=>B.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},B.createElement("div",{className:"sonner-spinner"},XR.map((r,n)=>B.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),eP=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),tP=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),rP=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),nP=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},B.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),sP=B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},B.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),B.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),iP=()=>{let[e,t]=B.useState(document.hidden);return B.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},pp=1,aP=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:pp++,i=this.toasts.find(l=>l.id===s),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:o,title:r}):l):this.addToast({title:r,...n,dismissible:o,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),s=r!==void 0,i,o=n.then(async c=>{if(i=["resolve",c],B.isValidElement(c))s=!1,this.create({id:r,type:"default",message:c});else if(lP(c)&&!c.ok){s=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:d})}else if(t.success!==void 0){s=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){s=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||pp++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Zt=new aP,oP=(e,t)=>{let r=(t==null?void 0:t.id)||pp++;return Zt.addToast({title:e,...t,id:r}),r},lP=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",cP=oP,uP=()=>Zt.toasts,dP=()=>Zt.getActiveToasts();Object.assign(cP,{success:Zt.success,info:Zt.info,warning:Zt.warning,error:Zt.error,custom:Zt.custom,message:Zt.message,promise:Zt.promise,dismiss:Zt.dismiss,loading:Zt.loading},{getHistory:uP,getToasts:dP});function hP(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}hP(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ac(e){return e.label!==void 0}var fP=3,pP="32px",mP="16px",lx=4e3,gP=356,vP=14,yP=20,xP=200;function Br(...e){return e.filter(Boolean).join(" ")}function wP(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var bP=e=>{var t,r,n,s,i,o,l,c,u,d,h;let{invert:f,toast:m,unstyled:b,interacting:g,setHeights:v,visibleToasts:w,heights:y,index:x,toasts:_,expanded:j,removeToast:N,defaultRichColors:k,closeButton:S,style:E,cancelButtonStyle:A,actionButtonStyle:$,className:M="",descriptionClassName:Q="",duration:I,position:se,gap:V,loadingIcon:Z,expandByDefault:R,classNames:T,icons:D,closeButtonAriaLabel:ee="Close toast",pauseWhenPageIsHidden:J}=e,[de,U]=B.useState(null),[ce,ae]=B.useState(null),[L,ue]=B.useState(!1),[xe,ke]=B.useState(!1),[q,X]=B.useState(!1),[ve,Ie]=B.useState(!1),[we,De]=B.useState(!1),[Be,Ut]=B.useState(0),[_r,Bi]=B.useState(0),En=B.useRef(m.duration||I||lx),lc=B.useRef(null),or=B.useRef(null),sh=x===0,cc=x+1<=w,Bt=m.type,Zn=m.dismissible!==!1,uc=m.className||"",dc=m.descriptionClassName||"",zi=B.useMemo(()=>y.findIndex(je=>je.toastId===m.id)||0,[y,m.id]),ih=B.useMemo(()=>{var je;return(je=m.closeButton)!=null?je:S},[m.closeButton,S]),xo=B.useMemo(()=>m.duration||I||lx,[m.duration,I]),qi=B.useRef(0),Tn=B.useRef(0),wo=B.useRef(0),gt=B.useRef(null),[Wi,bo]=se.split("-"),jr=B.useMemo(()=>y.reduce((je,$e,He)=>He>=zi?je:je+$e.height,0),[y,zi]),Js=iP(),Vi=m.invert||f,_o=Bt==="loading";Tn.current=B.useMemo(()=>zi*V+jr,[zi,jr]),B.useEffect(()=>{En.current=xo},[xo]),B.useEffect(()=>{ue(!0)},[]),B.useEffect(()=>{let je=or.current;if(je){let $e=je.getBoundingClientRect().height;return Bi($e),v(He=>[{toastId:m.id,height:$e,position:m.position},...He]),()=>v(He=>He.filter(lr=>lr.toastId!==m.id))}},[v,m.id]),B.useLayoutEffect(()=>{if(!L)return;let je=or.current,$e=je.style.height;je.style.height="auto";let He=je.getBoundingClientRect().height;je.style.height=$e,Bi(He),v(lr=>lr.find(cr=>cr.toastId===m.id)?lr.map(cr=>cr.toastId===m.id?{...cr,height:He}:cr):[{toastId:m.id,height:He,position:m.position},...lr])},[L,m.title,m.description,v,m.id]);let dn=B.useCallback(()=>{ke(!0),Ut(Tn.current),v(je=>je.filter($e=>$e.toastId!==m.id)),setTimeout(()=>{N(m)},xP)},[m,N,v,Tn]);B.useEffect(()=>{if(m.promise&&Bt==="loading"||m.duration===1/0||m.type==="loading")return;let je;return j||g||J&&Js?(()=>{if(wo.current<qi.current){let $e=new Date().getTime()-qi.current;En.current=En.current-$e}wo.current=new Date().getTime()})():En.current!==1/0&&(qi.current=new Date().getTime(),je=setTimeout(()=>{var $e;($e=m.onAutoClose)==null||$e.call(m,m),dn()},En.current)),()=>clearTimeout(je)},[j,g,m,Bt,J,Js,dn]),B.useEffect(()=>{m.delete&&dn()},[dn,m.delete]);function ah(){var je,$e,He;return D!=null&&D.loading?B.createElement("div",{className:Br(T==null?void 0:T.loader,(je=m==null?void 0:m.classNames)==null?void 0:je.loader,"sonner-loader"),"data-visible":Bt==="loading"},D.loading):Z?B.createElement("div",{className:Br(T==null?void 0:T.loader,($e=m==null?void 0:m.classNames)==null?void 0:$e.loader,"sonner-loader"),"data-visible":Bt==="loading"},Z):B.createElement(ZR,{className:Br(T==null?void 0:T.loader,(He=m==null?void 0:m.classNames)==null?void 0:He.loader),visible:Bt==="loading"})}return B.createElement("li",{tabIndex:0,ref:or,className:Br(M,uc,T==null?void 0:T.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,T==null?void 0:T.default,T==null?void 0:T[Bt],(r=m==null?void 0:m.classNames)==null?void 0:r[Bt]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:k,"data-styled":!(m.jsx||m.unstyled||b),"data-mounted":L,"data-promise":!!m.promise,"data-swiped":we,"data-removed":xe,"data-visible":cc,"data-y-position":Wi,"data-x-position":bo,"data-index":x,"data-front":sh,"data-swiping":q,"data-dismissible":Zn,"data-type":Bt,"data-invert":Vi,"data-swipe-out":ve,"data-swipe-direction":ce,"data-expanded":!!(j||R&&L),style:{"--index":x,"--toasts-before":x,"--z-index":_.length-x,"--offset":`${xe?Be:Tn.current}px`,"--initial-height":R?"auto":`${_r}px`,...E,...m.style},onDragEnd:()=>{X(!1),U(null),gt.current=null},onPointerDown:je=>{_o||!Zn||(lc.current=new Date,Ut(Tn.current),je.target.setPointerCapture(je.pointerId),je.target.tagName!=="BUTTON"&&(X(!0),gt.current={x:je.clientX,y:je.clientY}))},onPointerUp:()=>{var je,$e,He,lr;if(ve||!Zn)return;gt.current=null;let cr=Number(((je=or.current)==null?void 0:je.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),hn=Number((($e=or.current)==null?void 0:$e.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Rn=new Date().getTime()-((He=lc.current)==null?void 0:He.getTime()),ur=de==="x"?cr:hn,Fr=Math.abs(ur)/Rn;if(Math.abs(ur)>=yP||Fr>.11){Ut(Tn.current),(lr=m.onDismiss)==null||lr.call(m,m),ae(de==="x"?cr>0?"right":"left":hn>0?"down":"up"),dn(),Ie(!0),De(!1);return}X(!1),U(null)},onPointerMove:je=>{var $e,He,lr,cr;if(!gt.current||!Zn||(($e=window.getSelection())==null?void 0:$e.toString().length)>0)return;let hn=je.clientY-gt.current.y,Rn=je.clientX-gt.current.x,ur=(He=e.swipeDirections)!=null?He:wP(se);!de&&(Math.abs(Rn)>1||Math.abs(hn)>1)&&U(Math.abs(Rn)>Math.abs(hn)?"x":"y");let Fr={x:0,y:0};de==="y"?(ur.includes("top")||ur.includes("bottom"))&&(ur.includes("top")&&hn<0||ur.includes("bottom")&&hn>0)&&(Fr.y=hn):de==="x"&&(ur.includes("left")||ur.includes("right"))&&(ur.includes("left")&&Rn<0||ur.includes("right")&&Rn>0)&&(Fr.x=Rn),(Math.abs(Fr.x)>0||Math.abs(Fr.y)>0)&&De(!0),(lr=or.current)==null||lr.style.setProperty("--swipe-amount-x",`${Fr.x}px`),(cr=or.current)==null||cr.style.setProperty("--swipe-amount-y",`${Fr.y}px`)}},ih&&!m.jsx?B.createElement("button",{"aria-label":ee,"data-disabled":_o,"data-close-button":!0,onClick:_o||!Zn?()=>{}:()=>{var je;dn(),(je=m.onDismiss)==null||je.call(m,m)},className:Br(T==null?void 0:T.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=D==null?void 0:D.close)!=null?i:sP):null,m.jsx||p.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:B.createElement(B.Fragment,null,Bt||m.icon||m.promise?B.createElement("div",{"data-icon":"",className:Br(T==null?void 0:T.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||ah():null,m.type!=="loading"?m.icon||(D==null?void 0:D[Bt])||JR(Bt):null):null,B.createElement("div",{"data-content":"",className:Br(T==null?void 0:T.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},B.createElement("div",{"data-title":"",className:Br(T==null?void 0:T.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?B.createElement("div",{"data-description":"",className:Br(Q,dc,T==null?void 0:T.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),p.isValidElement(m.cancel)?m.cancel:m.cancel&&Ac(m.cancel)?B.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||A,onClick:je=>{var $e,He;Ac(m.cancel)&&Zn&&((He=($e=m.cancel).onClick)==null||He.call($e,je),dn())},className:Br(T==null?void 0:T.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,p.isValidElement(m.action)?m.action:m.action&&Ac(m.action)?B.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||$,onClick:je=>{var $e,He;Ac(m.action)&&((He=($e=m.action).onClick)==null||He.call($e,je),!je.defaultPrevented&&dn())},className:Br(T==null?void 0:T.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function cx(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function _P(e,t){let r={};return[e,t].forEach((n,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",l=i?mP:pP;function c(u){["top","right","bottom","left"].forEach(d=>{r[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=l:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(l)}),r}var jP=p.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:b=fP,toastOptions:g,dir:v=cx(),gap:w=vP,loadingIcon:y,icons:x,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:j}=e,[N,k]=B.useState([]),S=B.useMemo(()=>Array.from(new Set([n].concat(N.filter(J=>J.position).map(J=>J.position)))),[N,n]),[E,A]=B.useState([]),[$,M]=B.useState(!1),[Q,I]=B.useState(!1),[se,V]=B.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Z=B.useRef(null),R=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=B.useRef(null),D=B.useRef(!1),ee=B.useCallback(J=>{k(de=>{var U;return(U=de.find(ce=>ce.id===J.id))!=null&&U.delete||Zt.dismiss(J.id),de.filter(({id:ce})=>ce!==J.id)})},[]);return B.useEffect(()=>Zt.subscribe(J=>{if(J.dismiss){k(de=>de.map(U=>U.id===J.id?{...U,delete:!0}:U));return}setTimeout(()=>{c_.flushSync(()=>{k(de=>{let U=de.findIndex(ce=>ce.id===J.id);return U!==-1?[...de.slice(0,U),{...de[U],...J},...de.slice(U+1)]:[J,...de]})})})}),[]),B.useEffect(()=>{if(d!=="system"){V(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?V("dark"):V("light")),typeof window>"u")return;let J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:de})=>{V(de?"dark":"light")})}catch{J.addListener(({matches:U})=>{try{V(U?"dark":"light")}catch(ce){console.error(ce)}})}},[d]),B.useEffect(()=>{N.length<=1&&M(!1)},[N]),B.useEffect(()=>{let J=de=>{var U,ce;s.every(ae=>de[ae]||de.code===ae)&&(M(!0),(U=Z.current)==null||U.focus()),de.code==="Escape"&&(document.activeElement===Z.current||(ce=Z.current)!=null&&ce.contains(document.activeElement))&&M(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[s]),B.useEffect(()=>{if(Z.current)return()=>{T.current&&(T.current.focus({preventScroll:!0}),T.current=null,D.current=!1)}},[Z.current]),B.createElement("section",{ref:t,"aria-label":`${_} ${R}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},S.map((J,de)=>{var U;let[ce,ae]=J.split("-");return N.length?B.createElement("ol",{key:J,dir:v==="auto"?cx():v,tabIndex:-1,ref:Z,className:l,"data-sonner-toaster":!0,"data-theme":se,"data-y-position":ce,"data-lifted":$&&N.length>1&&!i,"data-x-position":ae,style:{"--front-toast-height":`${((U=E[0])==null?void 0:U.height)||0}px`,"--width":`${gP}px`,"--gap":`${w}px`,...m,..._P(c,u)},onBlur:L=>{D.current&&!L.currentTarget.contains(L.relatedTarget)&&(D.current=!1,T.current&&(T.current.focus({preventScroll:!0}),T.current=null))},onFocus:L=>{L.target instanceof HTMLElement&&L.target.dataset.dismissible==="false"||D.current||(D.current=!0,T.current=L.relatedTarget)},onMouseEnter:()=>M(!0),onMouseMove:()=>M(!0),onMouseLeave:()=>{Q||M(!1)},onDragEnd:()=>M(!1),onPointerDown:L=>{L.target instanceof HTMLElement&&L.target.dataset.dismissible==="false"||I(!0)},onPointerUp:()=>I(!1)},N.filter(L=>!L.position&&de===0||L.position===J).map((L,ue)=>{var xe,ke;return B.createElement(bP,{key:L.id,icons:x,index:ue,toast:L,defaultRichColors:h,duration:(xe=g==null?void 0:g.duration)!=null?xe:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:b,closeButton:(ke=g==null?void 0:g.closeButton)!=null?ke:o,interacting:Q,position:J,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:ee,toasts:N.filter(q=>q.position==L.position),heights:E.filter(q=>q.position==L.position),setHeights:A,expandByDefault:i,gap:w,loadingIcon:y,expanded:$,pauseWhenPageIsHidden:j,swipeDirections:e.swipeDirections})})):null}))});const SP=({...e})=>{const{theme:t="system"}=QR();return a.jsx(jP,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var NP=um[" useId ".trim().toString()]||(()=>{}),kP=0;function Ir(e){const[t,r]=p.useState(NP());return ct(()=>{e||r(n=>n??String(kP++))},[e]),e||(t?`radix-${t}`:"")}const CP=["top","right","bottom","left"],Bs=Math.min,fr=Math.max,Lu=Math.round,Ic=Math.floor,jn=e=>({x:e,y:e}),EP={left:"right",right:"left",bottom:"top",top:"bottom"},TP={start:"end",end:"start"};function mp(e,t,r){return fr(e,Bs(t,r))}function Gn(e,t){return typeof e=="function"?e(t):e}function Yn(e){return e.split("-")[0]}function oo(e){return e.split("-")[1]}function ug(e){return e==="x"?"y":"x"}function dg(e){return e==="y"?"height":"width"}const RP=new Set(["top","bottom"]);function wn(e){return RP.has(Yn(e))?"y":"x"}function hg(e){return ug(wn(e))}function PP(e,t,r){r===void 0&&(r=!1);const n=oo(e),s=hg(e),i=dg(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=$u(o)),[o,$u(o)]}function AP(e){const t=$u(e);return[gp(e),t,gp(t)]}function gp(e){return e.replace(/start|end/g,t=>TP[t])}const ux=["left","right"],dx=["right","left"],IP=["top","bottom"],OP=["bottom","top"];function MP(e,t,r){switch(e){case"top":case"bottom":return r?t?dx:ux:t?ux:dx;case"left":case"right":return t?IP:OP;default:return[]}}function DP(e,t,r,n){const s=oo(e);let i=MP(Yn(e),r==="start",n);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(gp)))),i}function $u(e){return e.replace(/left|right|bottom|top/g,t=>EP[t])}function LP(e){return{top:0,right:0,bottom:0,left:0,...e}}function Z_(e){return typeof e!="number"?LP(e):{top:e,right:e,bottom:e,left:e}}function Fu(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function hx(e,t,r){let{reference:n,floating:s}=e;const i=wn(t),o=hg(t),l=dg(o),c=Yn(t),u=i==="y",d=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,f=n[l]/2-s[l]/2;let m;switch(c){case"top":m={x:d,y:n.y-s.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:h};break;case"left":m={x:n.x-s.width,y:h};break;default:m={x:n.x,y:n.y}}switch(oo(t)){case"start":m[o]-=f*(r&&u?-1:1);break;case"end":m[o]+=f*(r&&u?-1:1);break}return m}const $P=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:h}=hx(u,n,c),f=n,m={},b=0;for(let g=0;g<l.length;g++){const{name:v,fn:w}=l[g],{x:y,y:x,data:_,reset:j}=await w({x:d,y:h,initialPlacement:n,placement:f,strategy:s,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});d=y??d,h=x??h,m={...m,[v]:{...m[v],..._}},j&&b<=50&&(b++,typeof j=="object"&&(j.placement&&(f=j.placement),j.rects&&(u=j.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):j.rects),{x:d,y:h}=hx(u,f,c)),g=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function jl(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=Gn(t,e),b=Z_(m),v=l[f?h==="floating"?"reference":"floating":h],w=Fu(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(v)))==null||r?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),y=h==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),_=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},j=Fu(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:x,strategy:c}):y);return{top:(w.top-j.top+b.top)/_.y,bottom:(j.bottom-w.bottom+b.bottom)/_.y,left:(w.left-j.left+b.left)/_.x,right:(j.right-w.right+b.right)/_.x}}const FP=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=Gn(e,t)||{};if(u==null)return{};const h=Z_(d),f={x:r,y:n},m=hg(s),b=dg(m),g=await o.getDimensions(u),v=m==="y",w=v?"top":"left",y=v?"bottom":"right",x=v?"clientHeight":"clientWidth",_=i.reference[b]+i.reference[m]-f[m]-i.floating[b],j=f[m]-i.reference[m],N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let k=N?N[x]:0;(!k||!await(o.isElement==null?void 0:o.isElement(N)))&&(k=l.floating[x]||i.floating[b]);const S=_/2-j/2,E=k/2-g[b]/2-1,A=Bs(h[w],E),$=Bs(h[y],E),M=A,Q=k-g[b]-$,I=k/2-g[b]/2+S,se=mp(M,I,Q),V=!c.arrow&&oo(s)!=null&&I!==se&&i.reference[b]/2-(I<M?A:$)-g[b]/2<0,Z=V?I<M?I-M:I-Q:0;return{[m]:f[m]+Z,data:{[m]:se,centerOffset:I-se-Z,...V&&{alignmentOffset:Z}},reset:V}}}),UP=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:g=!0,...v}=Gn(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const w=Yn(s),y=wn(l),x=Yn(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=f||(x||!g?[$u(l)]:AP(l)),N=b!=="none";!f&&N&&j.push(...DP(l,g,b,_));const k=[l,...j],S=await jl(t,v),E=[];let A=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&E.push(S[w]),h){const I=PP(s,o,_);E.push(S[I[0]],S[I[1]])}if(A=[...A,{placement:s,overflows:E}],!E.every(I=>I<=0)){var $,M;const I=((($=i.flip)==null?void 0:$.index)||0)+1,se=k[I];if(se&&(!(h==="alignment"?y!==wn(se):!1)||A.every(R=>R.overflows[0]>0&&wn(R.placement)===y)))return{data:{index:I,overflows:A},reset:{placement:se}};let V=(M=A.filter(Z=>Z.overflows[0]<=0).sort((Z,R)=>Z.overflows[1]-R.overflows[1])[0])==null?void 0:M.placement;if(!V)switch(m){case"bestFit":{var Q;const Z=(Q=A.filter(R=>{if(N){const T=wn(R.placement);return T===y||T==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(T=>T>0).reduce((T,D)=>T+D,0)]).sort((R,T)=>R[1]-T[1])[0])==null?void 0:Q[0];Z&&(V=Z);break}case"initialPlacement":V=l;break}if(s!==V)return{reset:{placement:V}}}return{}}}};function fx(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function px(e){return CP.some(t=>e[t]>=0)}const BP=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=Gn(e,t);switch(n){case"referenceHidden":{const i=await jl(t,{...s,elementContext:"reference"}),o=fx(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:px(o)}}}case"escaped":{const i=await jl(t,{...s,altBoundary:!0}),o=fx(i,r.floating);return{data:{escapedOffsets:o,escaped:px(o)}}}default:return{}}}}},e1=new Set(["left","top"]);async function zP(e,t){const{placement:r,platform:n,elements:s}=e,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=Yn(r),l=oo(r),c=wn(r)==="y",u=e1.has(o)?-1:1,d=i&&c?-1:1,h=Gn(t,e);let{mainAxis:f,crossAxis:m,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof b=="number"&&(m=l==="end"?b*-1:b),c?{x:m*d,y:f*u}:{x:f*u,y:m*d}}const qP=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:i,placement:o,middlewareData:l}=t,c=await zP(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},WP=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x:w,y}=v;return{x:w,y}}},...c}=Gn(e,t),u={x:r,y:n},d=await jl(t,c),h=wn(Yn(s)),f=ug(h);let m=u[f],b=u[h];if(i){const v=f==="y"?"top":"left",w=f==="y"?"bottom":"right",y=m+d[v],x=m-d[w];m=mp(y,m,x)}if(o){const v=h==="y"?"top":"left",w=h==="y"?"bottom":"right",y=b+d[v],x=b-d[w];b=mp(y,b,x)}const g=l.fn({...t,[f]:m,[h]:b});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[f]:i,[h]:o}}}}}},VP=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Gn(e,t),d={x:r,y:n},h=wn(s),f=ug(h);let m=d[f],b=d[h];const g=Gn(l,t),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const x=f==="y"?"height":"width",_=i.reference[f]-i.floating[x]+v.mainAxis,j=i.reference[f]+i.reference[x]-v.mainAxis;m<_?m=_:m>j&&(m=j)}if(u){var w,y;const x=f==="y"?"width":"height",_=e1.has(Yn(s)),j=i.reference[h]-i.floating[x]+(_&&((w=o.offset)==null?void 0:w[h])||0)+(_?0:v.crossAxis),N=i.reference[h]+i.reference[x]+(_?0:((y=o.offset)==null?void 0:y[h])||0)-(_?v.crossAxis:0);b<j?b=j:b>N&&(b=N)}return{[f]:m,[h]:b}}}},HP=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=Gn(e,t),d=await jl(t,u),h=Yn(s),f=oo(s),m=wn(s)==="y",{width:b,height:g}=i.floating;let v,w;h==="top"||h==="bottom"?(v=h,w=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(w=h,v=f==="end"?"top":"bottom");const y=g-d.top-d.bottom,x=b-d.left-d.right,_=Bs(g-d[v],y),j=Bs(b-d[w],x),N=!t.middlewareData.shift;let k=_,S=j;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(S=x),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(k=y),N&&!f){const A=fr(d.left,0),$=fr(d.right,0),M=fr(d.top,0),Q=fr(d.bottom,0);m?S=b-2*(A!==0||$!==0?A+$:fr(d.left,d.right)):k=g-2*(M!==0||Q!==0?M+Q:fr(d.top,d.bottom))}await c({...t,availableWidth:S,availableHeight:k});const E=await o.getDimensions(l.floating);return b!==E.width||g!==E.height?{reset:{rects:!0}}:{}}}};function Ed(){return typeof window<"u"}function lo(e){return t1(e)?(e.nodeName||"").toLowerCase():"#document"}function yr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Nn(e){var t;return(t=(t1(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function t1(e){return Ed()?e instanceof Node||e instanceof yr(e).Node:!1}function tn(e){return Ed()?e instanceof Element||e instanceof yr(e).Element:!1}function Sn(e){return Ed()?e instanceof HTMLElement||e instanceof yr(e).HTMLElement:!1}function mx(e){return!Ed()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof yr(e).ShadowRoot}const KP=new Set(["inline","contents"]);function rc(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=rn(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!KP.has(s)}const GP=new Set(["table","td","th"]);function YP(e){return GP.has(lo(e))}const QP=[":popover-open",":modal"];function Td(e){return QP.some(t=>{try{return e.matches(t)}catch{return!1}})}const JP=["transform","translate","scale","rotate","perspective"],XP=["transform","translate","scale","rotate","perspective","filter"],ZP=["paint","layout","strict","content"];function fg(e){const t=pg(),r=tn(e)?rn(e):e;return JP.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||XP.some(n=>(r.willChange||"").includes(n))||ZP.some(n=>(r.contain||"").includes(n))}function eA(e){let t=zs(e);for(;Sn(t)&&!Qa(t);){if(fg(t))return t;if(Td(t))return null;t=zs(t)}return null}function pg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const tA=new Set(["html","body","#document"]);function Qa(e){return tA.has(lo(e))}function rn(e){return yr(e).getComputedStyle(e)}function Rd(e){return tn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function zs(e){if(lo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||mx(e)&&e.host||Nn(e);return mx(t)?t.host:t}function r1(e){const t=zs(e);return Qa(t)?e.ownerDocument?e.ownerDocument.body:e.body:Sn(t)&&rc(t)?t:r1(t)}function Sl(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=r1(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),o=yr(s);if(i){const l=vp(o);return t.concat(o,o.visualViewport||[],rc(s)?s:[],l&&r?Sl(l):[])}return t.concat(s,Sl(s,[],r))}function vp(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function n1(e){const t=rn(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=Sn(e),i=s?e.offsetWidth:r,o=s?e.offsetHeight:n,l=Lu(r)!==i||Lu(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function mg(e){return tn(e)?e:e.contextElement}function Ca(e){const t=mg(e);if(!Sn(t))return jn(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:i}=n1(t);let o=(i?Lu(r.width):r.width)/n,l=(i?Lu(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const rA=jn(0);function s1(e){const t=yr(e);return!pg()||!t.visualViewport?rA:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function nA(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==yr(e)?!1:t}function Ei(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),i=mg(e);let o=jn(1);t&&(n?tn(n)&&(o=Ca(n)):o=Ca(e));const l=nA(i,r,n)?s1(i):jn(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=yr(i),m=n&&tn(n)?yr(n):n;let b=f,g=vp(b);for(;g&&n&&m!==b;){const v=Ca(g),w=g.getBoundingClientRect(),y=rn(g),x=w.left+(g.clientLeft+parseFloat(y.paddingLeft))*v.x,_=w.top+(g.clientTop+parseFloat(y.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,h*=v.y,c+=x,u+=_,b=yr(g),g=vp(b)}}return Fu({width:d,height:h,x:c,y:u})}function gg(e,t){const r=Rd(e).scrollLeft;return t?t.left+r:Ei(Nn(e)).left+r}function i1(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:gg(e,n)),i=n.top+t.scrollTop;return{x:s,y:i}}function sA(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const i=s==="fixed",o=Nn(n),l=t?Td(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=jn(1);const d=jn(0),h=Sn(n);if((h||!h&&!i)&&((lo(n)!=="body"||rc(o))&&(c=Rd(n)),Sn(n))){const m=Ei(n);u=Ca(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const f=o&&!h&&!i?i1(o,c,!0):jn(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:r.y*u.y-c.scrollTop*u.y+d.y+f.y}}function iA(e){return Array.from(e.getClientRects())}function aA(e){const t=Nn(e),r=Rd(e),n=e.ownerDocument.body,s=fr(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=fr(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+gg(e);const l=-r.scrollTop;return rn(n).direction==="rtl"&&(o+=fr(t.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:l}}function oA(e,t){const r=yr(e),n=Nn(e),s=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=pg();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}const lA=new Set(["absolute","fixed"]);function cA(e,t){const r=Ei(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,i=Sn(e)?Ca(e):jn(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,u=n*i.y;return{width:o,height:l,x:c,y:u}}function gx(e,t,r){let n;if(t==="viewport")n=oA(e,r);else if(t==="document")n=aA(Nn(e));else if(tn(t))n=cA(t,r);else{const s=s1(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Fu(n)}function a1(e,t){const r=zs(e);return r===t||!tn(r)||Qa(r)?!1:rn(r).position==="fixed"||a1(r,t)}function uA(e,t){const r=t.get(e);if(r)return r;let n=Sl(e,[],!1).filter(l=>tn(l)&&lo(l)!=="body"),s=null;const i=rn(e).position==="fixed";let o=i?zs(e):e;for(;tn(o)&&!Qa(o);){const l=rn(o),c=fg(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&lA.has(s.position)||rc(o)&&!c&&a1(e,o))?n=n.filter(d=>d!==o):s=l,o=zs(o)}return t.set(e,n),n}function dA(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const o=[...r==="clippingAncestors"?Td(t)?[]:uA(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const h=gx(t,d,s);return u.top=fr(h.top,u.top),u.right=Bs(h.right,u.right),u.bottom=Bs(h.bottom,u.bottom),u.left=fr(h.left,u.left),u},gx(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function hA(e){const{width:t,height:r}=n1(e);return{width:t,height:r}}function fA(e,t,r){const n=Sn(t),s=Nn(t),i=r==="fixed",o=Ei(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=jn(0);function u(){c.x=gg(s)}if(n||!n&&!i)if((lo(t)!=="body"||rc(s))&&(l=Rd(t)),n){const m=Ei(t,!0,i,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else s&&u();i&&!n&&s&&u();const d=s&&!n&&!i?i1(s,l):jn(0),h=o.left+l.scrollLeft-c.x-d.x,f=o.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function Uh(e){return rn(e).position==="static"}function vx(e,t){if(!Sn(e)||rn(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Nn(e)===r&&(r=r.ownerDocument.body),r}function o1(e,t){const r=yr(e);if(Td(e))return r;if(!Sn(e)){let s=zs(e);for(;s&&!Qa(s);){if(tn(s)&&!Uh(s))return s;s=zs(s)}return r}let n=vx(e,t);for(;n&&YP(n)&&Uh(n);)n=vx(n,t);return n&&Qa(n)&&Uh(n)&&!fg(n)?r:n||eA(e)||r}const pA=async function(e){const t=this.getOffsetParent||o1,r=this.getDimensions,n=await r(e.floating);return{reference:fA(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function mA(e){return rn(e).direction==="rtl"}const gA={convertOffsetParentRelativeRectToViewportRelativeRect:sA,getDocumentElement:Nn,getClippingRect:dA,getOffsetParent:o1,getElementRects:pA,getClientRects:iA,getDimensions:hA,getScale:Ca,isElement:tn,isRTL:mA};function l1(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function vA(e,t){let r=null,n;const s=Nn(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=u;if(l||t(),!f||!m)return;const b=Ic(h),g=Ic(s.clientWidth-(d+f)),v=Ic(s.clientHeight-(h+m)),w=Ic(d),x={rootMargin:-b+"px "+-g+"px "+-v+"px "+-w+"px",threshold:fr(0,Bs(1,c))||1};let _=!0;function j(N){const k=N[0].intersectionRatio;if(k!==c){if(!_)return o();k?o(!1,k):n=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!l1(u,e.getBoundingClientRect())&&o(),_=!1}try{r=new IntersectionObserver(j,{...x,root:s.ownerDocument})}catch{r=new IntersectionObserver(j,x)}r.observe(e)}return o(!0),i}function yA(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=mg(e),d=s||i?[...u?Sl(u):[],...Sl(t)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",r,{passive:!0}),i&&w.addEventListener("resize",r)});const h=u&&l?vA(u,r):null;let f=-1,m=null;o&&(m=new ResizeObserver(w=>{let[y]=w;y&&y.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=m)==null||x.observe(t)})),r()}),u&&!c&&m.observe(u),m.observe(t));let b,g=c?Ei(e):null;c&&v();function v(){const w=Ei(e);g&&!l1(g,w)&&r(),g=w,b=requestAnimationFrame(v)}return r(),()=>{var w;d.forEach(y=>{s&&y.removeEventListener("scroll",r),i&&y.removeEventListener("resize",r)}),h==null||h(),(w=m)==null||w.disconnect(),m=null,c&&cancelAnimationFrame(b)}}const xA=qP,wA=WP,bA=UP,_A=HP,jA=BP,yx=FP,SA=VP,NA=(e,t,r)=>{const n=new Map,s={platform:gA,...r},i={...s.platform,_c:n};return $P(e,t,{...s,platform:i})};var kA=typeof document<"u",CA=function(){},au=kA?p.useLayoutEffect:CA;function Uu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Uu(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&e.$$typeof)&&!Uu(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function c1(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function xx(e,t){const r=c1(e);return Math.round(t*r)/r}function Bh(e){const t=p.useRef(e);return au(()=>{t.current=e}),t}function EA(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=p.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,m]=p.useState(n);Uu(f,n)||m(n);const[b,g]=p.useState(null),[v,w]=p.useState(null),y=p.useCallback(R=>{R!==N.current&&(N.current=R,g(R))},[]),x=p.useCallback(R=>{R!==k.current&&(k.current=R,w(R))},[]),_=i||b,j=o||v,N=p.useRef(null),k=p.useRef(null),S=p.useRef(d),E=c!=null,A=Bh(c),$=Bh(s),M=Bh(u),Q=p.useCallback(()=>{if(!N.current||!k.current)return;const R={placement:t,strategy:r,middleware:f};$.current&&(R.platform=$.current),NA(N.current,k.current,R).then(T=>{const D={...T,isPositioned:M.current!==!1};I.current&&!Uu(S.current,D)&&(S.current=D,ln.flushSync(()=>{h(D)}))})},[f,t,r,$,M]);au(()=>{u===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,h(R=>({...R,isPositioned:!1})))},[u]);const I=p.useRef(!1);au(()=>(I.current=!0,()=>{I.current=!1}),[]),au(()=>{if(_&&(N.current=_),j&&(k.current=j),_&&j){if(A.current)return A.current(_,j,Q);Q()}},[_,j,Q,A,E]);const se=p.useMemo(()=>({reference:N,floating:k,setReference:y,setFloating:x}),[y,x]),V=p.useMemo(()=>({reference:_,floating:j}),[_,j]),Z=p.useMemo(()=>{const R={position:r,left:0,top:0};if(!V.floating)return R;const T=xx(V.floating,d.x),D=xx(V.floating,d.y);return l?{...R,transform:"translate("+T+"px, "+D+"px)",...c1(V.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:T,top:D}},[r,l,V.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:Q,refs:se,elements:V,floatingStyles:Z}),[d,Q,se,V,Z])}const TA=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?yx({element:n.current,padding:s}).fn(r):{}:n?yx({element:n,padding:s}).fn(r):{}}}},RA=(e,t)=>({...xA(e),options:[e,t]}),PA=(e,t)=>({...wA(e),options:[e,t]}),AA=(e,t)=>({...SA(e),options:[e,t]}),IA=(e,t)=>({...bA(e),options:[e,t]}),OA=(e,t)=>({..._A(e),options:[e,t]}),MA=(e,t)=>({...jA(e),options:[e,t]}),DA=(e,t)=>({...TA(e),options:[e,t]});var LA="Arrow",u1=p.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...i}=e;return a.jsx(ne.svg,{...i,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});u1.displayName=LA;var $A=u1;function vg(e){const[t,r]=p.useState(void 0);return ct(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var yg="Popper",[d1,co]=Ft(yg),[FA,h1]=d1(yg),f1=e=>{const{__scopePopper:t,children:r}=e,[n,s]=p.useState(null);return a.jsx(FA,{scope:t,anchor:n,onAnchorChange:s,children:r})};f1.displayName=yg;var p1="PopperAnchor",m1=p.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,i=h1(p1,r),o=p.useRef(null),l=Ne(t,o);return p.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:a.jsx(ne.div,{...s,ref:l})});m1.displayName=p1;var xg="PopperContent",[UA,BA]=d1(xg),g1=p.forwardRef((e,t)=>{var L,ue,xe,ke,q,X;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:b,...g}=e,v=h1(xg,r),[w,y]=p.useState(null),x=Ne(t,ve=>y(ve)),[_,j]=p.useState(null),N=vg(_),k=(N==null?void 0:N.width)??0,S=(N==null?void 0:N.height)??0,E=n+(i!=="center"?"-"+i:""),A=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},$=Array.isArray(u)?u:[u],M=$.length>0,Q={padding:A,boundary:$.filter(qA),altBoundary:M},{refs:I,floatingStyles:se,placement:V,isPositioned:Z,middlewareData:R}=EA({strategy:"fixed",placement:E,whileElementsMounted:(...ve)=>yA(...ve,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[RA({mainAxis:s+S,alignmentAxis:o}),c&&PA({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?AA():void 0,...Q}),c&&IA({...Q}),OA({...Q,apply:({elements:ve,rects:Ie,availableWidth:we,availableHeight:De})=>{const{width:Be,height:Ut}=Ie.reference,_r=ve.floating.style;_r.setProperty("--radix-popper-available-width",`${we}px`),_r.setProperty("--radix-popper-available-height",`${De}px`),_r.setProperty("--radix-popper-anchor-width",`${Be}px`),_r.setProperty("--radix-popper-anchor-height",`${Ut}px`)}}),_&&DA({element:_,padding:l}),WA({arrowWidth:k,arrowHeight:S}),f&&MA({strategy:"referenceHidden",...Q})]}),[T,D]=x1(V),ee=lt(b);ct(()=>{Z&&(ee==null||ee())},[Z,ee]);const J=(L=R.arrow)==null?void 0:L.x,de=(ue=R.arrow)==null?void 0:ue.y,U=((xe=R.arrow)==null?void 0:xe.centerOffset)!==0,[ce,ae]=p.useState();return ct(()=>{w&&ae(window.getComputedStyle(w).zIndex)},[w]),a.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:Z?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[(ke=R.transformOrigin)==null?void 0:ke.x,(q=R.transformOrigin)==null?void 0:q.y].join(" "),...((X=R.hide)==null?void 0:X.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(UA,{scope:r,placedSide:T,onArrowChange:j,arrowX:J,arrowY:de,shouldHideArrow:U,children:a.jsx(ne.div,{"data-side":T,"data-align":D,...g,ref:x,style:{...g.style,animation:Z?void 0:"none"}})})})});g1.displayName=xg;var v1="PopperArrow",zA={top:"bottom",right:"left",bottom:"top",left:"right"},y1=p.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,i=BA(v1,n),o=zA[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx($A,{...s,ref:r,style:{...s.style,display:"block"}})})});y1.displayName=v1;function qA(e){return e!==null}var WA=e=>({name:"transformOrigin",options:e,fn(t){var v,w,y;const{placement:r,rects:n,middlewareData:s}=t,o=((v=s.arrow)==null?void 0:v.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=x1(r),h={start:"0%",center:"50%",end:"100%"}[d],f=(((w=s.arrow)==null?void 0:w.x)??0)+l/2,m=(((y=s.arrow)==null?void 0:y.y)??0)+c/2;let b="",g="";return u==="bottom"?(b=o?h:`${f}px`,g=`${-c}px`):u==="top"?(b=o?h:`${f}px`,g=`${n.floating.height+c}px`):u==="right"?(b=`${-c}px`,g=o?h:`${m}px`):u==="left"&&(b=`${n.floating.width+c}px`,g=o?h:`${m}px`),{data:{x:b,y:g}}}});function x1(e){const[t,r="center"]=e.split("-");return[t,r]}var w1=f1,wg=m1,bg=g1,_g=y1,[Pd,E6]=Ft("Tooltip",[co]),jg=co(),b1="TooltipProvider",VA=700,wx="tooltip.open",[HA,_1]=Pd(b1),j1=e=>{const{__scopeTooltip:t,delayDuration:r=VA,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=e,o=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(HA,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};j1.displayName=b1;var S1="Tooltip",[T6,Ad]=Pd(S1),yp="TooltipTrigger",KA=p.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=Ad(yp,r),i=_1(yp,r),o=jg(r),l=p.useRef(null),c=Ne(t,l,s.onTriggerChange),u=p.useRef(!1),d=p.useRef(!1),h=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),a.jsx(wg,{asChild:!0,...o,children:a.jsx(ne.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:H(e.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:H(e.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:H(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:H(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:H(e.onBlur,s.onClose),onClick:H(e.onClick,s.onClose)})})});KA.displayName=yp;var GA="TooltipPortal",[R6,YA]=Pd(GA,{forceMount:void 0}),Ja="TooltipContent",N1=p.forwardRef((e,t)=>{const r=YA(Ja,e.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...i}=e,o=Ad(Ja,e.__scopeTooltip);return a.jsx(Rt,{present:n||o.open,children:o.disableHoverableContent?a.jsx(k1,{side:s,...i,ref:t}):a.jsx(QA,{side:s,...i,ref:t})})}),QA=p.forwardRef((e,t)=>{const r=Ad(Ja,e.__scopeTooltip),n=_1(Ja,e.__scopeTooltip),s=p.useRef(null),i=Ne(t,s),[o,l]=p.useState(null),{trigger:c,onClose:u}=r,d=s.current,{onPointerInTransitChange:h}=n,f=p.useCallback(()=>{l(null),h(!1)},[h]),m=p.useCallback((b,g)=>{const v=b.currentTarget,w={x:b.clientX,y:b.clientY},y=tI(w,v.getBoundingClientRect()),x=rI(w,y),_=nI(g.getBoundingClientRect()),j=iI([...x,..._]);l(j),h(!0)},[h]);return p.useEffect(()=>()=>f(),[f]),p.useEffect(()=>{if(c&&d){const b=v=>m(v,d),g=v=>m(v,c);return c.addEventListener("pointerleave",b),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",b),d.removeEventListener("pointerleave",g)}}},[c,d,m,f]),p.useEffect(()=>{if(o){const b=g=>{const v=g.target,w={x:g.clientX,y:g.clientY},y=(c==null?void 0:c.contains(v))||(d==null?void 0:d.contains(v)),x=!sI(w,o);y?f():x&&(f(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,d,o,u,f]),a.jsx(k1,{...e,ref:i})}),[JA,XA]=Pd(S1,{isInside:!1}),ZA=r2("TooltipContent"),k1=p.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=Ad(Ja,r),u=jg(r),{onClose:d}=c;return p.useEffect(()=>(document.addEventListener(wx,d),()=>document.removeEventListener(wx,d)),[d]),p.useEffect(()=>{if(c.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),a.jsx(no,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:a.jsxs(bg,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(ZA,{children:n}),a.jsx(JA,{scope:r,isInside:!0,children:a.jsx(S2,{id:c.contentId,role:"tooltip",children:s||n})})]})})});N1.displayName=Ja;var C1="TooltipArrow",eI=p.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=jg(r);return XA(C1,r).isInside?null:a.jsx(_g,{...s,...n,ref:t})});eI.displayName=C1;function tI(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,s,i)){case i:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function rI(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function nI(e){const{top:t,right:r,bottom:n,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:n},{x:s,y:n}]}function sI(e,t){const{x:r,y:n}=e;let s=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,h=c.x,f=c.y;d>n!=f>n&&r<(h-u)*(n-d)/(f-d)+u&&(s=!s)}return s}function iI(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),aI(t)}function aI(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const s=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const s=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))r.pop();else break}r.push(s)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var oI=j1,E1=N1;const lI=oI,cI=p.forwardRef(({className:e,sideOffset:t=4,...r},n)=>a.jsx(E1,{ref:n,sideOffset:t,className:G("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));cI.displayName=E1.displayName;var uo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ti=typeof window>"u"||"Deno"in globalThis;function Vt(){}function uI(e,t){return typeof e=="function"?e(t):e}function xp(e){return typeof e=="number"&&e>=0&&e!==1/0}function T1(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Os(e,t){return typeof e=="function"?e(t):e}function Nr(e,t){return typeof e=="function"?e(t):e}function bx(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==Sg(o,t.options))return!1}else if(!Nl(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function _x(e,t){const{exact:r,status:n,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Ri(t.options.mutationKey)!==Ri(i))return!1}else if(!Nl(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function Sg(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ri)(e)}function Ri(e){return JSON.stringify(e,(t,r)=>wp(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Nl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Nl(e[r],t[r])):!1}function R1(e,t){if(e===t)return e;const r=jx(e)&&jx(t);if(r||wp(e)&&wp(t)){const n=r?e:Object.keys(e),s=n.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{},c=new Set(n);let u=0;for(let d=0;d<o;d++){const h=r?d:i[d];(!r&&c.has(h)||r)&&e[h]===void 0&&t[h]===void 0?(l[h]=void 0,u++):(l[h]=R1(e[h],t[h]),l[h]===e[h]&&e[h]!==void 0&&u++)}return s===o&&u===s?e:l}return t}function Bu(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function jx(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function wp(e){if(!Sx(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Sx(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Sx(e){return Object.prototype.toString.call(e)==="[object Object]"}function dI(e){return new Promise(t=>{setTimeout(t,e)})}function bp(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?R1(e,t):t}function hI(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function fI(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Ng=Symbol();function P1(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Ng?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function A1(e,t){return typeof e=="function"?e(...t):!!e}var ui,fs,Pa,Uw,pI=(Uw=class extends uo{constructor(){super();he(this,ui);he(this,fs);he(this,Pa);te(this,Pa,t=>{if(!Ti&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){C(this,fs)||this.setEventListener(C(this,Pa))}onUnsubscribe(){var t;this.hasListeners()||((t=C(this,fs))==null||t.call(this),te(this,fs,void 0))}setEventListener(t){var r;te(this,Pa,t),(r=C(this,fs))==null||r.call(this),te(this,fs,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){C(this,ui)!==t&&(te(this,ui,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof C(this,ui)=="boolean"?C(this,ui):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ui=new WeakMap,fs=new WeakMap,Pa=new WeakMap,Uw),kg=new pI,Aa,ps,Ia,Bw,mI=(Bw=class extends uo{constructor(){super();he(this,Aa,!0);he(this,ps);he(this,Ia);te(this,Ia,t=>{if(!Ti&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){C(this,ps)||this.setEventListener(C(this,Ia))}onUnsubscribe(){var t;this.hasListeners()||((t=C(this,ps))==null||t.call(this),te(this,ps,void 0))}setEventListener(t){var r;te(this,Ia,t),(r=C(this,ps))==null||r.call(this),te(this,ps,t(this.setOnline.bind(this)))}setOnline(t){C(this,Aa)!==t&&(te(this,Aa,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return C(this,Aa)}},Aa=new WeakMap,ps=new WeakMap,Ia=new WeakMap,Bw),zu=new mI;function _p(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function gI(e){return Math.min(1e3*2**e,3e4)}function I1(e){return(e??"online")==="online"?zu.isOnline():!0}var O1=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function zh(e){return e instanceof O1}function M1(e){let t=!1,r=0,n=!1,s;const i=_p(),o=g=>{var v;n||(f(new O1(g)),(v=e.abort)==null||v.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>kg.isFocused()&&(e.networkMode==="always"||zu.isOnline())&&e.canRun(),d=()=>I1(e.networkMode)&&e.canRun(),h=g=>{var v;n||(n=!0,(v=e.onSuccess)==null||v.call(e,g),s==null||s(),i.resolve(g))},f=g=>{var v;n||(n=!0,(v=e.onError)==null||v.call(e,g),s==null||s(),i.reject(g))},m=()=>new Promise(g=>{var v;s=w=>{(n||u())&&g(w)},(v=e.onPause)==null||v.call(e)}).then(()=>{var g;s=void 0,n||(g=e.onContinue)==null||g.call(e)}),b=()=>{if(n)return;let g;const v=r===0?e.initialPromise:void 0;try{g=v??e.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(h).catch(w=>{var N;if(n)return;const y=e.retry??(Ti?0:3),x=e.retryDelay??gI,_=typeof x=="function"?x(r,w):x,j=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,w);if(t||!j){f(w);return}r++,(N=e.onFail)==null||N.call(e,r,w),dI(_).then(()=>u()?void 0:m()).then(()=>{t?f(w):b()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?b():m().then(b),i)}}var vI=e=>setTimeout(e,0);function yI(){let e=[],t=0,r=l=>{l()},n=l=>{l()},s=vI;const i=l=>{t?e.push(l):s(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var xt=yI(),di,zw,D1=(zw=class{constructor(){he(this,di)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),xp(this.gcTime)&&te(this,di,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ti?1/0:5*60*1e3))}clearGcTimeout(){C(this,di)&&(clearTimeout(C(this,di)),te(this,di,void 0))}},di=new WeakMap,zw),Oa,hi,Sr,fi,Ot,zl,pi,Hr,An,qw,xI=(qw=class extends D1{constructor(t){super();he(this,Hr);he(this,Oa);he(this,hi);he(this,Sr);he(this,fi);he(this,Ot);he(this,zl);he(this,pi);te(this,pi,!1),te(this,zl,t.defaultOptions),this.setOptions(t.options),this.observers=[],te(this,fi,t.client),te(this,Sr,C(this,fi).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,te(this,Oa,wI(this.options)),this.state=t.state??C(this,Oa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=C(this,Ot))==null?void 0:t.promise}setOptions(t){this.options={...C(this,zl),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&C(this,Sr).remove(this)}setData(t,r){const n=bp(this.state.data,t,this.options);return Re(this,Hr,An).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Re(this,Hr,An).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=C(this,Ot))==null?void 0:n.promise;return(s=C(this,Ot))==null||s.cancel(t),r?r.then(Vt).catch(Vt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(C(this,Oa))}isActive(){return this.observers.some(t=>Nr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ng||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Os(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!T1(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=C(this,Ot))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=C(this,Ot))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),C(this,Sr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(C(this,Ot)&&(C(this,pi)?C(this,Ot).cancel({revert:!0}):C(this,Ot).cancelRetry()),this.scheduleGc()),C(this,Sr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Re(this,Hr,An).call(this,{type:"invalidate"})}fetch(t,r){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(C(this,Ot))return C(this,Ot).continueRetry(),C(this,Ot).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(m=>m.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(te(this,pi,!0),n.signal)})},i=()=>{const f=P1(this.options,r),b=(()=>{const g={client:C(this,fi),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return te(this,pi,!1),this.options.persister?this.options.persister(f,b,this):f(b)},l=(()=>{const f={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:C(this,fi),state:this.state,fetchFn:i};return s(f),f})();(u=this.options.behavior)==null||u.onFetch(l,this),te(this,hi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Re(this,Hr,An).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=f=>{var m,b,g,v;zh(f)&&f.silent||Re(this,Hr,An).call(this,{type:"error",error:f}),zh(f)||((b=(m=C(this,Sr).config).onError)==null||b.call(m,f,this),(v=(g=C(this,Sr).config).onSettled)==null||v.call(g,this.state.data,f,this)),this.scheduleGc()};return te(this,Ot,M1({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var m,b,g,v;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(w){c(w);return}(b=(m=C(this,Sr).config).onSuccess)==null||b.call(m,f,this),(v=(g=C(this,Sr).config).onSettled)==null||v.call(g,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,m)=>{Re(this,Hr,An).call(this,{type:"failed",failureCount:f,error:m})},onPause:()=>{Re(this,Hr,An).call(this,{type:"pause"})},onContinue:()=>{Re(this,Hr,An).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),C(this,Ot).start()}},Oa=new WeakMap,hi=new WeakMap,Sr=new WeakMap,fi=new WeakMap,Ot=new WeakMap,zl=new WeakMap,pi=new WeakMap,Hr=new WeakSet,An=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...L1(n.data,this.options),fetchMeta:t.meta??null};case"success":return te(this,hi,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return zh(s)&&s.revert&&C(this,hi)?{...C(this,hi),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),xt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),C(this,Sr).notify({query:this,type:"updated",action:t})})},qw);function L1(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:I1(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function wI(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var mn,Ww,bI=(Ww=class extends uo{constructor(t={}){super();he(this,mn);this.config=t,te(this,mn,new Map)}build(t,r,n){const s=r.queryKey,i=r.queryHash??Sg(s,r);let o=this.get(i);return o||(o=new xI({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){C(this,mn).has(t.queryHash)||(C(this,mn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=C(this,mn).get(t.queryHash);r&&(t.destroy(),r===t&&C(this,mn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){xt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return C(this,mn).get(t)}getAll(){return[...C(this,mn).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>bx(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>bx(t,n)):r}notify(t){xt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){xt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){xt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},mn=new WeakMap,Ww),gn,zt,mi,vn,is,Vw,_I=(Vw=class extends D1{constructor(t){super();he(this,vn);he(this,gn);he(this,zt);he(this,mi);this.mutationId=t.mutationId,te(this,zt,t.mutationCache),te(this,gn,[]),this.state=t.state||$1(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){C(this,gn).includes(t)||(C(this,gn).push(t),this.clearGcTimeout(),C(this,zt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){te(this,gn,C(this,gn).filter(r=>r!==t)),this.scheduleGc(),C(this,zt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){C(this,gn).length||(this.state.status==="pending"?this.scheduleGc():C(this,zt).remove(this))}continue(){var t;return((t=C(this,mi))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,l,c,u,d,h,f,m,b,g,v,w,y,x,_,j,N,k,S;const r=()=>{Re(this,vn,is).call(this,{type:"continue"})};te(this,mi,M1({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(E,A)=>{Re(this,vn,is).call(this,{type:"failed",failureCount:E,error:A})},onPause:()=>{Re(this,vn,is).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>C(this,zt).canRun(this)}));const n=this.state.status==="pending",s=!C(this,mi).canStart();try{if(n)r();else{Re(this,vn,is).call(this,{type:"pending",variables:t,isPaused:s}),await((o=(i=C(this,zt).config).onMutate)==null?void 0:o.call(i,t,this));const A=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));A!==this.state.context&&Re(this,vn,is).call(this,{type:"pending",context:A,variables:t,isPaused:s})}const E=await C(this,mi).start();return await((d=(u=C(this,zt).config).onSuccess)==null?void 0:d.call(u,E,t,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,E,t,this.state.context)),await((b=(m=C(this,zt).config).onSettled)==null?void 0:b.call(m,E,null,this.state.variables,this.state.context,this)),await((v=(g=this.options).onSettled)==null?void 0:v.call(g,E,null,t,this.state.context)),Re(this,vn,is).call(this,{type:"success",data:E}),E}catch(E){try{throw await((y=(w=C(this,zt).config).onError)==null?void 0:y.call(w,E,t,this.state.context,this)),await((_=(x=this.options).onError)==null?void 0:_.call(x,E,t,this.state.context)),await((N=(j=C(this,zt).config).onSettled)==null?void 0:N.call(j,void 0,E,this.state.variables,this.state.context,this)),await((S=(k=this.options).onSettled)==null?void 0:S.call(k,void 0,E,t,this.state.context)),E}finally{Re(this,vn,is).call(this,{type:"error",error:E})}}finally{C(this,zt).runNext(this)}}},gn=new WeakMap,zt=new WeakMap,mi=new WeakMap,vn=new WeakSet,is=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),xt.batch(()=>{C(this,gn).forEach(n=>{n.onMutationUpdate(t)}),C(this,zt).notify({mutation:this,type:"updated",action:t})})},Vw);function $1(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ln,Kr,ql,Hw,jI=(Hw=class extends uo{constructor(t={}){super();he(this,Ln);he(this,Kr);he(this,ql);this.config=t,te(this,Ln,new Set),te(this,Kr,new Map),te(this,ql,0)}build(t,r,n){const s=new _I({mutationCache:this,mutationId:++hc(this,ql)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){C(this,Ln).add(t);const r=Oc(t);if(typeof r=="string"){const n=C(this,Kr).get(r);n?n.push(t):C(this,Kr).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(C(this,Ln).delete(t)){const r=Oc(t);if(typeof r=="string"){const n=C(this,Kr).get(r);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&C(this,Kr).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Oc(t);if(typeof r=="string"){const n=C(this,Kr).get(r),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var n;const r=Oc(t);if(typeof r=="string"){const s=(n=C(this,Kr).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){xt.batch(()=>{C(this,Ln).forEach(t=>{this.notify({type:"removed",mutation:t})}),C(this,Ln).clear(),C(this,Kr).clear()})}getAll(){return Array.from(C(this,Ln))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>_x(r,n))}findAll(t={}){return this.getAll().filter(r=>_x(t,r))}notify(t){xt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return xt.batch(()=>Promise.all(t.map(r=>r.continue().catch(Vt))))}},Ln=new WeakMap,Kr=new WeakMap,ql=new WeakMap,Hw);function Oc(e){var t;return(t=e.options.scope)==null?void 0:t.id}function Nx(e){return{onFetch:(t,r)=>{var d,h,f,m,b;const n=t.options,s=(f=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=t.state.data)==null?void 0:m.pages)||[],o=((b=t.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const v=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},w=P1(t.options,t.fetchOptions),y=async(x,_,j)=>{if(g)return Promise.reject();if(_==null&&x.pages.length)return Promise.resolve(x);const k=(()=>{const $={client:t.client,queryKey:t.queryKey,pageParam:_,direction:j?"backward":"forward",meta:t.options.meta};return v($),$})(),S=await w(k),{maxPages:E}=t.options,A=j?fI:hI;return{pages:A(x.pages,S,E),pageParams:A(x.pageParams,_,E)}};if(s&&i.length){const x=s==="backward",_=x?SI:kx,j={pages:i,pageParams:o},N=_(n,j);l=await y(j,N,x)}else{const x=e??i.length;do{const _=c===0?o[0]??n.initialPageParam:kx(n,l);if(c>0&&_==null)break;l=await y(l,_),c++}while(c<x)}return l};t.options.persister?t.fetchFn=()=>{var g,v;return(v=(g=t.options).persister)==null?void 0:v.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function kx(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function SI(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var it,ms,gs,Ma,Da,vs,La,$a,Kw,NI=(Kw=class{constructor(e={}){he(this,it);he(this,ms);he(this,gs);he(this,Ma);he(this,Da);he(this,vs);he(this,La);he(this,$a);te(this,it,e.queryCache||new bI),te(this,ms,e.mutationCache||new jI),te(this,gs,e.defaultOptions||{}),te(this,Ma,new Map),te(this,Da,new Map),te(this,vs,0)}mount(){hc(this,vs)._++,C(this,vs)===1&&(te(this,La,kg.subscribe(async e=>{e&&(await this.resumePausedMutations(),C(this,it).onFocus())})),te(this,$a,zu.subscribe(async e=>{e&&(await this.resumePausedMutations(),C(this,it).onOnline())})))}unmount(){var e,t;hc(this,vs)._--,C(this,vs)===0&&((e=C(this,La))==null||e.call(this),te(this,La,void 0),(t=C(this,$a))==null||t.call(this),te(this,$a,void 0))}isFetching(e){return C(this,it).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return C(this,ms).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=C(this,it).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=C(this,it).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Os(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return C(this,it).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=C(this,it).get(n.queryHash),i=s==null?void 0:s.state.data,o=uI(t,i);if(o!==void 0)return C(this,it).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return xt.batch(()=>C(this,it).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=C(this,it).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=C(this,it);xt.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=C(this,it);return xt.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=xt.batch(()=>C(this,it).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(Vt).catch(Vt)}invalidateQueries(e,t={}){return xt.batch(()=>(C(this,it).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=xt.batch(()=>C(this,it).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Vt)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Vt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=C(this,it).build(this,t);return r.isStaleByTime(Os(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Vt).catch(Vt)}fetchInfiniteQuery(e){return e.behavior=Nx(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Vt).catch(Vt)}ensureInfiniteQueryData(e){return e.behavior=Nx(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return zu.isOnline()?C(this,ms).resumePausedMutations():Promise.resolve()}getQueryCache(){return C(this,it)}getMutationCache(){return C(this,ms)}getDefaultOptions(){return C(this,gs)}setDefaultOptions(e){te(this,gs,e)}setQueryDefaults(e,t){C(this,Ma).set(Ri(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...C(this,Ma).values()],r={};return t.forEach(n=>{Nl(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){C(this,Da).set(Ri(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...C(this,Da).values()],r={};return t.forEach(n=>{Nl(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...C(this,gs).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Sg(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Ng&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...C(this,gs).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){C(this,it).clear(),C(this,ms).clear()}},it=new WeakMap,ms=new WeakMap,gs=new WeakMap,Ma=new WeakMap,Da=new WeakMap,vs=new WeakMap,La=new WeakMap,$a=new WeakMap,Kw),Jt,Oe,Wl,qt,gi,Fa,ys,xs,Vl,Ua,Ba,vi,yi,ws,za,Ue,zo,jp,Sp,Np,kp,Cp,Ep,Tp,F1,Gw,kI=(Gw=class extends uo{constructor(t,r){super();he(this,Ue);he(this,Jt);he(this,Oe);he(this,Wl);he(this,qt);he(this,gi);he(this,Fa);he(this,ys);he(this,xs);he(this,Vl);he(this,Ua);he(this,Ba);he(this,vi);he(this,yi);he(this,ws);he(this,za,new Set);this.options=r,te(this,Jt,t),te(this,xs,null),te(this,ys,_p()),this.options.experimental_prefetchInRender||C(this,ys).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(C(this,Oe).addObserver(this),Cx(C(this,Oe),this.options)?Re(this,Ue,zo).call(this):this.updateResult(),Re(this,Ue,kp).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Rp(C(this,Oe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Rp(C(this,Oe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Re(this,Ue,Cp).call(this),Re(this,Ue,Ep).call(this),C(this,Oe).removeObserver(this)}setOptions(t){const r=this.options,n=C(this,Oe);if(this.options=C(this,Jt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Nr(this.options.enabled,C(this,Oe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Re(this,Ue,Tp).call(this),C(this,Oe).setOptions(this.options),r._defaulted&&!Bu(this.options,r)&&C(this,Jt).getQueryCache().notify({type:"observerOptionsUpdated",query:C(this,Oe),observer:this});const s=this.hasListeners();s&&Ex(C(this,Oe),n,this.options,r)&&Re(this,Ue,zo).call(this),this.updateResult(),s&&(C(this,Oe)!==n||Nr(this.options.enabled,C(this,Oe))!==Nr(r.enabled,C(this,Oe))||Os(this.options.staleTime,C(this,Oe))!==Os(r.staleTime,C(this,Oe)))&&Re(this,Ue,jp).call(this);const i=Re(this,Ue,Sp).call(this);s&&(C(this,Oe)!==n||Nr(this.options.enabled,C(this,Oe))!==Nr(r.enabled,C(this,Oe))||i!==C(this,ws))&&Re(this,Ue,Np).call(this,i)}getOptimisticResult(t){const r=C(this,Jt).getQueryCache().build(C(this,Jt),t),n=this.createResult(r,t);return EI(this,n)&&(te(this,qt,n),te(this,Fa,this.options),te(this,gi,C(this,Oe).state)),n}getCurrentResult(){return C(this,qt)}trackResult(t,r){return new Proxy(t,{get:(n,s)=>(this.trackProp(s),r==null||r(s),Reflect.get(n,s))})}trackProp(t){C(this,za).add(t)}getCurrentQuery(){return C(this,Oe)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=C(this,Jt).defaultQueryOptions(t),n=C(this,Jt).getQueryCache().build(C(this,Jt),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return Re(this,Ue,zo).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),C(this,qt)))}createResult(t,r){var E;const n=C(this,Oe),s=this.options,i=C(this,qt),o=C(this,gi),l=C(this,Fa),u=t!==n?t.state:C(this,Wl),{state:d}=t;let h={...d},f=!1,m;if(r._optimisticResults){const A=this.hasListeners(),$=!A&&Cx(t,r),M=A&&Ex(t,n,r,s);($||M)&&(h={...h,...L1(d.data,t.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:b,errorUpdatedAt:g,status:v}=h;m=h.data;let w=!1;if(r.placeholderData!==void 0&&m===void 0&&v==="pending"){let A;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(A=i.data,w=!0):A=typeof r.placeholderData=="function"?r.placeholderData((E=C(this,Ba))==null?void 0:E.state.data,C(this,Ba)):r.placeholderData,A!==void 0&&(v="success",m=bp(i==null?void 0:i.data,A,r),f=!0)}if(r.select&&m!==void 0&&!w)if(i&&m===(o==null?void 0:o.data)&&r.select===C(this,Vl))m=C(this,Ua);else try{te(this,Vl,r.select),m=r.select(m),m=bp(i==null?void 0:i.data,m,r),te(this,Ua,m),te(this,xs,null)}catch(A){te(this,xs,A)}C(this,xs)&&(b=C(this,xs),m=C(this,Ua),g=Date.now(),v="error");const y=h.fetchStatus==="fetching",x=v==="pending",_=v==="error",j=x&&y,N=m!==void 0,S={status:v,fetchStatus:h.fetchStatus,isPending:x,isSuccess:v==="success",isError:_,isInitialLoading:j,isLoading:j,data:m,dataUpdatedAt:h.dataUpdatedAt,error:b,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!x,isLoadingError:_&&!N,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:_&&N,isStale:Cg(t,r),refetch:this.refetch,promise:C(this,ys),isEnabled:Nr(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const A=Q=>{S.status==="error"?Q.reject(S.error):S.data!==void 0&&Q.resolve(S.data)},$=()=>{const Q=te(this,ys,S.promise=_p());A(Q)},M=C(this,ys);switch(M.status){case"pending":t.queryHash===n.queryHash&&A(M);break;case"fulfilled":(S.status==="error"||S.data!==M.value)&&$();break;case"rejected":(S.status!=="error"||S.error!==M.reason)&&$();break}}return S}updateResult(){const t=C(this,qt),r=this.createResult(C(this,Oe),this.options);if(te(this,gi,C(this,Oe).state),te(this,Fa,this.options),C(this,gi).data!==void 0&&te(this,Ba,C(this,Oe)),Bu(r,t))return;te(this,qt,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!C(this,za).size)return!0;const o=new Set(i??C(this,za));return this.options.throwOnError&&o.add("error"),Object.keys(C(this,qt)).some(l=>{const c=l;return C(this,qt)[c]!==t[c]&&o.has(c)})};Re(this,Ue,F1).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Re(this,Ue,kp).call(this)}},Jt=new WeakMap,Oe=new WeakMap,Wl=new WeakMap,qt=new WeakMap,gi=new WeakMap,Fa=new WeakMap,ys=new WeakMap,xs=new WeakMap,Vl=new WeakMap,Ua=new WeakMap,Ba=new WeakMap,vi=new WeakMap,yi=new WeakMap,ws=new WeakMap,za=new WeakMap,Ue=new WeakSet,zo=function(t){Re(this,Ue,Tp).call(this);let r=C(this,Oe).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Vt)),r},jp=function(){Re(this,Ue,Cp).call(this);const t=Os(this.options.staleTime,C(this,Oe));if(Ti||C(this,qt).isStale||!xp(t))return;const n=T1(C(this,qt).dataUpdatedAt,t)+1;te(this,vi,setTimeout(()=>{C(this,qt).isStale||this.updateResult()},n))},Sp=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(C(this,Oe)):this.options.refetchInterval)??!1},Np=function(t){Re(this,Ue,Ep).call(this),te(this,ws,t),!(Ti||Nr(this.options.enabled,C(this,Oe))===!1||!xp(C(this,ws))||C(this,ws)===0)&&te(this,yi,setInterval(()=>{(this.options.refetchIntervalInBackground||kg.isFocused())&&Re(this,Ue,zo).call(this)},C(this,ws)))},kp=function(){Re(this,Ue,jp).call(this),Re(this,Ue,Np).call(this,Re(this,Ue,Sp).call(this))},Cp=function(){C(this,vi)&&(clearTimeout(C(this,vi)),te(this,vi,void 0))},Ep=function(){C(this,yi)&&(clearInterval(C(this,yi)),te(this,yi,void 0))},Tp=function(){const t=C(this,Jt).getQueryCache().build(C(this,Jt),this.options);if(t===C(this,Oe))return;const r=C(this,Oe);te(this,Oe,t),te(this,Wl,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},F1=function(t){xt.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(C(this,qt))}),C(this,Jt).getQueryCache().notify({query:C(this,Oe),type:"observerResultsUpdated"})})},Gw);function CI(e,t){return Nr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Cx(e,t){return CI(e,t)||e.state.data!==void 0&&Rp(e,t,t.refetchOnMount)}function Rp(e,t,r){if(Nr(t.enabled,e)!==!1&&Os(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&Cg(e,t)}return!1}function Ex(e,t,r,n){return(e!==t||Nr(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Cg(e,r)}function Cg(e,t){return Nr(t.enabled,e)!==!1&&e.isStaleByTime(Os(t.staleTime,e))}function EI(e,t){return!Bu(e.getCurrentResult(),t)}var bs,_s,Xt,$n,zn,ou,Pp,Yw,TI=(Yw=class extends uo{constructor(r,n){super();he(this,zn);he(this,bs);he(this,_s);he(this,Xt);he(this,$n);te(this,bs,r),this.setOptions(n),this.bindMethods(),Re(this,zn,ou).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var s;const n=this.options;this.options=C(this,bs).defaultMutationOptions(r),Bu(this.options,n)||C(this,bs).getMutationCache().notify({type:"observerOptionsUpdated",mutation:C(this,Xt),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Ri(n.mutationKey)!==Ri(this.options.mutationKey)?this.reset():((s=C(this,Xt))==null?void 0:s.state.status)==="pending"&&C(this,Xt).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=C(this,Xt))==null||r.removeObserver(this)}onMutationUpdate(r){Re(this,zn,ou).call(this),Re(this,zn,Pp).call(this,r)}getCurrentResult(){return C(this,_s)}reset(){var r;(r=C(this,Xt))==null||r.removeObserver(this),te(this,Xt,void 0),Re(this,zn,ou).call(this),Re(this,zn,Pp).call(this)}mutate(r,n){var s;return te(this,$n,n),(s=C(this,Xt))==null||s.removeObserver(this),te(this,Xt,C(this,bs).getMutationCache().build(C(this,bs),this.options)),C(this,Xt).addObserver(this),C(this,Xt).execute(r)}},bs=new WeakMap,_s=new WeakMap,Xt=new WeakMap,$n=new WeakMap,zn=new WeakSet,ou=function(){var n;const r=((n=C(this,Xt))==null?void 0:n.state)??$1();te(this,_s,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Pp=function(r){xt.batch(()=>{var n,s,i,o,l,c,u,d;if(C(this,$n)&&this.hasListeners()){const h=C(this,_s).variables,f=C(this,_s).context;(r==null?void 0:r.type)==="success"?((s=(n=C(this,$n)).onSuccess)==null||s.call(n,r.data,h,f),(o=(i=C(this,$n)).onSettled)==null||o.call(i,r.data,null,h,f)):(r==null?void 0:r.type)==="error"&&((c=(l=C(this,$n)).onError)==null||c.call(l,r.error,h,f),(d=(u=C(this,$n)).onSettled)==null||d.call(u,void 0,r.error,h,f))}this.listeners.forEach(h=>{h(C(this,_s))})})},Yw),U1=p.createContext(void 0),Pt=e=>{const t=p.useContext(U1);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},RI=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(U1.Provider,{value:e,children:t})),B1=p.createContext(!1),PI=()=>p.useContext(B1);B1.Provider;function AI(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var II=p.createContext(AI()),OI=()=>p.useContext(II),MI=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},DI=e=>{p.useEffect(()=>{e.clearReset()},[e])},LI=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||A1(r,[e.error,n])),$I=e=>{if(e.suspense){const t=n=>n==="static"?n:Math.max(n??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...n)=>t(r(...n)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},FI=(e,t)=>e.isLoading&&e.isFetching&&!t,UI=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Tx=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function BI(e,t,r){var h,f,m,b,g;const n=PI(),s=OI(),i=Pt(),o=i.defaultQueryOptions(e);(f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=n?"isRestoring":"optimistic",$I(o),MI(o,s),DI(s);const l=!i.getQueryCache().get(o.queryHash),[c]=p.useState(()=>new t(i,o)),u=c.getOptimisticResult(o),d=!n&&e.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(v=>{const w=d?c.subscribe(xt.batchCalls(v)):Vt;return c.updateResult(),w},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),p.useEffect(()=>{c.setOptions(o)},[o,c]),UI(o,u))throw Tx(o,c,s);if(LI({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((b=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||b.call(m,o,u),o.experimental_prefetchInRender&&!Ti&&FI(u,n)){const v=l?Tx(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;v==null||v.catch(Vt).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Le(e,t){return BI(e,kI)}function dt(e,t){const r=Pt(),[n]=p.useState(()=>new TI(r,e));p.useEffect(()=>{n.setOptions(e)},[n,e]);const s=p.useSyncExternalStore(p.useCallback(o=>n.subscribe(xt.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=p.useCallback((o,l)=>{n.mutate(o,l).catch(Vt)},[n]);if(s.error&&A1(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kl(){return kl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kl.apply(this,arguments)}var Ns;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ns||(Ns={}));const Rx="popstate";function zI(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return Ap("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:qu(s)}return WI(t,r,null,e)}function ht(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function z1(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function qI(){return Math.random().toString(36).substr(2,8)}function Px(e,t){return{usr:e.state,key:e.key,idx:t}}function Ap(e,t,r,n){return r===void 0&&(r=null),kl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ho(t):t,{state:r,key:t&&t.key||n||qI()})}function qu(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ho(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function WI(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=Ns.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(kl({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Ns.Pop;let v=d(),w=v==null?null:v-u;u=v,c&&c({action:l,location:g.location,delta:w})}function f(v,w){l=Ns.Push;let y=Ap(g.location,v,w);u=d()+1;let x=Px(y,u),_=g.createHref(y);try{o.pushState(x,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(_)}i&&c&&c({action:l,location:g.location,delta:1})}function m(v,w){l=Ns.Replace;let y=Ap(g.location,v,w);u=d();let x=Px(y,u),_=g.createHref(y);o.replaceState(x,"",_),i&&c&&c({action:l,location:g.location,delta:0})}function b(v){let w=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof v=="string"?v:qu(v);return y=y.replace(/ $/,"%20"),ht(w,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,w)}let g={get action(){return l},get location(){return e(s,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Rx,h),c=v,()=>{s.removeEventListener(Rx,h),c=null}},createHref(v){return t(s,v)},createURL:b,encodeLocation(v){let w=b(v);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:m,go(v){return o.go(v)}};return g}var Ax;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ax||(Ax={}));function VI(e,t,r){return r===void 0&&(r="/"),HI(e,t,r,!1)}function HI(e,t,r,n){let s=typeof t=="string"?ho(t):t,i=Eg(s.pathname||"/",r);if(i==null)return null;let o=q1(e);KI(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=sO(i);l=rO(o[c],u,n)}return l}function q1(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(ht(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Ms([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(ht(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),q1(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:eO(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of W1(i.path))s(i,o,c)}),t}function W1(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=W1(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function KI(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:tO(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const GI=/^:[\w-]+$/,YI=3,QI=2,JI=1,XI=10,ZI=-2,Ix=e=>e==="*";function eO(e,t){let r=e.split("/"),n=r.length;return r.some(Ix)&&(n+=ZI),t&&(n+=QI),r.filter(s=>!Ix(s)).reduce((s,i)=>s+(GI.test(i)?YI:i===""?JI:XI),n)}function tO(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function rO(e,t,r){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=Ox({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=Ox({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Ms([i,h.pathname]),pathnameBase:lO(Ms([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Ms([i,h.pathnameBase]))}return o}function Ox(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=nO(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let g=l[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const b=l[h];return m&&!b?u[f]=void 0:u[f]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function nO(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),z1(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function sO(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return z1(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Eg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function iO(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?ho(e):e;return{pathname:r?r.startsWith("/")?r:aO(r,t):t,search:cO(n),hash:uO(s)}}function aO(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function qh(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oO(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Tg(e,t){let r=oO(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Rg(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=ho(e):(s=kl({},e),ht(!s.pathname||!s.pathname.includes("?"),qh("?","pathname","search",s)),ht(!s.pathname||!s.pathname.includes("#"),qh("#","pathname","hash",s)),ht(!s.search||!s.search.includes("#"),qh("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=iO(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Ms=e=>e.join("/").replace(/\/\/+/g,"/"),lO=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),cO=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,uO=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function dO(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const V1=["post","put","patch","delete"];new Set(V1);const hO=["get",...V1];new Set(hO);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cl(){return Cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cl.apply(this,arguments)}const Pg=p.createContext(null),fO=p.createContext(null),Ks=p.createContext(null),Id=p.createContext(null),Jn=p.createContext({outlet:null,matches:[],isDataRoute:!1}),H1=p.createContext(null);function pO(e,t){let{relative:r}=t===void 0?{}:t;fo()||ht(!1);let{basename:n,navigator:s}=p.useContext(Ks),{hash:i,pathname:o,search:l}=G1(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Ms([n,o])),s.createHref({pathname:c,search:l,hash:i})}function fo(){return p.useContext(Id)!=null}function kn(){return fo()||ht(!1),p.useContext(Id).location}function K1(e){p.useContext(Ks).static||p.useLayoutEffect(e)}function Gs(){let{isDataRoute:e}=p.useContext(Jn);return e?CO():mO()}function mO(){fo()||ht(!1);let e=p.useContext(Pg),{basename:t,future:r,navigator:n}=p.useContext(Ks),{matches:s}=p.useContext(Jn),{pathname:i}=kn(),o=JSON.stringify(Tg(s,r.v7_relativeSplatPath)),l=p.useRef(!1);return K1(()=>{l.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=Rg(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Ms([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,o,i,e])}function po(){let{matches:e}=p.useContext(Jn),t=e[e.length-1];return t?t.params:{}}function G1(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=p.useContext(Ks),{matches:s}=p.useContext(Jn),{pathname:i}=kn(),o=JSON.stringify(Tg(s,n.v7_relativeSplatPath));return p.useMemo(()=>Rg(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function gO(e,t){return vO(e,t)}function vO(e,t,r,n){fo()||ht(!1);let{navigator:s}=p.useContext(Ks),{matches:i}=p.useContext(Jn),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=kn(),d;if(t){var h;let v=typeof t=="string"?ho(t):t;c==="/"||(h=v.pathname)!=null&&h.startsWith(c)||ht(!1),d=v}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let v=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let b=VI(e,{pathname:m}),g=_O(b&&b.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:Ms([c,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Ms([c,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,r,n);return t&&g?p.createElement(Id.Provider,{value:{location:Cl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ns.Pop}},g):g}function yO(){let e=kO(),t=dO(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:s},r):null,null)}const xO=p.createElement(yO,null);class wO extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?p.createElement(Jn.Provider,{value:this.props.routeContext},p.createElement(H1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bO(e){let{routeContext:t,match:r,children:n}=e,s=p.useContext(Pg);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(Jn.Provider,{value:t},n)}function _O(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||ht(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=r,b=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||b){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,b=!1,g=null,v=null;r&&(m=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||xO,c&&(u<0&&f===0?(b=!0,v=null):u===f&&(b=!0,v=h.route.hydrateFallbackElement||null)));let w=t.concat(o.slice(0,f+1)),y=()=>{let x;return m?x=g:b?x=v:h.route.Component?x=p.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=d,p.createElement(bO,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:r!=null},children:x})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?p.createElement(wO,{location:r.location,revalidation:r.revalidation,component:g,error:m,children:y(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):y()},null)}var Y1=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Y1||{}),Wu=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Wu||{});function jO(e){let t=p.useContext(Pg);return t||ht(!1),t}function SO(e){let t=p.useContext(fO);return t||ht(!1),t}function NO(e){let t=p.useContext(Jn);return t||ht(!1),t}function Q1(e){let t=NO(),r=t.matches[t.matches.length-1];return r.route.id||ht(!1),r.route.id}function kO(){var e;let t=p.useContext(H1),r=SO(Wu.UseRouteError),n=Q1(Wu.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function CO(){let{router:e}=jO(Y1.UseNavigateStable),t=Q1(Wu.UseNavigateStable),r=p.useRef(!1);return K1(()=>{r.current=!0}),p.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Cl({fromRouteId:t},i)))},[e,t])}function EO(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function El(e){let{to:t,replace:r,state:n,relative:s}=e;fo()||ht(!1);let{future:i,static:o}=p.useContext(Ks),{matches:l}=p.useContext(Jn),{pathname:c}=kn(),u=Gs(),d=Rg(t,Tg(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return p.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function bt(e){ht(!1)}function TO(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Ns.Pop,navigator:i,static:o=!1,future:l}=e;fo()&&ht(!1);let c=t.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:i,static:o,future:Cl({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=ho(n));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:b="default"}=n,g=p.useMemo(()=>{let v=Eg(d,c);return v==null?null:{location:{pathname:v,search:h,hash:f,state:m,key:b},navigationType:s}},[c,d,h,f,m,b,s]);return g==null?null:p.createElement(Ks.Provider,{value:u},p.createElement(Id.Provider,{children:r,value:g}))}function RO(e){let{children:t,location:r}=e;return gO(Ip(t),r)}new Promise(()=>{});function Ip(e,t){t===void 0&&(t=[]);let r=[];return p.Children.forEach(e,(n,s)=>{if(!p.isValidElement(n))return;let i=[...t,s];if(n.type===p.Fragment){r.push.apply(r,Ip(n.props.children,i));return}n.type!==bt&&ht(!1),!n.props.index||!n.props.children||ht(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Ip(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Op(){return Op=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Op.apply(this,arguments)}function PO(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function AO(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function IO(e,t){return e.button===0&&(!t||t==="_self")&&!AO(e)}function Mp(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function OO(e,t){let r=Mp(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}const MO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],DO="6";try{window.__reactRouterVersion=DO}catch{}const LO="startTransition",Mx=um[LO];function $O(e){let{basename:t,children:r,future:n,window:s}=e,i=p.useRef();i.current==null&&(i.current=zI({window:s,v5Compat:!0}));let o=i.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=p.useCallback(h=>{u&&Mx?Mx(()=>c(h)):c(h)},[c,u]);return p.useLayoutEffect(()=>o.listen(d),[o,d]),p.useEffect(()=>EO(n),[n]),p.createElement(TO,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const FO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",UO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ge=p.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=PO(t,MO),{basename:m}=p.useContext(Ks),b,g=!1;if(typeof u=="string"&&UO.test(u)&&(b=u,FO))try{let x=new URL(window.location.href),_=u.startsWith("//")?new URL(x.protocol+u):new URL(u),j=Eg(_.pathname,m);_.origin===x.origin&&j!=null?u=j+_.search+_.hash:g=!0}catch{}let v=pO(u,{relative:s}),w=BO(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function y(x){n&&n(x),x.defaultPrevented||w(x)}return p.createElement("a",Op({},f,{href:b||v,onClick:g||i?n:y,ref:r,target:c}))});var Dx;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Dx||(Dx={}));var Lx;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Lx||(Lx={}));function BO(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Gs(),u=kn(),d=G1(e,{relative:o});return p.useCallback(h=>{if(IO(h,r)){h.preventDefault();let f=n!==void 0?n:qu(u)===qu(d);c(e,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,s,r,e,i,o,l])}function zO(e){let t=p.useRef(Mp(e)),r=p.useRef(!1),n=kn(),s=p.useMemo(()=>OO(n.search,r.current?null:t.current),[n.search]),i=Gs(),o=p.useCallback((l,c)=>{const u=Mp(typeof l=="function"?l(s):l);r.current=!0,i("?"+u,c)},[i,s]);return[s,o]}var xn=function(){return xn=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},xn.apply(this,arguments)};function mo(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function qO(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function WO(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}const VO=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Ag extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class HO extends Ag{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class $x extends Ag{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Fx extends Ag{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Dp;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Dp||(Dp={}));class KO{constructor(t,{headers:r={},customFetch:n,region:s=Dp.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=VO(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return qO(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:l,method:c,body:u,signal:d,timeout:h}=n;let f={},{region:m}=n;m||(m=this.region);const b=new URL(`${this.url}/${r}`);m&&m!=="any"&&(f["x-region"]=m,b.searchParams.set("forceFunctionRegion",m));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(f["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(f["Content-Type"]="application/json",g=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?g=JSON.stringify(u):g=u;let v=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(v=o.signal,d.addEventListener("abort",()=>o.abort())):v=o.signal);const w=yield this.fetch(b.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:g,signal:v}).catch(j=>{throw new HO(j)}),y=w.headers.get("x-relay-error");if(y&&y==="true")throw new $x(w);if(!w.ok)throw new Fx(w);let x=((s=w.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return x==="application/json"?_=yield w.json():x==="application/octet-stream"||x==="application/pdf"?_=yield w.blob():x==="text/event-stream"?_=w:x==="multipart/form-data"?_=yield w.formData():_=yield w.text(),{data:_,error:null,response:w}}catch(l){return{data:null,error:l,response:l instanceof Fx||l instanceof $x?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var GO=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},YO=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,u=i.status,d=i.statusText;if(i.ok){var h,f;if(r.method!=="HEAD"){var m;const w=await i.text();w===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((m=r.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?l=w:l=JSON.parse(w))}const g=(h=r.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),v=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");g&&v&&v.length>1&&(c=parseInt(v[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var b;const g=await i.text();try{o=JSON.parse(g),Array.isArray(o)&&i.status===404&&(l=[],o=null,u=200,d="OK")}catch{i.status===404&&g===""?(u=204,d="No Content"):o={message:g}}if(o&&r.isMaybeSingle&&(!(o==null||(b=o.details)===null||b===void 0)&&b.includes("0 rows"))&&(o=null,u=200,d="OK"),o&&r.shouldThrowOnError)throw new GO(o)}return{error:o,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let l="";const c=i==null?void 0:i.cause;if(c){var u,d,h,f;const b=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",g=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";l=`${(h=i==null?void 0:i.name)!==null&&h!==void 0?h:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"Error"}: ${b}`,g&&(l+=` (${g})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var m;l=(m=i==null?void 0:i.stack)!==null&&m!==void 0?m:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},QO=class extends YO{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Ux=new RegExp("[,()]");var sa=class extends QO{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Ux.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&Ux.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},JO=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",o),n&&c.append("Prefer",`count=${n}`),new sa({method:s,url:l,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);i.searchParams.set("columns",c.join(","))}}return new sa({method:s,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&c.append("Prefer",`count=${n}`),s||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);l.searchParams.set("columns",d.join(","))}}return new sa({method:o,url:l,headers:c,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new sa({method:n,url:s,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new sa({method:r,url:n,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},XO=class J1{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new JO(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new J1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;const d=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(d)),h=n&&Object.values(r).some(d);h?(l="POST",u=r):n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([m,b])=>b!==void 0).map(([m,b])=>[m,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([m,b])=>{c.searchParams.append(m,b)})):(l="POST",u=r);const f=new Headers(this.headers);return h?f.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&f.set("Prefer",`count=${i}`),new sa({method:l,url:c,headers:f,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class ZO{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const eM="2.91.0",tM=`realtime-js/${eM}`,rM="1.0.0",X1="2.0.0",Bx=X1,Lp=1e4,nM=1e3,sM=100;var cs;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(cs||(cs={}));var vt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(vt||(vt={}));var Yr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Yr||(Yr={}));var $p;(function(e){e.websocket="websocket"})($p||($p={}));var si;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(si||(si={}));class iM{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var s,i;const o=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+h.length,m=new ArrayBuffer(this.HEADER_LENGTH+f);let b=new DataView(m),g=0;b.setUint8(g++,this.KINDS.userBroadcastPush),b.setUint8(g++,c.length),b.setUint8(g++,l.length),b.setUint8(g++,o.length),b.setUint8(g++,u.length),b.setUint8(g++,h.length),b.setUint8(g++,r),Array.from(c,w=>b.setUint8(g++,w.charCodeAt(0))),Array.from(l,w=>b.setUint8(g++,w.charCodeAt(0))),Array.from(o,w=>b.setUint8(g++,w.charCodeAt(0))),Array.from(u,w=>b.setUint8(g++,w.charCodeAt(0))),Array.from(h,w=>b.setUint8(g++,w.charCodeAt(0)));var v=new Uint8Array(m.byteLength+n.byteLength);return v.set(new Uint8Array(m),0),v.set(new Uint8Array(n),m.byteLength),v.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,o,l,c]=n;return r({join_ref:s,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+s));c=c+s;const d=n.decode(t.slice(c,c+i));c=c+i;const h=n.decode(t.slice(c,c+o));c=c+o;const f=t.slice(c,t.byteLength),m=l===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,b={type:this.BROADCAST_EVENT,event:d,payload:m};return o>0&&(b.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class Z1{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ke;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ke||(Ke={}));const zx=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=aM(o,e,t,s),i),{}):{}},aM=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?ej(i,o):Fp(o)},ej=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return uM(t,r)}switch(e){case Ke.bool:return oM(t);case Ke.float4:case Ke.float8:case Ke.int2:case Ke.int4:case Ke.int8:case Ke.numeric:case Ke.oid:return lM(t);case Ke.json:case Ke.jsonb:return cM(t);case Ke.timestamp:return dM(t);case Ke.abstime:case Ke.date:case Ke.daterange:case Ke.int4range:case Ke.int8range:case Ke.money:case Ke.reltime:case Ke.text:case Ke.time:case Ke.timestamptz:case Ke.timetz:case Ke.tsrange:case Ke.tstzrange:return Fp(t);default:return Fp(t)}},Fp=e=>e,oM=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},lM=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},cM=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},uM=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>ej(t,l))}return e},dM=e=>typeof e=="string"?e.replace(" ","T"):e,tj=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Wh{constructor(t,r,n={},s=Lp){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var qx;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(qx||(qx={}));class rl{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=rl.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=rl.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=rl.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(v=>v.presence_ref),m=h.map(v=>v.presence_ref),b=d.filter(v=>m.indexOf(v.presence_ref)<0),g=h.filter(v=>f.indexOf(v.presence_ref)<0);b.length>0&&(l[u]=b),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...f)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Wx;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Wx||(Wx={}));var nl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(nl||(nl={}));var On;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(On||(On={}));class xa{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Wh(this,Yr.join,this.params,this.timeout),this.rejoinTimer=new Z1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yr.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new rl(this),this.broadcastEndpointURL=tj(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==vt.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[nl.PRESENCE]&&this.bindings[nl.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(On.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(On.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){t==null||t(On.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,v=(b=g==null?void 0:g.length)!==null&&b!==void 0?b:0,w=[];for(let y=0;y<v;y++){const x=g[y],{filter:{event:_,schema:j,table:N,filter:k}}=x,S=m&&m[y];if(S&&S.event===_&&xa.isFilterValueEqual(S.schema,j)&&xa.isFilterValueEqual(S.table,N)&&xa.isFilterValueEqual(S.filter,k))w.push(Object.assign(Object.assign({},x),{id:S.id}));else{this.unsubscribe(),this.state=vt.errored,t==null||t(On.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(On.SUBSCRIBED);return}}).receive("error",m=>{this.state=vt.errored,t==null||t(On.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(On.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===vt.joined&&t===nl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=vt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Wh(this,Yr.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=vt.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Wh(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>sM){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Yr;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var b,g,v;return((b=m.filter)===null||b===void 0?void 0:b.event)==="*"||((v=(g=m.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var b,g,v,w,y,x,_,j;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const N=m.id,k=(b=m.filter)===null||b===void 0?void 0:b.event;return N&&((g=r.ids)===null||g===void 0?void 0:g.includes(N))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))&&(!(!((w=m.filter)===null||w===void 0)&&w.table)||m.filter.table===((y=r.data)===null||y===void 0?void 0:y.table))}else{const N=(_=(x=m==null?void 0:m.filter)===null||x===void 0?void 0:x.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return N==="*"||N===((j=r==null?void 0:r.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const b=f.data,{schema:g,table:v,commit_timestamp:w,type:y,errors:x}=b;f=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:w,eventType:y,new:{},old:{},errors:x}),this._getPayloadRecords(b))}m.callback(f,n)})}_isClosed(){return this.state===vt.closed}_isJoined(){return this.state===vt.joined}_isJoining(){return this.state===vt.joining}_isLeaving(){return this.state===vt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&xa.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Yr.close,{},t)}_onError(t){this._on(Yr.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=zx(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=zx(t.columns,t.old_record)),r}}const Vh=()=>{},Mc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},hM=[1e3,2e3,5e3,1e4],fM=1e4,pM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class mM{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Lp,this.transport=null,this.heartbeatIntervalMs=Mc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Vh,this.ref=0,this.reconnectTimer=null,this.vsn=Bx,this.logger=Vh,this.conn=null,this.sendBuffer=[],this.serializer=new iM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${$p.websocket}`,this.httpEndpoint=tj(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ZO.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case cs.connecting:return si.Connecting;case cs.open:return si.Open;case cs.closing:return si.Closing;default:return si.Closed}}isConnected(){return this.connectionState()===si.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new xa(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(nM,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Mc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===cs.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===cs.open||this.conn.readyState===cs.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Yr.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([pM],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:tM};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Yr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Z1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Mc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,l,c,u,d,h,f,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Lp,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Mc.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Vh,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Bx,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:b=>hM[b-1]||fM,this.vsn){case rM:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(b,g)=>g(JSON.stringify(b)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(b,g)=>g(JSON.parse(b));break;case X1:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Tl=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function gM(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function vM(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function yM(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const l=gM(e.baseUrl,n,s),c=await vM(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const m=h?f:void 0,b=m==null?void 0:m.error;throw new Tl((b==null?void 0:b.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:m})}return{status:u.status,headers:u.headers,data:f}}}}function Dc(e){return e.join("")}var xM=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Dc(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Dc(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Dc(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Dc(e.namespace)}`}),!0}catch(t){if(t instanceof Tl&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Tl&&r.status===409)return;throw r}}};function Gi(e){return e.join("")}var wM=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gi(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Gi(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Gi(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Gi(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gi(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Gi(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Tl&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Tl&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},bM=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=yM({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new xM(this.client,t),this.tableOps=new wM(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Od=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function tt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var _M=class extends Od{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Up=class extends Od{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Ig=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),jM=()=>Response,Bp=e=>{if(Array.isArray(e))return e.map(r=>Bp(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Bp(n)}),t},SM=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},NM=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Rl(e){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rl(e)}function kM(e,t){if(Rl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Rl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CM(e){var t=kM(e,"string");return Rl(t)=="symbol"?t:t+""}function EM(e,t,r){return(t=CM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vx(Object(r),!0).forEach(function(n){EM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vx(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Hh=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},TM=async(e,t,r)=>{e instanceof await jM()&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{const s=e.status||500,i=(n==null?void 0:n.statusCode)||s+"";t(new _M(Hh(n),s,i))}).catch(n=>{t(new Up(Hh(n),n))}):t(new Up(Hh(e),e))},RM=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(SM(n)?(s.headers=me({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),me(me({},s),r))};async function nc(e,t,r,n,s,i){return new Promise((o,l)=>{e(r,RM(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>TM(c,l,n))})}async function Pl(e,t,r,n){return nc(e,"GET",t,r,n)}async function Vr(e,t,r,n,s){return nc(e,"POST",t,n,s,r)}async function zp(e,t,r,n,s){return nc(e,"PUT",t,n,s,r)}async function PM(e,t,r,n){return nc(e,"HEAD",t,me(me({},r),{},{noResolveJson:!0}),n)}async function Og(e,t,r,n,s){return nc(e,"DELETE",t,n,s,r)}var AM=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(tt(t))return{data:null,error:t};throw t}}};let rj;rj=Symbol.toStringTag;var IM=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[rj]="BlobDownloadBuilder",this.promise=null}asStream(){return new AM(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(tt(t))return{data:null,error:t};throw t}}};const OM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var MM=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Ig(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){var s=this;try{let i;const o=me(me({},Hx),n);let l=me(me({},s.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",s.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=me(me({},l),n.headers));const u=s._removeEmptyFolders(t),d=s._getFinalPath(u),h=await(e=="PUT"?zp:Vr)(s.fetch,`${s.url}/object/${d}`,i,me({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(tt(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const i=s._removeEmptyFolders(e),o=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const u=me({upsert:Hx.upsert},n),d=me(me({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:i,fullPath:(await zp(s.fetch,l.toString(),c,{headers:d})).Key},error:null}}catch(c){if(s.shouldThrowOnError)throw c;if(tt(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var r=this;try{let n=r._getFinalPath(e);const s=me({},r.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await Vr(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new Od("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;try{return{data:await Vr(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}}async copy(e,t,r){var n=this;try{return{data:{path:(await Vr(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,r){var n=this;try{let s=n._getFinalPath(e),i=await Vr(n.fetch,`${n.url}/object/sign/${s}`,me({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,r){var n=this;try{const s=await Vr(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>me(me({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>Pl(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new IM(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:Bp(await Pl(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await PM(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(tt(n)&&n instanceof Up){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;try{return{data:await Og(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}async list(e,t,r){var n=this;try{const s=me(me(me({},OM),t),{},{prefix:e||""});return{data:await Vr(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}}async listV2(e,t){var r=this;try{const n=me({},e);return{data:await Vr(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const nj="2.91.0",sj={"X-Client-Info":`storage-js/${nj}`};var DM=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const s=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=me(me({},sj),t),this.fetch=Ig(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await Pl(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await Pl(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await Vr(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var r=this;try{return{data:await zp(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await Vr(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Og(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},LM=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=me(me({},sj),t),this.fetch=Ig(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Vr(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await Pl(t.fetch,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Og(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!NM(e))throw new Od("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new bM({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(s,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}};const Mg={"X-Client-Info":`storage-js/${nj}`,"Content-Type":"application/json"};var ij=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function pr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var Kh=class extends ij{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},$M=class extends ij{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Dg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),FM=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Kx=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),UM=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const n=e.status||500,s=e;if(typeof s.json=="function")s.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";t(new Kh(Kx(i),n,o))}).catch(()=>{const i=n+"";t(new Kh(s.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";t(new Kh(s.statusText||`HTTP ${n} error`,n,i))}}else t(new $M(Kx(e),e))},BM=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(FM(n)?(s.headers=me({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,me(me({},s),r)):s};async function zM(e,t,r,n,s,i){return new Promise((o,l)=>{e(r,BM(t,n,s,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>UM(c,l,n))})}async function mr(e,t,r,n,s){return zM(e,"POST",t,n,s,r)}var qM=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=me(me({},Mg),t),this.fetch=Dg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await mr(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await mr(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(pr(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await mr(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await mr(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(pr(n))return{data:null,error:n};throw n}}},WM=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=me(me({},Mg),t),this.fetch=Dg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await mr(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await mr(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await mr(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await mr(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await mr(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}},VM=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=me(me({},Mg),t),this.fetch=Dg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await mr(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await mr(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await mr(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await mr(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(pr(r))return{data:null,error:r};throw r}}},HM=class extends VM{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new KM(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},KM=class extends qM{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,me(me({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,me(me({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new GM(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},GM=class extends WM{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,me(me({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,me(me({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,me(me({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,me(me({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,me(me({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},YM=class extends DM{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new MM(this.url,this.headers,e,this.fetch)}get vectors(){return new HM(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new LM(this.url+"/iceberg",this.headers,this.fetch)}};const aj="2.91.0",ia=30*1e3,qp=3,Gh=qp*ia,QM="http://localhost:9999",JM="supabase.auth.token",XM={"X-Client-Info":`gotrue-js/${aj}`},Wp="X-Supabase-Api-Version",oj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ZM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,e4=10*60*1e3;class Al extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function le(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class t4 extends Al{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function r4(e){return le(e)&&e.name==="AuthApiError"}class ii extends Al{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Xn extends Al{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class dr extends Xn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function n4(e){return le(e)&&e.name==="AuthSessionMissingError"}class Yi extends Xn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Lc extends Xn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class $c extends Xn{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function s4(e){return le(e)&&e.name==="AuthImplicitGrantRedirectError"}class Gx extends Xn{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class i4 extends Xn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Vp extends Xn{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Yh(e){return le(e)&&e.name==="AuthRetryableFetchError"}class Yx extends Xn{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Hp extends Xn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Qx=` 	
\r=`.split(""),a4=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Qx.length;t+=1)e[Qx[t].charCodeAt(0)]=-2;for(let t=0;t<Vu.length;t+=1)e[Vu[t].charCodeAt(0)]=t;return e})();function Jx(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Vu[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Vu[n]),t.queuedBits-=6}}function lj(e,t,r){const n=a4[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Xx(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{c4(o,n,r)};for(let o=0;o<e.length;o+=1)lj(e.charCodeAt(o),s,i);return t.join("")}function o4(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function l4(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}o4(n,t)}}function c4(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Ea(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)lj(e.charCodeAt(s),r,n);return new Uint8Array(t)}function u4(e){const t=[];return l4(e,r=>t.push(r)),new Uint8Array(t)}function ci(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Jx(s,r,n)),Jx(null,r,n),t.join("")}function d4(e){return Math.round(Date.now()/1e3)+e}function h4(){return Symbol("auth-callback")}const kt=()=>typeof window<"u"&&typeof document<"u",Xs={tested:!1,writable:!1},cj=()=>{if(!kt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xs.tested)return Xs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Xs.tested=!0,Xs.writable=!0}catch{Xs.tested=!0,Xs.writable=!1}return Xs.writable};function f4(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const uj=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),p4=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",aa=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Zs=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Nt=async(e,t)=>{await e.removeItem(t)};class Md{constructor(){this.promise=new Md.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Md.promiseConstructor=Promise;function Qh(e){const t=e.split(".");if(t.length!==3)throw new Hp("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!ZM.test(t[n]))throw new Hp("JWT not in base64url format");return{header:JSON.parse(Xx(t[0])),payload:JSON.parse(Xx(t[1])),signature:Ea(t[2]),raw:{header:t[0],payload:t[1]}}}async function m4(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function g4(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function v4(e){return("0"+e.toString(16)).substr(-2)}function y4(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,v4).join("")}async function x4(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function w4(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await x4(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qi(e,t,r=!1){const n=y4();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await aa(e,`${t}-code-verifier`,s);const i=await w4(n);return[i,n===i?"plain":"s256"]}const b4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _4(e){const t=e.headers.get(Wp);if(!t||!t.match(b4))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function j4(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function S4(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const N4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ji(e){if(!N4.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Jh(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function k4(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function Zx(e){return JSON.parse(JSON.stringify(e))}const ri=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),C4=[502,503,504];async function ew(e){var t;if(!p4(e))throw new Vp(ri(e),0);if(C4.includes(e.status))throw new Vp(ri(e),e.status);let r;try{r=await e.json()}catch(i){throw new ii(ri(i),i)}let n;const s=_4(e);if(s&&s.getTime()>=oj["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Yx(ri(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new dr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Yx(ri(r),e.status,r.weak_password.reasons);throw new t4(ri(r),e.status||500,n)}const E4=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function pe(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Wp]||(i[Wp]=oj["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await T4(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function T4(e,t,r,n,s,i){const o=E4(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Vp(ri(c),0)}if(l.ok||await ew(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await ew(c)}}function zr(e){var t;let r=null;A4(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=d4(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function tw(e){const t=zr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function hs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function R4(e){return{data:e,error:null}}function P4(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=mo(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function rw(e){return e}function A4(e){return e.access_token&&e.refresh_token&&e.expires_in}const Xh=["global","local","others"];class I4{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=uj(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Xh[0]){if(Xh.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Xh.join(", ")}`);try{return await pe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:hs})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=mo(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:P4,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(le(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await pe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:hs})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:rw});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(b=>{const g=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(b.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(le(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Ji(t);try{return await pe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:hs})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ji(t);try{return await pe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:hs})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Ji(t);try{return await pe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:hs})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Ji(t.userId);try{const{data:r,error:n}=await pe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(le(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ji(t.userId),Ji(t.id);try{return{data:await pe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:rw});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(b=>{const g=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(b.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(le(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await pe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await pe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(le(r))return{data:null,error:r};throw r}}}function nw(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Xi={debug:!!(globalThis&&cj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dj extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class O4 extends dj{}async function M4(e,t,r){Xi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Xi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Xi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Xi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Xi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new O4(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Xi.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function D4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function hj(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function L4(e){return parseInt(e,16)}function $4(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function F4(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=hj(e.address),b=d?`${d}://${n}`:n,g=e.statement?`${e.statement}
`:"",v=`${b} wants you to sign in with your Ethereum account:
${m}

${g}`;let w=`URI: ${h}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(w+=`
Expiration Time: ${s.toISOString()}`),l&&(w+=`
Not Before: ${l.toISOString()}`),c&&(w+=`
Request ID: ${c}`),u){let y=`
Resources:`;for(const x of u){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);y+=`
- ${x}`}w+=y}return`${v}
${w}`}class ft extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Hu extends ft{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function U4({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ft({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ft({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ft({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ft({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ft({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ft({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new ft({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ft({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(fj(o)){if(i.rp.id!==o)return new ft({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ft({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ft({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ft({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ft({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function B4({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ft({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ft({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(fj(n)){if(r.rpId!==n)return new ft({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ft({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ft({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ft({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class z4{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const q4=new z4;function W4(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=mo(e,["challenge","user","excludeCredentials"]),i=Ea(t).buffer,o=Object.assign(Object.assign({},r),{id:Ea(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Ea(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function V4(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=mo(e,["challenge","allowCredentials"]),s=Ea(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Ea(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function H4(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:ci(new Uint8Array(e.response.attestationObject)),clientDataJSON:ci(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function K4(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ci(new Uint8Array(s.authenticatorData)),clientDataJSON:ci(new Uint8Array(s.clientDataJSON)),signature:ci(new Uint8Array(s.signature)),userHandle:s.userHandle?ci(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function fj(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function sw(){var e,t;return!!(kt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function G4(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Hu("Browser returned unexpected credential type",t)}:{data:null,error:new Hu("Empty credential response",t)}}catch(t){return{data:null,error:U4({error:t,options:e})}}}async function Y4(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Hu("Browser returned unexpected credential type",t)}:{data:null,error:new Hu("Empty credential response",t)}}catch(t){return{data:null,error:B4({error:t,options:e})}}}const Q4={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},J4={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ku(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=Ku(l,o):n[i]=Ku(o)}else n[i]=o}return n}function X4(e,t){return Ku(Q4,e,t||{})}function Z4(e,t){return Ku(J4,e,t||{})}class eD{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=s??q4.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=X4(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await G4({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=Z4(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await Y4(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return le(o)?{data:null,error:o}:{data:null,error:new ii("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Al("rpId is required for WebAuthn authentication")};try{if(!sw())return{data:null,error:new ii("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return le(o)?{data:null,error:o}:{data:null,error:new ii("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Al("rpId is required for WebAuthn registration")};try{if(!sw())return{data:null,error:new ii("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return le(o)?{data:null,error:o}:{data:null,error:new ii("Unexpected error in register",o)}}}}D4();const tD={url:QM,storageKey:JM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:XM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function iw(e,t,r){return await r()}const Zi={};class Il{get jwks(){var t,r;return(r=(t=Zi[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Zi[this.storageKey]=Object.assign(Object.assign({},Zi[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Zi[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Zi[this.storageKey]=Object.assign(Object.assign({},Zi[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},tD),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Il.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Il.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&kt()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new I4({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=uj(i.fetch),this.lock=i.lock||iw,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&kt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=M4:this.lock=iw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new eD(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:cj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=nw(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=nw(this.memoryStorage)),kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${aj}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(kt()&&(r=f4(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),kt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),s4(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return le(r)?this._returnResult({error:r}):this._returnResult({error:new ii("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:zr}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let m=null,b=null;this.flowType==="pkce"&&([m,b]=await Qi(this.storage,this.storageKey)),i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:b},xform:zr})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:zr})}else throw new Lc("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await Nt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:tw})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:tw})}else throw new Lc("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new Yi;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(le(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,l,c,u,d,h,f;let m,b;if("message"in t)m=t.message,b=t.signature;else{const{chain:g,wallet:v,statement:w,options:y}=t;let x;if(kt())if(typeof v=="object")x=v;else{const E=window;if("ethereum"in E&&typeof E.ethereum=="object"&&"request"in E.ethereum&&typeof E.ethereum.request=="function")x=E.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=v}const _=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href),j=await x.request({method:"eth_requestAccounts"}).then(E=>E).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=hj(j[0]);let k=(n=y==null?void 0:y.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!k){const E=await x.request({method:"eth_chainId"});k=L4(E)}const S={domain:_.host,address:N,statement:w,uri:_.href,version:"1",chainId:k,nonce:(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=y==null?void 0:y.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=F4(S),b=await x.request({method:"personal_sign",params:[$4(m),N]})}try{const{data:g,error:v}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:b},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:zr});if(v)throw v;if(!g||!g.session||!g.user){const w=new Yi;return this._returnResult({data:{user:null,session:null},error:w})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:v})}catch(g){if(le(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var r,n,s,i,o,l,c,u,d,h,f,m;let b,g;if("message"in t)b=t.message,g=t.signature;else{const{chain:v,wallet:w,statement:y,options:x}=t;let _;if(kt())if(typeof w=="object")_=w;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))_=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=w}const j=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const N=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),y?{statement:y}:null));let k;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")k=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)k=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)b=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),g=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=x==null?void 0:x.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((h=(d=x==null?void 0:x.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...x.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const N=await _.signMessage(new TextEncoder().encode(b),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=N}}try{const{data:v,error:w}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:ci(g)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:zr});if(w)throw w;if(!v||!v.session||!v.user){const y=new Yi;return this._returnResult({data:{user:null,session:null},error:y})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:w})}catch(v){if(le(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(t){const r=await Zs(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new i4;const{data:i,error:o}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:zr});if(await Nt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new Yi;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",i.session)},0)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:zr}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Yi;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(le(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Qi(this.storage,this.storageKey));const{error:h}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Lc("You must provide either an email or phone number.")}catch(l){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:zr});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(le(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Qi(this.storage,this.storageKey));const u=await pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:R4});return!((i=u.data)===null||i===void 0)&&i.url&&kt()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new dr;const{error:s}=await pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(le(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await pe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await pe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Lc("You must provide either an email or phone number and a type")}catch(r){if(le(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Zs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Gh:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Zs(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Jh()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=k4(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:hs}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new dr}:await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:hs})})}catch(r){if(le(r))return n4(r)&&(await this._removeSession(),await Nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new dr;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Qi(this.storage,this.storageKey));const{data:u,error:d}=await pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:hs});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new dr;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Qh(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(le(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new dr;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(le(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!kt())throw new $c("No browser detected.");if(t.error||t.error_description||t.error_code)throw new $c(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Gx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new $c("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Gx("No code detected.");const{data:y,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new $c("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const m=f-d;m*1e3<=ia&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const b=f-h;d-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,f,d):d-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,f,d);const{data:g,error:v}=await this._getUser(i);if(v)throw v;const w={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:t.type},error:null})}catch(n){if(le(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Zs(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(r4(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=h4(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Qi(this.storage,this.storageKey,!0));try{return await pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await pe(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return kt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(le(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,h=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:zr}),{data:f,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Yi}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:m}))}catch(s){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),le(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await pe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await g4(async s=>(s>0&&await m4(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:zr})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Yh(i)&&Date.now()+o-n<ia})}catch(n){if(this._debug(r,"error",n),le(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),kt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Zs(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Zs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await aa(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Jh()}else if(s&&!s.user&&!s.user){const o=await Zs(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Nt(this.storage,this.storageKey+"-user"),await aa(this.storage,this.storageKey,s)):s.user=Jh()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Gh;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Gh}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Yh(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new dr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Md;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new dr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),le(i)){const o={data:null,error:i};return Yh(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Nt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await aa(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Zx(s);await aa(this.storage,this.storageKey,i)}else{const s=Zx(r);await aa(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Nt(this.storage,this.storageKey),await Nt(this.storage,this.storageKey+"-code-verifier"),await Nt(this.storage,this.storageKey+"-user"),this.userStorage&&await Nt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&kt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ia);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/ia);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ia}ms, refresh threshold is ${qp} ticks`),s<=qp&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof dj)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Qi(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await pe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await pe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?H4(t.webauthn.credential_response):K4(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:W4(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:V4(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Qh(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await pe(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new dr})})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new dr});const o=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&kt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new dr});const o=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&kt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await pe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new dr})})}catch(t){if(le(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await pe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new dr})})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+e4>s)return n;const{data:i,error:o}=await pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:b}=await this.getSession();if(b||!m.session)return this._returnResult({data:null,error:b});n=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=Qh(n);r!=null&&r.allowExpired||j4(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const d=S4(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,u4(`${l}.${c}`)))throw new Hp("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}}Il.nextInstanceID={};const rD=Il,nD="2.91.0";let qo="";typeof Deno<"u"?qo="deno":typeof document<"u"?qo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?qo="react-native":qo="node";const sD={"X-Client-Info":`supabase-js-${qo}/${nD}`},iD={headers:sD},aD={schema:"public"},oD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lD={};function Ol(e){"@babel/helpers - typeof";return Ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ol(e)}function cD(e,t){if(Ol(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ol(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uD(e){var t=cD(e,"string");return Ol(t)=="symbol"?t:t+""}function dD(e,t,r){return(t=uD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function at(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aw(Object(r),!0).forEach(function(n){dD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const hD=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),fD=()=>Headers,pD=(e,t,r)=>{const n=hD(r),s=fD();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,at(at({},o),{},{headers:u}))}};function mD(e){return e.endsWith("/")?e:e+"/"}function gD(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:at(at({},c),s),auth:at(at({},u),i),realtime:at(at({},d),o),storage:{},global:at(at(at({},h),l),{},{headers:at(at({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function vD(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(mD(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var yD=class extends rD{constructor(e){super(e)}},xD=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const i=vD(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:aD,realtime:lD,auth:at(at({},oD),{},{storageKey:o}),global:iD},c=gD(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=pD(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(at({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new XO(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new YM(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new KO(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new yD({url:this.authUrl.href,headers:at(at({},f),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:l,debug:c,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new mM(this.realtimeUrl.href,at(at({},e),{},{params:at(at({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const wD=(e,t,r)=>new xD(e,t,r);function bD(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}bD()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const _D="https://piszvseyaefxekubphhf.supabase.co",jD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBpc3p2c2V5YWVmeGVrdWJwaGhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwODE3NTEsImV4cCI6MjA4NDY1Nzc1MX0.odmCphs9gpipbjF7zp639J0r8s48SYHnpNsjQvfICSc",P=wD(_D,jD,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),pj=p.createContext(void 0);function SD({children:e}){const[t,r]=p.useState(null),[n,s]=p.useState(null),[i,o]=p.useState(null),[l,c]=p.useState(!0),u=new URL("/remix-of-stackwise-advisor/",window.location.origin).toString(),d=async g=>{const{data:v,error:w}=await P.from("profiles").select("id, user_id, display_name, avatar_url, bio, is_public, follower_count, following_count").eq("user_id",g).single();return w?(console.error("Error fetching profile:",w),null):v};p.useEffect(()=>{const{data:{subscription:g}}=P.auth.onAuthStateChange(async(v,w)=>{s(w),r((w==null?void 0:w.user)??null),w!=null&&w.user?setTimeout(async()=>{const y=await d(w.user.id);o(y)},0):o(null),c(!1)});return P.auth.getSession().then(async({data:{session:v}})=>{s(v);let w=(v==null?void 0:v.user)??null;if(!w&&(v!=null&&v.access_token)){const{data:y}=await P.auth.getUser(v.access_token);w=y.user??null}r(w),w&&d(w.id).then(o),c(!1)}),()=>g.unsubscribe()},[]);const h=async(g,v,w)=>{const{error:y}=await P.auth.signUp({email:g,password:v,options:{emailRedirectTo:u,data:{display_name:w}}});return{error:y}},f=async(g,v)=>{const{error:w}=await P.auth.signInWithPassword({email:g,password:v});return{error:w}},m=async()=>{await P.auth.signOut(),o(null)},b=async g=>{if(!t)return{error:new Error("Not authenticated")};const{error:v}=await P.from("profiles").update(g).eq("user_id",t.id);return v||o(w=>w?{...w,...g}:null),{error:v}};return a.jsx(pj.Provider,{value:{user:t,session:n,profile:i,isLoading:l,signUp:h,signIn:f,signOut:m,updateProfile:b},children:e})}function Se(){const e=p.useContext(pj);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const ND=Sd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-soft hover:bg-primary/90 hover:shadow-soft-md hover:-translate-y-0.5",destructive:"bg-destructive text-destructive-foreground shadow-soft hover:bg-destructive/90",outline:"border border-border/60 bg-card/50 backdrop-blur-sm hover:bg-accent hover:text-accent-foreground hover:border-primary/30",secondary:"bg-secondary/80 text-secondary-foreground backdrop-blur-sm hover:bg-secondary/60",ghost:"hover:bg-accent/50 hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",glass:"bg-card/40 backdrop-blur-glass border border-border/40 text-foreground hover:bg-card/60 hover:border-primary/30 hover:shadow-soft",glow:"bg-primary text-primary-foreground shadow-glow-aqua hover:shadow-[0_0_40px_hsl(185_55%_50%_/_0.5)]",chrome:"bg-gradient-chrome border border-border/50 text-foreground hover:shadow-soft-md"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),O=p.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},i)=>{const o=n?e2:"button";return a.jsx(o,{className:G(ND({variant:t,size:r,className:e})),ref:i,...s})});O.displayName="Button";function ow({variant:e="header",mode:t="all"}){const n=kn().pathname,s=[{path:"/",label:"Home",icon:Z2,isPublic:!0},{path:"/inventory",label:"Library",icon:Ar,isPublic:!0},{path:"/blueprints",label:"Blueprints",icon:Nd,isPublic:!0},{path:"/wall",label:"Wall",icon:tc,isPublic:!0},{path:"/explore",label:"Explore",icon:io,isPublic:!0},{path:"/tags",label:"Tags",icon:lg,isPublic:!1}],i=t==="public"?s.filter(o=>o.isPublic):s;return e==="floating"?a.jsx("nav",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-40 flex items-center gap-1 p-1 bg-card/80 backdrop-blur-glass rounded-full border border-border/50 shadow-soft-lg",children:i.map(o=>{const l=n===o.path,c=o.icon;return a.jsx(ge,{to:o.path,children:a.jsxs(O,{variant:l?"default":"ghost",size:"sm",className:G("gap-2 rounded-full",l&&"bg-primary text-primary-foreground"),children:[a.jsx(c,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:o.label})]})},o.path)})}):a.jsx("nav",{className:"flex items-center gap-1 p-1 bg-card/50 backdrop-blur-sm rounded-xl border border-border/30",children:i.map(o=>{const l=n===o.path,c=o.icon;return a.jsx(ge,{to:o.path,children:a.jsxs(O,{variant:l?"glass":"ghost",size:"sm",className:G("gap-2",l&&"bg-accent/50 pointer-events-none"),children:[a.jsx(c,{className:"h-4 w-4"}),o.label]})},o.path)})})}var kD=p.createContext(void 0);function go(e){const t=p.useContext(kD);return e||t||"ltr"}var Zh=0;function Lg(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??lw()),document.body.insertAdjacentElement("beforeend",e[1]??lw()),Zh++,()=>{Zh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Zh--}},[])}function lw(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ef="focusScope.autoFocusOnMount",tf="focusScope.autoFocusOnUnmount",cw={bubbles:!1,cancelable:!0},CD="FocusScope",Dd=p.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=e,[l,c]=p.useState(null),u=lt(s),d=lt(i),h=p.useRef(null),f=Ne(t,g=>c(g)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let g=function(x){if(m.paused||!l)return;const _=x.target;l.contains(_)?h.current=_:as(h.current,{select:!0})},v=function(x){if(m.paused||!l)return;const _=x.relatedTarget;_!==null&&(l.contains(_)||as(h.current,{select:!0}))},w=function(x){if(document.activeElement===document.body)for(const j of x)j.removedNodes.length>0&&as(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",v);const y=new MutationObserver(w);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",v),y.disconnect()}}},[n,l,m.paused]),p.useEffect(()=>{if(l){dw.add(m);const g=document.activeElement;if(!l.contains(g)){const w=new CustomEvent(ef,cw);l.addEventListener(ef,u),l.dispatchEvent(w),w.defaultPrevented||(ED(ID(mj(l)),{select:!0}),document.activeElement===g&&as(l))}return()=>{l.removeEventListener(ef,u),setTimeout(()=>{const w=new CustomEvent(tf,cw);l.addEventListener(tf,d),l.dispatchEvent(w),w.defaultPrevented||as(g??document.body,{select:!0}),l.removeEventListener(tf,d),dw.remove(m)},0)}}},[l,u,d,m]);const b=p.useCallback(g=>{if(!r&&!n||m.paused)return;const v=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,w=document.activeElement;if(v&&w){const y=g.currentTarget,[x,_]=TD(y);x&&_?!g.shiftKey&&w===_?(g.preventDefault(),r&&as(x,{select:!0})):g.shiftKey&&w===x&&(g.preventDefault(),r&&as(_,{select:!0})):w===y&&g.preventDefault()}},[r,n,m.paused]);return a.jsx(ne.div,{tabIndex:-1,...o,ref:f,onKeyDown:b})});Dd.displayName=CD;function ED(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(as(n,{select:t}),document.activeElement!==r)return}function TD(e){const t=mj(e),r=uw(t,e),n=uw(t.reverse(),e);return[r,n]}function mj(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function uw(e,t){for(const r of e)if(!RD(r,{upTo:t}))return r}function RD(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function PD(e){return e instanceof HTMLInputElement&&"select"in e}function as(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&PD(e)&&t&&e.select()}}var dw=AD();function AD(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=hw(e,t),e.unshift(t)},remove(t){var r;e=hw(e,t),(r=e[0])==null||r.resume()}}}function hw(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function ID(e){return e.filter(t=>t.tagName!=="A")}var rf="rovingFocusGroup.onEntryFocus",OD={bubbles:!1,cancelable:!0},sc="RovingFocusGroup",[Kp,gj,MD]=Jl(sc),[DD,Ld]=Ft(sc,[MD]),[LD,$D]=DD(sc),vj=p.forwardRef((e,t)=>a.jsx(Kp.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(Kp.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(FD,{...e,ref:t})})}));vj.displayName=sc;var FD=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,f=p.useRef(null),m=Ne(t,f),b=go(i),[g,v]=Lr({prop:o,defaultProp:l??null,onChange:c,caller:sc}),[w,y]=p.useState(!1),x=lt(u),_=gj(r),j=p.useRef(!1),[N,k]=p.useState(0);return p.useEffect(()=>{const S=f.current;if(S)return S.addEventListener(rf,x),()=>S.removeEventListener(rf,x)},[x]),a.jsx(LD,{scope:r,orientation:n,dir:b,loop:s,currentTabStopId:g,onItemFocus:p.useCallback(S=>v(S),[v]),onItemShiftTab:p.useCallback(()=>y(!0),[]),onFocusableItemAdd:p.useCallback(()=>k(S=>S+1),[]),onFocusableItemRemove:p.useCallback(()=>k(S=>S-1),[]),children:a.jsx(ne.div,{tabIndex:w||N===0?-1:0,"data-orientation":n,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:H(e.onMouseDown,()=>{j.current=!0}),onFocus:H(e.onFocus,S=>{const E=!j.current;if(S.target===S.currentTarget&&E&&!w){const A=new CustomEvent(rf,OD);if(S.currentTarget.dispatchEvent(A),!A.defaultPrevented){const $=_().filter(V=>V.focusable),M=$.find(V=>V.active),Q=$.find(V=>V.id===g),se=[M,Q,...$].filter(Boolean).map(V=>V.ref.current);wj(se,d)}}j.current=!1}),onBlur:H(e.onBlur,()=>y(!1))})})}),yj="RovingFocusGroupItem",xj=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,children:o,...l}=e,c=Ir(),u=i||c,d=$D(yj,r),h=d.currentTabStopId===u,f=gj(r),{onFocusableItemAdd:m,onFocusableItemRemove:b,currentTabStopId:g}=d;return p.useEffect(()=>{if(n)return m(),()=>b()},[n,m,b]),a.jsx(Kp.ItemSlot,{scope:r,id:u,focusable:n,active:s,children:a.jsx(ne.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:H(e.onMouseDown,v=>{n?d.onItemFocus(u):v.preventDefault()}),onFocus:H(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:H(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const w=zD(v,d.orientation,d.dir);if(w!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let x=f().filter(_=>_.focusable).map(_=>_.ref.current);if(w==="last")x.reverse();else if(w==="prev"||w==="next"){w==="prev"&&x.reverse();const _=x.indexOf(v.currentTarget);x=d.loop?qD(x,_+1):x.slice(_+1)}setTimeout(()=>wj(x))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:g!=null}):o})})});xj.displayName=yj;var UD={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function BD(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function zD(e,t,r){const n=BD(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return UD[n]}function wj(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function qD(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var bj=vj,_j=xj,WD=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ea=new WeakMap,Fc=new WeakMap,Uc={},nf=0,jj=function(e){return e&&(e.host||jj(e.parentNode))},VD=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=jj(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},HD=function(e,t,r,n){var s=VD(t,Array.isArray(e)?e:[e]);Uc[r]||(Uc[r]=new WeakMap);var i=Uc[r],o=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))d(f);else try{var m=f.getAttribute(n),b=m!==null&&m!=="false",g=(ea.get(f)||0)+1,v=(i.get(f)||0)+1;ea.set(f,g),i.set(f,v),o.push(f),g===1&&b&&Fc.set(f,!0),v===1&&f.setAttribute(r,"true"),b||f.setAttribute(n,"true")}catch(w){console.error("aria-hidden: cannot operate on ",f,w)}})};return d(t),l.clear(),nf++,function(){o.forEach(function(h){var f=ea.get(h)-1,m=i.get(h)-1;ea.set(h,f),i.set(h,m),f||(Fc.has(h)||h.removeAttribute(n),Fc.delete(h)),m||h.removeAttribute(r)}),nf--,nf||(ea=new WeakMap,ea=new WeakMap,Fc=new WeakMap,Uc={})}},$g=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=WD(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),HD(n,s,r,"aria-hidden")):function(){return null}},lu="right-scroll-bar-position",cu="width-before-scroll-bar",KD="with-scroll-bars-hidden",GD="--removed-body-scroll-bar-size";function sf(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function YD(e,t){var r=p.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var QD=typeof window<"u"?p.useLayoutEffect:p.useEffect,fw=new WeakMap;function JD(e,t){var r=YD(null,function(n){return e.forEach(function(s){return sf(s,n)})});return QD(function(){var n=fw.get(r);if(n){var s=new Set(n),i=new Set(e),o=r.current;s.forEach(function(l){i.has(l)||sf(l,null)}),i.forEach(function(l){s.has(l)||sf(l,o)})}fw.set(r,e)},[e]),r}function XD(e){return e}function ZD(e,t){t===void 0&&(t=XD);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return s}function eL(e){e===void 0&&(e={});var t=ZD(null);return t.options=xn({async:!0,ssr:!1},e),t}var Sj=function(e){var t=e.sideCar,r=mo(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return p.createElement(n,xn({},r))};Sj.isSideCarExport=!0;function tL(e,t){return e.useMedium(t),Sj}var Nj=eL(),af=function(){},$d=p.forwardRef(function(e,t){var r=p.useRef(null),n=p.useState({onScrollCapture:af,onWheelCapture:af,onTouchMoveCapture:af}),s=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,f=e.sideCar,m=e.noRelative,b=e.noIsolation,g=e.inert,v=e.allowPinchZoom,w=e.as,y=w===void 0?"div":w,x=e.gapMode,_=mo(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=f,N=JD([r,t]),k=xn(xn({},_),s);return p.createElement(p.Fragment,null,d&&p.createElement(j,{sideCar:Nj,removeScrollBar:u,shards:h,noRelative:m,noIsolation:b,inert:g,setCallbacks:i,allowPinchZoom:!!v,lockRef:r,gapMode:x}),o?p.cloneElement(p.Children.only(l),xn(xn({},k),{ref:N})):p.createElement(y,xn({},k,{className:c,ref:N}),l))});$d.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};$d.classNames={fullWidth:cu,zeroRight:lu};var rL=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function nL(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=rL();return t&&e.setAttribute("nonce",t),e}function sL(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function iL(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var aL=function(){var e=0,t=null;return{add:function(r){e==0&&(t=nL())&&(sL(t,r),iL(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},oL=function(){var e=aL();return function(t,r){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},kj=function(){var e=oL(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},lL={left:0,top:0,right:0,gap:0},of=function(e){return parseInt(e||"",10)||0},cL=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[of(r),of(n),of(s)]},uL=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return lL;var t=cL(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},dL=kj(),Ta="data-scroll-locked",hL=function(e,t,r,n){var s=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(KD,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Ta,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(lu,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(cu,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(lu," .").concat(lu,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(cu," .").concat(cu,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Ta,`] {
    `).concat(GD,": ").concat(l,`px;
  }
`)},pw=function(){var e=parseInt(document.body.getAttribute(Ta)||"0",10);return isFinite(e)?e:0},fL=function(){p.useEffect(function(){return document.body.setAttribute(Ta,(pw()+1).toString()),function(){var e=pw()-1;e<=0?document.body.removeAttribute(Ta):document.body.setAttribute(Ta,e.toString())}},[])},pL=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;fL();var i=p.useMemo(function(){return uL(s)},[s]);return p.createElement(dL,{styles:hL(i,!t,s,r?"":"!important")})},Gp=!1;if(typeof window<"u")try{var Bc=Object.defineProperty({},"passive",{get:function(){return Gp=!0,!0}});window.addEventListener("test",Bc,Bc),window.removeEventListener("test",Bc,Bc)}catch{Gp=!1}var ta=Gp?{passive:!1}:!1,mL=function(e){return e.tagName==="TEXTAREA"},Cj=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!mL(e)&&r[t]==="visible")},gL=function(e){return Cj(e,"overflowY")},vL=function(e){return Cj(e,"overflowX")},mw=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=Ej(e,n);if(s){var i=Tj(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},yL=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},xL=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},Ej=function(e,t){return e==="v"?gL(t):vL(t)},Tj=function(e,t){return e==="v"?yL(t):xL(t)},wL=function(e,t){return e==="h"&&t==="rtl"?-1:1},bL=function(e,t,r,n,s){var i=wL(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),u=!1,d=o>0,h=0,f=0;do{if(!l)break;var m=Tj(e,l),b=m[0],g=m[1],v=m[2],w=g-v-i*b;(b||w)&&Ej(e,l)&&(h+=w,f+=b);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(f)<1||!s))&&(u=!0),u},zc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},gw=function(e){return[e.deltaX,e.deltaY]},vw=function(e){return e&&"current"in e?e.current:e},_L=function(e,t){return e[0]===t[0]&&e[1]===t[1]},jL=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},SL=0,ra=[];function NL(e){var t=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),s=p.useState(SL++)[0],i=p.useState(kj)[0],o=p.useRef(e);p.useEffect(function(){o.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=WO([e.lockRef.current],(e.shards||[]).map(vw),!0).filter(Boolean);return g.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(g,v){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var w=zc(g),y=r.current,x="deltaX"in g?g.deltaX:y[0]-w[0],_="deltaY"in g?g.deltaY:y[1]-w[1],j,N=g.target,k=Math.abs(x)>Math.abs(_)?"h":"v";if("touches"in g&&k==="h"&&N.type==="range")return!1;var S=mw(k,N);if(!S)return!0;if(S?j=k:(j=k==="v"?"h":"v",S=mw(k,N)),!S)return!1;if(!n.current&&"changedTouches"in g&&(x||_)&&(n.current=j),!j)return!0;var E=n.current||j;return bL(E,v,g,E==="h"?x:_,!0)},[]),c=p.useCallback(function(g){var v=g;if(!(!ra.length||ra[ra.length-1]!==i)){var w="deltaY"in v?gw(v):zc(v),y=t.current.filter(function(j){return j.name===v.type&&(j.target===v.target||v.target===j.shadowParent)&&_L(j.delta,w)})[0];if(y&&y.should){v.cancelable&&v.preventDefault();return}if(!y){var x=(o.current.shards||[]).map(vw).filter(Boolean).filter(function(j){return j.contains(v.target)}),_=x.length>0?l(v,x[0]):!o.current.noIsolation;_&&v.cancelable&&v.preventDefault()}}},[]),u=p.useCallback(function(g,v,w,y){var x={name:g,delta:v,target:w,should:y,shadowParent:kL(w)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(_){return _!==x})},1)},[]),d=p.useCallback(function(g){r.current=zc(g),n.current=void 0},[]),h=p.useCallback(function(g){u(g.type,gw(g),g.target,l(g,e.lockRef.current))},[]),f=p.useCallback(function(g){u(g.type,zc(g),g.target,l(g,e.lockRef.current))},[]);p.useEffect(function(){return ra.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,ta),document.addEventListener("touchmove",c,ta),document.addEventListener("touchstart",d,ta),function(){ra=ra.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,ta),document.removeEventListener("touchmove",c,ta),document.removeEventListener("touchstart",d,ta)}},[]);var m=e.removeScrollBar,b=e.inert;return p.createElement(p.Fragment,null,b?p.createElement(i,{styles:jL(s)}):null,m?p.createElement(pL,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function kL(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const CL=tL(Nj,NL);var Fd=p.forwardRef(function(e,t){return p.createElement($d,xn({},e,{ref:t,sideCar:CL}))});Fd.classNames=$d.classNames;var Yp=["Enter"," "],EL=["ArrowDown","PageUp","Home"],Rj=["ArrowUp","PageDown","End"],TL=[...EL,...Rj],RL={ltr:[...Yp,"ArrowRight"],rtl:[...Yp,"ArrowLeft"]},PL={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ic="Menu",[Ml,AL,IL]=Jl(ic),[$i,Pj]=Ft(ic,[IL,co,Ld]),Ud=co(),Aj=Ld(),[OL,Fi]=$i(ic),[ML,ac]=$i(ic),Ij=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:s,onOpenChange:i,modal:o=!0}=e,l=Ud(t),[c,u]=p.useState(null),d=p.useRef(!1),h=lt(i),f=go(s);return p.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),a.jsx(w1,{...l,children:a.jsx(OL,{scope:t,open:r,onOpenChange:h,content:c,onContentChange:u,children:a.jsx(ML,{scope:t,onClose:p.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:o,children:n})})})};Ij.displayName=ic;var DL="MenuAnchor",Fg=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=Ud(r);return a.jsx(wg,{...s,...n,ref:t})});Fg.displayName=DL;var Ug="MenuPortal",[LL,Oj]=$i(Ug,{forceMount:void 0}),Mj=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:s}=e,i=Fi(Ug,t);return a.jsx(LL,{scope:t,forceMount:r,children:a.jsx(Rt,{present:r||i.open,children:a.jsx(Xl,{asChild:!0,container:s,children:n})})})};Mj.displayName=Ug;var Or="MenuContent",[$L,Bg]=$i(Or),Dj=p.forwardRef((e,t)=>{const r=Oj(Or,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,i=Fi(Or,e.__scopeMenu),o=ac(Or,e.__scopeMenu);return a.jsx(Ml.Provider,{scope:e.__scopeMenu,children:a.jsx(Rt,{present:n||i.open,children:a.jsx(Ml.Slot,{scope:e.__scopeMenu,children:o.modal?a.jsx(FL,{...s,ref:t}):a.jsx(UL,{...s,ref:t})})})})}),FL=p.forwardRef((e,t)=>{const r=Fi(Or,e.__scopeMenu),n=p.useRef(null),s=Ne(t,n);return p.useEffect(()=>{const i=n.current;if(i)return $g(i)},[]),a.jsx(zg,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:H(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),UL=p.forwardRef((e,t)=>{const r=Fi(Or,e.__scopeMenu);return a.jsx(zg,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),BL=Ci("MenuContent.ScrollLock"),zg=p.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:b,...g}=e,v=Fi(Or,r),w=ac(Or,r),y=Ud(r),x=Aj(r),_=AL(r),[j,N]=p.useState(null),k=p.useRef(null),S=Ne(t,k,v.onContentChange),E=p.useRef(0),A=p.useRef(""),$=p.useRef(0),M=p.useRef(null),Q=p.useRef("right"),I=p.useRef(0),se=b?Fd:p.Fragment,V=b?{as:BL,allowPinchZoom:!0}:void 0,Z=T=>{var L,ue;const D=A.current+T,ee=_().filter(xe=>!xe.disabled),J=document.activeElement,de=(L=ee.find(xe=>xe.ref.current===J))==null?void 0:L.textValue,U=ee.map(xe=>xe.textValue),ce=ZL(U,D,de),ae=(ue=ee.find(xe=>xe.textValue===ce))==null?void 0:ue.ref.current;(function xe(ke){A.current=ke,window.clearTimeout(E.current),ke!==""&&(E.current=window.setTimeout(()=>xe(""),1e3))})(D),ae&&setTimeout(()=>ae.focus())};p.useEffect(()=>()=>window.clearTimeout(E.current),[]),Lg();const R=p.useCallback(T=>{var ee,J;return Q.current===((ee=M.current)==null?void 0:ee.side)&&t$(T,(J=M.current)==null?void 0:J.area)},[]);return a.jsx($L,{scope:r,searchRef:A,onItemEnter:p.useCallback(T=>{R(T)&&T.preventDefault()},[R]),onItemLeave:p.useCallback(T=>{var D;R(T)||((D=k.current)==null||D.focus(),N(null))},[R]),onTriggerLeave:p.useCallback(T=>{R(T)&&T.preventDefault()},[R]),pointerGraceTimerRef:$,onPointerGraceIntentChange:p.useCallback(T=>{M.current=T},[]),children:a.jsx(se,{...V,children:a.jsx(Dd,{asChild:!0,trapped:s,onMountAutoFocus:H(i,T=>{var D;T.preventDefault(),(D=k.current)==null||D.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:a.jsx(no,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:a.jsx(bj,{asChild:!0,...x,dir:w.dir,orientation:"vertical",loop:n,currentTabStopId:j,onCurrentTabStopIdChange:N,onEntryFocus:H(c,T=>{w.isUsingKeyboardRef.current||T.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(bg,{role:"menu","aria-orientation":"vertical","data-state":Xj(v.open),"data-radix-menu-content":"",dir:w.dir,...y,...g,ref:S,style:{outline:"none",...g.style},onKeyDown:H(g.onKeyDown,T=>{const ee=T.target.closest("[data-radix-menu-content]")===T.currentTarget,J=T.ctrlKey||T.altKey||T.metaKey,de=T.key.length===1;ee&&(T.key==="Tab"&&T.preventDefault(),!J&&de&&Z(T.key));const U=k.current;if(T.target!==U||!TL.includes(T.key))return;T.preventDefault();const ae=_().filter(L=>!L.disabled).map(L=>L.ref.current);Rj.includes(T.key)&&ae.reverse(),JL(ae)}),onBlur:H(e.onBlur,T=>{T.currentTarget.contains(T.target)||(window.clearTimeout(E.current),A.current="")}),onPointerMove:H(e.onPointerMove,Dl(T=>{const D=T.target,ee=I.current!==T.clientX;if(T.currentTarget.contains(D)&&ee){const J=T.clientX>I.current?"right":"left";Q.current=J,I.current=T.clientX}}))})})})})})})});Dj.displayName=Or;var zL="MenuGroup",qg=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return a.jsx(ne.div,{role:"group",...n,ref:t})});qg.displayName=zL;var qL="MenuLabel",Lj=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return a.jsx(ne.div,{...n,ref:t})});Lj.displayName=qL;var Gu="MenuItem",yw="menu.itemSelect",Bd=p.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...s}=e,i=p.useRef(null),o=ac(Gu,e.__scopeMenu),l=Bg(Gu,e.__scopeMenu),c=Ne(t,i),u=p.useRef(!1),d=()=>{const h=i.current;if(!r&&h){const f=new CustomEvent(yw,{bubbles:!0,cancelable:!0});h.addEventListener(yw,m=>n==null?void 0:n(m),{once:!0}),tg(h,f),f.defaultPrevented?u.current=!1:o.onClose()}};return a.jsx($j,{...s,ref:c,disabled:r,onClick:H(e.onClick,d),onPointerDown:h=>{var f;(f=e.onPointerDown)==null||f.call(e,h),u.current=!0},onPointerUp:H(e.onPointerUp,h=>{var f;u.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:H(e.onKeyDown,h=>{const f=l.searchRef.current!=="";r||f&&h.key===" "||Yp.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Bd.displayName=Gu;var $j=p.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...i}=e,o=Bg(Gu,r),l=Aj(r),c=p.useRef(null),u=Ne(t,c),[d,h]=p.useState(!1),[f,m]=p.useState("");return p.useEffect(()=>{const b=c.current;b&&m((b.textContent??"").trim())},[i.children]),a.jsx(Ml.ItemSlot,{scope:r,disabled:n,textValue:s??f,children:a.jsx(_j,{asChild:!0,...l,focusable:!n,children:a.jsx(ne.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:H(e.onPointerMove,Dl(b=>{n?o.onItemLeave(b):(o.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:H(e.onPointerLeave,Dl(b=>o.onItemLeave(b))),onFocus:H(e.onFocus,()=>h(!0)),onBlur:H(e.onBlur,()=>h(!1))})})})}),WL="MenuCheckboxItem",Fj=p.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...s}=e;return a.jsx(Wj,{scope:e.__scopeMenu,checked:r,children:a.jsx(Bd,{role:"menuitemcheckbox","aria-checked":Yu(r)?"mixed":r,...s,ref:t,"data-state":Vg(r),onSelect:H(s.onSelect,()=>n==null?void 0:n(Yu(r)?!0:!r),{checkForDefaultPrevented:!1})})})});Fj.displayName=WL;var Uj="MenuRadioGroup",[VL,HL]=$i(Uj,{value:void 0,onValueChange:()=>{}}),Bj=p.forwardRef((e,t)=>{const{value:r,onValueChange:n,...s}=e,i=lt(n);return a.jsx(VL,{scope:e.__scopeMenu,value:r,onValueChange:i,children:a.jsx(qg,{...s,ref:t})})});Bj.displayName=Uj;var zj="MenuRadioItem",qj=p.forwardRef((e,t)=>{const{value:r,...n}=e,s=HL(zj,e.__scopeMenu),i=r===s.value;return a.jsx(Wj,{scope:e.__scopeMenu,checked:i,children:a.jsx(Bd,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":Vg(i),onSelect:H(n.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,r)},{checkForDefaultPrevented:!1})})})});qj.displayName=zj;var Wg="MenuItemIndicator",[Wj,KL]=$i(Wg,{checked:!1}),Vj=p.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...s}=e,i=KL(Wg,r);return a.jsx(Rt,{present:n||Yu(i.checked)||i.checked===!0,children:a.jsx(ne.span,{...s,ref:t,"data-state":Vg(i.checked)})})});Vj.displayName=Wg;var GL="MenuSeparator",Hj=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return a.jsx(ne.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});Hj.displayName=GL;var YL="MenuArrow",Kj=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=Ud(r);return a.jsx(_g,{...s,...n,ref:t})});Kj.displayName=YL;var QL="MenuSub",[A6,Gj]=$i(QL),Wo="MenuSubTrigger",Yj=p.forwardRef((e,t)=>{const r=Fi(Wo,e.__scopeMenu),n=ac(Wo,e.__scopeMenu),s=Gj(Wo,e.__scopeMenu),i=Bg(Wo,e.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>d,[d]),p.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),a.jsx(Fg,{asChild:!0,...u,children:a.jsx($j,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":Xj(r.open),...e,ref:bd(t,s.onTriggerChange),onClick:h=>{var f;(f=e.onClick)==null||f.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:H(e.onPointerMove,Dl(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:H(e.onPointerLeave,Dl(h=>{var m,b;d();const f=(m=r.content)==null?void 0:m.getBoundingClientRect();if(f){const g=(b=r.content)==null?void 0:b.dataset.side,v=g==="right",w=v?-5:5,y=f[v?"left":"right"],x=f[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+w,y:h.clientY},{x:y,y:f.top},{x,y:f.top},{x,y:f.bottom},{x:y,y:f.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:H(e.onKeyDown,h=>{var m;const f=i.searchRef.current!=="";e.disabled||f&&h.key===" "||RL[n.dir].includes(h.key)&&(r.onOpenChange(!0),(m=r.content)==null||m.focus(),h.preventDefault())})})})});Yj.displayName=Wo;var Qj="MenuSubContent",Jj=p.forwardRef((e,t)=>{const r=Oj(Or,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,i=Fi(Or,e.__scopeMenu),o=ac(Or,e.__scopeMenu),l=Gj(Qj,e.__scopeMenu),c=p.useRef(null),u=Ne(t,c);return a.jsx(Ml.Provider,{scope:e.__scopeMenu,children:a.jsx(Rt,{present:n||i.open,children:a.jsx(Ml.Slot,{scope:e.__scopeMenu,children:a.jsx(zg,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:H(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:H(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:H(e.onKeyDown,d=>{var m;const h=d.currentTarget.contains(d.target),f=PL[o.dir].includes(d.key);h&&f&&(i.onOpenChange(!1),(m=l.trigger)==null||m.focus(),d.preventDefault())})})})})})});Jj.displayName=Qj;function Xj(e){return e?"open":"closed"}function Yu(e){return e==="indeterminate"}function Vg(e){return Yu(e)?"indeterminate":e?"checked":"unchecked"}function JL(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function XL(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function ZL(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=XL(e,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function e$(e,t){const{x:r,y:n}=e;let s=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,h=c.x,f=c.y;d>n!=f>n&&r<(h-u)*(n-d)/(f-d)+u&&(s=!s)}return s}function t$(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return e$(r,t)}function Dl(e){return t=>t.pointerType==="mouse"?e(t):void 0}var r$=Ij,n$=Fg,s$=Mj,i$=Dj,a$=qg,o$=Lj,l$=Bd,c$=Fj,u$=Bj,d$=qj,h$=Vj,f$=Hj,p$=Kj,m$=Yj,g$=Jj,zd="DropdownMenu",[v$,I6]=Ft(zd,[Pj]),Yt=Pj(),[y$,Zj]=v$(zd),eS=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:s,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=Yt(t),u=p.useRef(null),[d,h]=Lr({prop:s,defaultProp:i??!1,onChange:o,caller:zd});return a.jsx(y$,{scope:t,triggerId:Ir(),triggerRef:u,contentId:Ir(),open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(f=>!f),[h]),modal:l,children:a.jsx(r$,{...c,open:d,onOpenChange:h,dir:n,modal:l,children:r})})};eS.displayName=zd;var tS="DropdownMenuTrigger",rS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=e,i=Zj(tS,r),o=Yt(r);return a.jsx(n$,{asChild:!0,...o,children:a.jsx(ne.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:bd(t,i.triggerRef),onPointerDown:H(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:H(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});rS.displayName=tS;var x$="DropdownMenuPortal",nS=e=>{const{__scopeDropdownMenu:t,...r}=e,n=Yt(t);return a.jsx(s$,{...n,...r})};nS.displayName=x$;var sS="DropdownMenuContent",iS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Zj(sS,r),i=Yt(r),o=p.useRef(!1);return a.jsx(i$,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...n,ref:t,onCloseAutoFocus:H(e.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:H(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});iS.displayName=sS;var w$="DropdownMenuGroup",b$=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Yt(r);return a.jsx(a$,{...s,...n,ref:t})});b$.displayName=w$;var _$="DropdownMenuLabel",aS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Yt(r);return a.jsx(o$,{...s,...n,ref:t})});aS.displayName=_$;var j$="DropdownMenuItem",oS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Yt(r);return a.jsx(l$,{...s,...n,ref:t})});oS.displayName=j$;var S$="DropdownMenuCheckboxItem",lS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Yt(r);return a.jsx(c$,{...s,...n,ref:t})});lS.displayName=S$;var N$="DropdownMenuRadioGroup",k$=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Yt(r);return a.jsx(u$,{...s,...n,ref:t})});k$.displayName=N$;var C$="DropdownMenuRadioItem",cS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Yt(r);return a.jsx(d$,{...s,...n,ref:t})});cS.displayName=C$;var E$="DropdownMenuItemIndicator",uS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Yt(r);return a.jsx(h$,{...s,...n,ref:t})});uS.displayName=E$;var T$="DropdownMenuSeparator",dS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Yt(r);return a.jsx(f$,{...s,...n,ref:t})});dS.displayName=T$;var R$="DropdownMenuArrow",P$=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Yt(r);return a.jsx(p$,{...s,...n,ref:t})});P$.displayName=R$;var A$="DropdownMenuSubTrigger",hS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Yt(r);return a.jsx(m$,{...s,...n,ref:t})});hS.displayName=A$;var I$="DropdownMenuSubContent",fS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Yt(r);return a.jsx(g$,{...s,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});fS.displayName=I$;var O$=eS,M$=rS,D$=nS,pS=iS,mS=aS,gS=oS,vS=lS,yS=cS,xS=uS,wS=dS,bS=hS,_S=fS;const jS=O$,SS=M$,L$=p.forwardRef(({className:e,inset:t,children:r,...n},s)=>a.jsxs(bS,{ref:s,className:G("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...n,children:[r,a.jsx(og,{className:"ml-auto h-4 w-4"})]}));L$.displayName=bS.displayName;const $$=p.forwardRef(({className:e,...t},r)=>a.jsx(_S,{ref:r,className:G("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));$$.displayName=_S.displayName;const Hg=p.forwardRef(({className:e,sideOffset:t=4,...r},n)=>a.jsx(D$,{children:a.jsx(pS,{ref:n,sideOffset:t,className:G("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Hg.displayName=pS.displayName;const Ra=p.forwardRef(({className:e,inset:t,...r},n)=>a.jsx(gS,{ref:n,className:G("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...r}));Ra.displayName=gS.displayName;const F$=p.forwardRef(({className:e,children:t,checked:r,...n},s)=>a.jsxs(vS,{ref:s,className:G("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:r,...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(xS,{children:a.jsx(Li,{className:"h-4 w-4"})})}),t]}));F$.displayName=vS.displayName;const U$=p.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(yS,{ref:n,className:G("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(xS,{children:a.jsx(Y2,{className:"h-2 w-2 fill-current"})})}),t]}));U$.displayName=yS.displayName;const NS=p.forwardRef(({className:e,inset:t,...r},n)=>a.jsx(mS,{ref:n,className:G("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));NS.displayName=mS.displayName;const uu=p.forwardRef(({className:e,...t},r)=>a.jsx(wS,{ref:r,className:G("-mx-1 my-1 h-px bg-muted",e),...t}));uu.displayName=wS.displayName;function B$(){const[e,t]=p.useState("light");p.useEffect(()=>{const i=localStorage.getItem("blend-theme"),o=i==="dark"||i==="light"?i:i==="dark-aqua"||i==="dark-orange"?"dark":"light";t(o),r(o),i&&i!==o&&localStorage.setItem("blend-theme",o)},[]);const r=i=>{const o=document.documentElement;o.classList.remove("dark","theme-orange"),i==="dark"&&o.classList.add("dark","theme-orange")},n=i=>{t(i),r(i),localStorage.setItem("blend-theme",i)},s=()=>{switch(e){case"light":return a.jsx(nx,{className:"h-5 w-5"});case"dark":return a.jsx(rx,{className:"h-5 w-5"})}};return a.jsxs(jS,{children:[a.jsx(SS,{asChild:!0,children:a.jsxs(O,{variant:"ghost",size:"icon",className:"rounded-full bg-card/60 backdrop-blur-sm border border-border/50 hover:bg-card",children:[s(),a.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),a.jsxs(Hg,{align:"end",className:"min-w-[160px]",children:[a.jsxs(Ra,{onClick:()=>n("light"),className:e==="light"?"bg-accent":"",children:[a.jsx(nx,{className:"mr-2 h-4 w-4"}),"Light"]}),a.jsxs(Ra,{onClick:()=>n("dark"),className:e==="dark"?"bg-accent":"",children:[a.jsx(rx,{className:"mr-2 h-4 w-4"}),"Dark"]})]})]})}var kS={exports:{}},CS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xa=p;function z$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var q$=typeof Object.is=="function"?Object.is:z$,W$=Xa.useState,V$=Xa.useEffect,H$=Xa.useLayoutEffect,K$=Xa.useDebugValue;function G$(e,t){var r=t(),n=W$({inst:{value:r,getSnapshot:t}}),s=n[0].inst,i=n[1];return H$(function(){s.value=r,s.getSnapshot=t,lf(s)&&i({inst:s})},[e,r,t]),V$(function(){return lf(s)&&i({inst:s}),e(function(){lf(s)&&i({inst:s})})},[e]),K$(r),r}function lf(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!q$(e,r)}catch{return!0}}function Y$(e,t){return t()}var Q$=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Y$:G$;CS.useSyncExternalStore=Xa.useSyncExternalStore!==void 0?Xa.useSyncExternalStore:Q$;kS.exports=CS;var J$=kS.exports;function X$(){return J$.useSyncExternalStore(Z$,()=>!0,()=>!1)}function Z$(){return()=>{}}var Kg="Avatar",[e3,O6]=Ft(Kg),[t3,ES]=e3(Kg),TS=p.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[s,i]=p.useState("idle");return a.jsx(t3,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:a.jsx(ne.span,{...n,ref:t})})});TS.displayName=Kg;var RS="AvatarImage",PS=p.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...i}=e,o=ES(RS,r),l=r3(n,i),c=lt(u=>{s(u),o.onImageLoadingStatusChange(u)});return ct(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(ne.img,{...i,ref:t,src:n}):null});PS.displayName=RS;var AS="AvatarFallback",IS=p.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...s}=e,i=ES(AS,r),[o,l]=p.useState(n===void 0);return p.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&i.imageLoadingStatus!=="loaded"?a.jsx(ne.span,{...s,ref:t}):null});IS.displayName=AS;function xw(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function r3(e,{referrerPolicy:t,crossOrigin:r}){const n=X$(),s=p.useRef(null),i=n?(s.current||(s.current=new window.Image),s.current):null,[o,l]=p.useState(()=>xw(i,e));return ct(()=>{l(xw(i,e))},[i,e]),ct(()=>{const c=h=>()=>{l(h)};if(!i)return;const u=c("loaded"),d=c("error");return i.addEventListener("load",u),i.addEventListener("error",d),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,r,t]),o}var OS=TS,MS=PS,DS=IS;const nn=p.forwardRef(({className:e,...t},r)=>a.jsx(OS,{ref:r,className:G("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));nn.displayName=OS.displayName;const sn=p.forwardRef(({className:e,...t},r)=>a.jsx(MS,{ref:r,className:G("aspect-square h-full w-full",e),...t}));sn.displayName=MS.displayName;const an=p.forwardRef(({className:e,...t},r)=>a.jsx(DS,{ref:r,className:G("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));an.displayName=DS.displayName;const LS="https://bapi.vdsai.cloud";async function n3(){var s;const{data:e}=await P.auth.getSession(),t=(s=e.session)==null?void 0:s.access_token;if(!t)throw new Error("Not authenticated");const r=`${LS.replace(/\/$/,"")}/api/credits`,n=await fetch(r,{headers:{Authorization:`Bearer ${t}`}});if(!n.ok)throw new Error("Unable to load credits");return n.json()}function s3(e){return Le({queryKey:["ai-credits"],queryFn:n3,enabled:e&&!!LS,staleTime:6e4,refetchInterval:6e4})}function i3(){var u;const{user:e,profile:t,signOut:r,isLoading:n}=Se(),s=s3(!!e);if(n)return a.jsx("div",{className:"h-9 w-9 rounded-full bg-muted animate-pulse"});if(!e)return a.jsx(ge,{to:"/auth",children:a.jsxs(O,{variant:"outline",size:"sm",className:"gap-2",children:[a.jsx(hp,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Sign In"})]})});const i=(t==null?void 0:t.display_name)||((u=e.email)==null?void 0:u.split("@")[0])||"User",o=i.slice(0,2).toUpperCase(),l=s.data,c=l!=null&&l.bypass?100:l?Math.min(100,Math.max(0,l.remaining/Math.max(1,l.limit)*100)):0;return a.jsxs(jS,{children:[a.jsx(SS,{asChild:!0,children:a.jsx(O,{variant:"ghost",className:"relative h-9 w-9 rounded-full",children:a.jsxs(nn,{className:"h-9 w-9",children:[a.jsx(sn,{src:(t==null?void 0:t.avatar_url)||void 0,alt:i}),a.jsx(an,{className:"bg-primary/10 text-primary",children:o})]})})}),a.jsxs(Hg,{className:"w-56",align:"end",forceMount:!0,children:[a.jsx(NS,{className:"font-normal",children:a.jsxs("div",{className:"flex flex-col space-y-1",children:[a.jsx("p",{className:"text-sm font-medium leading-none",children:i}),a.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.email})]})}),a.jsx(uu,{}),a.jsxs("div",{className:"px-3 py-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[a.jsx("span",{children:"AI credits"}),a.jsx("span",{children:l?l.bypass?"Unlimited":`${l.remaining}/${l.limit}`:""})]}),a.jsx("div",{className:"mt-2 h-2 w-full rounded-full bg-muted",children:a.jsx("div",{className:"h-2 rounded-full bg-primary transition-all",style:{width:`${c}%`}})}),a.jsx("p",{className:"mt-1 text-[10px] text-muted-foreground",children:s.isLoading?"Loading credits":s.isError?"Credits unavailable":"Resets daily"})]}),a.jsx(uu,{}),a.jsx(Ra,{asChild:!0,children:a.jsxs(ge,{to:`/u/${e.id}`,className:"flex items-center cursor-pointer",children:[a.jsx(hp,{className:"mr-2 h-4 w-4"}),"My Profile"]})}),a.jsx(Ra,{asChild:!0,children:a.jsxs(ge,{to:"/settings",className:"flex items-center cursor-pointer",children:[a.jsx(z_,{className:"mr-2 h-4 w-4"}),"Settings"]})}),a.jsx(uu,{}),a.jsxs(Ra,{onClick:()=>r(),className:"text-destructive focus:text-destructive cursor-pointer",children:[a.jsx(rR,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})]})}var qd="Dialog",[$S,M6]=Ft(qd),[a3,cn]=$S(qd),FS=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:o=!0}=e,l=p.useRef(null),c=p.useRef(null),[u,d]=Lr({prop:n,defaultProp:s??!1,onChange:i,caller:qd});return a.jsx(a3,{scope:t,triggerRef:l,contentRef:c,contentId:Ir(),titleId:Ir(),descriptionId:Ir(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:o,children:r})};FS.displayName=qd;var US="DialogTrigger",BS=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=cn(US,r),i=Ne(t,s.triggerRef);return a.jsx(ne.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Qg(s.open),...n,ref:i,onClick:H(e.onClick,s.onOpenToggle)})});BS.displayName=US;var Gg="DialogPortal",[o3,zS]=$S(Gg,{forceMount:void 0}),qS=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,i=cn(Gg,t);return a.jsx(o3,{scope:t,forceMount:r,children:p.Children.map(n,o=>a.jsx(Rt,{present:r||i.open,children:a.jsx(Xl,{asChild:!0,container:s,children:o})}))})};qS.displayName=Gg;var Qu="DialogOverlay",WS=p.forwardRef((e,t)=>{const r=zS(Qu,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=cn(Qu,e.__scopeDialog);return i.modal?a.jsx(Rt,{present:n||i.open,children:a.jsx(c3,{...s,ref:t})}):null});WS.displayName=Qu;var l3=Ci("DialogOverlay.RemoveScroll"),c3=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=cn(Qu,r);return a.jsx(Fd,{as:l3,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(ne.div,{"data-state":Qg(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Pi="DialogContent",VS=p.forwardRef((e,t)=>{const r=zS(Pi,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=cn(Pi,e.__scopeDialog);return a.jsx(Rt,{present:n||i.open,children:i.modal?a.jsx(u3,{...s,ref:t}):a.jsx(d3,{...s,ref:t})})});VS.displayName=Pi;var u3=p.forwardRef((e,t)=>{const r=cn(Pi,e.__scopeDialog),n=p.useRef(null),s=Ne(t,r.contentRef,n);return p.useEffect(()=>{const i=n.current;if(i)return $g(i)},[]),a.jsx(HS,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:H(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:H(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:H(e.onFocusOutside,i=>i.preventDefault())})}),d3=p.forwardRef((e,t)=>{const r=cn(Pi,e.__scopeDialog),n=p.useRef(!1),s=p.useRef(!1);return a.jsx(HS,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),HS=p.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=e,l=cn(Pi,r),c=p.useRef(null),u=Ne(t,c);return Lg(),a.jsxs(a.Fragment,{children:[a.jsx(Dd,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(no,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Qg(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(h3,{titleId:l.titleId}),a.jsx(p3,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Yg="DialogTitle",KS=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=cn(Yg,r);return a.jsx(ne.h2,{id:s.titleId,...n,ref:t})});KS.displayName=Yg;var GS="DialogDescription",YS=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=cn(GS,r);return a.jsx(ne.p,{id:s.descriptionId,...n,ref:t})});YS.displayName=GS;var QS="DialogClose",JS=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=cn(QS,r);return a.jsx(ne.button,{type:"button",...n,ref:t,onClick:H(e.onClick,()=>s.onOpenChange(!1))})});JS.displayName=QS;function Qg(e){return e?"open":"closed"}var XS="DialogTitleWarning",[D6,ZS]=XT(XS,{contentName:Pi,titleName:Yg,docsSlug:"dialog"}),h3=({titleId:e})=>{const t=ZS(XS),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},f3="DialogDescriptionWarning",p3=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ZS(f3).contentName}}.`;return p.useEffect(()=>{var i;const s=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},m3=FS,g3=BS,v3=qS,eN=WS,tN=VS,rN=KS,nN=YS,y3=JS;const Jg=m3,x3=g3,w3=v3,sN=p.forwardRef(({className:e,...t},r)=>a.jsx(eN,{ref:r,className:G("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));sN.displayName=eN.displayName;const Wd=p.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(w3,{children:[a.jsx(sN,{}),a.jsxs(tN,{ref:n,className:G("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,a.jsxs(y3,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[a.jsx(ir,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Wd.displayName=tN.displayName;const Xg=({className:e,...t})=>a.jsx("div",{className:G("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Xg.displayName="DialogHeader";const Zg=p.forwardRef(({className:e,...t},r)=>a.jsx(rN,{ref:r,className:G("text-lg font-semibold leading-none tracking-tight",e),...t}));Zg.displayName=rN.displayName;const b3=p.forwardRef(({className:e,...t},r)=>a.jsx(nN,{ref:r,className:G("text-sm text-muted-foreground",e),...t}));b3.displayName=nN.displayName;const K=p.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:G("rounded-xl border bg-card/80 text-card-foreground shadow-soft backdrop-blur-sm transition-all duration-300 hover:shadow-soft-md",e),...t}));K.displayName="Card";const _3=p.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:G("rounded-xl border border-border/50 bg-card/60 text-card-foreground shadow-soft backdrop-blur-glass transition-all duration-400 hover:shadow-soft-lg hover:bg-card/70",e),...t}));_3.displayName="GlassCard";const Ye=p.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:G("flex flex-col space-y-1.5 p-6",e),...t}));Ye.displayName="CardHeader";const mt=p.forwardRef(({className:e,...t},r)=>a.jsx("h3",{ref:r,className:G("text-2xl font-semibold leading-none tracking-tight",e),...t}));mt.displayName="CardTitle";const sl=p.forwardRef(({className:e,...t},r)=>a.jsx("p",{ref:r,className:G("text-sm text-muted-foreground",e),...t}));sl.displayName="CardDescription";const Y=p.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:G("p-6 pt-0",e),...t}));Y.displayName="CardContent";const Vd=p.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:G("flex items-center p-6 pt-0",e),...t}));Vd.displayName="CardFooter";const j3=Sd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Pe({className:e,variant:t,...r}){return a.jsx("div",{className:G(j3({variant:t}),e),...r})}const S3=[{label:"Generate a Library",hint:"Describe what you need in a few words."},{label:"Build Your Blueprint",hint:"Pick items, add steps, and add context."},{label:"Review + Publish",hint:"Get an AI review, then share with the community."},{label:"Follow Tags",hint:"Shape your feed and discover similar routines."},{label:"Explore the Wall",hint:"Browse and save blueprints from others."}],N3=[{title:"Libraries",description:"Libraries are smart ingredient lists. Generate one, then use it to build a Blueprint.",icon:en,bullets:["Generate from a short prompt","Customize categories and items","Reuse across blueprints"]},{title:"Blueprints",description:"Blueprints are step-by-step routines. Build, review, and publish when ready.",icon:Ar,bullets:["Organize steps visually","Add context for each item","Publish or keep private"]},{title:"Tags",description:"Tags connect the community. Follow them to tailor what you see.",icon:lg,bullets:["Follow tags you like","See trends on the wall","Stay focused on your goals"]},{title:"Community",description:"Explore, like, and learn from other peoples blueprints.",icon:tc,bullets:["Discover new routines","Save favorites","Share your own"]}];function k3({open:e,onOpenChange:t}){return a.jsx(Jg,{open:e,onOpenChange:t,children:a.jsx(Wd,{className:"max-w-5xl w-[95vw] max-h-[85vh] overflow-y-auto border border-border/60 bg-background/95 p-0",children:a.jsxs("div",{className:"relative w-full",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 via-background to-accent/10"}),a.jsxs("div",{className:"relative w-full",children:[a.jsxs("div",{className:"px-8 pt-8 pb-4 border-b border-border/60 bg-background/60 backdrop-blur sticky top-0 z-10",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-2xl bg-primary/15 text-primary flex items-center justify-center",children:a.jsx(Kn,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-semibold",children:"Welcome to Blueprints"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"A friendly guide to the flow, concepts, and how to get started."})]})]}),a.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 text-xs",children:[a.jsx(Pe,{variant:"secondary",children:"Libraries"}),a.jsx(Pe,{variant:"secondary",children:"Blueprints"}),a.jsx(Pe,{variant:"secondary",children:"Tags"}),a.jsx(Pe,{variant:"secondary",children:"Community"})]})]}),a.jsx("div",{className:"px-8 py-6",children:a.jsxs("div",{className:"space-y-8",children:[a.jsx(K,{className:"border border-border/60 bg-background/80",children:a.jsxs(Y,{className:"p-6 space-y-2",children:[a.jsx("p",{className:"text-sm font-semibold",children:"Lets get oriented"}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Heres the goal: take a simple idea, break it into parts, and turn it into a stepbystep routine you can actually follow. Libraries are your ingredients, Blueprints are your instructions, and the community is your feedback loop. As we go, youll refine your routine, learn from others, and end up with something you can reuse anytime."})]})}),a.jsx(K,{className:"border border-border/60 bg-background/70",children:a.jsxs(Y,{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-9 w-9 rounded-xl bg-primary/10 text-primary flex items-center justify-center",children:a.jsx(en,{className:"h-4 w-4"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold",children:"The Flow"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"From idea  library  build  blueprint  community"})]})]}),a.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:S3.map(r=>a.jsxs("div",{className:"rounded-lg border border-border/60 bg-muted/30 p-3",children:[a.jsx("p",{className:"text-sm font-medium",children:r.label}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.hint})]},r.label))})]})}),a.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:N3.map(r=>{const n=r.icon;return a.jsx(K,{className:"border border-border/60 bg-background/80",children:a.jsxs(Y,{className:"p-6 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-9 w-9 rounded-xl bg-primary/10 text-primary flex items-center justify-center",children:a.jsx(n,{className:"h-4 w-4"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:r.title}),a.jsx("p",{className:"text-xs text-muted-foreground",children:r.description})]})]}),a.jsx("div",{className:"space-y-2",children:r.bullets.map(s=>a.jsxs("div",{className:"text-xs text-muted-foreground",children:[" ",s]},s))})]})},r.title)})}),a.jsx(K,{className:"border border-border/60 bg-background/80",children:a.jsxs(Y,{className:"p-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold",children:"Tip for firsttime users"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Start with Generate Library, then build a blueprint you can refine later."})]}),a.jsx(O,{variant:"outline",size:"sm",onClick:()=>t(!1),children:"Lets go"})]})})]})})]})]})})})}function St({actions:e,showFloatingNav:t=!0}){const{user:r}=Se(),[n,s]=p.useState(!1),i=r?"all":"public";return a.jsxs(a.Fragment,{children:[a.jsx("header",{className:"sticky top-0 z-50 border-b border-border/50 bg-card/70 backdrop-blur-glass",children:a.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(ge,{to:"/",className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-primary to-primary/60 flex items-center justify-center glow-primary",children:a.jsx(ag,{className:"h-4 w-4 text-primary-foreground"})}),a.jsx("span",{className:"text-lg font-semibold tracking-tight",children:"Blueprints"}),a.jsx("span",{className:"ml-1 rounded-full border border-primary/30 bg-primary/10 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-primary",children:"V_1"})]}),a.jsx("div",{className:"hidden sm:block ml-3",children:a.jsx(ow,{variant:"header",mode:i})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[e,a.jsx(O,{type:"button",variant:"ghost",size:"icon",onClick:()=>s(!0),className:"h-9 w-9 rounded-full border border-border/60 bg-background/60 text-muted-foreground hover:text-foreground","aria-label":"Open help",children:a.jsx(ec,{className:"h-4 w-4"})}),a.jsx(B$,{}),a.jsx(i3,{})]})]})}),t&&a.jsx("div",{className:"sm:hidden",children:a.jsx(ow,{variant:"floating",mode:i})}),a.jsx(k3,{open:n,onOpenChange:s})]})}function C3(){return Le({queryKey:["community-stats"],queryFn:async()=>{const[e,t,r]=await Promise.all([P.from("blueprints").select("id",{count:"exact",head:!0}).eq("is_public",!0),P.from("inventories").select("id",{count:"exact",head:!0}).eq("is_public",!0),P.from("tags").select("id",{count:"exact",head:!0})]);return{totalBlueprints:e.count??0,totalInventories:t.count??0,activeTags:r.count??0}},staleTime:6e4})}function E3(e=4){return Le({queryKey:["top-blueprints",e],queryFn:async()=>{const{data:t,error:r}=await P.from("blueprints").select("id, title, likes_count, created_at, creator_user_id").eq("is_public",!0).order("likes_count",{ascending:!1}).limit(e);if(r)throw r;if(!t||t.length===0)return[];const n=[...new Set(t.map(f=>f.creator_user_id))],{data:s}=await P.from("profiles").select("user_id, display_name").in("user_id",n),i=new Map((s||[]).map(f=>[f.user_id,f])),o=t.map(f=>f.id),{data:l}=await P.from("blueprint_tags").select("blueprint_id, tag_id").in("blueprint_id",o),c=[...new Set((l||[]).map(f=>f.tag_id))],{data:u}=c.length>0?await P.from("tags").select("id, slug").in("id",c):{data:[]},d=new Map((u||[]).map(f=>[f.id,f.slug])),h=new Map;return(l||[]).forEach(f=>{const m=h.get(f.blueprint_id)||[],b=d.get(f.tag_id);b&&m.push(b),h.set(f.blueprint_id,m)}),t.map(f=>({id:f.id,title:f.title,likes_count:f.likes_count,created_at:f.created_at,creator_profile:i.get(f.creator_user_id)||null,tags:(h.get(f.id)||[]).map(m=>({slug:m}))}))},staleTime:6e4})}function T3(e=8){return Le({queryKey:["featured-tags",e],queryFn:async()=>{const{data:t,error:r}=await P.from("tags").select("id, slug, follower_count").order("follower_count",{ascending:!1}).limit(e);if(r)throw r;return t||[]},staleTime:6e4})}function R3(){const{data:e,isLoading:t}=C3(),r=[{label:"Blueprints",value:(e==null?void 0:e.totalBlueprints)??0,icon:Nd},{label:"Libraries",value:(e==null?void 0:e.totalInventories)??0,icon:Ar},{label:"Topics",value:(e==null?void 0:e.activeTags)??0,icon:kd}];return a.jsx("div",{className:"flex flex-wrap items-center justify-center gap-6 sm:gap-10 py-6 px-4 rounded-xl border border-border/40 bg-card/40 backdrop-blur-sm",children:r.map(n=>a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(n.icon,{className:"h-4 w-4"}),a.jsx("span",{className:"font-mono text-lg tabular-nums text-foreground",children:t?"":n.value}),a.jsx("span",{className:"text-sm",children:n.label})]},n.label))})}function Ve(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function qs(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const iN=6048e5,P3=864e5,qc=43200,ww=1440;let A3={};function oc(){return A3}function Ll(e,t){var l,c,u,d;const r=oc(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Ve(e),i=s.getDay(),o=(i<n?7:0)+i-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Ju(e){return Ll(e,{weekStartsOn:1})}function aN(e){const t=Ve(e),r=t.getFullYear(),n=qs(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=Ju(n),i=qs(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Ju(i);return t.getTime()>=s.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function bw(e){const t=Ve(e);return t.setHours(0,0,0,0),t}function Xu(e){const t=Ve(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function I3(e,t){const r=bw(e),n=bw(t),s=+r-Xu(r),i=+n-Xu(n);return Math.round((s-i)/P3)}function O3(e){const t=aN(e),r=qs(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Ju(r)}function du(e,t){const r=Ve(e),n=Ve(t),s=r.getTime()-n.getTime();return s<0?-1:s>0?1:s}function M3(e){return qs(e,Date.now())}function D3(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function L3(e){if(!D3(e)&&typeof e!="number")return!1;const t=Ve(e);return!isNaN(Number(t))}function $3(e,t){const r=Ve(e),n=Ve(t),s=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return s*12+i}function F3(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function U3(e,t){return+Ve(e)-+Ve(t)}function B3(e){const t=Ve(e);return t.setHours(23,59,59,999),t}function z3(e){const t=Ve(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function q3(e){const t=Ve(e);return+B3(t)==+z3(t)}function W3(e,t){const r=Ve(e),n=Ve(t),s=du(r,n),i=Math.abs($3(r,n));let o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*i);let l=du(r,n)===-s;q3(Ve(e))&&i===1&&du(e,n)===1&&(l=!1),o=s*(i-Number(l))}return o===0?0:o}function V3(e,t,r){const n=U3(e,t)/1e3;return F3(r==null?void 0:r.roundingMethod)(n)}function H3(e){const t=Ve(e),r=qs(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const K3={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},G3=(e,t,r)=>{let n;const s=K3[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function cf(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Y3={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Q3={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},J3={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},X3={date:cf({formats:Y3,defaultWidth:"full"}),time:cf({formats:Q3,defaultWidth:"full"}),dateTime:cf({formats:J3,defaultWidth:"full"})},Z3={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},e5=(e,t,r,n)=>Z3[e];function Io(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const t5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},r5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},n5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},s5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},i5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},a5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},o5=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},l5={ordinalNumber:o5,era:Io({values:t5,defaultWidth:"wide"}),quarter:Io({values:r5,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Io({values:n5,defaultWidth:"wide"}),day:Io({values:s5,defaultWidth:"wide"}),dayPeriod:Io({values:i5,defaultWidth:"wide",formattingValues:a5,defaultFormattingWidth:"wide"})};function Oo(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?u5(l,h=>h.test(o)):c5(l,h=>h.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function c5(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function u5(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function d5(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const h5=/^(\d+)(th|st|nd|rd)?/i,f5=/\d+/i,p5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},m5={any:[/^b/i,/^(a|c)/i]},g5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},v5={any:[/1/i,/2/i,/3/i,/4/i]},y5={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},x5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},w5={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},b5={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},_5={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},j5={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},S5={ordinalNumber:d5({matchPattern:h5,parsePattern:f5,valueCallback:e=>parseInt(e,10)}),era:Oo({matchPatterns:p5,defaultMatchWidth:"wide",parsePatterns:m5,defaultParseWidth:"any"}),quarter:Oo({matchPatterns:g5,defaultMatchWidth:"wide",parsePatterns:v5,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Oo({matchPatterns:y5,defaultMatchWidth:"wide",parsePatterns:x5,defaultParseWidth:"any"}),day:Oo({matchPatterns:w5,defaultMatchWidth:"wide",parsePatterns:b5,defaultParseWidth:"any"}),dayPeriod:Oo({matchPatterns:_5,defaultMatchWidth:"any",parsePatterns:j5,defaultParseWidth:"any"})},oN={code:"en-US",formatDistance:G3,formatLong:X3,formatRelative:e5,localize:l5,match:S5,options:{weekStartsOn:0,firstWeekContainsDate:1}};function N5(e){const t=Ve(e);return I3(t,H3(t))+1}function k5(e){const t=Ve(e),r=+Ju(t)-+O3(t);return Math.round(r/iN)+1}function lN(e,t){var d,h,f,m;const r=Ve(e),n=r.getFullYear(),s=oc(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=qs(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=Ll(o,t),c=qs(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const u=Ll(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function C5(e,t){var l,c,u,d;const r=oc(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=lN(e,t),i=qs(e,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),Ll(i,t)}function E5(e,t){const r=Ve(e),n=+Ll(r,t)-+C5(r,t);return Math.round(n/iN)+1}function ze(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const ss={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return ze(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):ze(r+1,2)},d(e,t){return ze(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return ze(e.getHours()%12||12,t.length)},H(e,t){return ze(e.getHours(),t.length)},m(e,t){return ze(e.getMinutes(),t.length)},s(e,t){return ze(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return ze(s,t.length)}},na={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_w={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return ss.y(e,t)},Y:function(e,t,r,n){const s=lN(e,n),i=s>0?s:1-s;if(t==="YY"){const o=i%100;return ze(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):ze(i,t.length)},R:function(e,t){const r=aN(e);return ze(r,t.length)},u:function(e,t){const r=e.getFullYear();return ze(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return ze(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return ze(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return ss.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return ze(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=E5(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):ze(s,t.length)},I:function(e,t,r){const n=k5(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):ze(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):ss.d(e,t)},D:function(e,t,r){const n=N5(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):ze(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return ze(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return ze(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return ze(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=na.noon:n===0?s=na.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=na.evening:n>=12?s=na.afternoon:n>=4?s=na.morning:s=na.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return ss.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):ss.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):ze(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):ze(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):ss.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):ss.s(e,t)},S:function(e,t){return ss.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Sw(n);case"XXXX":case"XX":return ni(n);case"XXXXX":case"XXX":default:return ni(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return Sw(n);case"xxxx":case"xx":return ni(n);case"xxxxx":case"xxx":default:return ni(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+jw(n,":");case"OOOO":default:return"GMT"+ni(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+jw(n,":");case"zzzz":default:return"GMT"+ni(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return ze(n,t.length)},T:function(e,t,r){const n=e.getTime();return ze(n,t.length)}};function jw(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+t+ze(i,2)}function Sw(e,t){return e%60===0?(e>0?"-":"+")+ze(Math.abs(e)/60,2):ni(e,t)}function ni(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=ze(Math.trunc(n/60),2),i=ze(n%60,2);return r+s+t+i}const Nw=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},cN=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},T5=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return Nw(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Nw(n,t)).replace("{{time}}",cN(s,t))},R5={p:cN,P:T5},P5=/^D+$/,A5=/^Y+$/,I5=["D","DD","YY","YYYY"];function O5(e){return P5.test(e)}function M5(e){return A5.test(e)}function D5(e,t,r){const n=L5(e,t,r);if(console.warn(n),I5.includes(e))throw new RangeError(n)}function L5(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const $5=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,F5=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,U5=/^'([^]*?)'?$/,B5=/''/g,z5=/[a-zA-Z]/;function q5(e,t,r){var d,h,f,m;const n=oc(),s=n.locale??oN,i=n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=n.weekStartsOn??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,l=Ve(e);if(!L3(l))throw new RangeError("Invalid time value");let c=t.match(F5).map(b=>{const g=b[0];if(g==="p"||g==="P"){const v=R5[g];return v(b,s.formatLong)}return b}).join("").match($5).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const g=b[0];if(g==="'")return{isToken:!1,value:W5(b)};if(_w[g])return{isToken:!0,value:b};if(g.match(z5))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:b}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(b=>{if(!b.isToken)return b.value;const g=b.value;(M5(g)||O5(g))&&D5(g,t,String(e));const v=_w[g[0]];return v(l,g,s.localize,u)}).join("")}function W5(e){const t=e.match(U5);return t?t[1].replace(B5,"'"):e}function V5(e,t,r){const n=oc(),s=(r==null?void 0:r.locale)??n.locale??oN,i=2520,o=du(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,u;o>0?(c=Ve(t),u=Ve(e)):(c=Ve(e),u=Ve(t));const d=V3(u,c),h=(Xu(u)-Xu(c))/1e3,f=Math.round((d-h)/60);let m;if(f<2)return r!=null&&r.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,l):d<10?s.formatDistance("lessThanXSeconds",10,l):d<20?s.formatDistance("lessThanXSeconds",20,l):d<40?s.formatDistance("halfAMinute",0,l):d<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):f===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",f,l);if(f<45)return s.formatDistance("xMinutes",f,l);if(f<90)return s.formatDistance("aboutXHours",1,l);if(f<ww){const b=Math.round(f/60);return s.formatDistance("aboutXHours",b,l)}else{if(f<i)return s.formatDistance("xDays",1,l);if(f<qc){const b=Math.round(f/ww);return s.formatDistance("xDays",b,l)}else if(f<qc*2)return m=Math.round(f/qc),s.formatDistance("aboutXMonths",m,l)}if(m=W3(u,c),m<12){const b=Math.round(f/qc);return s.formatDistance("xMonths",b,l)}else{const b=m%12,g=Math.trunc(m/12);return b<3?s.formatDistance("aboutXYears",g,l):b<9?s.formatDistance("overXYears",g,l):s.formatDistance("almostXYears",g+1,l)}}function Ai(e,t){return V5(e,M3(e),t)}function H5(){const{data:e,isLoading:t}=E3(4);return t?a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Top Blueprints"}),a.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from({length:4}).map((r,n)=>a.jsx(K,{className:"animate-pulse bg-card/50",children:a.jsx(Y,{className:"p-4 h-28"})},n))})]}):!e||e.length===0?null:a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Top Blueprints"}),a.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:e.map(r=>{var n;return a.jsx(ge,{to:`/blueprint/${r.id}`,children:a.jsx(K,{className:"group h-full bg-card/60 hover:bg-card/80 transition-colors cursor-pointer",children:a.jsxs(Y,{className:"p-4 space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("h3",{className:"font-medium leading-tight line-clamp-2 group-hover:text-primary transition-colors",children:r.title}),a.jsxs("div",{className:"flex items-center gap-1 shrink-0 text-muted-foreground text-sm",children:[a.jsx(Dt,{className:"h-3.5 w-3.5"}),a.jsx("span",{className:"tabular-nums",children:r.likes_count})]})]}),a.jsx("div",{className:"flex flex-wrap gap-1.5",children:r.tags.slice(0,3).map(s=>a.jsxs(Pe,{variant:"secondary",className:"text-xs",children:["#",s.slug]},s.slug))}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["by ",((n=r.creator_profile)==null?void 0:n.display_name)||"Anonymous"," "," ",Ai(new Date(r.created_at),{addSuffix:!0})]})]})})},r.id)})})]})}function K5(){const{data:e,isLoading:t}=T3(8);return t?a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Trending Topics"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:6}).map((r,n)=>a.jsx("div",{className:"h-8 w-20 rounded-full bg-muted animate-pulse"},n))})]}):!e||e.length===0?null:a.jsxs("section",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Trending Topics"}),a.jsx(ge,{to:"/tags",className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:"View all "})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.map(r=>a.jsx(ge,{to:`/wall?tag=${r.slug}`,children:a.jsxs(Pe,{variant:"outline",className:"gap-1.5 px-3 py-1.5 text-sm hover:bg-accent hover:text-accent-foreground transition-colors cursor-pointer",children:[a.jsx(kd,{className:"h-3 w-3"}),r.slug,r.follower_count>0&&a.jsxs("span",{className:"flex items-center gap-0.5 text-muted-foreground ml-1",children:[a.jsx(tc,{className:"h-3 w-3"}),a.jsx("span",{className:"text-xs tabular-nums",children:r.follower_count})]})]})},r.id))})]})}function ev(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Hd="Checkbox",[G5,L6]=Ft(Hd),[Y5,tv]=G5(Hd);function Q5(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:s,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=e,[f,m]=Lr({prop:r,defaultProp:s??!1,onChange:c,caller:Hd}),[b,g]=p.useState(null),[v,w]=p.useState(null),y=p.useRef(!1),x=b?!!o||!!b.closest("form"):!0,_={checked:f,disabled:i,setChecked:m,control:b,setControl:g,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:y,required:u,defaultChecked:Ds(s)?!1:s,isFormControl:x,bubbleInput:v,setBubbleInput:w};return a.jsx(Y5,{scope:t,..._,children:J5(h)?h(_):n})}var uN="CheckboxTrigger",dN=p.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},s)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:b}=tv(uN,e),g=Ne(s,d),v=p.useRef(c);return p.useEffect(()=>{const w=i==null?void 0:i.form;if(w){const y=()=>h(v.current);return w.addEventListener("reset",y),()=>w.removeEventListener("reset",y)}},[i,h]),a.jsx(ne.button,{type:"button",role:"checkbox","aria-checked":Ds(c)?"mixed":c,"aria-required":u,"data-state":gN(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:g,onKeyDown:H(t,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:H(r,w=>{h(y=>Ds(y)?!0:!y),b&&m&&(f.current=w.isPropagationStopped(),f.current||w.stopPropagation())})})});dN.displayName=uN;var rv=p.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...h}=e;return a.jsx(Q5,{__scopeCheckbox:r,checked:s,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:n,form:d,value:c,internal_do_not_use_render:({isFormControl:f})=>a.jsxs(a.Fragment,{children:[a.jsx(dN,{...h,ref:t,__scopeCheckbox:r}),f&&a.jsx(mN,{__scopeCheckbox:r})]})})});rv.displayName=Hd;var hN="CheckboxIndicator",fN=p.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...s}=e,i=tv(hN,r);return a.jsx(Rt,{present:n||Ds(i.checked)||i.checked===!0,children:a.jsx(ne.span,{"data-state":gN(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});fN.displayName=hN;var pN="CheckboxBubbleInput",mN=p.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:f,setBubbleInput:m}=tv(pN,e),b=Ne(r,m),g=ev(i),v=vg(n);p.useEffect(()=>{const y=f;if(!y)return;const x=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(x,"checked").set,N=!s.current;if(g!==i&&j){const k=new Event("click",{bubbles:N});y.indeterminate=Ds(i),j.call(y,Ds(i)?!1:i),y.dispatchEvent(k)}},[f,g,i,s]);const w=p.useRef(Ds(i)?!1:i);return a.jsx(ne.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??w.current,required:l,disabled:c,name:u,value:d,form:h,...t,tabIndex:-1,ref:b,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});mN.displayName=pN;function J5(e){return typeof e=="function"}function Ds(e){return e==="indeterminate"}function gN(e){return Ds(e)?"indeterminate":e?"checked":"unchecked"}const nv=p.forwardRef(({className:e,...t},r)=>a.jsx(rv,{ref:r,className:G("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:a.jsx(fN,{className:G("flex items-center justify-center text-current"),children:a.jsx(Li,{className:"h-4 w-4"})})}));nv.displayName=rv.displayName;var Kd="Collapsible",[X5,vN]=Ft(Kd),[Z5,sv]=X5(Kd),yN=p.forwardRef((e,t)=>{const{__scopeCollapsible:r,open:n,defaultOpen:s,disabled:i,onOpenChange:o,...l}=e,[c,u]=Lr({prop:n,defaultProp:s??!1,onChange:o,caller:Kd});return a.jsx(Z5,{scope:r,disabled:i,contentId:Ir(),open:c,onOpenToggle:p.useCallback(()=>u(d=>!d),[u]),children:a.jsx(ne.div,{"data-state":lv(c),"data-disabled":i?"":void 0,...l,ref:t})})});yN.displayName=Kd;var xN="CollapsibleTrigger",iv=p.forwardRef((e,t)=>{const{__scopeCollapsible:r,...n}=e,s=sv(xN,r);return a.jsx(ne.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":lv(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...n,ref:t,onClick:H(e.onClick,s.onOpenToggle)})});iv.displayName=xN;var av="CollapsibleContent",ov=p.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=sv(av,e.__scopeCollapsible);return a.jsx(Rt,{present:r||s.open,children:({present:i})=>a.jsx(eF,{...n,ref:t,present:i})})});ov.displayName=av;var eF=p.forwardRef((e,t)=>{const{__scopeCollapsible:r,present:n,children:s,...i}=e,o=sv(av,r),[l,c]=p.useState(n),u=p.useRef(null),d=Ne(t,u),h=p.useRef(0),f=h.current,m=p.useRef(0),b=m.current,g=o.open||l,v=p.useRef(g),w=p.useRef(void 0);return p.useEffect(()=>{const y=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(y)},[]),ct(()=>{const y=u.current;if(y){w.current=w.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const x=y.getBoundingClientRect();h.current=x.height,m.current=x.width,v.current||(y.style.transitionDuration=w.current.transitionDuration,y.style.animationName=w.current.animationName),c(n)}},[o.open,n]),a.jsx(ne.div,{"data-state":lv(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...i,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...e.style},children:g&&s})});function lv(e){return e?"open":"closed"}var wN=yN,tF=iv,rF=ov;const cv=wN,uv=iv,dv=ov,nF=[{name:"Foundational",items:["Vitamin D3","Omega-3","Magnesium","B-Complex"]},{name:"Performance",items:["Creatine","Caffeine","L-Theanine","Beta-Alanine"]},{name:"Recovery",items:["Ashwagandha","Zinc","Tart Cherry","Collagen"]}],uf={overview:"Great foundational stack! Vitamin D3 + Omega-3 provide key anti-inflammatory and immune support. Adding Magnesium covers a common deficiency that affects sleep and muscle function.",strengths:"This combination addresses multiple health pillarsenergy, recovery, and cognitive function. The Caffeine + L-Theanine pairing is a well-researched synergy for focused alertness without jitters.",suggestion:"Consider timing: take Vitamin D3 with a fat-containing meal for better absorption. Magnesium works best in the evening to support sleep quality."};function sF(){const[e,t]=p.useState(new Set),[r,n]=p.useState(!1),s=i=>{t(o=>{const l=new Set(o);return l.has(i)?l.delete(i):l.add(i),l.size>=2&&!r&&n(!0),l})};return a.jsxs("section",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Try It Out"}),a.jsx(Pe,{variant:"secondary",className:"text-xs",children:"Demo"})]}),a.jsxs(K,{className:"bg-card/60 backdrop-blur-sm border-dashed",children:[a.jsxs(Ye,{className:"pb-2",children:[a.jsxs(mt,{className:"text-base font-medium flex items-center gap-2",children:[a.jsx(en,{className:"h-4 w-4 text-primary"}),"Sample Supplement Library"]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Select items and see how blueprints work. Sign up to build your own!"})]}),a.jsxs(Y,{className:"space-y-4",children:[a.jsx("div",{className:"grid gap-4 sm:grid-cols-3",children:nF.map(i=>a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:i.name}),a.jsx("div",{className:"space-y-1.5",children:i.items.map(o=>a.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer hover:text-primary transition-colors",children:[a.jsx(nv,{checked:e.has(o),onCheckedChange:()=>s(o)}),o]},o))})]},i.name))}),e.size>0&&a.jsxs("div",{className:"pt-2 border-t border-border/50 space-y-3",children:[a.jsx("div",{className:"flex flex-wrap gap-1.5",children:[...e].map(i=>a.jsx(Pe,{variant:"default",className:"text-xs",children:i},i))}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.size," item",e.size!==1?"s":""," selected"]})]}),e.size>=2&&a.jsxs(cv,{open:r,onOpenChange:n,children:[a.jsx(uv,{asChild:!0,children:a.jsxs(O,{variant:"ghost",size:"sm",className:"w-full justify-between text-primary hover:text-primary/80",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(en,{className:"h-4 w-4"}),"Example AI Review"]}),a.jsx(so,{className:`h-4 w-4 transition-transform ${r?"rotate-180":""}`})]})}),a.jsx(dv,{className:"pt-2",children:a.jsxs("div",{className:"rounded-lg border border-primary/20 bg-primary/5 p-4 space-y-3",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"text-xs font-semibold text-primary uppercase tracking-wide mb-1",children:"Overview"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:uf.overview})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-xs font-semibold text-primary uppercase tracking-wide mb-1",children:"Strengths"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:uf.strengths})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-xs font-semibold text-primary uppercase tracking-wide mb-1",children:"Suggestion"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:uf.suggestion})]}),a.jsx("p",{className:"text-xs text-muted-foreground/70 italic pt-2 border-t border-border/30",children:"This is a static preview. Sign up to generate personalized AI reviews!"})]})})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[a.jsx(ge,{to:"/auth",children:a.jsxs(O,{size:"sm",className:"gap-1.5",children:["Sign up to build",a.jsx(ig,{className:"h-3.5 w-3.5"})]})}),a.jsx(ge,{to:"/inventory",children:a.jsx(O,{size:"sm",variant:"outline",children:"Browse inventories"})})]})]})]})]})}const iF=[{icon:up,title:"Pick a Library",description:"Collections of ingredients for any topicsupplements, recipes, routines. Pick one to start building.",color:"bg-primary/10 text-primary"},{icon:en,title:"Build & Review",description:"Tap items you use, hit Review, and get instant AI feedback on your setup.",color:"bg-accent/15 text-accent-foreground"},{icon:tc,title:"Share & Remix",description:"Post to the Wall, comment on others, or remix what they've built.",color:"bg-secondary/15 text-secondary-foreground",link:"/wall",linkText:"See the Wall "}];function aF(){return a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"How It Works"}),a.jsx("div",{className:"grid gap-4 sm:grid-cols-3",children:iF.map((e,t)=>a.jsx(K,{className:"bg-card/60 backdrop-blur-sm animate-fade-in",style:{animationDelay:`${t*.1}s`},children:a.jsxs(Y,{className:"p-5 space-y-3",children:[a.jsx("div",{className:`h-10 w-10 rounded-lg flex items-center justify-center ${e.color}`,children:a.jsx(e.icon,{className:"h-5 w-5"})}),a.jsx("h3",{className:"font-semibold",children:e.title}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:e.description}),"link"in e&&e.link&&a.jsx(ge,{to:e.link,className:"inline-block text-sm text-primary hover:underline font-medium",children:e.linkText})]})},e.title))})]})}const kw="https://piszvseyaefxekubphhf.supabase.co/functions/v1/log-event";async function Dn({eventName:e,userId:t,blueprintId:r,path:n,metadata:s}){var l;if(!kw||!e)return;let i=null;try{const{data:c}=await P.auth.getSession();i=((l=c.session)==null?void 0:l.access_token)??null}catch{i=null}const o=i?`Bearer ${i}`:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBpc3p2c2V5YWVmeGVrdWJwaGhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwODE3NTEsImV4cCI6MjA4NDY1Nzc1MX0.odmCphs9gpipbjF7zp639J0r8s48SYHnpNsjQvfICSc";try{await fetch(kw,{method:"POST",headers:{"Content-Type":"application/json",Authorization:o},body:JSON.stringify({event_name:e,user_id:t??null,blueprint_id:r??null,path:n??window.location.pathname,metadata:s??{}}),keepalive:!0})}catch{}}function oF(){const{user:e}=Se(),t=p.useRef(!1);return p.useEffect(()=>{if(t.current)return;t.current=!0;const r=Date.now(),n=localStorage.getItem("mvp_last_visit"),s=n?Number(n):null;s&&!Number.isNaN(s)&&r-s<=6048e5&&Dn({eventName:"return_visit_7d",userId:e==null?void 0:e.id,path:window.location.pathname}),localStorage.setItem("mvp_last_visit",String(r)),Dn({eventName:"visit_home",userId:e==null?void 0:e.id,path:window.location.pathname})},[e==null?void 0:e.id]),a.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[a.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none -z-10",children:[a.jsx("div",{className:"absolute -top-40 -right-40 w-[520px] h-[520px] bg-primary/10 rounded-full blur-3xl animate-drift"}),a.jsx("div",{className:"absolute top-1/2 -left-32 w-96 h-96 bg-accent/20 rounded-full blur-3xl animate-float"}),a.jsx("div",{className:"absolute -bottom-20 right-1/4 w-80 h-80 bg-secondary/10 rounded-full blur-3xl animate-pulse-soft"})]}),a.jsx(St,{}),a.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-10 space-y-12",children:[a.jsxs("section",{className:"text-center space-y-5 animate-fade-in",children:[a.jsx("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-black tracking-tight",children:a.jsx("span",{className:"text-gradient-themed",style:{fontFamily:"'Impact', 'Haettenschweiler', 'Franklin Gothic Bold', 'Charcoal', sans-serif",letterSpacing:"0.06em"},children:"BLUEPRINTS"})}),a.jsx("p",{className:"text-sm uppercase tracking-widest text-primary/80 font-medium",children:"Create & share recipes for life routines"}),a.jsx("p",{className:"text-base text-muted-foreground max-w-md mx-auto leading-relaxed",children:"Build routines from shared inventories, get AI reviews, and remix what others have made."}),a.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3 pt-2",children:[a.jsx(ge,{to:"/explore",children:a.jsxs(O,{size:"lg",className:"gap-2",children:["Start Exploring",a.jsx(ig,{className:"h-4 w-4"})]})}),a.jsx(ge,{to:"/wall",children:a.jsxs(O,{size:"lg",variant:"outline",className:"gap-2",children:["Browse the Wall",a.jsx(en,{className:"h-4 w-4"})]})})]})]}),a.jsx(R3,{}),a.jsx(sF,{}),a.jsx(aF,{}),a.jsx(H5,{}),a.jsx(K5,{}),a.jsxs("footer",{className:"pt-8 border-t border-border/40 text-center space-y-4",children:[a.jsxs("nav",{className:"flex flex-wrap items-center justify-center gap-4 text-sm text-muted-foreground",children:[a.jsx(ge,{to:"/wall",className:"hover:text-foreground transition-colors",children:"Wall"}),a.jsx("span",{className:"text-border",children:""}),a.jsx(ge,{to:"/inventory",className:"hover:text-foreground transition-colors",children:"Libraries"}),a.jsx("span",{className:"text-border",children:""}),a.jsx(ge,{to:"/tags",className:"hover:text-foreground transition-colors",children:"Tags"}),a.jsx("span",{className:"text-border",children:""}),a.jsx(ge,{to:"/auth",className:"hover:text-foreground transition-colors",children:"Sign In"})]}),a.jsx("p",{className:"text-xs text-muted-foreground/70",children:"Built with curiosity. Share what works."})]})]})]})}function _e({className:e,...t}){return a.jsx("div",{className:G("animate-pulse rounded-md bg-muted",e),...t})}var Gd="Tabs",[lF,$6]=Ft(Gd,[Ld]),bN=Ld(),[cF,hv]=lF(Gd),_N=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=go(l),[h,f]=Lr({prop:n,onChange:s,defaultProp:i??"",caller:Gd});return a.jsx(cF,{scope:r,baseId:Ir(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:c,children:a.jsx(ne.div,{dir:d,"data-orientation":o,...u,ref:t})})});_N.displayName=Gd;var jN="TabsList",SN=p.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,i=hv(jN,r),o=bN(r);return a.jsx(bj,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:a.jsx(ne.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});SN.displayName=jN;var NN="TabsTrigger",kN=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...i}=e,o=hv(NN,r),l=bN(r),c=TN(o.baseId,n),u=RN(o.baseId,n),d=n===o.value;return a.jsx(_j,{asChild:!0,...l,focusable:!s,active:d,children:a.jsx(ne.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:t,onMouseDown:H(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:H(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:H(e.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!s&&h&&o.onValueChange(n)})})})});kN.displayName=NN;var CN="TabsContent",EN=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:i,...o}=e,l=hv(CN,r),c=TN(l.baseId,n),u=RN(l.baseId,n),d=n===l.value,h=p.useRef(d);return p.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),a.jsx(Rt,{present:s||d,children:({present:f})=>a.jsx(ne.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});EN.displayName=CN;function TN(e,t){return`${e}-trigger-${t}`}function RN(e,t){return`${e}-content-${t}`}var uF=_N,PN=SN,AN=kN,IN=EN;const vo=uF,Ui=p.forwardRef(({className:e,...t},r)=>a.jsx(PN,{ref:r,className:G("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Ui.displayName=PN.displayName;const Tr=p.forwardRef(({className:e,...t},r)=>a.jsx(AN,{ref:r,className:G("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));Tr.displayName=AN.displayName;const Rr=p.forwardRef(({className:e,...t},r)=>a.jsx(IN,{ref:r,className:G("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Rr.displayName=IN.displayName;function ON(e=10){return Le({queryKey:["popular-inventory-tags",e],queryFn:async()=>{const{data:t,error:r}=await P.from("inventory_tags").select("tag_id");if(r)throw r;const n=new Map;(t||[]).forEach(c=>{n.set(c.tag_id,(n.get(c.tag_id)||0)+1)});const s=[...n.entries()].sort((c,u)=>u[1]-c[1]).slice(0,e).map(([c])=>c);if(s.length===0)return[];const{data:i,error:o}=await P.from("tags").select("id, slug").in("id",s);if(o)throw o;return(i||[]).map(c=>({id:c.id,slug:c.slug,count:n.get(c.id)||0})).sort((c,u)=>u.count-c.count)},staleTime:5*60*1e3})}const MN=4;function on(e){return e.trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function fv(e){const t=new Set,r=[];for(const n of e){const s=on(n);!s||t.has(s)||(t.add(s),r.push(s))}return r.slice(0,MN)}function Yd(){const{user:e}=Se(),t=Pt(),r=Le({queryKey:["followed-tags",e==null?void 0:e.id],enabled:!!e,queryFn:async()=>{if(!e)return[];const{data:d,error:h}=await P.from("tag_follows").select("tag_id, tags(slug)").eq("user_id",e.id);if(h)throw h;return(d||[]).map(f=>({id:f.tag_id,slug:(f.tags||{}).slug||""})).filter(f=>f.slug)}}),n=r.data||[],s=p.useMemo(()=>new Set(n.map(d=>d.id)),[n]),i=p.useMemo(()=>new Set(n.map(d=>d.slug)),[n]),o=dt({mutationFn:async d=>{if(!e)throw new Error("Must be logged in");const{error:h}=await P.from("tag_follows").insert({tag_id:d,user_id:e.id});if(h)throw h},onSuccess:()=>{t.invalidateQueries({queryKey:["followed-tags"]}),t.invalidateQueries({queryKey:["tags-directory"]})}}),l=dt({mutationFn:async d=>{if(!e)throw new Error("Must be logged in");const{error:h}=await P.from("tag_follows").delete().eq("tag_id",d).eq("user_id",e.id);if(h)throw h},onSuccess:()=>{t.invalidateQueries({queryKey:["followed-tags"]}),t.invalidateQueries({queryKey:["tags-directory"]})}}),c=async d=>{const h=on(d.replace(/^#/,""));if(!h)return null;const{data:f,error:m}=await P.from("tags").select("id").eq("slug",h).maybeSingle();if(m)throw m;return(f==null?void 0:f.id)??null};return{followedTags:n,followedIds:s,followedSlugs:i,toggleFollow:async d=>{if(!e)throw new Error("Must be logged in");const h=d.id??(d.slug?await c(d.slug):null);if(!h)throw new Error("Tag not found");s.has(h)?await l.mutateAsync(h):await o.mutateAsync(h)},isLoading:r.isLoading,isUpdating:o.isPending||l.isPending,hasUser:!!e}}const dF=[{value:"for-you",label:"For You"},{value:"latest",label:"Latest"},{value:"trending",label:"Trending"}];function hF(e){return!e||typeof e!="object"||Array.isArray(e)?0:Object.values(e).reduce((t,r)=>t+(Array.isArray(r)?r.length:0),0)}function fF(){const{user:e,isLoading:t}=Se(),{toast:r}=$t(),n=Pt(),[s,i]=p.useState("for-you");p.useEffect(()=>{t||!e&&s==="for-you"&&i("trending")},[t,e,s]);const{data:o=[]}=ON(6),{followedIds:l,toggleFollow:c}=Yd(),u=async g=>{if(!e){r({title:"Sign in required",description:"Please sign in to follow tags."});return}try{await c(g),n.invalidateQueries({queryKey:["wall-blueprints"]})}catch(v){r({title:"Tag update failed",description:v instanceof Error?v.message:"Please try again.",variant:"destructive"})}},d=["wall-blueprints",s,e==null?void 0:e.id],{data:h,isLoading:f}=Le({queryKey:d,queryFn:async()=>{const g=s==="for-you"&&!!e,v=s==="for-you"?120:80;let w=P.from("blueprints").select("id, creator_user_id, title, selected_items, llm_review, likes_count, created_at").eq("is_public",!0).order("created_at",{ascending:!1}).limit(v);if(s==="trending"){const R=new Date;R.setDate(R.getDate()-3),w=w.gte("created_at",R.toISOString()).order("likes_count",{ascending:!1}).order("created_at",{ascending:!1})}const{data:y,error:x}=await w;if(x)throw x;if(!y||y.length===0)return[];const _=y.map(R=>R.id),j=[...new Set(y.map(R=>R.creator_user_id))],[N,k,S]=await Promise.all([P.from("blueprint_tags").select("blueprint_id, tag_id").in("blueprint_id",_),e?P.from("blueprint_likes").select("blueprint_id").eq("user_id",e.id).in("blueprint_id",_):Promise.resolve({data:[]}),P.from("profiles").select("user_id, display_name, avatar_url").in("user_id",j)]),E=N.data||[],A=[...new Set(E.map(R=>R.tag_id))],{data:$}=A.length>0?await P.from("tags").select("id, slug").in("id",A):{data:[]},M=new Map(($||[]).map(R=>[R.id,R])),Q=new Map;E.forEach(R=>{const T=M.get(R.tag_id);if(!T)return;const D=Q.get(R.blueprint_id)||[];D.push(T),Q.set(R.blueprint_id,D)});const I=new Set((k.data||[]).map(R=>R.blueprint_id)),se=new Map((S.data||[]).map(R=>[R.user_id,R]));let V=new Set;if(g){const R=await P.from("tag_follows").select("tag_id").eq("user_id",e.id);V=new Set((R.data||[]).map(T=>T.tag_id))}const Z=y.map(R=>({...R,profile:se.get(R.creator_user_id)||{display_name:null,avatar_url:null},tags:Q.get(R.id)||[],user_liked:I.has(R.id)}));return g?V.size===0?[]:Z.filter(R=>R.tags.some(T=>V.has(T.id))):Z}}),m=dt({mutationFn:async({blueprintId:g,liked:v})=>{if(!e)throw new Error("Must be logged in");v?await P.from("blueprint_likes").delete().eq("blueprint_id",g).eq("user_id",e.id):await P.from("blueprint_likes").insert({blueprint_id:g,user_id:e.id})},onMutate:async({blueprintId:g,liked:v})=>{await n.cancelQueries({queryKey:d});const w=n.getQueryData(d);return n.setQueryData(d,y=>y==null?void 0:y.map(x=>x.id===g?{...x,user_liked:!v,likes_count:v?x.likes_count-1:x.likes_count+1}:x)),{previousPosts:w}},onError:(g,v,w)=>{n.setQueryData(d,w==null?void 0:w.previousPosts),r({title:"Error",description:"Failed to update like. Please try again.",variant:"destructive"})}}),b=(g,v)=>{if(!e){r({title:"Sign in required",description:"Please sign in to like blueprints."});return}m.mutate({blueprintId:g,liked:v})};return t?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})}):a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[a.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent/5 rounded-full blur-3xl"})]}),a.jsx(St,{}),a.jsxs("main",{className:"max-w-3xl mx-auto px-4 pb-24",children:[a.jsx(K,{className:"mb-6 border-border/50 bg-card/60 backdrop-blur-sm",children:a.jsx(Y,{className:"pt-6",children:a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:"Community Wall"}),a.jsx("h1",{className:"text-2xl font-semibold",children:"See what the community is building"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Browse public blueprints, follow tags you love, and save ideas for your next routine."})]})})}),!e&&a.jsx(K,{className:"mb-6 border-border/50 bg-card/60 backdrop-blur-sm",children:a.jsx(Y,{className:"py-5",children:a.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[a.jsx("p",{className:"text-sm font-semibold",children:"Sign in to personalize"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Follow tags and creators to tune what shows up in Explore."}),a.jsx("div",{className:"flex justify-center",children:a.jsx(ge,{to:"/auth",children:a.jsx(O,{size:"sm",children:"Sign in"})})})]})})}),a.jsxs(vo,{value:s,onValueChange:g=>i(g),children:[a.jsx(Ui,{className:"mb-4",children:dF.map(g=>a.jsx(Tr,{value:g.value,children:g.label},g.value))}),a.jsx(Rr,{value:s,className:"mt-0",children:f?Array.from({length:3}).map((g,v)=>a.jsxs(K,{children:[a.jsxs(Ye,{className:"flex flex-row items-center gap-3",children:[a.jsx(_e,{className:"h-10 w-10 rounded-full"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(_e,{className:"h-4 w-24"}),a.jsx(_e,{className:"h-3 w-16"})]})]}),a.jsx(Y,{children:a.jsx(_e,{className:"h-20 w-full"})})]},v)):h&&h.length>0?a.jsx("div",{className:"space-y-4",children:h.map(g=>{const v=g.profile.display_name||"Anonymous",w=v.slice(0,2).toUpperCase(),y=hF(g.selected_items),x=g.llm_review?g.llm_review.slice(0,160):"";return a.jsx(ge,{to:`/blueprint/${g.id}`,className:"block",children:a.jsxs(K,{className:"overflow-hidden transition hover:border-primary/40 hover:shadow-md",children:[a.jsxs(Ye,{className:"flex flex-row items-center gap-3 pb-2",children:[a.jsxs(ge,{to:`/u/${g.creator_user_id}`,onClick:_=>_.stopPropagation(),className:"flex items-center gap-3 hover:opacity-80 transition-opacity",children:[a.jsxs(nn,{className:"h-10 w-10",children:[a.jsx(sn,{src:g.profile.avatar_url||void 0}),a.jsx(an,{className:"bg-primary/10 text-primary text-sm",children:w})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:v}),a.jsx("p",{className:"text-xs text-muted-foreground",children:Ai(new Date(g.created_at),{addSuffix:!0})})]})]}),a.jsx("div",{className:"flex-1"}),a.jsxs(Pe,{variant:"secondary",className:"bg-primary/10 text-primary",children:[a.jsx(Ar,{className:"h-3 w-3 mr-1"}),"Blueprint"]})]}),a.jsxs(Y,{className:"pt-0 space-y-3",children:[a.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[a.jsx("h3",{className:"font-semibold",children:g.title}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[y," item",y!==1?"s":""]}),x&&a.jsxs("p",{className:"text-sm pt-2 border-t border-border/50 text-muted-foreground",children:[x,"..."]})]}),g.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:g.tags.map(_=>a.jsxs(Pe,{variant:"outline",className:`text-xs cursor-pointer transition-colors border ${l.has(_.id)?"bg-primary/15 text-primary border-primary/30 hover:bg-primary/20":"bg-muted/40 text-muted-foreground border-border/60 hover:bg-muted/60"}`,onClick:j=>{j.preventDefault(),j.stopPropagation(),u(_)},children:["#",_.slug]},_.id))})]}),a.jsx(Vd,{className:"pt-0 flex flex-col gap-4",children:a.jsxs("div",{className:"flex items-center gap-4 w-full",children:[a.jsxs(O,{variant:"ghost",size:"sm",className:g.user_liked?"text-red-500":"",onClick:_=>{_.preventDefault(),b(g.id,g.user_liked)},children:[a.jsx(Dt,{className:`h-4 w-4 mr-1 ${g.user_liked?"fill-current":""}`}),g.likes_count]}),a.jsx(O,{variant:"ghost",size:"sm",disabled:!0,onClick:_=>_.preventDefault(),children:a.jsx(iR,{className:"h-4 w-4"})})]})})]})},g.id)})}):a.jsx(K,{className:"text-center py-12",children:a.jsx(Y,{children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center",children:s==="for-you"?a.jsx(lg,{className:"h-8 w-8 text-muted-foreground"}):a.jsx(Ar,{className:"h-8 w-8 text-muted-foreground"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:s==="for-you"?"Personalize your feed":"No blueprints yet"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s==="for-you"?"Follow tags to see related blueprints here.":"Be the first to share a blueprint."})]}),s==="for-you"&&o.length>0&&a.jsxs("div",{className:"space-y-3 w-full max-w-md",children:[!e&&a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign in to follow tags and personalize this feed."}),a.jsx(ge,{to:"/auth",children:a.jsx(O,{size:"sm",children:"Sign in"})})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Popular tags to follow:"}),a.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:o.map(g=>a.jsxs(O,{variant:"outline",size:"sm",className:`gap-1.5 ${l.has(g.id)?"bg-primary/15 text-primary border-primary/30 hover:bg-primary/20":"text-muted-foreground"}`,onClick:()=>u(g),children:["#",g.slug]},g.id))}),a.jsx(O,{variant:"ghost",size:"sm",className:"text-muted-foreground",onClick:()=>i("latest"),children:"Or browse Latest instead "})]}),s!=="for-you"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ge,{to:"/inventory",children:a.jsx(O,{children:"Create Blueprint"})}),a.jsx(ge,{to:"/tags",children:a.jsx(O,{variant:"outline",children:"Explore Tags"})})]})]})})})})]})]})]})}const Fe=p.forwardRef(({className:e,type:t,...r},n)=>a.jsx("input",{type:t,className:G("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));Fe.displayName="Input";function DN(e){const{user:t}=Se();return Le({queryKey:["is-following",t==null?void 0:t.id,e],queryFn:async()=>{if(!t||!e||t.id===e)return!1;const{data:r,error:n}=await P.from("user_follows").select("id").eq("follower_id",t.id).eq("following_id",e).maybeSingle();if(n)throw n;return!!r},enabled:!!t&&!!e&&t.id!==e})}function LN(){const{user:e}=Se(),t=Pt();return dt({mutationFn:async r=>{if(!e)throw new Error("Must be logged in");if(e.id===r)throw new Error("Cannot follow yourself");const{error:n}=await P.from("user_follows").insert({follower_id:e.id,following_id:r});if(n)throw n},onSuccess:(r,n)=>{t.invalidateQueries({queryKey:["is-following",e==null?void 0:e.id,n]}),t.invalidateQueries({queryKey:["user-profile",n]}),t.invalidateQueries({queryKey:["user-followers",n]}),t.invalidateQueries({queryKey:["user-following",e==null?void 0:e.id]})}})}function $N(){const{user:e}=Se(),t=Pt();return dt({mutationFn:async r=>{if(!e)throw new Error("Must be logged in");const{error:n}=await P.from("user_follows").delete().eq("follower_id",e.id).eq("following_id",r);if(n)throw n},onSuccess:(r,n)=>{t.invalidateQueries({queryKey:["is-following",e==null?void 0:e.id,n]}),t.invalidateQueries({queryKey:["user-profile",n]}),t.invalidateQueries({queryKey:["user-followers",n]}),t.invalidateQueries({queryKey:["user-following",e==null?void 0:e.id]})}})}function pF(e){return Le({queryKey:["user-followers",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await P.from("user_follows").select("follower_id").eq("following_id",e);if(r)throw r;if(!t||t.length===0)return[];const n=t.map(o=>o.follower_id),{data:s,error:i}=await P.from("profiles").select("user_id, display_name, avatar_url").in("user_id",n);if(i)throw i;return s||[]},enabled:!!e})}function mF(e){return Le({queryKey:["user-following",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await P.from("user_follows").select("following_id").eq("follower_id",e);if(r)throw r;if(!t||t.length===0)return[];const n=t.map(o=>o.following_id),{data:s,error:i}=await P.from("profiles").select("user_id, display_name, avatar_url").in("user_id",n);if(i)throw i;return s||[]},enabled:!!e})}function gF({userId:e,displayName:t,avatarUrl:r,followerCount:n}){const{user:s}=Se(),{data:i,isLoading:o}=DN(e),l=LN(),c=$N(),u=(s==null?void 0:s.id)===e,d=l.isPending||c.isPending,h=f=>{f.preventDefault(),f.stopPropagation(),s&&(i?c.mutate(e):l.mutate(e))};return a.jsx(K,{className:"p-3 hover:shadow-soft-md transition-all",children:a.jsxs(ge,{to:`/u/${e}`,className:"flex items-center gap-3",children:[a.jsxs(nn,{className:"h-8 w-8",children:[a.jsx(sn,{src:r||void 0,alt:t||"User"}),a.jsx(an,{className:"bg-muted",children:a.jsx(hp,{className:"h-4 w-4 text-muted-foreground"})})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-sm truncate",children:t||"Anonymous"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[n," ",n===1?"follower":"followers"]})]}),s&&!u&&a.jsx(O,{variant:i?"outline":"default",size:"sm",onClick:h,disabled:d||o,className:"shrink-0",children:i?"Unfollow":"Follow"})]})})}function vF({result:e,onTagClick:t,followedTagSlugs:r}){const n=Array.isArray(e.selectedItems)?e.selectedItems.length:0;return a.jsx(ge,{to:`/blueprint/${e.id}`,children:a.jsxs(K,{className:"p-4 hover:shadow-soft-md transition-all h-full",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsx("h3",{className:"font-medium text-sm line-clamp-2",children:e.title}),a.jsx(Nd,{className:"h-4 w-4 text-muted-foreground shrink-0"})]}),a.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mb-3",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Ar,{className:"h-3 w-3"}),n," items"]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Dt,{className:"h-3 w-3"}),e.likesCount]})]}),e.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.slice(0,3).map(s=>a.jsxs(Pe,{variant:"secondary",className:`text-xs cursor-pointer transition-colors border ${r!=null&&r.has(s)?"bg-primary/15 text-primary border-primary/30 hover:bg-primary/20":"bg-muted/40 text-muted-foreground border-border/60 hover:bg-muted/60"}`,onClick:i=>{i.preventDefault(),i.stopPropagation(),t==null||t(`#${s}`)},children:["#",s]},s))})]})})}function yF({result:e,onTagClick:t,followedTagSlugs:r}){return a.jsx(ge,{to:`/inventory/${e.id}`,children:a.jsxs(K,{className:"p-4 hover:shadow-soft-md transition-all h-full",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsx("h3",{className:"font-medium text-sm line-clamp-2",children:e.title}),a.jsx(Ar,{className:"h-4 w-4 text-muted-foreground shrink-0"})]}),a.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mb-3",children:e.promptCategories}),a.jsx("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mb-3",children:a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Dt,{className:"h-3 w-3"}),e.likesCount]})}),e.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.slice(0,3).map(n=>a.jsxs(Pe,{variant:"secondary",className:`text-xs cursor-pointer transition-colors border ${r!=null&&r.has(n)?"bg-primary/15 text-primary border-primary/30 hover:bg-primary/20":"bg-muted/40 text-muted-foreground border-border/60 hover:bg-muted/60"}`,onClick:s=>{s.preventDefault(),s.stopPropagation(),t==null||t(`#${n}`)},children:["#",n]},n))})]})})}function xF({result:e}){return a.jsx(gF,{userId:e.userId,displayName:e.displayName,avatarUrl:e.avatarUrl,followerCount:e.followerCount})}function Wc({result:e,onTagClick:t,followedTagSlugs:r}){switch(e.type){case"blueprint":return a.jsx(vF,{result:e,onTagClick:t,followedTagSlugs:r});case"inventory":return a.jsx(yF,{result:e,onTagClick:t,followedTagSlugs:r});case"user":return a.jsx(xF,{result:e});default:return null}}async function wF(e,t){const r=on(e.replace(/^#/,""));if(t&&r){const{data:c}=await P.from("tags").select("id").ilike("slug",`%${r}%`);if(!c||c.length===0)return[];const u=c.map(v=>v.id),{data:d}=await P.from("blueprint_tags").select("blueprint_id").in("tag_id",u);if(!d||d.length===0)return[];const h=[...new Set(d.map(v=>v.blueprint_id))],{data:f,error:m}=await P.from("blueprints").select("id, title, selected_items, likes_count, creator_user_id, created_at").eq("is_public",!0).in("id",h).order("likes_count",{ascending:!1}).limit(20);if(m||!f)return[];const{data:b}=await P.from("blueprint_tags").select("blueprint_id, tags(slug)").in("blueprint_id",h),g=new Map;return b==null||b.forEach(v=>{const w=g.get(v.blueprint_id)||[];v.tags&&typeof v.tags=="object"&&"slug"in v.tags&&w.push(v.tags.slug),g.set(v.blueprint_id,w)}),f.map(v=>({type:"blueprint",id:v.id,title:v.title,selectedItems:v.selected_items,likesCount:v.likes_count,creatorUserId:v.creator_user_id,createdAt:v.created_at,tags:g.get(v.id)||[]}))}const{data:n,error:s}=await P.from("blueprints").select("id, title, selected_items, likes_count, creator_user_id, created_at").eq("is_public",!0).ilike("title",`%${e}%`).order("likes_count",{ascending:!1}).limit(20);if(s||!n)return[];const i=n.map(c=>c.id),{data:o}=await P.from("blueprint_tags").select("blueprint_id, tags(slug)").in("blueprint_id",i),l=new Map;return o==null||o.forEach(c=>{const u=l.get(c.blueprint_id)||[];c.tags&&typeof c.tags=="object"&&"slug"in c.tags&&u.push(c.tags.slug),l.set(c.blueprint_id,u)}),n.map(c=>({type:"blueprint",id:c.id,title:c.title,selectedItems:c.selected_items,likesCount:c.likes_count,creatorUserId:c.creator_user_id,createdAt:c.created_at,tags:l.get(c.id)||[]}))}async function bF(e,t){const r=on(e.replace(/^#/,""));if(t&&r){const{data:c}=await P.from("tags").select("id").ilike("slug",`%${r}%`);if(!c||c.length===0)return[];const u=c.map(v=>v.id),{data:d}=await P.from("inventory_tags").select("inventory_id").in("tag_id",u);if(!d||d.length===0)return[];const h=[...new Set(d.map(v=>v.inventory_id))],{data:f,error:m}=await P.from("inventories").select("id, title, prompt_categories, likes_count, creator_user_id, created_at").eq("is_public",!0).in("id",h).order("likes_count",{ascending:!1}).limit(20);if(m||!f)return[];const{data:b}=await P.from("inventory_tags").select("inventory_id, tags(slug)").in("inventory_id",h),g=new Map;return b==null||b.forEach(v=>{const w=g.get(v.inventory_id)||[];v.tags&&typeof v.tags=="object"&&"slug"in v.tags&&w.push(v.tags.slug),g.set(v.inventory_id,w)}),f.map(v=>({type:"inventory",id:v.id,title:v.title,promptCategories:v.prompt_categories,likesCount:v.likes_count,creatorUserId:v.creator_user_id,createdAt:v.created_at,tags:g.get(v.id)||[]}))}const{data:n,error:s}=await P.from("inventories").select("id, title, prompt_categories, likes_count, creator_user_id, created_at").eq("is_public",!0).ilike("title",`%${e}%`).order("likes_count",{ascending:!1}).limit(20);if(s||!n)return[];const i=n.map(c=>c.id),{data:o}=await P.from("inventory_tags").select("inventory_id, tags(slug)").in("inventory_id",i),l=new Map;return o==null||o.forEach(c=>{const u=l.get(c.inventory_id)||[];c.tags&&typeof c.tags=="object"&&"slug"in c.tags&&u.push(c.tags.slug),l.set(c.inventory_id,u)}),n.map(c=>({type:"inventory",id:c.id,title:c.title,promptCategories:c.prompt_categories,likesCount:c.likes_count,creatorUserId:c.creator_user_id,createdAt:c.created_at,tags:l.get(c.id)||[]}))}async function _F(e){const{data:t,error:r}=await P.from("profiles").select("user_id, display_name, avatar_url, bio, follower_count").eq("is_public",!0).ilike("display_name",`%${e}%`).order("follower_count",{ascending:!1}).limit(15);return r||!t?[]:t.map(n=>({type:"user",userId:n.user_id,displayName:n.display_name,avatarUrl:n.avatar_url,bio:n.bio,followerCount:n.follower_count}))}function jF({query:e,filter:t,enabled:r=!0}){const n=e.trim(),s=n.startsWith("#");return Le({queryKey:["explore-search",n,t],queryFn:async()=>{if(!n)return[];const i=[];if(t==="all"||t==="blueprints"){const o=await wF(n,s);i.push(...o)}if(t==="all"||t==="inventories"){const o=await bF(n,s);i.push(...o)}if((t==="all"||t==="users")&&!s){const o=await _F(n);i.push(...o)}return i},enabled:r&&n.length>0,staleTime:3e4})}function SF(){return Le({queryKey:["trending-tags"],queryFn:async()=>{const{data:e,error:t}=await P.from("tags").select("id, slug, follower_count").order("follower_count",{ascending:!1}).limit(6);if(t)throw t;return e||[]},staleTime:6e4})}function NF(e,t){const[r,n]=p.useState(e);return p.useEffect(()=>{const s=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(s)}},[e,t]),r}const kF=[{value:"all",label:"All"},{value:"blueprints",label:"Blueprints"},{value:"inventories",label:"Libraries"},{value:"users",label:"Users"}];function CF(){const[e,t]=p.useState(""),[r,n]=p.useState("all"),{user:s}=Se(),{toast:i}=$t(),o=NF(e,300),{data:l,isLoading:c}=jF({query:o,filter:r}),{data:u}=SF(),{followedSlugs:d,toggleFollow:h}=Yd(),f=o.trim().length>0,m=async g=>{if(t(g),!s){i({title:"Sign in required",description:"Please sign in to follow tags."});return}try{await h({slug:g})}catch(v){i({title:"Tag update failed",description:v instanceof Error?v.message:"Please try again.",variant:"destructive"})}},b=p.useMemo(()=>{if(!l||r!=="all")return null;const g={blueprints:[],inventories:[],users:[]};return l.forEach(v=>{v.type==="blueprint"?g.blueprints.push(v):v.type==="inventory"?g.inventories.push(v):v.type==="user"&&g.users.push(v)}),g},[l,r]);return a.jsxs("div",{className:"min-h-screen bg-gradient-soft",children:[a.jsx(St,{}),a.jsxs("main",{className:"container max-w-4xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"mb-6 rounded-2xl border border-border/50 bg-card/60 backdrop-blur-sm p-5",children:[a.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:"Explore"}),a.jsx("h1",{className:"text-2xl font-semibold mt-1",children:"Search blueprints, inventories, and creators"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Start with a keyword, then narrow by type or jump into trending tags."})]}),!s&&a.jsxs("div",{className:"mb-6 rounded-2xl border border-border/50 bg-card/60 backdrop-blur-sm p-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold",children:"Sign in to personalize"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Follow tags and creators to tune what shows up in Explore."})]}),a.jsx(ge,{to:"/auth",children:a.jsx(O,{size:"sm",children:"Sign in"})})]}),a.jsxs("div",{className:"relative mb-6",children:[a.jsx(io,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),a.jsx(Fe,{type:"text",placeholder:"Search blueprints, inventories, users...",value:e,onChange:g=>t(g.target.value),className:"pl-12 h-12 text-base bg-card/60 backdrop-blur-sm border-border/50"})]}),f&&a.jsx("div",{className:"flex gap-2 mb-6 flex-wrap",children:kF.map(g=>a.jsx(O,{variant:r===g.value?"default":"outline",size:"sm",onClick:()=>n(g.value),children:g.label},g.value))}),!f&&a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"text-center py-8",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Discover what works"}),a.jsx("p",{className:"text-muted-foreground",children:"Search blueprints, inventories, and creators  or explore trending topics below"})]}),u&&u.length>0&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Trending Tags"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(g=>a.jsxs(Pe,{variant:"secondary",className:`cursor-pointer transition-colors px-3 py-1 border ${d.has(g.slug)?"bg-primary/15 text-primary border-primary/30 hover:bg-primary/20":"bg-muted/40 text-muted-foreground border-border/60 hover:bg-muted/60"}`,onClick:()=>m(`#${g.slug}`),children:["#",g.slug]},g.id))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Popular Categories"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["skincare","nutrition","fitness","wellness","sleep"].map(g=>a.jsx(O,{variant:"outline",size:"sm",onClick:()=>m(g),className:"capitalize",children:g},g))})]})]}),f&&c&&a.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((g,v)=>a.jsx(_e,{className:"h-32 rounded-xl"},v))}),f&&!c&&b&&a.jsxs("div",{className:"space-y-8",children:[b.blueprints.length>0&&a.jsxs("section",{children:[a.jsx("h2",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Blueprints"}),a.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:b.blueprints.map(g=>a.jsx(Wc,{result:g,onTagClick:m,followedTagSlugs:d},g.type==="blueprint"?g.id:""))})]}),b.inventories.length>0&&a.jsxs("section",{children:[a.jsx("h2",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Libraries"}),a.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:b.inventories.map(g=>a.jsx(Wc,{result:g,onTagClick:m,followedTagSlugs:d},g.type==="inventory"?g.id:""))})]}),b.users.length>0&&a.jsxs("section",{children:[a.jsx("h2",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Users"}),a.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:b.users.map(g=>a.jsx(Wc,{result:g},g.type==="user"?g.userId:""))})]}),(l==null?void 0:l.length)===0&&a.jsxs("div",{className:"text-center text-muted-foreground py-8 space-y-3",children:[a.jsxs("p",{children:['No results found for "',o,'"']}),a.jsx(O,{variant:"outline",size:"sm",onClick:()=>t(""),children:"Clear search"})]})]}),f&&!c&&!b&&l&&a.jsx("div",{children:l.length>0?a.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:l.map(g=>a.jsx(Wc,{result:g,onTagClick:m,followedTagSlugs:d},g.type==="user"?g.userId:g.id))}):a.jsxs("div",{className:"text-center text-muted-foreground py-8 space-y-3",children:[a.jsxs("p",{children:['No results found for "',o,'"']}),a.jsx(O,{variant:"outline",size:"sm",onClick:()=>t(""),children:"Clear search"})]})})]})]})}function Qp(e,[t,r]){return Math.min(r,Math.max(t,e))}var EF=[" ","Enter","ArrowUp","ArrowDown"],TF=[" ","Enter"],Ii="Select",[Qd,Jd,RF]=Jl(Ii),[yo,F6]=Ft(Ii,[RF,co]),Xd=co(),[PF,Ys]=yo(Ii),[AF,IF]=yo(Ii),FN=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:m,form:b}=e,g=Xd(t),[v,w]=p.useState(null),[y,x]=p.useState(null),[_,j]=p.useState(!1),N=go(u),[k,S]=Lr({prop:n,defaultProp:s??!1,onChange:i,caller:Ii}),[E,A]=Lr({prop:o,defaultProp:l,onChange:c,caller:Ii}),$=p.useRef(null),M=v?b||!!v.closest("form"):!0,[Q,I]=p.useState(new Set),se=Array.from(Q).map(V=>V.props.value).join(";");return a.jsx(w1,{...g,children:a.jsxs(PF,{required:m,scope:t,trigger:v,onTriggerChange:w,valueNode:y,onValueNodeChange:x,valueNodeHasChildren:_,onValueNodeHasChildrenChange:j,contentId:Ir(),value:E,onValueChange:A,open:k,onOpenChange:S,dir:N,triggerPointerDownPosRef:$,disabled:f,children:[a.jsx(Qd.Provider,{scope:t,children:a.jsx(AF,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(V=>{I(Z=>new Set(Z).add(V))},[]),onNativeOptionRemove:p.useCallback(V=>{I(Z=>{const R=new Set(Z);return R.delete(V),R})},[]),children:r})}),M?a.jsxs(ck,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:h,value:E,onChange:V=>A(V.target.value),disabled:f,form:b,children:[E===void 0?a.jsx("option",{value:""}):null,Array.from(Q)]},se):null]})})};FN.displayName=Ii;var UN="SelectTrigger",BN=p.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,i=Xd(r),o=Ys(UN,r),l=o.disabled||n,c=Ne(t,o.onTriggerChange),u=Jd(r),d=p.useRef("touch"),[h,f,m]=dk(g=>{const v=u().filter(x=>!x.disabled),w=v.find(x=>x.value===o.value),y=hk(v,g,w);y!==void 0&&o.onValueChange(y.value)}),b=g=>{l||(o.onOpenChange(!0),m()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return a.jsx(wg,{asChild:!0,...i,children:a.jsx(ne.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":uk(o.value)?"":void 0,...s,ref:c,onClick:H(s.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&b(g)}),onPointerDown:H(s.onPointerDown,g=>{d.current=g.pointerType;const v=g.target;v.hasPointerCapture(g.pointerId)&&v.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(b(g),g.preventDefault())}),onKeyDown:H(s.onKeyDown,g=>{const v=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(v&&g.key===" ")&&EF.includes(g.key)&&(b(),g.preventDefault())})})})});BN.displayName=UN;var zN="SelectValue",qN=p.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:o="",...l}=e,c=Ys(zN,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,h=Ne(t,c.onValueNodeChange);return ct(()=>{u(d)},[u,d]),a.jsx(ne.span,{...l,ref:h,style:{pointerEvents:"none"},children:uk(c.value)?a.jsx(a.Fragment,{children:o}):i})});qN.displayName=zN;var OF="SelectIcon",WN=p.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return a.jsx(ne.span,{"aria-hidden":!0,...s,ref:t,children:n||""})});WN.displayName=OF;var MF="SelectPortal",VN=e=>a.jsx(Xl,{asChild:!0,...e});VN.displayName=MF;var Oi="SelectContent",HN=p.forwardRef((e,t)=>{const r=Ys(Oi,e.__scopeSelect),[n,s]=p.useState();if(ct(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?ln.createPortal(a.jsx(KN,{scope:e.__scopeSelect,children:a.jsx(Qd.Slot,{scope:e.__scopeSelect,children:a.jsx("div",{children:e.children})})}),i):null}return a.jsx(GN,{...e,ref:t})});HN.displayName=Oi;var qr=10,[KN,Qs]=yo(Oi),DF="SelectContentImpl",LF=Ci("SelectContent.RemoveScroll"),GN=p.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:b,hideWhenDetached:g,avoidCollisions:v,...w}=e,y=Ys(Oi,r),[x,_]=p.useState(null),[j,N]=p.useState(null),k=Ne(t,L=>_(L)),[S,E]=p.useState(null),[A,$]=p.useState(null),M=Jd(r),[Q,I]=p.useState(!1),se=p.useRef(!1);p.useEffect(()=>{if(x)return $g(x)},[x]),Lg();const V=p.useCallback(L=>{const[ue,...xe]=M().map(X=>X.ref.current),[ke]=xe.slice(-1),q=document.activeElement;for(const X of L)if(X===q||(X==null||X.scrollIntoView({block:"nearest"}),X===ue&&j&&(j.scrollTop=0),X===ke&&j&&(j.scrollTop=j.scrollHeight),X==null||X.focus(),document.activeElement!==q))return},[M,j]),Z=p.useCallback(()=>V([S,x]),[V,S,x]);p.useEffect(()=>{Q&&Z()},[Q,Z]);const{onOpenChange:R,triggerPointerDownPosRef:T}=y;p.useEffect(()=>{if(x){let L={x:0,y:0};const ue=ke=>{var q,X;L={x:Math.abs(Math.round(ke.pageX)-(((q=T.current)==null?void 0:q.x)??0)),y:Math.abs(Math.round(ke.pageY)-(((X=T.current)==null?void 0:X.y)??0))}},xe=ke=>{L.x<=10&&L.y<=10?ke.preventDefault():x.contains(ke.target)||R(!1),document.removeEventListener("pointermove",ue),T.current=null};return T.current!==null&&(document.addEventListener("pointermove",ue),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ue),document.removeEventListener("pointerup",xe,{capture:!0})}}},[x,R,T]),p.useEffect(()=>{const L=()=>R(!1);return window.addEventListener("blur",L),window.addEventListener("resize",L),()=>{window.removeEventListener("blur",L),window.removeEventListener("resize",L)}},[R]);const[D,ee]=dk(L=>{const ue=M().filter(q=>!q.disabled),xe=ue.find(q=>q.ref.current===document.activeElement),ke=hk(ue,L,xe);ke&&setTimeout(()=>ke.ref.current.focus())}),J=p.useCallback((L,ue,xe)=>{const ke=!se.current&&!xe;(y.value!==void 0&&y.value===ue||ke)&&(E(L),ke&&(se.current=!0))},[y.value]),de=p.useCallback(()=>x==null?void 0:x.focus(),[x]),U=p.useCallback((L,ue,xe)=>{const ke=!se.current&&!xe;(y.value!==void 0&&y.value===ue||ke)&&$(L)},[y.value]),ce=n==="popper"?Jp:YN,ae=ce===Jp?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:b,hideWhenDetached:g,avoidCollisions:v}:{};return a.jsx(KN,{scope:r,content:x,viewport:j,onViewportChange:N,itemRefCallback:J,selectedItem:S,onItemLeave:de,itemTextRefCallback:U,focusSelectedItem:Z,selectedItemText:A,position:n,isPositioned:Q,searchRef:D,children:a.jsx(Fd,{as:LF,allowPinchZoom:!0,children:a.jsx(Dd,{asChild:!0,trapped:y.open,onMountAutoFocus:L=>{L.preventDefault()},onUnmountAutoFocus:H(s,L=>{var ue;(ue=y.trigger)==null||ue.focus({preventScroll:!0}),L.preventDefault()}),children:a.jsx(no,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:L=>L.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:a.jsx(ce,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:L=>L.preventDefault(),...w,...ae,onPlaced:()=>I(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:H(w.onKeyDown,L=>{const ue=L.ctrlKey||L.altKey||L.metaKey;if(L.key==="Tab"&&L.preventDefault(),!ue&&L.key.length===1&&ee(L.key),["ArrowUp","ArrowDown","Home","End"].includes(L.key)){let ke=M().filter(q=>!q.disabled).map(q=>q.ref.current);if(["ArrowUp","End"].includes(L.key)&&(ke=ke.slice().reverse()),["ArrowUp","ArrowDown"].includes(L.key)){const q=L.target,X=ke.indexOf(q);ke=ke.slice(X+1)}setTimeout(()=>V(ke)),L.preventDefault()}})})})})})})});GN.displayName=DF;var $F="SelectItemAlignedPosition",YN=p.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,i=Ys(Oi,r),o=Qs(Oi,r),[l,c]=p.useState(null),[u,d]=p.useState(null),h=Ne(t,k=>d(k)),f=Jd(r),m=p.useRef(!1),b=p.useRef(!0),{viewport:g,selectedItem:v,selectedItemText:w,focusSelectedItem:y}=o,x=p.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&g&&v&&w){const k=i.trigger.getBoundingClientRect(),S=u.getBoundingClientRect(),E=i.valueNode.getBoundingClientRect(),A=w.getBoundingClientRect();if(i.dir!=="rtl"){const q=A.left-S.left,X=E.left-q,ve=k.left-X,Ie=k.width+ve,we=Math.max(Ie,S.width),De=window.innerWidth-qr,Be=Qp(X,[qr,Math.max(qr,De-we)]);l.style.minWidth=Ie+"px",l.style.left=Be+"px"}else{const q=S.right-A.right,X=window.innerWidth-E.right-q,ve=window.innerWidth-k.right-X,Ie=k.width+ve,we=Math.max(Ie,S.width),De=window.innerWidth-qr,Be=Qp(X,[qr,Math.max(qr,De-we)]);l.style.minWidth=Ie+"px",l.style.right=Be+"px"}const $=f(),M=window.innerHeight-qr*2,Q=g.scrollHeight,I=window.getComputedStyle(u),se=parseInt(I.borderTopWidth,10),V=parseInt(I.paddingTop,10),Z=parseInt(I.borderBottomWidth,10),R=parseInt(I.paddingBottom,10),T=se+V+Q+R+Z,D=Math.min(v.offsetHeight*5,T),ee=window.getComputedStyle(g),J=parseInt(ee.paddingTop,10),de=parseInt(ee.paddingBottom,10),U=k.top+k.height/2-qr,ce=M-U,ae=v.offsetHeight/2,L=v.offsetTop+ae,ue=se+V+L,xe=T-ue;if(ue<=U){const q=$.length>0&&v===$[$.length-1].ref.current;l.style.bottom="0px";const X=u.clientHeight-g.offsetTop-g.offsetHeight,ve=Math.max(ce,ae+(q?de:0)+X+Z),Ie=ue+ve;l.style.height=Ie+"px"}else{const q=$.length>0&&v===$[0].ref.current;l.style.top="0px";const ve=Math.max(U,se+g.offsetTop+(q?J:0)+ae)+xe;l.style.height=ve+"px",g.scrollTop=ue-U+g.offsetTop}l.style.margin=`${qr}px 0`,l.style.minHeight=D+"px",l.style.maxHeight=M+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[f,i.trigger,i.valueNode,l,u,g,v,w,i.dir,n]);ct(()=>x(),[x]);const[_,j]=p.useState();ct(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const N=p.useCallback(k=>{k&&b.current===!0&&(x(),y==null||y(),b.current=!1)},[x,y]);return a.jsx(UF,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:N,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:a.jsx(ne.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});YN.displayName=$F;var FF="SelectPopperPosition",Jp=p.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=qr,...i}=e,o=Xd(r);return a.jsx(bg,{...o,...i,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Jp.displayName=FF;var[UF,pv]=yo(Oi,{}),Xp="SelectViewport",QN=p.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...s}=e,i=Qs(Xp,r),o=pv(Xp,r),l=Ne(t,i.onViewportChange),c=p.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx(Qd.Slot,{scope:r,children:a.jsx(ne.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:H(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const m=Math.abs(c.current-d.scrollTop);if(m>0){const b=window.innerHeight-qr*2,g=parseFloat(h.style.minHeight),v=parseFloat(h.style.height),w=Math.max(g,v);if(w<b){const y=w+m,x=Math.min(b,y),_=y-x;h.style.height=x+"px",h.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});QN.displayName=Xp;var JN="SelectGroup",[BF,zF]=yo(JN),qF=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Ir();return a.jsx(BF,{scope:r,id:s,children:a.jsx(ne.div,{role:"group","aria-labelledby":s,...n,ref:t})})});qF.displayName=JN;var XN="SelectLabel",ZN=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=zF(XN,r);return a.jsx(ne.div,{id:s.id,...n,ref:t})});ZN.displayName=XN;var Zu="SelectItem",[WF,ek]=yo(Zu),tk=p.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...o}=e,l=Ys(Zu,r),c=Qs(Zu,r),u=l.value===n,[d,h]=p.useState(i??""),[f,m]=p.useState(!1),b=Ne(t,y=>{var x;return(x=c.itemRefCallback)==null?void 0:x.call(c,y,n,s)}),g=Ir(),v=p.useRef("touch"),w=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(WF,{scope:r,value:n,disabled:s,textId:g,isSelected:u,onItemTextChange:p.useCallback(y=>{h(x=>x||((y==null?void 0:y.textContent)??"").trim())},[]),children:a.jsx(Qd.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:a.jsx(ne.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:b,onFocus:H(o.onFocus,()=>m(!0)),onBlur:H(o.onBlur,()=>m(!1)),onClick:H(o.onClick,()=>{v.current!=="mouse"&&w()}),onPointerUp:H(o.onPointerUp,()=>{v.current==="mouse"&&w()}),onPointerDown:H(o.onPointerDown,y=>{v.current=y.pointerType}),onPointerMove:H(o.onPointerMove,y=>{var x;v.current=y.pointerType,s?(x=c.onItemLeave)==null||x.call(c):v.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:H(o.onPointerLeave,y=>{var x;y.currentTarget===document.activeElement&&((x=c.onItemLeave)==null||x.call(c))}),onKeyDown:H(o.onKeyDown,y=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&y.key===" "||(TF.includes(y.key)&&w(),y.key===" "&&y.preventDefault())})})})})});tk.displayName=Zu;var Vo="SelectItemText",rk=p.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...i}=e,o=Ys(Vo,r),l=Qs(Vo,r),c=ek(Vo,r),u=IF(Vo,r),[d,h]=p.useState(null),f=Ne(t,w=>h(w),c.onItemTextChange,w=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,w,c.value,c.disabled)}),m=d==null?void 0:d.textContent,b=p.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:v}=u;return ct(()=>(g(b),()=>v(b)),[g,v,b]),a.jsxs(a.Fragment,{children:[a.jsx(ne.span,{id:c.textId,...i,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ln.createPortal(i.children,o.valueNode):null]})});rk.displayName=Vo;var nk="SelectItemIndicator",sk=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return ek(nk,r).isSelected?a.jsx(ne.span,{"aria-hidden":!0,...n,ref:t}):null});sk.displayName=nk;var Zp="SelectScrollUpButton",ik=p.forwardRef((e,t)=>{const r=Qs(Zp,e.__scopeSelect),n=pv(Zp,e.__scopeSelect),[s,i]=p.useState(!1),o=Ne(t,n.onScrollButtonChange);return ct(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?a.jsx(ok,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});ik.displayName=Zp;var em="SelectScrollDownButton",ak=p.forwardRef((e,t)=>{const r=Qs(em,e.__scopeSelect),n=pv(em,e.__scopeSelect),[s,i]=p.useState(!1),o=Ne(t,n.onScrollButtonChange);return ct(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?a.jsx(ok,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});ak.displayName=em;var ok=p.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,i=Qs("SelectScrollButton",r),o=p.useRef(null),l=Jd(r),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),ct(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),a.jsx(ne.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:H(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:H(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:H(s.onPointerLeave,()=>{c()})})}),VF="SelectSeparator",lk=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return a.jsx(ne.div,{"aria-hidden":!0,...n,ref:t})});lk.displayName=VF;var tm="SelectArrow",HF=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Xd(r),i=Ys(tm,r),o=Qs(tm,r);return i.open&&o.position==="popper"?a.jsx(_g,{...s,...n,ref:t}):null});HF.displayName=tm;var KF="SelectBubbleInput",ck=p.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const s=p.useRef(null),i=Ne(n,s),o=ev(t);return p.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const h=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[o,t]),a.jsx(ne.select,{...r,style:{...m_,...r.style},ref:i,defaultValue:t})});ck.displayName=KF;function uk(e){return e===""||e===void 0}function dk(e){const t=lt(e),r=p.useRef(""),n=p.useRef(0),s=p.useCallback(o=>{const l=r.current+o;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=p.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function hk(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=GF(e,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function GF(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var YF=FN,fk=BN,QF=qN,JF=WN,XF=VN,pk=HN,ZF=QN,mk=ZN,gk=tk,eU=rk,tU=sk,vk=ik,yk=ak,xk=lk;const wk=YF,bk=QF,mv=p.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(fk,{ref:n,className:G("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,a.jsx(JF,{asChild:!0,children:a.jsx(so,{className:"h-4 w-4 opacity-50"})})]}));mv.displayName=fk.displayName;const _k=p.forwardRef(({className:e,...t},r)=>a.jsx(vk,{ref:r,className:G("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(G2,{className:"h-4 w-4"})}));_k.displayName=vk.displayName;const jk=p.forwardRef(({className:e,...t},r)=>a.jsx(yk,{ref:r,className:G("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(so,{className:"h-4 w-4"})}));jk.displayName=yk.displayName;const gv=p.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>a.jsx(XF,{children:a.jsxs(pk,{ref:s,className:G("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[a.jsx(_k,{}),a.jsx(ZF,{className:G("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),a.jsx(jk,{})]})}));gv.displayName=pk.displayName;const rU=p.forwardRef(({className:e,...t},r)=>a.jsx(mk,{ref:r,className:G("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));rU.displayName=mk.displayName;const ed=p.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(gk,{ref:n,className:G("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(tU,{children:a.jsx(Li,{className:"h-4 w-4"})})}),a.jsx(eU,{children:t})]}));ed.displayName=gk.displayName;const nU=p.forwardRef(({className:e,...t},r)=>a.jsx(xk,{ref:r,className:G("-mx-1 my-1 h-px bg-muted",e),...t}));nU.displayName=xk.displayName;const df="id, inventory_id, creator_user_id, title, selected_items, mix_notes, banner_url, llm_review, is_public, likes_count, created_at, updated_at";function hf(e,t){return t?e.or(`is_public.eq.true,creator_user_id.eq.${t}`):e.eq("is_public",!0)}async function Cw(e,t){if(e.length===0)return[];const r=e.map(b=>b.id),n=e.map(b=>b.inventory_id).filter(Boolean),[s,i,o]=await Promise.all([P.from("blueprint_tags").select("blueprint_id, tag_id").in("blueprint_id",r),t?P.from("blueprint_likes").select("blueprint_id").eq("user_id",t).in("blueprint_id",r):Promise.resolve({data:[]}),n.length>0?P.from("inventories").select("id, title").in("id",n):Promise.resolve({data:[]})]),l=s.data||[],c=[...new Set(l.map(b=>b.tag_id))],{data:u}=c.length>0?await P.from("tags").select("id, slug").in("id",c):{data:[]},d=new Map((u||[]).map(b=>[b.id,b])),h=new Map;l.forEach(b=>{const g=d.get(b.tag_id);if(!g)return;const v=h.get(b.blueprint_id)||[];v.push(g),h.set(b.blueprint_id,v)});const f=new Set((i.data||[]).map(b=>b.blueprint_id)),m=new Map((o.data||[]).map(b=>[b.id,b.title]));return e.map(b=>({...b,tags:h.get(b.id)||[],user_liked:f.has(b.id),inventory_title:b.inventory_id&&m.get(b.inventory_id)||null}))}function sU(e,t){const{user:r}=Se();return Le({queryKey:["blueprint-search",e,t,r==null?void 0:r.id],queryFn:async()=>{const n=e.trim();let s=[];const i=t==="latest"?{column:"created_at",ascending:!1}:{column:"likes_count",ascending:!1};if(!n){let h=P.from("blueprints").select(df).order(i.column,{ascending:i.ascending}).limit(60);h=hf(h,r==null?void 0:r.id);const{data:f,error:m}=await h;if(m)throw m;return s=f||[],Cw(s,r==null?void 0:r.id)}const o=on(n),l=[];if(o){const{data:h}=await P.from("tags").select("id").eq("slug",o).maybeSingle();if(h!=null&&h.id){const{data:f}=await P.from("blueprint_tags").select("blueprint_id").eq("tag_id",h.id),m=(f||[]).map(b=>b.blueprint_id);if(m.length>0){let b=P.from("blueprints").select(df).in("id",m).order(i.column,{ascending:i.ascending});b=hf(b,r==null?void 0:r.id);const{data:g}=await b;l.push(...g||[])}}}let c=P.from("blueprints").select(df).ilike("title",`%${n}%`).order(i.column,{ascending:i.ascending});c=hf(c,r==null?void 0:r.id);const{data:u}=await c;return u&&l.push(...u),s=Array.from(new Map(l.map(h=>[h.id,h])).values()),Cw(s,r==null?void 0:r.id)}})}function iU(e=10){return Le({queryKey:["popular-blueprint-tags",e],queryFn:async()=>{const{data:t,error:r}=await P.from("blueprint_tags").select("tag_id");if(r)throw r;const n=new Map;(t||[]).forEach(c=>{n.set(c.tag_id,(n.get(c.tag_id)||0)+1)});const s=[...n.entries()].sort((c,u)=>u[1]-c[1]).slice(0,e).map(([c])=>c);if(s.length===0)return[];const{data:i,error:o}=await P.from("tags").select("id, slug").in("id",s);if(o)throw o;return(i||[]).map(c=>({id:c.id,slug:c.slug,count:n.get(c.id)||0})).sort((c,u)=>u.count-c.count)},staleTime:5*60*1e3})}const Ew="id, inventory_id, creator_user_id, title, selected_items, mix_notes, banner_url, llm_review, is_public, likes_count, created_at, updated_at";function aU(e=6){const{user:t}=Se();return Le({queryKey:["suggested-blueprints",t==null?void 0:t.id,e],queryFn:async()=>{let r=[];if(t!=null&&t.id){const{data:v}=await P.from("blueprint_likes").select("blueprint_id").eq("user_id",t.id),w=(v||[]).map(y=>y.blueprint_id);if(w.length>0){const{data:y}=await P.from("blueprint_tags").select("tag_id").in("blueprint_id",w);r=[...new Set((y||[]).map(x=>x.tag_id))]}}let n=[];if(r.length>0&&(t!=null&&t.id)){const{data:v}=await P.from("blueprint_tags").select("blueprint_id").in("tag_id",r),w=[...new Set((v||[]).map(j=>j.blueprint_id))],{data:y}=await P.from("blueprint_likes").select("blueprint_id").eq("user_id",t.id),x=new Set((y||[]).map(j=>j.blueprint_id)),_=w.filter(j=>!x.has(j));if(_.length>0){const{data:j}=await P.from("blueprints").select(Ew).in("id",_).eq("is_public",!0).order("likes_count",{ascending:!1}).limit(e);n=j||[]}}if(n.length<e){const v=n.map(x=>x.id),{data:w}=await P.from("blueprints").select(Ew).eq("is_public",!0).order("likes_count",{ascending:!1}).limit(e*2),y=(w||[]).filter(x=>!v.includes(x.id)).slice(0,e-n.length);n=[...n,...y]}if(n.length===0)return[];const s=n.map(v=>v.id),i=n.map(v=>v.inventory_id).filter(Boolean),[o,l,c]=await Promise.all([P.from("blueprint_tags").select("blueprint_id, tag_id").in("blueprint_id",s),t!=null&&t.id?P.from("blueprint_likes").select("blueprint_id").eq("user_id",t.id).in("blueprint_id",s):Promise.resolve({data:[]}),i.length>0?P.from("inventories").select("id, title").in("id",i):Promise.resolve({data:[]})]),u=o.data||[],d=[...new Set(u.map(v=>v.tag_id))],{data:h}=d.length>0?await P.from("tags").select("id, slug").in("id",d):{data:[]},f=new Map((h||[]).map(v=>[v.id,v])),m=new Map;u.forEach(v=>{const w=f.get(v.tag_id);if(!w)return;const y=m.get(v.blueprint_id)||[];y.push(w),m.set(v.blueprint_id,y)});const b=new Set((l.data||[]).map(v=>v.blueprint_id)),g=new Map((c.data||[]).map(v=>[v.id,v.title]));return n.map(v=>({...v,tags:m.get(v.id)||[],user_liked:b.has(v.id),inventory_title:v.inventory_id&&g.get(v.inventory_id)||null}))},staleTime:2*60*1e3})}const vv="id, inventory_id, creator_user_id, title, selected_items, steps, mix_notes, review_prompt, banner_url, llm_review, is_public, likes_count, source_blueprint_id, created_at, updated_at";async function Sk(e,t){const r=fv(e);if(r.length===0)return[];const{data:n,error:s}=await P.from("tags").select("id, slug").in("slug",r);if(s)throw s;const i=n||[],o=new Set(i.map(u=>u.slug)),l=r.filter(u=>!o.has(u));let c=[];if(l.length>0){const{data:u,error:d}=await P.from("tags").insert(l.map(h=>({slug:h,created_by:t}))).select("id, slug");if(d)throw d;c=u||[]}return[...i,...c]}function yv(e){const{user:t}=Se();return Le({queryKey:["blueprint",e,t==null?void 0:t.id],enabled:!!e,queryFn:async()=>{if(!e)return null;const{data:r,error:n}=await P.from("blueprints").select(vv).eq("id",e).maybeSingle();if(n)throw n;if(!r)return null;const[s,i,o]=await Promise.all([P.from("blueprint_tags").select("tag_id").eq("blueprint_id",e),t?P.from("blueprint_likes").select("id").eq("blueprint_id",e).eq("user_id",t.id):Promise.resolve({data:[]}),P.from("profiles").select("display_name, avatar_url").eq("user_id",r.creator_user_id).maybeSingle()]),l=(s.data||[]).map(d=>d.tag_id),{data:c}=l.length>0?await P.from("tags").select("id, slug").in("id",l):{data:[]},u=!!(i.data&&i.data.length>0);return{...r,tags:c||[],user_liked:u,creator_profile:o.data||null}}})}function Nk(){const{user:e}=Se(),t=Pt();return dt({mutationFn:async r=>{if(!e)throw new Error("Must be logged in");const{data:n,error:s}=await P.from("blueprints").insert({inventory_id:r.inventoryId,creator_user_id:e.id,title:r.title,selected_items:r.selectedItems,steps:r.steps,mix_notes:r.mixNotes,review_prompt:r.reviewPrompt,banner_url:r.bannerUrl,llm_review:r.llmReview,is_public:r.isPublic,source_blueprint_id:r.sourceBlueprintId||null}).select(vv).single();if(s)throw s;const i=await Sk(r.tags,e.id);if(i.length>0){const{error:o}=await P.from("blueprint_tags").insert(i.map(l=>({blueprint_id:n.id,tag_id:l.id})));if(o)throw o}return n},onSuccess:()=>{t.invalidateQueries({queryKey:["blueprint"]}),t.invalidateQueries({queryKey:["blueprint-comments"]})}})}function kk(){const{user:e}=Se(),t=Pt();return dt({mutationFn:async({blueprintId:r,liked:n})=>{if(!e)throw new Error("Must be logged in");if(n){const{error:s}=await P.from("blueprint_likes").delete().eq("blueprint_id",r).eq("user_id",e.id);if(s)throw s}else{const{error:s}=await P.from("blueprint_likes").insert({blueprint_id:r,user_id:e.id});if(s)throw s}},onSuccess:()=>{t.invalidateQueries({queryKey:["blueprint"]}),t.invalidateQueries({queryKey:["blueprint-search"]}),t.invalidateQueries({queryKey:["suggested-blueprints"]})}})}function oU(){const{user:e}=Se(),t=Pt();return dt({mutationFn:async r=>{if(!e)throw new Error("Must be logged in");const{data:n,error:s}=await P.from("blueprints").update({title:r.title,selected_items:r.selectedItems,steps:r.steps,mix_notes:r.mixNotes,review_prompt:r.reviewPrompt,banner_url:r.bannerUrl,llm_review:r.llmReview,is_public:r.isPublic}).eq("id",r.blueprintId).eq("creator_user_id",e.id).select(vv).single();if(s)throw s;const i=await Sk(r.tags,e.id),{error:o}=await P.from("blueprint_tags").delete().eq("blueprint_id",r.blueprintId);if(o)throw o;if(i.length>0){const{error:l}=await P.from("blueprint_tags").insert(i.map(c=>({blueprint_id:r.blueprintId,tag_id:c.id})));if(l)throw l}return n},onSuccess:(r,n)=>{t.invalidateQueries({queryKey:["blueprint",n.blueprintId]}),t.invalidateQueries({queryKey:["blueprint-search"]}),t.invalidateQueries({queryKey:["suggested-blueprints"]}),t.invalidateQueries({queryKey:["blueprint-comments",n.blueprintId]})}})}function lU(e){return Le({queryKey:["blueprint-comments",e],enabled:!!e,queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await P.from("blueprint_comments").select("id, content, created_at, user_id").eq("blueprint_id",e).order("created_at",{ascending:!1});if(r)throw r;const n=[...new Set((t||[]).map(o=>o.user_id))],{data:s}=n.length>0?await P.from("profiles").select("user_id, display_name, avatar_url").in("user_id",n):{data:[]},i=new Map((s||[]).map(o=>[o.user_id,o]));return(t||[]).map(o=>({...o,profile:i.get(o.user_id)||null}))}})}function cU(){const{user:e}=Se(),t=Pt();return dt({mutationFn:async({blueprintId:r,content:n})=>{if(!e)throw new Error("Must be logged in");const{error:s}=await P.from("blueprint_comments").insert({blueprint_id:r,user_id:e.id,content:n});if(s)throw s},onSuccess:(r,n)=>{t.invalidateQueries({queryKey:["blueprint-comments",n.blueprintId]})}})}function uU(e){return!e||typeof e!="object"||Array.isArray(e)?0:Object.values(e).reduce((t,r)=>t+(Array.isArray(r)?r.length:0),0)}function Ck({blueprint:e,onLike:t,followedTagIds:r,onToggleTag:n}){const s=e.tags.slice(0,3),i=e.tags.length-3,o=uU(e.selected_items);return a.jsx(ge,{to:`/blueprint/${e.id}`,className:"block group",children:a.jsx(K,{className:"h-full transition-all duration-300 hover:border-primary/40 hover:shadow-lg hover:shadow-primary/10 group-focus-visible:ring-2 group-focus-visible:ring-primary",children:a.jsxs(Y,{className:"p-5 flex flex-col h-full",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsx("h3",{className:"font-semibold text-lg line-clamp-1",children:e.title}),a.jsx(Nd,{className:"h-4 w-4 text-muted-foreground shrink-0"})]}),a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3 flex-grow",children:e.inventory_title?`From ${e.inventory_title}`:"Community blueprint"}),e.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[s.map(l=>a.jsxs(Pe,{variant:"secondary",className:`text-xs cursor-pointer transition-colors border ${r!=null&&r.has(l.id)?"bg-primary/15 text-primary border-primary/30 hover:bg-primary/20":"bg-muted/40 text-muted-foreground border-border/60 hover:bg-muted/60"}`,onClick:c=>{n&&(c.preventDefault(),c.stopPropagation(),n({id:l.id,slug:l.slug}))},children:["#",l.slug]},l.id)),i>0&&a.jsxs(Pe,{variant:"outline",className:"text-xs text-muted-foreground",children:["+",i," more"]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border/50",children:[a.jsx("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:a.jsxs("span",{className:"flex items-center gap-1",title:"Items in this blueprint",children:[a.jsx(Ar,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:o})]})}),a.jsxs(O,{variant:"ghost",size:"sm",className:`h-8 px-2 ${e.user_liked?"text-red-500 hover:text-red-600":"text-muted-foreground hover:text-foreground"}`,onClick:l=>{l.preventDefault(),l.stopPropagation(),t(e.id,e.user_liked)},"aria-label":e.user_liked?"Unlike blueprint":"Like blueprint",children:[a.jsx(Dt,{className:`h-4 w-4 ${e.user_liked?"fill-current":""}`}),a.jsx("span",{className:"ml-1 text-xs",children:e.likes_count})]})]})]})})})}function dU(e,t){return p.useReducer((r,n)=>t[r][n]??r,e)}var xv="ScrollArea",[Ek,U6]=Ft(xv),[hU,$r]=Ek(xv),Tk=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:i=600,...o}=e,[l,c]=p.useState(null),[u,d]=p.useState(null),[h,f]=p.useState(null),[m,b]=p.useState(null),[g,v]=p.useState(null),[w,y]=p.useState(0),[x,_]=p.useState(0),[j,N]=p.useState(!1),[k,S]=p.useState(!1),E=Ne(t,$=>c($)),A=go(s);return a.jsx(hU,{scope:r,type:n,dir:A,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:b,scrollbarXEnabled:j,onScrollbarXEnabledChange:N,scrollbarY:g,onScrollbarYChange:v,scrollbarYEnabled:k,onScrollbarYEnabledChange:S,onCornerWidthChange:y,onCornerHeightChange:_,children:a.jsx(ne.div,{dir:A,...o,ref:E,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":x+"px",...e.style}})})});Tk.displayName=xv;var Rk="ScrollAreaViewport",Pk=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:s,...i}=e,o=$r(Rk,r),l=p.useRef(null),c=Ne(t,l,o.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),a.jsx(ne.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:a.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});Pk.displayName=Rk;var Cn="ScrollAreaScrollbar",wv=p.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=$r(Cn,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,l=e.orientation==="horizontal";return p.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),s.type==="hover"?a.jsx(fU,{...n,ref:t,forceMount:r}):s.type==="scroll"?a.jsx(pU,{...n,ref:t,forceMount:r}):s.type==="auto"?a.jsx(Ak,{...n,ref:t,forceMount:r}):s.type==="always"?a.jsx(bv,{...n,ref:t}):null});wv.displayName=Cn;var fU=p.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=$r(Cn,e.__scopeScrollArea),[i,o]=p.useState(!1);return p.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),a.jsx(Rt,{present:r||i,children:a.jsx(Ak,{"data-state":i?"visible":"hidden",...n,ref:t})})}),pU=p.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=$r(Cn,e.__scopeScrollArea),i=e.orientation==="horizontal",o=eh(()=>c("SCROLL_END"),100),[l,c]=dU("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),p.useEffect(()=>{const u=s.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const f=()=>{const m=u[d];h!==m&&(c("SCROLL"),o()),h=m};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[s.viewport,i,c,o]),a.jsx(Rt,{present:r||l!=="hidden",children:a.jsx(bv,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:H(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:H(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Ak=p.forwardRef((e,t)=>{const r=$r(Cn,e.__scopeScrollArea),{forceMount:n,...s}=e,[i,o]=p.useState(!1),l=e.orientation==="horizontal",c=eh(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:d)}},10);return Za(r.viewport,c),Za(r.content,c),a.jsx(Rt,{present:n||i,children:a.jsx(bv,{"data-state":i?"visible":"hidden",...s,ref:t})})}),bv=p.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,s=$r(Cn,e.__scopeScrollArea),i=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Lk(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function h(f,m){return wU(f,o.current,l,m)}return r==="horizontal"?a.jsx(mU,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollLeft,m=Tw(f,l,s.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,s.dir))}}):r==="vertical"?a.jsx(gU,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollTop,m=Tw(f,l);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),mU=p.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,i=$r(Cn,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=Ne(t,c,i.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(Ok,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Zd(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(f),Fk(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:rd(o.paddingLeft),paddingEnd:rd(o.paddingRight)}})}})}),gU=p.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,i=$r(Cn,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=Ne(t,c,i.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(Ok,{"data-orientation":"vertical",...s,ref:u,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Zd(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(f),Fk(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:rd(o.paddingTop),paddingEnd:rd(o.paddingBottom)}})}})}),[vU,Ik]=Ek(Cn),Ok=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...f}=e,m=$r(Cn,r),[b,g]=p.useState(null),v=Ne(t,E=>g(E)),w=p.useRef(null),y=p.useRef(""),x=m.viewport,_=n.content-n.viewport,j=lt(d),N=lt(c),k=eh(h,10);function S(E){if(w.current){const A=E.clientX-w.current.left,$=E.clientY-w.current.top;u({x:A,y:$})}}return p.useEffect(()=>{const E=A=>{const $=A.target;(b==null?void 0:b.contains($))&&j(A,_)};return document.addEventListener("wheel",E,{passive:!1}),()=>document.removeEventListener("wheel",E,{passive:!1})},[x,b,_,j]),p.useEffect(N,[n,N]),Za(b,k),Za(m.content,k),a.jsx(vU,{scope:r,scrollbar:b,hasThumb:s,onThumbChange:lt(i),onThumbPointerUp:lt(o),onThumbPositionChange:N,onThumbPointerDown:lt(l),children:a.jsx(ne.div,{...f,ref:v,style:{position:"absolute",...f.style},onPointerDown:H(e.onPointerDown,E=>{E.button===0&&(E.target.setPointerCapture(E.pointerId),w.current=b.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),S(E))}),onPointerMove:H(e.onPointerMove,S),onPointerUp:H(e.onPointerUp,E=>{const A=E.target;A.hasPointerCapture(E.pointerId)&&A.releasePointerCapture(E.pointerId),document.body.style.webkitUserSelect=y.current,m.viewport&&(m.viewport.style.scrollBehavior=""),w.current=null})})})}),td="ScrollAreaThumb",Mk=p.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Ik(td,e.__scopeScrollArea);return a.jsx(Rt,{present:r||s.hasThumb,children:a.jsx(yU,{ref:t,...n})})}),yU=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...s}=e,i=$r(td,r),o=Ik(td,r),{onThumbPositionChange:l}=o,c=Ne(t,h=>o.onThumbChange(h)),u=p.useRef(void 0),d=eh(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const h=i.viewport;if(h){const f=()=>{if(d(),!u.current){const m=bU(h,l);u.current=m,l()}};return l(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[i.viewport,d,l]),a.jsx(ne.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:H(e.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),b=h.clientX-m.left,g=h.clientY-m.top;o.onThumbPointerDown({x:b,y:g})}),onPointerUp:H(e.onPointerUp,o.onThumbPointerUp)})});Mk.displayName=td;var _v="ScrollAreaCorner",Dk=p.forwardRef((e,t)=>{const r=$r(_v,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?a.jsx(xU,{...e,ref:t}):null});Dk.displayName=_v;var xU=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,s=$r(_v,r),[i,o]=p.useState(0),[l,c]=p.useState(0),u=!!(i&&l);return Za(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),Za(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),u?a.jsx(ne.div,{...n,ref:t,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function rd(e){return e?parseInt(e,10):0}function Lk(e,t){const r=e/t;return isNaN(r)?0:r}function Zd(e){const t=Lk(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function wU(e,t,r,n="ltr"){const s=Zd(r),i=s/2,o=t||i,l=s-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,h=n==="ltr"?[0,d]:[d*-1,0];return $k([c,u],h)(e)}function Tw(e,t,r="ltr"){const n=Zd(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,o=t.content-t.viewport,l=i-n,c=r==="ltr"?[0,o]:[o*-1,0],u=Qp(e,c);return $k([0,o],[0,l])(u)}function $k(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function Fk(e,t){return e>0&&e<t}var bU=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function s(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function eh(e,t){const r=lt(e),n=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),p.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Za(e,t){const r=lt(t);ct(()=>{let n=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(n),s.unobserve(e)}}},[e,r])}var Uk=Tk,_U=Pk,jU=Dk;const jv=p.forwardRef(({className:e,children:t,...r},n)=>a.jsxs(Uk,{ref:n,className:G("relative overflow-hidden",e),...r,children:[a.jsx(_U,{className:"h-full w-full rounded-[inherit]",children:t}),a.jsx(Sv,{}),a.jsx(jU,{})]}));jv.displayName=Uk.displayName;const Sv=p.forwardRef(({className:e,orientation:t="vertical",...r},n)=>a.jsx(wv,{ref:n,orientation:t,className:G("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:a.jsx(Mk,{className:"relative flex-1 rounded-full bg-border"})}));Sv.displayName=wv.displayName;function Bk({tags:e,selectedTag:t,onSelectTag:r,followedTagIds:n,onToggleFollow:s}){const i=p.useRef(null),o=!!n&&!!s;return e.length===0?null:a.jsx("div",{className:"relative",children:a.jsxs(jv,{className:"w-full whitespace-nowrap",ref:i,children:[a.jsxs("div",{className:"flex gap-2 pb-2",children:[t&&a.jsxs(O,{variant:"outline",size:"sm",className:"h-8 gap-1 text-xs shrink-0",onClick:()=>r(null),children:[a.jsx(ir,{className:"h-3 w-3"}),"Clear filter"]}),e.map(l=>{const c=(n==null?void 0:n.has(l.id))??!1;return a.jsxs(Pe,{variant:t===l.slug?"default":"secondary",className:`cursor-pointer shrink-0 transition-colors ${t===l.slug?"bg-primary text-primary-foreground hover:bg-primary/90":o?c?"bg-primary/15 text-primary border border-primary/30 hover:bg-primary/20":"bg-muted/40 text-muted-foreground border border-border/60 hover:bg-muted/60":"hover:bg-secondary/80"}`,onClick:()=>{r(t===l.slug?null:l.slug),s==null||s({id:l.id,slug:l.slug})},role:"button",tabIndex:0,onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),r(t===l.slug?null:l.slug),s==null||s({id:l.id,slug:l.slug}))},"aria-pressed":t===l.slug,children:["#",l.slug,a.jsxs("span",{className:"ml-1 text-xs opacity-70",children:["(",l.count,")"]})]},l.id)})]}),a.jsx(Sv,{orientation:"horizontal"})]})})}function SU({blueprints:e,isLoading:t,onLike:r,followedTagIds:n,onToggleTag:s}){return t?a.jsxs("section",{className:"space-y-3",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Suggested for You"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:3}).map((i,o)=>a.jsx(K,{children:a.jsxs(Y,{className:"p-5 space-y-3",children:[a.jsx(_e,{className:"h-5 w-3/4"}),a.jsx(_e,{className:"h-10 w-full"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(_e,{className:"h-5 w-16"}),a.jsx(_e,{className:"h-5 w-20"})]}),a.jsx(_e,{className:"h-4 w-full"})]})},o))})]}):e.length===0?null:a.jsxs("section",{className:"space-y-3",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Suggested for You"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:e.slice(0,3).map(i=>a.jsx(Ck,{blueprint:i,onLike:r,followedTagIds:n,onToggleTag:s},i.id))})]})}function NU(){const[e,t]=p.useState(""),[r,n]=p.useState(null),[s,i]=p.useState("popular"),{user:o}=Se(),{toast:l}=$t(),c=r||e,{data:u,isLoading:d}=sU(c,s),{data:h=[],isLoading:f}=iU(12),{data:m=[],isLoading:b}=aU(6),g=kk(),{followedIds:v,toggleFollow:w}=Yd(),y=new Set(m.map(S=>S.id)),x=p.useMemo(()=>u?c?u:u.filter(S=>!y.has(S.id)):[],[u,y,c]),_=async(S,E)=>{if(!o){l({title:"Sign in required",description:"Please sign in to like blueprints.",variant:"destructive"});return}try{await g.mutateAsync({blueprintId:S,liked:E})}catch(A){l({title:"Action failed",description:A instanceof Error?A.message:"Please try again.",variant:"destructive"})}},j=S=>{n(S),S&&t("")},N=async S=>{if(!o){l({title:"Sign in required",description:"Please sign in to follow tags."});return}try{await w(S)}catch(E){l({title:"Tag update failed",description:E instanceof Error?E.message:"Please try again.",variant:"destructive"})}},k=!c&&o;return a.jsxs("div",{className:"min-h-screen bg-background relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute top-1/3 -left-20 w-60 h-60 bg-accent/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-20 right-1/4 w-40 h-40 bg-primary/3 rounded-full blur-2xl"})]}),a.jsx(St,{}),a.jsxs("main",{className:"relative max-w-6xl mx-auto px-4 py-8 space-y-8",children:[a.jsx(K,{className:"border-border/50 bg-card/60 backdrop-blur-sm",children:a.jsxs(Y,{className:"pt-6 space-y-2",children:[a.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:"Blueprint Library"}),a.jsx("h2",{className:"text-xl font-semibold",children:"Pick a collection, then build your blueprint"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Browse blueprints, open one, and start shaping your routine."})]})}),a.jsxs("section",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-3xl font-semibold",children:"Blueprint Library"}),a.jsx(ge,{to:"/inventory",children:a.jsxs(O,{size:"sm",className:"gap-2",children:[a.jsx(Ar,{className:"h-4 w-4"}),"Build from Library"]})})]}),a.jsx("p",{className:"text-muted-foreground",children:"Search, sort, and explore the best blueprints from the community."})]}),a.jsx(K,{className:"bg-card/60 backdrop-blur-sm",children:a.jsxs(Y,{className:"p-4 flex flex-col gap-3 sm:flex-row sm:items-center",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(io,{className:"h-4 w-4 text-muted-foreground shrink-0"}),a.jsx(Fe,{value:e,onChange:S=>{t(S.target.value),S.target.value&&n(null)},placeholder:"Search blueprints by title or tag...",className:"border-none shadow-none focus-visible:ring-0 bg-transparent"})]}),a.jsx("div",{className:"w-full sm:w-56",children:a.jsxs(wk,{value:s,onValueChange:S=>i(S),children:[a.jsx(mv,{children:a.jsx(bk,{placeholder:"Sort by"})}),a.jsxs(gv,{children:[a.jsx(ed,{value:"popular",children:"Most liked"}),a.jsx(ed,{value:"latest",children:"Newest"})]})]})})]})}),!f&&h.length>0&&a.jsx(Bk,{tags:h,selectedTag:r,onSelectTag:j,followedTagIds:v,onToggleFollow:N}),!o&&a.jsx(K,{className:"bg-card/60 backdrop-blur-sm",children:a.jsxs(Y,{className:"py-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold",children:"Sign in to personalize"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Follow tags and like blueprints to shape what you see."})]}),a.jsx(ge,{to:"/auth",children:a.jsx(O,{size:"sm",children:"Sign in"})})]})}),k&&a.jsx(SU,{blueprints:m,isLoading:b,onLike:_,followedTagIds:v,onToggleTag:N}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-lg font-semibold",children:c?`Results for "${c}"`:"All Blueprints"}),d?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((S,E)=>a.jsx(K,{children:a.jsxs(Y,{className:"p-5 space-y-3",children:[a.jsx(_e,{className:"h-5 w-3/4"}),a.jsx(_e,{className:"h-10 w-full"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(_e,{className:"h-5 w-16"}),a.jsx(_e,{className:"h-5 w-20"})]}),a.jsx(_e,{className:"h-4 w-full"})]})},E))}):x.length>0?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(S=>a.jsx(Ck,{blueprint:S,onLike:_,followedTagIds:v,onToggleTag:N},S.id))}):a.jsx(K,{className:"bg-card/60 backdrop-blur-sm",children:a.jsxs(Y,{className:"py-12 text-center space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"No blueprints found"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:c?"Try a different search or clear filters.":"Be the first to publish a blueprint!"}),a.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:c?a.jsx(O,{variant:"outline",onClick:()=>{t(""),n(null)},children:"Clear search"}):a.jsx(ge,{to:"/inventory",children:a.jsx(O,{children:"Build from Library"})})})]})})]})]})]})}var kU="Label",zk=p.forwardRef((e,t)=>a.jsx(ne.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));zk.displayName=kU;var qk=zk;const CU=Sd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),We=p.forwardRef(({className:e,...t},r)=>a.jsx(qk,{ref:r,className:G(CU(),e),...t}));We.displayName=qk.displayName;var EU="Separator",Rw="horizontal",TU=["horizontal","vertical"],Wk=p.forwardRef((e,t)=>{const{decorative:r,orientation:n=Rw,...s}=e,i=RU(n)?n:Rw,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(ne.div,{"data-orientation":i,...l,...s,ref:t})});Wk.displayName=EU;function RU(e){return TU.includes(e)}var Vk=Wk;const Nv=p.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},s)=>a.jsx(Vk,{ref:s,decorative:r,orientation:t,className:G("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));Nv.displayName=Vk.displayName;function PU(){const e=Gs(),{signIn:t,signUp:r,user:n}=Se(),{toast:s}=$t(),[i,o]=p.useState(!1),[l,c]=p.useState(!1),[u,d]=p.useState(""),[h,f]=p.useState(""),[m,b]=p.useState(""),[g,v]=p.useState(""),[w,y]=p.useState("");if(n)return e("/"),null;const x=async N=>{N.preventDefault(),o(!0);const{error:k}=await t(u,h);k?s({title:"Login failed",description:k.message,variant:"destructive"}):(s({title:"Welcome back!",description:"You have successfully logged in."}),e("/")),o(!1)},_=async N=>{N.preventDefault(),o(!0);const{error:k}=await r(m,g,w);k?s({title:"Signup failed",description:k.message,variant:"destructive"}):(s({title:"Account created!",description:"Welcome to Blueprints. Your account is ready."}),e("/")),o(!1)},j=async()=>{c(!0);const N=new URL("/remix-of-stackwise-advisor/",window.location.origin).toString(),{error:k}=await P.auth.signInWithOAuth({provider:"google",options:{redirectTo:N}});k&&(s({title:"Google sign-in failed",description:k.message,variant:"destructive"}),c(!1))};return a.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:[a.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[a.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/10 rounded-full blur-3xl animate-pulse"}),a.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent/10 rounded-full blur-3xl animate-pulse delay-1000"})]}),a.jsxs(K,{className:"w-full max-w-md",children:[a.jsxs(Ye,{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[a.jsx(ag,{className:"h-8 w-8 text-primary"}),a.jsx("span",{className:"text-2xl font-bold",children:"Blueprints"})]}),a.jsx(mt,{children:"Welcome"}),a.jsx(sl,{children:"Sign in to save your blueprints and share with the community"})]}),a.jsxs(Y,{className:"space-y-4",children:[a.jsxs(O,{type:"button",variant:"outline",className:"w-full gap-2",onClick:j,disabled:i||l,children:[l?a.jsx(bi,{className:"h-4 w-4 animate-spin"}):a.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx(Nv,{className:"w-full"})}),a.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:a.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or continue with email"})})]}),a.jsxs(vo,{defaultValue:"login",className:"w-full",children:[a.jsxs(Ui,{className:"grid w-full grid-cols-2",children:[a.jsx(Tr,{value:"login",children:"Login"}),a.jsx(Tr,{value:"signup",children:"Sign Up"})]}),a.jsx(Rr,{value:"login",children:a.jsxs("form",{onSubmit:x,className:"space-y-4 mt-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{htmlFor:"login-email",children:"Email"}),a.jsx(Fe,{id:"login-email",type:"email",placeholder:"you@example.com",value:u,onChange:N=>d(N.target.value),required:!0,disabled:i||l})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{htmlFor:"login-password",children:"Password"}),a.jsx(Fe,{id:"login-password",type:"password",placeholder:"",value:h,onChange:N=>f(N.target.value),required:!0,disabled:i||l,minLength:6})]}),a.jsx(O,{type:"submit",className:"w-full",disabled:i||l,children:i?a.jsxs(a.Fragment,{children:[a.jsx(bi,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})}),a.jsx(Rr,{value:"signup",children:a.jsxs("form",{onSubmit:_,className:"space-y-4 mt-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{htmlFor:"signup-name",children:"Display Name"}),a.jsx(Fe,{id:"signup-name",type:"text",placeholder:"Your name",value:w,onChange:N=>y(N.target.value),disabled:i||l})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{htmlFor:"signup-email",children:"Email"}),a.jsx(Fe,{id:"signup-email",type:"email",placeholder:"you@example.com",value:m,onChange:N=>b(N.target.value),required:!0,disabled:i||l})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{htmlFor:"signup-password",children:"Password"}),a.jsx(Fe,{id:"signup-password",type:"password",placeholder:"",value:g,onChange:N=>v(N.target.value),required:!0,disabled:i||l,minLength:6})]}),a.jsx(O,{type:"submit",className:"w-full",disabled:i||l,children:i?a.jsxs(a.Fragment,{children:[a.jsx(bi,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):"Create Account"})]})})]})]}),a.jsx(Vd,{className:"text-center text-sm text-muted-foreground",children:a.jsx("p",{className:"w-full",children:"By signing up, you agree to our Terms of Service and Privacy Policy."})})]})]})}const ar=p.forwardRef(({className:e,...t},r)=>a.jsx("textarea",{className:G("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));ar.displayName="Textarea";var th="Switch",[AU,B6]=Ft(th),[IU,OU]=AU(th),Hk=p.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=e,[f,m]=p.useState(null),b=Ne(t,x=>m(x)),g=p.useRef(!1),v=f?d||!!f.closest("form"):!0,[w,y]=Lr({prop:s,defaultProp:i??!1,onChange:u,caller:th});return a.jsxs(IU,{scope:r,checked:w,disabled:l,children:[a.jsx(ne.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":Qk(w),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:b,onClick:H(e.onClick,x=>{y(_=>!_),v&&(g.current=x.isPropagationStopped(),g.current||x.stopPropagation())})}),v&&a.jsx(Yk,{control:f,bubbles:!g.current,name:n,value:c,checked:w,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});Hk.displayName=th;var Kk="SwitchThumb",Gk=p.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=OU(Kk,r);return a.jsx(ne.span,{"data-state":Qk(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});Gk.displayName=Kk;var MU="SwitchBubbleInput",Yk=p.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...s},i)=>{const o=p.useRef(null),l=Ne(o,i),c=ev(r),u=vg(t);return p.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&m){const b=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(b)}},[c,r,n]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Yk.displayName=MU;function Qk(e){return e?"checked":"unchecked"}var Jk=Hk,DU=Gk;const Ls=p.forwardRef(({className:e,...t},r)=>a.jsx(Jk,{className:G("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:r,children:a.jsx(DU,{className:G("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ls.displayName=Jk.displayName;const LU=2*1024*1024;function $U({userId:e,currentAvatarUrl:t,displayName:r,onAvatarChange:n,disabled:s}){const{toast:i}=$t(),o=p.useRef(null),[l,c]=p.useState(""),[u,d]=p.useState(!1),h=r.slice(0,2).toUpperCase(),f=async b=>{var v;const g=(v=b.target.files)==null?void 0:v[0];if(g){if(g.size>LU){i({title:"File too large",description:"Please select an image under 2MB.",variant:"destructive"});return}if(!g.type.startsWith("image/")){i({title:"Invalid file type",description:"Please select an image file.",variant:"destructive"});return}d(!0);try{const w=g.name.split(".").pop()||"jpg",y=Date.now(),x=`${e}/${y}.${w}`,{error:_}=await P.storage.from("avatars").upload(x,g,{upsert:!0});if(_)throw _;const{data:j}=P.storage.from("avatars").getPublicUrl(x);n(j.publicUrl),i({title:"Avatar uploaded",description:"Your new avatar has been set."})}catch(w){i({title:"Upload failed",description:w instanceof Error?w.message:"Please try again.",variant:"destructive"})}finally{d(!1),o.current&&(o.current.value="")}}},m=()=>{if(l.trim())try{new URL(l.trim()),n(l.trim()),c(""),i({title:"Avatar updated",description:"Your avatar URL has been set."})}catch{i({title:"Invalid URL",description:"Please enter a valid image URL.",variant:"destructive"})}};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(nn,{className:"h-20 w-20",children:[a.jsx(sn,{src:t||void 0,alt:r}),a.jsx(an,{className:"bg-primary/10 text-primary text-xl",children:h})]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx("p",{className:"font-medium text-foreground",children:"Profile Picture"}),a.jsx("p",{children:"Upload an image or paste a URL"})]})]}),a.jsxs(vo,{defaultValue:"upload",className:"w-full",children:[a.jsxs(Ui,{className:"grid w-full grid-cols-2",children:[a.jsxs(Tr,{value:"upload",className:"gap-1.5",children:[a.jsx(sx,{className:"h-4 w-4"}),"Upload"]}),a.jsxs(Tr,{value:"url",className:"gap-1.5",children:[a.jsx(eR,{className:"h-4 w-4"}),"URL"]})]}),a.jsx(Rr,{value:"upload",className:"mt-3",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:f,className:"hidden",disabled:s||u}),a.jsx(O,{type:"button",variant:"outline",className:"w-full",onClick:()=>{var b;return(b=o.current)==null?void 0:b.click()},disabled:s||u,children:u?a.jsxs(a.Fragment,{children:[a.jsx(bi,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):a.jsxs(a.Fragment,{children:[a.jsx(sx,{className:"h-4 w-4 mr-2"}),"Choose Image"]})}),a.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Max file size: 2MB"})]})}),a.jsx(Rr,{value:"url",className:"mt-3",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{htmlFor:"avatar-url",children:"Image URL"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Fe,{id:"avatar-url",value:l,onChange:b=>c(b.target.value),placeholder:"https://example.com/avatar.jpg",disabled:s}),a.jsx(O,{type:"button",onClick:m,disabled:s||!l.trim(),children:"Set"})]})]})})]})]})}function FU(){var v;const{user:e,profile:t,isLoading:r,updateProfile:n}=Se(),{toast:s}=$t(),[i,o]=p.useState(""),[l,c]=p.useState(""),[u,d]=p.useState(""),[h,f]=p.useState(!1),[m,b]=p.useState(!1);if(p.useEffect(()=>{o((t==null?void 0:t.display_name)||""),c((t==null?void 0:t.avatar_url)||""),d((t==null?void 0:t.bio)||"")},[t]),p.useEffect(()=>{async function w(){if(!e)return;const{data:y}=await P.from("profiles").select("is_public").eq("user_id",e.id).maybeSingle();y&&f(y.is_public)}w()},[e]),r)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})});if(!e)return a.jsx(El,{to:"/auth",replace:!0});const g=async w=>{var _;w.preventDefault(),b(!0);const{error:y}=await n({display_name:i.trim()||null,avatar_url:l.trim()||null,bio:u.trim()||null}),{error:x}=await P.from("profiles").update({is_public:h}).eq("user_id",e.id);s(y||x?{title:"Update failed",description:((_=y||x)==null?void 0:_.message)||"Please try again.",variant:"destructive"}:{title:"Settings saved",description:"Your profile settings have been updated."}),b(!1)};return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[a.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent/5 rounded-full blur-3xl"})]}),a.jsx(St,{}),a.jsxs("main",{className:"max-w-2xl mx-auto px-4 py-10 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your profile and account preferences"})]}),a.jsxs("form",{onSubmit:g,className:"space-y-6",children:[a.jsxs(K,{children:[a.jsxs(Ye,{children:[a.jsx(mt,{children:"Profile"}),a.jsx(sl,{children:"Your public profile information"})]}),a.jsxs(Y,{className:"space-y-6",children:[a.jsx($U,{userId:e.id,currentAvatarUrl:l,displayName:i||((v=e.email)==null?void 0:v.split("@")[0])||"User",onAvatarChange:c,disabled:m}),a.jsx(Nv,{}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{htmlFor:"display-name",children:"Display Name"}),a.jsx(Fe,{id:"display-name",value:i,onChange:w=>o(w.target.value),placeholder:"Your name",disabled:m})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{htmlFor:"bio",children:"Bio"}),a.jsx(ar,{id:"bio",value:u,onChange:w=>d(w.target.value),placeholder:"A short bio about you",rows:4,disabled:m})]})]})]}),a.jsxs(K,{children:[a.jsxs(Ye,{children:[a.jsx(mt,{children:"Privacy"}),a.jsx(sl,{children:"Control who can see your profile"})]}),a.jsx(Y,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(We,{htmlFor:"public-profile",children:"Make profile public"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"When enabled, anyone can view your profile page"})]}),a.jsx(Ls,{id:"public-profile",checked:h,onCheckedChange:f,disabled:m})]})})]}),a.jsxs(K,{children:[a.jsxs(Ye,{children:[a.jsx(mt,{children:"Account"}),a.jsx(sl,{children:"Your account information"})]}),a.jsx(Y,{className:"space-y-4",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{children:"Email"}),a.jsx(Fe,{value:e.email||"",disabled:!0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed"})]})})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(O,{type:"submit",disabled:m,children:m?"Saving...":"Save Changes"})})]})]})]})}function UU({targetUserId:e}){const{user:t}=Se(),{toast:r}=$t(),{data:n,isLoading:s}=DN(e),i=LN(),o=$N(),[l,c]=p.useState(!1);if(!t||t.id===e)return null;const u=async()=>{try{n?(await o.mutateAsync(e),r({title:"Unfollowed",description:"You are no longer following this user."})):(await i.mutateAsync(e),r({title:"Following!",description:"You are now following this user."}))}catch(h){r({title:"Action failed",description:h instanceof Error?h.message:"Please try again.",variant:"destructive"})}},d=i.isPending||o.isPending;return n?a.jsx(O,{variant:"outline",size:"sm",onClick:u,disabled:d||s,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),className:l?"border-destructive text-destructive hover:bg-destructive/10":"",children:l?"Unfollow":a.jsxs(a.Fragment,{children:[a.jsx(oR,{className:"h-4 w-4 mr-1"}),"Following"]})}):a.jsxs(O,{size:"sm",onClick:u,disabled:d||s,children:[a.jsx(lR,{className:"h-4 w-4 mr-1"}),"Follow"]})}function BU({profile:e,onFollowersClick:t,onFollowingClick:r}){const{user:n}=Se(),s=(n==null?void 0:n.id)===e.user_id,i=e.display_name||"Anonymous",o=i.slice(0,2).toUpperCase(),l=q5(new Date(e.created_at),"MMMM yyyy");return a.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 items-start sm:items-center",children:[a.jsxs(nn,{className:"h-20 w-20 sm:h-24 sm:w-24",children:[a.jsx(sn,{src:e.avatar_url||void 0,alt:i}),a.jsx(an,{className:"bg-primary/10 text-primary text-2xl",children:o})]}),a.jsxs("div",{className:"flex-1 space-y-3",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-2xl font-bold",children:i}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[a.jsx(K2,{className:"h-4 w-4"}),a.jsxs("span",{children:["Joined ",l]})]})]}),a.jsx("div",{className:"flex gap-2",children:s?a.jsx(O,{variant:"outline",size:"sm",asChild:!0,children:a.jsxs(ge,{to:"/settings",children:[a.jsx(z_,{className:"h-4 w-4 mr-1"}),"Edit Profile"]})}):a.jsx(UU,{targetUserId:e.user_id})})]}),e.bio&&a.jsx("p",{className:"text-muted-foreground max-w-lg",children:e.bio}),a.jsxs("div",{className:"flex gap-4 text-sm",children:[a.jsxs("button",{onClick:t,className:"hover:underline focus:outline-none",children:[a.jsx("span",{className:"font-semibold",children:e.follower_count})," ",a.jsx("span",{className:"text-muted-foreground",children:"Followers"})]}),a.jsxs("button",{onClick:r,className:"hover:underline focus:outline-none",children:[a.jsx("span",{className:"font-semibold",children:e.following_count})," ",a.jsx("span",{className:"text-muted-foreground",children:"Following"})]})]})]})]})}function zU(e){return Se(),Le({queryKey:["user-profile",e],queryFn:async()=>{if(!e)return null;const{data:t,error:r}=await P.from("profiles").select("id, user_id, display_name, avatar_url, bio, is_public, follower_count, following_count, created_at").eq("user_id",e).maybeSingle();if(r)throw r;return t},enabled:!!e})}function qU(e,t=4){return Le({queryKey:["user-blueprints",e,t],queryFn:async()=>{if(!e)return[];const{data:r,error:n}=await P.from("blueprints").select("id, title, selected_items, likes_count, created_at").eq("creator_user_id",e).eq("is_public",!0).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r||[]},enabled:!!e})}function WU(e,t=4){return Le({queryKey:["user-inventories",e,t],queryFn:async()=>{if(!e)return[];const{data:r,error:n}=await P.from("inventories").select("id, title, prompt_categories, likes_count, created_at").eq("creator_user_id",e).eq("is_public",!0).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r||[]},enabled:!!e})}function VU(e,t=4){return Le({queryKey:["user-liked-blueprints",e,t],queryFn:async()=>{if(!e)return[];const{data:r,error:n}=await P.from("blueprint_likes").select("blueprint_id, created_at").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(n)throw n;if(!r||r.length===0)return[];const s=r.map(d=>d.blueprint_id),{data:i,error:o}=await P.from("blueprints").select("id, title, creator_user_id, likes_count, created_at").in("id",s).eq("is_public",!0);if(o)throw o;const l=[...new Set((i||[]).map(d=>d.creator_user_id))],{data:c}=await P.from("profiles").select("user_id, display_name, avatar_url").in("user_id",l),u=new Map((c||[]).map(d=>[d.user_id,d]));return(i||[]).map(d=>({...d,creator_profile:u.get(d.creator_user_id)||null}))},enabled:!!e})}function HU(e,t=4){return Le({queryKey:["user-activity",e,t],queryFn:async()=>{if(!e)return[];const{data:r}=await P.from("blueprints").select("id, title, created_at").eq("creator_user_id",e).eq("is_public",!0).order("created_at",{ascending:!1}).limit(t),{data:n}=await P.from("blueprint_likes").select("id, blueprint_id, created_at").eq("user_id",e).order("created_at",{ascending:!1}).limit(t),s=(n||[]).map(f=>f.blueprint_id),{data:i}=s.length>0?await P.from("blueprints").select("id, title").in("id",s).eq("is_public",!0):{data:[]},o=new Map((i||[]).map(f=>[f.id,f.title])),{data:l}=await P.from("blueprint_comments").select("id, blueprint_id, created_at").eq("user_id",e).order("created_at",{ascending:!1}).limit(t),c=(l||[]).map(f=>f.blueprint_id),{data:u}=c.length>0?await P.from("blueprints").select("id, title").in("id",c).eq("is_public",!0):{data:[]},d=new Map((u||[]).map(f=>[f.id,f.title]));return[...(r||[]).map(f=>({type:"blueprint_created",id:f.id,title:`Created "${f.title}"`,created_at:f.created_at,target_id:f.id})),...(n||[]).filter(f=>o.has(f.blueprint_id)).map(f=>({type:"blueprint_liked",id:f.id,title:`Liked "${o.get(f.blueprint_id)}"`,created_at:f.created_at,target_id:f.blueprint_id})),...(l||[]).filter(f=>d.has(f.blueprint_id)).map(f=>({type:"comment",id:f.id,title:`Commented on "${d.get(f.blueprint_id)}"`,created_at:f.created_at,target_id:f.blueprint_id}))].sort((f,m)=>new Date(m.created_at).getTime()-new Date(f.created_at).getTime()).slice(0,t)},enabled:!!e})}function KU(e){return!e||typeof e!="object"||Array.isArray(e)?0:Object.values(e).reduce((t,r)=>t+(Array.isArray(r)?r.length:0),0)}function GU({userId:e}){const{data:t,isLoading:r}=qU(e,4),{data:n,isLoading:s}=WU(e,4),{data:i,isLoading:o}=VU(e,4),{data:l,isLoading:c}=HU(e,4);return a.jsxs(vo,{defaultValue:"blueprints",className:"w-full",children:[a.jsxs(Ui,{className:"w-full justify-start",children:[a.jsxs(Tr,{value:"blueprints",className:"gap-1.5",children:[a.jsx(Ar,{className:"h-4 w-4"}),"Blueprints"]}),a.jsxs(Tr,{value:"inventories",className:"gap-1.5",children:[a.jsx(up,{className:"h-4 w-4"}),"Libraries"]}),a.jsxs(Tr,{value:"liked",className:"gap-1.5",children:[a.jsx(Dt,{className:"h-4 w-4"}),"Liked"]}),a.jsxs(Tr,{value:"activity",className:"gap-1.5",children:[a.jsx($h,{className:"h-4 w-4"}),"Activity"]})]}),a.jsx(Rr,{value:"blueprints",className:"mt-4",children:r?a.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:Array.from({length:4}).map((u,d)=>a.jsx(_e,{className:"h-24"},d))}):t&&t.length>0?a.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:t.map(u=>a.jsx(ge,{to:`/blueprint/${u.id}`,children:a.jsx(K,{className:"h-full transition hover:border-primary/40",children:a.jsxs(Y,{className:"p-4",children:[a.jsx("h4",{className:"font-medium truncate",children:u.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[a.jsxs(Pe,{variant:"secondary",className:"text-xs",children:[KU(u.selected_items)," items"]}),a.jsx("span",{children:""}),a.jsx(Dt,{className:"h-3 w-3"}),a.jsx("span",{children:u.likes_count})]})]})})},u.id))}):a.jsx(Vc,{icon:a.jsx(Ar,{className:"h-8 w-8"}),message:"No public blueprints yet"})}),a.jsx(Rr,{value:"inventories",className:"mt-4",children:s?a.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:Array.from({length:4}).map((u,d)=>a.jsx(_e,{className:"h-24"},d))}):n&&n.length>0?a.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:n.map(u=>a.jsx(ge,{to:`/inventory/${u.id}`,children:a.jsx(K,{className:"h-full transition hover:border-primary/40",children:a.jsxs(Y,{className:"p-4",children:[a.jsx("h4",{className:"font-medium truncate",children:u.title}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:u.prompt_categories}),a.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[a.jsx(Dt,{className:"h-3 w-3"}),a.jsx("span",{children:u.likes_count})]})]})})},u.id))}):a.jsx(Vc,{icon:a.jsx(up,{className:"h-8 w-8"}),message:"No public inventories yet"})}),a.jsx(Rr,{value:"liked",className:"mt-4",children:o?a.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:Array.from({length:4}).map((u,d)=>a.jsx(_e,{className:"h-24"},d))}):i&&i.length>0?a.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:i.map(u=>{var d;return a.jsx(ge,{to:`/blueprint/${u.id}`,children:a.jsx(K,{className:"h-full transition hover:border-primary/40",children:a.jsxs(Y,{className:"p-4",children:[a.jsx("h4",{className:"font-medium truncate",children:u.title}),a.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["by ",((d=u.creator_profile)==null?void 0:d.display_name)||"Anonymous"]}),a.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[a.jsx(Dt,{className:"h-3 w-3 fill-current text-destructive"}),a.jsx("span",{children:u.likes_count})]})]})})},u.id)})}):a.jsx(Vc,{icon:a.jsx(Dt,{className:"h-8 w-8"}),message:"No liked blueprints yet"})}),a.jsx(Rr,{value:"activity",className:"mt-4",children:c?a.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((u,d)=>a.jsx(_e,{className:"h-16"},d))}):l&&l.length>0?a.jsx("div",{className:"space-y-3",children:l.map(u=>a.jsx(ge,{to:`/blueprint/${u.target_id}`,children:a.jsx(K,{className:"transition hover:border-primary/40",children:a.jsxs(Y,{className:"p-4 flex items-center gap-3",children:[a.jsxs("div",{className:"h-8 w-8 rounded-full bg-muted flex items-center justify-center",children:[u.type==="blueprint_created"&&a.jsx(Ar,{className:"h-4 w-4 text-primary"}),u.type==="blueprint_liked"&&a.jsx(Dt,{className:"h-4 w-4 text-destructive"}),u.type==="comment"&&a.jsx($h,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:u.title}),a.jsx("p",{className:"text-xs text-muted-foreground",children:Ai(new Date(u.created_at),{addSuffix:!0})})]}),a.jsx(ig,{className:"h-4 w-4 text-muted-foreground"})]})})},u.id))}):a.jsx(Vc,{icon:a.jsx($h,{className:"h-8 w-8"}),message:"No recent activity"})})]})}function Vc({icon:e,message:t}){return a.jsx(K,{children:a.jsx(Y,{className:"py-12 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center text-muted-foreground",children:e}),a.jsx("p",{className:"text-muted-foreground",children:t})]})})})}function Pw({userId:e,type:t,open:r,onOpenChange:n}){const{data:s,isLoading:i}=pF(t==="followers"?e:void 0),{data:o,isLoading:l}=mF(t==="following"?e:void 0),c=t==="followers"?i:l,u=t==="followers"?s:o,d=t==="followers"?"Followers":"Following";return a.jsx(Jg,{open:r,onOpenChange:n,children:a.jsxs(Wd,{className:"sm:max-w-md",children:[a.jsx(Xg,{children:a.jsx(Zg,{children:d})}),a.jsx(jv,{className:"max-h-[400px]",children:c?a.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((h,f)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(_e,{className:"h-10 w-10 rounded-full"}),a.jsx(_e,{className:"h-4 w-32"})]},f))}):u&&u.length>0?a.jsx("div",{className:"space-y-2",children:u.map(h=>a.jsx(YU,{user:h,onClose:()=>n(!1)},h.user_id))}):a.jsx("p",{className:"text-center text-muted-foreground py-8",children:t==="followers"?"No followers yet":"Not following anyone yet"})})]})})}function YU({user:e,onClose:t}){const r=e.display_name||"Anonymous",n=r.slice(0,2).toUpperCase();return a.jsxs(ge,{to:`/u/${e.user_id}`,onClick:t,className:"flex items-center gap-3 p-2 rounded-lg hover:bg-muted/50 transition-colors",children:[a.jsxs(nn,{className:"h-10 w-10",children:[a.jsx(sn,{src:e.avatar_url||void 0,alt:r}),a.jsx(an,{className:"bg-primary/10 text-primary text-sm",children:n})]}),a.jsx("span",{className:"font-medium",children:r})]})}function QU(){const{userId:e}=po(),{user:t}=Se(),{data:r,isLoading:n,error:s}=zU(e),[i,o]=p.useState(!1),[l,c]=p.useState(!1);if(!e)return a.jsx(El,{to:"/auth",replace:!0});const u=(t==null?void 0:t.id)===e,d=(r==null?void 0:r.is_public)||u;return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[a.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent/5 rounded-full blur-3xl"})]}),a.jsx(St,{}),a.jsx("main",{className:"max-w-4xl mx-auto px-4 py-8 space-y-8",children:n?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx(_e,{className:"h-24 w-24 rounded-full"}),a.jsxs("div",{className:"space-y-3 flex-1",children:[a.jsx(_e,{className:"h-8 w-48"}),a.jsx(_e,{className:"h-4 w-32"}),a.jsx(_e,{className:"h-4 w-64"})]})]}),a.jsx(_e,{className:"h-10 w-full"}),a.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:Array.from({length:4}).map((h,f)=>a.jsx(_e,{className:"h-24"},f))})]}):s?a.jsx(K,{children:a.jsx(Y,{className:"py-12 text-center",children:a.jsx("p",{className:"text-muted-foreground",children:"Failed to load profile. Please try again."})})}):r?d?a.jsxs(a.Fragment,{children:[a.jsx(BU,{profile:r,onFollowersClick:()=>o(!0),onFollowingClick:()=>c(!0)}),!r.is_public&&u&&a.jsx(K,{className:"border-dashed",children:a.jsxs(Y,{className:"py-4 text-center text-sm text-muted-foreground",children:["Your profile is currently ",a.jsx("strong",{children:"private"}),". Only you can see this page."," ",a.jsx("a",{href:"/settings",className:"text-primary hover:underline",children:"Make it public"})," ","to let others discover you."]})}),a.jsx(GU,{userId:e}),a.jsx(Pw,{userId:e,type:"followers",open:i,onOpenChange:o}),a.jsx(Pw,{userId:e,type:"following",open:l,onOpenChange:c})]}):a.jsx(K,{children:a.jsx(Y,{className:"py-16 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center",children:a.jsx(tR,{className:"h-8 w-8 text-muted-foreground"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold",children:"This profile is private"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"This user has chosen to keep their profile private."})]})]})})}):a.jsx(K,{children:a.jsx(Y,{className:"py-12 text-center",children:a.jsx("p",{className:"text-muted-foreground",children:"Profile not found."})})})})]})}function JU(){const{user:e}=Se(),t=Pt(),r=Le({queryKey:["tags-directory",e==null?void 0:e.id],queryFn:async()=>{const{data:o,error:l}=await P.from("tags").select("id, slug, follower_count, created_at").order("follower_count",{ascending:!1}).limit(200);if(l)throw l;if(!e)return o||[];const c=await P.from("tag_follows").select("tag_id").eq("user_id",e.id),u=new Set((c.data||[]).map(d=>d.tag_id));return(o||[]).map(d=>({...d,is_following:u.has(d.id)}))}}),n=dt({mutationFn:async o=>{if(!e)throw new Error("Must be logged in");const{error:l}=await P.from("tag_follows").insert({tag_id:o,user_id:e.id});if(l)throw l},onSuccess:()=>t.invalidateQueries({queryKey:["tags-directory"]})}),s=dt({mutationFn:async o=>{if(!e)throw new Error("Must be logged in");const{error:l}=await P.from("tag_follows").delete().eq("tag_id",o).eq("user_id",e.id);if(l)throw l},onSuccess:()=>t.invalidateQueries({queryKey:["tags-directory"]})}),i=dt({mutationFn:async o=>{if(!e)throw new Error("Must be logged in");const l=on(o);if(!l)throw new Error("Invalid tag");const{data:c,error:u}=await P.from("tags").select("id, slug, follower_count, created_at").eq("slug",l).maybeSingle();if(u)throw u;if(c)return c;const{data:d,error:h}=await P.from("tags").insert({slug:l,created_by:e.id}).select("id, slug, follower_count, created_at").single();if(h)throw h;return await P.from("tag_follows").insert({tag_id:d.id,user_id:e.id}),d},onSuccess:()=>t.invalidateQueries({queryKey:["tags-directory"]})});return{tags:r.data||[],isLoading:r.isLoading,error:r.error,followTag:n.mutateAsync,unfollowTag:s.mutateAsync,createTag:i.mutateAsync,isUpdating:n.isPending||s.isPending}}function kv(){return Le({queryKey:["tag-suggestions"],queryFn:async()=>{const{data:e,error:t}=await P.from("tags").select("slug").order("follower_count",{ascending:!1}).limit(200);if(t)throw t;return(e||[]).map(r=>r.slug)}})}function XU(e=12){const{user:t}=Se();return Le({queryKey:["suggested-tags",t==null?void 0:t.id,e],queryFn:async()=>{const{data:r,error:n}=await P.from("tags").select("id, slug, follower_count").order("follower_count",{ascending:!1}).limit(100);if(n)throw n;if(!r||r.length===0)return[];if(!t)return r.slice(0,e).map(m=>({...m,reason:"popular"}));const{data:s}=await P.from("tag_follows").select("tag_id").eq("user_id",t.id),i=new Set((s||[]).map(m=>m.tag_id));if(i.size===0)return r.slice(0,e).map(m=>({...m,reason:"popular"}));const o=Array.from(i),{data:l}=await P.from("blueprint_tags").select("blueprint_id").in("tag_id",o),c=[...new Set((l||[]).map(m=>m.blueprint_id))],u=new Map;if(c.length>0){const{data:m}=await P.from("blueprint_tags").select("tag_id").in("blueprint_id",c.slice(0,50)).not("tag_id","in",`(${o.join(",")})`);(m||[]).forEach(b=>{i.has(b.tag_id)||u.set(b.tag_id,(u.get(b.tag_id)||0)+1)})}const d=[],h=new Set,f=Array.from(u.entries()).sort((m,b)=>b[1]-m[1]).slice(0,Math.floor(e/2));for(const[m]of f){const b=r.find(g=>g.id===m);b&&!i.has(b.id)&&(d.push({...b,reason:"related"}),h.add(b.id))}for(const m of r){if(d.length>=e)break;!i.has(m.id)&&!h.has(m.id)&&d.push({...m,reason:"popular"})}return d.slice(0,e)},staleTime:6e4})}function ZU(){const{user:e}=Se(),{toast:t}=$t(),{tags:r,isLoading:n,followTag:s,unfollowTag:i,createTag:o,isUpdating:l}=JU(),{data:c,isLoading:u}=XU(12),[d,h]=p.useState(""),[f,m]=p.useState(""),[b]=zO();p.useEffect(()=>{const x=b.get("q");x&&h(x)},[b]);const{followedTags:g,allTags:v}=p.useMemo(()=>{const x=on(d),_=x?r.filter(j=>j.slug.includes(x)):r;return{followedTags:_.filter(j=>j.is_following),allTags:_}},[d,r]),w=async()=>{if(!e){t({title:"Sign in required",description:"Please sign in to create or follow tags."});return}const x=on(f);if(!x){t({title:"Invalid tag",description:"Use letters, numbers, and dashes only.",variant:"destructive"});return}try{await o(x),m(""),t({title:"Tag created",description:`#${x} is ready to follow.`})}catch(_){t({title:"Failed to create tag",description:_ instanceof Error?_.message:"Please try again",variant:"destructive"})}},y=async(x,_)=>{if(!e){t({title:"Sign in required",description:"Please sign in to manage tags."});return}try{_?await i(x):await s(x)}catch(j){t({title:_?"Failed to unfollow":"Failed to follow",description:j instanceof Error?j.message:"Please try again",variant:"destructive"})}};return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[a.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent/5 rounded-full blur-3xl"})]}),a.jsx(St,{}),a.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-8 space-y-8",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Tags"}),a.jsx("p",{className:"text-muted-foreground",children:"Follow topics to personalize your feed. Create new tags to categorize your work."})]}),a.jsx(K,{className:"border-border/50 bg-card/60 backdrop-blur-sm",children:a.jsxs(Y,{className:"pt-6 space-y-2",children:[a.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:"Discover Topics"}),a.jsx("h2",{className:"text-xl font-semibold",children:"Find your community signals"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Follow tags to shape your Wall, or create new ones as you publish."})]})}),a.jsx(K,{children:a.jsxs(Y,{className:"pt-6 space-y-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(io,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Fe,{placeholder:"Search tags...",value:d,onChange:x=>h(x.target.value),className:"pl-9"})]}),d&&a.jsx(O,{variant:"ghost",size:"sm",onClick:()=>h(""),children:"Clear"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(kd,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Fe,{placeholder:"Create a new tag...",value:f,onChange:x=>m(x.target.value),onKeyDown:x=>x.key==="Enter"&&w(),disabled:l,className:"pl-9"})]}),a.jsxs(O,{onClick:w,disabled:l||!f.trim(),className:"gap-2",children:[a.jsx(Cd,{className:"h-4 w-4"}),"Create"]})]})]})}),e&&g.length>0&&!d&&a.jsxs("section",{className:"space-y-3 animate-fade-in",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Li,{className:"h-4 w-4 text-primary"}),a.jsx("h2",{className:"text-lg font-semibold",children:"Your Tags"}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",g.length,")"]})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(x=>a.jsx(ff,{tag:x,isFollowing:!0,onToggle:()=>y(x.id,!0),disabled:l},x.id))})]}),e&&!d&&c&&c.length>0&&a.jsxs("section",{className:"space-y-3 animate-fade-in",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(en,{className:"h-4 w-4 text-primary"}),a.jsx("h2",{className:"text-lg font-semibold",children:"Suggested for You"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(x=>{const _=r.find(N=>N.id===x.id),j=(_==null?void 0:_.is_following)??!1;return a.jsx(ff,{tag:x,isFollowing:j,onToggle:()=>y(x.id,j),disabled:l,badge:x.reason==="related"?"related":void 0},x.id)})}),u&&a.jsx("div",{className:"flex gap-2",children:Array.from({length:6}).map((x,_)=>a.jsx("div",{className:"h-8 w-20 rounded-full bg-muted animate-pulse"},_))})]}),a.jsxs("section",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(aR,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("h2",{className:"text-lg font-semibold",children:d?"Search Results":"All Tags"}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",v.length,")"]})]}),n?a.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:12}).map((x,_)=>a.jsx("div",{className:"h-9 w-24 rounded-full bg-muted animate-pulse"},_))}):v.length===0?a.jsx(K,{children:a.jsx(Y,{className:"py-10 text-center",children:a.jsx("p",{className:"text-muted-foreground",children:d?"No tags match your search.":"No tags yet. Create the first one!"})})}):a.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(x=>a.jsx(ff,{tag:x,isFollowing:x.is_following??!1,onToggle:()=>y(x.id,x.is_following??!1),disabled:l},x.id))})]})]})]})}function ff({tag:e,isFollowing:t,onToggle:r,disabled:n,badge:s}){return a.jsx("button",{type:"button",onClick:r,disabled:n,className:"group",title:t?"Unfollow tag":"Follow tag",children:a.jsxs(Pe,{variant:t?"default":"outline",className:`
          gap-1.5 px-3 py-2 text-sm cursor-pointer transition-all border
          ${t?"bg-primary/15 text-primary border-primary/30 hover:bg-primary/20":"bg-muted/40 text-muted-foreground border-border/60 hover:bg-muted/60"}
          disabled:opacity-50
        `,children:[a.jsx(kd,{className:"h-3 w-3"}),e.slug,e.follower_count>0&&a.jsxs("span",{className:"flex items-center gap-0.5 text-xs opacity-70 ml-1",children:[a.jsx(tc,{className:"h-3 w-3"}),e.follower_count]}),s==="related"&&a.jsx("span",{className:"text-[10px] uppercase tracking-wider opacity-60 ml-1",children:"related"})]})})}function eB(){const{user:e}=Se(),t=Pt(),r=Le({queryKey:["post-bookmarks",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const{data:s,error:i}=await P.from("post_bookmarks").select("post_id, created_at").eq("user_id",e.id).order("created_at",{ascending:!1});if(i)throw i;return s||[]},enabled:!!e}),n=dt({mutationFn:async({postId:s,bookmarked:i})=>{if(!e)throw new Error("Must be logged in");if(i){const{error:o}=await P.from("post_bookmarks").delete().eq("post_id",s).eq("user_id",e.id);if(o)throw o}else{const{error:o}=await P.from("post_bookmarks").insert({post_id:s,user_id:e.id});if(o)throw o}},onSuccess:()=>{t.invalidateQueries({queryKey:["post-bookmarks"]}),t.invalidateQueries({queryKey:["wall-posts"]})}});return{bookmarks:r.data||[],isLoading:r.isLoading,toggleBookmark:n.mutateAsync,isUpdating:n.isPending}}function tB(e,t){const r=new Map,n=[];return e.forEach(s=>{r.set(s.id,{...s,user_liked:t.has(s.id),children:[]})}),r.forEach(s=>{s.parent_id&&r.has(s.parent_id)?r.get(s.parent_id).children.push(s):n.push(s)}),n}function Xk(e,t){const r=(n,s)=>t==="latest"?new Date(s.created_at).getTime()-new Date(n.created_at).getTime():s.likes_count!==n.likes_count?s.likes_count-n.likes_count:new Date(s.created_at).getTime()-new Date(n.created_at).getTime();e.sort(r),e.forEach(n=>Xk(n.children,t))}function rB(e,t){const{user:r}=Se(),n=Pt(),s=Le({queryKey:["wall-comments",e,r==null?void 0:r.id,t],queryFn:async()=>{const{data:u,error:d}=await P.from("wall_comments").select("id, post_id, user_id, parent_id, body, likes_count, created_at, updated_at").eq("post_id",e).order("created_at",{ascending:!0});if(d)throw d;if(!u||u.length===0)return[];const h=u.map(x=>x.id),f=[...new Set(u.map(x=>x.user_id))],[m,b]=await Promise.all([P.from("profiles").select("user_id, display_name, avatar_url").in("user_id",f),r?P.from("comment_likes").select("comment_id").eq("user_id",r.id).in("comment_id",h):Promise.resolve({data:[]})]),g=new Map((m.data||[]).map(x=>[x.user_id,x])),v=new Set((b.data||[]).map(x=>x.comment_id)),w=u.map(x=>({...x,profile:g.get(x.user_id)||{display_name:null,avatar_url:null},user_liked:v.has(x.id),children:[]})),y=tB(w,v);return Xk(y,t),y}}),i=dt({mutationFn:async({body:u,parentId:d})=>{if(!r)throw new Error("Must be logged in");const{error:h}=await P.from("wall_comments").insert({post_id:e,user_id:r.id,body:u,parent_id:d??null});if(h)throw h},onSuccess:()=>n.invalidateQueries({queryKey:["wall-comments",e]})}),o=dt({mutationFn:async({commentId:u,body:d})=>{if(!r)throw new Error("Must be logged in");const{error:h}=await P.from("wall_comments").update({body:d}).eq("id",u).eq("user_id",r.id);if(h)throw h},onSuccess:()=>n.invalidateQueries({queryKey:["wall-comments",e]})}),l=dt({mutationFn:async u=>{if(!r)throw new Error("Must be logged in");const{error:d}=await P.from("wall_comments").delete().eq("id",u).eq("user_id",r.id);if(d)throw d},onSuccess:()=>n.invalidateQueries({queryKey:["wall-comments",e]})}),c=dt({mutationFn:async({commentId:u,liked:d})=>{if(!r)throw new Error("Must be logged in");if(d){const{error:h}=await P.from("comment_likes").delete().eq("comment_id",u).eq("user_id",r.id);if(h)throw h}else{const{error:h}=await P.from("comment_likes").insert({comment_id:u,user_id:r.id});if(h)throw h}},onSuccess:()=>n.invalidateQueries({queryKey:["wall-comments",e]})});return{comments:s.data||[],isLoading:s.isLoading,addComment:i.mutateAsync,updateComment:o.mutateAsync,deleteComment:l.mutateAsync,toggleLike:c.mutateAsync,isUpdating:i.isPending||o.isPending||l.isPending||c.isPending}}function Zk({comment:e,onReply:t,onEdit:r,onDelete:n,onToggleLike:s,currentUserId:i,depth:o=0}){const[l,c]=p.useState(!1),[u,d]=p.useState(!1),[h,f]=p.useState(""),[m,b]=p.useState(e.body),[g,v]=p.useState(5),w=e.profile.display_name||"Anonymous",y=w.slice(0,2).toUpperCase(),x=i===e.user_id,_=e.updated_at!==e.created_at,j=async()=>{h.trim()&&(await t(e.id,h.trim()),f(""),c(!1))},N=async()=>{m.trim()&&(await r(e.id,m.trim()),d(!1))};return a.jsxs("div",{className:G("space-y-2",o>0&&"border-l border-border/50 pl-4"),children:[a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(nn,{className:"h-8 w-8",children:[a.jsx(sn,{src:e.profile.avatar_url||void 0}),a.jsx(an,{className:"bg-primary/10 text-primary text-xs",children:y})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx("span",{className:"font-medium text-foreground",children:w}),a.jsx("span",{children:Ai(new Date(e.created_at),{addSuffix:!0})}),_&&a.jsx("span",{children:"(edited)"})]}),u?a.jsxs("div",{className:"space-y-2 mt-2",children:[a.jsx(ar,{value:m,onChange:k=>b(k.target.value),rows:2}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(O,{size:"sm",onClick:N,children:"Save"}),a.jsx(O,{size:"sm",variant:"outline",onClick:()=>d(!1),children:"Cancel"})]})]}):a.jsx("p",{className:"text-sm mt-1 whitespace-pre-wrap",children:e.body}),a.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs",children:[a.jsxs(O,{variant:"ghost",size:"sm",className:e.user_liked?"text-red-500":"",onClick:()=>s(e.id,e.user_liked),children:[a.jsx(Dt,{className:G("h-3 w-3 mr-1",e.user_liked&&"fill-current")}),e.likes_count]}),a.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>c(!l),children:[a.jsx(sR,{className:"h-3 w-3 mr-1"})," Reply"]}),x&&a.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>d(!u),children:[a.jsx(U_,{className:"h-3 w-3 mr-1"})," Edit"]}),x&&a.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>n(e.id),children:[a.jsx(dp,{className:"h-3 w-3 mr-1"})," Delete"]})]}),l&&a.jsxs("div",{className:"space-y-2 mt-2",children:[a.jsx(ar,{value:h,onChange:k=>f(k.target.value),placeholder:"Write a reply...",rows:2}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(O,{size:"sm",onClick:j,children:"Reply"}),a.jsx(O,{size:"sm",variant:"outline",onClick:()=>c(!1),children:"Cancel"})]})]})]})]}),e.children.length>0&&a.jsxs("div",{className:"space-y-3",children:[e.children.slice(0,g).map(k=>a.jsx(Zk,{comment:k,onReply:t,onEdit:r,onDelete:n,onToggleLike:s,currentUserId:i,depth:o+1},k.id)),e.children.length>g&&a.jsxs(O,{variant:"outline",size:"sm",onClick:()=>v(k=>k+5),children:["Load more replies (",e.children.length-g,")"]})]})]})}function nB({postId:e}){const{user:t}=Se(),[r,n]=p.useState("top"),{comments:s,isLoading:i,addComment:o,updateComment:l,deleteComment:c,toggleLike:u}=rB(e,r),[d,h]=p.useState(""),f=async()=>{d.trim()&&(await o({body:d.trim(),parentId:null}),h(""))};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-sm font-medium",children:"Comments"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(O,{variant:r==="top"?"default":"outline",size:"sm",onClick:()=>n("top"),children:"Top"}),a.jsx(O,{variant:r==="latest"?"default":"outline",size:"sm",onClick:()=>n("latest"),children:"Latest"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ar,{value:d,onChange:m=>h(m.target.value),placeholder:t?"Join the discussion...":"Sign in to comment",rows:3,disabled:!t}),a.jsx(O,{onClick:f,disabled:!t||!d.trim(),children:"Post Comment"})]}),i?a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading comments..."}):s.length===0?a.jsx("p",{className:"text-sm text-muted-foreground",children:"No comments yet. Be the first!"}):a.jsx("div",{className:"space-y-4",children:s.map(m=>a.jsx(Zk,{comment:m,onReply:async(b,g)=>o({body:g,parentId:b}),onEdit:async(b,g)=>l({commentId:b,body:g}),onDelete:c,onToggleLike:(b,g)=>u({commentId:b,liked:g}),currentUserId:t==null?void 0:t.id},m.id))})]})}const sB={blend:F_,protein:Q2,stack:ag},iB={blend:"bg-purple-500/10 text-purple-500",protein:"bg-green-500/10 text-green-500",stack:"bg-blue-500/10 text-blue-500"};function aB(){const{postId:e}=po(),{user:t,isLoading:r}=Se(),{toast:n}=$t(),s=Pt(),{bookmarks:i,isLoading:o,toggleBookmark:l,isUpdating:c}=eB(),u=p.useMemo(()=>i.map(v=>v.post_id),[i]),d=p.useMemo(()=>new Set(u),[u]);if(r)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})});if(!t)return a.jsx(El,{to:"/auth",replace:!0});if(!e)return a.jsx(El,{to:"/wall",replace:!0});const h=["wall-post",e,t==null?void 0:t.id,u],{data:f,isLoading:m}=Le({queryKey:h,enabled:!!e&&!!t&&!o,queryFn:async()=>{const{data:v,error:w}=await P.from("wall_posts").select("id, user_id, recipe_id, caption, likes_count, created_at").eq("id",e).single();if(w)throw w;const[y,x,_,j]=await Promise.all([P.from("user_recipes").select("id, name, recipe_type, items, analysis, visibility").eq("id",v.recipe_id).single(),P.from("profiles").select("user_id, display_name, avatar_url").eq("user_id",v.user_id).single(),P.from("post_likes").select("post_id").eq("post_id",e).eq("user_id",t.id),P.from("recipe_tags").select("recipe_id, tag_id").eq("recipe_id",v.recipe_id)]),N=j.data||[],k=[...new Set(N.map(E=>E.tag_id))],{data:S}=k.length>0?await P.from("tags").select("id, slug").in("id",k):{data:[]};return{...v,recipe:y.data||{id:"",name:"Unknown",recipe_type:"blend",items:[],analysis:null,visibility:"public"},profile:x.data||{display_name:null,avatar_url:null},tags:S||[],user_liked:(_.data||[]).length>0,user_bookmarked:d.has(v.id)}}}),b=dt({mutationFn:async({liked:v})=>{if(!t)throw new Error("Must be logged in");v?await P.from("post_likes").delete().eq("post_id",e).eq("user_id",t.id):await P.from("post_likes").insert({post_id:e,user_id:t.id})},onMutate:async({liked:v})=>{await s.cancelQueries({queryKey:h});const w=s.getQueryData(h);return w&&s.setQueryData(h,{...w,user_liked:!v,likes_count:v?w.likes_count-1:w.likes_count+1}),{previousPost:w}},onError:(v,w,y)=>{s.setQueryData(h,y==null?void 0:y.previousPost),n({title:"Error",description:"Failed to update like. Please try again.",variant:"destructive"})}}),g=async v=>{try{await l({postId:e,bookmarked:v}),s.invalidateQueries({queryKey:h})}catch(w){n({title:"Failed to update bookmark",description:w instanceof Error?w.message:"Please try again",variant:"destructive"})}};return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[a.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent/5 rounded-full blur-3xl"})]}),a.jsx(St,{}),a.jsx("main",{className:"max-w-3xl mx-auto px-4 py-8",children:m?a.jsx(K,{children:a.jsx(Y,{className:"py-12 text-center text-muted-foreground",children:"Loading post..."})}):f?a.jsxs(K,{children:[a.jsxs(Ye,{className:"flex flex-row items-center gap-3 pb-2",children:[a.jsxs(nn,{className:"h-10 w-10",children:[a.jsx(sn,{src:f.profile.avatar_url||void 0}),a.jsx(an,{className:"bg-primary/10 text-primary text-sm",children:(f.profile.display_name||"Anonymous").slice(0,2).toUpperCase()})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-sm",children:f.profile.display_name||"Anonymous"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:Ai(new Date(f.created_at),{addSuffix:!0})})]}),a.jsxs(Pe,{variant:"secondary",className:iB[f.recipe.recipe_type],children:[(()=>{const v=sB[f.recipe.recipe_type];return a.jsx(v,{className:"h-3 w-3 mr-1"})})(),f.recipe.recipe_type]})]}),a.jsxs(Y,{className:"space-y-3",children:[a.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[a.jsx("h3",{className:"font-semibold",children:f.recipe.name}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[Array.isArray(f.recipe.items)?f.recipe.items.length:0," ingredient",Array.isArray(f.recipe.items)&&f.recipe.items.length!==1?"s":""]}),f.caption&&a.jsx("p",{className:"text-sm pt-2 border-t border-border/50",children:f.caption})]}),f.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:f.tags.map(v=>a.jsx(ge,{to:`/tags?q=${v.slug}`,children:a.jsxs(Pe,{variant:"outline",className:"text-xs hover:border-primary hover:text-primary",children:["#",v.slug]})},v.id))})]}),a.jsxs(Vd,{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4 w-full",children:[a.jsxs(O,{variant:"ghost",size:"sm",className:f.user_liked?"text-red-500":"",onClick:()=>b.mutate({liked:f.user_liked}),children:[a.jsx(Dt,{className:`h-4 w-4 mr-1 ${f.user_liked?"fill-current":""}`}),f.likes_count]}),a.jsxs(O,{variant:"ghost",size:"sm",className:f.user_bookmarked?"text-primary":"",onClick:()=>g(f.user_bookmarked),disabled:c,children:[a.jsx(H2,{className:`h-4 w-4 mr-1 ${f.user_bookmarked?"fill-current":""}`}),"Save"]})]}),a.jsx(nB,{postId:f.id})]})]}):a.jsx(K,{children:a.jsx(Y,{className:"py-12 text-center text-muted-foreground",children:"Post not found."})})})]})}const hu="id, title, prompt_inventory, prompt_categories, generated_schema, review_sections, include_score, creator_user_id, is_public, likes_count, created_at, updated_at";async function oB(e,t){const r=fv(e);if(r.length===0)return[];const{data:n,error:s}=await P.from("tags").select("id, slug").in("slug",r);if(s)throw s;const i=n||[],o=new Set(i.map(u=>u.slug)),l=r.filter(u=>!o.has(u));let c=[];if(l.length>0){const{data:u,error:d}=await P.from("tags").insert(l.map(h=>({slug:h,created_by:t}))).select("id, slug");if(d)throw d;c=u||[]}return[...i,...c]}async function rm(e,t){if(e.length===0)return[];const r=e.map(m=>m.id),[n,s,i]=await Promise.all([P.from("inventory_tags").select("inventory_id, tag_id").in("inventory_id",r),t?P.from("inventory_likes").select("inventory_id").eq("user_id",t).in("inventory_id",r):Promise.resolve({data:[]}),P.from("blueprints").select("inventory_id").in("inventory_id",r)]),o=n.data||[],l=[...new Set(o.map(m=>m.tag_id))],{data:c}=l.length>0?await P.from("tags").select("id, slug").in("id",l):{data:[]},u=new Map((c||[]).map(m=>[m.id,m])),d=new Map;o.forEach(m=>{const b=u.get(m.tag_id);if(!b)return;const g=d.get(m.inventory_id)||[];g.push(b),d.set(m.inventory_id,g)});const h=new Set((s.data||[]).map(m=>m.inventory_id)),f=new Map;return(i.data||[]).forEach(m=>{m.inventory_id&&f.set(m.inventory_id,(f.get(m.inventory_id)||0)+1)}),e.map(m=>({...m,tags:d.get(m.id)||[],user_liked:h.has(m.id),is_owner:t===m.creator_user_id,blueprint_count:f.get(m.id)||0}))}function lB(e){const{user:t}=Se();return Le({queryKey:["inventory-search",e,t==null?void 0:t.id],queryFn:async()=>{const r=e.trim();let n=[];if(!r){let c=P.from("inventories").select(hu).order("likes_count",{ascending:!1}).limit(60);t!=null&&t.id?c=c.or(`is_public.eq.true,creator_user_id.eq.${t.id}`):c=c.eq("is_public",!0);const{data:u,error:d}=await c;if(d)throw d;return n=u||[],rm(n,t==null?void 0:t.id)}const s=on(r),i=[];if(s){const{data:c}=await P.from("tags").select("id").eq("slug",s).maybeSingle();if(c!=null&&c.id){const{data:u}=await P.from("inventory_tags").select("inventory_id").eq("tag_id",c.id),d=(u||[]).map(h=>h.inventory_id);if(d.length>0){const{data:h}=await P.from("inventories").select(hu).in("id",d).order("likes_count",{ascending:!1});i.push(...h||[])}}}const{data:o}=await P.from("inventories").select(hu).ilike("title",`%${r}%`).order("likes_count",{ascending:!1});return o&&i.push(...o),n=Array.from(new Map(i.map(c=>[c.id,c])).values()),rm(n,t==null?void 0:t.id)}})}function Cv(e){const{user:t}=Se();return Le({queryKey:["inventory",e,t==null?void 0:t.id],enabled:!!e,queryFn:async()=>{const{data:r,error:n}=await P.from("inventories").select(hu).eq("id",e).single();if(n)throw n;return r?(await rm([r],t==null?void 0:t.id))[0]??null:null}})}function eC(){const e=Pt(),{user:t}=Se();return dt({mutationFn:async({inventoryId:r,liked:n})=>{if(!(t!=null&&t.id))throw new Error("Must be logged in");if(n){const{error:s}=await P.from("inventory_likes").delete().eq("inventory_id",r).eq("user_id",t.id);if(s)throw s}else{const{error:s}=await P.from("inventory_likes").insert({inventory_id:r,user_id:t.id});if(s)throw s}},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory-search"]}),e.invalidateQueries({queryKey:["inventory"]})}})}function cB(){const e=Pt(),{user:t}=Se();return dt({mutationFn:async r=>{if(!(t!=null&&t.id))throw new Error("Must be logged in");const{data:n,error:s}=await P.from("inventories").insert({title:r.title,prompt_inventory:r.promptInventory,prompt_categories:r.promptCategories,generated_schema:r.generatedSchema,review_sections:r.reviewSections,include_score:r.includeScore,creator_user_id:t.id,is_public:r.isPublic}).select("id").single();if(s)throw s;const i=await oB(r.tags,t.id);if(i.length>0){const{error:o}=await P.from("inventory_tags").insert(i.map(l=>({inventory_id:n.id,tag_id:l.id})));if(o)throw o}return r.sourceInventoryId&&await P.from("inventory_remixes").insert({inventory_id:n.id,source_inventory_id:r.sourceInventoryId,user_id:t.id}),n},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory-search"]})}})}function uB(){const e=Pt(),{user:t}=Se();return dt({mutationFn:async r=>{if(!(t!=null&&t.id))throw new Error("Must be logged in");const{error:n}=await P.from("inventories").update({review_sections:r.reviewSections,include_score:r.includeScore}).eq("id",r.inventoryId).eq("creator_user_id",t.id);if(n)throw n},onSuccess:(r,n)=>{e.invalidateQueries({queryKey:["inventory",n.inventoryId]}),e.invalidateQueries({queryKey:["inventory-search"]})}})}const Aw="id, title, prompt_inventory, prompt_categories, generated_schema, review_sections, include_score, creator_user_id, is_public, likes_count, created_at, updated_at";function dB(e=6){const{user:t}=Se();return Le({queryKey:["suggested-inventories",t==null?void 0:t.id,e],queryFn:async()=>{let r=[];if(t!=null&&t.id){const{data:g}=await P.from("inventory_likes").select("inventory_id").eq("user_id",t.id),v=(g||[]).map(w=>w.inventory_id);if(v.length>0){const{data:w}=await P.from("inventory_tags").select("tag_id").in("inventory_id",v);r=[...new Set((w||[]).map(y=>y.tag_id))]}}let n=[];if(r.length>0&&(t!=null&&t.id)){const{data:g}=await P.from("inventory_tags").select("inventory_id").in("tag_id",r),v=[...new Set((g||[]).map(_=>_.inventory_id))],{data:w}=await P.from("inventory_likes").select("inventory_id").eq("user_id",t.id),y=new Set((w||[]).map(_=>_.inventory_id)),x=v.filter(_=>!y.has(_));if(x.length>0){const{data:_}=await P.from("inventories").select(Aw).in("id",x).eq("is_public",!0).order("likes_count",{ascending:!1}).limit(e);n=_||[]}}if(n.length<e){const g=n.map(y=>y.id),{data:v}=await P.from("inventories").select(Aw).eq("is_public",!0).order("likes_count",{ascending:!1}).limit(e*2),w=(v||[]).filter(y=>!g.includes(y.id)).slice(0,e-n.length);n=[...n,...w]}if(n.length===0)return[];const s=n.map(g=>g.id),[i,o,l]=await Promise.all([P.from("inventory_tags").select("inventory_id, tag_id").in("inventory_id",s),t!=null&&t.id?P.from("inventory_likes").select("inventory_id").eq("user_id",t.id).in("inventory_id",s):Promise.resolve({data:[]}),P.from("blueprints").select("inventory_id").in("inventory_id",s)]),c=i.data||[],u=[...new Set(c.map(g=>g.tag_id))],{data:d}=u.length>0?await P.from("tags").select("id, slug").in("id",u):{data:[]},h=new Map((d||[]).map(g=>[g.id,g])),f=new Map;c.forEach(g=>{const v=h.get(g.tag_id);if(!v)return;const w=f.get(g.inventory_id)||[];w.push(v),f.set(g.inventory_id,w)});const m=new Set((o.data||[]).map(g=>g.inventory_id)),b=new Map;return(l.data||[]).forEach(g=>{g.inventory_id&&b.set(g.inventory_id,(b.get(g.inventory_id)||0)+1)}),n.map(g=>({...g,tags:f.get(g.id)||[],user_liked:m.has(g.id),is_owner:(t==null?void 0:t.id)===g.creator_user_id,blueprint_count:b.get(g.id)||0}))},staleTime:2*60*1e3})}function tC({inventory:e,onLike:t}){const r=e.tags.slice(0,3),n=e.tags.length-3;return a.jsx(ge,{to:`/inventory/${e.id}/build`,className:"block group",children:a.jsx(K,{className:"h-full transition-all duration-300 hover:border-primary/40 hover:shadow-lg hover:shadow-primary/10 group-focus-visible:ring-2 group-focus-visible:ring-primary",children:a.jsxs(Y,{className:"p-5 flex flex-col h-full",children:[a.jsx("h3",{className:"font-semibold text-lg line-clamp-1 mb-1",children:e.title}),a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3 flex-grow",children:e.prompt_inventory}),e.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[r.map(s=>a.jsxs(Pe,{variant:"secondary",className:"text-xs",children:["#",s.slug]},s.id)),n>0&&a.jsxs(Pe,{variant:"outline",className:"text-xs text-muted-foreground",children:["+",n," more"]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border/50",children:[a.jsx("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:a.jsxs("span",{className:"flex items-center gap-1",title:"Blueprints using this library",children:[a.jsx(J2,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:e.blueprint_count})]})}),a.jsxs(O,{variant:"ghost",size:"sm",className:`h-8 px-2 ${e.user_liked?"text-red-500 hover:text-red-600":"text-muted-foreground hover:text-foreground"}`,onClick:s=>{s.preventDefault(),s.stopPropagation(),t(e.id,e.user_liked)},"aria-label":e.user_liked?"Unlike library":"Like library",children:[a.jsx(Dt,{className:`h-4 w-4 ${e.user_liked?"fill-current":""}`}),a.jsx("span",{className:"ml-1 text-xs",children:e.likes_count})]})]})]})})})}function hB({inventories:e,isLoading:t,onLike:r}){return t?a.jsxs("section",{className:"space-y-3",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Suggested for You"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:3}).map((n,s)=>a.jsx(K,{children:a.jsxs(Y,{className:"p-5 space-y-3",children:[a.jsx(_e,{className:"h-5 w-3/4"}),a.jsx(_e,{className:"h-10 w-full"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(_e,{className:"h-5 w-16"}),a.jsx(_e,{className:"h-5 w-20"})]}),a.jsx(_e,{className:"h-4 w-full"})]})},s))})]}):e.length===0?null:a.jsxs("section",{className:"space-y-3",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Suggested for You"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:e.slice(0,3).map(n=>a.jsx(tC,{inventory:n,onLike:r},n.id))})]})}function fB(){const[e,t]=p.useState(""),[r,n]=p.useState(null),{user:s}=Se(),{toast:i}=$t(),o=r||e,{data:l,isLoading:c}=lB(o),{data:u=[],isLoading:d}=ON(12),{data:h=[],isLoading:f}=dB(6),m=eC(),b=new Set(h.map(x=>x.id)),g=p.useMemo(()=>l?o?l:l.filter(x=>!b.has(x.id)):[],[l,b,o]),v=async(x,_)=>{if(!s){i({title:"Sign in required",description:"Please sign in to like inventories.",variant:"destructive"});return}try{await m.mutateAsync({inventoryId:x,liked:_})}catch(j){i({title:"Action failed",description:j instanceof Error?j.message:"Please try again.",variant:"destructive"})}},w=x=>{n(x),x&&t("")},y=!o&&s;return a.jsxs("div",{className:"min-h-screen bg-background relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute top-1/3 -left-20 w-60 h-60 bg-accent/5 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-20 right-1/4 w-40 h-40 bg-primary/3 rounded-full blur-2xl"})]}),a.jsx(St,{}),a.jsxs("main",{className:"relative max-w-6xl mx-auto px-4 py-8 space-y-8",children:[a.jsx(K,{className:"border-border/50 bg-card/60 backdrop-blur-sm",children:a.jsxs(Y,{className:"pt-6 space-y-2",children:[a.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:"Library"}),a.jsx("h2",{className:"text-xl font-semibold",children:"Pick a collection, then build your blueprint"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Browse libraries, open one, and start adding items into your routine."})]})}),a.jsxs("section",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-3xl font-semibold",children:"Library"}),a.jsx(ge,{to:"/inventory/create",children:a.jsxs(O,{size:"sm",className:"gap-2",children:[a.jsx(Cd,{className:"h-4 w-4"}),"Create"]})})]}),a.jsx("p",{className:"text-muted-foreground",children:"Discover libraries to build your perfect blueprint."})]}),a.jsx(K,{className:"bg-card/60 backdrop-blur-sm",children:a.jsxs(Y,{className:"p-4 flex items-center gap-2",children:[a.jsx(io,{className:"h-4 w-4 text-muted-foreground shrink-0"}),a.jsx(Fe,{value:e,onChange:x=>{t(x.target.value),x.target.value&&n(null)},placeholder:"Search libraries by title or tag...",className:"border-none shadow-none focus-visible:ring-0 bg-transparent"})]})}),!d&&u.length>0&&a.jsx(Bk,{tags:u,selectedTag:r,onSelectTag:w}),y&&a.jsx(hB,{inventories:h,isLoading:f,onLike:v}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-lg font-semibold",children:o?`Results for "${o}"`:"All Libraries"}),c?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((x,_)=>a.jsx(K,{children:a.jsxs(Y,{className:"p-5 space-y-3",children:[a.jsx(_e,{className:"h-5 w-3/4"}),a.jsx(_e,{className:"h-10 w-full"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(_e,{className:"h-5 w-16"}),a.jsx(_e,{className:"h-5 w-20"})]}),a.jsx(_e,{className:"h-4 w-full"})]})},_))}):g.length>0?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(x=>a.jsx(tC,{inventory:x,onLike:v},x.id))}):a.jsx(K,{className:"bg-card/60 backdrop-blur-sm",children:a.jsxs(Y,{className:"py-12 text-center space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"No libraries found"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:o?"Try a different search or clear filters.":"Be the first to create a library!"}),a.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:o?a.jsx(O,{variant:"outline",onClick:()=>t(""),children:"Clear search"}):a.jsx(ge,{to:"/inventory/create",children:a.jsx(O,{children:"Create Library"})})})]})})]})]})]})}function Ev({value:e,onChange:t,suggestions:r=[],maxTags:n=MN,disabled:s}){const[i,o]=p.useState(""),l=e.length<n,c=p.useMemo(()=>{const f=on(i);return f?r.filter(m=>m.includes(f)).filter(m=>!e.includes(m)).slice(0,6):[]},[i,r,e]),u=f=>{if(!l)return;const m=on(f);!m||e.includes(m)||(t([...e,m].slice(0,n)),o(""))},d=f=>{t(e.filter(m=>m!==f))},h=f=>{(f.key==="Enter"||f.key===",")&&(f.preventDefault(),i.trim()&&u(i))};return a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex flex-wrap gap-2",children:e.map(f=>a.jsxs(Pe,{variant:"secondary",className:"gap-1",children:["#",f,a.jsx(O,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4",onClick:()=>d(f),disabled:s,children:a.jsx(ir,{className:"h-3 w-3"})})]},f))}),a.jsx(Fe,{value:i,onChange:f=>o(f.target.value),onKeyDown:h,placeholder:l?"Add tag (press Enter)":"Tag limit reached",disabled:s||!l}),c.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(f=>a.jsxs(O,{type:"button",variant:"outline",size:"sm",onClick:()=>u(f),disabled:s,children:["#",f]},f))})]})}const $l="inventory_create_tour_completed",Mo=[{targetId:"keywords",title:"Describe Your Library",description:'Enter a few words like "skincare routine" or "smoothie ingredients".'},{targetId:"generate",title:"Generate with AI",description:"Click Generate to create categories and items automatically."},{targetId:"edit-categories",title:"Review & Edit",description:"Rename categories, add items, or remove what you don't need."},{targetId:"publish",title:"Create & Build",description:"Publish your library and start creating blueprints!"}];function pB({isActive:e,onComplete:t,onSkip:r}){const[n,s]=p.useState(0),[i,o]=p.useState(null),l=Mo[n],c=p.useCallback(()=>{if(!l)return;const f=document.querySelector(`[data-help-id="${l.targetId}"]`);o(f?f.getBoundingClientRect():null)},[l]);p.useEffect(()=>{if(e)return c(),window.addEventListener("resize",c),window.addEventListener("scroll",c),()=>{window.removeEventListener("resize",c),window.removeEventListener("scroll",c)}},[e,c,n]),p.useEffect(()=>{if(!e)return;const f=m=>{m.key==="Escape"?r():(m.key==="ArrowRight"||m.key==="Enter")&&u()};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[e,n,r]);const u=p.useCallback(()=>{n<Mo.length-1?s(f=>f+1):(localStorage.setItem($l,"true"),t())},[n,t]),d=p.useCallback(()=>{localStorage.setItem($l,"true"),r()},[r]);if(!e||!l)return null;const h=(()=>{if(!i)return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};const f=window.innerHeight,m=window.innerWidth,b=320,g=180,v=16;let w=i.bottom+v,y=i.left+i.width/2-b/2;return w+g>f-20&&(w=i.top-g-v),y<20&&(y=20),y+b>m-20&&(y=m-b-20),{top:`${w}px`,left:`${y}px`}})();return ln.createPortal(a.jsxs("div",{className:"fixed inset-0 z-50",children:[a.jsx("div",{className:"absolute inset-0",children:a.jsxs("svg",{className:"w-full h-full",children:[a.jsx("defs",{children:a.jsxs("mask",{id:"inventory-spotlight-mask",children:[a.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),i&&a.jsx("rect",{x:i.left-8,y:i.top-8,width:i.width+16,height:i.height+16,rx:"12",fill:"black"})]})}),a.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"hsl(var(--background) / 0.8)",mask:"url(#inventory-spotlight-mask)",className:"animate-in fade-in duration-300"})]})}),i&&a.jsx("div",{className:"absolute rounded-xl border-2 border-orange-500 shadow-[0_0_20px_rgba(249,115,22,0.4)] pointer-events-none animate-pulse",style:{left:i.left-8,top:i.top-8,width:i.width+16,height:i.height+16}}),a.jsx(K,{className:"fixed w-80 bg-card border-border shadow-lg animate-in slide-in-from-bottom-2 duration-300 z-10",style:h,children:a.jsxs(Y,{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"font-semibold",children:l.title}),a.jsx("p",{className:"text-sm text-muted-foreground",children:l.description})]}),a.jsx(O,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:d,children:a.jsx(ir,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex gap-1.5",children:Mo.map((f,m)=>a.jsx("div",{className:G("h-1.5 w-1.5 rounded-full transition-colors",m===n?"bg-orange-500":"bg-muted-foreground/30")},m))}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(O,{variant:"ghost",size:"sm",onClick:d,children:"Skip"}),a.jsxs(O,{size:"sm",onClick:u,className:"gap-1",children:[n===Mo.length-1?"Done":"Next",n<Mo.length-1&&a.jsx(og,{className:"h-4 w-4"})]})]})]})]})})]}),document.body)}function mB({onStartTour:e,onDismiss:t}){const[r,n]=p.useState(()=>localStorage.getItem($l)==="true");return r?null:a.jsxs("div",{className:"rounded-xl border border-orange-500/30 bg-orange-500/5 p-4 flex items-center justify-between gap-4 animate-in fade-in slide-in-from-top-2 duration-300",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-orange-500/10 flex items-center justify-center",children:a.jsx(Kn,{className:"h-5 w-5 text-orange-500"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"New here?"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Take a quick tour to learn how to create inventories."})]})]}),a.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[a.jsx(O,{variant:"ghost",size:"sm",onClick:()=>{n(!0),localStorage.setItem($l,"true"),t()},children:"Maybe later"}),a.jsxs(O,{size:"sm",onClick:e,className:"gap-2 bg-orange-500 hover:bg-orange-600 text-white",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Take Tour"]})]})]})}function gB(){return localStorage.getItem($l)==="true"}function vB({onClick:e}){return a.jsx(O,{type:"button",variant:"ghost",size:"icon",onClick:e,className:"h-9 w-9 rounded-full","aria-label":"Take a tour",title:"Take a tour",children:a.jsx(Kn,{className:"h-4 w-4"})})}const yB=[{id:"keywords",text:"Describe what kind of library you want to create"},{id:"generate",text:"AI generates categories and items for you"},{id:"advanced-options",text:"Customize how AI generates your library"},{id:"edit-categories",text:"Rename, add, or remove categories and items"},{id:"tags",text:"Help others discover your library with tags"},{id:"publish",text:"Create your library and start building"}];function xB({isOpen:e,onClose:t,onStartTour:r}){const[n,s]=p.useState([]),i=p.useCallback(()=>{const o=[];yB.forEach(({id:l,text:c})=>{const u=document.querySelector(`[data-help-id="${l}"]`);if(!u)return;const d=u.getBoundingClientRect(),h=window.innerWidth,f=window.innerHeight;let m="right",b=d.right+12,g=d.top+d.height/2;d.right+200>h&&(d.left>200?(m="left",b=d.left-12):(m="bottom",b=d.left+d.width/2,g=d.bottom+12)),(m==="left"||m==="right")&&(g<50&&(g=50),g>f-50&&(g=f-50)),o.push({id:l,text:c,x:b,y:g,side:m})}),s(o)},[]);return p.useEffect(()=>{if(e){const o=setTimeout(i,100);return()=>clearTimeout(o)}},[e,i]),p.useEffect(()=>{if(!e)return;const o=l=>{l.key==="Escape"&&t()};return window.addEventListener("keydown",o),window.addEventListener("resize",i),()=>{window.removeEventListener("keydown",o),window.removeEventListener("resize",i)}},[e,t,i]),e?ln.createPortal(a.jsxs("div",{className:"fixed inset-0 z-50",children:[a.jsx("div",{className:"absolute inset-0 bg-background/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:t}),n.map(o=>a.jsxs("div",{className:G("fixed z-50 max-w-[200px] rounded-lg bg-foreground text-background px-3 py-2 text-sm shadow-lg animate-in fade-in zoom-in-95 duration-200",o.side==="left"&&"-translate-x-full",o.side==="top"&&"-translate-y-full -translate-x-1/2",o.side==="bottom"&&"-translate-x-1/2",(o.side==="left"||o.side==="right")&&"-translate-y-1/2"),style:{left:o.x,top:o.y},children:[o.text,a.jsx("div",{className:G("absolute w-2 h-2 bg-foreground rotate-45",o.side==="right"&&"-left-1 top-1/2 -translate-y-1/2",o.side==="left"&&"-right-1 top-1/2 -translate-y-1/2",o.side==="bottom"&&"-top-1 left-1/2 -translate-x-1/2",o.side==="top"&&"-bottom-1 left-1/2 -translate-x-1/2")})]},o.id)),a.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 bg-card border border-border rounded-2xl shadow-lg p-4 animate-in slide-in-from-bottom-4 duration-300",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(ec,{className:"h-4 w-4"}),a.jsx("span",{children:"Hover over highlighted elements"})]}),a.jsx("div",{className:"h-4 w-px bg-border"}),a.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>{t(),r()},className:"gap-2",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Take a tour"]}),a.jsx(O,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8",children:a.jsx(ir,{className:"h-4 w-4"})})]})})]}),document.body):null}function wB({onClick:e}){return a.jsx(O,{type:"button",variant:"outline",size:"icon",onClick:e,className:"h-9 w-9 rounded-full border-dashed","aria-label":"Show help",children:a.jsx(ec,{className:"h-4 w-4"})})}function Fl(e,t){const n=(e instanceof Error?e.message:String(e??"")).toLowerCase();return n.includes("unauthorized")||n.includes("auth")?"Please sign in again and try that request.":n.includes("rate limit")||n.includes("too many")?"Youre doing that a bit fast. Please wait a moment and try again.":n.includes("failed to fetch")||n.includes("network")?"We could not reach the server. Check your connection and try again.":n.includes("storage")?"We could not upload the banner. Please try again in a moment.":t}const bB=8;function _B(e){return e?`stacklab-recent-tags:${e}`:null}function jB(e){if(!e)return[];try{const t=localStorage.getItem(e);if(!t)return[];const r=JSON.parse(t);if(Array.isArray(r))return r}catch{return[]}return[]}function SB(e,t){if(e)try{localStorage.setItem(e,JSON.stringify(t))}catch{}}function Tv(){const{user:e}=Se(),t=p.useMemo(()=>_B(e==null?void 0:e.id),[e==null?void 0:e.id]),[r,n]=p.useState([]);p.useEffect(()=>{n(jB(t))},[t]);const s=p.useCallback(i=>{if(!t)return[];const o=fv(i);if(o.length===0)return r;const l=[...o,...r.filter(c=>!o.includes(c))].slice(0,bB);return n(l),SB(t,l),l},[t,r]);return{recentTags:r,addRecentTags:s}}const $s="Overview",NB=["Overview","Strengths","Gaps","Suggestions"],Rv=NB.filter(e=>e!==$s),Ul=4,il=Ul-1;function nd(e){const t=e.trim().replace(/\s+/g," ");return t?t.replace(/\b\w/g,r=>r.toUpperCase()):""}function Pv(e){if(!Array.isArray(e))return[];const t=[];for(const r of e){if(typeof r!="string")continue;const n=nd(r);n&&n.toLowerCase()!==$s.toLowerCase()&&(t.some(s=>s.toLowerCase()===n.toLowerCase())||t.push(n))}return t}function Av(e){const t=e==null?Rv:Pv(e);return[$s,...t]}const kB="https://piszvseyaefxekubphhf.supabase.co/functions/v1/generate-inventory",CB="https://bapi.vdsai.cloud",EB=!0,Iw=`${CB.replace(/\/$/,"")}/api/generate-inventory`,TB=Iw||kB;function RB(){const e=Gs(),{toast:t}=$t(),{session:r,isLoading:n}=Se(),s=cB(),{data:i}=kv(),{recentTags:o,addRecentTags:l}=Tv(),[c,u]=p.useState(""),[d,h]=p.useState(""),[f,m]=p.useState(!1),[b,g]=p.useState([]),[v,w]=p.useState(""),[y,x]=p.useState(""),[_,j]=p.useState(!1),[N,k]=p.useState(""),[S,E]=p.useState(""),[A,$]=p.useState(null),[M,Q]=p.useState([]),[I,se]=p.useState(!0),V=5,Z=6,[R,T]=p.useState(!1),[D,ee]=p.useState(!1),[J,de]=p.useState(()=>!gB()),U=p.useMemo(()=>A?A.categories.map(q=>q.name.trim()).filter(Boolean):[],[A]),[ce,ae]=p.useState({}),[L,ue]=p.useState("");if(n)return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(St,{}),a.jsx("main",{className:"max-w-3xl mx-auto px-4 py-12",children:a.jsx(K,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:a.jsx(Y,{className:"py-12 text-center",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading"})})})})]});if(!(r!=null&&r.access_token))return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(St,{}),a.jsx("main",{className:"max-w-3xl mx-auto px-4 py-12",children:a.jsxs(K,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:[a.jsx(Ye,{children:a.jsx(mt,{children:"Sign in required"})}),a.jsxs(Y,{className:"space-y-3 text-center",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Creating a library requires an account. Sign in to generate and publish libraries."}),a.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[a.jsx(O,{onClick:()=>e("/auth"),children:"Sign in"}),a.jsx(O,{variant:"outline",onClick:()=>e("/inventory"),children:"Back to Library"})]})]})]})})]});const xe=async()=>{if(!c.trim()){t({title:"Keywords required",description:"Enter what kind of library you want to create.",variant:"destructive"});return}if(!(r!=null&&r.access_token)){t({title:"Sign in required",description:"Please sign in to generate a library.",variant:"destructive"});return}m(!0);try{const q={"Content-Type":"application/json"};EB&&r!=null&&r.access_token&&(q.Authorization=`Bearer ${r.access_token}`);const X=await fetch(TB,{method:"POST",headers:q,body:JSON.stringify({keywords:c.trim(),title:N.trim()||void 0,customInstructions:d.trim()||void 0,preferredCategories:b.length>0?b:void 0})});if(!X.ok){const Ie=await X.json().catch(()=>({}));throw new Error(Ie.error||"Failed to generate library")}const ve=await X.json();if($(ve),E(ve.summary||""),ae({}),!N.trim()){const Ie=c.trim().split(" ").slice(0,3).map(we=>we.charAt(0).toUpperCase()+we.slice(1).toLowerCase()).join(" ")+" Library";k(Ie)}ve.suggestedTags&&ve.suggestedTags.length>0&&Q(ve.suggestedTags.slice(0,4)),t({title:"Library generated!",description:`Created ${ve.categories.length} categories with ${ve.categories.reduce((Ie,we)=>Ie+we.items.length,0)} items.`})}catch(q){t({title:"Generation failed",description:Fl(q,"Please try again."),variant:"destructive"})}finally{m(!1)}},ke=async()=>{if(!N.trim()){t({title:"Title required",description:"Add a title before creating the library.",variant:"destructive"});return}if(!A){t({title:"Generate library first",description:"Use the generate button to create your library.",variant:"destructive"});return}if(M.length===0){t({title:"Tags required",description:"Add at least one tag to help discovery.",variant:"destructive"});return}if(M.length>V){t({title:"Too many tags",description:`Please use ${V} tags or fewer.`,variant:"destructive"});return}try{const q=U.join(", "),X=await s.mutateAsync({title:N.trim(),promptInventory:S.trim(),promptCategories:q,generatedSchema:A,reviewSections:Rv,includeScore:!0,tags:M,isPublic:I});l(M),e(`/inventory/${X.id}/build`)}catch(q){t({title:"Creation failed",description:q instanceof Error?q.message:"Please try again.",variant:"destructive"})}};return a.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[a.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none -z-10",children:[a.jsx("div",{className:"absolute -top-40 -right-40 w-[500px] h-[500px] bg-primary/8 rounded-full blur-3xl animate-drift"}),a.jsx("div",{className:"absolute top-1/2 -left-32 w-96 h-96 bg-accent/15 rounded-full blur-3xl animate-float"}),a.jsx("div",{className:"absolute -bottom-20 right-1/4 w-80 h-80 bg-secondary/10 rounded-full blur-3xl animate-pulse-soft"})]}),a.jsx(St,{}),a.jsxs("main",{className:"max-w-3xl mx-auto px-4 py-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Library"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(vB,{onClick:()=>ee(!0)}),a.jsx(wB,{onClick:()=>T(!0)})]})]}),J&&a.jsx(mB,{onStartTour:()=>{de(!1),ee(!0)},onDismiss:()=>de(!1)}),a.jsxs("div",{className:"text-center mb-12 pt-8 animate-fade-in",children:[a.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-black tracking-tight mb-4 relative inline-block",children:[a.jsxs("span",{className:"relative inline-block",style:{fontFamily:"'Impact', 'Haettenschweiler', 'Franklin Gothic Bold', 'Charcoal', 'Helvetica Inserat', sans-serif",letterSpacing:"0.06em"},children:[a.jsx("span",{className:"absolute inset-0 text-border/40",style:{transform:"translate(4px, 4px)"},"aria-hidden":"true",children:"CREATE INVENTORY"}),a.jsx("span",{className:"absolute inset-0 text-border/60",style:{transform:"translate(2px, 2px)"},"aria-hidden":"true",children:"CREATE INVENTORY"}),a.jsx("span",{className:"text-gradient-themed animate-shimmer bg-[length:200%_auto] relative",children:"CREATE INVENTORY"})]}),a.jsx("span",{className:"absolute -inset-4 bg-primary/10 blur-2xl rounded-full animate-pulse-soft -z-10"})]}),a.jsx("p",{className:"text-lg text-muted-foreground max-w-md mx-auto",children:"Describe what you want to build, and AI will generate your library"})]}),a.jsxs(K,{className:"bg-card/60 backdrop-blur-glass border-border/50 animate-fade-in",children:[a.jsxs(Ye,{className:"flex flex-row items-center justify-between space-y-0",children:[a.jsxs(mt,{className:"flex items-center gap-2",children:[a.jsx(cR,{className:"h-5 w-5 text-primary"}),"What kind of library?"]}),a.jsxs(O,{onClick:xe,disabled:f||!c.trim(),className:"gap-2","data-help-id":"generate",children:[f?a.jsx(bi,{className:"h-4 w-4 animate-spin"}):a.jsx(en,{className:"h-4 w-4"}),f?"Generating...":A?"Regenerate":"Generate"]})]}),a.jsxs(Y,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2","data-help-id":"keywords",children:[a.jsx(We,{htmlFor:"keywords",children:"Describe your library in a few words"}),a.jsx(Fe,{id:"keywords",value:c,onChange:q=>u(q.target.value),placeholder:"e.g., skincare routine, green smoothie, morning habits...",onKeyDown:q=>q.key==="Enter"&&xe()})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["skincare routine","green smoothie","morning routine","home workout","meditation practice"].map(q=>a.jsx(O,{type:"button",size:"sm",variant:"outline",onClick:()=>u(q),className:"text-xs",children:q},q))}),a.jsxs(cv,{open:_,onOpenChange:j,children:[a.jsx(uv,{asChild:!0,children:a.jsxs(O,{variant:"ghost",className:"w-full justify-between text-muted-foreground hover:text-foreground","data-help-id":"advanced-options",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(B_,{className:"h-4 w-4"}),"Advanced Options"]}),a.jsx(so,{className:`h-4 w-4 transition-transform ${_?"rotate-180":""}`})]})}),a.jsxs(dv,{className:"space-y-4 pt-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{htmlFor:"custom-instructions",children:"Custom instructions (optional)"}),a.jsx(ar,{id:"custom-instructions",value:d,onChange:q=>h(q.target.value),placeholder:"e.g., more beginner-friendly, fewer categories, emphasize budget options...",rows:3}),A&&a.jsx("p",{className:"text-xs text-muted-foreground",children:"Regenerating will replace the current categories and items."})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx(We,{children:"Preferred categories (optional)"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"We will always generate 6 categories total."})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:b.map((q,X)=>a.jsxs(Pe,{variant:"secondary",className:"gap-1",children:[q,a.jsx(O,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4",onClick:()=>{g(ve=>ve.filter((Ie,we)=>we!==X)),x("")},"aria-label":"Remove category",children:a.jsx(ir,{className:"h-3 w-3"})})]},`${q}-${X}`))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Fe,{value:v,onChange:q=>w(q.target.value),placeholder:"Add category",onKeyDown:q=>{if(q.key==="Enter"){q.preventDefault();const X=v.trim();if(!X)return;if(b.length>=Z){x("You can only add up to 6 categories.");return}g(ve=>[...ve,X]),w(""),x("")}}}),a.jsx(O,{type:"button",variant:"outline",onClick:()=>{const q=v.trim();if(q){if(b.length>=Z){x("You can only add up to 6 categories.");return}g(X=>[...X,q]),w(""),x("")}},children:"Add"})]}),y&&a.jsx("p",{className:"text-xs text-destructive",children:y})]})]})]})]})]}),A&&a.jsxs(a.Fragment,{children:[a.jsxs(K,{className:"bg-card/60 backdrop-blur-glass border-border/50 animate-fade-in",children:[a.jsx(Ye,{children:a.jsx(mt,{children:"Library Details"})}),a.jsxs(Y,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{htmlFor:"inventory-title",children:"Title"}),a.jsx(Fe,{id:"inventory-title",value:N,onChange:q=>k(q.target.value),placeholder:"My Custom Library"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{htmlFor:"inventory-description",children:"Description"}),a.jsx(ar,{id:"inventory-description",value:S,onChange:q=>E(q.target.value),placeholder:"What this library is for...",rows:3})]})]})]}),a.jsxs(K,{className:"bg-card/60 backdrop-blur-glass border-border/50 animate-fade-in","data-help-id":"edit-categories",children:[a.jsx(Ye,{children:a.jsx(mt,{children:"Generated Categories"})}),a.jsxs(Y,{className:"space-y-4",children:[A.categories.map((q,X)=>a.jsxs("div",{className:"space-y-3 rounded-lg border border-border/60 p-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Fe,{value:q.name,onChange:ve=>{const Ie=ve.target.value;$(we=>{if(!we)return we;const De=we.categories.map((Be,Ut)=>Ut===X?{...Be,name:Ie}:Be);return{...we,categories:De}})},className:"font-semibold",placeholder:"Category name"}),a.jsx(O,{type:"button",variant:"ghost",size:"icon",onClick:()=>{$(ve=>{if(!ve)return ve;const Ie=ve.categories.filter((we,De)=>De!==X);return{...ve,categories:Ie}})},"aria-label":"Remove category",children:a.jsx(ir,{className:"h-4 w-4"})}),a.jsxs(Pe,{variant:"secondary",children:[q.items.length," items"]})]}),a.jsx("div",{className:"flex flex-wrap gap-1.5",children:q.items.map((ve,Ie)=>a.jsxs(Pe,{variant:"outline",className:"text-xs gap-1",children:[ve,a.jsx(O,{type:"button",variant:"ghost",size:"icon",className:"h-3 w-3",onClick:()=>{$(we=>{if(!we)return we;const De=we.categories.map((Be,Ut)=>Ut!==X?Be:{...Be,items:Be.items.filter((_r,Bi)=>Bi!==Ie)});return{...we,categories:De}})},"aria-label":"Remove item",children:a.jsx(ir,{className:"h-3 w-3"})})]},Ie))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Fe,{value:ce[X]||"",onChange:ve=>ae(Ie=>({...Ie,[X]:ve.target.value})),placeholder:`Add item to ${q.name||"category"}`}),a.jsx(O,{type:"button",variant:"outline",onClick:()=>{var Ie;const ve=(Ie=ce[X])==null?void 0:Ie.trim();ve&&($(we=>{if(!we)return we;const De=we.categories.map((Be,Ut)=>Ut===X?{...Be,items:[...Be.items,ve]}:Be);return{...we,categories:De}}),ae(we=>({...we,[X]:""})))},children:"Add item"})]})]},X)),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Fe,{value:L,onChange:q=>ue(q.target.value),placeholder:"New category name"}),a.jsx(O,{type:"button",variant:"outline",onClick:()=>{const q=L.trim();q&&($(X=>X&&{...X,categories:[...X.categories,{name:q,items:[]}]}),ue(""))},children:"Add category"})]})]})]}),a.jsxs(K,{className:"bg-card/60 backdrop-blur-glass border-border/50 animate-fade-in","data-help-id":"tags",children:[a.jsx(Ye,{children:a.jsx(mt,{children:"Discovery"})}),a.jsxs(Y,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{children:"Tags"}),a.jsx(Ev,{value:M,onChange:Q,suggestions:i||[],maxTags:V})]}),a.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 px-4 py-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Public library"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Public libraries appear in search."})]}),a.jsx(Ls,{checked:I,onCheckedChange:se})]})]})]}),a.jsxs(O,{onClick:ke,disabled:s.isPending,className:"w-full gap-2",size:"lg","data-help-id":"publish",children:[s.isPending?a.jsx(bi,{className:"h-4 w-4 animate-spin"}):a.jsx(en,{className:"h-4 w-4"}),"Create Library"]})]})]}),a.jsx(pB,{isActive:D,onComplete:()=>ee(!1),onSkip:()=>ee(!1)}),a.jsx(xB,{isOpen:R,onClose:()=>T(!1),onStartTour:()=>{T(!1),ee(!0)}})]})}function PB(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=e.categories;return Array.isArray(t)?t.map(r=>typeof r.name=="string"?r.name:"").filter(Boolean):[]}function AB(){const{inventoryId:e}=po(),{data:t,isLoading:r}=Cv(e),n=eC(),s=uB(),{toast:i}=$t(),[o,l]=p.useState([]),[c,u]=p.useState(""),[d,h]=p.useState(""),[f,m]=p.useState(!0);p.useEffect(()=>{t&&(l(Pv(t.review_sections)),m(t.include_score??!0),u(""),h(""))},[t]);const b=p.useMemo(()=>Rv.filter(_=>!o.some(j=>j.toLowerCase()===_.toLowerCase())),[o]),g=p.useMemo(()=>Av((t==null?void 0:t.review_sections)??null),[t]),v=async()=>{if(t)try{await n.mutateAsync({inventoryId:t.id,liked:t.user_liked})}catch(_){i({title:"Action failed",description:_ instanceof Error?_.message:"Please try again.",variant:"destructive"})}},w=_=>{const j=nd(_);if(j){if(j.toLowerCase()===$s.toLowerCase()){u("");return}if(o.some(N=>N.toLowerCase()===j.toLowerCase())){u(""),h("");return}if(o.length>=il){h(`You can add up to ${Ul} sections total.`);return}l(N=>[...N,j]),u(""),h("")}},y=_=>{l(j=>j.filter(N=>N!==_)),h("")},x=async()=>{if(t){if(o.length>il){i({title:"Too many sections",description:`Please use ${Ul} sections or fewer.`,variant:"destructive"});return}try{await s.mutateAsync({inventoryId:t.id,reviewSections:o,includeScore:f}),i({title:"Saved",description:"Review settings updated."})}catch(_){i({title:"Save failed",description:_ instanceof Error?_.message:"Please try again.",variant:"destructive"})}}};return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(St,{}),a.jsx("main",{className:"max-w-3xl mx-auto px-4 py-8 space-y-6",children:r?a.jsxs(K,{children:[a.jsx(Ye,{children:a.jsx(_e,{className:"h-6 w-40"})}),a.jsx(Y,{children:a.jsx(_e,{className:"h-24 w-full"})})]}):t?a.jsx(a.Fragment,{children:a.jsxs(K,{children:[a.jsxs(Ye,{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx(mt,{children:t.title}),a.jsx("p",{className:"text-sm text-muted-foreground",children:t.prompt_inventory})]}),a.jsxs(O,{variant:"ghost",size:"sm",className:t.user_liked?"text-red-500":"text-muted-foreground",onClick:v,children:[a.jsx(Dt,{className:`h-4 w-4 ${t.user_liked?"fill-current":""}`}),a.jsx("span",{className:"ml-1 text-xs",children:t.likes_count})]})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map(_=>a.jsxs(Pe,{variant:"outline",children:["#",_.slug]},_.id))})]}),a.jsxs(Y,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Categories"}),a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:PB(t.generated_schema).map(_=>a.jsx(Pe,{variant:"secondary",children:_},_))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Review sections"}),t.is_owner?a.jsxs("div",{className:"mt-3 space-y-3",children:[a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(Pe,{variant:"secondary",children:$s}),o.map(_=>a.jsxs(Pe,{variant:"secondary",className:"gap-1",children:[_,a.jsx(O,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4",onClick:()=>y(_),children:a.jsx(ir,{className:"h-3 w-3"})})]},_))]}),b.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(_=>a.jsx(O,{type:"button",size:"sm",variant:"outline",onClick:()=>w(_),children:_},_))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Fe,{value:c,onChange:_=>u(_.target.value),placeholder:"Add custom section",onKeyDown:_=>{_.key==="Enter"&&(_.preventDefault(),w(c))}}),a.jsx(O,{type:"button",variant:"outline",onClick:()=>w(c),children:"Add"})]}),d&&a.jsx("p",{className:"text-sm text-destructive",children:d}),a.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 px-4 py-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Include score"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Adds a 1100 score in Overview."})]}),a.jsx(Ls,{checked:f,onCheckedChange:m})]}),a.jsx(O,{type:"button",onClick:x,disabled:s.isPending,children:"Save review settings"})]}):a.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:g.map(_=>a.jsx(Pe,{variant:"outline",children:_},_))})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(ge,{to:`/inventory/${t.id}/build`,children:a.jsx(O,{children:"Create Blueprint"})}),a.jsx(ge,{to:"/inventory",children:a.jsx(O,{variant:"outline",children:"Back to Library"})})]})]})]})}):a.jsx(K,{children:a.jsx(Y,{className:"py-12 text-center",children:"Library not found."})})})]})}function IB({onClick:e,disabled:t,isLoading:r,itemCount:n}){return a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsxs("button",{onClick:e,disabled:t||r,className:G("relative w-28 h-28 rounded-full transition-all duration-500","bg-gradient-to-br from-primary via-primary/90 to-primary/70","border-2 border-primary/30","flex items-center justify-center","shadow-glow-aqua","group",t&&!r&&"opacity-40 cursor-not-allowed shadow-none",!t&&!r&&"hover:scale-105 hover:shadow-[0_0_60px_hsl(185_55%_50%/0.5)] animate-glow-pulse",r&&"animate-pulse cursor-wait"),children:[!t&&!r&&a.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/20 animate-ping opacity-30"}),a.jsx("div",{className:"relative z-10 flex flex-col items-center gap-1",children:r?a.jsx(bi,{className:"h-10 w-10 text-primary-foreground animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(F_,{className:"h-10 w-10 text-primary-foreground group-hover:rotate-12 transition-transform duration-300"}),a.jsx("span",{className:"text-xs font-bold text-primary-foreground/90 uppercase tracking-widest",children:"Review"})]})}),!t&&a.jsx("div",{className:"absolute inset-0 rounded-full opacity-50 group-hover:opacity-100 transition-opacity duration-300",children:a.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-primary via-accent to-primary animate-iridescent",style:{padding:"2px"},children:a.jsx("div",{className:"w-full h-full rounded-full bg-primary"})})})]}),a.jsx("p",{className:G("text-sm font-medium transition-colors",t&&!r?"text-muted-foreground":"text-foreground"),children:r?"Analyzing your blend...":n===0?"Review your Blueprint":`Ready to review ${n} item${n!==1?"s":""}`})]})}function OB({categories:e,selectedItems:t,onToggleItem:r,onAddCustomItem:n}){var w,y;const[s,i]=p.useState(""),[o,l]=p.useState(((w=e[0])==null?void 0:w.name)||""),[c,u]=p.useState(!1),[d,h]=p.useState(""),[f,m]=p.useState(((y=e[0])==null?void 0:y.name)||"");p.useEffect(()=>{o||e.length!==0&&(l(e[0].name),m(e[0].name))},[o,e]);const b=p.useMemo(()=>{const x=new Set;return Object.entries(t).forEach(([_,j])=>{j.forEach(N=>x.add(`${_}::${N}`))}),x},[t]),g=()=>{!d.trim()||!f||(n(f,d.trim()),h(""),u(!1))},v=p.useMemo(()=>{const x=e.find(j=>j.name===o);if(!x)return[];if(!s.trim())return x.items;const _=s.toLowerCase();return x.items.filter(j=>j.toLowerCase().includes(_))},[e,o,s]);return e.length===0?a.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No categories available in this library."}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(io,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Fe,{placeholder:"Search items...",value:s,onChange:x=>i(x.target.value),className:"pl-9"})]}),a.jsxs(Jg,{open:c,onOpenChange:u,children:[a.jsx(x3,{asChild:!0,children:a.jsx(O,{variant:"outline",size:"icon",className:"shrink-0",children:a.jsx(Cd,{className:"h-4 w-4"})})}),a.jsxs(Wd,{children:[a.jsx(Xg,{children:a.jsx(Zg,{children:"Add Custom Item"})}),a.jsxs("div",{className:"space-y-4 pt-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{htmlFor:"custom-item-name",children:"Item Name"}),a.jsx(Fe,{id:"custom-item-name",value:d,onChange:x=>h(x.target.value),placeholder:"e.g. My Custom Item",onKeyDown:x=>x.key==="Enter"&&g()})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{children:"Category"}),a.jsxs(wk,{value:f,onValueChange:m,children:[a.jsx(mv,{children:a.jsx(bk,{})}),a.jsx(gv,{children:e.map(x=>a.jsx(ed,{value:x.name,children:x.name},x.name))})]})]}),a.jsx(O,{onClick:g,className:"w-full",children:"Add Item"})]})]})]})]}),a.jsxs(vo,{value:o,onValueChange:l,children:[a.jsx(Ui,{className:"w-full h-auto flex-wrap gap-1 bg-transparent p-0",children:e.map(x=>a.jsx(Tr,{value:x.name,className:"text-xs px-2 py-1 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground whitespace-normal",children:x.name},x.name))}),e.map(x=>a.jsx(Rr,{value:x.name,className:"mt-3",children:a.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.map(_=>{const j=b.has(`${x.name}::${_}`);return a.jsxs(Pe,{variant:j?"default":"outline",className:`cursor-pointer transition-all ${j?"bg-primary hover:bg-primary/90":"hover:bg-accent hover:text-accent-foreground"}`,onClick:()=>r(x.name,_),children:[j&&a.jsx(Li,{className:"h-3 w-3 mr-1"}),_]},_)}),v.length===0&&a.jsx("p",{className:"text-sm text-muted-foreground",children:"No items found"})]})},x.name))]})]})}function nm(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}function MB(e){const t=e.toLowerCase();return t.includes("strength")?"+":t.includes("gap")||t.includes("risk")?"!":t.includes("suggest")?">":"-"}function DB(e){if(!e)return[];const t=[];let r=null;const n=e.split(`
`);for(const s of n){if(s.startsWith("### ")||s.startsWith("## ")){const l=s.replace(/^#+\s*/,"").trim();if(!l)continue;r={title:l,key:nm(l),bullets:[],text:""},t.push(r);continue}const i=s.trim();if(!i)continue;r||(r={title:"Overview",key:"overview",bullets:[],text:""},t.push(r));const o=i.replace(/^\*\*|\*\*$/g,"").replace(/^\*|\*$/g,"").replace(/^[-*+]\s+/,"");i.startsWith("- ")||i.startsWith("* ")||i.startsWith("+ ")?r.bullets.push(o):r.text+=(r.text?" ":"")+o}return t}function LB(e,t){if(!t||t.length===0)return e.length>0?e:[{title:"Overview",key:"overview",bullets:[],text:""}];const r=new Map(e.map(i=>[nm(i.title),i])),n=t.map(i=>{const o=nm(i);return r.get(o)||{title:i,key:o,bullets:[],text:""}}),s=e.filter(i=>!n.some(o=>o.key===i.key));return n.concat(s)}function $B(e){const t=/score\s*:\s*(\d{1,3})\s*\/\s*100/i;let r=null;const n=e.text.match(t);n&&(r=parseInt(n[1],10));const s=e.bullets.filter(o=>{const l=o.match(t);return l&&r===null&&(r=parseInt(l[1],10)),!l}),i=e.text.replace(t,"").replace(/\s{2,}/g," ").trim();return{score:r,text:i,bullets:s}}function sm({review:e,isStreaming:t,sectionOrder:r}){var i;const n=DB(e),s=LB(n,r);return a.jsx(K,{className:"bg-card/80 backdrop-blur-glass border-border/50 overflow-hidden",children:a.jsxs(Y,{className:"p-0",children:[a.jsxs(vo,{defaultValue:((i=s[0])==null?void 0:i.key)||"overview",className:"w-full",children:[a.jsx(Ui,{className:"w-full justify-start rounded-none border-b border-border/50 bg-muted/30 px-4 pt-4",children:s.map(o=>a.jsx(Tr,{value:o.key,className:"data-[state=active]:bg-background",children:o.title.toUpperCase()},o.key))}),a.jsx("div",{className:"p-6",children:s.map(o=>{const l=o.key==="overview"||o.title.toLowerCase().includes("overview"),{score:c,text:u,bullets:d}=l?$B(o):{score:null,text:o.text,bullets:o.bullets},h=c!==null&&c>=80?"text-green-500":c!==null&&c>=60?"text-amber-500":"text-red-500";return a.jsxs(Rr,{value:o.key,className:"mt-0 space-y-4",children:[a.jsx("h3",{className:"text-2xl font-bold tracking-tight",children:o.title}),l&&c!==null&&a.jsxs("div",{className:"text-center py-4",children:[a.jsx("p",{className:"text-xs uppercase tracking-wider text-muted-foreground mb-2",children:"Blueprint score"}),a.jsxs("p",{className:G("text-6xl font-black",h),children:[c,a.jsx("span",{className:"text-2xl text-muted-foreground",children:"/100"})]})]}),u?a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:u}):null,d.length>0?a.jsx("ul",{className:"space-y-3",children:d.map((f,m)=>a.jsxs("li",{className:"flex gap-3",children:[a.jsx("span",{className:"text-primary font-bold",children:MB(o.title)}),a.jsx("span",{children:f})]},m))}):null,!u&&d.length===0&&a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:t?"Generating...":"No details yet."})]},o.key)})})]}),t&&a.jsx("div",{className:"px-6 pb-4",children:a.jsx("div",{className:"h-1 w-full bg-muted rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-primary animate-pulse",style:{width:"60%"}})})})]})})}const Ow=["Analyzing your blueprint...","Checking synergies...","Reviewing dosages...","Checking interactions...","Finding harmony...","Almost ready..."];function rC({className:e}){const[t,r]=p.useState(0),[n,s]=p.useState("pour");return p.useEffect(()=>{const i=setInterval(()=>{r(l=>(l+1)%Ow.length)},2e3),o=setInterval(()=>{s(l=>l==="pour"?"shake":l==="shake"?"serve":"pour")},3e3);return()=>{clearInterval(i),clearInterval(o)}},[]),a.jsxs("div",{className:G("flex flex-col items-center justify-center py-16 relative overflow-hidden",e),children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/5 via-transparent to-accent/10"}),a.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[...Array(8)].map((i,o)=>a.jsx("div",{className:"absolute rounded-full bg-primary/20 blur-sm animate-float",style:{width:`${4+Math.random()*8}px`,height:`${4+Math.random()*8}px`,left:`${10+Math.random()*80}%`,top:`${10+Math.random()*80}%`,animationDelay:`${o*.5}s`,animationDuration:`${4+Math.random()*4}s`}},o))}),a.jsxs("div",{className:"relative w-48 h-48 mb-8",children:[a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:G("w-32 h-32 rounded-full blur-2xl transition-all duration-1000",n==="pour"&&"bg-primary/20",n==="shake"&&"bg-primary/30 scale-110",n==="serve"&&"bg-accent/25 scale-105")})}),a.jsx("div",{className:G("absolute inset-0 flex items-center justify-center transition-all duration-500",n==="shake"&&"animate-[shake_0.3s_ease-in-out_infinite]"),children:a.jsxs("svg",{viewBox:"0 0 100 120",className:"w-36 h-36 drop-shadow-lg",children:[a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:"chromeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[a.jsx("stop",{offset:"0%",stopColor:"hsl(200, 15%, 70%)"}),a.jsx("stop",{offset:"30%",stopColor:"hsl(195, 20%, 85%)"}),a.jsx("stop",{offset:"50%",stopColor:"hsl(195, 25%, 92%)"}),a.jsx("stop",{offset:"70%",stopColor:"hsl(195, 20%, 85%)"}),a.jsx("stop",{offset:"100%",stopColor:"hsl(200, 15%, 70%)"})]}),a.jsxs("linearGradient",{id:"liquidGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[a.jsx("stop",{offset:"0%",stopColor:"hsl(185, 60%, 65%)",stopOpacity:"0.8"}),a.jsx("stop",{offset:"50%",stopColor:"hsl(185, 55%, 50%)",stopOpacity:"0.9"}),a.jsx("stop",{offset:"100%",stopColor:"hsl(190, 50%, 45%)",stopOpacity:"1"})]}),a.jsx("filter",{id:"frosted",children:a.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0.5"})})]}),a.jsx("path",{d:"M30 15 L70 15 L65 30 L35 30 Z",fill:"url(#chromeGradient)"}),a.jsx("ellipse",{cx:"50",cy:"15",rx:"20",ry:"5",fill:"url(#chromeGradient)"}),a.jsx("ellipse",{cx:"50",cy:"15",rx:"20",ry:"5",fill:"white",fillOpacity:"0.3"}),a.jsx("path",{d:"M35 30 L30 100 L70 100 L65 30 Z",fill:"url(#chromeGradient)"}),a.jsx("path",{d:"M35 30 L30 100 L40 100 L45 30 Z",fill:"white",fillOpacity:"0.15"}),a.jsx("path",{d:n==="pour"?"M36 85 L69 85 L68 95 L33 95 Z":n==="shake"?"M34 45 L66 50 L68 95 L33 95 Z":"M35 55 L65 55 L68 95 L33 95 Z",fill:"url(#liquidGradient)",className:"transition-all duration-700 ease-out"}),a.jsx("ellipse",{cx:"50",cy:n==="pour"?85:n==="shake"?47:55,rx:"16",ry:"3",fill:"white",fillOpacity:"0.3",className:"transition-all duration-700"}),n==="shake"&&a.jsxs(a.Fragment,{children:[a.jsx("circle",{cx:"42",cy:"60",r:"3",fill:"white",fillOpacity:"0.5",className:"animate-ping"}),a.jsx("circle",{cx:"55",cy:"68",r:"2",fill:"white",fillOpacity:"0.4",className:"animate-ping",style:{animationDelay:"0.2s"}}),a.jsx("circle",{cx:"48",cy:"78",r:"2.5",fill:"white",fillOpacity:"0.45",className:"animate-ping",style:{animationDelay:"0.4s"}}),a.jsx("circle",{cx:"58",cy:"85",r:"2",fill:"white",fillOpacity:"0.35",className:"animate-ping",style:{animationDelay:"0.6s"}})]}),a.jsx("path",{d:"M65 30 L70 100",stroke:"white",strokeWidth:"1",strokeOpacity:"0.3"})]})}),n==="pour"&&a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(6)].map((i,o)=>a.jsx("div",{className:"absolute rounded-full bg-gradient-to-b from-primary/70 to-primary/40 backdrop-blur-sm animate-[fall_1.2s_ease-in_infinite]",style:{width:`${6+Math.random()*6}px`,height:`${8+Math.random()*8}px`,left:`${35+Math.random()*30}%`,animationDelay:`${o*.2}s`,borderRadius:"50% 50% 50% 50% / 60% 60% 40% 40%"}},o))}),n==="serve"&&a.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(8)].map((i,o)=>a.jsx("div",{className:"absolute w-1 h-1 rounded-full bg-primary shadow-glow-aqua animate-pulse-soft",style:{left:`${15+Math.random()*70}%`,top:`${15+Math.random()*50}%`,animationDelay:`${o*.2}s`,boxShadow:"0 0 8px hsl(185, 55%, 50%)"}},o))}),a.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-2",children:[...Array(3)].map((i,o)=>a.jsx("div",{className:G("w-4 h-4 rounded bg-gradient-to-br from-white/70 to-secondary/50 border border-white/30 backdrop-blur-sm shadow-sm",n==="shake"&&"animate-bounce"),style:{animationDelay:`${o*.1}s`,transform:`rotate(${o*15-15}deg)`}},o))})]}),a.jsxs("div",{className:"text-center space-y-3 relative z-10",children:[a.jsx("p",{className:"text-lg font-medium text-foreground animate-pulse-soft tracking-wide",children:Ow[t]}),a.jsx("div",{className:"flex items-center justify-center gap-2",children:[...Array(3)].map((i,o)=>a.jsx("div",{className:"w-2 h-2 rounded-full bg-primary/70 animate-bounce shadow-glow-aqua",style:{animationDelay:`${o*.15}s`}},o))})]}),a.jsx("style",{children:`
        @keyframes fall {
          0% { transform: translateY(-20px) scale(0.8); opacity: 0; }
          10% { opacity: 1; }
          90% { opacity: 0.6; }
          100% { transform: translateY(120px) scale(1); opacity: 0; }
        }
        @keyframes shake {
          0%, 100% { transform: translateX(0) rotate(0deg); }
          25% { transform: translateX(-4px) rotate(-2deg); }
          75% { transform: translateX(4px) rotate(2deg); }
        }
      `})]})}const Mw=[{number:1,label:"Select items"},{number:2,label:"Review with AI"},{number:3,label:"Publish"}];function FB({currentStep:e}){return a.jsx("div",{className:"flex items-center justify-center gap-2 sm:gap-4 py-4",children:Mw.map((t,r)=>{const n=e>t.number,s=e===t.number;return a.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:G("h-8 w-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors",n?"bg-primary text-primary-foreground":s?"bg-primary/20 text-primary border-2 border-primary":"bg-muted text-muted-foreground"),children:n?a.jsx(Li,{className:"h-4 w-4"}):t.number}),a.jsx("span",{className:G("text-sm font-medium hidden sm:inline",s?"text-foreground":"text-muted-foreground"),children:t.label})]}),r<Mw.length-1&&a.jsx("div",{className:G("h-0.5 w-8 sm:w-12",e>t.number?"bg-primary":"bg-muted")})]},t.number)})})}var un="Accordion",UB=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Iv,BB,zB]=Jl(un),[rh,z6]=Ft(un,[zB,vN]),Ov=vN(),nC=B.forwardRef((e,t)=>{const{type:r,...n}=e,s=n,i=n;return a.jsx(Iv.Provider,{scope:e.__scopeAccordion,children:r==="multiple"?a.jsx(HB,{...i,ref:t}):a.jsx(VB,{...s,ref:t})})});nC.displayName=un;var[sC,qB]=rh(un),[iC,WB]=rh(un,{collapsible:!1}),VB=B.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:s=()=>{},collapsible:i=!1,...o}=e,[l,c]=Lr({prop:r,defaultProp:n??"",onChange:s,caller:un});return a.jsx(sC,{scope:e.__scopeAccordion,value:B.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:B.useCallback(()=>i&&c(""),[i,c]),children:a.jsx(iC,{scope:e.__scopeAccordion,collapsible:i,children:a.jsx(aC,{...o,ref:t})})})}),HB=B.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:s=()=>{},...i}=e,[o,l]=Lr({prop:r,defaultProp:n??[],onChange:s,caller:un}),c=B.useCallback(d=>l((h=[])=>[...h,d]),[l]),u=B.useCallback(d=>l((h=[])=>h.filter(f=>f!==d)),[l]);return a.jsx(sC,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:a.jsx(iC,{scope:e.__scopeAccordion,collapsible:!0,children:a.jsx(aC,{...i,ref:t})})})}),[KB,nh]=rh(un),aC=B.forwardRef((e,t)=>{const{__scopeAccordion:r,disabled:n,dir:s,orientation:i="vertical",...o}=e,l=B.useRef(null),c=Ne(l,t),u=BB(r),h=go(s)==="ltr",f=H(e.onKeyDown,m=>{var S;if(!UB.includes(m.key))return;const b=m.target,g=u().filter(E=>{var A;return!((A=E.ref.current)!=null&&A.disabled)}),v=g.findIndex(E=>E.ref.current===b),w=g.length;if(v===-1)return;m.preventDefault();let y=v;const x=0,_=w-1,j=()=>{y=v+1,y>_&&(y=x)},N=()=>{y=v-1,y<x&&(y=_)};switch(m.key){case"Home":y=x;break;case"End":y=_;break;case"ArrowRight":i==="horizontal"&&(h?j():N());break;case"ArrowDown":i==="vertical"&&j();break;case"ArrowLeft":i==="horizontal"&&(h?N():j());break;case"ArrowUp":i==="vertical"&&N();break}const k=y%w;(S=g[k].ref.current)==null||S.focus()});return a.jsx(KB,{scope:r,disabled:n,direction:s,orientation:i,children:a.jsx(Iv.Slot,{scope:r,children:a.jsx(ne.div,{...o,"data-orientation":i,ref:c,onKeyDown:n?void 0:f})})})}),sd="AccordionItem",[GB,Mv]=rh(sd),oC=B.forwardRef((e,t)=>{const{__scopeAccordion:r,value:n,...s}=e,i=nh(sd,r),o=qB(sd,r),l=Ov(r),c=Ir(),u=n&&o.value.includes(n)||!1,d=i.disabled||e.disabled;return a.jsx(GB,{scope:r,open:u,disabled:d,triggerId:c,children:a.jsx(wN,{"data-orientation":i.orientation,"data-state":fC(u),...l,...s,ref:t,disabled:d,open:u,onOpenChange:h=>{h?o.onItemOpen(n):o.onItemClose(n)}})})});oC.displayName=sd;var lC="AccordionHeader",cC=B.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,s=nh(un,r),i=Mv(lC,r);return a.jsx(ne.h3,{"data-orientation":s.orientation,"data-state":fC(i.open),"data-disabled":i.disabled?"":void 0,...n,ref:t})});cC.displayName=lC;var im="AccordionTrigger",uC=B.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,s=nh(un,r),i=Mv(im,r),o=WB(im,r),l=Ov(r);return a.jsx(Iv.ItemSlot,{scope:r,children:a.jsx(tF,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":s.orientation,id:i.triggerId,...l,...n,ref:t})})});uC.displayName=im;var dC="AccordionContent",hC=B.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,s=nh(un,r),i=Mv(dC,r),o=Ov(r);return a.jsx(rF,{role:"region","aria-labelledby":i.triggerId,"data-orientation":s.orientation,...o,...n,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});hC.displayName=dC;function fC(e){return e?"open":"closed"}var YB=nC,QB=oC,JB=cC,pC=uC,mC=hC;const XB=YB,gC=p.forwardRef(({className:e,...t},r)=>a.jsx(QB,{ref:r,className:G("border-b",e),...t}));gC.displayName="AccordionItem";const vC=p.forwardRef(({className:e,children:t,...r},n)=>a.jsx(JB,{className:"flex",children:a.jsxs(pC,{ref:n,className:G("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...r,children:[t,a.jsx(so,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));vC.displayName=pC.displayName;const yC=p.forwardRef(({className:e,children:t,...r},n)=>a.jsx(mC,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:a.jsx("div",{className:G("pb-4 pt-0",e),children:t})}));yC.displayName=mC.displayName;function ZB({steps:e,activeStepId:t,onSetActive:r,onUpdateStep:n,onRemoveStep:s,onAddStep:i,onReorderSteps:o,onRemoveItem:l,onUpdateItemContext:c,itemContexts:u}){const[d,h]=p.useState(null),[f,m]=p.useState(""),[b,g]=p.useState(null),v=p.useCallback(S=>{const[E,A]=S.split("::");return!E||!A?null:{key:S,category:E,item:A}},[]),w=p.useCallback(S=>{h(S.id),m(S.title)},[]),y=p.useCallback(S=>{n(S,{title:f.trim()}),h(null),m("")},[n,f]),x=p.useCallback(()=>{h(null),m("")},[]),_=p.useCallback(S=>{g(S)},[]),j=p.useCallback(S=>{S.preventDefault()},[]),N=p.useCallback(S=>{b!==null&&b!==S&&o(b,S),g(null)},[b,o]),k=p.useCallback(()=>{g(null)},[]);return a.jsxs("div",{className:"space-y-3",children:[a.jsxs(O,{type:"button",variant:"outline",onClick:i,className:"w-full gap-2 border-dashed","data-help-id":"add-step",children:[a.jsx(Cd,{className:"h-4 w-4"}),"Add Step"]}),e.length===0?a.jsx("div",{className:"rounded-xl border border-dashed border-border/60 p-6 text-center",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"No steps yet. Select items from the library above  they'll appear in your first step automatically."})}):a.jsx(XB,{type:"single",collapsible:!0,value:t||void 0,onValueChange:S=>S&&r(S),className:"space-y-2","data-help-id":"steps",children:e.map((S,E)=>{const A=S.title.trim()||`Step ${E+1}`,$=S.itemKeys.map(v).filter(I=>I!==null),M=t===S.id,Q=d===S.id;return a.jsxs(gC,{value:S.id,className:G("rounded-xl border transition-all duration-200",M?"border-primary/40 bg-card shadow-sm":"border-border/40 bg-muted/30 hover:bg-muted/50"),draggable:!0,onDragStart:()=>_(E),onDragOver:j,onDrop:()=>N(E),onDragEnd:k,children:[a.jsx(vC,{className:"px-4 py-3 hover:no-underline [&>svg]:hidden",children:a.jsxs("div",{className:"flex w-full items-center gap-3",children:[a.jsx(X2,{className:"h-4 w-4 text-muted-foreground cursor-grab shrink-0"}),Q?a.jsxs("div",{className:"flex items-center gap-2 flex-1",onClick:I=>I.stopPropagation(),children:[a.jsx(Fe,{value:f,onChange:I=>m(I.target.value),placeholder:`Step ${E+1}`,className:"h-8 flex-1",autoFocus:!0,onKeyDown:I=>{I.key==="Enter"?(I.preventDefault(),y(S.id)):I.key==="Escape"&&x()}}),a.jsx(O,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:I=>{I.stopPropagation(),y(S.id)},children:a.jsx(Li,{className:"h-4 w-4"})}),a.jsx(O,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:I=>{I.stopPropagation(),x()},children:a.jsx(ir,{className:"h-4 w-4"})})]}):a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[a.jsx("span",{className:"font-medium truncate",children:A}),a.jsx(O,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:I=>{I.stopPropagation(),w(S)},children:a.jsx(U_,{className:"h-3 w-3"})})]}),a.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[a.jsxs(Pe,{variant:"secondary",className:"text-xs",children:[$.length," ",$.length===1?"item":"items"]}),M&&a.jsxs(Pe,{variant:"outline",className:"gap-1 text-xs border-primary/40 text-primary",children:[a.jsx(uR,{className:"h-3 w-3"}),"Active"]}),a.jsx(O,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:I=>{I.stopPropagation(),s(S.id)},children:a.jsx(dp,{className:"h-4 w-4 text-destructive"})})]})]})}),a.jsx(yC,{className:"px-4 pb-4",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"space-y-1.5",children:a.jsx(ar,{value:S.description,onChange:I=>n(S.id,{description:I.target.value}),placeholder:"Add step notes or instructions...",rows:2,className:"resize-none"})}),M&&$.length===0&&a.jsx("div",{className:"rounded-lg bg-primary/5 border border-primary/20 p-3 text-center","data-help-id":"active-step",children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"Items you select will be added here automatically"})}),$.length>0&&a.jsx("div",{className:"space-y-2",children:$.map(I=>a.jsxs("div",{className:"rounded-lg border border-border/40 bg-background/50 p-3 space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:I.item}),a.jsx("p",{className:"text-xs text-muted-foreground",children:I.category})]}),a.jsx(O,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:()=>l(I.category,I.item),children:a.jsx(dp,{className:"h-4 w-4 text-destructive"})})]}),a.jsx(Fe,{value:u[I.key]||"",onChange:se=>c(I.category,I.item,se.target.value),placeholder:"Add context (e.g., 0.5 mg, morning, with food...)",className:"h-8 text-sm","data-help-id":"context"})]},I.key))})]})})]},S.id)})})]})}const e6=[{id:"picker",text:"Browse and select items by category"},{id:"steps",text:"Organize your items into ordered steps"},{id:"active-step",text:"Selected items appear here"},{id:"add-step",text:"Create a new step in your routine"},{id:"context",text:'Add notes like "2 drops" or "morning"'},{id:"mix",text:"Generate AI analysis of your blueprint"}];function t6({isOpen:e,onClose:t,onStartTour:r}){const[n,s]=p.useState([]),i=p.useCallback(()=>{const o=[];e6.forEach(({id:l,text:c})=>{const u=document.querySelector(`[data-help-id="${l}"]`);if(!u)return;const d=u.getBoundingClientRect(),h=window.innerWidth,f=window.innerHeight;let m="right",b=d.right+12,g=d.top+d.height/2;d.right+200>h&&(d.left>200?(m="left",b=d.left-12):(m="bottom",b=d.left+d.width/2,g=d.bottom+12)),(m==="left"||m==="right")&&(g<50&&(g=50),g>f-50&&(g=f-50)),o.push({id:l,text:c,x:b,y:g,side:m})}),s(o)},[]);return p.useEffect(()=>{if(e){const o=setTimeout(i,100);return()=>clearTimeout(o)}},[e,i]),p.useEffect(()=>{if(!e)return;const o=l=>{l.key==="Escape"&&t()};return window.addEventListener("keydown",o),window.addEventListener("resize",i),()=>{window.removeEventListener("keydown",o),window.removeEventListener("resize",i)}},[e,t,i]),e?ln.createPortal(a.jsxs("div",{className:"fixed inset-0 z-50",children:[a.jsx("div",{className:"absolute inset-0 bg-background/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:t}),n.map(o=>a.jsxs("div",{className:G("fixed z-50 max-w-[200px] rounded-lg bg-foreground text-background px-3 py-2 text-sm shadow-lg animate-in fade-in zoom-in-95 duration-200",o.side==="left"&&"-translate-x-full",o.side==="top"&&"-translate-y-full -translate-x-1/2",o.side==="bottom"&&"-translate-x-1/2",(o.side==="left"||o.side==="right")&&"-translate-y-1/2"),style:{left:o.x,top:o.y},children:[o.text,a.jsx("div",{className:G("absolute w-2 h-2 bg-foreground rotate-45",o.side==="right"&&"-left-1 top-1/2 -translate-y-1/2",o.side==="left"&&"-right-1 top-1/2 -translate-y-1/2",o.side==="bottom"&&"-top-1 left-1/2 -translate-x-1/2",o.side==="top"&&"-bottom-1 left-1/2 -translate-x-1/2")})]},o.id)),a.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 bg-card border border-border rounded-2xl shadow-lg p-4 animate-in slide-in-from-bottom-4 duration-300",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(ec,{className:"h-4 w-4"}),a.jsx("span",{children:"Hover over highlighted elements"})]}),a.jsx("div",{className:"h-4 w-px bg-border"}),a.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>{t(),r()},className:"gap-2",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Take a tour"]}),a.jsx(O,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8",children:a.jsx(ir,{className:"h-4 w-4"})})]})})]}),document.body):null}function r6({onClick:e}){return a.jsx(O,{type:"button",variant:"outline",size:"icon",onClick:e,className:"h-9 w-9 rounded-full border-dashed","aria-label":"Show help",children:a.jsx(ec,{className:"h-4 w-4"})})}const Bl="blueprint_build_tour_completed",Do=[{targetId:"picker",title:"Browse Your Library",description:"Click on categories to explore items. Select the ones you want to include in your blueprint."},{targetId:"add-step",title:"Organize Into Steps",description:"Create steps to organize your routine. Items you select flow into the active step."},{targetId:"steps",title:"Manage Your Steps",description:"Click a step to make it active. Add context like dosage or timing to each item."},{targetId:"mix",title:"Generate AI Analysis",description:"When you're ready, hit Build to get an AI-powered review of your blueprint!"}];function n6({isActive:e,onComplete:t,onSkip:r}){const[n,s]=p.useState(0),[i,o]=p.useState(null),l=Do[n],c=p.useCallback(()=>{if(!l)return;const f=document.querySelector(`[data-help-id="${l.targetId}"]`);o(f?f.getBoundingClientRect():null)},[l]);p.useEffect(()=>{if(e)return c(),window.addEventListener("resize",c),window.addEventListener("scroll",c),()=>{window.removeEventListener("resize",c),window.removeEventListener("scroll",c)}},[e,c,n]),p.useEffect(()=>{if(!e)return;const f=m=>{m.key==="Escape"?r():(m.key==="ArrowRight"||m.key==="Enter")&&u()};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[e,n,r]);const u=p.useCallback(()=>{n<Do.length-1?s(f=>f+1):(localStorage.setItem(Bl,"true"),t())},[n,t]),d=p.useCallback(()=>{localStorage.setItem(Bl,"true"),r()},[r]);if(!e||!l)return null;const h=(()=>{if(!i)return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};const f=window.innerHeight,m=window.innerWidth,b=320,g=180,v=16;let w=i.bottom+v,y=i.left+i.width/2-b/2;return w+g>f-20&&(w=i.top-g-v),y<20&&(y=20),y+b>m-20&&(y=m-b-20),{top:`${w}px`,left:`${y}px`}})();return ln.createPortal(a.jsxs("div",{className:"fixed inset-0 z-50",children:[a.jsx("div",{className:"absolute inset-0",children:a.jsxs("svg",{className:"w-full h-full",children:[a.jsx("defs",{children:a.jsxs("mask",{id:"spotlight-mask",children:[a.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),i&&a.jsx("rect",{x:i.left-8,y:i.top-8,width:i.width+16,height:i.height+16,rx:"12",fill:"black"})]})}),a.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"hsl(var(--background) / 0.8)",mask:"url(#spotlight-mask)",className:"animate-in fade-in duration-300"})]})}),i&&a.jsx("div",{className:"absolute rounded-xl border-2 border-primary shadow-glow-aqua pointer-events-none animate-pulse",style:{left:i.left-8,top:i.top-8,width:i.width+16,height:i.height+16}}),a.jsx(K,{className:"fixed w-80 bg-card border-border shadow-lg animate-in slide-in-from-bottom-2 duration-300 z-10",style:h,children:a.jsxs(Y,{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"font-semibold",children:l.title}),a.jsx("p",{className:"text-sm text-muted-foreground",children:l.description})]}),a.jsx(O,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:d,children:a.jsx(ir,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex gap-1.5",children:Do.map((f,m)=>a.jsx("div",{className:G("h-1.5 w-1.5 rounded-full transition-colors",m===n?"bg-primary":"bg-muted-foreground/30")},m))}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(O,{variant:"ghost",size:"sm",onClick:d,children:"Skip"}),a.jsxs(O,{size:"sm",onClick:u,className:"gap-1",children:[n===Do.length-1?"Done":"Next",n<Do.length-1&&a.jsx(og,{className:"h-4 w-4"})]})]})]})]})})]}),document.body)}function s6({onStartTour:e,onDismiss:t}){const[r,n]=p.useState(()=>localStorage.getItem(Bl)==="true");return r?null:a.jsxs("div",{className:"rounded-xl border border-primary/30 bg-primary/5 p-4 flex items-center justify-between gap-4 animate-in fade-in slide-in-from-top-2 duration-300",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:a.jsx(Kn,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"New here?"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Take a quick tour to learn how to build blueprints."})]})]}),a.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[a.jsx(O,{variant:"ghost",size:"sm",onClick:()=>{n(!0),localStorage.setItem(Bl,"true"),t()},children:"Maybe later"}),a.jsxs(O,{size:"sm",onClick:e,className:"gap-2",children:[a.jsx(Kn,{className:"h-4 w-4"}),"Take Tour"]})]})]})}function i6(){return localStorage.getItem(Bl)==="true"}function a6({onClick:e}){return a.jsx(O,{type:"button",variant:"ghost",size:"icon",onClick:e,className:"h-9 w-9 rounded-full","aria-label":"Take a tour",title:"Take a tour",children:a.jsx(Kn,{className:"h-4 w-4"})})}const xC="https://bapi.vdsai.cloud",o6=!0,Dw=`${xC.replace(/\/$/,"")}/api/analyze-blueprint`,Lw=`${xC.replace(/\/$/,"")}/api/generate-banner`,l6=Dw||"https://piszvseyaefxekubphhf.supabase.co/functions/v1/analyze-blueprint";function c6(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=e.categories;return Array.isArray(t)?t.map(r=>({name:typeof r.name=="string"?r.name:"Untitled",items:Array.isArray(r.items)?r.items.filter(n=>typeof n=="string"):[]})).filter(r=>r.name.trim().length>0):[]}function $w(){const{inventoryId:e,blueprintId:t}=po(),r=Gs(),n=kn(),{toast:s}=$t(),{session:i,user:o}=Se(),l=!!t,{data:c,isLoading:u}=yv(t),d=e||(c==null?void 0:c.inventory_id)||void 0,{data:h,isLoading:f}=Cv(d),{data:m}=kv(),{recentTags:b,addRecentTags:g}=Tv(),v=Nk(),w=oU(),[y,x]=p.useState(""),[_,j]=p.useState({}),[N,k]=p.useState({}),[S,E]=p.useState(""),[A,$]=p.useState(""),[M,Q]=p.useState(""),[I,se]=p.useState(!0),[V,Z]=p.useState(null),[R,T]=p.useState(!1),[D,ee]=p.useState([]),[J,de]=p.useState(!0),[U,ce]=p.useState(!1),[ae,L]=p.useState([]),[ue,xe]=p.useState(""),[ke,q]=p.useState(""),[X,ve]=p.useState(!0),[Ie,we]=p.useState([]),[De,Be]=p.useState(null),[Ut,_r]=p.useState(!1),[Bi,En]=p.useState(!1),[lc,or]=p.useState(!1),[sh,cc]=p.useState(()=>!i6()),Bt=p.useRef(!1),[Zn,uc]=p.useState([]),dc=!!(l&&c&&o&&c.creator_user_id===o.id),zi=f||l&&u,ih=!!o||!!(i!=null&&i.access_token),xo=!o&&!(i!=null&&i.access_token)?"Sign in to generate a banner.":null,qi=p.useCallback(F=>{const W={},ie={};return!F||typeof F!="object"||Array.isArray(F)?{items:W,contexts:ie}:(Object.entries(F).forEach(([oe,fe])=>{if(!Array.isArray(fe))return;const Ce=[];fe.forEach(Ee=>{if(typeof Ee=="string"){Ce.push(Ee);return}if(!Ee||typeof Ee!="object")return;const be=typeof Ee.name=="string"?Ee.name:"";be&&(Ce.push(be),typeof Ee.context=="string"&&Ee.context.trim()&&(ie[`${oe}::${be}`]=Ee.context.trim()))}),Ce.length>0&&(W[oe]=Ce)}),{items:W,contexts:ie})},[]),Tn=p.useCallback(F=>!F||typeof F!="object"||!Array.isArray(F)?[]:F.filter(W=>W&&typeof W=="object").map((W,ie)=>{const oe=W,fe=(oe.items||[]).map(Ce=>{const Ee=typeof Ce.category=="string"?Ce.category:"",be=typeof Ce.name=="string"?Ce.name:"";return!Ee||!be?null:`${Ee}::${be}`}).filter(Ce=>!!Ce);return{id:oe.id||`step-${ie}`,title:oe.title||"",description:typeof oe.description=="string"?oe.description:"",itemKeys:fe}}),[]),wo=p.useCallback(F=>{const W={},ie={};return!F||typeof F!="object"||!Array.isArray(F)?{items:W,contexts:ie}:(F.forEach(oe=>{(oe.items||[]).forEach(Ce=>{const Ee=typeof Ce.category=="string"?Ce.category:"",be=typeof Ce.name=="string"?Ce.name:"";!Ee||!be||(W[Ee]||(W[Ee]=[]),W[Ee].includes(be)||W[Ee].push(be),typeof Ce.context=="string"&&Ce.context.trim()&&(ie[`${Ee}::${be}`]=Ce.context.trim()))})}),{items:W,contexts:ie})},[]);p.useEffect(()=>{var F;if(!(!h||Ut)&&!(l&&!c)){if(uc(c6(h.generated_schema)),L(Pv(h.review_sections).slice(0,il)),ve(h.include_score??!0),l&&c){const W=qi(c.selected_items),ie=wo(c.steps),oe={...W.items};Object.entries(ie.items).forEach(([Ee,be])=>{const Ze=new Set(oe[Ee]||[]);be.forEach(Qt=>Ze.add(Qt)),oe[Ee]=Array.from(Ze)});const fe={...W.contexts,...ie.contexts};x(c.title||h.title),j(oe),k(fe),E(c.mix_notes||""),$(c.review_prompt||""),Q(c.llm_review||""),Z(c.banner_url||null),se(!0),ee(c.tags.map(Ee=>Ee.slug)),de(c.is_public);const Ce=Tn(c.steps);we(Ce),Be(((F=Ce[0])==null?void 0:F.id)||null)}else x(h.title),we([]),Be(null),Z(null),se(!0);_r(!0)}},[h,c,l,Ut,qi,Tn,wo]);const gt=p.useMemo(()=>Object.values(_).reduce((F,W)=>F+W.length,0),[_]);p.useEffect(()=>{Bt.current||h&&(gt<=0||(Bt.current=!0,Dn({eventName:"edit_blueprint",userId:o==null?void 0:o.id,blueprintId:t??null,path:n.pathname,metadata:{inventoryId:h.id,selectedCount:gt,isEditing:l}})))},[h,gt,o==null?void 0:o.id,t,n.pathname,l]);const Wi=p.useMemo(()=>Av(ae),[ae]),bo=(l?c==null?void 0:c.title:h==null?void 0:h.title)||(l?"EDIT":"BUILD"),jr=p.useCallback((F,W)=>`${F}::${W}`,[]),Js=p.useCallback(F=>{we(W=>W.map(ie=>({...ie,itemKeys:ie.itemKeys.filter(oe=>oe!==F)})))},[]),Vi=p.useCallback(F=>{we(W=>{var oe;if(W.length===0){const fe=crypto.randomUUID();return Be(fe),[{id:fe,title:"",description:"",itemKeys:[F]}]}const ie=((oe=W.find(fe=>fe.id===De))==null?void 0:oe.id)||W[W.length-1].id;return W.map(fe=>fe.id!==ie||fe.itemKeys.includes(F)?fe:{...fe,itemKeys:[...fe.itemKeys,F]})})},[De]),_o=p.useCallback((F,W)=>{const ie=jr(F,W);j(oe=>{const fe=new Set(oe[F]||[]),Ce=fe.has(W);return Ce?fe.delete(W):fe.add(W),Ce?Js(ie):Vi(ie),{...oe,[F]:Array.from(fe)}})},[Vi,jr,Js]),dn=p.useCallback((F,W)=>{uc(ie=>ie.map(oe=>oe.name===F?{...oe,items:oe.items.includes(W)?oe.items:[...oe.items,W]}:oe)),j(ie=>({...ie,[F]:[...ie[F]||[],W]})),Vi(jr(F,W))},[Vi,jr]),ah=p.useCallback((F,W)=>{const ie=jr(F,W);j(oe=>({...oe,[F]:(oe[F]||[]).filter(fe=>fe!==W)})),k(oe=>{const fe={...oe};return delete fe[ie],fe}),Js(ie)},[jr,Js]),je=p.useCallback((F,W,ie)=>{k(oe=>({...oe,[`${F}::${W}`]:ie}))},[]),$e=p.useCallback(()=>{j({}),k({}),we(F=>F.map(W=>({...W,itemKeys:[]})))},[]),He=p.useCallback(()=>{const F={id:crypto.randomUUID(),title:"",description:"",itemKeys:[]};we(W=>[...W,F]),Be(F.id)},[]),lr=p.useCallback((F,W)=>{we(ie=>ie.map(oe=>oe.id===F?{...oe,...W}:oe))},[]),cr=p.useCallback(F=>{we(W=>{const ie=W.find(Ce=>Ce.id===F);if(!ie)return W;const oe=new Set(ie.itemKeys);oe.size>0&&(j(Ce=>{const Ee={};return Object.entries(Ce).forEach(([be,Ze])=>{const Qt=Ze.filter(Hi=>!oe.has(jr(be,Hi)));Qt.length>0&&(Ee[be]=Qt)}),Ee}),k(Ce=>{const Ee={...Ce};return oe.forEach(be=>{delete Ee[be]}),Ee}));const fe=W.filter(Ce=>Ce.id!==F);return De===F&&fe.length>0?Be(fe[fe.length-1].id):fe.length===0&&Be(null),fe})},[De,jr]),hn=p.useCallback((F,W)=>{we(ie=>{if(F===W)return ie;const oe=[...ie],[fe]=oe.splice(F,1);return oe.splice(W,0,fe),oe})},[]),Rn=F=>{se(F),F||Z(null)},ur=p.useCallback(async()=>{var W,ie,oe;if(!h)return;if(gt===0){s({title:"No items selected",description:"Select at least one item before generating the review.",variant:"destructive"});return}if(!(i!=null&&i.access_token)){s({title:"Sign in required",description:"Please sign in to generate a review.",variant:"destructive"});return}const F={};Object.entries(_).forEach(([fe,Ce])=>{Ce.length>0&&(F[fe]=Ce.map(Ee=>({name:Ee,context:N[`${fe}::${Ee}`]||void 0})))}),ce(!0),Q("");try{const fe=await fetch(l6,{method:"POST",headers:{"Content-Type":"application/json",Authorization:o6&&(i!=null&&i.access_token)?`Bearer ${i.access_token}`:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBpc3p2c2V5YWVmeGVrdWJwaGhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwODE3NTEsImV4cCI6MjA4NDY1Nzc1MX0.odmCphs9gpipbjF7zp639J0r8s48SYHnpNsjQvfICSc"},body:JSON.stringify({title:y.trim()||h.title,inventoryTitle:h.title,selectedItems:F,mixNotes:S.trim(),reviewPrompt:A.trim(),reviewSections:Wi,includeScore:X})});if(!fe.ok){const Qt=await fe.json().catch(()=>({}));throw new Error(Qt.error||"Failed to analyze blueprint")}if(!fe.body)throw new Error("No response body");const Ce=fe.body.getReader(),Ee=new TextDecoder;let be="",Ze="";for(;;){const{done:Qt,value:Hi}=await Ce.read();if(Qt)break;Ze+=Ee.decode(Hi,{stream:!0});let oh;for(;(oh=Ze.indexOf(`
`))!==-1;){let es=Ze.slice(0,oh);if(Ze=Ze.slice(oh+1),es.endsWith("\r")&&(es=es.slice(0,-1)),es.startsWith(":")||es.trim()===""||!es.startsWith("data: "))continue;const Lv=es.slice(6).trim();if(Lv==="[DONE]")break;try{const $v=(oe=(ie=(W=JSON.parse(Lv).choices)==null?void 0:W[0])==null?void 0:ie.delta)==null?void 0:oe.content;$v&&(be+=$v,Q(be))}catch{Ze=es+`
`+Ze;break}}}s({title:"Analysis complete!",description:"Your blueprint has been reviewed."}),Dn({eventName:"generate_ai_review",userId:o==null?void 0:o.id,blueprintId:t??null,path:n.pathname,metadata:{inventoryId:(h==null?void 0:h.id)??null,selectedCount:gt,isEditing:l}})}catch(fe){s({title:"Analysis failed",description:Fl(fe,"Please try again."),variant:"destructive"})}finally{ce(!1)}},[h,_,N,y,S,A,Wi,X,gt,s,t,n.pathname,o==null?void 0:o.id,l,i==null?void 0:i.access_token]),Fr=p.useCallback(async()=>{var ie,oe;if(i!=null&&i.access_token)return i.access_token;const{data:F}=await P.auth.getSession();if((ie=F.session)!=null&&ie.access_token)return F.session.access_token;const{data:W}=await P.auth.refreshSession();return((oe=W.session)==null?void 0:oe.access_token)??null},[i==null?void 0:i.access_token]),Dv=p.useCallback(async()=>{if(!h)return;if(!Lw)return s({title:"Banner generation unavailable",description:"The agentic backend is not configured.",variant:"destructive"}),null;const F=await Fr();if(!F)return s({title:"Sign in required",description:"Please sign in to generate a banner.",variant:"destructive"}),null;if(!y.trim())return s({title:"Title required",description:"Add a blueprint title before generating a banner.",variant:"destructive"}),null;T(!0);try{const W=await fetch(Lw,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${F}`},body:JSON.stringify({title:y.trim(),inventoryTitle:h.title,tags:D})});if(!W.ok){const oe=await W.json().catch(()=>({}));throw new Error(oe.error||"Failed to generate banner")}const ie=await W.json();if(!(ie!=null&&ie.bannerUrl))throw new Error("No banner URL returned");return Z(ie.bannerUrl),ie.bannerUrl}catch(W){throw s({title:"Banner generation failed",description:Fl(W,"Please try again."),variant:"destructive"}),W}finally{T(!1)}},[h,Fr,y,D,s]),wC=async()=>{if(l&&t&&!dc){s({title:"Permission denied",description:"Only the blueprint owner can edit this blueprint.",variant:"destructive"});return}if(!(i!=null&&i.access_token)){s({title:"Sign in required",description:"Please sign in to publish your blueprint.",variant:"destructive"});return}if(h){if(!y.trim()){s({title:"Title required",description:l?"Add a blueprint title before saving changes.":"Add a blueprint title before publishing.",variant:"destructive"});return}if(gt===0){s({title:"Select items",description:l?"Pick at least one item before saving changes.":"Pick at least one item before publishing.",variant:"destructive"});return}if(D.length>4){s({title:"Too many tags",description:"Please use 4 tags or fewer.",variant:"destructive"});return}if(D.length===0){s({title:"Tags required",description:"Add at least one tag so the wall can surface your blueprint.",variant:"destructive"});return}try{const F={};Object.entries(_).forEach(([be,Ze])=>{Ze.length>0&&(F[be]=Ze.map(Qt=>({name:Qt,context:N[`${be}::${Qt}`]||void 0})))});const W=new Map;Object.entries(_).forEach(([be,Ze])=>{Ze.forEach(Qt=>{const Hi=jr(be,Qt);W.set(Hi,{category:be,name:Qt,context:N[Hi]||void 0})})});const ie=Ie.map(be=>({id:be.id,title:be.title,description:be.description||null,items:be.itemKeys.map(Ze=>W.get(Ze)).filter(Ze=>!!Ze)})),oe=new Set(ie.flatMap(be=>be.items.map(Ze=>`${Ze.category}::${Ze.name}`))),fe=Array.from(W.entries()).filter(([be])=>!oe.has(be)).map(([,be])=>be),Ce=ie.length>0?[...ie,...fe.length>0?[{id:"unassigned",title:"Unassigned",description:null,items:fe}]:[]]:null;let Ee=V;if(I&&!Ee&&(Ee=await Dv()),I&&!Ee)throw new Error("Banner generation is required before publishing.");if(l&&t){const be=await w.mutateAsync({blueprintId:t,title:y.trim(),selectedItems:F,steps:Ce,mixNotes:S.trim()?S.trim():null,reviewPrompt:A.trim()?A.trim():null,bannerUrl:Ee,llmReview:M,tags:D,isPublic:J});g(D),Dn({eventName:"save_blueprint",userId:o==null?void 0:o.id,blueprintId:be.id,path:n.pathname,metadata:{isEditing:!0,hasReview:!!M,tagCount:D.length}}),Dn({eventName:"publish_blueprint",userId:o==null?void 0:o.id,blueprintId:be.id,path:n.pathname,metadata:{isPublic:J,isEditing:!0}}),r(`/blueprint/${be.id}`)}else{const be=await v.mutateAsync({inventoryId:h.id,title:y.trim(),selectedItems:F,steps:Ce,mixNotes:S.trim()?S.trim():null,reviewPrompt:A.trim()?A.trim():null,bannerUrl:Ee,llmReview:M,tags:D,isPublic:J,sourceBlueprintId:null});g(D),Dn({eventName:"save_blueprint",userId:o==null?void 0:o.id,blueprintId:be.id,path:n.pathname,metadata:{isEditing:!1,hasReview:!!M,tagCount:D.length}}),Dn({eventName:"publish_blueprint",userId:o==null?void 0:o.id,blueprintId:be.id,path:n.pathname,metadata:{isPublic:J,isEditing:!1}}),r(`/blueprint/${be.id}`)}}catch(F){s({title:l?"Update failed":"Publish failed",description:F instanceof Error?F.message:"Please try again.",variant:"destructive"})}}};return l&&c&&!dc?a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(St,{}),a.jsx("main",{className:"max-w-3xl mx-auto px-4 py-12",children:a.jsx(K,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:a.jsxs(Y,{className:"py-12 text-center space-y-3",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"You cannot edit this blueprint"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Only the original creator can make changes."}),a.jsx(ge,{to:`/blueprint/${c.id}`,children:a.jsx(O,{children:"Back to blueprint"})})]})})})]}):a.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[a.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none -z-10",children:[a.jsx("div",{className:"absolute -top-40 -right-40 w-[500px] h-[500px] bg-primary/8 rounded-full blur-3xl animate-drift"}),a.jsx("div",{className:"absolute top-1/2 -left-32 w-96 h-96 bg-accent/15 rounded-full blur-3xl animate-float"}),a.jsx("div",{className:"absolute -bottom-20 right-1/4 w-80 h-80 bg-secondary/10 rounded-full blur-3xl animate-pulse-soft"}),a.jsx("div",{className:"absolute top-20 right-20 w-4 h-4 bg-primary/20 rounded-full blur-sm animate-float-delayed"}),a.jsx("div",{className:"absolute top-40 right-40 w-2 h-2 bg-accent/30 rounded-full blur-sm animate-float-slow"}),a.jsx("div",{className:"absolute bottom-40 left-20 w-3 h-3 bg-primary/15 rounded-full blur-sm animate-drift"})]}),a.jsx(St,{}),a.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-3xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs(ge,{to:l&&t?`/blueprint/${t}`:"/inventory",className:"inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground",children:[a.jsx($_,{className:"h-4 w-4"}),l?"Back to blueprint":"Back to library"]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(a6,{onClick:()=>or(!0)}),a.jsx(r6,{onClick:()=>En(!0)})]})]}),a.jsxs("div",{className:"text-center mb-12 pt-8 animate-fade-in",children:[a.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-black tracking-tight mb-4 relative inline-block",children:[a.jsxs("span",{className:"relative inline-block",style:{fontFamily:"'Impact', 'Haettenschweiler', 'Franklin Gothic Bold', 'Charcoal', 'Helvetica Inserat', sans-serif",letterSpacing:"0.06em"},children:[a.jsx("span",{className:"absolute inset-0 text-border/40",style:{transform:"translate(4px, 4px)"},"aria-hidden":"true",children:bo.toUpperCase()}),a.jsx("span",{className:"absolute inset-0 text-border/60",style:{transform:"translate(2px, 2px)"},"aria-hidden":"true",children:bo.toUpperCase()}),a.jsx("span",{className:"text-gradient-themed animate-shimmer bg-[length:200%_auto] relative",children:bo.toUpperCase()})]}),a.jsx("span",{className:"absolute -inset-4 bg-primary/10 blur-2xl rounded-full animate-pulse-soft -z-10"})]}),a.jsx("p",{className:"text-lg text-muted-foreground max-w-md mx-auto",children:l?"Update your blueprint, regenerate the review, and save the changes.":"Build your blueprint from this library"})]}),zi?a.jsx(K,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:a.jsxs(Y,{className:"p-6",children:[a.jsx(_e,{className:"h-6 w-48"}),a.jsx(_e,{className:"h-24 w-full mt-4"})]})}):h?a.jsxs("div",{className:"space-y-6",children:[sh&&a.jsx(s6,{onStartTour:()=>{cc(!1),or(!0)},onDismiss:()=>cc(!1)}),a.jsx(FB,{currentStep:M?3:gt>0?2:1}),a.jsx("section",{className:"animate-fade-in",style:{animationDelay:"0.05s"},children:a.jsxs("div",{className:"bg-card/60 backdrop-blur-glass rounded-2xl border border-border/50 overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-border/30",children:a.jsx(Fe,{value:y,onChange:F=>x(F.target.value),placeholder:"Name your blueprint...",className:"text-xl font-bold bg-transparent border-none focus-visible:ring-2 focus-visible:ring-primary/50 h-14"})}),a.jsx("div",{className:"p-4","data-help-id":"picker",children:a.jsx(OB,{categories:Zn,selectedItems:_,onToggleItem:_o,onAddCustomItem:dn})})]})}),a.jsx("section",{className:"animate-fade-in",style:{animationDelay:"0.1s"},children:a.jsxs(K,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:[a.jsx(Ye,{children:a.jsx(mt,{children:"Steps"})}),a.jsxs(Y,{className:"space-y-4",children:[a.jsx(ZB,{steps:Ie,activeStepId:De,onSetActive:Be,onUpdateStep:lr,onRemoveStep:cr,onAddStep:He,onReorderSteps:hn,onRemoveItem:ah,onUpdateItemContext:je,itemContexts:N}),gt>0&&a.jsx("div",{className:"flex justify-end pt-2",children:a.jsx(O,{type:"button",variant:"ghost",onClick:$e,children:"Clear all selections"})})]})]})}),a.jsx("section",{className:"flex justify-center py-8 animate-fade-in",style:{animationDelay:"0.2s"},"data-help-id":"mix",children:a.jsx(IB,{onClick:ur,disabled:gt===0,isLoading:U,itemCount:gt})}),a.jsx("section",{className:"animate-fade-in",style:{animationDelay:"0.15s"},children:a.jsx(cv,{children:a.jsxs(K,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:[a.jsx(uv,{asChild:!0,children:a.jsxs(Ye,{className:"cursor-pointer hover:bg-muted/20 transition-colors",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(mt,{className:"text-base flex items-center gap-2",children:[a.jsx(B_,{className:"h-4 w-4 text-muted-foreground"}),"Review Options"]}),a.jsx(so,{className:"h-4 w-4 text-muted-foreground transition-transform [[data-state=open]>&]:rotate-180"})]}),a.jsx("p",{className:"text-xs text-muted-foreground text-left",children:"Build notes, review focus, custom sections"})]})}),a.jsx(dv,{children:a.jsx(Y,{className:"pt-0 pb-4 px-4 space-y-4",children:a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{htmlFor:"mix-notes",children:"Blueprint Notes"}),a.jsx(ar,{id:"mix-notes",value:S,onChange:F=>E(F.target.value),placeholder:"Any additional context for your blueprint...",rows:3})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{htmlFor:"review-prompt",children:"Review focus (optional)"}),a.jsx(ar,{id:"review-prompt",value:A,onChange:F=>$(F.target.value),placeholder:"What should the AI focus on?",rows:3})]}),a.jsxs("div",{className:"space-y-3 sm:col-span-2",children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx(We,{children:"Review sections"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Overview is always included."})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs font-medium",children:"Include score"}),a.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Adds a 1100 score in Overview."})]}),a.jsx(Ls,{checked:X,onCheckedChange:ve,className:"scale-90"})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx(Pe,{variant:"secondary",children:$s}),ae.map(F=>a.jsxs(Pe,{variant:"secondary",className:"gap-1",children:[F,a.jsx(O,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4",onClick:()=>{L(W=>W.filter(ie=>ie!==F)),q("")},"aria-label":"Remove section",children:a.jsx(ir,{className:"h-3 w-3"})})]},F))]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Fe,{value:ue,onChange:F=>xe(F.target.value),placeholder:"Add custom section",onKeyDown:F=>{if(F.key==="Enter"){F.preventDefault();const W=nd(ue);if(!W)return;if(W.toLowerCase()===$s.toLowerCase()){xe("");return}if(ae.some(ie=>ie.toLowerCase()===W.toLowerCase())){xe("");return}if(ae.length>=il){q(`You can add up to ${Ul} sections total.`);return}L(ie=>[...ie,W]),xe(""),q("")}}}),a.jsx(O,{type:"button",variant:"outline",onClick:()=>{const F=nd(ue);if(F){if(F.toLowerCase()===$s.toLowerCase()){xe("");return}if(ae.some(W=>W.toLowerCase()===F.toLowerCase())){xe("");return}if(ae.length>=il){q(`You can add up to ${Ul} sections total.`);return}L(W=>[...W,F]),xe(""),q("")}},children:"Add"})]}),ke&&a.jsx("p",{className:"text-sm text-destructive",children:ke})]})]})})})]})})}),U&&a.jsx("section",{className:"animate-fade-in-scale",children:a.jsx(K,{className:"overflow-hidden bg-card/60 backdrop-blur-glass border-primary/20",children:a.jsx(Y,{className:"p-0",children:a.jsx(rC,{})})})}),M&&!U&&a.jsx("section",{className:"animate-fade-in-up",children:a.jsx(sm,{review:M,sectionOrder:Wi})}),M&&U&&a.jsx("section",{className:"animate-fade-in",children:a.jsx(sm,{review:M,isStreaming:!0,sectionOrder:Wi})}),gt>0&&!U&&a.jsx("section",{className:"animate-fade-in",style:{animationDelay:"0.25s"},children:a.jsxs(K,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:[a.jsx(Ye,{children:a.jsxs(mt,{className:"flex items-center gap-2",children:[a.jsx(en,{className:"h-5 w-5 text-primary"}),l?"Save changes":"Publish Blueprint"]})}),a.jsxs(Y,{className:"space-y-4",children:[a.jsxs("div",{className:"rounded-lg border border-border/60 px-4 py-3 space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Generate banner"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a 4:1 banner for this blueprint."})]}),a.jsx(Ls,{checked:I,onCheckedChange:Rn})]}),I&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"aspect-[4/1] w-full overflow-hidden rounded-lg border border-border/60 bg-muted/40",children:V?a.jsx("img",{src:V,alt:"Blueprint banner",className:"h-full w-full object-cover",loading:"lazy"}):a.jsx("div",{className:"h-full w-full flex items-center justify-center text-xs text-muted-foreground",children:"No banner yet"})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsxs(O,{type:"button",variant:"outline",size:"sm",className:"gap-2",onClick:()=>Dv(),disabled:R||!ih,children:[a.jsx(nR,{className:`h-3.5 w-3.5 ${R?"animate-spin":""}`}),V?"Regenerate banner":"Generate banner"]}),V&&a.jsx(O,{type:"button",variant:"ghost",size:"sm",onClick:()=>Z(null),disabled:R,children:"Remove"})]}),xo&&a.jsx("p",{className:"text-xs text-muted-foreground",children:xo})]})]}),b.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(F=>a.jsxs(O,{type:"button",size:"sm",variant:"outline",onClick:()=>ee(W=>W.includes(F)?W:[...W,F]),children:["#",F]},F))}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{children:"Tags"}),a.jsx(Ev,{value:D,onChange:ee,suggestions:m||[],maxTags:12})]}),a.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 px-4 py-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Public blueprint"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Public blueprints appear on the wall."})]}),a.jsx(Ls,{checked:J,onCheckedChange:de})]}),a.jsxs(O,{onClick:wC,disabled:l?w.isPending:v.isPending,className:"w-full gap-2",size:"lg",children:[a.jsx(en,{className:"h-4 w-4"}),l?"Save Changes":"Publish Blueprint"]})]})]})}),a.jsx("footer",{className:"text-center py-8 text-sm text-muted-foreground border-t border-border/30 mt-8",children:a.jsx("p",{children:"Blueprint analysis is for informational purposes only. Always do your own research."})})]}):a.jsx(K,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:a.jsx(Y,{className:"py-12 text-center",children:"Library not found."})})]}),a.jsx(t6,{isOpen:Bi,onClose:()=>En(!1),onStartTour:()=>{En(!1),or(!0)}}),a.jsx(n6,{isActive:lc,onComplete:()=>or(!1),onSkip:()=>or(!1)})]})}function u6(e){if(typeof e=="string")return e;if(!e||typeof e!="object")return String(e);const t=typeof e.name=="string"?e.name:"Untitled",r=typeof e.context=="string"&&e.context.trim()?e.context.trim():"";return r?`${t} [${r}]`:t}function d6(e){const t=typeof e.name=="string"?e.name:"Untitled",r=typeof e.context=="string"&&e.context.trim()?e.context.trim():"";return r?`${t} [${r}]`:t}function h6(e){return!e||typeof e!="object"||Array.isArray(e)?[]:Object.entries(e).filter(([,t])=>Array.isArray(t))}function f6(e){return!e||typeof e!="object"?[]:Array.isArray(e)?e.filter(t=>!!t&&typeof t=="object"):[]}function p6(){var j,N,k;const e=Gs(),{blueprintId:t}=po(),{data:r,isLoading:n}=yv(t),{data:s,isLoading:i}=lU(t),o=cU(),l=kk(),{toast:c}=$t(),{user:u}=Se(),{followedIds:d,toggleFollow:h}=Yd(),[f,m]=p.useState(""),b=kn(),g=p.useRef(null),v=r?f6(r.steps):[],w=!!(u&&r&&u.id===r.creator_user_id);p.useEffect(()=>{r!=null&&r.id&&g.current!==r.id&&(g.current=r.id,Dn({eventName:"view_blueprint",userId:u==null?void 0:u.id,blueprintId:r.id,path:b.pathname}))},[r==null?void 0:r.id,b.pathname,u==null?void 0:u.id]);const y=async()=>{if(r)try{await l.mutateAsync({blueprintId:r.id,liked:r.user_liked})}catch(S){c({title:"Action failed",description:S instanceof Error?S.message:"Please try again.",variant:"destructive"})}},x=async()=>{if(t&&f.trim())try{await o.mutateAsync({blueprintId:t,content:f.trim()}),m("")}catch(S){c({title:"Comment failed",description:S instanceof Error?S.message:"Please try again.",variant:"destructive"})}},_=async S=>{if(!u){c({title:"Sign in required",description:"Please sign in to follow tags."});return}try{await h(S)}catch(E){c({title:"Tag update failed",description:E instanceof Error?E.message:"Please try again.",variant:"destructive"})}};return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(St,{}),a.jsx("main",{className:"max-w-4xl mx-auto px-4 py-8 space-y-6",children:n?a.jsxs(K,{children:[a.jsx(Ye,{children:a.jsx(_e,{className:"h-6 w-48"})}),a.jsx(Y,{children:a.jsx(_e,{className:"h-24 w-full"})})]}):r?a.jsxs(a.Fragment,{children:[a.jsxs("section",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(O,{variant:"ghost",size:"icon",onClick:()=>e(-1),"aria-label":"Go back",children:a.jsx($_,{className:"h-4 w-4"})}),a.jsx("h1",{className:"text-3xl font-semibold",children:r.title})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.map(S=>a.jsxs(Pe,{variant:"outline",className:`text-xs cursor-pointer transition-colors border ${d.has(S.id)?"bg-primary/15 text-primary border-primary/30 hover:bg-primary/20":"bg-muted/40 text-muted-foreground border-border/60 hover:bg-muted/60"}`,onClick:()=>_(S),children:["#",S.slug]},S.id))})]}),r.banner_url&&a.jsx("div",{className:"overflow-hidden rounded-xl border border-border/60 bg-muted/30",children:a.jsx("div",{className:"aspect-[4/1] w-full",children:a.jsx("img",{src:r.banner_url,alt:"Blueprint banner",className:"h-full w-full object-cover",loading:"lazy"})})}),a.jsxs(K,{children:[a.jsx(Ye,{className:"space-y-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(ge,{to:`/u/${r.creator_user_id}`,className:"flex items-center gap-3 hover:opacity-80 transition-opacity",children:[a.jsxs(nn,{className:"h-10 w-10",children:[a.jsx(sn,{src:((j=r.creator_profile)==null?void 0:j.avatar_url)||void 0}),a.jsx(an,{children:(((N=r.creator_profile)==null?void 0:N.display_name)||"U").slice(0,2).toUpperCase()})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:((k=r.creator_profile)==null?void 0:k.display_name)||"Anonymous"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:Ai(new Date(r.created_at),{addSuffix:!0})})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[w&&a.jsx(ge,{to:`/blueprint/${r.id}/edit`,children:a.jsx(O,{variant:"outline",size:"sm",children:"Edit"})}),a.jsxs(O,{variant:"ghost",size:"sm",className:r.user_liked?"text-red-500":"text-muted-foreground",onClick:y,children:[a.jsx(Dt,{className:`h-4 w-4 ${r.user_liked?"fill-current":""}`}),a.jsx("span",{className:"ml-1 text-xs",children:r.likes_count})]})]})]})}),a.jsxs(Y,{className:"space-y-4",children:[r.mix_notes&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Build notes"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:r.mix_notes})]}),a.jsx("div",{children:v.length>0?a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"font-semibold",children:"Steps"}),a.jsx("div",{className:"mt-3 space-y-3",children:v.map((S,E)=>{var A,$;return a.jsxs("div",{className:"rounded-lg border border-border/60 p-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("p",{className:"text-sm font-medium",children:(A=S.title)!=null&&A.trim()?S.title:`Step ${E+1}`}),a.jsxs(Pe,{variant:"secondary",className:"text-xs",children:[(($=S.items)==null?void 0:$.length)||0," items"]})]}),S.description&&a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:S.description}),a.jsx("div",{className:"mt-2 space-y-2",children:S.items&&S.items.length>0?S.items.map((M,Q)=>a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"text-sm",children:d6(M)}),M.category&&a.jsx("p",{className:"text-xs text-muted-foreground",children:M.category})]},`${S.id||E}-${Q}`)):a.jsx("p",{className:"text-xs text-muted-foreground",children:"No items assigned."})})]},S.id||`${S.title}-${E}`)})})]}):a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"font-semibold",children:"Selected items"}),a.jsx("div",{className:"mt-2 space-y-2",children:h6(r.selected_items).map(([S,E])=>a.jsxs("div",{className:"rounded-lg border border-border/60 p-3",children:[a.jsx("p",{className:"text-sm font-medium",children:S}),a.jsx("p",{className:"text-sm text-muted-foreground",children:E.length>0?E.map(u6).join(", "):"No items listed"})]},S))})]})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"LLM Review"}),a.jsx("div",{className:"mt-3",children:a.jsx(sm,{review:r.llm_review||""})})]})]})]}),a.jsxs(K,{children:[a.jsx(Ye,{children:a.jsx(mt,{children:"Comments"})}),a.jsxs(Y,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ar,{value:f,onChange:S=>m(S.target.value),placeholder:"Share your thoughts",rows:3}),a.jsx(O,{onClick:x,disabled:o.isPending,children:"Post Comment"})]}),i?a.jsx(_e,{className:"h-20 w-full"}):s&&s.length>0?a.jsx("div",{className:"space-y-3",children:s.map(S=>{var E,A,$;return a.jsxs("div",{className:"rounded-lg border border-border/60 p-3",children:[a.jsxs(ge,{to:`/u/${S.user_id}`,className:"flex items-center gap-2 hover:opacity-80 transition-opacity w-fit",children:[a.jsxs(nn,{className:"h-8 w-8",children:[a.jsx(sn,{src:((E=S.profile)==null?void 0:E.avatar_url)||void 0}),a.jsx(an,{children:(((A=S.profile)==null?void 0:A.display_name)||"U").slice(0,2).toUpperCase()})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:(($=S.profile)==null?void 0:$.display_name)||"Anonymous"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:Ai(new Date(S.created_at),{addSuffix:!0})})]})]}),a.jsx("p",{className:"text-sm mt-2",children:S.content})]},S.id)})}):a.jsx("p",{className:"text-sm text-muted-foreground",children:"No comments yet."})]})]})]}):a.jsx(K,{children:a.jsx(Y,{className:"py-12 text-center",children:"Blueprint not found."})})})]})}const m6="https://bapi.vdsai.cloud",g6=!0,Fw=`${m6.replace(/\/$/,"")}/api/analyze-blueprint`,v6=Fw||"https://piszvseyaefxekubphhf.supabase.co/functions/v1/analyze-blueprint";function y6(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=e.categories;return Array.isArray(t)?t.map(r=>({name:typeof r.name=="string"?r.name:"Untitled",items:Array.isArray(r.items)?r.items.filter(n=>typeof n=="string"):[]})).filter(r=>r.name.trim().length>0):[]}function x6({inventory:e,initialTitle:t,initialSelectedItems:r,initialMixNotes:n,initialReviewPrompt:s,initialReview:i,sourceBlueprintId:o}){const l=Gs(),{toast:c}=$t(),{session:u}=Se(),{data:d}=kv(),{recentTags:h,addRecentTags:f}=Tv(),m=Nk(),[b,g]=p.useState(t||e.title),[v,w]=p.useState(r||{}),[y,x]=p.useState(n||""),[_,j]=p.useState(s||""),[N,k]=p.useState(i||""),[S,E]=p.useState([]),[A,$]=p.useState(!0),[M,Q]=p.useState(!1),[I,se]=p.useState(()=>y6(e.generated_schema)),[V,Z]=p.useState({}),R=p.useMemo(()=>Av(e.review_sections),[e]),T=p.useMemo(()=>Object.values(v).reduce((U,ce)=>U+ce.length,0),[v]),D=(U,ce)=>{w(ae=>{const L=new Set(ae[U]||[]);return L.has(ce)?L.delete(ce):L.add(ce),{...ae,[U]:Array.from(L)}})},ee=U=>{var ae;const ce=(ae=V[U])==null?void 0:ae.trim();ce&&(se(L=>L.map(ue=>ue.name===U?{...ue,items:ue.items.includes(ce)?ue.items:[...ue.items,ce]}:ue)),Z(L=>({...L,[U]:""})))},J=async()=>{var ce,ae,L;if(!b.trim()){c({title:"Title required",description:"Add a blueprint title before generating the review.",variant:"destructive"});return}if(T===0){c({title:"No items selected",description:"Select at least one item before generating the review.",variant:"destructive"});return}if(!(u!=null&&u.access_token)){c({title:"Sign in required",description:"Please sign in to generate a review.",variant:"destructive"});return}const U={};Object.entries(v).forEach(([ue,xe])=>{xe.length>0&&(U[ue]=xe)}),Q(!0),k("");try{const ue=await fetch(v6,{method:"POST",headers:{"Content-Type":"application/json",Authorization:g6&&(u!=null&&u.access_token)?`Bearer ${u.access_token}`:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBpc3p2c2V5YWVmeGVrdWJwaGhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwODE3NTEsImV4cCI6MjA4NDY1Nzc1MX0.odmCphs9gpipbjF7zp639J0r8s48SYHnpNsjQvfICSc"},body:JSON.stringify({title:b.trim(),inventoryTitle:e.title,selectedItems:U,mixNotes:y.trim(),reviewPrompt:_.trim(),reviewSections:R,includeScore:e.include_score??!0})});if(!ue.ok){const ve=await ue.json().catch(()=>({}));throw new Error(ve.error||"Failed to analyze blueprint")}if(!ue.body)throw new Error("No response body");const xe=ue.body.getReader(),ke=new TextDecoder;let q="",X="";for(;;){const{done:ve,value:Ie}=await xe.read();if(ve)break;X+=ke.decode(Ie,{stream:!0});let we;for(;(we=X.indexOf(`
`))!==-1;){let De=X.slice(0,we);if(X=X.slice(we+1),De.endsWith("\r")&&(De=De.slice(0,-1)),De.startsWith(":")||De.trim()===""||!De.startsWith("data: "))continue;const Be=De.slice(6).trim();if(Be==="[DONE]")break;try{const _r=(L=(ae=(ce=JSON.parse(Be).choices)==null?void 0:ce[0])==null?void 0:ae.delta)==null?void 0:L.content;_r&&(q+=_r,k(q))}catch{X=De+`
`+X;break}}}}catch(ue){c({title:"Analysis failed",description:Fl(ue,"Please try again."),variant:"destructive"})}finally{Q(!1)}},de=async()=>{if(!b.trim()){c({title:"Title required",description:"Add a blueprint title before publishing.",variant:"destructive"});return}if(T===0){c({title:"Select items",description:"Pick at least one item before publishing.",variant:"destructive"});return}if(!N.trim()){c({title:"Generate review",description:"Generate the review before publishing.",variant:"destructive"});return}if(S.length>4){c({title:"Too many tags",description:"Please use 4 tags or fewer.",variant:"destructive"});return}if(S.length===0){c({title:"Tags required",description:"Add at least one tag so the wall can surface your blueprint.",variant:"destructive"});return}try{const U={};Object.entries(v).forEach(([ae,L])=>{L.length>0&&(U[ae]=L)});const ce=await m.mutateAsync({inventoryId:e.id,title:b.trim(),selectedItems:U,steps:null,mixNotes:y.trim()?y.trim():null,reviewPrompt:_.trim()?_.trim():null,bannerUrl:null,llmReview:N,tags:S,isPublic:A,sourceBlueprintId:o||null});f(S),l(`/blueprint/${ce.id}`)}catch(U){c({title:"Publish failed",description:Fl(U,"Please try again."),variant:"destructive"})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(K,{children:[a.jsx(Ye,{children:a.jsx(mt,{children:"Create Blueprint"})}),a.jsxs(Y,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{htmlFor:"blueprint-title",children:"Blueprint title"}),a.jsx(Fe,{id:"blueprint-title",value:b,onChange:U=>g(U.target.value),placeholder:"Name your blueprint"})]}),a.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{htmlFor:"mix-notes",children:"Build notes"}),a.jsx(ar,{id:"mix-notes",value:y,onChange:U=>x(U.target.value),placeholder:"Optional notes for your build",rows:4})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{htmlFor:"review-prompt",children:"LLM review focus"}),a.jsx(ar,{id:"review-prompt",value:_,onChange:U=>j(U.target.value),placeholder:"What should the review focus on?",rows:4})]})]})]})]}),a.jsxs(K,{children:[a.jsx(Ye,{children:a.jsx(mt,{children:"Library"})}),a.jsx(Y,{className:"space-y-6",children:I.length===0?a.jsx("p",{className:"text-sm text-muted-foreground",children:"No library items yet. Add categories in the library builder."}):I.map(U=>{var ce;return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold",children:U.name}),a.jsxs(Pe,{variant:"secondary",children:[((ce=v[U.name])==null?void 0:ce.length)||0," selected"]})]}),a.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:U.items.map(ae=>a.jsxs("label",{className:"flex items-center gap-2 rounded-md border border-border/60 px-3 py-2 text-sm",children:[a.jsx(nv,{checked:(v[U.name]||[]).includes(ae),onCheckedChange:()=>D(U.name,ae)}),a.jsx("span",{children:ae})]},`${U.name}-${ae}`))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Fe,{value:V[U.name]||"",onChange:ae=>Z(L=>({...L,[U.name]:ae.target.value})),placeholder:`Add item to ${U.name}`}),a.jsx(O,{type:"button",variant:"outline",onClick:()=>ee(U.name),children:"Add"})]})]},U.name)})})]}),M&&a.jsx(K,{className:"overflow-hidden bg-card/60 backdrop-blur-glass border-primary/20",children:a.jsx(Y,{className:"p-0",children:a.jsx(rC,{})})}),a.jsxs(K,{children:[a.jsx(Ye,{children:a.jsx(mt,{children:"LLM Review"})}),a.jsxs(Y,{className:"space-y-4",children:[a.jsx(O,{type:"button",onClick:J,disabled:M||m.isPending,children:M?"Building...":"Build Blueprint"}),a.jsx(ar,{value:N,onChange:U=>k(U.target.value),rows:12})]})]}),a.jsxs(K,{children:[a.jsx(Ye,{children:a.jsx(mt,{children:"Publish"})}),a.jsxs(Y,{className:"space-y-4",children:[h.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(U=>a.jsxs(O,{type:"button",size:"sm",variant:"outline",onClick:()=>E(ce=>ce.includes(U)?ce:[...ce,U]),children:["#",U]},U))}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(We,{children:"Tags"}),a.jsx(Ev,{value:S,onChange:E,suggestions:d||[],maxTags:12})]}),a.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 px-4 py-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Public blueprint"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Public blueprints appear on the wall."})]}),a.jsx(Ls,{checked:A,onCheckedChange:$})]}),a.jsx(O,{type:"button",onClick:de,disabled:m.isPending||M,className:"w-full",children:"Publish Blueprint"})]})]})]})}function w6(e){return!e||typeof e!="object"||Array.isArray(e)?{}:Object.fromEntries(Object.entries(e).filter(([,t])=>Array.isArray(t)))}function b6(){const{blueprintId:e}=po(),{data:t,isLoading:r}=yv(e),{data:n,isLoading:s}=Cv((t==null?void 0:t.inventory_id)||void 0),i=p.useMemo(()=>t?w6(t.selected_items):{},[t]),o=r||s;return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(St,{}),a.jsx("main",{className:"max-w-4xl mx-auto px-4 py-8 space-y-6",children:o?a.jsx(K,{children:a.jsxs(Y,{className:"p-6",children:[a.jsx(_e,{className:"h-6 w-48"}),a.jsx(_e,{className:"h-24 w-full mt-4"})]})}):n&&t?a.jsxs(a.Fragment,{children:[a.jsxs("section",{className:"space-y-2",children:[a.jsx("h1",{className:"text-3xl font-semibold",children:"Remix Blueprint"}),a.jsxs("p",{className:"text-muted-foreground",children:["Source: ",t.title]})]}),a.jsx(x6,{inventory:n,initialTitle:`${t.title} Remix`,initialSelectedItems:i,initialMixNotes:t.mix_notes,initialReviewPrompt:t.review_prompt,initialReview:t.llm_review,sourceBlueprintId:t.id})]}):a.jsx(K,{children:a.jsx(Y,{className:"py-12 text-center",children:"Blueprint or library not found."})})})]})}const _6=()=>{const e=kn();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),a.jsxs("div",{className:"min-h-screen bg-muted",children:[a.jsx(St,{}),a.jsx("div",{className:"flex min-h-[70vh] items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),a.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),a.jsx(ge,{to:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})]})};function Lo({children:e}){const{user:t,isLoading:r}=Se();return r?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})}):t?a.jsx(a.Fragment,{children:e}):a.jsx(El,{to:"/auth",replace:!0})}const j6=new NI,S6=()=>a.jsx(RI,{client:j6,children:a.jsx(SD,{children:a.jsxs(lI,{children:[a.jsx(HR,{}),a.jsx(SP,{}),a.jsx($O,{basename:"/remix-of-stackwise-advisor/",children:a.jsxs(RO,{children:[a.jsx(bt,{path:"/",element:a.jsx(oF,{})}),a.jsx(bt,{path:"/explore",element:a.jsx(CF,{})}),a.jsx(bt,{path:"/blueprints",element:a.jsx(NU,{})}),a.jsx(bt,{path:"/wall",element:a.jsx(fF,{})}),a.jsx(bt,{path:"/wall/:postId",element:a.jsx(Lo,{children:a.jsx(aB,{})})}),a.jsx(bt,{path:"/auth",element:a.jsx(PU,{})}),a.jsx(bt,{path:"/inventory",element:a.jsx(fB,{})}),a.jsx(bt,{path:"/inventory/create",element:a.jsx(Lo,{children:a.jsx(RB,{})})}),a.jsx(bt,{path:"/inventory/:inventoryId",element:a.jsx(AB,{})}),a.jsx(bt,{path:"/inventory/:inventoryId/build",element:a.jsx($w,{})}),a.jsx(bt,{path:"/blueprint/:blueprintId/edit",element:a.jsx(Lo,{children:a.jsx($w,{})})}),a.jsx(bt,{path:"/blueprint/:blueprintId",element:a.jsx(p6,{})}),a.jsx(bt,{path:"/blueprint/:blueprintId/remix",element:a.jsx(Lo,{children:a.jsx(b6,{})})}),a.jsx(bt,{path:"/settings",element:a.jsx(Lo,{children:a.jsx(FU,{})})}),a.jsx(bt,{path:"/u/:userId",element:a.jsx(QU,{})}),a.jsx(bt,{path:"/tags",element:a.jsx(ZU,{})}),a.jsx(bt,{path:"*",element:a.jsx(_6,{})})]})})]})})});u_(document.getElementById("root")).render(a.jsx(S6,{}));
