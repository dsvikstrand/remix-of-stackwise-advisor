var _v=e=>{throw TypeError(e)};var Hd=(e,t,r)=>t.has(e)||_v("Cannot "+r);var N=(e,t,r)=>(Hd(e,t,"read from private field"),r?r.call(e):t.get(e)),pe=(e,t,r)=>t.has(e)?_v("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ee=(e,t,r,n)=>(Hd(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Te=(e,t,r)=>(Hd(e,t,"access private method"),r);var Jl=(e,t,r,n)=>({set _(s){ee(e,t,s,r)},get _(){return N(e,t,n)}});function eC(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Tx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Rx={exports:{}},qu={},Px={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rl=Symbol.for("react.element"),tC=Symbol.for("react.portal"),rC=Symbol.for("react.fragment"),nC=Symbol.for("react.strict_mode"),sC=Symbol.for("react.profiler"),iC=Symbol.for("react.provider"),oC=Symbol.for("react.context"),aC=Symbol.for("react.forward_ref"),lC=Symbol.for("react.suspense"),cC=Symbol.for("react.memo"),uC=Symbol.for("react.lazy"),Sv=Symbol.iterator;function dC(e){return e===null||typeof e!="object"?null:(e=Sv&&e[Sv]||e["@@iterator"],typeof e=="function"?e:null)}var Ax={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ix=Object.assign,Ox={};function Bo(e,t,r){this.props=e,this.context=t,this.refs=Ox,this.updater=r||Ax}Bo.prototype.isReactComponent={};Bo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Bo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Mx(){}Mx.prototype=Bo.prototype;function Vp(e,t,r){this.props=e,this.context=t,this.refs=Ox,this.updater=r||Ax}var Hp=Vp.prototype=new Mx;Hp.constructor=Vp;Ix(Hp,Bo.prototype);Hp.isPureReactComponent=!0;var jv=Array.isArray,Dx=Object.prototype.hasOwnProperty,Kp={current:null},Lx={key:!0,ref:!0,__self:!0,__source:!0};function $x(e,t,r){var n,s={},i=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)Dx.call(t,n)&&!Lx.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Rl,type:e,key:i,ref:a,props:s,_owner:Kp.current}}function hC(e,t){return{$$typeof:Rl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Gp(e){return typeof e=="object"&&e!==null&&e.$$typeof===Rl}function fC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var kv=/\/+/g;function Kd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?fC(""+e.key):t.toString(36)}function Pc(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Rl:case tC:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+Kd(a,0):n,jv(s)?(r="",e!=null&&(r=e.replace(kv,"$&/")+"/"),Pc(s,t,r,"",function(u){return u})):s!=null&&(Gp(s)&&(s=hC(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(kv,"$&/")+"/")+e)),t.push(s)),1;if(a=0,n=n===""?".":n+":",jv(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Kd(i,l);a+=Pc(i,t,r,c,s)}else if(c=dC(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Kd(i,l++),a+=Pc(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Xl(e,t,r){if(e==null)return e;var n=[],s=0;return Pc(e,n,"","",function(i){return t.call(r,i,s++)}),n}function pC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var qt={current:null},Ac={transition:null},mC={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:Ac,ReactCurrentOwner:Kp};function Fx(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:Xl,forEach:function(e,t,r){Xl(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Xl(e,function(){t++}),t},toArray:function(e){return Xl(e,function(t){return t})||[]},only:function(e){if(!Gp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Re.Component=Bo;Re.Fragment=rC;Re.Profiler=sC;Re.PureComponent=Vp;Re.StrictMode=nC;Re.Suspense=lC;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mC;Re.act=Fx;Re.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Ix({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Kp.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Dx.call(t,c)&&!Lx.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Rl,type:e.type,key:s,ref:i,props:n,_owner:a}};Re.createContext=function(e){return e={$$typeof:oC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:iC,_context:e},e.Consumer=e};Re.createElement=$x;Re.createFactory=function(e){var t=$x.bind(null,e);return t.type=e,t};Re.createRef=function(){return{current:null}};Re.forwardRef=function(e){return{$$typeof:aC,render:e}};Re.isValidElement=Gp;Re.lazy=function(e){return{$$typeof:uC,_payload:{_status:-1,_result:e},_init:pC}};Re.memo=function(e,t){return{$$typeof:cC,type:e,compare:t===void 0?null:t}};Re.startTransition=function(e){var t=Ac.transition;Ac.transition={};try{e()}finally{Ac.transition=t}};Re.unstable_act=Fx;Re.useCallback=function(e,t){return qt.current.useCallback(e,t)};Re.useContext=function(e){return qt.current.useContext(e)};Re.useDebugValue=function(){};Re.useDeferredValue=function(e){return qt.current.useDeferredValue(e)};Re.useEffect=function(e,t){return qt.current.useEffect(e,t)};Re.useId=function(){return qt.current.useId()};Re.useImperativeHandle=function(e,t,r){return qt.current.useImperativeHandle(e,t,r)};Re.useInsertionEffect=function(e,t){return qt.current.useInsertionEffect(e,t)};Re.useLayoutEffect=function(e,t){return qt.current.useLayoutEffect(e,t)};Re.useMemo=function(e,t){return qt.current.useMemo(e,t)};Re.useReducer=function(e,t,r){return qt.current.useReducer(e,t,r)};Re.useRef=function(e){return qt.current.useRef(e)};Re.useState=function(e){return qt.current.useState(e)};Re.useSyncExternalStore=function(e,t,r){return qt.current.useSyncExternalStore(e,t,r)};Re.useTransition=function(){return qt.current.useTransition()};Re.version="18.3.1";Px.exports=Re;var p=Px.exports;const z=Tx(p),Yp=eC({__proto__:null,default:z},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gC=p,vC=Symbol.for("react.element"),yC=Symbol.for("react.fragment"),wC=Object.prototype.hasOwnProperty,xC=gC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bC={key:!0,ref:!0,__self:!0,__source:!0};function Ux(e,t,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)wC.call(t,n)&&!bC.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:vC,type:e,key:i,ref:a,props:s,_owner:xC.current}}qu.Fragment=yC;qu.jsx=Ux;qu.jsxs=Ux;Rx.exports=qu;var o=Rx.exports,Bx={exports:{}},hr={},zx={exports:{}},qx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,E){var B=P.length;P.push(E);e:for(;0<B;){var ie=B-1>>>1,Q=P[ie];if(0<s(Q,E))P[ie]=E,P[B]=Q,B=ie;else break e}}function r(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var E=P[0],B=P.pop();if(B!==E){P[0]=B;e:for(var ie=0,Q=P.length,me=Q>>>1;ie<me;){var U=2*(ie+1)-1,de=P[U],ge=U+1,L=P[ge];if(0>s(de,B))ge<Q&&0>s(L,de)?(P[ie]=L,P[ge]=B,ie=ge):(P[ie]=de,P[U]=B,ie=U);else if(ge<Q&&0>s(L,B))P[ie]=L,P[ge]=B,ie=ge;else break e}}return E}function s(P,E){var B=P.sortIndex-E.sortIndex;return B!==0?B:P.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,b=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var E=r(u);E!==null;){if(E.callback===null)n(u);else if(E.startTime<=P)n(u),E.sortIndex=E.expirationTime,t(c,E);else break;E=r(u)}}function _(P){if(g=!1,v(P),!b)if(r(c)!==null)b=!0,M(S);else{var E=r(u);E!==null&&Z(_,E.startTime-P)}}function S(P,E){b=!1,g&&(g=!1,x(C),C=-1),m=!0;var B=f;try{for(v(E),h=r(c);h!==null&&(!(h.expirationTime>E)||P&&!$());){var ie=h.callback;if(typeof ie=="function"){h.callback=null,f=h.priorityLevel;var Q=ie(h.expirationTime<=E);E=e.unstable_now(),typeof Q=="function"?h.callback=Q:h===r(c)&&n(c),v(E)}else n(c);h=r(c)}if(h!==null)var me=!0;else{var U=r(u);U!==null&&Z(_,U.startTime-E),me=!1}return me}finally{h=null,f=B,m=!1}}var j=!1,k=null,C=-1,T=5,A=-1;function $(){return!(e.unstable_now()-A<T)}function D(){if(k!==null){var P=e.unstable_now();A=P;var E=!0;try{E=k(!0,P)}finally{E?X():(j=!1,k=null)}}else j=!1}var X;if(typeof w=="function")X=function(){w(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,ae=I.port2;I.port1.onmessage=D,X=function(){ae.postMessage(null)}}else X=function(){y(D,0)};function M(P){k=P,j||(j=!0,X())}function Z(P,E){C=y(function(){P(e.unstable_now())},E)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){b||m||(b=!0,M(S))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(P){switch(f){case 1:case 2:case 3:var E=3;break;default:E=f}var B=f;f=E;try{return P()}finally{f=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,E){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var B=f;f=P;try{return E()}finally{f=B}},e.unstable_scheduleCallback=function(P,E,B){var ie=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?ie+B:ie):B=ie,P){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=B+Q,P={id:d++,callback:E,priorityLevel:P,startTime:B,expirationTime:Q,sortIndex:-1},B>ie?(P.sortIndex=B,t(u,P),r(c)===null&&P===r(u)&&(g?(x(C),C=-1):g=!0,Z(_,B-ie))):(P.sortIndex=Q,t(c,P),b||m||(b=!0,M(S))),P},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(P){var E=f;return function(){var B=f;f=E;try{return P.apply(this,arguments)}finally{f=B}}}})(qx);zx.exports=qx;var _C=zx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SC=p,dr=_C;function W(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wx=new Set,Va={};function Ci(e,t){Ro(e,t),Ro(e+"Capture",t)}function Ro(e,t){for(Va[e]=t,e=0;e<t.length;e++)Wx.add(t[e])}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jh=Object.prototype.hasOwnProperty,jC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nv={},Cv={};function kC(e){return Jh.call(Cv,e)?!0:Jh.call(Nv,e)?!1:jC.test(e)?Cv[e]=!0:(Nv[e]=!0,!1)}function NC(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function CC(e,t,r,n){if(t===null||typeof t>"u"||NC(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Wt(e,t,r,n,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var Nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Nt[e]=new Wt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Nt[t]=new Wt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Nt[e]=new Wt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Nt[e]=new Wt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Nt[e]=new Wt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Nt[e]=new Wt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Nt[e]=new Wt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Nt[e]=new Wt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Nt[e]=new Wt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Qp=/[\-:]([a-z])/g;function Jp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Qp,Jp);Nt[t]=new Wt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Qp,Jp);Nt[t]=new Wt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Qp,Jp);Nt[t]=new Wt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Nt[e]=new Wt(e,1,!1,e.toLowerCase(),null,!1,!1)});Nt.xlinkHref=new Wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Nt[e]=new Wt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Xp(e,t,r,n){var s=Nt.hasOwnProperty(t)?Nt[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(CC(t,r,s,n)&&(r=null),n||s===null?kC(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var $n=SC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zl=Symbol.for("react.element"),Gi=Symbol.for("react.portal"),Yi=Symbol.for("react.fragment"),Zp=Symbol.for("react.strict_mode"),Xh=Symbol.for("react.profiler"),Vx=Symbol.for("react.provider"),Hx=Symbol.for("react.context"),em=Symbol.for("react.forward_ref"),Zh=Symbol.for("react.suspense"),ef=Symbol.for("react.suspense_list"),tm=Symbol.for("react.memo"),Jn=Symbol.for("react.lazy"),Kx=Symbol.for("react.offscreen"),Ev=Symbol.iterator;function ca(e){return e===null||typeof e!="object"?null:(e=Ev&&e[Ev]||e["@@iterator"],typeof e=="function"?e:null)}var et=Object.assign,Gd;function Sa(e){if(Gd===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Gd=t&&t[1]||""}return`
`+Gd+e}var Yd=!1;function Qd(e,t){if(!e||Yd)return"";Yd=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Yd=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Sa(e):""}function EC(e){switch(e.tag){case 5:return Sa(e.type);case 16:return Sa("Lazy");case 13:return Sa("Suspense");case 19:return Sa("SuspenseList");case 0:case 2:case 15:return e=Qd(e.type,!1),e;case 11:return e=Qd(e.type.render,!1),e;case 1:return e=Qd(e.type,!0),e;default:return""}}function tf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yi:return"Fragment";case Gi:return"Portal";case Xh:return"Profiler";case Zp:return"StrictMode";case Zh:return"Suspense";case ef:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Hx:return(e.displayName||"Context")+".Consumer";case Vx:return(e._context.displayName||"Context")+".Provider";case em:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tm:return t=e.displayName||null,t!==null?t:tf(e.type)||"Memo";case Jn:t=e._payload,e=e._init;try{return tf(e(t))}catch{}}return null}function TC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tf(t);case 8:return t===Zp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Es(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Gx(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function RC(e){var t=Gx(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ec(e){e._valueTracker||(e._valueTracker=RC(e))}function Yx(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Gx(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Jc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function rf(e,t){var r=t.checked;return et({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Tv(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Es(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Qx(e,t){t=t.checked,t!=null&&Xp(e,"checked",t,!1)}function nf(e,t){Qx(e,t);var r=Es(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?sf(e,t.type,r):t.hasOwnProperty("defaultValue")&&sf(e,t.type,Es(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Rv(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function sf(e,t,r){(t!=="number"||Jc(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ja=Array.isArray;function ao(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Es(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function of(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(W(91));return et({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Pv(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(W(92));if(ja(r)){if(1<r.length)throw Error(W(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Es(r)}}function Jx(e,t){var r=Es(t.value),n=Es(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Av(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Xx(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function af(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Xx(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var tc,Zx=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(tc=tc||document.createElement("div"),tc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=tc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ha(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Pa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PC=["Webkit","ms","Moz","O"];Object.keys(Pa).forEach(function(e){PC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pa[t]=Pa[e]})});function e0(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Pa.hasOwnProperty(e)&&Pa[e]?(""+t).trim():t+"px"}function t0(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=e0(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var AC=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lf(e,t){if(t){if(AC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(W(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(W(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(W(61))}if(t.style!=null&&typeof t.style!="object")throw Error(W(62))}}function cf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uf=null;function rm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var df=null,lo=null,co=null;function Iv(e){if(e=Il(e)){if(typeof df!="function")throw Error(W(280));var t=e.stateNode;t&&(t=Gu(t),df(e.stateNode,e.type,t))}}function r0(e){lo?co?co.push(e):co=[e]:lo=e}function n0(){if(lo){var e=lo,t=co;if(co=lo=null,Iv(e),t)for(e=0;e<t.length;e++)Iv(t[e])}}function s0(e,t){return e(t)}function i0(){}var Jd=!1;function o0(e,t,r){if(Jd)return e(t,r);Jd=!0;try{return s0(e,t,r)}finally{Jd=!1,(lo!==null||co!==null)&&(i0(),n0())}}function Ka(e,t){var r=e.stateNode;if(r===null)return null;var n=Gu(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(W(231,t,typeof r));return r}var hf=!1;if(Pn)try{var ua={};Object.defineProperty(ua,"passive",{get:function(){hf=!0}}),window.addEventListener("test",ua,ua),window.removeEventListener("test",ua,ua)}catch{hf=!1}function IC(e,t,r,n,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Aa=!1,Xc=null,Zc=!1,ff=null,OC={onError:function(e){Aa=!0,Xc=e}};function MC(e,t,r,n,s,i,a,l,c){Aa=!1,Xc=null,IC.apply(OC,arguments)}function DC(e,t,r,n,s,i,a,l,c){if(MC.apply(this,arguments),Aa){if(Aa){var u=Xc;Aa=!1,Xc=null}else throw Error(W(198));Zc||(Zc=!0,ff=u)}}function Ei(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function a0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ov(e){if(Ei(e)!==e)throw Error(W(188))}function LC(e){var t=e.alternate;if(!t){if(t=Ei(e),t===null)throw Error(W(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Ov(s),e;if(i===n)return Ov(s),t;i=i.sibling}throw Error(W(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a)throw Error(W(189))}}if(r.alternate!==n)throw Error(W(190))}if(r.tag!==3)throw Error(W(188));return r.stateNode.current===r?e:t}function l0(e){return e=LC(e),e!==null?c0(e):null}function c0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=c0(e);if(t!==null)return t;e=e.sibling}return null}var u0=dr.unstable_scheduleCallback,Mv=dr.unstable_cancelCallback,$C=dr.unstable_shouldYield,FC=dr.unstable_requestPaint,lt=dr.unstable_now,UC=dr.unstable_getCurrentPriorityLevel,nm=dr.unstable_ImmediatePriority,d0=dr.unstable_UserBlockingPriority,eu=dr.unstable_NormalPriority,BC=dr.unstable_LowPriority,h0=dr.unstable_IdlePriority,Wu=null,dn=null;function zC(e){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Wu,e,void 0,(e.current.flags&128)===128)}catch{}}var zr=Math.clz32?Math.clz32:VC,qC=Math.log,WC=Math.LN2;function VC(e){return e>>>=0,e===0?32:31-(qC(e)/WC|0)|0}var rc=64,nc=4194304;function ka(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function tu(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=ka(l):(i&=a,i!==0&&(n=ka(i)))}else a=r&~s,a!==0?n=ka(a):i!==0&&(n=ka(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-zr(t),s=1<<r,n|=e[r],t&=~s;return n}function HC(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KC(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-zr(i),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=HC(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function pf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function f0(){var e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),e}function Xd(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Pl(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zr(t),e[t]=r}function GC(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-zr(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function sm(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-zr(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var $e=0;function p0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var m0,im,g0,v0,y0,mf=!1,sc=[],gs=null,vs=null,ys=null,Ga=new Map,Ya=new Map,es=[],YC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dv(e,t){switch(e){case"focusin":case"focusout":gs=null;break;case"dragenter":case"dragleave":vs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":Ga.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ya.delete(t.pointerId)}}function da(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Il(t),t!==null&&im(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function QC(e,t,r,n,s){switch(t){case"focusin":return gs=da(gs,e,t,r,n,s),!0;case"dragenter":return vs=da(vs,e,t,r,n,s),!0;case"mouseover":return ys=da(ys,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Ga.set(i,da(Ga.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Ya.set(i,da(Ya.get(i)||null,e,t,r,n,s)),!0}return!1}function w0(e){var t=Qs(e.target);if(t!==null){var r=Ei(t);if(r!==null){if(t=r.tag,t===13){if(t=a0(r),t!==null){e.blockedOn=t,y0(e.priority,function(){g0(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ic(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=gf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);uf=n,r.target.dispatchEvent(n),uf=null}else return t=Il(r),t!==null&&im(t),e.blockedOn=r,!1;t.shift()}return!0}function Lv(e,t,r){Ic(e)&&r.delete(t)}function JC(){mf=!1,gs!==null&&Ic(gs)&&(gs=null),vs!==null&&Ic(vs)&&(vs=null),ys!==null&&Ic(ys)&&(ys=null),Ga.forEach(Lv),Ya.forEach(Lv)}function ha(e,t){e.blockedOn===t&&(e.blockedOn=null,mf||(mf=!0,dr.unstable_scheduleCallback(dr.unstable_NormalPriority,JC)))}function Qa(e){function t(s){return ha(s,e)}if(0<sc.length){ha(sc[0],e);for(var r=1;r<sc.length;r++){var n=sc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(gs!==null&&ha(gs,e),vs!==null&&ha(vs,e),ys!==null&&ha(ys,e),Ga.forEach(t),Ya.forEach(t),r=0;r<es.length;r++)n=es[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<es.length&&(r=es[0],r.blockedOn===null);)w0(r),r.blockedOn===null&&es.shift()}var uo=$n.ReactCurrentBatchConfig,ru=!0;function XC(e,t,r,n){var s=$e,i=uo.transition;uo.transition=null;try{$e=1,om(e,t,r,n)}finally{$e=s,uo.transition=i}}function ZC(e,t,r,n){var s=$e,i=uo.transition;uo.transition=null;try{$e=4,om(e,t,r,n)}finally{$e=s,uo.transition=i}}function om(e,t,r,n){if(ru){var s=gf(e,t,r,n);if(s===null)lh(e,t,n,nu,r),Dv(e,n);else if(QC(s,e,t,r,n))n.stopPropagation();else if(Dv(e,n),t&4&&-1<YC.indexOf(e)){for(;s!==null;){var i=Il(s);if(i!==null&&m0(i),i=gf(e,t,r,n),i===null&&lh(e,t,n,nu,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else lh(e,t,n,null,r)}}var nu=null;function gf(e,t,r,n){if(nu=null,e=rm(n),e=Qs(e),e!==null)if(t=Ei(e),t===null)e=null;else if(r=t.tag,r===13){if(e=a0(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return nu=e,null}function x0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UC()){case nm:return 1;case d0:return 4;case eu:case BC:return 16;case h0:return 536870912;default:return 16}default:return 16}}var fs=null,am=null,Oc=null;function b0(){if(Oc)return Oc;var e,t=am,r=t.length,n,s="value"in fs?fs.value:fs.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===s[i-n];n++);return Oc=s.slice(e,1<n?1-n:void 0)}function Mc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ic(){return!0}function $v(){return!1}function fr(e){function t(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ic:$v,this.isPropagationStopped=$v,this}return et(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ic)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ic)},persist:function(){},isPersistent:ic}),t}var zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lm=fr(zo),Al=et({},zo,{view:0,detail:0}),eE=fr(Al),Zd,eh,fa,Vu=et({},Al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fa&&(fa&&e.type==="mousemove"?(Zd=e.screenX-fa.screenX,eh=e.screenY-fa.screenY):eh=Zd=0,fa=e),Zd)},movementY:function(e){return"movementY"in e?e.movementY:eh}}),Fv=fr(Vu),tE=et({},Vu,{dataTransfer:0}),rE=fr(tE),nE=et({},Al,{relatedTarget:0}),th=fr(nE),sE=et({},zo,{animationName:0,elapsedTime:0,pseudoElement:0}),iE=fr(sE),oE=et({},zo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),aE=fr(oE),lE=et({},zo,{data:0}),Uv=fr(lE),cE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hE(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=dE[e])?!!t[e]:!1}function cm(){return hE}var fE=et({},Al,{key:function(e){if(e.key){var t=cE[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Mc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?uE[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cm,charCode:function(e){return e.type==="keypress"?Mc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Mc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pE=fr(fE),mE=et({},Vu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bv=fr(mE),gE=et({},Al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cm}),vE=fr(gE),yE=et({},zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),wE=fr(yE),xE=et({},Vu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bE=fr(xE),_E=[9,13,27,32],um=Pn&&"CompositionEvent"in window,Ia=null;Pn&&"documentMode"in document&&(Ia=document.documentMode);var SE=Pn&&"TextEvent"in window&&!Ia,_0=Pn&&(!um||Ia&&8<Ia&&11>=Ia),zv=" ",qv=!1;function S0(e,t){switch(e){case"keyup":return _E.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qi=!1;function jE(e,t){switch(e){case"compositionend":return j0(t);case"keypress":return t.which!==32?null:(qv=!0,zv);case"textInput":return e=t.data,e===zv&&qv?null:e;default:return null}}function kE(e,t){if(Qi)return e==="compositionend"||!um&&S0(e,t)?(e=b0(),Oc=am=fs=null,Qi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _0&&t.locale!=="ko"?null:t.data;default:return null}}var NE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!NE[e.type]:t==="textarea"}function k0(e,t,r,n){r0(n),t=su(t,"onChange"),0<t.length&&(r=new lm("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Oa=null,Ja=null;function CE(e){D0(e,0)}function Hu(e){var t=Zi(e);if(Yx(t))return e}function EE(e,t){if(e==="change")return t}var N0=!1;if(Pn){var rh;if(Pn){var nh="oninput"in document;if(!nh){var Vv=document.createElement("div");Vv.setAttribute("oninput","return;"),nh=typeof Vv.oninput=="function"}rh=nh}else rh=!1;N0=rh&&(!document.documentMode||9<document.documentMode)}function Hv(){Oa&&(Oa.detachEvent("onpropertychange",C0),Ja=Oa=null)}function C0(e){if(e.propertyName==="value"&&Hu(Ja)){var t=[];k0(t,Ja,e,rm(e)),o0(CE,t)}}function TE(e,t,r){e==="focusin"?(Hv(),Oa=t,Ja=r,Oa.attachEvent("onpropertychange",C0)):e==="focusout"&&Hv()}function RE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hu(Ja)}function PE(e,t){if(e==="click")return Hu(t)}function AE(e,t){if(e==="input"||e==="change")return Hu(t)}function IE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vr=typeof Object.is=="function"?Object.is:IE;function Xa(e,t){if(Vr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Jh.call(t,s)||!Vr(e[s],t[s]))return!1}return!0}function Kv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gv(e,t){var r=Kv(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Kv(r)}}function E0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?E0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function T0(){for(var e=window,t=Jc();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Jc(e.document)}return t}function dm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function OE(e){var t=T0(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&E0(r.ownerDocument.documentElement,r)){if(n!==null&&dm(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Gv(r,i);var a=Gv(r,n);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ME=Pn&&"documentMode"in document&&11>=document.documentMode,Ji=null,vf=null,Ma=null,yf=!1;function Yv(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;yf||Ji==null||Ji!==Jc(n)||(n=Ji,"selectionStart"in n&&dm(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ma&&Xa(Ma,n)||(Ma=n,n=su(vf,"onSelect"),0<n.length&&(t=new lm("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ji)))}function oc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Xi={animationend:oc("Animation","AnimationEnd"),animationiteration:oc("Animation","AnimationIteration"),animationstart:oc("Animation","AnimationStart"),transitionend:oc("Transition","TransitionEnd")},sh={},R0={};Pn&&(R0=document.createElement("div").style,"AnimationEvent"in window||(delete Xi.animationend.animation,delete Xi.animationiteration.animation,delete Xi.animationstart.animation),"TransitionEvent"in window||delete Xi.transitionend.transition);function Ku(e){if(sh[e])return sh[e];if(!Xi[e])return e;var t=Xi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in R0)return sh[e]=t[r];return e}var P0=Ku("animationend"),A0=Ku("animationiteration"),I0=Ku("animationstart"),O0=Ku("transitionend"),M0=new Map,Qv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(e,t){M0.set(e,t),Ci(t,[e])}for(var ih=0;ih<Qv.length;ih++){var oh=Qv[ih],DE=oh.toLowerCase(),LE=oh[0].toUpperCase()+oh.slice(1);Os(DE,"on"+LE)}Os(P0,"onAnimationEnd");Os(A0,"onAnimationIteration");Os(I0,"onAnimationStart");Os("dblclick","onDoubleClick");Os("focusin","onFocus");Os("focusout","onBlur");Os(O0,"onTransitionEnd");Ro("onMouseEnter",["mouseout","mouseover"]);Ro("onMouseLeave",["mouseout","mouseover"]);Ro("onPointerEnter",["pointerout","pointerover"]);Ro("onPointerLeave",["pointerout","pointerover"]);Ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ci("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$E=new Set("cancel close invalid load scroll toggle".split(" ").concat(Na));function Jv(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,DC(n,t,void 0,e),e.currentTarget=null}function D0(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Jv(s,l,u),i=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Jv(s,l,u),i=c}}}if(Zc)throw e=ff,Zc=!1,ff=null,e}function He(e,t){var r=t[Sf];r===void 0&&(r=t[Sf]=new Set);var n=e+"__bubble";r.has(n)||(L0(t,e,2,!1),r.add(n))}function ah(e,t,r){var n=0;t&&(n|=4),L0(r,e,n,t)}var ac="_reactListening"+Math.random().toString(36).slice(2);function Za(e){if(!e[ac]){e[ac]=!0,Wx.forEach(function(r){r!=="selectionchange"&&($E.has(r)||ah(r,!1,e),ah(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ac]||(t[ac]=!0,ah("selectionchange",!1,t))}}function L0(e,t,r,n){switch(x0(t)){case 1:var s=XC;break;case 4:s=ZC;break;default:s=om}r=s.bind(null,t,r,e),s=void 0,!hf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function lh(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Qs(l),a===null)return;if(c=a.tag,c===5||c===6){n=i=a;continue e}l=l.parentNode}}n=n.return}o0(function(){var u=i,d=rm(r),h=[];e:{var f=M0.get(e);if(f!==void 0){var m=lm,b=e;switch(e){case"keypress":if(Mc(r)===0)break e;case"keydown":case"keyup":m=pE;break;case"focusin":b="focus",m=th;break;case"focusout":b="blur",m=th;break;case"beforeblur":case"afterblur":m=th;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Fv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=rE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=vE;break;case P0:case A0:case I0:m=iE;break;case O0:m=wE;break;case"scroll":m=eE;break;case"wheel":m=bE;break;case"copy":case"cut":case"paste":m=aE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Bv}var g=(t&4)!==0,y=!g&&e==="scroll",x=g?f!==null?f+"Capture":null:f;g=[];for(var w=u,v;w!==null;){v=w;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,x!==null&&(_=Ka(w,x),_!=null&&g.push(el(w,_,v)))),y)break;w=w.return}0<g.length&&(f=new m(f,b,null,r,d),h.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&r!==uf&&(b=r.relatedTarget||r.fromElement)&&(Qs(b)||b[An]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(b=r.relatedTarget||r.toElement,m=u,b=b?Qs(b):null,b!==null&&(y=Ei(b),b!==y||b.tag!==5&&b.tag!==6)&&(b=null)):(m=null,b=u),m!==b)){if(g=Fv,_="onMouseLeave",x="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(g=Bv,_="onPointerLeave",x="onPointerEnter",w="pointer"),y=m==null?f:Zi(m),v=b==null?f:Zi(b),f=new g(_,w+"leave",m,r,d),f.target=y,f.relatedTarget=v,_=null,Qs(d)===u&&(g=new g(x,w+"enter",b,r,d),g.target=v,g.relatedTarget=y,_=g),y=_,m&&b)t:{for(g=m,x=b,w=0,v=g;v;v=Oi(v))w++;for(v=0,_=x;_;_=Oi(_))v++;for(;0<w-v;)g=Oi(g),w--;for(;0<v-w;)x=Oi(x),v--;for(;w--;){if(g===x||x!==null&&g===x.alternate)break t;g=Oi(g),x=Oi(x)}g=null}else g=null;m!==null&&Xv(h,f,m,g,!1),b!==null&&y!==null&&Xv(h,y,b,g,!0)}}e:{if(f=u?Zi(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var S=EE;else if(Wv(f))if(N0)S=AE;else{S=RE;var j=TE}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=PE);if(S&&(S=S(e,u))){k0(h,S,r,d);break e}j&&j(e,f,u),e==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&sf(f,"number",f.value)}switch(j=u?Zi(u):window,e){case"focusin":(Wv(j)||j.contentEditable==="true")&&(Ji=j,vf=u,Ma=null);break;case"focusout":Ma=vf=Ji=null;break;case"mousedown":yf=!0;break;case"contextmenu":case"mouseup":case"dragend":yf=!1,Yv(h,r,d);break;case"selectionchange":if(ME)break;case"keydown":case"keyup":Yv(h,r,d)}var k;if(um)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Qi?S0(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(_0&&r.locale!=="ko"&&(Qi||C!=="onCompositionStart"?C==="onCompositionEnd"&&Qi&&(k=b0()):(fs=d,am="value"in fs?fs.value:fs.textContent,Qi=!0)),j=su(u,C),0<j.length&&(C=new Uv(C,e,null,r,d),h.push({event:C,listeners:j}),k?C.data=k:(k=j0(r),k!==null&&(C.data=k)))),(k=SE?jE(e,r):kE(e,r))&&(u=su(u,"onBeforeInput"),0<u.length&&(d=new Uv("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=k))}D0(h,t)})}function el(e,t,r){return{instance:e,listener:t,currentTarget:r}}function su(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ka(e,r),i!=null&&n.unshift(el(e,i,s)),i=Ka(e,t),i!=null&&n.push(el(e,i,s))),e=e.return}return n}function Oi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Xv(e,t,r,n,s){for(var i=t._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Ka(r,i),c!=null&&a.unshift(el(r,c,l))):s||(c=Ka(r,i),c!=null&&a.push(el(r,c,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var FE=/\r\n?/g,UE=/\u0000|\uFFFD/g;function Zv(e){return(typeof e=="string"?e:""+e).replace(FE,`
`).replace(UE,"")}function lc(e,t,r){if(t=Zv(t),Zv(e)!==t&&r)throw Error(W(425))}function iu(){}var wf=null,xf=null;function bf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var _f=typeof setTimeout=="function"?setTimeout:void 0,BE=typeof clearTimeout=="function"?clearTimeout:void 0,ey=typeof Promise=="function"?Promise:void 0,zE=typeof queueMicrotask=="function"?queueMicrotask:typeof ey<"u"?function(e){return ey.resolve(null).then(e).catch(qE)}:_f;function qE(e){setTimeout(function(){throw e})}function ch(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Qa(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Qa(t)}function ws(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ty(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var qo=Math.random().toString(36).slice(2),ln="__reactFiber$"+qo,tl="__reactProps$"+qo,An="__reactContainer$"+qo,Sf="__reactEvents$"+qo,WE="__reactListeners$"+qo,VE="__reactHandles$"+qo;function Qs(e){var t=e[ln];if(t)return t;for(var r=e.parentNode;r;){if(t=r[An]||r[ln]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=ty(e);e!==null;){if(r=e[ln])return r;e=ty(e)}return t}e=r,r=e.parentNode}return null}function Il(e){return e=e[ln]||e[An],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(W(33))}function Gu(e){return e[tl]||null}var jf=[],eo=-1;function Ms(e){return{current:e}}function Ke(e){0>eo||(e.current=jf[eo],jf[eo]=null,eo--)}function We(e,t){eo++,jf[eo]=e.current,e.current=t}var Ts={},It=Ms(Ts),Xt=Ms(!1),fi=Ts;function Po(e,t){var r=e.type.contextTypes;if(!r)return Ts;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Zt(e){return e=e.childContextTypes,e!=null}function ou(){Ke(Xt),Ke(It)}function ry(e,t,r){if(It.current!==Ts)throw Error(W(168));We(It,t),We(Xt,r)}function $0(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(W(108,TC(e)||"Unknown",s));return et({},r,n)}function au(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ts,fi=It.current,We(It,e),We(Xt,Xt.current),!0}function ny(e,t,r){var n=e.stateNode;if(!n)throw Error(W(169));r?(e=$0(e,t,fi),n.__reactInternalMemoizedMergedChildContext=e,Ke(Xt),Ke(It),We(It,e)):Ke(Xt),We(Xt,r)}var jn=null,Yu=!1,uh=!1;function F0(e){jn===null?jn=[e]:jn.push(e)}function HE(e){Yu=!0,F0(e)}function Ds(){if(!uh&&jn!==null){uh=!0;var e=0,t=$e;try{var r=jn;for($e=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}jn=null,Yu=!1}catch(s){throw jn!==null&&(jn=jn.slice(e+1)),u0(nm,Ds),s}finally{$e=t,uh=!1}}return null}var to=[],ro=0,lu=null,cu=0,vr=[],yr=0,pi=null,Cn=1,En="";function Ws(e,t){to[ro++]=cu,to[ro++]=lu,lu=e,cu=t}function U0(e,t,r){vr[yr++]=Cn,vr[yr++]=En,vr[yr++]=pi,pi=e;var n=Cn;e=En;var s=32-zr(n)-1;n&=~(1<<s),r+=1;var i=32-zr(t)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,Cn=1<<32-zr(t)+s|r<<s|n,En=i+e}else Cn=1<<i|r<<s|n,En=e}function hm(e){e.return!==null&&(Ws(e,1),U0(e,1,0))}function fm(e){for(;e===lu;)lu=to[--ro],to[ro]=null,cu=to[--ro],to[ro]=null;for(;e===pi;)pi=vr[--yr],vr[yr]=null,En=vr[--yr],vr[yr]=null,Cn=vr[--yr],vr[yr]=null}var cr=null,lr=null,Ye=!1,Br=null;function B0(e,t){var r=wr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function sy(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,cr=e,lr=ws(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,cr=e,lr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=pi!==null?{id:Cn,overflow:En}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=wr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,cr=e,lr=null,!0):!1;default:return!1}}function kf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Nf(e){if(Ye){var t=lr;if(t){var r=t;if(!sy(e,t)){if(kf(e))throw Error(W(418));t=ws(r.nextSibling);var n=cr;t&&sy(e,t)?B0(n,r):(e.flags=e.flags&-4097|2,Ye=!1,cr=e)}}else{if(kf(e))throw Error(W(418));e.flags=e.flags&-4097|2,Ye=!1,cr=e}}}function iy(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;cr=e}function cc(e){if(e!==cr)return!1;if(!Ye)return iy(e),Ye=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!bf(e.type,e.memoizedProps)),t&&(t=lr)){if(kf(e))throw z0(),Error(W(418));for(;t;)B0(e,t),t=ws(t.nextSibling)}if(iy(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(W(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){lr=ws(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}lr=null}}else lr=cr?ws(e.stateNode.nextSibling):null;return!0}function z0(){for(var e=lr;e;)e=ws(e.nextSibling)}function Ao(){lr=cr=null,Ye=!1}function pm(e){Br===null?Br=[e]:Br.push(e)}var KE=$n.ReactCurrentBatchConfig;function pa(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(W(309));var n=r.stateNode}if(!n)throw Error(W(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(W(284));if(!r._owner)throw Error(W(290,e))}return e}function uc(e,t){throw e=Object.prototype.toString.call(t),Error(W(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function oy(e){var t=e._init;return t(e._payload)}function q0(e){function t(x,w){if(e){var v=x.deletions;v===null?(x.deletions=[w],x.flags|=16):v.push(w)}}function r(x,w){if(!e)return null;for(;w!==null;)t(x,w),w=w.sibling;return null}function n(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function s(x,w){return x=Ss(x,w),x.index=0,x.sibling=null,x}function i(x,w,v){return x.index=v,e?(v=x.alternate,v!==null?(v=v.index,v<w?(x.flags|=2,w):v):(x.flags|=2,w)):(x.flags|=1048576,w)}function a(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,w,v,_){return w===null||w.tag!==6?(w=vh(v,x.mode,_),w.return=x,w):(w=s(w,v),w.return=x,w)}function c(x,w,v,_){var S=v.type;return S===Yi?d(x,w,v.props.children,_,v.key):w!==null&&(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Jn&&oy(S)===w.type)?(_=s(w,v.props),_.ref=pa(x,w,v),_.return=x,_):(_=zc(v.type,v.key,v.props,null,x.mode,_),_.ref=pa(x,w,v),_.return=x,_)}function u(x,w,v,_){return w===null||w.tag!==4||w.stateNode.containerInfo!==v.containerInfo||w.stateNode.implementation!==v.implementation?(w=yh(v,x.mode,_),w.return=x,w):(w=s(w,v.children||[]),w.return=x,w)}function d(x,w,v,_,S){return w===null||w.tag!==7?(w=ui(v,x.mode,_,S),w.return=x,w):(w=s(w,v),w.return=x,w)}function h(x,w,v){if(typeof w=="string"&&w!==""||typeof w=="number")return w=vh(""+w,x.mode,v),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Zl:return v=zc(w.type,w.key,w.props,null,x.mode,v),v.ref=pa(x,null,w),v.return=x,v;case Gi:return w=yh(w,x.mode,v),w.return=x,w;case Jn:var _=w._init;return h(x,_(w._payload),v)}if(ja(w)||ca(w))return w=ui(w,x.mode,v,null),w.return=x,w;uc(x,w)}return null}function f(x,w,v,_){var S=w!==null?w.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:l(x,w,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Zl:return v.key===S?c(x,w,v,_):null;case Gi:return v.key===S?u(x,w,v,_):null;case Jn:return S=v._init,f(x,w,S(v._payload),_)}if(ja(v)||ca(v))return S!==null?null:d(x,w,v,_,null);uc(x,v)}return null}function m(x,w,v,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return x=x.get(v)||null,l(w,x,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Zl:return x=x.get(_.key===null?v:_.key)||null,c(w,x,_,S);case Gi:return x=x.get(_.key===null?v:_.key)||null,u(w,x,_,S);case Jn:var j=_._init;return m(x,w,v,j(_._payload),S)}if(ja(_)||ca(_))return x=x.get(v)||null,d(w,x,_,S,null);uc(w,_)}return null}function b(x,w,v,_){for(var S=null,j=null,k=w,C=w=0,T=null;k!==null&&C<v.length;C++){k.index>C?(T=k,k=null):T=k.sibling;var A=f(x,k,v[C],_);if(A===null){k===null&&(k=T);break}e&&k&&A.alternate===null&&t(x,k),w=i(A,w,C),j===null?S=A:j.sibling=A,j=A,k=T}if(C===v.length)return r(x,k),Ye&&Ws(x,C),S;if(k===null){for(;C<v.length;C++)k=h(x,v[C],_),k!==null&&(w=i(k,w,C),j===null?S=k:j.sibling=k,j=k);return Ye&&Ws(x,C),S}for(k=n(x,k);C<v.length;C++)T=m(k,x,C,v[C],_),T!==null&&(e&&T.alternate!==null&&k.delete(T.key===null?C:T.key),w=i(T,w,C),j===null?S=T:j.sibling=T,j=T);return e&&k.forEach(function($){return t(x,$)}),Ye&&Ws(x,C),S}function g(x,w,v,_){var S=ca(v);if(typeof S!="function")throw Error(W(150));if(v=S.call(v),v==null)throw Error(W(151));for(var j=S=null,k=w,C=w=0,T=null,A=v.next();k!==null&&!A.done;C++,A=v.next()){k.index>C?(T=k,k=null):T=k.sibling;var $=f(x,k,A.value,_);if($===null){k===null&&(k=T);break}e&&k&&$.alternate===null&&t(x,k),w=i($,w,C),j===null?S=$:j.sibling=$,j=$,k=T}if(A.done)return r(x,k),Ye&&Ws(x,C),S;if(k===null){for(;!A.done;C++,A=v.next())A=h(x,A.value,_),A!==null&&(w=i(A,w,C),j===null?S=A:j.sibling=A,j=A);return Ye&&Ws(x,C),S}for(k=n(x,k);!A.done;C++,A=v.next())A=m(k,x,C,A.value,_),A!==null&&(e&&A.alternate!==null&&k.delete(A.key===null?C:A.key),w=i(A,w,C),j===null?S=A:j.sibling=A,j=A);return e&&k.forEach(function(D){return t(x,D)}),Ye&&Ws(x,C),S}function y(x,w,v,_){if(typeof v=="object"&&v!==null&&v.type===Yi&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Zl:e:{for(var S=v.key,j=w;j!==null;){if(j.key===S){if(S=v.type,S===Yi){if(j.tag===7){r(x,j.sibling),w=s(j,v.props.children),w.return=x,x=w;break e}}else if(j.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Jn&&oy(S)===j.type){r(x,j.sibling),w=s(j,v.props),w.ref=pa(x,j,v),w.return=x,x=w;break e}r(x,j);break}else t(x,j);j=j.sibling}v.type===Yi?(w=ui(v.props.children,x.mode,_,v.key),w.return=x,x=w):(_=zc(v.type,v.key,v.props,null,x.mode,_),_.ref=pa(x,w,v),_.return=x,x=_)}return a(x);case Gi:e:{for(j=v.key;w!==null;){if(w.key===j)if(w.tag===4&&w.stateNode.containerInfo===v.containerInfo&&w.stateNode.implementation===v.implementation){r(x,w.sibling),w=s(w,v.children||[]),w.return=x,x=w;break e}else{r(x,w);break}else t(x,w);w=w.sibling}w=yh(v,x.mode,_),w.return=x,x=w}return a(x);case Jn:return j=v._init,y(x,w,j(v._payload),_)}if(ja(v))return b(x,w,v,_);if(ca(v))return g(x,w,v,_);uc(x,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,w!==null&&w.tag===6?(r(x,w.sibling),w=s(w,v),w.return=x,x=w):(r(x,w),w=vh(v,x.mode,_),w.return=x,x=w),a(x)):r(x,w)}return y}var Io=q0(!0),W0=q0(!1),uu=Ms(null),du=null,no=null,mm=null;function gm(){mm=no=du=null}function vm(e){var t=uu.current;Ke(uu),e._currentValue=t}function Cf(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ho(e,t){du=e,mm=no=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Jt=!0),e.firstContext=null)}function kr(e){var t=e._currentValue;if(mm!==e)if(e={context:e,memoizedValue:t,next:null},no===null){if(du===null)throw Error(W(308));no=e,du.dependencies={lanes:0,firstContext:e}}else no=no.next=e;return t}var Js=null;function ym(e){Js===null?Js=[e]:Js.push(e)}function V0(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,ym(t)):(r.next=s.next,s.next=r),t.interleaved=r,In(e,n)}function In(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Xn=!1;function wm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function H0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Tn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function xs(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Oe&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,In(e,r)}return s=n.interleaved,s===null?(t.next=t,ym(n)):(t.next=s.next,s.next=t),n.interleaved=t,In(e,r)}function Dc(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,sm(e,r)}}function ay(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function hu(e,t,r,n){var s=e.updateQueue;Xn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;a=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,g=l;switch(f=t,m=r,g.tag){case 1:if(b=g.payload,typeof b=="function"){h=b.call(m,h,f);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=g.payload,f=typeof b=="function"?b.call(m,h,f):b,f==null)break e;h=et({},h,f);break e;case 2:Xn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,a|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);gi|=a,e.lanes=a,e.memoizedState=h}}function ly(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(W(191,s));s.call(n)}}}var Ol={},hn=Ms(Ol),rl=Ms(Ol),nl=Ms(Ol);function Xs(e){if(e===Ol)throw Error(W(174));return e}function xm(e,t){switch(We(nl,t),We(rl,e),We(hn,Ol),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:af(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=af(t,e)}Ke(hn),We(hn,t)}function Oo(){Ke(hn),Ke(rl),Ke(nl)}function K0(e){Xs(nl.current);var t=Xs(hn.current),r=af(t,e.type);t!==r&&(We(rl,e),We(hn,r))}function bm(e){rl.current===e&&(Ke(hn),Ke(rl))}var Xe=Ms(0);function fu(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var dh=[];function _m(){for(var e=0;e<dh.length;e++)dh[e]._workInProgressVersionPrimary=null;dh.length=0}var Lc=$n.ReactCurrentDispatcher,hh=$n.ReactCurrentBatchConfig,mi=0,Ze=null,pt=null,xt=null,pu=!1,Da=!1,sl=0,GE=0;function Et(){throw Error(W(321))}function Sm(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Vr(e[r],t[r]))return!1;return!0}function jm(e,t,r,n,s,i){if(mi=i,Ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Lc.current=e===null||e.memoizedState===null?XE:ZE,e=r(n,s),Da){i=0;do{if(Da=!1,sl=0,25<=i)throw Error(W(301));i+=1,xt=pt=null,t.updateQueue=null,Lc.current=eT,e=r(n,s)}while(Da)}if(Lc.current=mu,t=pt!==null&&pt.next!==null,mi=0,xt=pt=Ze=null,pu=!1,t)throw Error(W(300));return e}function km(){var e=sl!==0;return sl=0,e}function nn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Ze.memoizedState=xt=e:xt=xt.next=e,xt}function Nr(){if(pt===null){var e=Ze.alternate;e=e!==null?e.memoizedState:null}else e=pt.next;var t=xt===null?Ze.memoizedState:xt.next;if(t!==null)xt=t,pt=e;else{if(e===null)throw Error(W(310));pt=e,e={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},xt===null?Ze.memoizedState=xt=e:xt=xt.next=e}return xt}function il(e,t){return typeof t=="function"?t(e):t}function fh(e){var t=Nr(),r=t.queue;if(r===null)throw Error(W(311));r.lastRenderedReducer=e;var n=pt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((mi&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=n):c=c.next=h,Ze.lanes|=d,gi|=d}u=u.next}while(u!==null&&u!==i);c===null?a=n:c.next=l,Vr(n,t.memoizedState)||(Jt=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Ze.lanes|=i,gi|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ph(e){var t=Nr(),r=t.queue;if(r===null)throw Error(W(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);Vr(i,t.memoizedState)||(Jt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function G0(){}function Y0(e,t){var r=Ze,n=Nr(),s=t(),i=!Vr(n.memoizedState,s);if(i&&(n.memoizedState=s,Jt=!0),n=n.queue,Nm(X0.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||xt!==null&&xt.memoizedState.tag&1){if(r.flags|=2048,ol(9,J0.bind(null,r,n,s,t),void 0,null),bt===null)throw Error(W(349));mi&30||Q0(r,t,s)}return s}function Q0(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function J0(e,t,r,n){t.value=r,t.getSnapshot=n,Z0(t)&&eb(e)}function X0(e,t,r){return r(function(){Z0(t)&&eb(e)})}function Z0(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Vr(e,r)}catch{return!0}}function eb(e){var t=In(e,1);t!==null&&qr(t,e,1,-1)}function cy(e){var t=nn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:e},t.queue=e,e=e.dispatch=JE.bind(null,Ze,e),[t.memoizedState,e]}function ol(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function tb(){return Nr().memoizedState}function $c(e,t,r,n){var s=nn();Ze.flags|=e,s.memoizedState=ol(1|t,r,void 0,n===void 0?null:n)}function Qu(e,t,r,n){var s=Nr();n=n===void 0?null:n;var i=void 0;if(pt!==null){var a=pt.memoizedState;if(i=a.destroy,n!==null&&Sm(n,a.deps)){s.memoizedState=ol(t,r,i,n);return}}Ze.flags|=e,s.memoizedState=ol(1|t,r,i,n)}function uy(e,t){return $c(8390656,8,e,t)}function Nm(e,t){return Qu(2048,8,e,t)}function rb(e,t){return Qu(4,2,e,t)}function nb(e,t){return Qu(4,4,e,t)}function sb(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ib(e,t,r){return r=r!=null?r.concat([e]):null,Qu(4,4,sb.bind(null,t,e),r)}function Cm(){}function ob(e,t){var r=Nr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Sm(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function ab(e,t){var r=Nr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Sm(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function lb(e,t,r){return mi&21?(Vr(r,t)||(r=f0(),Ze.lanes|=r,gi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Jt=!0),e.memoizedState=r)}function YE(e,t){var r=$e;$e=r!==0&&4>r?r:4,e(!0);var n=hh.transition;hh.transition={};try{e(!1),t()}finally{$e=r,hh.transition=n}}function cb(){return Nr().memoizedState}function QE(e,t,r){var n=_s(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ub(e))db(t,r);else if(r=V0(e,t,r,n),r!==null){var s=Bt();qr(r,e,n,s),hb(r,t,n)}}function JE(e,t,r){var n=_s(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ub(e))db(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,r);if(s.hasEagerState=!0,s.eagerState=l,Vr(l,a)){var c=t.interleaved;c===null?(s.next=s,ym(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=V0(e,t,s,n),r!==null&&(s=Bt(),qr(r,e,n,s),hb(r,t,n))}}function ub(e){var t=e.alternate;return e===Ze||t!==null&&t===Ze}function db(e,t){Da=pu=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function hb(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,sm(e,r)}}var mu={readContext:kr,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},XE={readContext:kr,useCallback:function(e,t){return nn().memoizedState=[e,t===void 0?null:t],e},useContext:kr,useEffect:uy,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,$c(4194308,4,sb.bind(null,t,e),r)},useLayoutEffect:function(e,t){return $c(4194308,4,e,t)},useInsertionEffect:function(e,t){return $c(4,2,e,t)},useMemo:function(e,t){var r=nn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=nn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=QE.bind(null,Ze,e),[n.memoizedState,e]},useRef:function(e){var t=nn();return e={current:e},t.memoizedState=e},useState:cy,useDebugValue:Cm,useDeferredValue:function(e){return nn().memoizedState=e},useTransition:function(){var e=cy(!1),t=e[0];return e=YE.bind(null,e[1]),nn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ze,s=nn();if(Ye){if(r===void 0)throw Error(W(407));r=r()}else{if(r=t(),bt===null)throw Error(W(349));mi&30||Q0(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,uy(X0.bind(null,n,i,e),[e]),n.flags|=2048,ol(9,J0.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=nn(),t=bt.identifierPrefix;if(Ye){var r=En,n=Cn;r=(n&~(1<<32-zr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=sl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=GE++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ZE={readContext:kr,useCallback:ob,useContext:kr,useEffect:Nm,useImperativeHandle:ib,useInsertionEffect:rb,useLayoutEffect:nb,useMemo:ab,useReducer:fh,useRef:tb,useState:function(){return fh(il)},useDebugValue:Cm,useDeferredValue:function(e){var t=Nr();return lb(t,pt.memoizedState,e)},useTransition:function(){var e=fh(il)[0],t=Nr().memoizedState;return[e,t]},useMutableSource:G0,useSyncExternalStore:Y0,useId:cb,unstable_isNewReconciler:!1},eT={readContext:kr,useCallback:ob,useContext:kr,useEffect:Nm,useImperativeHandle:ib,useInsertionEffect:rb,useLayoutEffect:nb,useMemo:ab,useReducer:ph,useRef:tb,useState:function(){return ph(il)},useDebugValue:Cm,useDeferredValue:function(e){var t=Nr();return pt===null?t.memoizedState=e:lb(t,pt.memoizedState,e)},useTransition:function(){var e=ph(il)[0],t=Nr().memoizedState;return[e,t]},useMutableSource:G0,useSyncExternalStore:Y0,useId:cb,unstable_isNewReconciler:!1};function Mr(e,t){if(e&&e.defaultProps){t=et({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ef(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:et({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ju={isMounted:function(e){return(e=e._reactInternals)?Ei(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Bt(),s=_s(e),i=Tn(n,s);i.payload=t,r!=null&&(i.callback=r),t=xs(e,i,s),t!==null&&(qr(t,e,s,n),Dc(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Bt(),s=_s(e),i=Tn(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=xs(e,i,s),t!==null&&(qr(t,e,s,n),Dc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Bt(),n=_s(e),s=Tn(r,n);s.tag=2,t!=null&&(s.callback=t),t=xs(e,s,n),t!==null&&(qr(t,e,n,r),Dc(t,e,n))}};function dy(e,t,r,n,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,a):t.prototype&&t.prototype.isPureReactComponent?!Xa(r,n)||!Xa(s,i):!0}function fb(e,t,r){var n=!1,s=Ts,i=t.contextType;return typeof i=="object"&&i!==null?i=kr(i):(s=Zt(t)?fi:It.current,n=t.contextTypes,i=(n=n!=null)?Po(e,s):Ts),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ju,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function hy(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Ju.enqueueReplaceState(t,t.state,null)}function Tf(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},wm(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=kr(i):(i=Zt(t)?fi:It.current,s.context=Po(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ef(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ju.enqueueReplaceState(s,s.state,null),hu(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Mo(e,t){try{var r="",n=t;do r+=EC(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function mh(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Rf(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var tT=typeof WeakMap=="function"?WeakMap:Map;function pb(e,t,r){r=Tn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){vu||(vu=!0,Uf=n),Rf(e,t)},r}function mb(e,t,r){r=Tn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Rf(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Rf(e,t),typeof n!="function"&&(bs===null?bs=new Set([this]):bs.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function fy(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new tT;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=mT.bind(null,e,t,r),t.then(e,e))}function py(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function my(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Tn(-1,1),t.tag=2,xs(r,t,1))),r.lanes|=1),e)}var rT=$n.ReactCurrentOwner,Jt=!1;function Ft(e,t,r,n){t.child=e===null?W0(t,null,r,n):Io(t,e.child,r,n)}function gy(e,t,r,n,s){r=r.render;var i=t.ref;return ho(t,s),n=jm(e,t,r,n,i,s),r=km(),e!==null&&!Jt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,On(e,t,s)):(Ye&&r&&hm(t),t.flags|=1,Ft(e,t,n,s),t.child)}function vy(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Mm(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,gb(e,t,i,n,s)):(e=zc(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Xa,r(a,n)&&e.ref===t.ref)return On(e,t,s)}return t.flags|=1,e=Ss(i,n),e.ref=t.ref,e.return=t,t.child=e}function gb(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Xa(i,n)&&e.ref===t.ref)if(Jt=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Jt=!0);else return t.lanes=e.lanes,On(e,t,s)}return Pf(e,t,r,n,s)}function vb(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(io,sr),sr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,We(io,sr),sr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,We(io,sr),sr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,We(io,sr),sr|=n;return Ft(e,t,s,r),t.child}function yb(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Pf(e,t,r,n,s){var i=Zt(r)?fi:It.current;return i=Po(t,i),ho(t,s),r=jm(e,t,r,n,i,s),n=km(),e!==null&&!Jt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,On(e,t,s)):(Ye&&n&&hm(t),t.flags|=1,Ft(e,t,r,s),t.child)}function yy(e,t,r,n,s){if(Zt(r)){var i=!0;au(t)}else i=!1;if(ho(t,s),t.stateNode===null)Fc(e,t),fb(t,r,n),Tf(t,r,n,s),n=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=kr(u):(u=Zt(r)?fi:It.current,u=Po(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&hy(t,a,n,u),Xn=!1;var f=t.memoizedState;a.state=f,hu(t,n,a,s),c=t.memoizedState,l!==n||f!==c||Xt.current||Xn?(typeof d=="function"&&(Ef(t,r,d,n),c=t.memoizedState),(l=Xn||dy(t,r,l,n,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,H0(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Mr(t.type,l),a.props=u,h=t.pendingProps,f=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=kr(c):(c=Zt(r)?fi:It.current,c=Po(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&hy(t,a,n,c),Xn=!1,f=t.memoizedState,a.state=f,hu(t,n,a,s);var b=t.memoizedState;l!==h||f!==b||Xt.current||Xn?(typeof m=="function"&&(Ef(t,r,m,n),b=t.memoizedState),(u=Xn||dy(t,r,u,n,f,b,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,b,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,b,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=b),a.props=n,a.state=b,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Af(e,t,r,n,i,s)}function Af(e,t,r,n,s,i){yb(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return s&&ny(t,r,!1),On(e,t,i);n=t.stateNode,rT.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=Io(t,e.child,null,i),t.child=Io(t,null,l,i)):Ft(e,t,l,i),t.memoizedState=n.state,s&&ny(t,r,!0),t.child}function wb(e){var t=e.stateNode;t.pendingContext?ry(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ry(e,t.context,!1),xm(e,t.containerInfo)}function wy(e,t,r,n,s){return Ao(),pm(s),t.flags|=256,Ft(e,t,r,n),t.child}var If={dehydrated:null,treeContext:null,retryLane:0};function Of(e){return{baseLanes:e,cachePool:null,transitions:null}}function xb(e,t,r){var n=t.pendingProps,s=Xe.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),We(Xe,s&1),e===null)return Nf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,i?(n=t.mode,i=t.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=ed(a,n,0,null),e=ui(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Of(r),t.memoizedState=If,e):Em(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return nT(e,t,a,n,l,s,r);if(i){i=n.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Ss(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ss(l,i):(i=ui(i,a,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,a=e.child.memoizedState,a=a===null?Of(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~r,t.memoizedState=If,n}return i=e.child,e=i.sibling,n=Ss(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Em(e,t){return t=ed({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function dc(e,t,r,n){return n!==null&&pm(n),Io(t,e.child,null,r),e=Em(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function nT(e,t,r,n,s,i,a){if(r)return t.flags&256?(t.flags&=-257,n=mh(Error(W(422))),dc(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=ed({mode:"visible",children:n.children},s,0,null),i=ui(i,s,a,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Io(t,e.child,null,a),t.child.memoizedState=Of(a),t.memoizedState=If,i);if(!(t.mode&1))return dc(e,t,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(W(419)),n=mh(i,n,void 0),dc(e,t,a,n)}if(l=(a&e.childLanes)!==0,Jt||l){if(n=bt,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,In(e,s),qr(n,e,s,-1))}return Om(),n=mh(Error(W(421))),dc(e,t,a,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=gT.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,lr=ws(s.nextSibling),cr=t,Ye=!0,Br=null,e!==null&&(vr[yr++]=Cn,vr[yr++]=En,vr[yr++]=pi,Cn=e.id,En=e.overflow,pi=t),t=Em(t,n.children),t.flags|=4096,t)}function xy(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Cf(e.return,t,r)}function gh(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function bb(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Ft(e,t,n.children,r),n=Xe.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xy(e,r,t);else if(e.tag===19)xy(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(We(Xe,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&fu(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),gh(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&fu(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}gh(t,!0,r,null,i);break;case"together":gh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function On(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),gi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(W(153));if(t.child!==null){for(e=t.child,r=Ss(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ss(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function sT(e,t,r){switch(t.tag){case 3:wb(t),Ao();break;case 5:K0(t);break;case 1:Zt(t.type)&&au(t);break;case 4:xm(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;We(uu,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(We(Xe,Xe.current&1),t.flags|=128,null):r&t.child.childLanes?xb(e,t,r):(We(Xe,Xe.current&1),e=On(e,t,r),e!==null?e.sibling:null);We(Xe,Xe.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return bb(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),We(Xe,Xe.current),n)break;return null;case 22:case 23:return t.lanes=0,vb(e,t,r)}return On(e,t,r)}var _b,Mf,Sb,jb;_b=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Mf=function(){};Sb=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Xs(hn.current);var i=null;switch(r){case"input":s=rf(e,s),n=rf(e,n),i=[];break;case"select":s=et({},s,{value:void 0}),n=et({},n,{value:void 0}),i=[];break;case"textarea":s=of(e,s),n=of(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=iu)}lf(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Va.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Va.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&He("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};jb=function(e,t,r,n){r!==n&&(t.flags|=4)};function ma(e,t){if(!Ye)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function iT(e,t,r){var n=t.pendingProps;switch(fm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(t),null;case 1:return Zt(t.type)&&ou(),Tt(t),null;case 3:return n=t.stateNode,Oo(),Ke(Xt),Ke(It),_m(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(cc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Br!==null&&(qf(Br),Br=null))),Mf(e,t),Tt(t),null;case 5:bm(t);var s=Xs(nl.current);if(r=t.type,e!==null&&t.stateNode!=null)Sb(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(W(166));return Tt(t),null}if(e=Xs(hn.current),cc(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ln]=t,n[tl]=i,e=(t.mode&1)!==0,r){case"dialog":He("cancel",n),He("close",n);break;case"iframe":case"object":case"embed":He("load",n);break;case"video":case"audio":for(s=0;s<Na.length;s++)He(Na[s],n);break;case"source":He("error",n);break;case"img":case"image":case"link":He("error",n),He("load",n);break;case"details":He("toggle",n);break;case"input":Tv(n,i),He("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},He("invalid",n);break;case"textarea":Pv(n,i),He("invalid",n)}lf(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&lc(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&lc(n.textContent,l,e),s=["children",""+l]):Va.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&He("scroll",n)}switch(r){case"input":ec(n),Rv(n,i,!0);break;case"textarea":ec(n),Av(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=iu)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Xx(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[ln]=t,e[tl]=n,_b(e,t,!1,!1),t.stateNode=e;e:{switch(a=cf(r,n),r){case"dialog":He("cancel",e),He("close",e),s=n;break;case"iframe":case"object":case"embed":He("load",e),s=n;break;case"video":case"audio":for(s=0;s<Na.length;s++)He(Na[s],e);s=n;break;case"source":He("error",e),s=n;break;case"img":case"image":case"link":He("error",e),He("load",e),s=n;break;case"details":He("toggle",e),s=n;break;case"input":Tv(e,n),s=rf(e,n),He("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=et({},n,{value:void 0}),He("invalid",e);break;case"textarea":Pv(e,n),s=of(e,n),He("invalid",e);break;default:s=n}lf(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?t0(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Zx(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ha(e,c):typeof c=="number"&&Ha(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Va.hasOwnProperty(i)?c!=null&&i==="onScroll"&&He("scroll",e):c!=null&&Xp(e,i,c,a))}switch(r){case"input":ec(e),Rv(e,n,!1);break;case"textarea":ec(e),Av(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Es(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?ao(e,!!n.multiple,i,!1):n.defaultValue!=null&&ao(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=iu)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Tt(t),null;case 6:if(e&&t.stateNode!=null)jb(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(W(166));if(r=Xs(nl.current),Xs(hn.current),cc(t)){if(n=t.stateNode,r=t.memoizedProps,n[ln]=t,(i=n.nodeValue!==r)&&(e=cr,e!==null))switch(e.tag){case 3:lc(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&lc(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ln]=t,t.stateNode=n}return Tt(t),null;case 13:if(Ke(Xe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ye&&lr!==null&&t.mode&1&&!(t.flags&128))z0(),Ao(),t.flags|=98560,i=!1;else if(i=cc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(W(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[ln]=t}else Ao(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Tt(t),i=!1}else Br!==null&&(qf(Br),Br=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Xe.current&1?gt===0&&(gt=3):Om())),t.updateQueue!==null&&(t.flags|=4),Tt(t),null);case 4:return Oo(),Mf(e,t),e===null&&Za(t.stateNode.containerInfo),Tt(t),null;case 10:return vm(t.type._context),Tt(t),null;case 17:return Zt(t.type)&&ou(),Tt(t),null;case 19:if(Ke(Xe),i=t.memoizedState,i===null)return Tt(t),null;if(n=(t.flags&128)!==0,a=i.rendering,a===null)if(n)ma(i,!1);else{if(gt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=fu(e),a!==null){for(t.flags|=128,ma(i,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return We(Xe,Xe.current&1|2),t.child}e=e.sibling}i.tail!==null&&lt()>Do&&(t.flags|=128,n=!0,ma(i,!1),t.lanes=4194304)}else{if(!n)if(e=fu(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ma(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ye)return Tt(t),null}else 2*lt()-i.renderingStartTime>Do&&r!==1073741824&&(t.flags|=128,n=!0,ma(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(r=i.last,r!==null?r.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=lt(),t.sibling=null,r=Xe.current,We(Xe,n?r&1|2:r&1),t):(Tt(t),null);case 22:case 23:return Im(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?sr&1073741824&&(Tt(t),t.subtreeFlags&6&&(t.flags|=8192)):Tt(t),null;case 24:return null;case 25:return null}throw Error(W(156,t.tag))}function oT(e,t){switch(fm(t),t.tag){case 1:return Zt(t.type)&&ou(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Oo(),Ke(Xt),Ke(It),_m(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return bm(t),null;case 13:if(Ke(Xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(W(340));Ao()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ke(Xe),null;case 4:return Oo(),null;case 10:return vm(t.type._context),null;case 22:case 23:return Im(),null;case 24:return null;default:return null}}var hc=!1,Pt=!1,aT=typeof WeakSet=="function"?WeakSet:Set,oe=null;function so(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){nt(e,t,n)}else r.current=null}function Df(e,t,r){try{r()}catch(n){nt(e,t,n)}}var by=!1;function lT(e,t){if(wf=ru,e=T0(),dm(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(l=a+s),h!==i||n!==0&&h.nodeType!==3||(c=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===r&&++u===s&&(l=a),f===i&&++d===n&&(c=a),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(xf={focusedElem:e,selectionRange:r},ru=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var g=b.memoizedProps,y=b.memoizedState,x=t.stateNode,w=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:Mr(t.type,g),y);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(_){nt(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return b=by,by=!1,b}function La(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Df(t,r,i)}s=s.next}while(s!==n)}}function Xu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Lf(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function kb(e){var t=e.alternate;t!==null&&(e.alternate=null,kb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ln],delete t[tl],delete t[Sf],delete t[WE],delete t[VE])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Nb(e){return e.tag===5||e.tag===3||e.tag===4}function _y(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Nb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $f(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=iu));else if(n!==4&&(e=e.child,e!==null))for($f(e,t,r),e=e.sibling;e!==null;)$f(e,t,r),e=e.sibling}function Ff(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Ff(e,t,r),e=e.sibling;e!==null;)Ff(e,t,r),e=e.sibling}var jt=null,Fr=!1;function Vn(e,t,r){for(r=r.child;r!==null;)Cb(e,t,r),r=r.sibling}function Cb(e,t,r){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Wu,r)}catch{}switch(r.tag){case 5:Pt||so(r,t);case 6:var n=jt,s=Fr;jt=null,Vn(e,t,r),jt=n,Fr=s,jt!==null&&(Fr?(e=jt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):jt.removeChild(r.stateNode));break;case 18:jt!==null&&(Fr?(e=jt,r=r.stateNode,e.nodeType===8?ch(e.parentNode,r):e.nodeType===1&&ch(e,r),Qa(e)):ch(jt,r.stateNode));break;case 4:n=jt,s=Fr,jt=r.stateNode.containerInfo,Fr=!0,Vn(e,t,r),jt=n,Fr=s;break;case 0:case 11:case 14:case 15:if(!Pt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Df(r,t,a),s=s.next}while(s!==n)}Vn(e,t,r);break;case 1:if(!Pt&&(so(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){nt(r,t,l)}Vn(e,t,r);break;case 21:Vn(e,t,r);break;case 22:r.mode&1?(Pt=(n=Pt)||r.memoizedState!==null,Vn(e,t,r),Pt=n):Vn(e,t,r);break;default:Vn(e,t,r)}}function Sy(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new aT),t.forEach(function(n){var s=vT.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Pr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:jt=l.stateNode,Fr=!1;break e;case 3:jt=l.stateNode.containerInfo,Fr=!0;break e;case 4:jt=l.stateNode.containerInfo,Fr=!0;break e}l=l.return}if(jt===null)throw Error(W(160));Cb(i,a,s),jt=null,Fr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){nt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Eb(t,e),t=t.sibling}function Eb(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pr(t,e),rn(e),n&4){try{La(3,e,e.return),Xu(3,e)}catch(g){nt(e,e.return,g)}try{La(5,e,e.return)}catch(g){nt(e,e.return,g)}}break;case 1:Pr(t,e),rn(e),n&512&&r!==null&&so(r,r.return);break;case 5:if(Pr(t,e),rn(e),n&512&&r!==null&&so(r,r.return),e.flags&32){var s=e.stateNode;try{Ha(s,"")}catch(g){nt(e,e.return,g)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Qx(s,i),cf(l,a);var u=cf(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?t0(s,h):d==="dangerouslySetInnerHTML"?Zx(s,h):d==="children"?Ha(s,h):Xp(s,d,h,u)}switch(l){case"input":nf(s,i);break;case"textarea":Jx(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?ao(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?ao(s,!!i.multiple,i.defaultValue,!0):ao(s,!!i.multiple,i.multiple?[]:"",!1))}s[tl]=i}catch(g){nt(e,e.return,g)}}break;case 6:if(Pr(t,e),rn(e),n&4){if(e.stateNode===null)throw Error(W(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(g){nt(e,e.return,g)}}break;case 3:if(Pr(t,e),rn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Qa(t.containerInfo)}catch(g){nt(e,e.return,g)}break;case 4:Pr(t,e),rn(e);break;case 13:Pr(t,e),rn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Pm=lt())),n&4&&Sy(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Pt=(u=Pt)||d,Pr(t,e),Pt=u):Pr(t,e),rn(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(oe=e,d=e.child;d!==null;){for(h=oe=d;oe!==null;){switch(f=oe,m=f.child,f.tag){case 0:case 11:case 14:case 15:La(4,f,f.return);break;case 1:so(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(g){nt(n,r,g)}}break;case 5:so(f,f.return);break;case 22:if(f.memoizedState!==null){ky(h);continue}}m!==null?(m.return=f,oe=m):ky(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=e0("display",a))}catch(g){nt(e,e.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){nt(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Pr(t,e),rn(e),n&4&&Sy(e);break;case 21:break;default:Pr(t,e),rn(e)}}function rn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Nb(r)){var n=r;break e}r=r.return}throw Error(W(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Ha(s,""),n.flags&=-33);var i=_y(e);Ff(e,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=_y(e);$f(e,l,a);break;default:throw Error(W(161))}}catch(c){nt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function cT(e,t,r){oe=e,Tb(e)}function Tb(e,t,r){for(var n=(e.mode&1)!==0;oe!==null;){var s=oe,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||hc;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Pt;l=hc;var u=Pt;if(hc=a,(Pt=c)&&!u)for(oe=s;oe!==null;)a=oe,c=a.child,a.tag===22&&a.memoizedState!==null?Ny(s):c!==null?(c.return=a,oe=c):Ny(s);for(;i!==null;)oe=i,Tb(i),i=i.sibling;oe=s,hc=l,Pt=u}jy(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,oe=i):jy(e)}}function jy(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Pt||Xu(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Pt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Mr(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&ly(t,i,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}ly(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Qa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Pt||t.flags&512&&Lf(t)}catch(f){nt(t,t.return,f)}}if(t===e){oe=null;break}if(r=t.sibling,r!==null){r.return=t.return,oe=r;break}oe=t.return}}function ky(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,oe=r;break}oe=t.return}}function Ny(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Xu(4,t)}catch(c){nt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){nt(t,s,c)}}var i=t.return;try{Lf(t)}catch(c){nt(t,i,c)}break;case 5:var a=t.return;try{Lf(t)}catch(c){nt(t,a,c)}}}catch(c){nt(t,t.return,c)}if(t===e){oe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,oe=l;break}oe=t.return}}var uT=Math.ceil,gu=$n.ReactCurrentDispatcher,Tm=$n.ReactCurrentOwner,_r=$n.ReactCurrentBatchConfig,Oe=0,bt=null,dt=null,kt=0,sr=0,io=Ms(0),gt=0,al=null,gi=0,Zu=0,Rm=0,$a=null,Qt=null,Pm=0,Do=1/0,_n=null,vu=!1,Uf=null,bs=null,fc=!1,ps=null,yu=0,Fa=0,Bf=null,Uc=-1,Bc=0;function Bt(){return Oe&6?lt():Uc!==-1?Uc:Uc=lt()}function _s(e){return e.mode&1?Oe&2&&kt!==0?kt&-kt:KE.transition!==null?(Bc===0&&(Bc=f0()),Bc):(e=$e,e!==0||(e=window.event,e=e===void 0?16:x0(e.type)),e):1}function qr(e,t,r,n){if(50<Fa)throw Fa=0,Bf=null,Error(W(185));Pl(e,r,n),(!(Oe&2)||e!==bt)&&(e===bt&&(!(Oe&2)&&(Zu|=r),gt===4&&ts(e,kt)),er(e,n),r===1&&Oe===0&&!(t.mode&1)&&(Do=lt()+500,Yu&&Ds()))}function er(e,t){var r=e.callbackNode;KC(e,t);var n=tu(e,e===bt?kt:0);if(n===0)r!==null&&Mv(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Mv(r),t===1)e.tag===0?HE(Cy.bind(null,e)):F0(Cy.bind(null,e)),zE(function(){!(Oe&6)&&Ds()}),r=null;else{switch(p0(n)){case 1:r=nm;break;case 4:r=d0;break;case 16:r=eu;break;case 536870912:r=h0;break;default:r=eu}r=Lb(r,Rb.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Rb(e,t){if(Uc=-1,Bc=0,Oe&6)throw Error(W(327));var r=e.callbackNode;if(fo()&&e.callbackNode!==r)return null;var n=tu(e,e===bt?kt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=wu(e,n);else{t=n;var s=Oe;Oe|=2;var i=Ab();(bt!==e||kt!==t)&&(_n=null,Do=lt()+500,ci(e,t));do try{fT();break}catch(l){Pb(e,l)}while(!0);gm(),gu.current=i,Oe=s,dt!==null?t=0:(bt=null,kt=0,t=gt)}if(t!==0){if(t===2&&(s=pf(e),s!==0&&(n=s,t=zf(e,s))),t===1)throw r=al,ci(e,0),ts(e,n),er(e,lt()),r;if(t===6)ts(e,n);else{if(s=e.current.alternate,!(n&30)&&!dT(s)&&(t=wu(e,n),t===2&&(i=pf(e),i!==0&&(n=i,t=zf(e,i))),t===1))throw r=al,ci(e,0),ts(e,n),er(e,lt()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(W(345));case 2:Vs(e,Qt,_n);break;case 3:if(ts(e,n),(n&130023424)===n&&(t=Pm+500-lt(),10<t)){if(tu(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Bt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=_f(Vs.bind(null,e,Qt,_n),t);break}Vs(e,Qt,_n);break;case 4:if(ts(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var a=31-zr(n);i=1<<a,a=t[a],a>s&&(s=a),n&=~i}if(n=s,n=lt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*uT(n/1960))-n,10<n){e.timeoutHandle=_f(Vs.bind(null,e,Qt,_n),n);break}Vs(e,Qt,_n);break;case 5:Vs(e,Qt,_n);break;default:throw Error(W(329))}}}return er(e,lt()),e.callbackNode===r?Rb.bind(null,e):null}function zf(e,t){var r=$a;return e.current.memoizedState.isDehydrated&&(ci(e,t).flags|=256),e=wu(e,t),e!==2&&(t=Qt,Qt=r,t!==null&&qf(t)),e}function qf(e){Qt===null?Qt=e:Qt.push.apply(Qt,e)}function dT(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Vr(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ts(e,t){for(t&=~Rm,t&=~Zu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-zr(t),n=1<<r;e[r]=-1,t&=~n}}function Cy(e){if(Oe&6)throw Error(W(327));fo();var t=tu(e,0);if(!(t&1))return er(e,lt()),null;var r=wu(e,t);if(e.tag!==0&&r===2){var n=pf(e);n!==0&&(t=n,r=zf(e,n))}if(r===1)throw r=al,ci(e,0),ts(e,t),er(e,lt()),r;if(r===6)throw Error(W(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vs(e,Qt,_n),er(e,lt()),null}function Am(e,t){var r=Oe;Oe|=1;try{return e(t)}finally{Oe=r,Oe===0&&(Do=lt()+500,Yu&&Ds())}}function vi(e){ps!==null&&ps.tag===0&&!(Oe&6)&&fo();var t=Oe;Oe|=1;var r=_r.transition,n=$e;try{if(_r.transition=null,$e=1,e)return e()}finally{$e=n,_r.transition=r,Oe=t,!(Oe&6)&&Ds()}}function Im(){sr=io.current,Ke(io)}function ci(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,BE(r)),dt!==null)for(r=dt.return;r!==null;){var n=r;switch(fm(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ou();break;case 3:Oo(),Ke(Xt),Ke(It),_m();break;case 5:bm(n);break;case 4:Oo();break;case 13:Ke(Xe);break;case 19:Ke(Xe);break;case 10:vm(n.type._context);break;case 22:case 23:Im()}r=r.return}if(bt=e,dt=e=Ss(e.current,null),kt=sr=t,gt=0,al=null,Rm=Zu=gi=0,Qt=$a=null,Js!==null){for(t=0;t<Js.length;t++)if(r=Js[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}Js=null}return e}function Pb(e,t){do{var r=dt;try{if(gm(),Lc.current=mu,pu){for(var n=Ze.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}pu=!1}if(mi=0,xt=pt=Ze=null,Da=!1,sl=0,Tm.current=null,r===null||r.return===null){gt=1,al=t,dt=null;break}e:{var i=e,a=r.return,l=r,c=t;if(t=kt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=py(a);if(m!==null){m.flags&=-257,my(m,a,l,i,t),m.mode&1&&fy(i,u,t),t=m,c=u;var b=t.updateQueue;if(b===null){var g=new Set;g.add(c),t.updateQueue=g}else b.add(c);break e}else{if(!(t&1)){fy(i,u,t),Om();break e}c=Error(W(426))}}else if(Ye&&l.mode&1){var y=py(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),my(y,a,l,i,t),pm(Mo(c,l));break e}}i=c=Mo(c,l),gt!==4&&(gt=2),$a===null?$a=[i]:$a.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=pb(i,c,t);ay(i,x);break e;case 1:l=c;var w=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(bs===null||!bs.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=mb(i,l,t);ay(i,_);break e}}i=i.return}while(i!==null)}Ob(r)}catch(S){t=S,dt===r&&r!==null&&(dt=r=r.return);continue}break}while(!0)}function Ab(){var e=gu.current;return gu.current=mu,e===null?mu:e}function Om(){(gt===0||gt===3||gt===2)&&(gt=4),bt===null||!(gi&268435455)&&!(Zu&268435455)||ts(bt,kt)}function wu(e,t){var r=Oe;Oe|=2;var n=Ab();(bt!==e||kt!==t)&&(_n=null,ci(e,t));do try{hT();break}catch(s){Pb(e,s)}while(!0);if(gm(),Oe=r,gu.current=n,dt!==null)throw Error(W(261));return bt=null,kt=0,gt}function hT(){for(;dt!==null;)Ib(dt)}function fT(){for(;dt!==null&&!$C();)Ib(dt)}function Ib(e){var t=Db(e.alternate,e,sr);e.memoizedProps=e.pendingProps,t===null?Ob(e):dt=t,Tm.current=null}function Ob(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=oT(r,t),r!==null){r.flags&=32767,dt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{gt=6,dt=null;return}}else if(r=iT(r,t,sr),r!==null){dt=r;return}if(t=t.sibling,t!==null){dt=t;return}dt=t=e}while(t!==null);gt===0&&(gt=5)}function Vs(e,t,r){var n=$e,s=_r.transition;try{_r.transition=null,$e=1,pT(e,t,r,n)}finally{_r.transition=s,$e=n}return null}function pT(e,t,r,n){do fo();while(ps!==null);if(Oe&6)throw Error(W(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(W(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(GC(e,i),e===bt&&(dt=bt=null,kt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||fc||(fc=!0,Lb(eu,function(){return fo(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=_r.transition,_r.transition=null;var a=$e;$e=1;var l=Oe;Oe|=4,Tm.current=null,lT(e,r),Eb(r,e),OE(xf),ru=!!wf,xf=wf=null,e.current=r,cT(r),FC(),Oe=l,$e=a,_r.transition=i}else e.current=r;if(fc&&(fc=!1,ps=e,yu=s),i=e.pendingLanes,i===0&&(bs=null),zC(r.stateNode),er(e,lt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(vu)throw vu=!1,e=Uf,Uf=null,e;return yu&1&&e.tag!==0&&fo(),i=e.pendingLanes,i&1?e===Bf?Fa++:(Fa=0,Bf=e):Fa=0,Ds(),null}function fo(){if(ps!==null){var e=p0(yu),t=_r.transition,r=$e;try{if(_r.transition=null,$e=16>e?16:e,ps===null)var n=!1;else{if(e=ps,ps=null,yu=0,Oe&6)throw Error(W(331));var s=Oe;for(Oe|=4,oe=e.current;oe!==null;){var i=oe,a=i.child;if(oe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(oe=u;oe!==null;){var d=oe;switch(d.tag){case 0:case 11:case 15:La(8,d,i)}var h=d.child;if(h!==null)h.return=d,oe=h;else for(;oe!==null;){d=oe;var f=d.sibling,m=d.return;if(kb(d),d===u){oe=null;break}if(f!==null){f.return=m,oe=f;break}oe=m}}}var b=i.alternate;if(b!==null){var g=b.child;if(g!==null){b.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}oe=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,oe=a;else e:for(;oe!==null;){if(i=oe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:La(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,oe=x;break e}oe=i.return}}var w=e.current;for(oe=w;oe!==null;){a=oe;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,oe=v;else e:for(a=w;oe!==null;){if(l=oe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Xu(9,l)}}catch(S){nt(l,l.return,S)}if(l===a){oe=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,oe=_;break e}oe=l.return}}if(Oe=s,Ds(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Wu,e)}catch{}n=!0}return n}finally{$e=r,_r.transition=t}}return!1}function Ey(e,t,r){t=Mo(r,t),t=pb(e,t,1),e=xs(e,t,1),t=Bt(),e!==null&&(Pl(e,1,t),er(e,t))}function nt(e,t,r){if(e.tag===3)Ey(e,e,r);else for(;t!==null;){if(t.tag===3){Ey(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(bs===null||!bs.has(n))){e=Mo(r,e),e=mb(t,e,1),t=xs(t,e,1),e=Bt(),t!==null&&(Pl(t,1,e),er(t,e));break}}t=t.return}}function mT(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Bt(),e.pingedLanes|=e.suspendedLanes&r,bt===e&&(kt&r)===r&&(gt===4||gt===3&&(kt&130023424)===kt&&500>lt()-Pm?ci(e,0):Rm|=r),er(e,t)}function Mb(e,t){t===0&&(e.mode&1?(t=nc,nc<<=1,!(nc&130023424)&&(nc=4194304)):t=1);var r=Bt();e=In(e,t),e!==null&&(Pl(e,t,r),er(e,r))}function gT(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Mb(e,r)}function vT(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(W(314))}n!==null&&n.delete(t),Mb(e,r)}var Db;Db=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Xt.current)Jt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Jt=!1,sT(e,t,r);Jt=!!(e.flags&131072)}else Jt=!1,Ye&&t.flags&1048576&&U0(t,cu,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Fc(e,t),e=t.pendingProps;var s=Po(t,It.current);ho(t,r),s=jm(null,t,n,e,s,r);var i=km();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zt(n)?(i=!0,au(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wm(t),s.updater=Ju,t.stateNode=s,s._reactInternals=t,Tf(t,n,e,r),t=Af(null,t,n,!0,i,r)):(t.tag=0,Ye&&i&&hm(t),Ft(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Fc(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=wT(n),e=Mr(n,e),s){case 0:t=Pf(null,t,n,e,r);break e;case 1:t=yy(null,t,n,e,r);break e;case 11:t=gy(null,t,n,e,r);break e;case 14:t=vy(null,t,n,Mr(n.type,e),r);break e}throw Error(W(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Mr(n,s),Pf(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Mr(n,s),yy(e,t,n,s,r);case 3:e:{if(wb(t),e===null)throw Error(W(387));n=t.pendingProps,i=t.memoizedState,s=i.element,H0(e,t),hu(t,n,null,r);var a=t.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Mo(Error(W(423)),t),t=wy(e,t,n,r,s);break e}else if(n!==s){s=Mo(Error(W(424)),t),t=wy(e,t,n,r,s);break e}else for(lr=ws(t.stateNode.containerInfo.firstChild),cr=t,Ye=!0,Br=null,r=W0(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ao(),n===s){t=On(e,t,r);break e}Ft(e,t,n,r)}t=t.child}return t;case 5:return K0(t),e===null&&Nf(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,bf(n,s)?a=null:i!==null&&bf(n,i)&&(t.flags|=32),yb(e,t),Ft(e,t,a,r),t.child;case 6:return e===null&&Nf(t),null;case 13:return xb(e,t,r);case 4:return xm(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Io(t,null,n,r):Ft(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Mr(n,s),gy(e,t,n,s,r);case 7:return Ft(e,t,t.pendingProps,r),t.child;case 8:return Ft(e,t,t.pendingProps.children,r),t.child;case 12:return Ft(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,We(uu,n._currentValue),n._currentValue=a,i!==null)if(Vr(i.value,a)){if(i.children===s.children&&!Xt.current){t=On(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Tn(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Cf(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(W(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Cf(a,r,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Ft(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,ho(t,r),s=kr(s),n=n(s),t.flags|=1,Ft(e,t,n,r),t.child;case 14:return n=t.type,s=Mr(n,t.pendingProps),s=Mr(n.type,s),vy(e,t,n,s,r);case 15:return gb(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Mr(n,s),Fc(e,t),t.tag=1,Zt(n)?(e=!0,au(t)):e=!1,ho(t,r),fb(t,n,s),Tf(t,n,s,r),Af(null,t,n,!0,e,r);case 19:return bb(e,t,r);case 22:return vb(e,t,r)}throw Error(W(156,t.tag))};function Lb(e,t){return u0(e,t)}function yT(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(e,t,r,n){return new yT(e,t,r,n)}function Mm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wT(e){if(typeof e=="function")return Mm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===em)return 11;if(e===tm)return 14}return 2}function Ss(e,t){var r=e.alternate;return r===null?(r=wr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function zc(e,t,r,n,s,i){var a=2;if(n=e,typeof e=="function")Mm(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Yi:return ui(r.children,s,i,t);case Zp:a=8,s|=8;break;case Xh:return e=wr(12,r,t,s|2),e.elementType=Xh,e.lanes=i,e;case Zh:return e=wr(13,r,t,s),e.elementType=Zh,e.lanes=i,e;case ef:return e=wr(19,r,t,s),e.elementType=ef,e.lanes=i,e;case Kx:return ed(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Vx:a=10;break e;case Hx:a=9;break e;case em:a=11;break e;case tm:a=14;break e;case Jn:a=16,n=null;break e}throw Error(W(130,e==null?e:typeof e,""))}return t=wr(a,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function ui(e,t,r,n){return e=wr(7,e,n,t),e.lanes=r,e}function ed(e,t,r,n){return e=wr(22,e,n,t),e.elementType=Kx,e.lanes=r,e.stateNode={isHidden:!1},e}function vh(e,t,r){return e=wr(6,e,null,t),e.lanes=r,e}function yh(e,t,r){return t=wr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function xT(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xd(0),this.expirationTimes=Xd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xd(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Dm(e,t,r,n,s,i,a,l,c){return e=new xT(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=wr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},wm(i),e}function bT(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gi,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function $b(e){if(!e)return Ts;e=e._reactInternals;e:{if(Ei(e)!==e||e.tag!==1)throw Error(W(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Zt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(W(171))}if(e.tag===1){var r=e.type;if(Zt(r))return $0(e,r,t)}return t}function Fb(e,t,r,n,s,i,a,l,c){return e=Dm(r,n,!0,e,s,i,a,l,c),e.context=$b(null),r=e.current,n=Bt(),s=_s(r),i=Tn(n,s),i.callback=t??null,xs(r,i,s),e.current.lanes=s,Pl(e,s,n),er(e,n),e}function td(e,t,r,n){var s=t.current,i=Bt(),a=_s(s);return r=$b(r),t.context===null?t.context=r:t.pendingContext=r,t=Tn(i,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=xs(s,t,a),e!==null&&(qr(e,s,a,i),Dc(e,s,a)),a}function xu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ty(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Lm(e,t){Ty(e,t),(e=e.alternate)&&Ty(e,t)}function _T(){return null}var Ub=typeof reportError=="function"?reportError:function(e){console.error(e)};function $m(e){this._internalRoot=e}rd.prototype.render=$m.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(W(409));td(e,t,null,null)};rd.prototype.unmount=$m.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vi(function(){td(null,e,null,null)}),t[An]=null}};function rd(e){this._internalRoot=e}rd.prototype.unstable_scheduleHydration=function(e){if(e){var t=v0();e={blockedOn:null,target:e,priority:t};for(var r=0;r<es.length&&t!==0&&t<es[r].priority;r++);es.splice(r,0,e),r===0&&w0(e)}};function Fm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function nd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ry(){}function ST(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=xu(a);i.call(u)}}var a=Fb(t,n,e,0,null,!1,!1,"",Ry);return e._reactRootContainer=a,e[An]=a.current,Za(e.nodeType===8?e.parentNode:e),vi(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=xu(c);l.call(u)}}var c=Dm(e,0,!1,null,null,!1,!1,"",Ry);return e._reactRootContainer=c,e[An]=c.current,Za(e.nodeType===8?e.parentNode:e),vi(function(){td(t,c,r,n)}),c}function sd(e,t,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=xu(a);l.call(c)}}td(t,a,e,s)}else a=ST(r,t,e,s,n);return xu(a)}m0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ka(t.pendingLanes);r!==0&&(sm(t,r|1),er(t,lt()),!(Oe&6)&&(Do=lt()+500,Ds()))}break;case 13:vi(function(){var n=In(e,1);if(n!==null){var s=Bt();qr(n,e,1,s)}}),Lm(e,1)}};im=function(e){if(e.tag===13){var t=In(e,134217728);if(t!==null){var r=Bt();qr(t,e,134217728,r)}Lm(e,134217728)}};g0=function(e){if(e.tag===13){var t=_s(e),r=In(e,t);if(r!==null){var n=Bt();qr(r,e,t,n)}Lm(e,t)}};v0=function(){return $e};y0=function(e,t){var r=$e;try{return $e=e,t()}finally{$e=r}};df=function(e,t,r){switch(t){case"input":if(nf(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Gu(n);if(!s)throw Error(W(90));Yx(n),nf(n,s)}}}break;case"textarea":Jx(e,r);break;case"select":t=r.value,t!=null&&ao(e,!!r.multiple,t,!1)}};s0=Am;i0=vi;var jT={usingClientEntryPoint:!1,Events:[Il,Zi,Gu,r0,n0,Am]},ga={findFiberByHostInstance:Qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kT={bundleType:ga.bundleType,version:ga.version,rendererPackageName:ga.rendererPackageName,rendererConfig:ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$n.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=l0(e),e===null?null:e.stateNode},findFiberByHostInstance:ga.findFiberByHostInstance||_T,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pc.isDisabled&&pc.supportsFiber)try{Wu=pc.inject(kT),dn=pc}catch{}}hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jT;hr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fm(t))throw Error(W(200));return bT(e,t,null,r)};hr.createRoot=function(e,t){if(!Fm(e))throw Error(W(299));var r=!1,n="",s=Ub;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Dm(e,1,!1,null,null,r,!1,n,s),e[An]=t.current,Za(e.nodeType===8?e.parentNode:e),new $m(t)};hr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(W(188)):(e=Object.keys(e).join(","),Error(W(268,e)));return e=l0(t),e=e===null?null:e.stateNode,e};hr.flushSync=function(e){return vi(e)};hr.hydrate=function(e,t,r){if(!nd(t))throw Error(W(200));return sd(null,e,t,!0,r)};hr.hydrateRoot=function(e,t,r){if(!Fm(e))throw Error(W(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=Ub;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=Fb(t,null,e,1,r??null,s,!1,i,a),e[An]=t.current,Za(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new rd(t)};hr.render=function(e,t,r){if(!nd(t))throw Error(W(200));return sd(null,e,t,!1,r)};hr.unmountComponentAtNode=function(e){if(!nd(e))throw Error(W(40));return e._reactRootContainer?(vi(function(){sd(null,null,e,!1,function(){e._reactRootContainer=null,e[An]=null})}),!0):!1};hr.unstable_batchedUpdates=Am;hr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!nd(r))throw Error(W(200));if(e==null||e._reactInternals===void 0)throw Error(W(38));return sd(e,t,r,!1,n)};hr.version="18.3.1-next-f1338f8080-20240426";function Bb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bb)}catch(e){console.error(e)}}Bb(),Bx.exports=hr;var Jr=Bx.exports;const zb=Tx(Jr);var qb,Py=Jr;qb=Py.createRoot,Py.hydrateRoot;const NT=1,CT=1e6;let wh=0;function ET(){return wh=(wh+1)%Number.MAX_SAFE_INTEGER,wh.toString()}const xh=new Map,Ay=e=>{if(xh.has(e))return;const t=setTimeout(()=>{xh.delete(e),Ua({type:"REMOVE_TOAST",toastId:e})},CT);xh.set(e,t)},TT=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,NT)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Ay(r):e.toasts.forEach(n=>{Ay(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},qc=[];let Wc={toasts:[]};function Ua(e){Wc=TT(Wc,e),qc.forEach(t=>{t(Wc)})}function RT({...e}){const t=ET(),r=s=>Ua({type:"UPDATE_TOAST",toast:{...s,id:t}}),n=()=>Ua({type:"DISMISS_TOAST",toastId:t});return Ua({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||n()}}}),{id:t,dismiss:n,update:r}}function Vt(){const[e,t]=p.useState(Wc);return p.useEffect(()=>(qc.push(t),()=>{const r=qc.indexOf(t);r>-1&&qc.splice(r,1)}),[e]),{...e,toast:RT,dismiss:r=>Ua({type:"DISMISS_TOAST",toastId:r})}}function H(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Iy(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function id(...e){return t=>{let r=!1;const n=e.map(s=>{const i=Iy(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():Iy(e[s],null)}}}}function je(...e){return p.useCallback(id(...e),e)}function PT(e,t){const r=p.createContext(t),n=i=>{const{children:a,...l}=i,c=p.useMemo(()=>l,Object.values(l));return o.jsx(r.Provider,{value:c,children:a})};n.displayName=e+"Provider";function s(i){const a=p.useContext(r);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,s]}function Mt(e,t=[]){let r=[];function n(i,a){const l=p.createContext(a),c=r.length;r=[...r,a];const u=h=>{var x;const{scope:f,children:m,...b}=h,g=((x=f==null?void 0:f[e])==null?void 0:x[c])||l,y=p.useMemo(()=>b,Object.values(b));return o.jsx(g.Provider,{value:y,children:m})};u.displayName=i+"Provider";function d(h,f){var g;const m=((g=f==null?void 0:f[e])==null?void 0:g[c])||l,b=p.useContext(m);if(b)return b;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=r.map(a=>p.createContext(a));return function(l){const c=(l==null?void 0:l[e])||i;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,AT(s,...t)]}function AT(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}function yi(e){const t=OT(e),r=p.forwardRef((n,s)=>{const{children:i,...a}=n,l=p.Children.toArray(i),c=l.find(DT);if(c){const u=c.props.children,d=l.map(h=>h===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:h);return o.jsx(t,{...a,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,d):null})}return o.jsx(t,{...a,ref:s,children:i})});return r.displayName=`${e}.Slot`,r}var IT=yi("Slot");function OT(e){const t=p.forwardRef((r,n)=>{const{children:s,...i}=r;if(p.isValidElement(s)){const a=$T(s),l=LT(i,s.props);return s.type!==p.Fragment&&(l.ref=n?id(n,a):a),p.cloneElement(s,l)}return p.Children.count(s)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Wb=Symbol("radix.slottable");function MT(e){const t=({children:r})=>o.jsx(o.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=Wb,t}function DT(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Wb}function LT(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function $T(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Ml(e){const t=e+"CollectionProvider",[r,n]=Mt(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:y,children:x}=g,w=z.useRef(null),v=z.useRef(new Map).current;return o.jsx(s,{scope:y,itemMap:v,collectionRef:w,children:x})};a.displayName=t;const l=e+"CollectionSlot",c=yi(l),u=z.forwardRef((g,y)=>{const{scope:x,children:w}=g,v=i(l,x),_=je(y,v.collectionRef);return o.jsx(c,{ref:_,children:w})});u.displayName=l;const d=e+"CollectionItemSlot",h="data-radix-collection-item",f=yi(d),m=z.forwardRef((g,y)=>{const{scope:x,children:w,...v}=g,_=z.useRef(null),S=je(y,_),j=i(d,x);return z.useEffect(()=>(j.itemMap.set(_,{ref:_,...v}),()=>void j.itemMap.delete(_))),o.jsx(f,{[h]:"",ref:S,children:w})});m.displayName=d;function b(g){const y=i(e+"CollectionConsumer",g);return z.useCallback(()=>{const w=y.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((j,k)=>v.indexOf(j.ref.current)-v.indexOf(k.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:a,Slot:u,ItemSlot:m},b,n]}var FT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],le=FT.reduce((e,t)=>{const r=yi(`Primitive.${t}`),n=p.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Um(e,t){e&&Jr.flushSync(()=>e.dispatchEvent(t))}function st(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function UT(e,t=globalThis==null?void 0:globalThis.document){const r=st(e);p.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var BT="DismissableLayer",Wf="dismissableLayer.update",zT="dismissableLayer.pointerDownOutside",qT="dismissableLayer.focusOutside",Oy,Vb=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wo=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=e,u=p.useContext(Vb),[d,h]=p.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),b=je(t,k=>h(k)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(y),w=d?g.indexOf(d):-1,v=u.layersWithOutsidePointerEventsDisabled.size>0,_=w>=x,S=VT(k=>{const C=k.target,T=[...u.branches].some(A=>A.contains(C));!_||T||(s==null||s(k),a==null||a(k),k.defaultPrevented||l==null||l())},f),j=HT(k=>{const C=k.target;[...u.branches].some(A=>A.contains(C))||(i==null||i(k),a==null||a(k),k.defaultPrevented||l==null||l())},f);return UT(k=>{w===u.layers.size-1&&(n==null||n(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},f),p.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Oy=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),My(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Oy)}},[d,f,r,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),My())},[d,u]),p.useEffect(()=>{const k=()=>m({});return document.addEventListener(Wf,k),()=>document.removeEventListener(Wf,k)},[]),o.jsx(le.div,{...c,ref:b,style:{pointerEvents:v?_?"auto":"none":void 0,...e.style},onFocusCapture:H(e.onFocusCapture,j.onFocusCapture),onBlurCapture:H(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:H(e.onPointerDownCapture,S.onPointerDownCapture)})});Wo.displayName=BT;var WT="DismissableLayerBranch",Hb=p.forwardRef((e,t)=>{const r=p.useContext(Vb),n=p.useRef(null),s=je(t,n);return p.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),o.jsx(le.div,{...e,ref:s})});Hb.displayName=WT;function VT(e,t=globalThis==null?void 0:globalThis.document){const r=st(e),n=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){Kb(zT,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function HT(e,t=globalThis==null?void 0:globalThis.document){const r=st(e),n=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!n.current&&Kb(qT,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function My(){const e=new CustomEvent(Wf);document.dispatchEvent(e)}function Kb(e,t,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Um(s,i):s.dispatchEvent(i)}var KT=Wo,GT=Hb,it=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},YT="Portal",Dl=p.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,i]=p.useState(!1);it(()=>i(!0),[]);const a=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?zb.createPortal(o.jsx(le.div,{...n,ref:t}),a):null});Dl.displayName=YT;function QT(e,t){return p.useReducer((r,n)=>t[r][n]??r,e)}var Ct=e=>{const{present:t,children:r}=e,n=JT(t),s=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),i=je(n.ref,XT(s));return typeof r=="function"||n.isPresent?p.cloneElement(s,{ref:i}):null};Ct.displayName="Presence";function JT(e){const[t,r]=p.useState(),n=p.useRef(null),s=p.useRef(e),i=p.useRef("none"),a=e?"mounted":"unmounted",[l,c]=QT(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=mc(n.current);i.current=l==="mounted"?u:"none"},[l]),it(()=>{const u=n.current,d=s.current;if(d!==e){const f=i.current,m=mc(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),it(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=m=>{const g=mc(n.current).includes(m.animationName);if(m.target===t&&g&&(c("ANIMATION_END"),!s.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},f=m=>{m.target===t&&(i.current=mc(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function mc(e){return(e==null?void 0:e.animationName)||"none"}function XT(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var ZT=Yp[" useInsertionEffect ".trim().toString()]||it;function Cr({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,i,a]=e2({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:s;{const d=p.useRef(e!==void 0);p.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=p.useCallback(d=>{var h;if(l){const f=t2(d)?d(e):d;f!==e&&((h=a.current)==null||h.call(a,f))}else i(d)},[l,e,i,a]);return[c,u]}function e2({defaultProp:e,onChange:t}){const[r,n]=p.useState(e),s=p.useRef(r),i=p.useRef(t);return ZT(()=>{i.current=t},[t]),p.useEffect(()=>{var a;s.current!==r&&((a=i.current)==null||a.call(i,r),s.current=r)},[r,s]),[r,n,i]}function t2(e){return typeof e=="function"}var Gb=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),r2="VisuallyHidden",od=p.forwardRef((e,t)=>o.jsx(le.span,{...e,ref:t,style:{...Gb,...e.style}}));od.displayName=r2;var n2=od,Bm="ToastProvider",[zm,s2,i2]=Ml("Toast"),[Yb,e6]=Mt("Toast",[i2]),[o2,ad]=Yb(Bm),Qb=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=e,[l,c]=p.useState(null),[u,d]=p.useState(0),h=p.useRef(!1),f=p.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Bm}\`. Expected non-empty \`string\`.`),o.jsx(zm.Provider,{scope:t,children:o.jsx(o2,{scope:t,label:r,duration:n,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>d(m=>m+1),[]),onToastRemove:p.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:a})})};Qb.displayName=Bm;var Jb="ToastViewport",a2=["F8"],Vf="toast.viewportPause",Hf="toast.viewportResume",Xb=p.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=a2,label:s="Notifications ({hotkey})",...i}=e,a=ad(Jb,r),l=s2(r),c=p.useRef(null),u=p.useRef(null),d=p.useRef(null),h=p.useRef(null),f=je(t,h,a.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=a.toastCount>0;p.useEffect(()=>{const y=x=>{var v;n.length!==0&&n.every(_=>x[_]||x.code===_)&&((v=h.current)==null||v.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n]),p.useEffect(()=>{const y=c.current,x=h.current;if(b&&y&&x){const w=()=>{if(!a.isClosePausedRef.current){const j=new CustomEvent(Vf);x.dispatchEvent(j),a.isClosePausedRef.current=!0}},v=()=>{if(a.isClosePausedRef.current){const j=new CustomEvent(Hf);x.dispatchEvent(j),a.isClosePausedRef.current=!1}},_=j=>{!y.contains(j.relatedTarget)&&v()},S=()=>{y.contains(document.activeElement)||v()};return y.addEventListener("focusin",w),y.addEventListener("focusout",_),y.addEventListener("pointermove",w),y.addEventListener("pointerleave",S),window.addEventListener("blur",w),window.addEventListener("focus",v),()=>{y.removeEventListener("focusin",w),y.removeEventListener("focusout",_),y.removeEventListener("pointermove",w),y.removeEventListener("pointerleave",S),window.removeEventListener("blur",w),window.removeEventListener("focus",v)}}},[b,a.isClosePausedRef]);const g=p.useCallback(({tabbingDirection:y})=>{const w=l().map(v=>{const _=v.ref.current,S=[_,...x2(_)];return y==="forwards"?S:S.reverse()});return(y==="forwards"?w.reverse():w).flat()},[l]);return p.useEffect(()=>{const y=h.current;if(y){const x=w=>{var S,j,k;const v=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!v){const C=document.activeElement,T=w.shiftKey;if(w.target===y&&T){(S=u.current)==null||S.focus();return}const D=g({tabbingDirection:T?"backwards":"forwards"}),X=D.findIndex(I=>I===C);bh(D.slice(X+1))?w.preventDefault():T?(j=u.current)==null||j.focus():(k=d.current)==null||k.focus()}};return y.addEventListener("keydown",x),()=>y.removeEventListener("keydown",x)}},[l,g]),o.jsxs(GT,{ref:c,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&o.jsx(Kf,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});bh(y)}}),o.jsx(zm.Slot,{scope:r,children:o.jsx(le.ol,{tabIndex:-1,...i,ref:f})}),b&&o.jsx(Kf,{ref:d,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});bh(y)}})]})});Xb.displayName=Jb;var Zb="ToastFocusProxy",Kf=p.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=e,i=ad(Zb,r);return o.jsx(od,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&n()}})});Kf.displayName=Zb;var Ll="Toast",l2="toast.swipeStart",c2="toast.swipeMove",u2="toast.swipeCancel",d2="toast.swipeEnd",e_=p.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:i,...a}=e,[l,c]=Cr({prop:n,defaultProp:s??!0,onChange:i,caller:Ll});return o.jsx(Ct,{present:r||l,children:o.jsx(p2,{open:l,...a,ref:t,onClose:()=>c(!1),onPause:st(e.onPause),onResume:st(e.onResume),onSwipeStart:H(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:H(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:H(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:H(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});e_.displayName=Ll;var[h2,f2]=Yb(Ll,{onClose(){}}),p2=p.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...b}=e,g=ad(Ll,r),[y,x]=p.useState(null),w=je(t,I=>x(I)),v=p.useRef(null),_=p.useRef(null),S=s||g.duration,j=p.useRef(0),k=p.useRef(S),C=p.useRef(0),{onToastAdd:T,onToastRemove:A}=g,$=st(()=>{var ae;(y==null?void 0:y.contains(document.activeElement))&&((ae=g.viewport)==null||ae.focus()),a()}),D=p.useCallback(I=>{!I||I===1/0||(window.clearTimeout(C.current),j.current=new Date().getTime(),C.current=window.setTimeout($,I))},[$]);p.useEffect(()=>{const I=g.viewport;if(I){const ae=()=>{D(k.current),u==null||u()},M=()=>{const Z=new Date().getTime()-j.current;k.current=k.current-Z,window.clearTimeout(C.current),c==null||c()};return I.addEventListener(Vf,M),I.addEventListener(Hf,ae),()=>{I.removeEventListener(Vf,M),I.removeEventListener(Hf,ae)}}},[g.viewport,S,c,u,D]),p.useEffect(()=>{i&&!g.isClosePausedRef.current&&D(S)},[i,S,g.isClosePausedRef,D]),p.useEffect(()=>(T(),()=>A()),[T,A]);const X=p.useMemo(()=>y?a_(y):null,[y]);return g.viewport?o.jsxs(o.Fragment,{children:[X&&o.jsx(m2,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:X}),o.jsx(h2,{scope:r,onClose:$,children:Jr.createPortal(o.jsx(zm.ItemSlot,{scope:r,children:o.jsx(KT,{asChild:!0,onEscapeKeyDown:H(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||$(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(le.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...b,ref:w,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:H(e.onKeyDown,I=>{I.key==="Escape"&&(l==null||l(I.nativeEvent),I.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,$()))}),onPointerDown:H(e.onPointerDown,I=>{I.button===0&&(v.current={x:I.clientX,y:I.clientY})}),onPointerMove:H(e.onPointerMove,I=>{if(!v.current)return;const ae=I.clientX-v.current.x,M=I.clientY-v.current.y,Z=!!_.current,P=["left","right"].includes(g.swipeDirection),E=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,B=P?E(0,ae):0,ie=P?0:E(0,M),Q=I.pointerType==="touch"?10:2,me={x:B,y:ie},U={originalEvent:I,delta:me};Z?(_.current=me,gc(c2,h,U,{discrete:!1})):Dy(me,g.swipeDirection,Q)?(_.current=me,gc(l2,d,U,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(ae)>Q||Math.abs(M)>Q)&&(v.current=null)}),onPointerUp:H(e.onPointerUp,I=>{const ae=_.current,M=I.target;if(M.hasPointerCapture(I.pointerId)&&M.releasePointerCapture(I.pointerId),_.current=null,v.current=null,ae){const Z=I.currentTarget,P={originalEvent:I,delta:ae};Dy(ae,g.swipeDirection,g.swipeThreshold)?gc(d2,m,P,{discrete:!0}):gc(u2,f,P,{discrete:!0}),Z.addEventListener("click",E=>E.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),m2=e=>{const{__scopeToast:t,children:r,...n}=e,s=ad(Ll,t),[i,a]=p.useState(!1),[l,c]=p.useState(!1);return y2(()=>a(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(Dl,{asChild:!0,children:o.jsx(od,{...n,children:i&&o.jsxs(o.Fragment,{children:[s.label," ",r]})})})},g2="ToastTitle",t_=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return o.jsx(le.div,{...n,ref:t})});t_.displayName=g2;var v2="ToastDescription",r_=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return o.jsx(le.div,{...n,ref:t})});r_.displayName=v2;var n_="ToastAction",s_=p.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?o.jsx(o_,{altText:r,asChild:!0,children:o.jsx(qm,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${n_}\`. Expected non-empty \`string\`.`),null)});s_.displayName=n_;var i_="ToastClose",qm=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,s=f2(i_,r);return o.jsx(o_,{asChild:!0,children:o.jsx(le.button,{type:"button",...n,ref:t,onClick:H(e.onClick,s.onClose)})})});qm.displayName=i_;var o_=p.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...s}=e;return o.jsx(le.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:t})});function a_(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),w2(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=n.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...a_(n))}}),t}function gc(e,t,r,{discrete:n}){const s=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Um(s,i):s.dispatchEvent(i)}var Dy=(e,t,r=0)=>{const n=Math.abs(e.x),s=Math.abs(e.y),i=n>s;return t==="left"||t==="right"?i&&n>r:!i&&s>r};function y2(e=()=>{}){const t=st(e);it(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function w2(e){return e.nodeType===e.ELEMENT_NODE}function x2(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function bh(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var b2=Qb,l_=Xb,c_=e_,u_=t_,d_=r_,h_=s_,f_=qm;function p_(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=p_(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function m_(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=p_(e))&&(n&&(n+=" "),n+=t);return n}const Ly=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,$y=m_,ld=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return $y(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=t,a=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],h=i==null?void 0:i[u];if(d===null)return null;const f=Ly(d)||Ly(h);return s[u][f]}),l=r&&Object.entries(r).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(b=>{let[g,y]=b;return Array.isArray(y)?y.includes({...i,...l}[g]):{...i,...l}[g]===y})?[...u,h,f]:u},[]);return $y(e,a,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),g_=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var S2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:a,...l},c)=>p.createElement("svg",{ref:c,...S2,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:g_("lucide",s),...l},[...a.map(([u,d])=>p.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(e,t)=>{const r=p.forwardRef(({className:n,...s},i)=>p.createElement(j2,{ref:i,iconNode:t,className:g_(`lucide-${_2(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=ve("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=ve("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=ve("Beaker",[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=ve("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=ve("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=ve("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=ve("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=ve("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=ve("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=ve("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=ve("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=ve("FileStack",[["path",{d:"M21 7h-3a2 2 0 0 1-2-2V2",key:"9rb54x"}],["path",{d:"M21 6v6.5c0 .8-.7 1.5-1.5 1.5h-7c-.8 0-1.5-.7-1.5-1.5v-9c0-.8.7-1.5 1.5-1.5H17Z",key:"1059l0"}],["path",{d:"M7 8v8.8c0 .3.2.6.4.8.2.2.5.4.8.4H15",key:"16874u"}],["path",{d:"M3 12v8.8c0 .3.2.6.4.8.2.2.5.4.8.4H11",key:"k2ox98"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=ve("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=ve("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P2=ve("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=ve("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=ve("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=ve("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=ve("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=ve("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=ve("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=ve("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=ve("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=ve("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gf=ve("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=ve("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=ve("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=ve("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=ve("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=ve("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=ve("Shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=ve("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=ve("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=ve("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=ve("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=ve("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=ve("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=ve("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Km="-",V2=e=>{const t=K2(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:a=>{const l=a.split(Km);return l[0]===""&&l.length!==1&&l.shift(),S_(l,t)||H2(a)},getConflictingClassGroupIds:(a,l)=>{const c=r[a]||[];return l&&n[a]?[...c,...n[a]]:c}}},S_=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?S_(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(Km);return(a=t.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},qy=/^\[(.+)\]$/,H2=e=>{if(qy.test(e)){const t=qy.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},K2=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return Y2(Object.entries(e.classGroups),r).forEach(([i,a])=>{Jf(a,n,i,t)}),n},Jf=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:Wy(t,s);i.classGroupId=r;return}if(typeof s=="function"){if(G2(s)){Jf(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,a])=>{Jf(a,Wy(t,i),r,n)})})},Wy=(e,t)=>{let r=e;return t.split(Km).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},G2=e=>e.isThemeGetter,Y2=(e,t)=>t?e.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[t+a,l])):i);return[r,s]}):e,Q2=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(i,a)=>{r.set(i,a),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let a=r.get(i);if(a!==void 0)return a;if((a=n.get(i))!==void 0)return s(i,a),a},set(i,a){r.has(i)?r.set(i,a):s(i,a)}}},j_="!",J2=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],i=t.length,a=l=>{const c=[];let u=0,d=0,h;for(let y=0;y<l.length;y++){let x=l[y];if(u===0){if(x===s&&(n||l.slice(y,y+i)===t)){c.push(l.slice(d,y)),d=y+i;continue}if(x==="/"){h=y;continue}}x==="["?u++:x==="]"&&u--}const f=c.length===0?l:l.substring(d),m=f.startsWith(j_),b=m?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:b,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:a}):a},X2=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},Z2=e=>({cache:Q2(e.cacheSize),parseClassName:J2(e),...V2(e)}),eR=/\s+/,tR=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,i=[],a=e.trim().split(eR);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=r(u);let b=!!m,g=n(b?f.substring(0,m):f);if(!g){if(!b){l=u+(l.length>0?" "+l:l);continue}if(g=n(f),!g){l=u+(l.length>0?" "+l:l);continue}b=!1}const y=X2(d).join(":"),x=h?y+j_:y,w=x+g;if(i.includes(w))continue;i.push(w);const v=s(g,b);for(let _=0;_<v.length;++_){const S=v[_];i.push(x+S)}l=u+(l.length>0?" "+l:l)}return l};function rR(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=k_(t))&&(n&&(n+=" "),n+=r);return n}const k_=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=k_(e[n]))&&(r&&(r+=" "),r+=t);return r};function nR(e,...t){let r,n,s,i=a;function a(c){const u=t.reduce((d,h)=>h(d),e());return r=Z2(u),n=r.cache.get,s=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=tR(c,r);return s(c,d),d}return function(){return i(rR.apply(null,arguments))}}const Ve=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},N_=/^\[(?:([a-z-]+):)?(.+)\]$/i,sR=/^\d+\/\d+$/,iR=new Set(["px","full","screen"]),oR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,cR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,uR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wn=e=>po(e)||iR.has(e)||sR.test(e),Hn=e=>Ko(e,"length",yR),po=e=>!!e&&!Number.isNaN(Number(e)),Sh=e=>Ko(e,"number",po),va=e=>!!e&&Number.isInteger(Number(e)),dR=e=>e.endsWith("%")&&po(e.slice(0,-1)),Ce=e=>N_.test(e),Kn=e=>oR.test(e),hR=new Set(["length","size","percentage"]),fR=e=>Ko(e,hR,C_),pR=e=>Ko(e,"position",C_),mR=new Set(["image","url"]),gR=e=>Ko(e,mR,xR),vR=e=>Ko(e,"",wR),ya=()=>!0,Ko=(e,t,r)=>{const n=N_.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},yR=e=>aR.test(e)&&!lR.test(e),C_=()=>!1,wR=e=>cR.test(e),xR=e=>uR.test(e),bR=()=>{const e=Ve("colors"),t=Ve("spacing"),r=Ve("blur"),n=Ve("brightness"),s=Ve("borderColor"),i=Ve("borderRadius"),a=Ve("borderSpacing"),l=Ve("borderWidth"),c=Ve("contrast"),u=Ve("grayscale"),d=Ve("hueRotate"),h=Ve("invert"),f=Ve("gap"),m=Ve("gradientColorStops"),b=Ve("gradientColorStopPositions"),g=Ve("inset"),y=Ve("margin"),x=Ve("opacity"),w=Ve("padding"),v=Ve("saturate"),_=Ve("scale"),S=Ve("sepia"),j=Ve("skew"),k=Ve("space"),C=Ve("translate"),T=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",Ce,t],D=()=>[Ce,t],X=()=>["",wn,Hn],I=()=>["auto",po,Ce],ae=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],M=()=>["solid","dashed","dotted","double","none"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>["start","end","center","between","around","evenly","stretch"],E=()=>["","0",Ce],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ie=()=>[po,Ce];return{cacheSize:500,separator:":",theme:{colors:[ya],spacing:[wn,Hn],blur:["none","",Kn,Ce],brightness:ie(),borderColor:[e],borderRadius:["none","","full",Kn,Ce],borderSpacing:D(),borderWidth:X(),contrast:ie(),grayscale:E(),hueRotate:ie(),invert:E(),gap:D(),gradientColorStops:[e],gradientColorStopPositions:[dR,Hn],inset:$(),margin:$(),opacity:ie(),padding:D(),saturate:ie(),scale:ie(),sepia:E(),skew:ie(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",Ce]}],container:["container"],columns:[{columns:[Kn]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ae(),Ce]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",va,Ce]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ce]}],grow:[{grow:E()}],shrink:[{shrink:E()}],order:[{order:["first","last","none",va,Ce]}],"grid-cols":[{"grid-cols":[ya]}],"col-start-end":[{col:["auto",{span:["full",va,Ce]},Ce]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[ya]}],"row-start-end":[{row:["auto",{span:[va,Ce]},Ce]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ce]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ce]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...P()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...P(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...P(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ce,t]}],"min-w":[{"min-w":[Ce,t,"min","max","fit"]}],"max-w":[{"max-w":[Ce,t,"none","full","min","max","fit","prose",{screen:[Kn]},Kn]}],h:[{h:[Ce,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ce,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ce,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ce,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Kn,Hn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Sh]}],"font-family":[{font:[ya]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ce]}],"line-clamp":[{"line-clamp":["none",po,Sh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",wn,Ce]}],"list-image":[{"list-image":["none",Ce]}],"list-style-type":[{list:["none","disc","decimal",Ce]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...M(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",wn,Hn]}],"underline-offset":[{"underline-offset":["auto",wn,Ce]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ae(),pR]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",fR]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},gR]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...M(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:M()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...M()]}],"outline-offset":[{"outline-offset":[wn,Ce]}],"outline-w":[{outline:[wn,Hn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:X()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[wn,Hn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Kn,vR]}],"shadow-color":[{shadow:[ya]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...Z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Kn,Ce]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[v]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ce]}],duration:[{duration:ie()}],ease:[{ease:["linear","in","out","in-out",Ce]}],delay:[{delay:ie()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ce]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[va,Ce]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ce]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ce]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ce]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[wn,Hn,Sh]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},_R=nR(bR);function Y(...e){return _R(m_(e))}const SR=b2,E_=p.forwardRef(({className:e,...t},r)=>o.jsx(l_,{ref:r,className:Y("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));E_.displayName=l_.displayName;const jR=ld("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),T_=p.forwardRef(({className:e,variant:t,...r},n)=>o.jsx(c_,{ref:n,className:Y(jR({variant:t}),e),...r}));T_.displayName=c_.displayName;const kR=p.forwardRef(({className:e,...t},r)=>o.jsx(h_,{ref:r,className:Y("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));kR.displayName=h_.displayName;const R_=p.forwardRef(({className:e,...t},r)=>o.jsx(f_,{ref:r,className:Y("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:o.jsx(zt,{className:"h-4 w-4"})}));R_.displayName=f_.displayName;const P_=p.forwardRef(({className:e,...t},r)=>o.jsx(u_,{ref:r,className:Y("text-sm font-semibold",e),...t}));P_.displayName=u_.displayName;const A_=p.forwardRef(({className:e,...t},r)=>o.jsx(d_,{ref:r,className:Y("text-sm opacity-90",e),...t}));A_.displayName=d_.displayName;function NR(){const{toasts:e}=Vt();return o.jsxs(SR,{children:[e.map(function({id:t,title:r,description:n,action:s,...i}){return o.jsxs(T_,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[r&&o.jsx(P_,{children:r}),n&&o.jsx(A_,{children:n})]}),s,o.jsx(R_,{})]},t)}),o.jsx(E_,{})]})}var Vy=["light","dark"],CR="(prefers-color-scheme: dark)",ER=p.createContext(void 0),TR={setTheme:e=>{},themes:[]},RR=()=>{var e;return(e=p.useContext(ER))!=null?e:TR};p.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:a,attrs:l,nonce:c})=>{let u=i==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=s?Vy.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(b,g=!1,y=!0)=>{let x=a?a[b]:b,w=g?b+"|| ''":`'${x}'`,v="";return s&&y&&!g&&Vy.includes(b)&&(v+=`d.style.colorScheme = '${b}';`),r==="class"?g||x?v+=`c.add(${w})`:v+="null":x&&(v+=`d[s](n,${w})`),v},m=e?`!function(){${d}${f(e)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${CR}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${f(a?"x[e]":"e",!0)}}${u?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${f(a?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var PR=e=>{switch(e){case"success":return OR;case"info":return DR;case"warning":return MR;case"error":return LR;default:return null}},AR=Array(12).fill(0),IR=({visible:e,className:t})=>z.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},z.createElement("div",{className:"sonner-spinner"},AR.map((r,n)=>z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),OR=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),MR=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),DR=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),LR=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),$R=z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),FR=()=>{let[e,t]=z.useState(document.hidden);return z.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},Xf=1,UR=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Xf++,i=this.toasts.find(l=>l.id===s),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:a,title:r}):l):this.addToast({title:r,...n,dismissible:a,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),s=r!==void 0,i,a=n.then(async c=>{if(i=["resolve",c],z.isValidElement(c))s=!1,this.create({id:r,type:"default",message:c});else if(zR(c)&&!c.ok){s=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:d})}else if(t.success!==void 0){s=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){s=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>a.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||Xf++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Yt=new UR,BR=(e,t)=>{let r=(t==null?void 0:t.id)||Xf++;return Yt.addToast({title:e,...t,id:r}),r},zR=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",qR=BR,WR=()=>Yt.toasts,VR=()=>Yt.getActiveToasts();Object.assign(qR,{success:Yt.success,info:Yt.info,warning:Yt.warning,error:Yt.error,custom:Yt.custom,message:Yt.message,promise:Yt.promise,dismiss:Yt.dismiss,loading:Yt.loading},{getHistory:WR,getToasts:VR});function HR(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}HR(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function vc(e){return e.label!==void 0}var KR=3,GR="32px",YR="16px",Hy=4e3,QR=356,JR=14,XR=20,ZR=200;function Ar(...e){return e.filter(Boolean).join(" ")}function eP(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var tP=e=>{var t,r,n,s,i,a,l,c,u,d,h;let{invert:f,toast:m,unstyled:b,interacting:g,setHeights:y,visibleToasts:x,heights:w,index:v,toasts:_,expanded:S,removeToast:j,defaultRichColors:k,closeButton:C,style:T,cancelButtonStyle:A,actionButtonStyle:$,className:D="",descriptionClassName:X="",duration:I,position:ae,gap:M,loadingIcon:Z,expandByDefault:P,classNames:E,icons:B,closeButtonAriaLabel:ie="Close toast",pauseWhenPageIsHidden:Q}=e,[me,U]=z.useState(null),[de,ge]=z.useState(null),[L,ue]=z.useState(!1),[_e,V]=z.useState(!1),[te,re]=z.useState(!1),[Ne,Se]=z.useState(!1),[ot,Ie]=z.useState(!1),[yt,en]=z.useState(0),[rr,ia]=z.useState(0),Bn=z.useRef(m.duration||I||Hy),Wl=z.useRef(null),tn=z.useRef(null),Vl=v===0,Hl=v+1<=x,at=m.type,Tr=m.dismissible!==!1,oa=m.className||"",Rr=m.descriptionClassName||"",yn=z.useMemo(()=>w.findIndex(q=>q.toastId===m.id)||0,[w,m.id]),Ii=z.useMemo(()=>{var q;return(q=m.closeButton)!=null?q:C},[m.closeButton,C]),Kl=z.useMemo(()=>m.duration||I||Hy,[m.duration,I]),aa=z.useRef(0),zn=z.useRef(0),Gl=z.useRef(0),qn=z.useRef(null),[zd,qd]=ae.split("-"),Yl=z.useMemo(()=>w.reduce((q,G,J)=>J>=yn?q:q+G.height,0),[w,yn]),Ql=FR(),Wd=m.invert||f,la=at==="loading";zn.current=z.useMemo(()=>yn*M+Yl,[yn,Yl]),z.useEffect(()=>{Bn.current=Kl},[Kl]),z.useEffect(()=>{ue(!0)},[]),z.useEffect(()=>{let q=tn.current;if(q){let G=q.getBoundingClientRect().height;return ia(G),y(J=>[{toastId:m.id,height:G,position:m.position},...J]),()=>y(J=>J.filter(fe=>fe.toastId!==m.id))}},[y,m.id]),z.useLayoutEffect(()=>{if(!L)return;let q=tn.current,G=q.style.height;q.style.height="auto";let J=q.getBoundingClientRect().height;q.style.height=G,ia(J),y(fe=>fe.find(ne=>ne.toastId===m.id)?fe.map(ne=>ne.toastId===m.id?{...ne,height:J}:ne):[{toastId:m.id,height:J,position:m.position},...fe])},[L,m.title,m.description,y,m.id]);let F=z.useCallback(()=>{V(!0),en(zn.current),y(q=>q.filter(G=>G.toastId!==m.id)),setTimeout(()=>{j(m)},ZR)},[m,j,y,zn]);z.useEffect(()=>{if(m.promise&&at==="loading"||m.duration===1/0||m.type==="loading")return;let q;return S||g||Q&&Ql?(()=>{if(Gl.current<aa.current){let G=new Date().getTime()-aa.current;Bn.current=Bn.current-G}Gl.current=new Date().getTime()})():Bn.current!==1/0&&(aa.current=new Date().getTime(),q=setTimeout(()=>{var G;(G=m.onAutoClose)==null||G.call(m,m),F()},Bn.current)),()=>clearTimeout(q)},[S,g,m,at,Q,Ql,F]),z.useEffect(()=>{m.delete&&F()},[F,m.delete]);function K(){var q,G,J;return B!=null&&B.loading?z.createElement("div",{className:Ar(E==null?void 0:E.loader,(q=m==null?void 0:m.classNames)==null?void 0:q.loader,"sonner-loader"),"data-visible":at==="loading"},B.loading):Z?z.createElement("div",{className:Ar(E==null?void 0:E.loader,(G=m==null?void 0:m.classNames)==null?void 0:G.loader,"sonner-loader"),"data-visible":at==="loading"},Z):z.createElement(IR,{className:Ar(E==null?void 0:E.loader,(J=m==null?void 0:m.classNames)==null?void 0:J.loader),visible:at==="loading"})}return z.createElement("li",{tabIndex:0,ref:tn,className:Ar(D,oa,E==null?void 0:E.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,E==null?void 0:E.default,E==null?void 0:E[at],(r=m==null?void 0:m.classNames)==null?void 0:r[at]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:k,"data-styled":!(m.jsx||m.unstyled||b),"data-mounted":L,"data-promise":!!m.promise,"data-swiped":ot,"data-removed":_e,"data-visible":Hl,"data-y-position":zd,"data-x-position":qd,"data-index":v,"data-front":Vl,"data-swiping":te,"data-dismissible":Tr,"data-type":at,"data-invert":Wd,"data-swipe-out":Ne,"data-swipe-direction":de,"data-expanded":!!(S||P&&L),style:{"--index":v,"--toasts-before":v,"--z-index":_.length-v,"--offset":`${_e?yt:zn.current}px`,"--initial-height":P?"auto":`${rr}px`,...T,...m.style},onDragEnd:()=>{re(!1),U(null),qn.current=null},onPointerDown:q=>{la||!Tr||(Wl.current=new Date,en(zn.current),q.target.setPointerCapture(q.pointerId),q.target.tagName!=="BUTTON"&&(re(!0),qn.current={x:q.clientX,y:q.clientY}))},onPointerUp:()=>{var q,G,J,fe;if(Ne||!Tr)return;qn.current=null;let ne=Number(((q=tn.current)==null?void 0:q.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ke=Number(((G=tn.current)==null?void 0:G.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ze=new Date().getTime()-((J=Wl.current)==null?void 0:J.getTime()),Qe=me==="x"?ne:ke,pr=Math.abs(Qe)/ze;if(Math.abs(Qe)>=XR||pr>.11){en(zn.current),(fe=m.onDismiss)==null||fe.call(m,m),ge(me==="x"?ne>0?"right":"left":ke>0?"down":"up"),F(),Se(!0),Ie(!1);return}re(!1),U(null)},onPointerMove:q=>{var G,J,fe,ne;if(!qn.current||!Tr||((G=window.getSelection())==null?void 0:G.toString().length)>0)return;let ke=q.clientY-qn.current.y,ze=q.clientX-qn.current.x,Qe=(J=e.swipeDirections)!=null?J:eP(ae);!me&&(Math.abs(ze)>1||Math.abs(ke)>1)&&U(Math.abs(ze)>Math.abs(ke)?"x":"y");let pr={x:0,y:0};me==="y"?(Qe.includes("top")||Qe.includes("bottom"))&&(Qe.includes("top")&&ke<0||Qe.includes("bottom")&&ke>0)&&(pr.y=ke):me==="x"&&(Qe.includes("left")||Qe.includes("right"))&&(Qe.includes("left")&&ze<0||Qe.includes("right")&&ze>0)&&(pr.x=ze),(Math.abs(pr.x)>0||Math.abs(pr.y)>0)&&Ie(!0),(fe=tn.current)==null||fe.style.setProperty("--swipe-amount-x",`${pr.x}px`),(ne=tn.current)==null||ne.style.setProperty("--swipe-amount-y",`${pr.y}px`)}},Ii&&!m.jsx?z.createElement("button",{"aria-label":ie,"data-disabled":la,"data-close-button":!0,onClick:la||!Tr?()=>{}:()=>{var q;F(),(q=m.onDismiss)==null||q.call(m,m)},className:Ar(E==null?void 0:E.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=B==null?void 0:B.close)!=null?i:$R):null,m.jsx||p.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:z.createElement(z.Fragment,null,at||m.icon||m.promise?z.createElement("div",{"data-icon":"",className:Ar(E==null?void 0:E.icon,(a=m==null?void 0:m.classNames)==null?void 0:a.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||K():null,m.type!=="loading"?m.icon||(B==null?void 0:B[at])||PR(at):null):null,z.createElement("div",{"data-content":"",className:Ar(E==null?void 0:E.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},z.createElement("div",{"data-title":"",className:Ar(E==null?void 0:E.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?z.createElement("div",{"data-description":"",className:Ar(X,Rr,E==null?void 0:E.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),p.isValidElement(m.cancel)?m.cancel:m.cancel&&vc(m.cancel)?z.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||A,onClick:q=>{var G,J;vc(m.cancel)&&Tr&&((J=(G=m.cancel).onClick)==null||J.call(G,q),F())},className:Ar(E==null?void 0:E.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,p.isValidElement(m.action)?m.action:m.action&&vc(m.action)?z.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||$,onClick:q=>{var G,J;vc(m.action)&&((J=(G=m.action).onClick)==null||J.call(G,q),!q.defaultPrevented&&F())},className:Ar(E==null?void 0:E.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function Ky(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function rP(e,t){let r={};return[e,t].forEach((n,s)=>{let i=s===1,a=i?"--mobile-offset":"--offset",l=i?YR:GR;function c(u){["top","right","bottom","left"].forEach(d=>{r[`${a}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${a}-${u}`]=l:r[`${a}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(l)}),r}var nP=p.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:a,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:b=KR,toastOptions:g,dir:y=Ky(),gap:x=JR,loadingIcon:w,icons:v,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:S}=e,[j,k]=z.useState([]),C=z.useMemo(()=>Array.from(new Set([n].concat(j.filter(Q=>Q.position).map(Q=>Q.position)))),[j,n]),[T,A]=z.useState([]),[$,D]=z.useState(!1),[X,I]=z.useState(!1),[ae,M]=z.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Z=z.useRef(null),P=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=z.useRef(null),B=z.useRef(!1),ie=z.useCallback(Q=>{k(me=>{var U;return(U=me.find(de=>de.id===Q.id))!=null&&U.delete||Yt.dismiss(Q.id),me.filter(({id:de})=>de!==Q.id)})},[]);return z.useEffect(()=>Yt.subscribe(Q=>{if(Q.dismiss){k(me=>me.map(U=>U.id===Q.id?{...U,delete:!0}:U));return}setTimeout(()=>{zb.flushSync(()=>{k(me=>{let U=me.findIndex(de=>de.id===Q.id);return U!==-1?[...me.slice(0,U),{...me[U],...Q},...me.slice(U+1)]:[Q,...me]})})})}),[]),z.useEffect(()=>{if(d!=="system"){M(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?M("dark"):M("light")),typeof window>"u")return;let Q=window.matchMedia("(prefers-color-scheme: dark)");try{Q.addEventListener("change",({matches:me})=>{M(me?"dark":"light")})}catch{Q.addListener(({matches:U})=>{try{M(U?"dark":"light")}catch(de){console.error(de)}})}},[d]),z.useEffect(()=>{j.length<=1&&D(!1)},[j]),z.useEffect(()=>{let Q=me=>{var U,de;s.every(ge=>me[ge]||me.code===ge)&&(D(!0),(U=Z.current)==null||U.focus()),me.code==="Escape"&&(document.activeElement===Z.current||(de=Z.current)!=null&&de.contains(document.activeElement))&&D(!1)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[s]),z.useEffect(()=>{if(Z.current)return()=>{E.current&&(E.current.focus({preventScroll:!0}),E.current=null,B.current=!1)}},[Z.current]),z.createElement("section",{ref:t,"aria-label":`${_} ${P}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((Q,me)=>{var U;let[de,ge]=Q.split("-");return j.length?z.createElement("ol",{key:Q,dir:y==="auto"?Ky():y,tabIndex:-1,ref:Z,className:l,"data-sonner-toaster":!0,"data-theme":ae,"data-y-position":de,"data-lifted":$&&j.length>1&&!i,"data-x-position":ge,style:{"--front-toast-height":`${((U=T[0])==null?void 0:U.height)||0}px`,"--width":`${QR}px`,"--gap":`${x}px`,...m,...rP(c,u)},onBlur:L=>{B.current&&!L.currentTarget.contains(L.relatedTarget)&&(B.current=!1,E.current&&(E.current.focus({preventScroll:!0}),E.current=null))},onFocus:L=>{L.target instanceof HTMLElement&&L.target.dataset.dismissible==="false"||B.current||(B.current=!0,E.current=L.relatedTarget)},onMouseEnter:()=>D(!0),onMouseMove:()=>D(!0),onMouseLeave:()=>{X||D(!1)},onDragEnd:()=>D(!1),onPointerDown:L=>{L.target instanceof HTMLElement&&L.target.dataset.dismissible==="false"||I(!0)},onPointerUp:()=>I(!1)},j.filter(L=>!L.position&&me===0||L.position===Q).map((L,ue)=>{var _e,V;return z.createElement(tP,{key:L.id,icons:v,index:ue,toast:L,defaultRichColors:h,duration:(_e=g==null?void 0:g.duration)!=null?_e:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:b,closeButton:(V=g==null?void 0:g.closeButton)!=null?V:a,interacting:X,position:Q,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:ie,toasts:j.filter(te=>te.position==L.position),heights:T.filter(te=>te.position==L.position),setHeights:A,expandByDefault:i,gap:x,loadingIcon:w,expanded:$,pauseWhenPageIsHidden:S,swipeDirections:e.swipeDirections})})):null}))});const sP=({...e})=>{const{theme:t="system"}=RR();return o.jsx(nP,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var iP=Yp[" useId ".trim().toString()]||(()=>{}),oP=0;function Sr(e){const[t,r]=p.useState(iP());return it(()=>{e||r(n=>n??String(oP++))},[e]),e||(t?`radix-${t}`:"")}const aP=["top","right","bottom","left"],Ps=Math.min,ir=Math.max,bu=Math.round,yc=Math.floor,fn=e=>({x:e,y:e}),lP={left:"right",right:"left",bottom:"top",top:"bottom"},cP={start:"end",end:"start"};function Zf(e,t,r){return ir(e,Ps(t,r))}function Dn(e,t){return typeof e=="function"?e(t):e}function Ln(e){return e.split("-")[0]}function Go(e){return e.split("-")[1]}function Gm(e){return e==="x"?"y":"x"}function Ym(e){return e==="y"?"height":"width"}const uP=new Set(["top","bottom"]);function un(e){return uP.has(Ln(e))?"y":"x"}function Qm(e){return Gm(un(e))}function dP(e,t,r){r===void 0&&(r=!1);const n=Go(e),s=Qm(e),i=Ym(s);let a=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=_u(a)),[a,_u(a)]}function hP(e){const t=_u(e);return[ep(e),t,ep(t)]}function ep(e){return e.replace(/start|end/g,t=>cP[t])}const Gy=["left","right"],Yy=["right","left"],fP=["top","bottom"],pP=["bottom","top"];function mP(e,t,r){switch(e){case"top":case"bottom":return r?t?Yy:Gy:t?Gy:Yy;case"left":case"right":return t?fP:pP;default:return[]}}function gP(e,t,r,n){const s=Go(e);let i=mP(Ln(e),r==="start",n);return s&&(i=i.map(a=>a+"-"+s),t&&(i=i.concat(i.map(ep)))),i}function _u(e){return e.replace(/left|right|bottom|top/g,t=>lP[t])}function vP(e){return{top:0,right:0,bottom:0,left:0,...e}}function I_(e){return typeof e!="number"?vP(e):{top:e,right:e,bottom:e,left:e}}function Su(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function Qy(e,t,r){let{reference:n,floating:s}=e;const i=un(t),a=Qm(t),l=Ym(a),c=Ln(t),u=i==="y",d=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,f=n[l]/2-s[l]/2;let m;switch(c){case"top":m={x:d,y:n.y-s.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:h};break;case"left":m={x:n.x-s.width,y:h};break;default:m={x:n.x,y:n.y}}switch(Go(t)){case"start":m[a]-=f*(r&&u?-1:1);break;case"end":m[a]+=f*(r&&u?-1:1);break}return m}const yP=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:a}=r,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:h}=Qy(u,n,c),f=n,m={},b=0;for(let g=0;g<l.length;g++){const{name:y,fn:x}=l[g],{x:w,y:v,data:_,reset:S}=await x({x:d,y:h,initialPlacement:n,placement:f,strategy:s,middlewareData:m,rects:u,platform:a,elements:{reference:e,floating:t}});d=w??d,h=v??h,m={...m,[y]:{...m[y],..._}},S&&b<=50&&(b++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(u=S.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:d,y:h}=Qy(u,f,c)),g=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function ll(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:i,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=Dn(t,e),b=I_(m),y=l[f?h==="floating"?"reference":"floating":h],x=Su(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(y)))==null||r?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),w=h==="floating"?{x:n,y:s,width:a.floating.width,height:a.floating.height}:a.reference,v=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),_=await(i.isElement==null?void 0:i.isElement(v))?await(i.getScale==null?void 0:i.getScale(v))||{x:1,y:1}:{x:1,y:1},S=Su(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:v,strategy:c}):w);return{top:(x.top-S.top+b.top)/_.y,bottom:(S.bottom-x.bottom+b.bottom)/_.y,left:(x.left-S.left+b.left)/_.x,right:(S.right-x.right+b.right)/_.x}}const wP=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=Dn(e,t)||{};if(u==null)return{};const h=I_(d),f={x:r,y:n},m=Qm(s),b=Ym(m),g=await a.getDimensions(u),y=m==="y",x=y?"top":"left",w=y?"bottom":"right",v=y?"clientHeight":"clientWidth",_=i.reference[b]+i.reference[m]-f[m]-i.floating[b],S=f[m]-i.reference[m],j=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let k=j?j[v]:0;(!k||!await(a.isElement==null?void 0:a.isElement(j)))&&(k=l.floating[v]||i.floating[b]);const C=_/2-S/2,T=k/2-g[b]/2-1,A=Ps(h[x],T),$=Ps(h[w],T),D=A,X=k-g[b]-$,I=k/2-g[b]/2+C,ae=Zf(D,I,X),M=!c.arrow&&Go(s)!=null&&I!==ae&&i.reference[b]/2-(I<D?A:$)-g[b]/2<0,Z=M?I<D?I-D:I-X:0;return{[m]:f[m]+Z,data:{[m]:ae,centerOffset:I-ae-Z,...M&&{alignmentOffset:Z}},reset:M}}}),xP=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:g=!0,...y}=Dn(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const x=Ln(s),w=un(l),v=Ln(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=f||(v||!g?[_u(l)]:hP(l)),j=b!=="none";!f&&j&&S.push(...gP(l,g,b,_));const k=[l,...S],C=await ll(t,y),T=[];let A=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&T.push(C[x]),h){const I=dP(s,a,_);T.push(C[I[0]],C[I[1]])}if(A=[...A,{placement:s,overflows:T}],!T.every(I=>I<=0)){var $,D;const I=((($=i.flip)==null?void 0:$.index)||0)+1,ae=k[I];if(ae&&(!(h==="alignment"?w!==un(ae):!1)||A.every(P=>P.overflows[0]>0&&un(P.placement)===w)))return{data:{index:I,overflows:A},reset:{placement:ae}};let M=(D=A.filter(Z=>Z.overflows[0]<=0).sort((Z,P)=>Z.overflows[1]-P.overflows[1])[0])==null?void 0:D.placement;if(!M)switch(m){case"bestFit":{var X;const Z=(X=A.filter(P=>{if(j){const E=un(P.placement);return E===w||E==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(E=>E>0).reduce((E,B)=>E+B,0)]).sort((P,E)=>P[1]-E[1])[0])==null?void 0:X[0];Z&&(M=Z);break}case"initialPlacement":M=l;break}if(s!==M)return{reset:{placement:M}}}return{}}}};function Jy(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Xy(e){return aP.some(t=>e[t]>=0)}const bP=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=Dn(e,t);switch(n){case"referenceHidden":{const i=await ll(t,{...s,elementContext:"reference"}),a=Jy(i,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:Xy(a)}}}case"escaped":{const i=await ll(t,{...s,altBoundary:!0}),a=Jy(i,r.floating);return{data:{escapedOffsets:a,escaped:Xy(a)}}}default:return{}}}}},O_=new Set(["left","top"]);async function _P(e,t){const{placement:r,platform:n,elements:s}=e,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),a=Ln(r),l=Go(r),c=un(r)==="y",u=O_.has(a)?-1:1,d=i&&c?-1:1,h=Dn(t,e);let{mainAxis:f,crossAxis:m,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof b=="number"&&(m=l==="end"?b*-1:b),c?{x:m*d,y:f*u}:{x:f*u,y:m*d}}const SP=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:i,placement:a,middlewareData:l}=t,c=await _P(t,e);return a===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},jP=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:y=>{let{x,y:w}=y;return{x,y:w}}},...c}=Dn(e,t),u={x:r,y:n},d=await ll(t,c),h=un(Ln(s)),f=Gm(h);let m=u[f],b=u[h];if(i){const y=f==="y"?"top":"left",x=f==="y"?"bottom":"right",w=m+d[y],v=m-d[x];m=Zf(w,m,v)}if(a){const y=h==="y"?"top":"left",x=h==="y"?"bottom":"right",w=b+d[y],v=b-d[x];b=Zf(w,b,v)}const g=l.fn({...t,[f]:m,[h]:b});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[f]:i,[h]:a}}}}}},kP=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:i,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Dn(e,t),d={x:r,y:n},h=un(s),f=Gm(h);let m=d[f],b=d[h];const g=Dn(l,t),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const v=f==="y"?"height":"width",_=i.reference[f]-i.floating[v]+y.mainAxis,S=i.reference[f]+i.reference[v]-y.mainAxis;m<_?m=_:m>S&&(m=S)}if(u){var x,w;const v=f==="y"?"width":"height",_=O_.has(Ln(s)),S=i.reference[h]-i.floating[v]+(_&&((x=a.offset)==null?void 0:x[h])||0)+(_?0:y.crossAxis),j=i.reference[h]+i.reference[v]+(_?0:((w=a.offset)==null?void 0:w[h])||0)-(_?y.crossAxis:0);b<S?b=S:b>j&&(b=j)}return{[f]:m,[h]:b}}}},NP=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:i,platform:a,elements:l}=t,{apply:c=()=>{},...u}=Dn(e,t),d=await ll(t,u),h=Ln(s),f=Go(s),m=un(s)==="y",{width:b,height:g}=i.floating;let y,x;h==="top"||h==="bottom"?(y=h,x=f===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(x=h,y=f==="end"?"top":"bottom");const w=g-d.top-d.bottom,v=b-d.left-d.right,_=Ps(g-d[y],w),S=Ps(b-d[x],v),j=!t.middlewareData.shift;let k=_,C=S;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(C=v),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(k=w),j&&!f){const A=ir(d.left,0),$=ir(d.right,0),D=ir(d.top,0),X=ir(d.bottom,0);m?C=b-2*(A!==0||$!==0?A+$:ir(d.left,d.right)):k=g-2*(D!==0||X!==0?D+X:ir(d.top,d.bottom))}await c({...t,availableWidth:C,availableHeight:k});const T=await a.getDimensions(l.floating);return b!==T.width||g!==T.height?{reset:{rects:!0}}:{}}}};function pd(){return typeof window<"u"}function Yo(e){return M_(e)?(e.nodeName||"").toLowerCase():"#document"}function ur(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function gn(e){var t;return(t=(M_(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function M_(e){return pd()?e instanceof Node||e instanceof ur(e).Node:!1}function Hr(e){return pd()?e instanceof Element||e instanceof ur(e).Element:!1}function pn(e){return pd()?e instanceof HTMLElement||e instanceof ur(e).HTMLElement:!1}function Zy(e){return!pd()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ur(e).ShadowRoot}const CP=new Set(["inline","contents"]);function $l(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Kr(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!CP.has(s)}const EP=new Set(["table","td","th"]);function TP(e){return EP.has(Yo(e))}const RP=[":popover-open",":modal"];function md(e){return RP.some(t=>{try{return e.matches(t)}catch{return!1}})}const PP=["transform","translate","scale","rotate","perspective"],AP=["transform","translate","scale","rotate","perspective","filter"],IP=["paint","layout","strict","content"];function Jm(e){const t=Xm(),r=Hr(e)?Kr(e):e;return PP.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||AP.some(n=>(r.willChange||"").includes(n))||IP.some(n=>(r.contain||"").includes(n))}function OP(e){let t=As(e);for(;pn(t)&&!Lo(t);){if(Jm(t))return t;if(md(t))return null;t=As(t)}return null}function Xm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const MP=new Set(["html","body","#document"]);function Lo(e){return MP.has(Yo(e))}function Kr(e){return ur(e).getComputedStyle(e)}function gd(e){return Hr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function As(e){if(Yo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Zy(e)&&e.host||gn(e);return Zy(t)?t.host:t}function D_(e){const t=As(e);return Lo(t)?e.ownerDocument?e.ownerDocument.body:e.body:pn(t)&&$l(t)?t:D_(t)}function cl(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=D_(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),a=ur(s);if(i){const l=tp(a);return t.concat(a,a.visualViewport||[],$l(s)?s:[],l&&r?cl(l):[])}return t.concat(s,cl(s,[],r))}function tp(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function L_(e){const t=Kr(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=pn(e),i=s?e.offsetWidth:r,a=s?e.offsetHeight:n,l=bu(r)!==i||bu(n)!==a;return l&&(r=i,n=a),{width:r,height:n,$:l}}function Zm(e){return Hr(e)?e:e.contextElement}function mo(e){const t=Zm(e);if(!pn(t))return fn(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:i}=L_(t);let a=(i?bu(r.width):r.width)/n,l=(i?bu(r.height):r.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const DP=fn(0);function $_(e){const t=ur(e);return!Xm()||!t.visualViewport?DP:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function LP(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==ur(e)?!1:t}function wi(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),i=Zm(e);let a=fn(1);t&&(n?Hr(n)&&(a=mo(n)):a=mo(e));const l=LP(i,r,n)?$_(i):fn(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,d=s.width/a.x,h=s.height/a.y;if(i){const f=ur(i),m=n&&Hr(n)?ur(n):n;let b=f,g=tp(b);for(;g&&n&&m!==b;){const y=mo(g),x=g.getBoundingClientRect(),w=Kr(g),v=x.left+(g.clientLeft+parseFloat(w.paddingLeft))*y.x,_=x.top+(g.clientTop+parseFloat(w.paddingTop))*y.y;c*=y.x,u*=y.y,d*=y.x,h*=y.y,c+=v,u+=_,b=ur(g),g=tp(b)}}return Su({width:d,height:h,x:c,y:u})}function eg(e,t){const r=gd(e).scrollLeft;return t?t.left+r:wi(gn(e)).left+r}function F_(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:eg(e,n)),i=n.top+t.scrollTop;return{x:s,y:i}}function $P(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const i=s==="fixed",a=gn(n),l=t?md(t.floating):!1;if(n===a||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=fn(1);const d=fn(0),h=pn(n);if((h||!h&&!i)&&((Yo(n)!=="body"||$l(a))&&(c=gd(n)),pn(n))){const m=wi(n);u=mo(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const f=a&&!h&&!i?F_(a,c,!0):fn(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:r.y*u.y-c.scrollTop*u.y+d.y+f.y}}function FP(e){return Array.from(e.getClientRects())}function UP(e){const t=gn(e),r=gd(e),n=e.ownerDocument.body,s=ir(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=ir(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+eg(e);const l=-r.scrollTop;return Kr(n).direction==="rtl"&&(a+=ir(t.clientWidth,n.clientWidth)-s),{width:s,height:i,x:a,y:l}}function BP(e,t){const r=ur(e),n=gn(e),s=r.visualViewport;let i=n.clientWidth,a=n.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const u=Xm();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:l,y:c}}const zP=new Set(["absolute","fixed"]);function qP(e,t){const r=wi(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,i=pn(e)?mo(e):fn(1),a=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,u=n*i.y;return{width:a,height:l,x:c,y:u}}function ew(e,t,r){let n;if(t==="viewport")n=BP(e,r);else if(t==="document")n=UP(gn(e));else if(Hr(t))n=qP(t,r);else{const s=$_(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Su(n)}function U_(e,t){const r=As(e);return r===t||!Hr(r)||Lo(r)?!1:Kr(r).position==="fixed"||U_(r,t)}function WP(e,t){const r=t.get(e);if(r)return r;let n=cl(e,[],!1).filter(l=>Hr(l)&&Yo(l)!=="body"),s=null;const i=Kr(e).position==="fixed";let a=i?As(e):e;for(;Hr(a)&&!Lo(a);){const l=Kr(a),c=Jm(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&zP.has(s.position)||$l(a)&&!c&&U_(e,a))?n=n.filter(d=>d!==a):s=l,a=As(a)}return t.set(e,n),n}function VP(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const a=[...r==="clippingAncestors"?md(t)?[]:WP(t,this._c):[].concat(r),n],l=a[0],c=a.reduce((u,d)=>{const h=ew(t,d,s);return u.top=ir(h.top,u.top),u.right=Ps(h.right,u.right),u.bottom=Ps(h.bottom,u.bottom),u.left=ir(h.left,u.left),u},ew(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function HP(e){const{width:t,height:r}=L_(e);return{width:t,height:r}}function KP(e,t,r){const n=pn(t),s=gn(t),i=r==="fixed",a=wi(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=fn(0);function u(){c.x=eg(s)}if(n||!n&&!i)if((Yo(t)!=="body"||$l(s))&&(l=gd(t)),n){const m=wi(t,!0,i,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else s&&u();i&&!n&&s&&u();const d=s&&!n&&!i?F_(s,l):fn(0),h=a.left+l.scrollLeft-c.x-d.x,f=a.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:a.width,height:a.height}}function jh(e){return Kr(e).position==="static"}function tw(e,t){if(!pn(e)||Kr(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return gn(e)===r&&(r=r.ownerDocument.body),r}function B_(e,t){const r=ur(e);if(md(e))return r;if(!pn(e)){let s=As(e);for(;s&&!Lo(s);){if(Hr(s)&&!jh(s))return s;s=As(s)}return r}let n=tw(e,t);for(;n&&TP(n)&&jh(n);)n=tw(n,t);return n&&Lo(n)&&jh(n)&&!Jm(n)?r:n||OP(e)||r}const GP=async function(e){const t=this.getOffsetParent||B_,r=this.getDimensions,n=await r(e.floating);return{reference:KP(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function YP(e){return Kr(e).direction==="rtl"}const QP={convertOffsetParentRelativeRectToViewportRelativeRect:$P,getDocumentElement:gn,getClippingRect:VP,getOffsetParent:B_,getElementRects:GP,getClientRects:FP,getDimensions:HP,getScale:mo,isElement:Hr,isRTL:YP};function z_(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function JP(e,t){let r=null,n;const s=gn(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=u;if(l||t(),!f||!m)return;const b=yc(h),g=yc(s.clientWidth-(d+f)),y=yc(s.clientHeight-(h+m)),x=yc(d),v={rootMargin:-b+"px "+-g+"px "+-y+"px "+-x+"px",threshold:ir(0,Ps(1,c))||1};let _=!0;function S(j){const k=j[0].intersectionRatio;if(k!==c){if(!_)return a();k?a(!1,k):n=setTimeout(()=>{a(!1,1e-7)},1e3)}k===1&&!z_(u,e.getBoundingClientRect())&&a(),_=!1}try{r=new IntersectionObserver(S,{...v,root:s.ownerDocument})}catch{r=new IntersectionObserver(S,v)}r.observe(e)}return a(!0),i}function XP(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Zm(e),d=s||i?[...u?cl(u):[],...cl(t)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",r,{passive:!0}),i&&x.addEventListener("resize",r)});const h=u&&l?JP(u,r):null;let f=-1,m=null;a&&(m=new ResizeObserver(x=>{let[w]=x;w&&w.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var v;(v=m)==null||v.observe(t)})),r()}),u&&!c&&m.observe(u),m.observe(t));let b,g=c?wi(e):null;c&&y();function y(){const x=wi(e);g&&!z_(g,x)&&r(),g=x,b=requestAnimationFrame(y)}return r(),()=>{var x;d.forEach(w=>{s&&w.removeEventListener("scroll",r),i&&w.removeEventListener("resize",r)}),h==null||h(),(x=m)==null||x.disconnect(),m=null,c&&cancelAnimationFrame(b)}}const ZP=SP,eA=jP,tA=xP,rA=NP,nA=bP,rw=wP,sA=kP,iA=(e,t,r)=>{const n=new Map,s={platform:QP,...r},i={...s.platform,_c:n};return yP(e,t,{...s,platform:i})};var oA=typeof document<"u",aA=function(){},Vc=oA?p.useLayoutEffect:aA;function ju(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!ju(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&e.$$typeof)&&!ju(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function q_(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function nw(e,t){const r=q_(e);return Math.round(t*r)/r}function kh(e){const t=p.useRef(e);return Vc(()=>{t.current=e}),t}function lA(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=p.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,m]=p.useState(n);ju(f,n)||m(n);const[b,g]=p.useState(null),[y,x]=p.useState(null),w=p.useCallback(P=>{P!==j.current&&(j.current=P,g(P))},[]),v=p.useCallback(P=>{P!==k.current&&(k.current=P,x(P))},[]),_=i||b,S=a||y,j=p.useRef(null),k=p.useRef(null),C=p.useRef(d),T=c!=null,A=kh(c),$=kh(s),D=kh(u),X=p.useCallback(()=>{if(!j.current||!k.current)return;const P={placement:t,strategy:r,middleware:f};$.current&&(P.platform=$.current),iA(j.current,k.current,P).then(E=>{const B={...E,isPositioned:D.current!==!1};I.current&&!ju(C.current,B)&&(C.current=B,Jr.flushSync(()=>{h(B)}))})},[f,t,r,$,D]);Vc(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,h(P=>({...P,isPositioned:!1})))},[u]);const I=p.useRef(!1);Vc(()=>(I.current=!0,()=>{I.current=!1}),[]),Vc(()=>{if(_&&(j.current=_),S&&(k.current=S),_&&S){if(A.current)return A.current(_,S,X);X()}},[_,S,X,A,T]);const ae=p.useMemo(()=>({reference:j,floating:k,setReference:w,setFloating:v}),[w,v]),M=p.useMemo(()=>({reference:_,floating:S}),[_,S]),Z=p.useMemo(()=>{const P={position:r,left:0,top:0};if(!M.floating)return P;const E=nw(M.floating,d.x),B=nw(M.floating,d.y);return l?{...P,transform:"translate("+E+"px, "+B+"px)",...q_(M.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:E,top:B}},[r,l,M.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:X,refs:ae,elements:M,floatingStyles:Z}),[d,X,ae,M,Z])}const cA=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?rw({element:n.current,padding:s}).fn(r):{}:n?rw({element:n,padding:s}).fn(r):{}}}},uA=(e,t)=>({...ZP(e),options:[e,t]}),dA=(e,t)=>({...eA(e),options:[e,t]}),hA=(e,t)=>({...sA(e),options:[e,t]}),fA=(e,t)=>({...tA(e),options:[e,t]}),pA=(e,t)=>({...rA(e),options:[e,t]}),mA=(e,t)=>({...nA(e),options:[e,t]}),gA=(e,t)=>({...cA(e),options:[e,t]});var vA="Arrow",W_=p.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...i}=e;return o.jsx(le.svg,{...i,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});W_.displayName=vA;var yA=W_;function tg(e){const[t,r]=p.useState(void 0);return it(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;r({width:a,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var rg="Popper",[V_,Qo]=Mt(rg),[wA,H_]=V_(rg),K_=e=>{const{__scopePopper:t,children:r}=e,[n,s]=p.useState(null);return o.jsx(wA,{scope:t,anchor:n,onAnchorChange:s,children:r})};K_.displayName=rg;var G_="PopperAnchor",Y_=p.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,i=H_(G_,r),a=p.useRef(null),l=je(t,a);return p.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:o.jsx(le.div,{...s,ref:l})});Y_.displayName=G_;var ng="PopperContent",[xA,bA]=V_(ng),Q_=p.forwardRef((e,t)=>{var L,ue,_e,V,te,re;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:b,...g}=e,y=H_(ng,r),[x,w]=p.useState(null),v=je(t,Ne=>w(Ne)),[_,S]=p.useState(null),j=tg(_),k=(j==null?void 0:j.width)??0,C=(j==null?void 0:j.height)??0,T=n+(i!=="center"?"-"+i:""),A=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},$=Array.isArray(u)?u:[u],D=$.length>0,X={padding:A,boundary:$.filter(SA),altBoundary:D},{refs:I,floatingStyles:ae,placement:M,isPositioned:Z,middlewareData:P}=lA({strategy:"fixed",placement:T,whileElementsMounted:(...Ne)=>XP(...Ne,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[uA({mainAxis:s+C,alignmentAxis:a}),c&&dA({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?hA():void 0,...X}),c&&fA({...X}),pA({...X,apply:({elements:Ne,rects:Se,availableWidth:ot,availableHeight:Ie})=>{const{width:yt,height:en}=Se.reference,rr=Ne.floating.style;rr.setProperty("--radix-popper-available-width",`${ot}px`),rr.setProperty("--radix-popper-available-height",`${Ie}px`),rr.setProperty("--radix-popper-anchor-width",`${yt}px`),rr.setProperty("--radix-popper-anchor-height",`${en}px`)}}),_&&gA({element:_,padding:l}),jA({arrowWidth:k,arrowHeight:C}),f&&mA({strategy:"referenceHidden",...X})]}),[E,B]=Z_(M),ie=st(b);it(()=>{Z&&(ie==null||ie())},[Z,ie]);const Q=(L=P.arrow)==null?void 0:L.x,me=(ue=P.arrow)==null?void 0:ue.y,U=((_e=P.arrow)==null?void 0:_e.centerOffset)!==0,[de,ge]=p.useState();return it(()=>{x&&ge(window.getComputedStyle(x).zIndex)},[x]),o.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...ae,transform:Z?ae.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:de,"--radix-popper-transform-origin":[(V=P.transformOrigin)==null?void 0:V.x,(te=P.transformOrigin)==null?void 0:te.y].join(" "),...((re=P.hide)==null?void 0:re.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(xA,{scope:r,placedSide:E,onArrowChange:S,arrowX:Q,arrowY:me,shouldHideArrow:U,children:o.jsx(le.div,{"data-side":E,"data-align":B,...g,ref:v,style:{...g.style,animation:Z?void 0:"none"}})})})});Q_.displayName=ng;var J_="PopperArrow",_A={top:"bottom",right:"left",bottom:"top",left:"right"},X_=p.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,i=bA(J_,n),a=_A[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(yA,{...s,ref:r,style:{...s.style,display:"block"}})})});X_.displayName=J_;function SA(e){return e!==null}var jA=e=>({name:"transformOrigin",options:e,fn(t){var y,x,w;const{placement:r,rects:n,middlewareData:s}=t,a=((y=s.arrow)==null?void 0:y.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,d]=Z_(r),h={start:"0%",center:"50%",end:"100%"}[d],f=(((x=s.arrow)==null?void 0:x.x)??0)+l/2,m=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let b="",g="";return u==="bottom"?(b=a?h:`${f}px`,g=`${-c}px`):u==="top"?(b=a?h:`${f}px`,g=`${n.floating.height+c}px`):u==="right"?(b=`${-c}px`,g=a?h:`${m}px`):u==="left"&&(b=`${n.floating.width+c}px`,g=a?h:`${m}px`),{data:{x:b,y:g}}}});function Z_(e){const[t,r="center"]=e.split("-");return[t,r]}var e1=K_,sg=Y_,ig=Q_,og=X_,[vd,t6]=Mt("Tooltip",[Qo]),ag=Qo(),t1="TooltipProvider",kA=700,sw="tooltip.open",[NA,r1]=vd(t1),n1=e=>{const{__scopeTooltip:t,delayDuration:r=kA,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=e,a=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),o.jsx(NA,{scope:t,isOpenDelayedRef:a,delayDuration:r,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};n1.displayName=t1;var s1="Tooltip",[r6,yd]=vd(s1),rp="TooltipTrigger",CA=p.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=yd(rp,r),i=r1(rp,r),a=ag(r),l=p.useRef(null),c=je(t,l,s.onTriggerChange),u=p.useRef(!1),d=p.useRef(!1),h=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),o.jsx(sg,{asChild:!0,...a,children:o.jsx(le.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:H(e.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:H(e.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:H(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:H(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:H(e.onBlur,s.onClose),onClick:H(e.onClick,s.onClose)})})});CA.displayName=rp;var EA="TooltipPortal",[n6,TA]=vd(EA,{forceMount:void 0}),$o="TooltipContent",i1=p.forwardRef((e,t)=>{const r=TA($o,e.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...i}=e,a=yd($o,e.__scopeTooltip);return o.jsx(Ct,{present:n||a.open,children:a.disableHoverableContent?o.jsx(o1,{side:s,...i,ref:t}):o.jsx(RA,{side:s,...i,ref:t})})}),RA=p.forwardRef((e,t)=>{const r=yd($o,e.__scopeTooltip),n=r1($o,e.__scopeTooltip),s=p.useRef(null),i=je(t,s),[a,l]=p.useState(null),{trigger:c,onClose:u}=r,d=s.current,{onPointerInTransitChange:h}=n,f=p.useCallback(()=>{l(null),h(!1)},[h]),m=p.useCallback((b,g)=>{const y=b.currentTarget,x={x:b.clientX,y:b.clientY},w=MA(x,y.getBoundingClientRect()),v=DA(x,w),_=LA(g.getBoundingClientRect()),S=FA([...v,..._]);l(S),h(!0)},[h]);return p.useEffect(()=>()=>f(),[f]),p.useEffect(()=>{if(c&&d){const b=y=>m(y,d),g=y=>m(y,c);return c.addEventListener("pointerleave",b),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",b),d.removeEventListener("pointerleave",g)}}},[c,d,m,f]),p.useEffect(()=>{if(a){const b=g=>{const y=g.target,x={x:g.clientX,y:g.clientY},w=(c==null?void 0:c.contains(y))||(d==null?void 0:d.contains(y)),v=!$A(x,a);w?f():v&&(f(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,d,a,u,f]),o.jsx(o1,{...e,ref:i})}),[PA,AA]=vd(s1,{isInside:!1}),IA=MT("TooltipContent"),o1=p.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=e,c=yd($o,r),u=ag(r),{onClose:d}=c;return p.useEffect(()=>(document.addEventListener(sw,d),()=>document.removeEventListener(sw,d)),[d]),p.useEffect(()=>{if(c.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),o.jsx(Wo,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:o.jsxs(ig,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(IA,{children:n}),o.jsx(PA,{scope:r,isInside:!0,children:o.jsx(n2,{id:c.contentId,role:"tooltip",children:s||n})})]})})});i1.displayName=$o;var a1="TooltipArrow",OA=p.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=ag(r);return AA(a1,r).isInside?null:o.jsx(og,{...s,...n,ref:t})});OA.displayName=a1;function MA(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,s,i)){case i:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function DA(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function LA(e){const{top:t,right:r,bottom:n,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:n},{x:s,y:n}]}function $A(e,t){const{x:r,y:n}=e;let s=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const l=t[i],c=t[a],u=l.x,d=l.y,h=c.x,f=c.y;d>n!=f>n&&r<(h-u)*(n-d)/(f-d)+u&&(s=!s)}return s}function FA(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),UA(t)}function UA(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const s=e[n];for(;t.length>=2;){const i=t[t.length-1],a=t[t.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const s=e[n];for(;r.length>=2;){const i=r[r.length-1],a=r[r.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))r.pop();else break}r.push(s)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var BA=n1,l1=i1;const zA=BA,qA=p.forwardRef(({className:e,sideOffset:t=4,...r},n)=>o.jsx(l1,{ref:n,sideOffset:t,className:Y("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));qA.displayName=l1.displayName;var Jo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},xi=typeof window>"u"||"Deno"in globalThis;function Ut(){}function WA(e,t){return typeof e=="function"?e(t):e}function np(e){return typeof e=="number"&&e>=0&&e!==1/0}function c1(e,t){return Math.max(e+(t||0)-Date.now(),0)}function js(e,t){return typeof e=="function"?e(t):e}function gr(e,t){return typeof e=="function"?e(t):e}function iw(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:a,stale:l}=e;if(a){if(n){if(t.queryHash!==lg(a,t.options))return!1}else if(!ul(t.queryKey,a))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function ow(e,t){const{exact:r,status:n,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(bi(t.options.mutationKey)!==bi(i))return!1}else if(!ul(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function lg(e,t){return((t==null?void 0:t.queryKeyHashFn)||bi)(e)}function bi(e){return JSON.stringify(e,(t,r)=>sp(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function ul(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>ul(e[r],t[r])):!1}function u1(e,t){if(e===t)return e;const r=aw(e)&&aw(t);if(r||sp(e)&&sp(t)){const n=r?e:Object.keys(e),s=n.length,i=r?t:Object.keys(t),a=i.length,l=r?[]:{},c=new Set(n);let u=0;for(let d=0;d<a;d++){const h=r?d:i[d];(!r&&c.has(h)||r)&&e[h]===void 0&&t[h]===void 0?(l[h]=void 0,u++):(l[h]=u1(e[h],t[h]),l[h]===e[h]&&e[h]!==void 0&&u++)}return s===a&&u===s?e:l}return t}function ku(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function aw(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function sp(e){if(!lw(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!lw(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function lw(e){return Object.prototype.toString.call(e)==="[object Object]"}function VA(e){return new Promise(t=>{setTimeout(t,e)})}function ip(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?u1(e,t):t}function HA(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function KA(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var cg=Symbol();function d1(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===cg?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function h1(e,t){return typeof e=="function"?e(...t):!!e}var ei,ns,yo,wx,GA=(wx=class extends Jo{constructor(){super();pe(this,ei);pe(this,ns);pe(this,yo);ee(this,yo,t=>{if(!xi&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){N(this,ns)||this.setEventListener(N(this,yo))}onUnsubscribe(){var t;this.hasListeners()||((t=N(this,ns))==null||t.call(this),ee(this,ns,void 0))}setEventListener(t){var r;ee(this,yo,t),(r=N(this,ns))==null||r.call(this),ee(this,ns,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){N(this,ei)!==t&&(ee(this,ei,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof N(this,ei)=="boolean"?N(this,ei):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ei=new WeakMap,ns=new WeakMap,yo=new WeakMap,wx),ug=new GA,wo,ss,xo,xx,YA=(xx=class extends Jo{constructor(){super();pe(this,wo,!0);pe(this,ss);pe(this,xo);ee(this,xo,t=>{if(!xi&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){N(this,ss)||this.setEventListener(N(this,xo))}onUnsubscribe(){var t;this.hasListeners()||((t=N(this,ss))==null||t.call(this),ee(this,ss,void 0))}setEventListener(t){var r;ee(this,xo,t),(r=N(this,ss))==null||r.call(this),ee(this,ss,t(this.setOnline.bind(this)))}setOnline(t){N(this,wo)!==t&&(ee(this,wo,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return N(this,wo)}},wo=new WeakMap,ss=new WeakMap,xo=new WeakMap,xx),Nu=new YA;function op(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function QA(e){return Math.min(1e3*2**e,3e4)}function f1(e){return(e??"online")==="online"?Nu.isOnline():!0}var p1=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Nh(e){return e instanceof p1}function m1(e){let t=!1,r=0,n=!1,s;const i=op(),a=g=>{var y;n||(f(new p1(g)),(y=e.abort)==null||y.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>ug.isFocused()&&(e.networkMode==="always"||Nu.isOnline())&&e.canRun(),d=()=>f1(e.networkMode)&&e.canRun(),h=g=>{var y;n||(n=!0,(y=e.onSuccess)==null||y.call(e,g),s==null||s(),i.resolve(g))},f=g=>{var y;n||(n=!0,(y=e.onError)==null||y.call(e,g),s==null||s(),i.reject(g))},m=()=>new Promise(g=>{var y;s=x=>{(n||u())&&g(x)},(y=e.onPause)==null||y.call(e)}).then(()=>{var g;s=void 0,n||(g=e.onContinue)==null||g.call(e)}),b=()=>{if(n)return;let g;const y=r===0?e.initialPromise:void 0;try{g=y??e.fn()}catch(x){g=Promise.reject(x)}Promise.resolve(g).then(h).catch(x=>{var j;if(n)return;const w=e.retry??(xi?0:3),v=e.retryDelay??QA,_=typeof v=="function"?v(r,x):v,S=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,x);if(t||!S){f(x);return}r++,(j=e.onFail)==null||j.call(e,r,x),VA(_).then(()=>u()?void 0:m()).then(()=>{t?f(x):b()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?b():m().then(b),i)}}var JA=e=>setTimeout(e,0);function XA(){let e=[],t=0,r=l=>{l()},n=l=>{l()},s=JA;const i=l=>{t?e.push(l):s(()=>{r(l)})},a=()=>{const l=e;e=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var mt=XA(),ti,bx,g1=(bx=class{constructor(){pe(this,ti)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),np(this.gcTime)&&ee(this,ti,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(xi?1/0:5*60*1e3))}clearGcTimeout(){N(this,ti)&&(clearTimeout(N(this,ti)),ee(this,ti,void 0))}},ti=new WeakMap,bx),bo,ri,mr,ni,Rt,Nl,si,Lr,bn,_x,ZA=(_x=class extends g1{constructor(t){super();pe(this,Lr);pe(this,bo);pe(this,ri);pe(this,mr);pe(this,ni);pe(this,Rt);pe(this,Nl);pe(this,si);ee(this,si,!1),ee(this,Nl,t.defaultOptions),this.setOptions(t.options),this.observers=[],ee(this,ni,t.client),ee(this,mr,N(this,ni).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ee(this,bo,eI(this.options)),this.state=t.state??N(this,bo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=N(this,Rt))==null?void 0:t.promise}setOptions(t){this.options={...N(this,Nl),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&N(this,mr).remove(this)}setData(t,r){const n=ip(this.state.data,t,this.options);return Te(this,Lr,bn).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Te(this,Lr,bn).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=N(this,Rt))==null?void 0:n.promise;return(s=N(this,Rt))==null||s.cancel(t),r?r.then(Ut).catch(Ut):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(N(this,bo))}isActive(){return this.observers.some(t=>gr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===cg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>js(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!c1(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=N(this,Rt))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=N(this,Rt))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),N(this,mr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(N(this,Rt)&&(N(this,si)?N(this,Rt).cancel({revert:!0}):N(this,Rt).cancelRetry()),this.scheduleGc()),N(this,mr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Te(this,Lr,bn).call(this,{type:"invalidate"})}fetch(t,r){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(N(this,Rt))return N(this,Rt).continueRetry(),N(this,Rt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(m=>m.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(ee(this,si,!0),n.signal)})},i=()=>{const f=d1(this.options,r),b=(()=>{const g={client:N(this,ni),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return ee(this,si,!1),this.options.persister?this.options.persister(f,b,this):f(b)},l=(()=>{const f={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:N(this,ni),state:this.state,fetchFn:i};return s(f),f})();(u=this.options.behavior)==null||u.onFetch(l,this),ee(this,ri,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Te(this,Lr,bn).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=f=>{var m,b,g,y;Nh(f)&&f.silent||Te(this,Lr,bn).call(this,{type:"error",error:f}),Nh(f)||((b=(m=N(this,mr).config).onError)==null||b.call(m,f,this),(y=(g=N(this,mr).config).onSettled)==null||y.call(g,this.state.data,f,this)),this.scheduleGc()};return ee(this,Rt,m1({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var m,b,g,y;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(x){c(x);return}(b=(m=N(this,mr).config).onSuccess)==null||b.call(m,f,this),(y=(g=N(this,mr).config).onSettled)==null||y.call(g,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,m)=>{Te(this,Lr,bn).call(this,{type:"failed",failureCount:f,error:m})},onPause:()=>{Te(this,Lr,bn).call(this,{type:"pause"})},onContinue:()=>{Te(this,Lr,bn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),N(this,Rt).start()}},bo=new WeakMap,ri=new WeakMap,mr=new WeakMap,ni=new WeakMap,Rt=new WeakMap,Nl=new WeakMap,si=new WeakMap,Lr=new WeakSet,bn=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...v1(n.data,this.options),fetchMeta:t.meta??null};case"success":return ee(this,ri,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return Nh(s)&&s.revert&&N(this,ri)?{...N(this,ri),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),mt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),N(this,mr).notify({query:this,type:"updated",action:t})})},_x);function v1(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:f1(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function eI(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var sn,Sx,tI=(Sx=class extends Jo{constructor(t={}){super();pe(this,sn);this.config=t,ee(this,sn,new Map)}build(t,r,n){const s=r.queryKey,i=r.queryHash??lg(s,r);let a=this.get(i);return a||(a=new ZA({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(a)),a}add(t){N(this,sn).has(t.queryHash)||(N(this,sn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=N(this,sn).get(t.queryHash);r&&(t.destroy(),r===t&&N(this,sn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){mt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return N(this,sn).get(t)}getAll(){return[...N(this,sn).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>iw(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>iw(t,n)):r}notify(t){mt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){mt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){mt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},sn=new WeakMap,Sx),on,Lt,ii,an,Yn,jx,rI=(jx=class extends g1{constructor(t){super();pe(this,an);pe(this,on);pe(this,Lt);pe(this,ii);this.mutationId=t.mutationId,ee(this,Lt,t.mutationCache),ee(this,on,[]),this.state=t.state||y1(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){N(this,on).includes(t)||(N(this,on).push(t),this.clearGcTimeout(),N(this,Lt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ee(this,on,N(this,on).filter(r=>r!==t)),this.scheduleGc(),N(this,Lt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){N(this,on).length||(this.state.status==="pending"?this.scheduleGc():N(this,Lt).remove(this))}continue(){var t;return((t=N(this,ii))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,a,l,c,u,d,h,f,m,b,g,y,x,w,v,_,S,j,k,C;const r=()=>{Te(this,an,Yn).call(this,{type:"continue"})};ee(this,ii,m1({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(T,A)=>{Te(this,an,Yn).call(this,{type:"failed",failureCount:T,error:A})},onPause:()=>{Te(this,an,Yn).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>N(this,Lt).canRun(this)}));const n=this.state.status==="pending",s=!N(this,ii).canStart();try{if(n)r();else{Te(this,an,Yn).call(this,{type:"pending",variables:t,isPaused:s}),await((a=(i=N(this,Lt).config).onMutate)==null?void 0:a.call(i,t,this));const A=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));A!==this.state.context&&Te(this,an,Yn).call(this,{type:"pending",context:A,variables:t,isPaused:s})}const T=await N(this,ii).start();return await((d=(u=N(this,Lt).config).onSuccess)==null?void 0:d.call(u,T,t,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,T,t,this.state.context)),await((b=(m=N(this,Lt).config).onSettled)==null?void 0:b.call(m,T,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,T,null,t,this.state.context)),Te(this,an,Yn).call(this,{type:"success",data:T}),T}catch(T){try{throw await((w=(x=N(this,Lt).config).onError)==null?void 0:w.call(x,T,t,this.state.context,this)),await((_=(v=this.options).onError)==null?void 0:_.call(v,T,t,this.state.context)),await((j=(S=N(this,Lt).config).onSettled)==null?void 0:j.call(S,void 0,T,this.state.variables,this.state.context,this)),await((C=(k=this.options).onSettled)==null?void 0:C.call(k,void 0,T,t,this.state.context)),T}finally{Te(this,an,Yn).call(this,{type:"error",error:T})}}finally{N(this,Lt).runNext(this)}}},on=new WeakMap,Lt=new WeakMap,ii=new WeakMap,an=new WeakSet,Yn=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),mt.batch(()=>{N(this,on).forEach(n=>{n.onMutationUpdate(t)}),N(this,Lt).notify({mutation:this,type:"updated",action:t})})},jx);function y1(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var kn,$r,Cl,kx,nI=(kx=class extends Jo{constructor(t={}){super();pe(this,kn);pe(this,$r);pe(this,Cl);this.config=t,ee(this,kn,new Set),ee(this,$r,new Map),ee(this,Cl,0)}build(t,r,n){const s=new rI({mutationCache:this,mutationId:++Jl(this,Cl)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){N(this,kn).add(t);const r=wc(t);if(typeof r=="string"){const n=N(this,$r).get(r);n?n.push(t):N(this,$r).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(N(this,kn).delete(t)){const r=wc(t);if(typeof r=="string"){const n=N(this,$r).get(r);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&N(this,$r).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=wc(t);if(typeof r=="string"){const n=N(this,$r).get(r),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var n;const r=wc(t);if(typeof r=="string"){const s=(n=N(this,$r).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){mt.batch(()=>{N(this,kn).forEach(t=>{this.notify({type:"removed",mutation:t})}),N(this,kn).clear(),N(this,$r).clear()})}getAll(){return Array.from(N(this,kn))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>ow(r,n))}findAll(t={}){return this.getAll().filter(r=>ow(t,r))}notify(t){mt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return mt.batch(()=>Promise.all(t.map(r=>r.continue().catch(Ut))))}},kn=new WeakMap,$r=new WeakMap,Cl=new WeakMap,kx);function wc(e){var t;return(t=e.options.scope)==null?void 0:t.id}function cw(e){return{onFetch:(t,r)=>{var d,h,f,m,b;const n=t.options,s=(f=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=t.state.data)==null?void 0:m.pages)||[],a=((b=t.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const y=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},x=d1(t.options,t.fetchOptions),w=async(v,_,S)=>{if(g)return Promise.reject();if(_==null&&v.pages.length)return Promise.resolve(v);const k=(()=>{const $={client:t.client,queryKey:t.queryKey,pageParam:_,direction:S?"backward":"forward",meta:t.options.meta};return y($),$})(),C=await x(k),{maxPages:T}=t.options,A=S?KA:HA;return{pages:A(v.pages,C,T),pageParams:A(v.pageParams,_,T)}};if(s&&i.length){const v=s==="backward",_=v?sI:uw,S={pages:i,pageParams:a},j=_(n,S);l=await w(S,j,v)}else{const v=e??i.length;do{const _=c===0?a[0]??n.initialPageParam:uw(n,l);if(c>0&&_==null)break;l=await w(l,_),c++}while(c<v)}return l};t.options.persister?t.fetchFn=()=>{var g,y;return(y=(g=t.options).persister)==null?void 0:y.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function uw(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function sI(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var tt,is,os,_o,So,as,jo,ko,Nx,iI=(Nx=class{constructor(e={}){pe(this,tt);pe(this,is);pe(this,os);pe(this,_o);pe(this,So);pe(this,as);pe(this,jo);pe(this,ko);ee(this,tt,e.queryCache||new tI),ee(this,is,e.mutationCache||new nI),ee(this,os,e.defaultOptions||{}),ee(this,_o,new Map),ee(this,So,new Map),ee(this,as,0)}mount(){Jl(this,as)._++,N(this,as)===1&&(ee(this,jo,ug.subscribe(async e=>{e&&(await this.resumePausedMutations(),N(this,tt).onFocus())})),ee(this,ko,Nu.subscribe(async e=>{e&&(await this.resumePausedMutations(),N(this,tt).onOnline())})))}unmount(){var e,t;Jl(this,as)._--,N(this,as)===0&&((e=N(this,jo))==null||e.call(this),ee(this,jo,void 0),(t=N(this,ko))==null||t.call(this),ee(this,ko,void 0))}isFetching(e){return N(this,tt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return N(this,is).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=N(this,tt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=N(this,tt).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(js(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return N(this,tt).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=N(this,tt).get(n.queryHash),i=s==null?void 0:s.state.data,a=WA(t,i);if(a!==void 0)return N(this,tt).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(e,t,r){return mt.batch(()=>N(this,tt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=N(this,tt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=N(this,tt);mt.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=N(this,tt);return mt.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=mt.batch(()=>N(this,tt).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(Ut).catch(Ut)}invalidateQueries(e,t={}){return mt.batch(()=>(N(this,tt).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=mt.batch(()=>N(this,tt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Ut)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Ut)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=N(this,tt).build(this,t);return r.isStaleByTime(js(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ut).catch(Ut)}fetchInfiniteQuery(e){return e.behavior=cw(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ut).catch(Ut)}ensureInfiniteQueryData(e){return e.behavior=cw(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Nu.isOnline()?N(this,is).resumePausedMutations():Promise.resolve()}getQueryCache(){return N(this,tt)}getMutationCache(){return N(this,is)}getDefaultOptions(){return N(this,os)}setDefaultOptions(e){ee(this,os,e)}setQueryDefaults(e,t){N(this,_o).set(bi(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...N(this,_o).values()],r={};return t.forEach(n=>{ul(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){N(this,So).set(bi(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...N(this,So).values()],r={};return t.forEach(n=>{ul(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...N(this,os).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=lg(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===cg&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...N(this,os).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){N(this,tt).clear(),N(this,is).clear()}},tt=new WeakMap,is=new WeakMap,os=new WeakMap,_o=new WeakMap,So=new WeakMap,as=new WeakMap,jo=new WeakMap,ko=new WeakMap,Nx),Kt,Pe,El,$t,oi,No,ls,cs,Tl,Co,Eo,ai,li,us,To,De,Ca,ap,lp,cp,up,dp,hp,fp,w1,Cx,oI=(Cx=class extends Jo{constructor(t,r){super();pe(this,De);pe(this,Kt);pe(this,Pe);pe(this,El);pe(this,$t);pe(this,oi);pe(this,No);pe(this,ls);pe(this,cs);pe(this,Tl);pe(this,Co);pe(this,Eo);pe(this,ai);pe(this,li);pe(this,us);pe(this,To,new Set);this.options=r,ee(this,Kt,t),ee(this,cs,null),ee(this,ls,op()),this.options.experimental_prefetchInRender||N(this,ls).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(N(this,Pe).addObserver(this),dw(N(this,Pe),this.options)?Te(this,De,Ca).call(this):this.updateResult(),Te(this,De,up).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return pp(N(this,Pe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return pp(N(this,Pe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Te(this,De,dp).call(this),Te(this,De,hp).call(this),N(this,Pe).removeObserver(this)}setOptions(t){const r=this.options,n=N(this,Pe);if(this.options=N(this,Kt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof gr(this.options.enabled,N(this,Pe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Te(this,De,fp).call(this),N(this,Pe).setOptions(this.options),r._defaulted&&!ku(this.options,r)&&N(this,Kt).getQueryCache().notify({type:"observerOptionsUpdated",query:N(this,Pe),observer:this});const s=this.hasListeners();s&&hw(N(this,Pe),n,this.options,r)&&Te(this,De,Ca).call(this),this.updateResult(),s&&(N(this,Pe)!==n||gr(this.options.enabled,N(this,Pe))!==gr(r.enabled,N(this,Pe))||js(this.options.staleTime,N(this,Pe))!==js(r.staleTime,N(this,Pe)))&&Te(this,De,ap).call(this);const i=Te(this,De,lp).call(this);s&&(N(this,Pe)!==n||gr(this.options.enabled,N(this,Pe))!==gr(r.enabled,N(this,Pe))||i!==N(this,us))&&Te(this,De,cp).call(this,i)}getOptimisticResult(t){const r=N(this,Kt).getQueryCache().build(N(this,Kt),t),n=this.createResult(r,t);return lI(this,n)&&(ee(this,$t,n),ee(this,No,this.options),ee(this,oi,N(this,Pe).state)),n}getCurrentResult(){return N(this,$t)}trackResult(t,r){return new Proxy(t,{get:(n,s)=>(this.trackProp(s),r==null||r(s),Reflect.get(n,s))})}trackProp(t){N(this,To).add(t)}getCurrentQuery(){return N(this,Pe)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=N(this,Kt).defaultQueryOptions(t),n=N(this,Kt).getQueryCache().build(N(this,Kt),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return Te(this,De,Ca).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),N(this,$t)))}createResult(t,r){var T;const n=N(this,Pe),s=this.options,i=N(this,$t),a=N(this,oi),l=N(this,No),u=t!==n?t.state:N(this,El),{state:d}=t;let h={...d},f=!1,m;if(r._optimisticResults){const A=this.hasListeners(),$=!A&&dw(t,r),D=A&&hw(t,n,r,s);($||D)&&(h={...h,...v1(d.data,t.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:b,errorUpdatedAt:g,status:y}=h;m=h.data;let x=!1;if(r.placeholderData!==void 0&&m===void 0&&y==="pending"){let A;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(A=i.data,x=!0):A=typeof r.placeholderData=="function"?r.placeholderData((T=N(this,Eo))==null?void 0:T.state.data,N(this,Eo)):r.placeholderData,A!==void 0&&(y="success",m=ip(i==null?void 0:i.data,A,r),f=!0)}if(r.select&&m!==void 0&&!x)if(i&&m===(a==null?void 0:a.data)&&r.select===N(this,Tl))m=N(this,Co);else try{ee(this,Tl,r.select),m=r.select(m),m=ip(i==null?void 0:i.data,m,r),ee(this,Co,m),ee(this,cs,null)}catch(A){ee(this,cs,A)}N(this,cs)&&(b=N(this,cs),m=N(this,Co),g=Date.now(),y="error");const w=h.fetchStatus==="fetching",v=y==="pending",_=y==="error",S=v&&w,j=m!==void 0,C={status:y,fetchStatus:h.fetchStatus,isPending:v,isSuccess:y==="success",isError:_,isInitialLoading:S,isLoading:S,data:m,dataUpdatedAt:h.dataUpdatedAt,error:b,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:w,isRefetching:w&&!v,isLoadingError:_&&!j,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:_&&j,isStale:dg(t,r),refetch:this.refetch,promise:N(this,ls),isEnabled:gr(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const A=X=>{C.status==="error"?X.reject(C.error):C.data!==void 0&&X.resolve(C.data)},$=()=>{const X=ee(this,ls,C.promise=op());A(X)},D=N(this,ls);switch(D.status){case"pending":t.queryHash===n.queryHash&&A(D);break;case"fulfilled":(C.status==="error"||C.data!==D.value)&&$();break;case"rejected":(C.status!=="error"||C.error!==D.reason)&&$();break}}return C}updateResult(){const t=N(this,$t),r=this.createResult(N(this,Pe),this.options);if(ee(this,oi,N(this,Pe).state),ee(this,No,this.options),N(this,oi).data!==void 0&&ee(this,Eo,N(this,Pe)),ku(r,t))return;ee(this,$t,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!N(this,To).size)return!0;const a=new Set(i??N(this,To));return this.options.throwOnError&&a.add("error"),Object.keys(N(this,$t)).some(l=>{const c=l;return N(this,$t)[c]!==t[c]&&a.has(c)})};Te(this,De,w1).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Te(this,De,up).call(this)}},Kt=new WeakMap,Pe=new WeakMap,El=new WeakMap,$t=new WeakMap,oi=new WeakMap,No=new WeakMap,ls=new WeakMap,cs=new WeakMap,Tl=new WeakMap,Co=new WeakMap,Eo=new WeakMap,ai=new WeakMap,li=new WeakMap,us=new WeakMap,To=new WeakMap,De=new WeakSet,Ca=function(t){Te(this,De,fp).call(this);let r=N(this,Pe).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Ut)),r},ap=function(){Te(this,De,dp).call(this);const t=js(this.options.staleTime,N(this,Pe));if(xi||N(this,$t).isStale||!np(t))return;const n=c1(N(this,$t).dataUpdatedAt,t)+1;ee(this,ai,setTimeout(()=>{N(this,$t).isStale||this.updateResult()},n))},lp=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(N(this,Pe)):this.options.refetchInterval)??!1},cp=function(t){Te(this,De,hp).call(this),ee(this,us,t),!(xi||gr(this.options.enabled,N(this,Pe))===!1||!np(N(this,us))||N(this,us)===0)&&ee(this,li,setInterval(()=>{(this.options.refetchIntervalInBackground||ug.isFocused())&&Te(this,De,Ca).call(this)},N(this,us)))},up=function(){Te(this,De,ap).call(this),Te(this,De,cp).call(this,Te(this,De,lp).call(this))},dp=function(){N(this,ai)&&(clearTimeout(N(this,ai)),ee(this,ai,void 0))},hp=function(){N(this,li)&&(clearInterval(N(this,li)),ee(this,li,void 0))},fp=function(){const t=N(this,Kt).getQueryCache().build(N(this,Kt),this.options);if(t===N(this,Pe))return;const r=N(this,Pe);ee(this,Pe,t),ee(this,El,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},w1=function(t){mt.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(N(this,$t))}),N(this,Kt).getQueryCache().notify({query:N(this,Pe),type:"observerResultsUpdated"})})},Cx);function aI(e,t){return gr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function dw(e,t){return aI(e,t)||e.state.data!==void 0&&pp(e,t,t.refetchOnMount)}function pp(e,t,r){if(gr(t.enabled,e)!==!1&&js(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&dg(e,t)}return!1}function hw(e,t,r,n){return(e!==t||gr(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&dg(e,r)}function dg(e,t){return gr(t.enabled,e)!==!1&&e.isStaleByTime(js(t.staleTime,e))}function lI(e,t){return!ku(e.getCurrentResult(),t)}var ds,hs,Gt,Nn,Rn,Hc,mp,Ex,cI=(Ex=class extends Jo{constructor(r,n){super();pe(this,Rn);pe(this,ds);pe(this,hs);pe(this,Gt);pe(this,Nn);ee(this,ds,r),this.setOptions(n),this.bindMethods(),Te(this,Rn,Hc).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var s;const n=this.options;this.options=N(this,ds).defaultMutationOptions(r),ku(this.options,n)||N(this,ds).getMutationCache().notify({type:"observerOptionsUpdated",mutation:N(this,Gt),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&bi(n.mutationKey)!==bi(this.options.mutationKey)?this.reset():((s=N(this,Gt))==null?void 0:s.state.status)==="pending"&&N(this,Gt).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=N(this,Gt))==null||r.removeObserver(this)}onMutationUpdate(r){Te(this,Rn,Hc).call(this),Te(this,Rn,mp).call(this,r)}getCurrentResult(){return N(this,hs)}reset(){var r;(r=N(this,Gt))==null||r.removeObserver(this),ee(this,Gt,void 0),Te(this,Rn,Hc).call(this),Te(this,Rn,mp).call(this)}mutate(r,n){var s;return ee(this,Nn,n),(s=N(this,Gt))==null||s.removeObserver(this),ee(this,Gt,N(this,ds).getMutationCache().build(N(this,ds),this.options)),N(this,Gt).addObserver(this),N(this,Gt).execute(r)}},ds=new WeakMap,hs=new WeakMap,Gt=new WeakMap,Nn=new WeakMap,Rn=new WeakSet,Hc=function(){var n;const r=((n=N(this,Gt))==null?void 0:n.state)??y1();ee(this,hs,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},mp=function(r){mt.batch(()=>{var n,s,i,a,l,c,u,d;if(N(this,Nn)&&this.hasListeners()){const h=N(this,hs).variables,f=N(this,hs).context;(r==null?void 0:r.type)==="success"?((s=(n=N(this,Nn)).onSuccess)==null||s.call(n,r.data,h,f),(a=(i=N(this,Nn)).onSettled)==null||a.call(i,r.data,null,h,f)):(r==null?void 0:r.type)==="error"&&((c=(l=N(this,Nn)).onError)==null||c.call(l,r.error,h,f),(d=(u=N(this,Nn)).onSettled)==null||d.call(u,void 0,r.error,h,f))}this.listeners.forEach(h=>{h(N(this,hs))})})},Ex),x1=p.createContext(void 0),Dt=e=>{const t=p.useContext(x1);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},uI=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(x1.Provider,{value:e,children:t})),b1=p.createContext(!1),dI=()=>p.useContext(b1);b1.Provider;function hI(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var fI=p.createContext(hI()),pI=()=>p.useContext(fI),mI=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},gI=e=>{p.useEffect(()=>{e.clearReset()},[e])},vI=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||h1(r,[e.error,n])),yI=e=>{if(e.suspense){const t=n=>n==="static"?n:Math.max(n??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...n)=>t(r(...n)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},wI=(e,t)=>e.isLoading&&e.isFetching&&!t,xI=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,fw=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function bI(e,t,r){var h,f,m,b,g;const n=dI(),s=pI(),i=Dt(),a=i.defaultQueryOptions(e);(f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,a),a._optimisticResults=n?"isRestoring":"optimistic",yI(a),mI(a,s),gI(s);const l=!i.getQueryCache().get(a.queryHash),[c]=p.useState(()=>new t(i,a)),u=c.getOptimisticResult(a),d=!n&&e.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(y=>{const x=d?c.subscribe(mt.batchCalls(y)):Ut;return c.updateResult(),x},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),p.useEffect(()=>{c.setOptions(a)},[a,c]),xI(a,u))throw fw(a,c,s);if(vI({result:u,errorResetBoundary:s,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw u.error;if((b=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||b.call(m,a,u),a.experimental_prefetchInRender&&!xi&&wI(u,n)){const y=l?fw(a,c,s):(g=i.getQueryCache().get(a.queryHash))==null?void 0:g.promise;y==null||y.catch(Ut).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?u:c.trackResult(u)}function Fe(e,t){return bI(e,oI)}function ht(e,t){const r=Dt(),[n]=p.useState(()=>new cI(r,e));p.useEffect(()=>{n.setOptions(e)},[n,e]);const s=p.useSyncExternalStore(p.useCallback(a=>n.subscribe(mt.batchCalls(a)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=p.useCallback((a,l)=>{n.mutate(a,l).catch(Ut)},[n]);if(s.error&&h1(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dl(){return dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dl.apply(this,arguments)}var ms;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ms||(ms={}));const pw="popstate";function _I(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:a,hash:l}=n.location;return gp("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Cu(s)}return jI(t,r,null,e)}function ct(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function _1(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function SI(){return Math.random().toString(36).substr(2,8)}function mw(e,t){return{usr:e.state,key:e.key,idx:t}}function gp(e,t,r,n){return r===void 0&&(r=null),dl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Xo(t):t,{state:r,key:t&&t.key||n||SI()})}function Cu(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Xo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function jI(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,l=ms.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(dl({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=ms.Pop;let y=d(),x=y==null?null:y-u;u=y,c&&c({action:l,location:g.location,delta:x})}function f(y,x){l=ms.Push;let w=gp(g.location,y,x);u=d()+1;let v=mw(w,u),_=g.createHref(w);try{a.pushState(v,"",_)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(_)}i&&c&&c({action:l,location:g.location,delta:1})}function m(y,x){l=ms.Replace;let w=gp(g.location,y,x);u=d();let v=mw(w,u),_=g.createHref(w);a.replaceState(v,"",_),i&&c&&c({action:l,location:g.location,delta:0})}function b(y){let x=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof y=="string"?y:Cu(y);return w=w.replace(/ $/,"%20"),ct(x,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,x)}let g={get action(){return l},get location(){return e(s,a)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(pw,h),c=y,()=>{s.removeEventListener(pw,h),c=null}},createHref(y){return t(s,y)},createURL:b,encodeLocation(y){let x=b(y);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:m,go(y){return a.go(y)}};return g}var gw;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(gw||(gw={}));function kI(e,t,r){return r===void 0&&(r="/"),NI(e,t,r,!1)}function NI(e,t,r,n){let s=typeof t=="string"?Xo(t):t,i=hg(s.pathname||"/",r);if(i==null)return null;let a=S1(e);CI(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=$I(i);l=DI(a[c],u,n)}return l}function S1(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(ct(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=ks([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(ct(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),S1(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:OI(u,i.index),routesMeta:d})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of j1(i.path))s(i,a,c)}),t}function j1(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=j1(n.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function CI(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:MI(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const EI=/^:[\w-]+$/,TI=3,RI=2,PI=1,AI=10,II=-2,vw=e=>e==="*";function OI(e,t){let r=e.split("/"),n=r.length;return r.some(vw)&&(n+=II),t&&(n+=RI),r.filter(s=>!vw(s)).reduce((s,i)=>s+(EI.test(i)?TI:i===""?PI:AI),n)}function MI(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function DI(e,t,r){let{routesMeta:n}=e,s={},i="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=yw({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=yw({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:ks([i,h.pathname]),pathnameBase:zI(ks([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=ks([i,h.pathnameBase]))}return a}function yw(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=LI(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let g=l[h]||"";a=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const b=l[h];return m&&!b?u[f]=void 0:u[f]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function LI(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),_1(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function $I(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return _1(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function hg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function FI(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Xo(e):e;return{pathname:r?r.startsWith("/")?r:UI(r,t):t,search:qI(n),hash:WI(s)}}function UI(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Ch(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function BI(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function fg(e,t){let r=BI(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function pg(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Xo(e):(s=dl({},e),ct(!s.pathname||!s.pathname.includes("?"),Ch("?","pathname","search",s)),ct(!s.pathname||!s.pathname.includes("#"),Ch("#","pathname","hash",s)),ct(!s.search||!s.search.includes("#"),Ch("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=r;else{let h=t.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=FI(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const ks=e=>e.join("/").replace(/\/\/+/g,"/"),zI=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),qI=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,WI=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function VI(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const k1=["post","put","patch","delete"];new Set(k1);const HI=["get",...k1];new Set(HI);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hl(){return hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hl.apply(this,arguments)}const mg=p.createContext(null),KI=p.createContext(null),Ls=p.createContext(null),wd=p.createContext(null),Fn=p.createContext({outlet:null,matches:[],isDataRoute:!1}),N1=p.createContext(null);function GI(e,t){let{relative:r}=t===void 0?{}:t;Zo()||ct(!1);let{basename:n,navigator:s}=p.useContext(Ls),{hash:i,pathname:a,search:l}=E1(e,{relative:r}),c=a;return n!=="/"&&(c=a==="/"?n:ks([n,a])),s.createHref({pathname:c,search:l,hash:i})}function Zo(){return p.useContext(wd)!=null}function $s(){return Zo()||ct(!1),p.useContext(wd).location}function C1(e){p.useContext(Ls).static||p.useLayoutEffect(e)}function Fs(){let{isDataRoute:e}=p.useContext(Fn);return e?aO():YI()}function YI(){Zo()||ct(!1);let e=p.useContext(mg),{basename:t,future:r,navigator:n}=p.useContext(Ls),{matches:s}=p.useContext(Fn),{pathname:i}=$s(),a=JSON.stringify(fg(s,r.v7_relativeSplatPath)),l=p.useRef(!1);return C1(()=>{l.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=pg(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:ks([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,a,i,e])}function ea(){let{matches:e}=p.useContext(Fn),t=e[e.length-1];return t?t.params:{}}function E1(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=p.useContext(Ls),{matches:s}=p.useContext(Fn),{pathname:i}=$s(),a=JSON.stringify(fg(s,n.v7_relativeSplatPath));return p.useMemo(()=>pg(e,JSON.parse(a),i,r==="path"),[e,a,i,r])}function QI(e,t){return JI(e,t)}function JI(e,t,r,n){Zo()||ct(!1);let{navigator:s}=p.useContext(Ls),{matches:i}=p.useContext(Fn),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=$s(),d;if(t){var h;let y=typeof t=="string"?Xo(t):t;c==="/"||(h=y.pathname)!=null&&h.startsWith(c)||ct(!1),d=y}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let y=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(y.length).join("/")}let b=kI(e,{pathname:m}),g=rO(b&&b.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:ks([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:ks([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,n);return t&&g?p.createElement(wd.Provider,{value:{location:hl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ms.Pop}},g):g}function XI(){let e=oO(),t=VI(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:s},r):null,null)}const ZI=p.createElement(XI,null);class eO extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?p.createElement(Fn.Provider,{value:this.props.routeContext},p.createElement(N1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tO(e){let{routeContext:t,match:r,children:n}=e,s=p.useContext(mg);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(Fn.Provider,{value:t},n)}function rO(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||ct(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=r,b=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||b){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,f)=>{let m,b=!1,g=null,y=null;r&&(m=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||ZI,c&&(u<0&&f===0?(b=!0,y=null):u===f&&(b=!0,y=h.route.hydrateFallbackElement||null)));let x=t.concat(a.slice(0,f+1)),w=()=>{let v;return m?v=g:b?v=y:h.route.Component?v=p.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=d,p.createElement(tO,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:v})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?p.createElement(eO,{location:r.location,revalidation:r.revalidation,component:g,error:m,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):w()},null)}var T1=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(T1||{}),Eu=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Eu||{});function nO(e){let t=p.useContext(mg);return t||ct(!1),t}function sO(e){let t=p.useContext(KI);return t||ct(!1),t}function iO(e){let t=p.useContext(Fn);return t||ct(!1),t}function R1(e){let t=iO(),r=t.matches[t.matches.length-1];return r.route.id||ct(!1),r.route.id}function oO(){var e;let t=p.useContext(N1),r=sO(Eu.UseRouteError),n=R1(Eu.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function aO(){let{router:e}=nO(T1.UseNavigateStable),t=R1(Eu.UseNavigateStable),r=p.useRef(!1);return C1(()=>{r.current=!0}),p.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,hl({fromRouteId:t},i)))},[e,t])}function lO(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function fl(e){let{to:t,replace:r,state:n,relative:s}=e;Zo()||ct(!1);let{future:i,static:a}=p.useContext(Ls),{matches:l}=p.useContext(Fn),{pathname:c}=$s(),u=Fs(),d=pg(t,fg(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return p.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function wt(e){ct(!1)}function cO(e){let{basename:t="/",children:r=null,location:n,navigationType:s=ms.Pop,navigator:i,static:a=!1,future:l}=e;Zo()&&ct(!1);let c=t.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:i,static:a,future:hl({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof n=="string"&&(n=Xo(n));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:b="default"}=n,g=p.useMemo(()=>{let y=hg(d,c);return y==null?null:{location:{pathname:y,search:h,hash:f,state:m,key:b},navigationType:s}},[c,d,h,f,m,b,s]);return g==null?null:p.createElement(Ls.Provider,{value:u},p.createElement(wd.Provider,{children:r,value:g}))}function uO(e){let{children:t,location:r}=e;return QI(vp(t),r)}new Promise(()=>{});function vp(e,t){t===void 0&&(t=[]);let r=[];return p.Children.forEach(e,(n,s)=>{if(!p.isValidElement(n))return;let i=[...t,s];if(n.type===p.Fragment){r.push.apply(r,vp(n.props.children,i));return}n.type!==wt&&ct(!1),!n.props.index||!n.props.children||ct(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=vp(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yp(){return yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yp.apply(this,arguments)}function dO(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function hO(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function fO(e,t){return e.button===0&&(!t||t==="_self")&&!hO(e)}function wp(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function pO(e,t){let r=wp(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}const mO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gO="6";try{window.__reactRouterVersion=gO}catch{}const vO="startTransition",ww=Yp[vO];function yO(e){let{basename:t,children:r,future:n,window:s}=e,i=p.useRef();i.current==null&&(i.current=_I({window:s,v5Compat:!0}));let a=i.current,[l,c]=p.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},d=p.useCallback(h=>{u&&ww?ww(()=>c(h)):c(h)},[c,u]);return p.useLayoutEffect(()=>a.listen(d),[a,d]),p.useEffect(()=>lO(n),[n]),p.createElement(cO,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:a,future:n})}const wO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xe=p.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=dO(t,mO),{basename:m}=p.useContext(Ls),b,g=!1;if(typeof u=="string"&&xO.test(u)&&(b=u,wO))try{let v=new URL(window.location.href),_=u.startsWith("//")?new URL(v.protocol+u):new URL(u),S=hg(_.pathname,m);_.origin===v.origin&&S!=null?u=S+_.search+_.hash:g=!0}catch{}let y=GI(u,{relative:s}),x=bO(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function w(v){n&&n(v),v.defaultPrevented||x(v)}return p.createElement("a",yp({},f,{href:b||y,onClick:g||i?n:w,ref:r,target:c}))});var xw;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(xw||(xw={}));var bw;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(bw||(bw={}));function bO(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:l}=t===void 0?{}:t,c=Fs(),u=$s(),d=E1(e,{relative:a});return p.useCallback(h=>{if(fO(h,r)){h.preventDefault();let f=n!==void 0?n:Cu(u)===Cu(d);c(e,{replace:f,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,d,n,s,r,e,i,a,l])}function _O(e){let t=p.useRef(wp(e)),r=p.useRef(!1),n=$s(),s=p.useMemo(()=>pO(n.search,r.current?null:t.current),[n.search]),i=Fs(),a=p.useCallback((l,c)=>{const u=wp(typeof l=="function"?l(s):l);r.current=!0,i("?"+u,c)},[i,s]);return[s,a]}var cn=function(){return cn=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},cn.apply(this,arguments)};function ta(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function SO(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function jO(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}const kO=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class gg extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class NO extends gg{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class _w extends gg{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Sw extends gg{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var xp;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(xp||(xp={}));class CO{constructor(t,{headers:r={},customFetch:n,region:s=xp.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=kO(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return SO(this,arguments,void 0,function*(r,n={}){var s;let i,a;try{const{headers:l,method:c,body:u,signal:d,timeout:h}=n;let f={},{region:m}=n;m||(m=this.region);const b=new URL(`${this.url}/${r}`);m&&m!=="any"&&(f["x-region"]=m,b.searchParams.set("forceFunctionRegion",m));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(f["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(f["Content-Type"]="application/json",g=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?g=JSON.stringify(u):g=u;let y=d;h&&(a=new AbortController,i=setTimeout(()=>a.abort(),h),d?(y=a.signal,d.addEventListener("abort",()=>a.abort())):y=a.signal);const x=yield this.fetch(b.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:g,signal:y}).catch(S=>{throw new NO(S)}),w=x.headers.get("x-relay-error");if(w&&w==="true")throw new _w(x);if(!x.ok)throw new Sw(x);let v=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return v==="application/json"?_=yield x.json():v==="application/octet-stream"||v==="application/pdf"?_=yield x.blob():v==="text/event-stream"?_=x:v==="multipart/form-data"?_=yield x.formData():_=yield x.text(),{data:_,error:null,response:x}}catch(l){return{data:null,error:l,response:l instanceof Sw||l instanceof _w?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var EO=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},TO=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let a=null,l=null,c=null,u=i.status,d=i.statusText;if(i.ok){var h,f;if(r.method!=="HEAD"){var m;const x=await i.text();x===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((m=r.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?l=x:l=JSON.parse(x))}const g=(h=r.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),y=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");g&&y&&y.length>1&&(c=parseInt(y[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(a={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var b;const g=await i.text();try{a=JSON.parse(g),Array.isArray(a)&&i.status===404&&(l=[],a=null,u=200,d="OK")}catch{i.status===404&&g===""?(u=204,d="No Content"):a={message:g}}if(a&&r.isMaybeSingle&&(!(a==null||(b=a.details)===null||b===void 0)&&b.includes("0 rows"))&&(a=null,u=200,d="OK"),a&&r.shouldThrowOnError)throw new EO(a)}return{error:a,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(i=>{var a;let l="";const c=i==null?void 0:i.cause;if(c){var u,d,h,f;const b=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",g=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";l=`${(h=i==null?void 0:i.name)!==null&&h!==void 0?h:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"Error"}: ${b}`,g&&(l+=` (${g})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var m;l=(m=i==null?void 0:i.stack)!==null&&m!==void 0?m:""}return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},RO=class extends TO{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const jw=new RegExp("[,()]");var Vi=class extends RO{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&jw.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&jw.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},PO=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},s=r?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",a),n&&c.append("Prefer",`count=${n}`),new Vi({method:s,url:l,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const s="POST",{url:i,headers:a}=this.cloneRequestState();if(t&&a.append("Prefer",`count=${t}`),r||a.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);i.searchParams.set("columns",c.join(","))}}return new Vi({method:s,url:i,headers:a,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const a="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),n&&c.append("Prefer",`count=${n}`),s||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);l.searchParams.set("columns",d.join(","))}}return new Vi({method:a,url:l,headers:c,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Vi({method:n,url:s,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Vi({method:r,url:n,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},AO=class P1{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new PO(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new P1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){var a;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;const d=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(d)),h=n&&Object.values(r).some(d);h?(l="POST",u=r):n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([m,b])=>b!==void 0).map(([m,b])=>[m,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([m,b])=>{c.searchParams.append(m,b)})):(l="POST",u=r);const f=new Headers(this.headers);return h?f.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&f.set("Prefer",`count=${i}`),new Vi({method:l,url:c,headers:f,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class IO{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const OO="2.91.0",MO=`realtime-js/${OO}`,DO="1.0.0",A1="2.0.0",kw=A1,bp=1e4,LO=1e3,$O=100;var Zn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Zn||(Zn={}));var ft;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ft||(ft={}));var Ur;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ur||(Ur={}));var _p;(function(e){e.websocket="websocket"})(_p||(_p={}));var Gs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Gs||(Gs={}));class FO{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var r,n;const s=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},a=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(t,r,n){var s,i;const a=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+a.length+u.length+h.length,m=new ArrayBuffer(this.HEADER_LENGTH+f);let b=new DataView(m),g=0;b.setUint8(g++,this.KINDS.userBroadcastPush),b.setUint8(g++,c.length),b.setUint8(g++,l.length),b.setUint8(g++,a.length),b.setUint8(g++,u.length),b.setUint8(g++,h.length),b.setUint8(g++,r),Array.from(c,x=>b.setUint8(g++,x.charCodeAt(0))),Array.from(l,x=>b.setUint8(g++,x.charCodeAt(0))),Array.from(a,x=>b.setUint8(g++,x.charCodeAt(0))),Array.from(u,x=>b.setUint8(g++,x.charCodeAt(0))),Array.from(h,x=>b.setUint8(g++,x.charCodeAt(0)));var y=new Uint8Array(m.byteLength+n.byteLength);return y.set(new Uint8Array(m),0),y.set(new Uint8Array(n),m.byteLength),y.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,a,l,c]=n;return r({join_ref:s,ref:i,topic:a,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),a=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+s));c=c+s;const d=n.decode(t.slice(c,c+i));c=c+i;const h=n.decode(t.slice(c,c+a));c=c+a;const f=t.slice(c,t.byteLength),m=l===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,b={type:this.BROADCAST_EVENT,event:d,payload:m};return a>0&&(b.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class I1{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var qe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(qe||(qe={}));const Nw=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,a)=>(i[a]=UO(a,e,t,s),i),{}):{}},UO=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=r[e];return i&&!n.includes(i)?O1(i,a):Sp(a)},O1=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return WO(t,r)}switch(e){case qe.bool:return BO(t);case qe.float4:case qe.float8:case qe.int2:case qe.int4:case qe.int8:case qe.numeric:case qe.oid:return zO(t);case qe.json:case qe.jsonb:return qO(t);case qe.timestamp:return VO(t);case qe.abstime:case qe.date:case qe.daterange:case qe.int4range:case qe.int8range:case qe.money:case qe.reltime:case qe.text:case qe.time:case qe.timestamptz:case qe.timetz:case qe.tsrange:case qe.tstzrange:return Sp(t);default:return Sp(t)}},Sp=e=>e,BO=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},zO=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},qO=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},WO=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const a=e.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>O1(t,l))}return e},VO=e=>typeof e=="string"?e.replace(" ","T"):e,M1=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Eh{constructor(t,r,n={},s=bp){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Cw;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Cw||(Cw={}));class Ba{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ba.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=Ba.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ba.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),a=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const f=d.map(y=>y.presence_ref),m=h.map(y=>y.presence_ref),b=d.filter(y=>m.indexOf(y.presence_ref)<0),g=h.filter(y=>f.indexOf(y.presence_ref)<0);b.length>0&&(l[u]=b),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...f)}n(l,d,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ew;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ew||(Ew={}));var za;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(za||(za={}));var Sn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Sn||(Sn={}));class oo{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Eh(this,Ur.join,this.params,this.timeout),this.rejoinTimer=new I1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ft.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ur.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new Ba(this),this.broadcastEndpointURL=M1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ft.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[za.PRESENCE]&&this.bindings[za.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Sn.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Sn.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){t==null||t(Sn.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,y=(b=g==null?void 0:g.length)!==null&&b!==void 0?b:0,x=[];for(let w=0;w<y;w++){const v=g[w],{filter:{event:_,schema:S,table:j,filter:k}}=v,C=m&&m[w];if(C&&C.event===_&&oo.isFilterValueEqual(C.schema,S)&&oo.isFilterValueEqual(C.table,j)&&oo.isFilterValueEqual(C.filter,k))x.push(Object.assign(Object.assign({},v),{id:C.id}));else{this.unsubscribe(),this.state=ft.errored,t==null||t(Sn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Sn.SUBSCRIBED);return}}).receive("error",m=>{this.state=ft.errored,t==null||t(Sn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Sn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===ft.joined&&t===za.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:a}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ft.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ur.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Eh(this,Ur.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ft.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),a}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Eh(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>$O){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Ur;if(n&&[l,c,u,d].indexOf(a)>=0&&n!==this._joinRef())return;let f=this._onMessage(a,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var b,g,y;return((b=m.filter)===null||b===void 0?void 0:b.event)==="*"||((y=(g=m.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===a}).map(m=>m.callback(f,n)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var b,g,y,x,w,v,_,S;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const j=m.id,k=(b=m.filter)===null||b===void 0?void 0:b.event;return j&&((g=r.ids)===null||g===void 0?void 0:g.includes(j))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))&&(!(!((x=m.filter)===null||x===void 0)&&x.table)||m.filter.table===((w=r.data)===null||w===void 0?void 0:w.table))}else{const j=(_=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return j==="*"||j===((S=r==null?void 0:r.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof f=="object"&&"ids"in f){const b=f.data,{schema:g,table:y,commit_timestamp:x,type:w,errors:v}=b;f=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:x,eventType:w,new:{},old:{},errors:v}),this._getPayloadRecords(b))}m.callback(f,n)})}_isClosed(){return this.state===ft.closed}_isJoined(){return this.state===ft.joined}_isJoining(){return this.state===ft.joining}_isLeaving(){return this.state===ft.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&oo.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ur.close,{},t)}_onError(t){this._on(Ur.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ft.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Nw(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Nw(t.columns,t.old_record)),r}}const Th=()=>{},xc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},HO=[1e3,2e3,5e3,1e4],KO=1e4,GO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class YO{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=bp,this.transport=null,this.heartbeatIntervalMs=xc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Th,this.ref=0,this.reconnectTimer=null,this.vsn=kw,this.logger=Th,this.conn=null,this.sendBuffer=[],this.serializer=new FO,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${_p.websocket}`,this.httpEndpoint=M1(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=IO.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Zn.connecting:return Gs.Connecting;case Zn.open:return Gs.Open;case Zn.closing:return Gs.Closing;default:return Gs.Closed}}isConnected(){return this.connectionState()===Gs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new oo(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(LO,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},xc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:i,ref:a}=r,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Zn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Zn.open||this.conn.readyState===Zn.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ur.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([GO],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:MO};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Ur.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new I1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},xc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,a,l,c,u,d,h,f,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:bp,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:xc.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Th,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:kw,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:b=>HO[b-1]||KO,this.vsn){case DO:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(b,g)=>g(JSON.stringify(b)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(b,g)=>g(JSON.parse(b));break;case A1:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var pl=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function QO(e,t,r){const n=new URL(t,e);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function JO(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function XO(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:a}){const l=QO(e.baseUrl,n,s),c=await JO(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...a},body:i?JSON.stringify(i):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const m=h?f:void 0,b=m==null?void 0:m.error;throw new pl((b==null?void 0:b.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:m})}return{status:u.status,headers:u.headers,data:f}}}}function bc(e){return e.join("")}var ZO=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:bc(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${bc(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${bc(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${bc(e.namespace)}`}),!0}catch(t){if(t instanceof pl&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof pl&&r.status===409)return;throw r}}};function Mi(e){return e.join("")}var eM=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Mi(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Mi(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Mi(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Mi(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Mi(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Mi(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof pl&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof pl&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},tM=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=XO({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new ZO(this.client,t),this.tableOps=new eM(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},xd=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Je(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var rM=class extends xd{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},jp=class extends xd{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const vg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),nM=()=>Response,kp=e=>{if(Array.isArray(e))return e.map(r=>kp(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=kp(n)}),t},sM=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},iM=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function ml(e){"@babel/helpers - typeof";return ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ml(e)}function oM(e,t){if(ml(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ml(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aM(e){var t=oM(e,"string");return ml(t)=="symbol"?t:t+""}function lM(e,t,r){return(t=aM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tw(Object(r),!0).forEach(function(n){lM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Rh=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},cM=async(e,t,r)=>{e instanceof await nM()&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{const s=e.status||500,i=(n==null?void 0:n.statusCode)||s+"";t(new rM(Rh(n),s,i))}).catch(n=>{t(new jp(Rh(n),n))}):t(new jp(Rh(e),e))},uM=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(sM(n)?(s.headers=we({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),we(we({},s),r))};async function Fl(e,t,r,n,s,i){return new Promise((a,l)=>{e(r,uM(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>cM(c,l,n))})}async function gl(e,t,r,n){return Fl(e,"GET",t,r,n)}async function Dr(e,t,r,n,s){return Fl(e,"POST",t,n,s,r)}async function Np(e,t,r,n,s){return Fl(e,"PUT",t,n,s,r)}async function dM(e,t,r,n){return Fl(e,"HEAD",t,we(we({},r),{},{noResolveJson:!0}),n)}async function yg(e,t,r,n,s){return Fl(e,"DELETE",t,n,s,r)}var hM=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Je(t))return{data:null,error:t};throw t}}};let D1;D1=Symbol.toStringTag;var fM=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[D1]="BlobDownloadBuilder",this.promise=null}asStream(){return new hM(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Je(t))return{data:null,error:t};throw t}}};const pM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Rw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var mM=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=vg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){var s=this;try{let i;const a=we(we({},Rw),n);let l=we(we({},s.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",s.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",a.cacheControl),c&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!a.duplex&&(a.duplex="half")),n!=null&&n.headers&&(l=we(we({},l),n.headers));const u=s._removeEmptyFolders(t),d=s._getFinalPath(u),h=await(e=="PUT"?Np:Dr)(s.fetch,`${s.url}/object/${d}`,i,we({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(Je(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var s=this;const i=s._removeEmptyFolders(e),a=s._getFinalPath(i),l=new URL(s.url+`/object/upload/sign/${a}`);l.searchParams.set("token",t);try{let c;const u=we({upsert:Rw.upsert},n),d=we(we({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:i,fullPath:(await Np(s.fetch,l.toString(),c,{headers:d})).Key},error:null}}catch(c){if(s.shouldThrowOnError)throw c;if(Je(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var r=this;try{let n=r._getFinalPath(e);const s=we({},r.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await Dr(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(r.url+i.url),l=a.searchParams.get("token");if(!l)throw new xd("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;try{return{data:await Dr(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Je(s))return{data:null,error:s};throw s}}async copy(e,t,r){var n=this;try{return{data:{path:(await Dr(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Je(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,r){var n=this;try{let s=n._getFinalPath(e),i=await Dr(n.fetch,`${n.url}/object/sign/${s}`,we({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Je(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,r){var n=this;try{const s=await Dr(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>we(we({},a),{},{signedUrl:a.signedURL?encodeURI(`${n.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Je(s))return{data:null,error:s};throw s}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=n?`?${n}`:"",i=this._getFinalPath(e),a=()=>gl(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new fM(a,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:kp(await gl(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await dM(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Je(n)&&n instanceof jp){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&n.push(a);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;try{return{data:await yg(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}}async list(e,t,r){var n=this;try{const s=we(we(we({},pM),t),{},{prefix:e||""});return{data:await Dr(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Je(s))return{data:null,error:s};throw s}}async listV2(e,t){var r=this;try{const n=we({},e);return{data:await Dr(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const L1="2.91.0",$1={"X-Client-Info":`storage-js/${L1}`};var gM=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const s=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=we(we({},$1),t),this.fetch=vg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await gl(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await gl(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await Dr(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var r=this;try{return{data:await Np(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Je(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await Dr(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await yg(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},vM=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=we(we({},$1),t),this.fetch=vg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Dr(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),s=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await gl(t.fetch,s,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await yg(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Je(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!iM(e))throw new xd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new tM({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const a=s[i];return typeof a!="function"?a:async(...l)=>{try{return{data:await a.apply(s,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}};const wg={"X-Client-Info":`storage-js/${L1}`,"Content-Type":"application/json"};var F1=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function or(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var Ph=class extends F1{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},yM=class extends F1{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const xg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),wM=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Pw=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),xM=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const n=e.status||500,s=e;if(typeof s.json=="function")s.json().then(i=>{const a=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";t(new Ph(Pw(i),n,a))}).catch(()=>{const i=n+"";t(new Ph(s.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";t(new Ph(s.statusText||`HTTP ${n} error`,n,i))}}else t(new yM(Pw(e),e))},bM=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(wM(n)?(s.headers=we({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,we(we({},s),r)):s};async function _M(e,t,r,n,s,i){return new Promise((a,l)=>{e(r,bM(t,n,s,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>a(c)).catch(c=>xM(c,l,n))})}async function ar(e,t,r,n,s){return _M(e,"POST",t,n,s,r)}var SM=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=we(we({},wg),t),this.fetch=xg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await ar(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await ar(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(or(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await ar(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await ar(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(or(n))return{data:null,error:n};throw n}}},jM=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=we(we({},wg),t),this.fetch=xg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await ar(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await ar(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await ar(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await ar(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await ar(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}},kM=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=we(we({},wg),t),this.fetch=xg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await ar(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await ar(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await ar(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await ar(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}}},NM=class extends kM{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new CM(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},CM=class extends SM{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,we(we({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,we(we({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new EM(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},EM=class extends jM{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,we(we({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,we(we({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,we(we({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,we(we({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,we(we({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},TM=class extends gM{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new mM(this.url,this.headers,e,this.fetch)}get vectors(){return new NM(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new vM(this.url+"/iceberg",this.headers,this.fetch)}};const U1="2.91.0",Hi=30*1e3,Cp=3,Ah=Cp*Hi,RM="http://localhost:9999",PM="supabase.auth.token",AM={"X-Client-Info":`gotrue-js/${U1}`},Ep="X-Supabase-Api-Version",B1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},IM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,OM=10*60*1e3;class vl extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function he(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class MM extends vl{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function DM(e){return he(e)&&e.name==="AuthApiError"}class Ys extends vl{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Un extends vl{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class nr extends Un{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function LM(e){return he(e)&&e.name==="AuthSessionMissingError"}class Di extends Un{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class _c extends Un{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Sc extends Un{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $M(e){return he(e)&&e.name==="AuthImplicitGrantRedirectError"}class Aw extends Un{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class FM extends Un{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Tp extends Un{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Ih(e){return he(e)&&e.name==="AuthRetryableFetchError"}class Iw extends Un{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Rp extends Un{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Tu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ow=` 	
\r=`.split(""),UM=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ow.length;t+=1)e[Ow[t].charCodeAt(0)]=-2;for(let t=0;t<Tu.length;t+=1)e[Tu[t].charCodeAt(0)]=t;return e})();function Mw(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Tu[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Tu[n]),t.queuedBits-=6}}function z1(e,t,r){const n=UM[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Dw(e){const t=[],r=a=>{t.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{qM(a,n,r)};for(let a=0;a<e.length;a+=1)z1(e.charCodeAt(a),s,i);return t.join("")}function BM(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function zM(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}BM(n,t)}}function qM(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function go(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)z1(e.charCodeAt(s),r,n);return new Uint8Array(t)}function WM(e){const t=[];return zM(e,r=>t.push(r)),new Uint8Array(t)}function Zs(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Mw(s,r,n)),Mw(null,r,n),t.join("")}function VM(e){return Math.round(Date.now()/1e3)+e}function HM(){return Symbol("auth-callback")}const St=()=>typeof window<"u"&&typeof document<"u",zs={tested:!1,writable:!1},q1=()=>{if(!St())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zs.tested)return zs.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),zs.tested=!0,zs.writable=!0}catch{zs.tested=!0,zs.writable=!1}return zs.writable};function KM(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const W1=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),GM=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ki=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},qs=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},_t=async(e,t)=>{await e.removeItem(t)};class bd{constructor(){this.promise=new bd.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}bd.promiseConstructor=Promise;function Oh(e){const t=e.split(".");if(t.length!==3)throw new Rp("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!IM.test(t[n]))throw new Rp("JWT not in base64url format");return{header:JSON.parse(Dw(t[0])),payload:JSON.parse(Dw(t[1])),signature:go(t[2]),raw:{header:t[0],payload:t[1]}}}async function YM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function QM(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){n(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function JM(e){return("0"+e.toString(16)).substr(-2)}function XM(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,JM).join("")}async function ZM(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function e4(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await ZM(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Li(e,t,r=!1){const n=XM();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Ki(e,`${t}-code-verifier`,s);const i=await e4(n);return[i,n===i?"plain":"s256"]}const t4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function r4(e){const t=e.headers.get(Ep);if(!t||!t.match(t4))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function n4(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function s4(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const i4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function $i(e){if(!i4.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Mh(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function o4(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function Lw(e){return JSON.parse(JSON.stringify(e))}const Hs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),a4=[502,503,504];async function $w(e){var t;if(!GM(e))throw new Tp(Hs(e),0);if(a4.includes(e.status))throw new Tp(Hs(e),e.status);let r;try{r=await e.json()}catch(i){throw new Ys(Hs(i),i)}let n;const s=r4(e);if(s&&s.getTime()>=B1["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Iw(Hs(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new nr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Iw(Hs(r),e.status,r.weak_password.reasons);throw new MM(Hs(r),e.status||500,n)}const l4=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ye(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Ep]||(i[Ep]=B1["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await c4(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function c4(e,t,r,n,s,i){const a=l4(t,n,s,i);let l;try{l=await e(r,Object.assign({},a))}catch(c){throw console.error(c),new Tp(Hs(c),0)}if(l.ok||await $w(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await $w(c)}}function Ir(e){var t;let r=null;h4(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=VM(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Fw(e){const t=Ir(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function rs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function u4(e){return{data:e,error:null}}function d4(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,a=ta(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function Uw(e){return e}function h4(e){return e.access_token&&e.refresh_token&&e.expires_in}const Dh=["global","local","others"];class f4{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=W1(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Dh[0]){if(Dh.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Dh.join(", ")}`);try{return await ye(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:rs})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=ta(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:d4,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(he(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ye(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:rs})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Uw});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(b=>{const g=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(b.split(";")[1].split("=")[1]);u[`${y}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(he(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){$i(t);try{return await ye(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:rs})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){$i(t);try{return await ye(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:rs})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){$i(t);try{return await ye(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:rs})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){$i(t.userId);try{const{data:r,error:n}=await ye(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(he(r))return{data:null,error:r};throw r}}async _deleteFactor(t){$i(t.userId),$i(t.id);try{return{data:await ye(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Uw});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(b=>{const g=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(b.split(";")[1].split("=")[1]);u[`${y}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(he(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await ye(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(he(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await ye(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}}function Bw(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Fi={debug:!!(globalThis&&q1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class V1 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class p4 extends V1{}async function m4(e,t,r){Fi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Fi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Fi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Fi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Fi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new p4(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Fi.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function g4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function H1(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function v4(e){return parseInt(e,16)}function y4(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function w4(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=H1(e.address),b=d?`${d}://${n}`:n,g=e.statement?`${e.statement}
`:"",y=`${b} wants you to sign in with your Ethereum account:
${m}

${g}`;let x=`URI: ${h}
Version: ${f}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(x+=`
Expiration Time: ${s.toISOString()}`),l&&(x+=`
Not Before: ${l.toISOString()}`),c&&(x+=`
Request ID: ${c}`),u){let w=`
Resources:`;for(const v of u){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);w+=`
- ${v}`}x+=w}return`${y}
${x}`}class ut extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Ru extends ut{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function x4({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ut({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ut({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ut({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ut({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ut({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ut({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new ut({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ut({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(K1(a)){if(i.rp.id!==a)return new ut({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ut({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ut({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ut({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ut({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function b4({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ut({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ut({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(K1(n)){if(r.rpId!==n)return new ut({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ut({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ut({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ut({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class _4{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const S4=new _4;function j4(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=ta(e,["challenge","user","excludeCredentials"]),i=go(t).buffer,a=Object.assign(Object.assign({},r),{id:go(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:a});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:go(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function k4(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=ta(e,["challenge","allowCredentials"]),s=go(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const l=r[a];i.allowCredentials[a]=Object.assign(Object.assign({},l),{id:go(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function N4(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Zs(new Uint8Array(e.response.attestationObject)),clientDataJSON:Zs(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function C4(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Zs(new Uint8Array(s.authenticatorData)),clientDataJSON:Zs(new Uint8Array(s.clientDataJSON)),signature:Zs(new Uint8Array(s.signature)),userHandle:s.userHandle?Zs(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function K1(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function zw(){var e,t;return!!(St()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function E4(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ru("Browser returned unexpected credential type",t)}:{data:null,error:new Ru("Empty credential response",t)}}catch(t){return{data:null,error:x4({error:t,options:e})}}}async function T4(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ru("Browser returned unexpected credential type",t)}:{data:null,error:new Ru("Empty credential response",t)}}catch(t){return{data:null,error:b4({error:t,options:e})}}}const R4={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},P4={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Pu(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))n[i]=a;else if(r(a))n[i]=a;else if(t(a)){const l=n[i];t(l)?n[i]=Pu(l,a):n[i]=Pu(a)}else n[i]=a}return n}function A4(e,t){return Pu(R4,e,t||{})}function I4(e,t){return Pu(P4,e,t||{})}class O4{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!a)return{data:null,error:l};const c=s??S4.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=A4(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await E4({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=I4(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await T4(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(a){return he(a)?{data:null,error:a}:{data:null,error:new Ys("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new vl("rpId is required for WebAuthn authentication")};try{if(!zw())return{data:null,error:new Ys("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!a)return{data:null,error:l};const{webauthn:c}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(a){return he(a)?{data:null,error:a}:{data:null,error:new Ys("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new vl("rpId is required for WebAuthn registration")};try{if(!zw())return{data:null,error:new Ys("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(a){return he(a)?{data:null,error:a}:{data:null,error:new Ys("Unexpected error in register",a)}}}}g4();const M4={url:RM,storageKey:PM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:AM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function qw(e,t,r){return await r()}const Ui={};class yl{get jwks(){var t,r;return(r=(t=Ui[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ui[this.storageKey]=Object.assign(Object.assign({},Ui[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ui[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ui[this.storageKey]=Object.assign(Object.assign({},Ui[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},M4),t);if(this.storageKey=i.storageKey,this.instanceID=(r=yl.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,yl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&St()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new f4({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=W1(i.fetch),this.lock=i.lock||qw,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&St()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=m4:this.lock=qw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new O4(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:q1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Bw(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Bw(this.memoryStorage)),St()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${U1}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(St()&&(r=KM(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),St()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),$M(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return he(r)?this._returnResult({error:r}):this._returnResult({error:new Ys("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ir}),{data:a,error:l}=i;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(he(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let m=null,b=null;this.flowType==="pkce"&&([m,b]=await Li(this.storage,this.storageKey)),i=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:b},xform:Ir})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ir})}else throw new _c("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return await _t(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await _t(this.storage,`${this.storageKey}-code-verifier`),he(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:a,options:l}=t;r=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Fw})}else if("phone"in t){const{phone:i,password:a,options:l}=t;r=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Fw})}else throw new _c("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new Di;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(he(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,a,l,c,u,d,h,f;let m,b;if("message"in t)m=t.message,b=t.signature;else{const{chain:g,wallet:y,statement:x,options:w}=t;let v;if(St())if(typeof y=="object")v=y;else{const T=window;if("ethereum"in T&&typeof T.ethereum=="object"&&"request"in T.ethereum&&typeof T.ethereum.request=="function")v=T.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=y}const _=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href),S=await v.request({method:"eth_requestAccounts"}).then(T=>T).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=H1(S[0]);let k=(n=w==null?void 0:w.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!k){const T=await v.request({method:"eth_chainId"});k=v4(T)}const C={domain:_.host,address:j,statement:x,uri:_.href,version:"1",chainId:k,nonce:(s=w==null?void 0:w.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=w==null?void 0:w.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=w==null?void 0:w.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=w==null?void 0:w.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=w==null?void 0:w.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=w4(C),b=await v.request({method:"personal_sign",params:[y4(m),j]})}try{const{data:g,error:y}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:b},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ir});if(y)throw y;if(!g||!g.session||!g.user){const x=new Di;return this._returnResult({data:{user:null,session:null},error:x})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:y})}catch(g){if(he(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var r,n,s,i,a,l,c,u,d,h,f,m;let b,g;if("message"in t)b=t.message,g=t.signature;else{const{chain:y,wallet:x,statement:w,options:v}=t;let _;if(St())if(typeof x=="object")_=x;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))_=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=x}const S=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const j=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),w?{statement:w}:null));let k;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")k=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)k=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)b=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),g=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${S.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const j=await _.signMessage(new TextEncoder().encode(b),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=j}}try{const{data:y,error:x}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Zs(g)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Ir});if(x)throw x;if(!y||!y.session||!y.user){const w=new Di;return this._returnResult({data:{user:null,session:null},error:w})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:x})}catch(y){if(he(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(t){const r=await qs(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new FM;const{data:i,error:a}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ir});if(await _t(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!i||!i.session||!i.user){const l=new Di;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",i.session)},0)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(await _t(this.storage,`${this.storageKey}-code-verifier`),he(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:a}=t,l=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ir}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Di;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(he(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Li(this.storage,this.storageKey));const{error:h}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new _c("You must provide either an email or phone number.")}catch(l){if(await _t(this.storage,`${this.storageKey}-code-verifier`),he(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ir});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(he(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,a;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Li(this.storage,this.storageKey));const u=await ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:u4});return!((i=u.data)===null||i===void 0)&&i.url&&St()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await _t(this.storage,`${this.storageKey}-code-verifier`),he(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new nr;const{error:s}=await ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(he(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:a}=await ye(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:a,error:l}=await ye(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l})}throw new _c("You must provide either an email or phone number and a type")}catch(r){if(he(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await qs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Ah:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const a=await qs(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=Mh()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=o4(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:rs}):await this._useSession(async r=>{var n,s,i;const{data:a,error:l}=r;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new nr}:await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:rs})})}catch(r){if(he(r))return LM(r)&&(await this._removeSession(),await _t(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new nr;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Li(this.storage,this.storageKey));const{data:u,error:d}=await ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:rs});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(await _t(this.storage,`${this.storageKey}-code-verifier`),he(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new nr;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:a}=Oh(t.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(he(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:a,error:l}=r;if(l)throw l;t=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new nr;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(he(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!St())throw new Sc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Sc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Aw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Sc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Aw("No code detected.");const{data:w,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new Sc("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const m=f-d;m*1e3<=Hi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const b=f-h;d-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,f,d):d-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,f,d);const{data:g,error:y}=await this._getUser(i);if(y)throw y;const x={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:t.type},error:null})}catch(n){if(he(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await qs(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(DM(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await _t(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=HM(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Li(this.storage,this.storageKey,!0));try{return await ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await _t(this.storage,`${this.storageKey}-code-verifier`),he(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var a,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ye(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return St()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(he(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:a,provider:l,token:c,access_token:u,nonce:d}=t,h=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ir}),{data:f,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Di}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:m}))}catch(s){if(await _t(this.storage,`${this.storageKey}-code-verifier`),he(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)throw a;return await ye(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await QM(async s=>(s>0&&await YM(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ir})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Ih(i)&&Date.now()+a-n<Hi})}catch(n){if(this._debug(r,"error",n),he(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),St()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await qs(this.storage,this.storageKey);if(s&&this.userStorage){let a=await qs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Ki(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:Mh()}else if(s&&!s.user&&!s.user){const a=await qs(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await _t(this.storage,this.storageKey+"-user"),await Ki(this.storage,this.storageKey,s)):s.user=Mh()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ah;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Ah}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Ih(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new nr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new bd;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new nr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),he(i)){const a={data:null,error:i};return Ih(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await _t(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Ki(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Lw(s);await Ki(this.storage,this.storageKey,i)}else{const s=Lw(r);await Ki(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await _t(this.storage,this.storageKey),await _t(this.storage,this.storageKey+"-code-verifier"),await _t(this.storage,this.storageKey+"-user"),this.userStorage&&await _t(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&St()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Hi);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Hi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Hi}ms, refresh threshold is ${Cp} ticks`),s<=Cp&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof V1)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!St()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await Li(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await ye(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await ye(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?N4(t.webauthn.credential_response):C4(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await ye(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=await ye(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:j4(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:k4(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Oh(n.access_token);let a=null;i.aal&&(a=i.aal);let l=a;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await ye(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new nr})})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new nr});const a=await ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&St()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(he(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new nr});const a=await ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&St()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(he(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await ye(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new nr})})}catch(t){if(he(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await ye(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new nr})})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+OM>s)return n;const{data:i,error:a}=await ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:b}=await this.getSession();if(b||!m.session)return this._returnResult({data:null,error:b});n=m.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=Oh(n);r!=null&&r.allowExpired||n4(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:a},error:null}}const d=s4(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,WM(`${l}.${c}`)))throw new Rp("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(n){if(he(n))return this._returnResult({data:null,error:n});throw n}}}yl.nextInstanceID={};const D4=yl,L4="2.91.0";let Ea="";typeof Deno<"u"?Ea="deno":typeof document<"u"?Ea="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ea="react-native":Ea="node";const $4={"X-Client-Info":`supabase-js-${Ea}/${L4}`},F4={headers:$4},U4={schema:"public"},B4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},z4={};function wl(e){"@babel/helpers - typeof";return wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wl(e)}function q4(e,t){if(wl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W4(e){var t=q4(e,"string");return wl(t)=="symbol"?t:t+""}function V4(e,t,r){return(t=W4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ww(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ww(Object(r),!0).forEach(function(n){V4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ww(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const H4=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),K4=()=>Headers,G4=(e,t,r)=>{const n=H4(r),s=K4();return async(i,a)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,rt(rt({},a),{},{headers:u}))}};function Y4(e){return e.endsWith("/")?e:e+"/"}function Q4(e,t){var r,n;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:rt(rt({},c),s),auth:rt(rt({},u),i),realtime:rt(rt({},d),a),storage:{},global:rt(rt(rt({},h),l),{},{headers:rt(rt({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function J4(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Y4(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var X4=class extends D4{constructor(e){super(e)}},Z4=class{constructor(e,t,r){var n,s;this.supabaseUrl=e,this.supabaseKey=t;const i=J4(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const a=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:U4,realtime:z4,auth:rt(rt({},B4),{},{storageKey:a}),global:F4},c=Q4(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=G4(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(rt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new AO(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new TM(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new CO(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:a,lock:l,debug:c,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new X4({url:this.authUrl.href,headers:rt(rt({},f),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:a,lock:l,debug:c,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new YO(this.realtimeUrl.href,rt(rt({},e),{},{params:rt(rt({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const eD=(e,t,r)=>new Z4(e,t,r);function tD(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}tD()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const rD="https://piszvseyaefxekubphhf.supabase.co",nD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBpc3p2c2V5YWVmeGVrdWJwaGhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwODE3NTEsImV4cCI6MjA4NDY1Nzc1MX0.odmCphs9gpipbjF7zp639J0r8s48SYHnpNsjQvfICSc",R=eD(rD,nD,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),G1=p.createContext(void 0);function sD({children:e}){const[t,r]=p.useState(null),[n,s]=p.useState(null),[i,a]=p.useState(null),[l,c]=p.useState(!0),u=new URL("/remix-of-stackwise-advisor/",window.location.origin).toString(),d=async g=>{const{data:y,error:x}=await R.from("profiles").select("id, user_id, display_name, avatar_url, bio, is_public, follower_count, following_count").eq("user_id",g).single();return x?(console.error("Error fetching profile:",x),null):y};p.useEffect(()=>{const{data:{subscription:g}}=R.auth.onAuthStateChange(async(y,x)=>{s(x),r((x==null?void 0:x.user)??null),x!=null&&x.user?setTimeout(async()=>{const w=await d(x.user.id);a(w)},0):a(null),c(!1)});return R.auth.getSession().then(({data:{session:y}})=>{s(y),r((y==null?void 0:y.user)??null),y!=null&&y.user&&d(y.user.id).then(a),c(!1)}),()=>g.unsubscribe()},[]);const h=async(g,y,x)=>{const{error:w}=await R.auth.signUp({email:g,password:y,options:{emailRedirectTo:u,data:{display_name:x}}});return{error:w}},f=async(g,y)=>{const{error:x}=await R.auth.signInWithPassword({email:g,password:y});return{error:x}},m=async()=>{await R.auth.signOut(),a(null)},b=async g=>{if(!t)return{error:new Error("Not authenticated")};const{error:y}=await R.from("profiles").update(g).eq("user_id",t.id);return y||a(x=>x?{...x,...g}:null),{error:y}};return o.jsx(G1.Provider,{value:{user:t,session:n,profile:i,isLoading:l,signUp:h,signIn:f,signOut:m,updateProfile:b},children:e})}function Ee(){const e=p.useContext(G1);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const iD=ld("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-soft hover:bg-primary/90 hover:shadow-soft-md hover:-translate-y-0.5",destructive:"bg-destructive text-destructive-foreground shadow-soft hover:bg-destructive/90",outline:"border border-border/60 bg-card/50 backdrop-blur-sm hover:bg-accent hover:text-accent-foreground hover:border-primary/30",secondary:"bg-secondary/80 text-secondary-foreground backdrop-blur-sm hover:bg-secondary/60",ghost:"hover:bg-accent/50 hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",glass:"bg-card/40 backdrop-blur-glass border border-border/40 text-foreground hover:bg-card/60 hover:border-primary/30 hover:shadow-soft",glow:"bg-primary text-primary-foreground shadow-glow-aqua hover:shadow-[0_0_40px_hsl(185_55%_50%_/_0.5)]",chrome:"bg-gradient-chrome border border-border/50 text-foreground hover:shadow-soft-md"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),O=p.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},i)=>{const a=n?IT:"button";return o.jsx(a,{className:Y(iD({variant:t,size:r,className:e})),ref:i,...s})});O.displayName="Button";function Vw({variant:e="header",mode:t="all"}){const n=$s().pathname,s=[{path:"/",label:"Home",icon:A2,isPublic:!0},{path:"/inventory",label:"Inventory",icon:Wr,isPublic:!1},{path:"/blueprints",label:"Blueprints",icon:ud,isPublic:!0},{path:"/wall",label:"Wall",icon:fd,isPublic:!0},{path:"/explore",label:"Explore",icon:Ho,isPublic:!0},{path:"/tags",label:"Tags",icon:__,isPublic:!1}],i=t==="public"?s.filter(a=>a.isPublic):s;return e==="floating"?o.jsx("nav",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-40 flex items-center gap-1 p-1 bg-card/80 backdrop-blur-glass rounded-full border border-border/50 shadow-soft-lg",children:i.map(a=>{const l=n===a.path,c=a.icon;return o.jsx(xe,{to:a.path,children:o.jsxs(O,{variant:l?"default":"ghost",size:"sm",className:Y("gap-2 rounded-full",l&&"bg-primary text-primary-foreground"),children:[o.jsx(c,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:a.label})]})},a.path)})}):o.jsx("nav",{className:"flex items-center gap-1 p-1 bg-card/50 backdrop-blur-sm rounded-xl border border-border/30",children:i.map(a=>{const l=n===a.path,c=a.icon;return o.jsx(xe,{to:a.path,children:o.jsxs(O,{variant:l?"glass":"ghost",size:"sm",className:Y("gap-2",l&&"bg-accent/50 pointer-events-none"),children:[o.jsx(c,{className:"h-4 w-4"}),a.label]})},a.path)})})}var oD=p.createContext(void 0);function ra(e){const t=p.useContext(oD);return e||t||"ltr"}var Lh=0;function bg(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Hw()),document.body.insertAdjacentElement("beforeend",e[1]??Hw()),Lh++,()=>{Lh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Lh--}},[])}function Hw(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var $h="focusScope.autoFocusOnMount",Fh="focusScope.autoFocusOnUnmount",Kw={bubbles:!1,cancelable:!0},aD="FocusScope",_d=p.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=e,[l,c]=p.useState(null),u=st(s),d=st(i),h=p.useRef(null),f=je(t,g=>c(g)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let g=function(v){if(m.paused||!l)return;const _=v.target;l.contains(_)?h.current=_:Qn(h.current,{select:!0})},y=function(v){if(m.paused||!l)return;const _=v.relatedTarget;_!==null&&(l.contains(_)||Qn(h.current,{select:!0}))},x=function(v){if(document.activeElement===document.body)for(const S of v)S.removedNodes.length>0&&Qn(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const w=new MutationObserver(x);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),w.disconnect()}}},[n,l,m.paused]),p.useEffect(()=>{if(l){Yw.add(m);const g=document.activeElement;if(!l.contains(g)){const x=new CustomEvent($h,Kw);l.addEventListener($h,u),l.dispatchEvent(x),x.defaultPrevented||(lD(fD(Y1(l)),{select:!0}),document.activeElement===g&&Qn(l))}return()=>{l.removeEventListener($h,u),setTimeout(()=>{const x=new CustomEvent(Fh,Kw);l.addEventListener(Fh,d),l.dispatchEvent(x),x.defaultPrevented||Qn(g??document.body,{select:!0}),l.removeEventListener(Fh,d),Yw.remove(m)},0)}}},[l,u,d,m]);const b=p.useCallback(g=>{if(!r&&!n||m.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(y&&x){const w=g.currentTarget,[v,_]=cD(w);v&&_?!g.shiftKey&&x===_?(g.preventDefault(),r&&Qn(v,{select:!0})):g.shiftKey&&x===v&&(g.preventDefault(),r&&Qn(_,{select:!0})):x===w&&g.preventDefault()}},[r,n,m.paused]);return o.jsx(le.div,{tabIndex:-1,...a,ref:f,onKeyDown:b})});_d.displayName=aD;function lD(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Qn(n,{select:t}),document.activeElement!==r)return}function cD(e){const t=Y1(e),r=Gw(t,e),n=Gw(t.reverse(),e);return[r,n]}function Y1(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Gw(e,t){for(const r of e)if(!uD(r,{upTo:t}))return r}function uD(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function dD(e){return e instanceof HTMLInputElement&&"select"in e}function Qn(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&dD(e)&&t&&e.select()}}var Yw=hD();function hD(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=Qw(e,t),e.unshift(t)},remove(t){var r;e=Qw(e,t),(r=e[0])==null||r.resume()}}}function Qw(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function fD(e){return e.filter(t=>t.tagName!=="A")}var Uh="rovingFocusGroup.onEntryFocus",pD={bubbles:!1,cancelable:!0},Ul="RovingFocusGroup",[Pp,Q1,mD]=Ml(Ul),[gD,Sd]=Mt(Ul,[mD]),[vD,yD]=gD(Ul),J1=p.forwardRef((e,t)=>o.jsx(Pp.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(Pp.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(wD,{...e,ref:t})})}));J1.displayName=Ul;var wD=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,f=p.useRef(null),m=je(t,f),b=ra(i),[g,y]=Cr({prop:a,defaultProp:l??null,onChange:c,caller:Ul}),[x,w]=p.useState(!1),v=st(u),_=Q1(r),S=p.useRef(!1),[j,k]=p.useState(0);return p.useEffect(()=>{const C=f.current;if(C)return C.addEventListener(Uh,v),()=>C.removeEventListener(Uh,v)},[v]),o.jsx(vD,{scope:r,orientation:n,dir:b,loop:s,currentTabStopId:g,onItemFocus:p.useCallback(C=>y(C),[y]),onItemShiftTab:p.useCallback(()=>w(!0),[]),onFocusableItemAdd:p.useCallback(()=>k(C=>C+1),[]),onFocusableItemRemove:p.useCallback(()=>k(C=>C-1),[]),children:o.jsx(le.div,{tabIndex:x||j===0?-1:0,"data-orientation":n,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:H(e.onMouseDown,()=>{S.current=!0}),onFocus:H(e.onFocus,C=>{const T=!S.current;if(C.target===C.currentTarget&&T&&!x){const A=new CustomEvent(Uh,pD);if(C.currentTarget.dispatchEvent(A),!A.defaultPrevented){const $=_().filter(M=>M.focusable),D=$.find(M=>M.active),X=$.find(M=>M.id===g),ae=[D,X,...$].filter(Boolean).map(M=>M.ref.current);eS(ae,d)}}S.current=!1}),onBlur:H(e.onBlur,()=>w(!1))})})}),X1="RovingFocusGroupItem",Z1=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,children:a,...l}=e,c=Sr(),u=i||c,d=yD(X1,r),h=d.currentTabStopId===u,f=Q1(r),{onFocusableItemAdd:m,onFocusableItemRemove:b,currentTabStopId:g}=d;return p.useEffect(()=>{if(n)return m(),()=>b()},[n,m,b]),o.jsx(Pp.ItemSlot,{scope:r,id:u,focusable:n,active:s,children:o.jsx(le.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:H(e.onMouseDown,y=>{n?d.onItemFocus(u):y.preventDefault()}),onFocus:H(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:H(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const x=_D(y,d.orientation,d.dir);if(x!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let v=f().filter(_=>_.focusable).map(_=>_.ref.current);if(x==="last")v.reverse();else if(x==="prev"||x==="next"){x==="prev"&&v.reverse();const _=v.indexOf(y.currentTarget);v=d.loop?SD(v,_+1):v.slice(_+1)}setTimeout(()=>eS(v))}}),children:typeof a=="function"?a({isCurrentTabStop:h,hasTabStop:g!=null}):a})})});Z1.displayName=X1;var xD={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function bD(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function _D(e,t,r){const n=bD(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return xD[n]}function eS(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function SD(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var tS=J1,rS=Z1,jD=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Bi=new WeakMap,jc=new WeakMap,kc={},Bh=0,nS=function(e){return e&&(e.host||nS(e.parentNode))},kD=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=nS(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},ND=function(e,t,r,n){var s=kD(t,Array.isArray(e)?e:[e]);kc[r]||(kc[r]=new WeakMap);var i=kc[r],a=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))d(f);else try{var m=f.getAttribute(n),b=m!==null&&m!=="false",g=(Bi.get(f)||0)+1,y=(i.get(f)||0)+1;Bi.set(f,g),i.set(f,y),a.push(f),g===1&&b&&jc.set(f,!0),y===1&&f.setAttribute(r,"true"),b||f.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",f,x)}})};return d(t),l.clear(),Bh++,function(){a.forEach(function(h){var f=Bi.get(h)-1,m=i.get(h)-1;Bi.set(h,f),i.set(h,m),f||(jc.has(h)||h.removeAttribute(n),jc.delete(h)),m||h.removeAttribute(r)}),Bh--,Bh||(Bi=new WeakMap,Bi=new WeakMap,jc=new WeakMap,kc={})}},_g=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=jD(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),ND(n,s,r,"aria-hidden")):function(){return null}},Kc="right-scroll-bar-position",Gc="width-before-scroll-bar",CD="with-scroll-bars-hidden",ED="--removed-body-scroll-bar-size";function zh(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function TD(e,t){var r=p.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var RD=typeof window<"u"?p.useLayoutEffect:p.useEffect,Jw=new WeakMap;function PD(e,t){var r=TD(null,function(n){return e.forEach(function(s){return zh(s,n)})});return RD(function(){var n=Jw.get(r);if(n){var s=new Set(n),i=new Set(e),a=r.current;s.forEach(function(l){i.has(l)||zh(l,null)}),i.forEach(function(l){s.has(l)||zh(l,a)})}Jw.set(r,e)},[e]),r}function AD(e){return e}function ID(e,t){t===void 0&&(t=AD);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var a=t(i,n);return r.push(a),function(){r=r.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(n=!0;r.length;){var a=r;r=[],a.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var a=[];if(r.length){var l=r;r=[],l.forEach(i),a=r}var c=function(){var d=a;a=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),r}}}};return s}function OD(e){e===void 0&&(e={});var t=ID(null);return t.options=cn({async:!0,ssr:!1},e),t}var sS=function(e){var t=e.sideCar,r=ta(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return p.createElement(n,cn({},r))};sS.isSideCarExport=!0;function MD(e,t){return e.useMedium(t),sS}var iS=OD(),qh=function(){},jd=p.forwardRef(function(e,t){var r=p.useRef(null),n=p.useState({onScrollCapture:qh,onWheelCapture:qh,onTouchMoveCapture:qh}),s=n[0],i=n[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,f=e.sideCar,m=e.noRelative,b=e.noIsolation,g=e.inert,y=e.allowPinchZoom,x=e.as,w=x===void 0?"div":x,v=e.gapMode,_=ta(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,j=PD([r,t]),k=cn(cn({},_),s);return p.createElement(p.Fragment,null,d&&p.createElement(S,{sideCar:iS,removeScrollBar:u,shards:h,noRelative:m,noIsolation:b,inert:g,setCallbacks:i,allowPinchZoom:!!y,lockRef:r,gapMode:v}),a?p.cloneElement(p.Children.only(l),cn(cn({},k),{ref:j})):p.createElement(w,cn({},k,{className:c,ref:j}),l))});jd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};jd.classNames={fullWidth:Gc,zeroRight:Kc};var DD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function LD(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=DD();return t&&e.setAttribute("nonce",t),e}function $D(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function FD(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var UD=function(){var e=0,t=null;return{add:function(r){e==0&&(t=LD())&&($D(t,r),FD(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},BD=function(){var e=UD();return function(t,r){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},oS=function(){var e=BD(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},zD={left:0,top:0,right:0,gap:0},Wh=function(e){return parseInt(e||"",10)||0},qD=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Wh(r),Wh(n),Wh(s)]},WD=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return zD;var t=qD(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},VD=oS(),vo="data-scroll-locked",HD=function(e,t,r,n){var s=e.left,i=e.top,a=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(CD,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(vo,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Kc,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Gc,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Kc," .").concat(Kc,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Gc," .").concat(Gc,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(vo,`] {
    `).concat(ED,": ").concat(l,`px;
  }
`)},Xw=function(){var e=parseInt(document.body.getAttribute(vo)||"0",10);return isFinite(e)?e:0},KD=function(){p.useEffect(function(){return document.body.setAttribute(vo,(Xw()+1).toString()),function(){var e=Xw()-1;e<=0?document.body.removeAttribute(vo):document.body.setAttribute(vo,e.toString())}},[])},GD=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;KD();var i=p.useMemo(function(){return WD(s)},[s]);return p.createElement(VD,{styles:HD(i,!t,s,r?"":"!important")})},Ap=!1;if(typeof window<"u")try{var Nc=Object.defineProperty({},"passive",{get:function(){return Ap=!0,!0}});window.addEventListener("test",Nc,Nc),window.removeEventListener("test",Nc,Nc)}catch{Ap=!1}var zi=Ap?{passive:!1}:!1,YD=function(e){return e.tagName==="TEXTAREA"},aS=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!YD(e)&&r[t]==="visible")},QD=function(e){return aS(e,"overflowY")},JD=function(e){return aS(e,"overflowX")},Zw=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=lS(e,n);if(s){var i=cS(e,n),a=i[1],l=i[2];if(a>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},XD=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},ZD=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},lS=function(e,t){return e==="v"?QD(t):JD(t)},cS=function(e,t){return e==="v"?XD(t):ZD(t)},eL=function(e,t){return e==="h"&&t==="rtl"?-1:1},tL=function(e,t,r,n,s){var i=eL(e,window.getComputedStyle(t).direction),a=i*n,l=r.target,c=t.contains(l),u=!1,d=a>0,h=0,f=0;do{if(!l)break;var m=cS(e,l),b=m[0],g=m[1],y=m[2],x=g-y-i*b;(b||x)&&lS(e,l)&&(h+=x,f+=b);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(f)<1||!s))&&(u=!0),u},Cc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ex=function(e){return[e.deltaX,e.deltaY]},tx=function(e){return e&&"current"in e?e.current:e},rL=function(e,t){return e[0]===t[0]&&e[1]===t[1]},nL=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},sL=0,qi=[];function iL(e){var t=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),s=p.useState(sL++)[0],i=p.useState(oS)[0],a=p.useRef(e);p.useEffect(function(){a.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=jO([e.lockRef.current],(e.shards||[]).map(tx),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var x=Cc(g),w=r.current,v="deltaX"in g?g.deltaX:w[0]-x[0],_="deltaY"in g?g.deltaY:w[1]-x[1],S,j=g.target,k=Math.abs(v)>Math.abs(_)?"h":"v";if("touches"in g&&k==="h"&&j.type==="range")return!1;var C=Zw(k,j);if(!C)return!0;if(C?S=k:(S=k==="v"?"h":"v",C=Zw(k,j)),!C)return!1;if(!n.current&&"changedTouches"in g&&(v||_)&&(n.current=S),!S)return!0;var T=n.current||S;return tL(T,y,g,T==="h"?v:_,!0)},[]),c=p.useCallback(function(g){var y=g;if(!(!qi.length||qi[qi.length-1]!==i)){var x="deltaY"in y?ex(y):Cc(y),w=t.current.filter(function(S){return S.name===y.type&&(S.target===y.target||y.target===S.shadowParent)&&rL(S.delta,x)})[0];if(w&&w.should){y.cancelable&&y.preventDefault();return}if(!w){var v=(a.current.shards||[]).map(tx).filter(Boolean).filter(function(S){return S.contains(y.target)}),_=v.length>0?l(y,v[0]):!a.current.noIsolation;_&&y.cancelable&&y.preventDefault()}}},[]),u=p.useCallback(function(g,y,x,w){var v={name:g,delta:y,target:x,should:w,shadowParent:oL(x)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(_){return _!==v})},1)},[]),d=p.useCallback(function(g){r.current=Cc(g),n.current=void 0},[]),h=p.useCallback(function(g){u(g.type,ex(g),g.target,l(g,e.lockRef.current))},[]),f=p.useCallback(function(g){u(g.type,Cc(g),g.target,l(g,e.lockRef.current))},[]);p.useEffect(function(){return qi.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,zi),document.addEventListener("touchmove",c,zi),document.addEventListener("touchstart",d,zi),function(){qi=qi.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,zi),document.removeEventListener("touchmove",c,zi),document.removeEventListener("touchstart",d,zi)}},[]);var m=e.removeScrollBar,b=e.inert;return p.createElement(p.Fragment,null,b?p.createElement(i,{styles:nL(s)}):null,m?p.createElement(GD,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function oL(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const aL=MD(iS,iL);var kd=p.forwardRef(function(e,t){return p.createElement(jd,cn({},e,{ref:t,sideCar:aL}))});kd.classNames=jd.classNames;var Ip=["Enter"," "],lL=["ArrowDown","PageUp","Home"],uS=["ArrowUp","PageDown","End"],cL=[...lL,...uS],uL={ltr:[...Ip,"ArrowRight"],rtl:[...Ip,"ArrowLeft"]},dL={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Bl="Menu",[xl,hL,fL]=Ml(Bl),[Ri,dS]=Mt(Bl,[fL,Qo,Sd]),Nd=Qo(),hS=Sd(),[pL,Pi]=Ri(Bl),[mL,zl]=Ri(Bl),fS=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:s,onOpenChange:i,modal:a=!0}=e,l=Nd(t),[c,u]=p.useState(null),d=p.useRef(!1),h=st(i),f=ra(s);return p.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),o.jsx(e1,{...l,children:o.jsx(pL,{scope:t,open:r,onOpenChange:h,content:c,onContentChange:u,children:o.jsx(mL,{scope:t,onClose:p.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:a,children:n})})})};fS.displayName=Bl;var gL="MenuAnchor",Sg=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=Nd(r);return o.jsx(sg,{...s,...n,ref:t})});Sg.displayName=gL;var jg="MenuPortal",[vL,pS]=Ri(jg,{forceMount:void 0}),mS=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:s}=e,i=Pi(jg,t);return o.jsx(vL,{scope:t,forceMount:r,children:o.jsx(Ct,{present:r||i.open,children:o.jsx(Dl,{asChild:!0,container:s,children:n})})})};mS.displayName=jg;var jr="MenuContent",[yL,kg]=Ri(jr),gS=p.forwardRef((e,t)=>{const r=pS(jr,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,i=Pi(jr,e.__scopeMenu),a=zl(jr,e.__scopeMenu);return o.jsx(xl.Provider,{scope:e.__scopeMenu,children:o.jsx(Ct,{present:n||i.open,children:o.jsx(xl.Slot,{scope:e.__scopeMenu,children:a.modal?o.jsx(wL,{...s,ref:t}):o.jsx(xL,{...s,ref:t})})})})}),wL=p.forwardRef((e,t)=>{const r=Pi(jr,e.__scopeMenu),n=p.useRef(null),s=je(t,n);return p.useEffect(()=>{const i=n.current;if(i)return _g(i)},[]),o.jsx(Ng,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:H(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),xL=p.forwardRef((e,t)=>{const r=Pi(jr,e.__scopeMenu);return o.jsx(Ng,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),bL=yi("MenuContent.ScrollLock"),Ng=p.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:b,...g}=e,y=Pi(jr,r),x=zl(jr,r),w=Nd(r),v=hS(r),_=hL(r),[S,j]=p.useState(null),k=p.useRef(null),C=je(t,k,y.onContentChange),T=p.useRef(0),A=p.useRef(""),$=p.useRef(0),D=p.useRef(null),X=p.useRef("right"),I=p.useRef(0),ae=b?kd:p.Fragment,M=b?{as:bL,allowPinchZoom:!0}:void 0,Z=E=>{var L,ue;const B=A.current+E,ie=_().filter(_e=>!_e.disabled),Q=document.activeElement,me=(L=ie.find(_e=>_e.ref.current===Q))==null?void 0:L.textValue,U=ie.map(_e=>_e.textValue),de=IL(U,B,me),ge=(ue=ie.find(_e=>_e.textValue===de))==null?void 0:ue.ref.current;(function _e(V){A.current=V,window.clearTimeout(T.current),V!==""&&(T.current=window.setTimeout(()=>_e(""),1e3))})(B),ge&&setTimeout(()=>ge.focus())};p.useEffect(()=>()=>window.clearTimeout(T.current),[]),bg();const P=p.useCallback(E=>{var ie,Q;return X.current===((ie=D.current)==null?void 0:ie.side)&&ML(E,(Q=D.current)==null?void 0:Q.area)},[]);return o.jsx(yL,{scope:r,searchRef:A,onItemEnter:p.useCallback(E=>{P(E)&&E.preventDefault()},[P]),onItemLeave:p.useCallback(E=>{var B;P(E)||((B=k.current)==null||B.focus(),j(null))},[P]),onTriggerLeave:p.useCallback(E=>{P(E)&&E.preventDefault()},[P]),pointerGraceTimerRef:$,onPointerGraceIntentChange:p.useCallback(E=>{D.current=E},[]),children:o.jsx(ae,{...M,children:o.jsx(_d,{asChild:!0,trapped:s,onMountAutoFocus:H(i,E=>{var B;E.preventDefault(),(B=k.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:o.jsx(Wo,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:o.jsx(tS,{asChild:!0,...v,dir:x.dir,orientation:"vertical",loop:n,currentTabStopId:S,onCurrentTabStopIdChange:j,onEntryFocus:H(c,E=>{x.isUsingKeyboardRef.current||E.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(ig,{role:"menu","aria-orientation":"vertical","data-state":AS(y.open),"data-radix-menu-content":"",dir:x.dir,...w,...g,ref:C,style:{outline:"none",...g.style},onKeyDown:H(g.onKeyDown,E=>{const ie=E.target.closest("[data-radix-menu-content]")===E.currentTarget,Q=E.ctrlKey||E.altKey||E.metaKey,me=E.key.length===1;ie&&(E.key==="Tab"&&E.preventDefault(),!Q&&me&&Z(E.key));const U=k.current;if(E.target!==U||!cL.includes(E.key))return;E.preventDefault();const ge=_().filter(L=>!L.disabled).map(L=>L.ref.current);uS.includes(E.key)&&ge.reverse(),PL(ge)}),onBlur:H(e.onBlur,E=>{E.currentTarget.contains(E.target)||(window.clearTimeout(T.current),A.current="")}),onPointerMove:H(e.onPointerMove,bl(E=>{const B=E.target,ie=I.current!==E.clientX;if(E.currentTarget.contains(B)&&ie){const Q=E.clientX>I.current?"right":"left";X.current=Q,I.current=E.clientX}}))})})})})})})});gS.displayName=jr;var _L="MenuGroup",Cg=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return o.jsx(le.div,{role:"group",...n,ref:t})});Cg.displayName=_L;var SL="MenuLabel",vS=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return o.jsx(le.div,{...n,ref:t})});vS.displayName=SL;var Au="MenuItem",rx="menu.itemSelect",Cd=p.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...s}=e,i=p.useRef(null),a=zl(Au,e.__scopeMenu),l=kg(Au,e.__scopeMenu),c=je(t,i),u=p.useRef(!1),d=()=>{const h=i.current;if(!r&&h){const f=new CustomEvent(rx,{bubbles:!0,cancelable:!0});h.addEventListener(rx,m=>n==null?void 0:n(m),{once:!0}),Um(h,f),f.defaultPrevented?u.current=!1:a.onClose()}};return o.jsx(yS,{...s,ref:c,disabled:r,onClick:H(e.onClick,d),onPointerDown:h=>{var f;(f=e.onPointerDown)==null||f.call(e,h),u.current=!0},onPointerUp:H(e.onPointerUp,h=>{var f;u.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:H(e.onKeyDown,h=>{const f=l.searchRef.current!=="";r||f&&h.key===" "||Ip.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Cd.displayName=Au;var yS=p.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...i}=e,a=kg(Au,r),l=hS(r),c=p.useRef(null),u=je(t,c),[d,h]=p.useState(!1),[f,m]=p.useState("");return p.useEffect(()=>{const b=c.current;b&&m((b.textContent??"").trim())},[i.children]),o.jsx(xl.ItemSlot,{scope:r,disabled:n,textValue:s??f,children:o.jsx(rS,{asChild:!0,...l,focusable:!n,children:o.jsx(le.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:H(e.onPointerMove,bl(b=>{n?a.onItemLeave(b):(a.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:H(e.onPointerLeave,bl(b=>a.onItemLeave(b))),onFocus:H(e.onFocus,()=>h(!0)),onBlur:H(e.onBlur,()=>h(!1))})})})}),jL="MenuCheckboxItem",wS=p.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...s}=e;return o.jsx(jS,{scope:e.__scopeMenu,checked:r,children:o.jsx(Cd,{role:"menuitemcheckbox","aria-checked":Iu(r)?"mixed":r,...s,ref:t,"data-state":Tg(r),onSelect:H(s.onSelect,()=>n==null?void 0:n(Iu(r)?!0:!r),{checkForDefaultPrevented:!1})})})});wS.displayName=jL;var xS="MenuRadioGroup",[kL,NL]=Ri(xS,{value:void 0,onValueChange:()=>{}}),bS=p.forwardRef((e,t)=>{const{value:r,onValueChange:n,...s}=e,i=st(n);return o.jsx(kL,{scope:e.__scopeMenu,value:r,onValueChange:i,children:o.jsx(Cg,{...s,ref:t})})});bS.displayName=xS;var _S="MenuRadioItem",SS=p.forwardRef((e,t)=>{const{value:r,...n}=e,s=NL(_S,e.__scopeMenu),i=r===s.value;return o.jsx(jS,{scope:e.__scopeMenu,checked:i,children:o.jsx(Cd,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":Tg(i),onSelect:H(n.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,r)},{checkForDefaultPrevented:!1})})})});SS.displayName=_S;var Eg="MenuItemIndicator",[jS,CL]=Ri(Eg,{checked:!1}),kS=p.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...s}=e,i=CL(Eg,r);return o.jsx(Ct,{present:n||Iu(i.checked)||i.checked===!0,children:o.jsx(le.span,{...s,ref:t,"data-state":Tg(i.checked)})})});kS.displayName=Eg;var EL="MenuSeparator",NS=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return o.jsx(le.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});NS.displayName=EL;var TL="MenuArrow",CS=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=Nd(r);return o.jsx(og,{...s,...n,ref:t})});CS.displayName=TL;var RL="MenuSub",[i6,ES]=Ri(RL),Ta="MenuSubTrigger",TS=p.forwardRef((e,t)=>{const r=Pi(Ta,e.__scopeMenu),n=zl(Ta,e.__scopeMenu),s=ES(Ta,e.__scopeMenu),i=kg(Ta,e.__scopeMenu),a=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=p.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return p.useEffect(()=>d,[d]),p.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),o.jsx(Sg,{asChild:!0,...u,children:o.jsx(yS,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":AS(r.open),...e,ref:id(t,s.onTriggerChange),onClick:h=>{var f;(f=e.onClick)==null||f.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:H(e.onPointerMove,bl(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!r.open&&!a.current&&(i.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:H(e.onPointerLeave,bl(h=>{var m,b;d();const f=(m=r.content)==null?void 0:m.getBoundingClientRect();if(f){const g=(b=r.content)==null?void 0:b.dataset.side,y=g==="right",x=y?-5:5,w=f[y?"left":"right"],v=f[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:w,y:f.top},{x:v,y:f.top},{x:v,y:f.bottom},{x:w,y:f.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:H(e.onKeyDown,h=>{var m;const f=i.searchRef.current!=="";e.disabled||f&&h.key===" "||uL[n.dir].includes(h.key)&&(r.onOpenChange(!0),(m=r.content)==null||m.focus(),h.preventDefault())})})})});TS.displayName=Ta;var RS="MenuSubContent",PS=p.forwardRef((e,t)=>{const r=pS(jr,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,i=Pi(jr,e.__scopeMenu),a=zl(jr,e.__scopeMenu),l=ES(RS,e.__scopeMenu),c=p.useRef(null),u=je(t,c);return o.jsx(xl.Provider,{scope:e.__scopeMenu,children:o.jsx(Ct,{present:n||i.open,children:o.jsx(xl.Slot,{scope:e.__scopeMenu,children:o.jsx(Ng,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;a.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:H(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:H(e.onEscapeKeyDown,d=>{a.onClose(),d.preventDefault()}),onKeyDown:H(e.onKeyDown,d=>{var m;const h=d.currentTarget.contains(d.target),f=dL[a.dir].includes(d.key);h&&f&&(i.onOpenChange(!1),(m=l.trigger)==null||m.focus(),d.preventDefault())})})})})})});PS.displayName=RS;function AS(e){return e?"open":"closed"}function Iu(e){return e==="indeterminate"}function Tg(e){return Iu(e)?"indeterminate":e?"checked":"unchecked"}function PL(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function AL(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function IL(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let a=AL(e,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==r));const c=a.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function OL(e,t){const{x:r,y:n}=e;let s=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const l=t[i],c=t[a],u=l.x,d=l.y,h=c.x,f=c.y;d>n!=f>n&&r<(h-u)*(n-d)/(f-d)+u&&(s=!s)}return s}function ML(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return OL(r,t)}function bl(e){return t=>t.pointerType==="mouse"?e(t):void 0}var DL=fS,LL=Sg,$L=mS,FL=gS,UL=Cg,BL=vS,zL=Cd,qL=wS,WL=bS,VL=SS,HL=kS,KL=NS,GL=CS,YL=TS,QL=PS,Ed="DropdownMenu",[JL,o6]=Mt(Ed,[dS]),Ht=dS(),[XL,IS]=JL(Ed),OS=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:s,defaultOpen:i,onOpenChange:a,modal:l=!0}=e,c=Ht(t),u=p.useRef(null),[d,h]=Cr({prop:s,defaultProp:i??!1,onChange:a,caller:Ed});return o.jsx(XL,{scope:t,triggerId:Sr(),triggerRef:u,contentId:Sr(),open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(f=>!f),[h]),modal:l,children:o.jsx(DL,{...c,open:d,onOpenChange:h,dir:n,modal:l,children:r})})};OS.displayName=Ed;var MS="DropdownMenuTrigger",DS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=e,i=IS(MS,r),a=Ht(r);return o.jsx(LL,{asChild:!0,...a,children:o.jsx(le.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:id(t,i.triggerRef),onPointerDown:H(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:H(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});DS.displayName=MS;var ZL="DropdownMenuPortal",LS=e=>{const{__scopeDropdownMenu:t,...r}=e,n=Ht(t);return o.jsx($L,{...n,...r})};LS.displayName=ZL;var $S="DropdownMenuContent",FS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=IS($S,r),i=Ht(r),a=p.useRef(!1);return o.jsx(FL,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...n,ref:t,onCloseAutoFocus:H(e.onCloseAutoFocus,l=>{var c;a.current||(c=s.triggerRef.current)==null||c.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:H(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});FS.displayName=$S;var e$="DropdownMenuGroup",t$=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ht(r);return o.jsx(UL,{...s,...n,ref:t})});t$.displayName=e$;var r$="DropdownMenuLabel",US=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ht(r);return o.jsx(BL,{...s,...n,ref:t})});US.displayName=r$;var n$="DropdownMenuItem",BS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ht(r);return o.jsx(zL,{...s,...n,ref:t})});BS.displayName=n$;var s$="DropdownMenuCheckboxItem",zS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ht(r);return o.jsx(qL,{...s,...n,ref:t})});zS.displayName=s$;var i$="DropdownMenuRadioGroup",o$=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ht(r);return o.jsx(WL,{...s,...n,ref:t})});o$.displayName=i$;var a$="DropdownMenuRadioItem",qS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ht(r);return o.jsx(VL,{...s,...n,ref:t})});qS.displayName=a$;var l$="DropdownMenuItemIndicator",WS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ht(r);return o.jsx(HL,{...s,...n,ref:t})});WS.displayName=l$;var c$="DropdownMenuSeparator",VS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ht(r);return o.jsx(KL,{...s,...n,ref:t})});VS.displayName=c$;var u$="DropdownMenuArrow",d$=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ht(r);return o.jsx(GL,{...s,...n,ref:t})});d$.displayName=u$;var h$="DropdownMenuSubTrigger",HS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ht(r);return o.jsx(YL,{...s,...n,ref:t})});HS.displayName=h$;var f$="DropdownMenuSubContent",KS=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ht(r);return o.jsx(QL,{...s,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});KS.displayName=f$;var p$=OS,m$=DS,g$=LS,GS=FS,YS=US,QS=BS,JS=zS,XS=qS,ZS=WS,ej=VS,tj=HS,rj=KS;const nj=p$,sj=m$,v$=p.forwardRef(({className:e,inset:t,children:r,...n},s)=>o.jsxs(tj,{ref:s,className:Y("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...n,children:[r,o.jsx(Hm,{className:"ml-auto h-4 w-4"})]}));v$.displayName=tj.displayName;const y$=p.forwardRef(({className:e,...t},r)=>o.jsx(rj,{ref:r,className:Y("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));y$.displayName=rj.displayName;const Rg=p.forwardRef(({className:e,sideOffset:t=4,...r},n)=>o.jsx(g$,{children:o.jsx(GS,{ref:n,sideOffset:t,className:Y("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Rg.displayName=GS.displayName;const hi=p.forwardRef(({className:e,inset:t,...r},n)=>o.jsx(QS,{ref:n,className:Y("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...r}));hi.displayName=QS.displayName;const w$=p.forwardRef(({className:e,children:t,checked:r,...n},s)=>o.jsxs(JS,{ref:s,className:Y("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:r,...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(ZS,{children:o.jsx(Ti,{className:"h-4 w-4"})})}),t]}));w$.displayName=JS.displayName;const x$=p.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(XS,{ref:n,className:Y("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(ZS,{children:o.jsx(E2,{className:"h-2 w-2 fill-current"})})}),t]}));x$.displayName=XS.displayName;const ij=p.forwardRef(({className:e,inset:t,...r},n)=>o.jsx(YS,{ref:n,className:Y("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));ij.displayName=YS.displayName;const Op=p.forwardRef(({className:e,...t},r)=>o.jsx(ej,{ref:r,className:Y("-mx-1 my-1 h-px bg-muted",e),...t}));Op.displayName=ej.displayName;function b$(){const[e,t]=p.useState("light");p.useEffect(()=>{const i=localStorage.getItem("blend-theme");i&&(t(i),r(i))},[]);const r=i=>{const a=document.documentElement;a.classList.remove("dark","theme-orange"),i==="dark-aqua"?a.classList.add("dark"):i==="dark-orange"&&a.classList.add("dark","theme-orange")},n=i=>{t(i),r(i),localStorage.setItem("blend-theme",i)},s=()=>{switch(e){case"light":return o.jsx(By,{className:"h-5 w-5"});case"dark-aqua":return o.jsx(Fy,{className:"h-5 w-5"});case"dark-orange":return o.jsx(Uy,{className:"h-5 w-5"})}};return o.jsxs(nj,{children:[o.jsx(sj,{asChild:!0,children:o.jsxs(O,{variant:"ghost",size:"icon",className:"rounded-full bg-card/60 backdrop-blur-sm border border-border/50 hover:bg-card",children:[s(),o.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),o.jsxs(Rg,{align:"end",className:"min-w-[160px]",children:[o.jsxs(hi,{onClick:()=>n("light"),className:e==="light"?"bg-accent":"",children:[o.jsx(By,{className:"mr-2 h-4 w-4"}),"Light"]}),o.jsxs(hi,{onClick:()=>n("dark-aqua"),className:e==="dark-aqua"?"bg-accent":"",children:[o.jsx(Fy,{className:"mr-2 h-4 w-4"}),"Dark Aqua"]}),o.jsxs(hi,{onClick:()=>n("dark-orange"),className:e==="dark-orange"?"bg-accent":"",children:[o.jsx(Uy,{className:"mr-2 h-4 w-4"}),"Dark Orange"]})]})]})}var oj={exports:{}},aj={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fo=p;function _$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var S$=typeof Object.is=="function"?Object.is:_$,j$=Fo.useState,k$=Fo.useEffect,N$=Fo.useLayoutEffect,C$=Fo.useDebugValue;function E$(e,t){var r=t(),n=j$({inst:{value:r,getSnapshot:t}}),s=n[0].inst,i=n[1];return N$(function(){s.value=r,s.getSnapshot=t,Vh(s)&&i({inst:s})},[e,r,t]),k$(function(){return Vh(s)&&i({inst:s}),e(function(){Vh(s)&&i({inst:s})})},[e]),C$(r),r}function Vh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!S$(e,r)}catch{return!0}}function T$(e,t){return t()}var R$=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?T$:E$;aj.useSyncExternalStore=Fo.useSyncExternalStore!==void 0?Fo.useSyncExternalStore:R$;oj.exports=aj;var P$=oj.exports;function A$(){return P$.useSyncExternalStore(I$,()=>!0,()=>!1)}function I$(){return()=>{}}var Pg="Avatar",[O$,a6]=Mt(Pg),[M$,lj]=O$(Pg),cj=p.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[s,i]=p.useState("idle");return o.jsx(M$,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:o.jsx(le.span,{...n,ref:t})})});cj.displayName=Pg;var uj="AvatarImage",dj=p.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...i}=e,a=lj(uj,r),l=D$(n,i),c=st(u=>{s(u),a.onImageLoadingStatusChange(u)});return it(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx(le.img,{...i,ref:t,src:n}):null});dj.displayName=uj;var hj="AvatarFallback",fj=p.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...s}=e,i=lj(hj,r),[a,l]=p.useState(n===void 0);return p.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),a&&i.imageLoadingStatus!=="loaded"?o.jsx(le.span,{...s,ref:t}):null});fj.displayName=hj;function nx(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function D$(e,{referrerPolicy:t,crossOrigin:r}){const n=A$(),s=p.useRef(null),i=n?(s.current||(s.current=new window.Image),s.current):null,[a,l]=p.useState(()=>nx(i,e));return it(()=>{l(nx(i,e))},[i,e]),it(()=>{const c=h=>()=>{l(h)};if(!i)return;const u=c("loaded"),d=c("error");return i.addEventListener("load",u),i.addEventListener("error",d),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,r,t]),a}var pj=cj,mj=dj,gj=fj;const Gr=p.forwardRef(({className:e,...t},r)=>o.jsx(pj,{ref:r,className:Y("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Gr.displayName=pj.displayName;const Yr=p.forwardRef(({className:e,...t},r)=>o.jsx(mj,{ref:r,className:Y("aspect-square h-full w-full",e),...t}));Yr.displayName=mj.displayName;const Qr=p.forwardRef(({className:e,...t},r)=>o.jsx(gj,{ref:r,className:Y("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Qr.displayName=gj.displayName;function L$(){var a;const{user:e,profile:t,signOut:r,isLoading:n}=Ee();if(n)return o.jsx("div",{className:"h-9 w-9 rounded-full bg-muted animate-pulse"});if(!e)return o.jsx(xe,{to:"/auth",children:o.jsxs(O,{variant:"outline",size:"sm",className:"gap-2",children:[o.jsx(Qf,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Sign In"})]})});const s=(t==null?void 0:t.display_name)||((a=e.email)==null?void 0:a.split("@")[0])||"User",i=s.slice(0,2).toUpperCase();return o.jsxs(nj,{children:[o.jsx(sj,{asChild:!0,children:o.jsx(O,{variant:"ghost",className:"relative h-9 w-9 rounded-full",children:o.jsxs(Gr,{className:"h-9 w-9",children:[o.jsx(Yr,{src:(t==null?void 0:t.avatar_url)||void 0,alt:s}),o.jsx(Qr,{className:"bg-primary/10 text-primary",children:i})]})})}),o.jsxs(Rg,{className:"w-56",align:"end",forceMount:!0,children:[o.jsx(ij,{className:"font-normal",children:o.jsxs("div",{className:"flex flex-col space-y-1",children:[o.jsx("p",{className:"text-sm font-medium leading-none",children:s}),o.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.email})]})}),o.jsx(Op,{}),o.jsx(hi,{asChild:!0,children:o.jsxs(xe,{to:`/u/${e.id}`,className:"flex items-center cursor-pointer",children:[o.jsx(Qf,{className:"mr-2 h-4 w-4"}),"My Profile"]})}),o.jsx(hi,{asChild:!0,children:o.jsxs(xe,{to:"/settings",className:"flex items-center cursor-pointer",children:[o.jsx(b_,{className:"mr-2 h-4 w-4"}),"Settings"]})}),o.jsx(Op,{}),o.jsxs(hi,{onClick:()=>r(),className:"text-destructive focus:text-destructive cursor-pointer",children:[o.jsx(D2,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})]})}function Ot({actions:e,showFloatingNav:t=!0}){const{user:r}=Ee(),n=r?"all":"public",i=!(typeof window<"u"?window.location.pathname:"").startsWith("/remix-of-stackwise-advisor/lovable-backend"),a=i?"https://dsvikstrand.github.io/remix-of-stackwise-advisor/lovable-backend/":"https://dsvikstrand.github.io/remix-of-stackwise-advisor/",l=i?"Switch to Lovable":"Switch to Agentic";return o.jsxs(o.Fragment,{children:[o.jsx("header",{className:"sticky top-0 z-50 border-b border-border/50 bg-card/70 backdrop-blur-glass",children:o.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs(xe,{to:"/",className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-primary to-primary/60 flex items-center justify-center glow-primary",children:o.jsx(Vm,{className:"h-4 w-4 text-primary-foreground"})}),o.jsx("span",{className:"text-lg font-semibold tracking-tight",children:"Blueprints"}),o.jsx("span",{className:"ml-1 rounded-full border border-primary/30 bg-primary/10 px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wide text-primary",children:"V_1"})]}),o.jsx("a",{href:a,className:"ml-1 inline-flex items-center justify-center rounded-full border border-border/60 bg-background/60 p-1 text-muted-foreground transition hover:text-foreground","aria-label":l,title:l,children:o.jsx(F2,{className:"h-3.5 w-3.5"})}),o.jsx("div",{className:"hidden sm:block ml-3",children:o.jsx(Vw,{variant:"header",mode:n})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[e,o.jsx(b$,{}),o.jsx(L$,{})]})]})}),t&&o.jsx("div",{className:"sm:hidden",children:o.jsx(Vw,{variant:"floating",mode:n})})]})}function $$(){return Fe({queryKey:["community-stats"],queryFn:async()=>{const[e,t,r]=await Promise.all([R.from("blueprints").select("id",{count:"exact",head:!0}).eq("is_public",!0),R.from("inventories").select("id",{count:"exact",head:!0}).eq("is_public",!0),R.from("tags").select("id",{count:"exact",head:!0})]);return{totalBlueprints:e.count??0,totalInventories:t.count??0,activeTags:r.count??0}},staleTime:6e4})}function F$(e=4){return Fe({queryKey:["top-blueprints",e],queryFn:async()=>{const{data:t,error:r}=await R.from("blueprints").select("id, title, likes_count, created_at, creator_user_id").eq("is_public",!0).order("likes_count",{ascending:!1}).limit(e);if(r)throw r;if(!t||t.length===0)return[];const n=[...new Set(t.map(f=>f.creator_user_id))],{data:s}=await R.from("profiles").select("user_id, display_name").in("user_id",n),i=new Map((s||[]).map(f=>[f.user_id,f])),a=t.map(f=>f.id),{data:l}=await R.from("blueprint_tags").select("blueprint_id, tag_id").in("blueprint_id",a),c=[...new Set((l||[]).map(f=>f.tag_id))],{data:u}=c.length>0?await R.from("tags").select("id, slug").in("id",c):{data:[]},d=new Map((u||[]).map(f=>[f.id,f.slug])),h=new Map;return(l||[]).forEach(f=>{const m=h.get(f.blueprint_id)||[],b=d.get(f.tag_id);b&&m.push(b),h.set(f.blueprint_id,m)}),t.map(f=>({id:f.id,title:f.title,likes_count:f.likes_count,created_at:f.created_at,creator_profile:i.get(f.creator_user_id)||null,tags:(h.get(f.id)||[]).map(m=>({slug:m}))}))},staleTime:6e4})}function U$(e=8){return Fe({queryKey:["featured-tags",e],queryFn:async()=>{const{data:t,error:r}=await R.from("tags").select("id, slug, follower_count").order("follower_count",{ascending:!1}).limit(e);if(r)throw r;return t||[]},staleTime:6e4})}function B$(){const{data:e,isLoading:t}=$$(),r=[{label:"Blueprints",value:(e==null?void 0:e.totalBlueprints)??0,icon:ud},{label:"Inventories",value:(e==null?void 0:e.totalInventories)??0,icon:Wr},{label:"Topics",value:(e==null?void 0:e.activeTags)??0,icon:dd}];return o.jsx("div",{className:"flex flex-wrap items-center justify-center gap-6 sm:gap-10 py-6 px-4 rounded-xl border border-border/40 bg-card/40 backdrop-blur-sm",children:r.map(n=>o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[o.jsx(n.icon,{className:"h-4 w-4"}),o.jsx("span",{className:"font-mono text-lg tabular-nums text-foreground",children:t?"":n.value}),o.jsx("span",{className:"text-sm",children:n.label})]},n.label))})}const se=p.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:Y("rounded-xl border bg-card/80 text-card-foreground shadow-soft backdrop-blur-sm transition-all duration-300 hover:shadow-soft-md",e),...t}));se.displayName="Card";const z$=p.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:Y("rounded-xl border border-border/50 bg-card/60 text-card-foreground shadow-soft backdrop-blur-glass transition-all duration-400 hover:shadow-soft-lg hover:bg-card/70",e),...t}));z$.displayName="GlassCard";const Ge=p.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:Y("flex flex-col space-y-1.5 p-6",e),...t}));Ge.displayName="CardHeader";const vt=p.forwardRef(({className:e,...t},r)=>o.jsx("h3",{ref:r,className:Y("text-2xl font-semibold leading-none tracking-tight",e),...t}));vt.displayName="CardTitle";const qa=p.forwardRef(({className:e,...t},r)=>o.jsx("p",{ref:r,className:Y("text-sm text-muted-foreground",e),...t}));qa.displayName="CardDescription";const ce=p.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:Y("p-6 pt-0",e),...t}));ce.displayName="CardContent";const Td=p.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:Y("flex items-center p-6 pt-0",e),...t}));Td.displayName="CardFooter";const q$=ld("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ae({className:e,variant:t,...r}){return o.jsx("div",{className:Y(q$({variant:t}),e),...r})}function Be(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Is(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const vj=6048e5,W$=864e5,Ec=43200,sx=1440;let V$={};function ql(){return V$}function _l(e,t){var l,c,u,d;const r=ql(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Be(e),i=s.getDay(),a=(i<n?7:0)+i-n;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Ou(e){return _l(e,{weekStartsOn:1})}function yj(e){const t=Be(e),r=t.getFullYear(),n=Is(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=Ou(n),i=Is(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const a=Ou(i);return t.getTime()>=s.getTime()?r+1:t.getTime()>=a.getTime()?r:r-1}function ix(e){const t=Be(e);return t.setHours(0,0,0,0),t}function Mu(e){const t=Be(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function H$(e,t){const r=ix(e),n=ix(t),s=+r-Mu(r),i=+n-Mu(n);return Math.round((s-i)/W$)}function K$(e){const t=yj(e),r=Is(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Ou(r)}function Yc(e,t){const r=Be(e),n=Be(t),s=r.getTime()-n.getTime();return s<0?-1:s>0?1:s}function G$(e){return Is(e,Date.now())}function Y$(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Q$(e){if(!Y$(e)&&typeof e!="number")return!1;const t=Be(e);return!isNaN(Number(t))}function J$(e,t){const r=Be(e),n=Be(t),s=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return s*12+i}function X$(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function Z$(e,t){return+Be(e)-+Be(t)}function e3(e){const t=Be(e);return t.setHours(23,59,59,999),t}function t3(e){const t=Be(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function r3(e){const t=Be(e);return+e3(t)==+t3(t)}function n3(e,t){const r=Be(e),n=Be(t),s=Yc(r,n),i=Math.abs(J$(r,n));let a;if(i<1)a=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*i);let l=Yc(r,n)===-s;r3(Be(e))&&i===1&&Yc(e,n)===1&&(l=!1),a=s*(i-Number(l))}return a===0?0:a}function s3(e,t,r){const n=Z$(e,t)/1e3;return X$(r==null?void 0:r.roundingMethod)(n)}function i3(e){const t=Be(e),r=Is(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const o3={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},a3=(e,t,r)=>{let n;const s=o3[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Hh(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const l3={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},c3={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},u3={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},d3={date:Hh({formats:l3,defaultWidth:"full"}),time:Hh({formats:c3,defaultWidth:"full"}),dateTime:Hh({formats:u3,defaultWidth:"full"})},h3={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},f3=(e,t,r,n)=>h3[e];function wa(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):a;s=e.formattingValues[l]||e.formattingValues[a]}else{const a=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[l]||e.values[a]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const p3={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},m3={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},g3={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},v3={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},y3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},w3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},x3=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},b3={ordinalNumber:x3,era:wa({values:p3,defaultWidth:"wide"}),quarter:wa({values:m3,defaultWidth:"wide",argumentCallback:e=>e-1}),month:wa({values:g3,defaultWidth:"wide"}),day:wa({values:v3,defaultWidth:"wide"}),dayPeriod:wa({values:y3,defaultWidth:"wide",formattingValues:w3,defaultFormattingWidth:"wide"})};function xa(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const a=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?S3(l,h=>h.test(a)):_3(l,h=>h.test(a));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(a.length);return{value:u,rest:d}}}function _3(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function S3(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function j3(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],i=t.match(e.parsePattern);if(!i)return null;let a=e.valueCallback?e.valueCallback(i[0]):i[0];a=r.valueCallback?r.valueCallback(a):a;const l=t.slice(s.length);return{value:a,rest:l}}}const k3=/^(\d+)(th|st|nd|rd)?/i,N3=/\d+/i,C3={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},E3={any:[/^b/i,/^(a|c)/i]},T3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},R3={any:[/1/i,/2/i,/3/i,/4/i]},P3={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},A3={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},I3={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},O3={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},M3={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},D3={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},L3={ordinalNumber:j3({matchPattern:k3,parsePattern:N3,valueCallback:e=>parseInt(e,10)}),era:xa({matchPatterns:C3,defaultMatchWidth:"wide",parsePatterns:E3,defaultParseWidth:"any"}),quarter:xa({matchPatterns:T3,defaultMatchWidth:"wide",parsePatterns:R3,defaultParseWidth:"any",valueCallback:e=>e+1}),month:xa({matchPatterns:P3,defaultMatchWidth:"wide",parsePatterns:A3,defaultParseWidth:"any"}),day:xa({matchPatterns:I3,defaultMatchWidth:"wide",parsePatterns:O3,defaultParseWidth:"any"}),dayPeriod:xa({matchPatterns:M3,defaultMatchWidth:"any",parsePatterns:D3,defaultParseWidth:"any"})},wj={code:"en-US",formatDistance:a3,formatLong:d3,formatRelative:f3,localize:b3,match:L3,options:{weekStartsOn:0,firstWeekContainsDate:1}};function $3(e){const t=Be(e);return H$(t,i3(t))+1}function F3(e){const t=Be(e),r=+Ou(t)-+K$(t);return Math.round(r/vj)+1}function xj(e,t){var d,h,f,m;const r=Be(e),n=r.getFullYear(),s=ql(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,a=Is(e,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);const l=_l(a,t),c=Is(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const u=_l(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function U3(e,t){var l,c,u,d;const r=ql(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=xj(e,t),i=Is(e,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),_l(i,t)}function B3(e,t){const r=Be(e),n=+_l(r,t)-+U3(r,t);return Math.round(n/vj)+1}function Le(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Gn={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Le(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Le(r+1,2)},d(e,t){return Le(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Le(e.getHours()%12||12,t.length)},H(e,t){return Le(e.getHours(),t.length)},m(e,t){return Le(e.getMinutes(),t.length)},s(e,t){return Le(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return Le(s,t.length)}},Wi={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ox={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return Gn.y(e,t)},Y:function(e,t,r,n){const s=xj(e,n),i=s>0?s:1-s;if(t==="YY"){const a=i%100;return Le(a,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Le(i,t.length)},R:function(e,t){const r=yj(e);return Le(r,t.length)},u:function(e,t){const r=e.getFullYear();return Le(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Le(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Le(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Gn.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Le(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=B3(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):Le(s,t.length)},I:function(e,t,r){const n=F3(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Le(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Gn.d(e,t)},D:function(e,t,r){const n=$3(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Le(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Le(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Le(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return Le(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=Wi.noon:n===0?s=Wi.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=Wi.evening:n>=12?s=Wi.afternoon:n>=4?s=Wi.morning:s=Wi.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Gn.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Gn.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Le(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Le(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Gn.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Gn.s(e,t)},S:function(e,t){return Gn.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return lx(n);case"XXXX":case"XX":return Ks(n);case"XXXXX":case"XXX":default:return Ks(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return lx(n);case"xxxx":case"xx":return Ks(n);case"xxxxx":case"xxx":default:return Ks(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ax(n,":");case"OOOO":default:return"GMT"+Ks(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ax(n,":");case"zzzz":default:return"GMT"+Ks(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return Le(n,t.length)},T:function(e,t,r){const n=e.getTime();return Le(n,t.length)}};function ax(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+t+Le(i,2)}function lx(e,t){return e%60===0?(e>0?"-":"+")+Le(Math.abs(e)/60,2):Ks(e,t)}function Ks(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Le(Math.trunc(n/60),2),i=Le(n%60,2);return r+s+t+i}const cx=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},bj=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},z3=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return cx(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",cx(n,t)).replace("{{time}}",bj(s,t))},q3={p:bj,P:z3},W3=/^D+$/,V3=/^Y+$/,H3=["D","DD","YY","YYYY"];function K3(e){return W3.test(e)}function G3(e){return V3.test(e)}function Y3(e,t,r){const n=Q3(e,t,r);if(console.warn(n),H3.includes(e))throw new RangeError(n)}function Q3(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const J3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,X3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Z3=/^'([^]*?)'?$/,e5=/''/g,t5=/[a-zA-Z]/;function r5(e,t,r){var d,h,f,m;const n=ql(),s=n.locale??wj,i=n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,a=n.weekStartsOn??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??0,l=Be(e);if(!Q$(l))throw new RangeError("Invalid time value");let c=t.match(X3).map(b=>{const g=b[0];if(g==="p"||g==="P"){const y=q3[g];return y(b,s.formatLong)}return b}).join("").match(J3).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const g=b[0];if(g==="'")return{isToken:!1,value:n5(b)};if(ox[g])return{isToken:!0,value:b};if(g.match(t5))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:b}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return c.map(b=>{if(!b.isToken)return b.value;const g=b.value;(G3(g)||K3(g))&&Y3(g,t,String(e));const y=ox[g[0]];return y(l,g,s.localize,u)}).join("")}function n5(e){const t=e.match(Z3);return t?t[1].replace(e5,"'"):e}function s5(e,t,r){const n=ql(),s=(r==null?void 0:r.locale)??n.locale??wj,i=2520,a=Yc(e,t);if(isNaN(a))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:a});let c,u;a>0?(c=Be(t),u=Be(e)):(c=Be(e),u=Be(t));const d=s3(u,c),h=(Mu(u)-Mu(c))/1e3,f=Math.round((d-h)/60);let m;if(f<2)return r!=null&&r.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,l):d<10?s.formatDistance("lessThanXSeconds",10,l):d<20?s.formatDistance("lessThanXSeconds",20,l):d<40?s.formatDistance("halfAMinute",0,l):d<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):f===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",f,l);if(f<45)return s.formatDistance("xMinutes",f,l);if(f<90)return s.formatDistance("aboutXHours",1,l);if(f<sx){const b=Math.round(f/60);return s.formatDistance("aboutXHours",b,l)}else{if(f<i)return s.formatDistance("xDays",1,l);if(f<Ec){const b=Math.round(f/sx);return s.formatDistance("xDays",b,l)}else if(f<Ec*2)return m=Math.round(f/Ec),s.formatDistance("aboutXMonths",m,l)}if(m=n3(u,c),m<12){const b=Math.round(f/Ec);return s.formatDistance("xMonths",b,l)}else{const b=m%12,g=Math.trunc(m/12);return b<3?s.formatDistance("aboutXYears",g,l):b<9?s.formatDistance("overXYears",g,l):s.formatDistance("almostXYears",g+1,l)}}function _i(e,t){return s5(e,G$(e),t)}function i5(){const{data:e,isLoading:t}=F$(4);return t?o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Top Blueprints"}),o.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:Array.from({length:4}).map((r,n)=>o.jsx(se,{className:"animate-pulse bg-card/50",children:o.jsx(ce,{className:"p-4 h-28"})},n))})]}):!e||e.length===0?null:o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Top Blueprints"}),o.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:e.map(r=>{var n;return o.jsx(xe,{to:`/blueprint/${r.id}`,children:o.jsx(se,{className:"group h-full bg-card/60 hover:bg-card/80 transition-colors cursor-pointer",children:o.jsxs(ce,{className:"p-4 space-y-2",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("h3",{className:"font-medium leading-tight line-clamp-2 group-hover:text-primary transition-colors",children:r.title}),o.jsxs("div",{className:"flex items-center gap-1 shrink-0 text-muted-foreground text-sm",children:[o.jsx(At,{className:"h-3.5 w-3.5"}),o.jsx("span",{className:"tabular-nums",children:r.likes_count})]})]}),o.jsx("div",{className:"flex flex-wrap gap-1.5",children:r.tags.slice(0,3).map(s=>o.jsxs(Ae,{variant:"secondary",className:"text-xs",children:["#",s.slug]},s.slug))}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:["by ",((n=r.creator_profile)==null?void 0:n.display_name)||"Anonymous"," "," ",_i(new Date(r.created_at),{addSuffix:!0})]})]})})},r.id)})})]})}function o5(){const{data:e,isLoading:t}=U$(8);return t?o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Trending Topics"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:6}).map((r,n)=>o.jsx("div",{className:"h-8 w-20 rounded-full bg-muted animate-pulse"},n))})]}):!e||e.length===0?null:o.jsxs("section",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Trending Topics"}),o.jsx(xe,{to:"/tags",className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:"View all "})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:e.map(r=>o.jsx(xe,{to:`/wall?tag=${r.slug}`,children:o.jsxs(Ae,{variant:"outline",className:"gap-1.5 px-3 py-1.5 text-sm hover:bg-accent hover:text-accent-foreground transition-colors cursor-pointer",children:[o.jsx(dd,{className:"h-3 w-3"}),r.slug,r.follower_count>0&&o.jsxs("span",{className:"flex items-center gap-0.5 text-muted-foreground ml-1",children:[o.jsx(fd,{className:"h-3 w-3"}),o.jsx("span",{className:"text-xs tabular-nums",children:r.follower_count})]})]})},r.id))})]})}function Ag(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Rd="Checkbox",[a5,l6]=Mt(Rd),[l5,Ig]=a5(Rd);function c5(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:s,disabled:i,form:a,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=e,[f,m]=Cr({prop:r,defaultProp:s??!1,onChange:c,caller:Rd}),[b,g]=p.useState(null),[y,x]=p.useState(null),w=p.useRef(!1),v=b?!!a||!!b.closest("form"):!0,_={checked:f,disabled:i,setChecked:m,control:b,setControl:g,name:l,form:a,value:d,hasConsumerStoppedPropagationRef:w,required:u,defaultChecked:Ns(s)?!1:s,isFormControl:v,bubbleInput:y,setBubbleInput:x};return o.jsx(l5,{scope:t,..._,children:u5(h)?h(_):n})}var _j="CheckboxTrigger",Sj=p.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},s)=>{const{control:i,value:a,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:b}=Ig(_j,e),g=je(s,d),y=p.useRef(c);return p.useEffect(()=>{const x=i==null?void 0:i.form;if(x){const w=()=>h(y.current);return x.addEventListener("reset",w),()=>x.removeEventListener("reset",w)}},[i,h]),o.jsx(le.button,{type:"button",role:"checkbox","aria-checked":Ns(c)?"mixed":c,"aria-required":u,"data-state":Ej(c),"data-disabled":l?"":void 0,disabled:l,value:a,...n,ref:g,onKeyDown:H(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:H(r,x=>{h(w=>Ns(w)?!0:!w),b&&m&&(f.current=x.isPropagationStopped(),f.current||x.stopPropagation())})})});Sj.displayName=_j;var Og=p.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:i,required:a,disabled:l,value:c,onCheckedChange:u,form:d,...h}=e;return o.jsx(c5,{__scopeCheckbox:r,checked:s,defaultChecked:i,disabled:l,required:a,onCheckedChange:u,name:n,form:d,value:c,internal_do_not_use_render:({isFormControl:f})=>o.jsxs(o.Fragment,{children:[o.jsx(Sj,{...h,ref:t,__scopeCheckbox:r}),f&&o.jsx(Cj,{__scopeCheckbox:r})]})})});Og.displayName=Rd;var jj="CheckboxIndicator",kj=p.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...s}=e,i=Ig(jj,r);return o.jsx(Ct,{present:n||Ns(i.checked)||i.checked===!0,children:o.jsx(le.span,{"data-state":Ej(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});kj.displayName=jj;var Nj="CheckboxBubbleInput",Cj=p.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:a,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:f,setBubbleInput:m}=Ig(Nj,e),b=je(r,m),g=Ag(i),y=tg(n);p.useEffect(()=>{const w=f;if(!w)return;const v=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(v,"checked").set,j=!s.current;if(g!==i&&S){const k=new Event("click",{bubbles:j});w.indeterminate=Ns(i),S.call(w,Ns(i)?!1:i),w.dispatchEvent(k)}},[f,g,i,s]);const x=p.useRef(Ns(i)?!1:i);return o.jsx(le.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??x.current,required:l,disabled:c,name:u,value:d,form:h,...t,tabIndex:-1,ref:b,style:{...t.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Cj.displayName=Nj;function u5(e){return typeof e=="function"}function Ns(e){return e==="indeterminate"}function Ej(e){return Ns(e)?"indeterminate":e?"checked":"unchecked"}const Mg=p.forwardRef(({className:e,...t},r)=>o.jsx(Og,{ref:r,className:Y("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:o.jsx(kj,{className:Y("flex items-center justify-center text-current"),children:o.jsx(Ti,{className:"h-4 w-4"})})}));Mg.displayName=Og.displayName;var Pd="Collapsible",[d5,Tj]=Mt(Pd),[h5,Dg]=d5(Pd),Rj=p.forwardRef((e,t)=>{const{__scopeCollapsible:r,open:n,defaultOpen:s,disabled:i,onOpenChange:a,...l}=e,[c,u]=Cr({prop:n,defaultProp:s??!1,onChange:a,caller:Pd});return o.jsx(h5,{scope:r,disabled:i,contentId:Sr(),open:c,onOpenToggle:p.useCallback(()=>u(d=>!d),[u]),children:o.jsx(le.div,{"data-state":Ug(c),"data-disabled":i?"":void 0,...l,ref:t})})});Rj.displayName=Pd;var Pj="CollapsibleTrigger",Lg=p.forwardRef((e,t)=>{const{__scopeCollapsible:r,...n}=e,s=Dg(Pj,r);return o.jsx(le.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":Ug(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...n,ref:t,onClick:H(e.onClick,s.onOpenToggle)})});Lg.displayName=Pj;var $g="CollapsibleContent",Fg=p.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Dg($g,e.__scopeCollapsible);return o.jsx(Ct,{present:r||s.open,children:({present:i})=>o.jsx(f5,{...n,ref:t,present:i})})});Fg.displayName=$g;var f5=p.forwardRef((e,t)=>{const{__scopeCollapsible:r,present:n,children:s,...i}=e,a=Dg($g,r),[l,c]=p.useState(n),u=p.useRef(null),d=je(t,u),h=p.useRef(0),f=h.current,m=p.useRef(0),b=m.current,g=a.open||l,y=p.useRef(g),x=p.useRef(void 0);return p.useEffect(()=>{const w=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(w)},[]),it(()=>{const w=u.current;if(w){x.current=x.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const v=w.getBoundingClientRect();h.current=v.height,m.current=v.width,y.current||(w.style.transitionDuration=x.current.transitionDuration,w.style.animationName=x.current.animationName),c(n)}},[a.open,n]),o.jsx(le.div,{"data-state":Ug(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!g,...i,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...e.style},children:g&&s})});function Ug(e){return e?"open":"closed"}var Aj=Rj,p5=Lg,m5=Fg;const Bg=Aj,zg=Lg,qg=Fg,g5=[{name:"Foundational",items:["Vitamin D3","Omega-3","Magnesium","B-Complex"]},{name:"Performance",items:["Creatine","Caffeine","L-Theanine","Beta-Alanine"]},{name:"Recovery",items:["Ashwagandha","Zinc","Tart Cherry","Collagen"]}],Kh={overview:"Great foundational stack! Vitamin D3 + Omega-3 provide key anti-inflammatory and immune support. Adding Magnesium covers a common deficiency that affects sleep and muscle function.",strengths:"This combination addresses multiple health pillarsenergy, recovery, and cognitive function. The Caffeine + L-Theanine pairing is a well-researched synergy for focused alertness without jitters.",suggestion:"Consider timing: take Vitamin D3 with a fat-containing meal for better absorption. Magnesium works best in the evening to support sleep quality."};function v5(){const[e,t]=p.useState(new Set),[r,n]=p.useState(!1),s=i=>{t(a=>{const l=new Set(a);return l.has(i)?l.delete(i):l.add(i),l.size>=2&&!r&&n(!0),l})};return o.jsxs("section",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"Try It Out"}),o.jsx(Ae,{variant:"secondary",className:"text-xs",children:"Demo"})]}),o.jsxs(se,{className:"bg-card/60 backdrop-blur-sm border-dashed",children:[o.jsxs(Ge,{className:"pb-2",children:[o.jsxs(vt,{className:"text-base font-medium flex items-center gap-2",children:[o.jsx(Mn,{className:"h-4 w-4 text-primary"}),"Sample Supplement Inventory"]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Select items and see how blueprints work. Sign up to build your own!"})]}),o.jsxs(ce,{className:"space-y-4",children:[o.jsx("div",{className:"grid gap-4 sm:grid-cols-3",children:g5.map(i=>o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:i.name}),o.jsx("div",{className:"space-y-1.5",children:i.items.map(a=>o.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer hover:text-primary transition-colors",children:[o.jsx(Mg,{checked:e.has(a),onCheckedChange:()=>s(a)}),a]},a))})]},i.name))}),e.size>0&&o.jsxs("div",{className:"pt-2 border-t border-border/50 space-y-3",children:[o.jsx("div",{className:"flex flex-wrap gap-1.5",children:[...e].map(i=>o.jsx(Ae,{variant:"default",className:"text-xs",children:i},i))}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.size," item",e.size!==1?"s":""," selected"]})]}),e.size>=2&&o.jsxs(Bg,{open:r,onOpenChange:n,children:[o.jsx(zg,{asChild:!0,children:o.jsxs(O,{variant:"ghost",size:"sm",className:"w-full justify-between text-primary hover:text-primary/80",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(Mn,{className:"h-4 w-4"}),"Example AI Review"]}),o.jsx(Vo,{className:`h-4 w-4 transition-transform ${r?"rotate-180":""}`})]})}),o.jsx(qg,{className:"pt-2",children:o.jsxs("div",{className:"rounded-lg border border-primary/20 bg-primary/5 p-4 space-y-3",children:[o.jsxs("div",{children:[o.jsx("h5",{className:"text-xs font-semibold text-primary uppercase tracking-wide mb-1",children:"Overview"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:Kh.overview})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"text-xs font-semibold text-primary uppercase tracking-wide mb-1",children:"Strengths"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:Kh.strengths})]}),o.jsxs("div",{children:[o.jsx("h5",{className:"text-xs font-semibold text-primary uppercase tracking-wide mb-1",children:"Suggestion"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:Kh.suggestion})]}),o.jsx("p",{className:"text-xs text-muted-foreground/70 italic pt-2 border-t border-border/30",children:"This is a static preview. Sign up to generate personalized AI reviews!"})]})})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[o.jsx(xe,{to:"/auth",children:o.jsxs(O,{size:"sm",className:"gap-1.5",children:["Sign up to build",o.jsx(Wm,{className:"h-3.5 w-3.5"})]})}),o.jsx(xe,{to:"/inventory",children:o.jsx(O,{size:"sm",variant:"outline",children:"Browse inventories"})})]})]})]})]})}const y5=[{icon:Gf,title:"Pick an Inventory",description:"Collections of ingredients for any topicsupplements, recipes, routines. Pick one to start building.",color:"bg-primary/10 text-primary"},{icon:Mn,title:"Build & Review",description:"Tap items you use, hit Review, and get instant AI feedback on your setup.",color:"bg-accent/15 text-accent-foreground"},{icon:fd,title:"Share & Remix",description:"Post to the Wall, comment on others, or remix what they've built.",color:"bg-secondary/15 text-secondary-foreground",link:"/wall",linkText:"See the Wall "}];function w5(){return o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold tracking-tight",children:"How It Works"}),o.jsx("div",{className:"grid gap-4 sm:grid-cols-3",children:y5.map((e,t)=>o.jsx(se,{className:"bg-card/60 backdrop-blur-sm animate-fade-in",style:{animationDelay:`${t*.1}s`},children:o.jsxs(ce,{className:"p-5 space-y-3",children:[o.jsx("div",{className:`h-10 w-10 rounded-lg flex items-center justify-center ${e.color}`,children:o.jsx(e.icon,{className:"h-5 w-5"})}),o.jsx("h3",{className:"font-semibold",children:e.title}),o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:e.description}),"link"in e&&e.link&&o.jsx(xe,{to:e.link,className:"inline-block text-sm text-primary hover:underline font-medium",children:e.linkText})]})},e.title))})]})}function x5(){return o.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[o.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none -z-10",children:[o.jsx("div",{className:"absolute -top-40 -right-40 w-[520px] h-[520px] bg-primary/10 rounded-full blur-3xl animate-drift"}),o.jsx("div",{className:"absolute top-1/2 -left-32 w-96 h-96 bg-accent/20 rounded-full blur-3xl animate-float"}),o.jsx("div",{className:"absolute -bottom-20 right-1/4 w-80 h-80 bg-secondary/10 rounded-full blur-3xl animate-pulse-soft"})]}),o.jsx(Ot,{}),o.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-10 space-y-12",children:[o.jsxs("section",{className:"text-center space-y-5 animate-fade-in",children:[o.jsx("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-black tracking-tight",children:o.jsx("span",{className:"text-gradient-themed",style:{fontFamily:"'Impact', 'Haettenschweiler', 'Franklin Gothic Bold', 'Charcoal', sans-serif",letterSpacing:"0.06em"},children:"BLUEPRINTS"})}),o.jsx("p",{className:"text-sm uppercase tracking-widest text-primary/80 font-medium",children:"Create & share recipes for life routines"}),o.jsx("p",{className:"text-base text-muted-foreground max-w-md mx-auto leading-relaxed",children:"Build routines from shared inventories, get AI reviews, and remix what others have made."}),o.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3 pt-2",children:[o.jsx(xe,{to:"/explore",children:o.jsxs(O,{size:"lg",className:"gap-2",children:["Start Exploring",o.jsx(Wm,{className:"h-4 w-4"})]})}),o.jsx(xe,{to:"/wall",children:o.jsxs(O,{size:"lg",variant:"outline",className:"gap-2",children:["Browse the Wall",o.jsx(Mn,{className:"h-4 w-4"})]})})]})]}),o.jsx(B$,{}),o.jsx(v5,{}),o.jsx(w5,{}),o.jsx(i5,{}),o.jsx(o5,{}),o.jsxs("footer",{className:"pt-8 border-t border-border/40 text-center space-y-4",children:[o.jsxs("nav",{className:"flex flex-wrap items-center justify-center gap-4 text-sm text-muted-foreground",children:[o.jsx(xe,{to:"/wall",className:"hover:text-foreground transition-colors",children:"Wall"}),o.jsx("span",{className:"text-border",children:""}),o.jsx(xe,{to:"/inventory",className:"hover:text-foreground transition-colors",children:"Inventories"}),o.jsx("span",{className:"text-border",children:""}),o.jsx(xe,{to:"/tags",className:"hover:text-foreground transition-colors",children:"Tags"}),o.jsx("span",{className:"text-border",children:""}),o.jsx(xe,{to:"/auth",className:"hover:text-foreground transition-colors",children:"Sign In"})]}),o.jsx("p",{className:"text-xs text-muted-foreground/70",children:"Built with curiosity. Share what works."})]})]})]})}function be({className:e,...t}){return o.jsx("div",{className:Y("animate-pulse rounded-md bg-muted",e),...t})}var Ad="Tabs",[b5,c6]=Mt(Ad,[Sd]),Ij=Sd(),[_5,Wg]=b5(Ad),Oj=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=ra(l),[h,f]=Cr({prop:n,onChange:s,defaultProp:i??"",caller:Ad});return o.jsx(_5,{scope:r,baseId:Sr(),value:h,onValueChange:f,orientation:a,dir:d,activationMode:c,children:o.jsx(le.div,{dir:d,"data-orientation":a,...u,ref:t})})});Oj.displayName=Ad;var Mj="TabsList",Dj=p.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,i=Wg(Mj,r),a=Ij(r);return o.jsx(tS,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:n,children:o.jsx(le.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});Dj.displayName=Mj;var Lj="TabsTrigger",$j=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...i}=e,a=Wg(Lj,r),l=Ij(r),c=Bj(a.baseId,n),u=zj(a.baseId,n),d=n===a.value;return o.jsx(rS,{asChild:!0,...l,focusable:!s,active:d,children:o.jsx(le.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:t,onMouseDown:H(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?a.onValueChange(n):h.preventDefault()}),onKeyDown:H(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&a.onValueChange(n)}),onFocus:H(e.onFocus,()=>{const h=a.activationMode!=="manual";!d&&!s&&h&&a.onValueChange(n)})})})});$j.displayName=Lj;var Fj="TabsContent",Uj=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:i,...a}=e,l=Wg(Fj,r),c=Bj(l.baseId,n),u=zj(l.baseId,n),d=n===l.value,h=p.useRef(d);return p.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),o.jsx(Ct,{present:s||d,children:({present:f})=>o.jsx(le.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});Uj.displayName=Fj;function Bj(e,t){return`${e}-trigger-${t}`}function zj(e,t){return`${e}-content-${t}`}var S5=Oj,qj=Dj,Wj=$j,Vj=Uj;const na=S5,Ai=p.forwardRef(({className:e,...t},r)=>o.jsx(qj,{ref:r,className:Y("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Ai.displayName=qj.displayName;const xr=p.forwardRef(({className:e,...t},r)=>o.jsx(Wj,{ref:r,className:Y("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));xr.displayName=Wj.displayName;const br=p.forwardRef(({className:e,...t},r)=>o.jsx(Vj,{ref:r,className:Y("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));br.displayName=Vj.displayName;function Hj(e=10){return Fe({queryKey:["popular-inventory-tags",e],queryFn:async()=>{const{data:t,error:r}=await R.from("inventory_tags").select("tag_id");if(r)throw r;const n=new Map;(t||[]).forEach(c=>{n.set(c.tag_id,(n.get(c.tag_id)||0)+1)});const s=[...n.entries()].sort((c,u)=>u[1]-c[1]).slice(0,e).map(([c])=>c);if(s.length===0)return[];const{data:i,error:a}=await R.from("tags").select("id, slug").in("id",s);if(a)throw a;return(i||[]).map(c=>({id:c.id,slug:c.slug,count:n.get(c.id)||0})).sort((c,u)=>u.count-c.count)},staleTime:5*60*1e3})}const j5=[{value:"for-you",label:"For You"},{value:"latest",label:"Latest"},{value:"trending",label:"Trending"}];function k5(e){return!e||typeof e!="object"||Array.isArray(e)?0:Object.values(e).reduce((t,r)=>t+(Array.isArray(r)?r.length:0),0)}function N5(){const{user:e,isLoading:t}=Ee(),{toast:r}=Vt(),n=Dt(),[s,i]=p.useState("for-you"),{data:a=[]}=Hj(6),l=ht({mutationFn:async m=>{if(!e)throw new Error("Must be logged in");const{error:b}=await R.from("tag_follows").insert({tag_id:m,user_id:e.id});if(b)throw b}}),c=["wall-blueprints",s,e==null?void 0:e.id],{data:u,isLoading:d}=Fe({queryKey:c,queryFn:async()=>{const m=s==="for-you"&&!!e,b=s==="for-you"?120:80;let g=R.from("blueprints").select("id, creator_user_id, title, selected_items, llm_review, likes_count, created_at").eq("is_public",!0).order("created_at",{ascending:!1}).limit(b);if(s==="trending"){const M=new Date;M.setDate(M.getDate()-3),g=g.gte("created_at",M.toISOString()).order("likes_count",{ascending:!1}).order("created_at",{ascending:!1})}const{data:y,error:x}=await g;if(x)throw x;if(!y||y.length===0)return[];const w=y.map(M=>M.id),v=[...new Set(y.map(M=>M.creator_user_id))],[_,S,j]=await Promise.all([R.from("blueprint_tags").select("blueprint_id, tag_id").in("blueprint_id",w),e?R.from("blueprint_likes").select("blueprint_id").eq("user_id",e.id).in("blueprint_id",w):Promise.resolve({data:[]}),R.from("profiles").select("user_id, display_name, avatar_url").in("user_id",v)]),k=_.data||[],C=[...new Set(k.map(M=>M.tag_id))],{data:T}=C.length>0?await R.from("tags").select("id, slug").in("id",C):{data:[]},A=new Map((T||[]).map(M=>[M.id,M])),$=new Map;k.forEach(M=>{const Z=A.get(M.tag_id);if(!Z)return;const P=$.get(M.blueprint_id)||[];P.push(Z),$.set(M.blueprint_id,P)});const D=new Set((S.data||[]).map(M=>M.blueprint_id)),X=new Map((j.data||[]).map(M=>[M.user_id,M]));let I=new Set;if(m){const M=await R.from("tag_follows").select("tag_id").eq("user_id",e.id);I=new Set((M.data||[]).map(Z=>Z.tag_id))}const ae=y.map(M=>({...M,profile:X.get(M.creator_user_id)||{display_name:null,avatar_url:null},tags:$.get(M.id)||[],user_liked:D.has(M.id)}));return m?I.size===0?[]:ae.filter(M=>M.tags.some(Z=>I.has(Z.id))):ae}}),h=ht({mutationFn:async({blueprintId:m,liked:b})=>{if(!e)throw new Error("Must be logged in");b?await R.from("blueprint_likes").delete().eq("blueprint_id",m).eq("user_id",e.id):await R.from("blueprint_likes").insert({blueprint_id:m,user_id:e.id})},onMutate:async({blueprintId:m,liked:b})=>{await n.cancelQueries({queryKey:c});const g=n.getQueryData(c);return n.setQueryData(c,y=>y==null?void 0:y.map(x=>x.id===m?{...x,user_liked:!b,likes_count:b?x.likes_count-1:x.likes_count+1}:x)),{previousPosts:g}},onError:(m,b,g)=>{n.setQueryData(c,g==null?void 0:g.previousPosts),r({title:"Error",description:"Failed to update like. Please try again.",variant:"destructive"})}}),f=(m,b)=>{if(!e){r({title:"Sign in required",description:"Please sign in to like blueprints."});return}h.mutate({blueprintId:m,liked:b})};return t?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})}):o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[o.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent/5 rounded-full blur-3xl"})]}),o.jsx(Ot,{}),o.jsx("main",{className:"max-w-3xl mx-auto px-4 pb-24",children:o.jsxs(na,{value:s,onValueChange:m=>i(m),children:[o.jsx(Ai,{className:"mb-4",children:j5.map(m=>o.jsx(xr,{value:m.value,children:m.label},m.value))}),o.jsx(br,{value:s,className:"mt-0",children:d?Array.from({length:3}).map((m,b)=>o.jsxs(se,{children:[o.jsxs(Ge,{className:"flex flex-row items-center gap-3",children:[o.jsx(be,{className:"h-10 w-10 rounded-full"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(be,{className:"h-4 w-24"}),o.jsx(be,{className:"h-3 w-16"})]})]}),o.jsx(ce,{children:o.jsx(be,{className:"h-20 w-full"})})]},b)):u&&u.length>0?o.jsx("div",{className:"space-y-4",children:u.map(m=>{const b=m.profile.display_name||"Anonymous",g=b.slice(0,2).toUpperCase(),y=k5(m.selected_items),x=m.llm_review?m.llm_review.slice(0,160):"";return o.jsx(xe,{to:`/blueprint/${m.id}`,className:"block",children:o.jsxs(se,{className:"overflow-hidden transition hover:border-primary/40 hover:shadow-md",children:[o.jsxs(Ge,{className:"flex flex-row items-center gap-3 pb-2",children:[o.jsxs(xe,{to:`/u/${m.creator_user_id}`,onClick:w=>w.stopPropagation(),className:"flex items-center gap-3 hover:opacity-80 transition-opacity",children:[o.jsxs(Gr,{className:"h-10 w-10",children:[o.jsx(Yr,{src:m.profile.avatar_url||void 0}),o.jsx(Qr,{className:"bg-primary/10 text-primary text-sm",children:g})]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-sm",children:b}),o.jsx("p",{className:"text-xs text-muted-foreground",children:_i(new Date(m.created_at),{addSuffix:!0})})]})]}),o.jsx("div",{className:"flex-1"}),o.jsxs(Ae,{variant:"secondary",className:"bg-primary/10 text-primary",children:[o.jsx(Wr,{className:"h-3 w-3 mr-1"}),"Blueprint"]})]}),o.jsxs(ce,{className:"pt-0 space-y-3",children:[o.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:m.title}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[y," item",y!==1?"s":""]}),x&&o.jsxs("p",{className:"text-sm pt-2 border-t border-border/50 text-muted-foreground",children:[x,"..."]})]}),m.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:m.tags.map(w=>o.jsx(xe,{to:`/tags?q=${w.slug}`,onClick:v=>v.stopPropagation(),children:o.jsxs(Ae,{variant:"outline",className:"text-xs hover:border-primary hover:text-primary",children:["#",w.slug]})},w.id))})]}),o.jsx(Td,{className:"pt-0 flex flex-col gap-4",children:o.jsxs("div",{className:"flex items-center gap-4 w-full",children:[o.jsxs(O,{variant:"ghost",size:"sm",className:m.user_liked?"text-red-500":"",onClick:w=>{w.preventDefault(),f(m.id,m.user_liked)},children:[o.jsx(At,{className:`h-4 w-4 mr-1 ${m.user_liked?"fill-current":""}`}),m.likes_count]}),o.jsx(O,{variant:"ghost",size:"sm",disabled:!0,onClick:w=>w.preventDefault(),children:o.jsx($2,{className:"h-4 w-4"})})]})})]})},m.id)})}):o.jsx(se,{className:"text-center py-12",children:o.jsx(ce,{children:o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center",children:s==="for-you"?o.jsx(__,{className:"h-8 w-8 text-muted-foreground"}):o.jsx(Wr,{className:"h-8 w-8 text-muted-foreground"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:s==="for-you"?"Personalize your feed":"No blueprints yet"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s==="for-you"?"Follow tags to see related blueprints here.":"Be the first to share a blueprint."})]}),s==="for-you"&&a.length>0&&o.jsxs("div",{className:"space-y-3 w-full max-w-md",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:"Popular tags to follow:"}),o.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:a.map(m=>o.jsxs(O,{variant:"outline",size:"sm",className:"gap-1.5",onClick:()=>{if(!e){r({title:"Sign in required",description:"Please sign in to follow tags."});return}l.mutate(m.id,{onSuccess:()=>{n.invalidateQueries({queryKey:c}),r({title:"Tag followed!",description:`You're now following #${m.slug}`})}})},children:["#",m.slug]},m.id))}),o.jsx(O,{variant:"ghost",size:"sm",className:"text-muted-foreground",onClick:()=>i("latest"),children:"Or browse Latest instead "})]}),s!=="for-you"&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx(xe,{to:"/inventory",children:o.jsx(O,{children:"Create Blueprint"})}),o.jsx(xe,{to:"/tags",children:o.jsx(O,{variant:"outline",children:"Explore Tags"})})]})]})})})})]})})]})}const Me=p.forwardRef(({className:e,type:t,...r},n)=>o.jsx("input",{type:t,className:Y("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));Me.displayName="Input";function Kj(e){const{user:t}=Ee();return Fe({queryKey:["is-following",t==null?void 0:t.id,e],queryFn:async()=>{if(!t||!e||t.id===e)return!1;const{data:r,error:n}=await R.from("user_follows").select("id").eq("follower_id",t.id).eq("following_id",e).maybeSingle();if(n)throw n;return!!r},enabled:!!t&&!!e&&t.id!==e})}function Gj(){const{user:e}=Ee(),t=Dt();return ht({mutationFn:async r=>{if(!e)throw new Error("Must be logged in");if(e.id===r)throw new Error("Cannot follow yourself");const{error:n}=await R.from("user_follows").insert({follower_id:e.id,following_id:r});if(n)throw n},onSuccess:(r,n)=>{t.invalidateQueries({queryKey:["is-following",e==null?void 0:e.id,n]}),t.invalidateQueries({queryKey:["user-profile",n]}),t.invalidateQueries({queryKey:["user-followers",n]}),t.invalidateQueries({queryKey:["user-following",e==null?void 0:e.id]})}})}function Yj(){const{user:e}=Ee(),t=Dt();return ht({mutationFn:async r=>{if(!e)throw new Error("Must be logged in");const{error:n}=await R.from("user_follows").delete().eq("follower_id",e.id).eq("following_id",r);if(n)throw n},onSuccess:(r,n)=>{t.invalidateQueries({queryKey:["is-following",e==null?void 0:e.id,n]}),t.invalidateQueries({queryKey:["user-profile",n]}),t.invalidateQueries({queryKey:["user-followers",n]}),t.invalidateQueries({queryKey:["user-following",e==null?void 0:e.id]})}})}function C5(e){return Fe({queryKey:["user-followers",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await R.from("user_follows").select("follower_id").eq("following_id",e);if(r)throw r;if(!t||t.length===0)return[];const n=t.map(a=>a.follower_id),{data:s,error:i}=await R.from("profiles").select("user_id, display_name, avatar_url").in("user_id",n);if(i)throw i;return s||[]},enabled:!!e})}function E5(e){return Fe({queryKey:["user-following",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await R.from("user_follows").select("following_id").eq("follower_id",e);if(r)throw r;if(!t||t.length===0)return[];const n=t.map(a=>a.following_id),{data:s,error:i}=await R.from("profiles").select("user_id, display_name, avatar_url").in("user_id",n);if(i)throw i;return s||[]},enabled:!!e})}function T5({userId:e,displayName:t,avatarUrl:r,followerCount:n}){const{user:s}=Ee(),{data:i,isLoading:a}=Kj(e),l=Gj(),c=Yj(),u=(s==null?void 0:s.id)===e,d=l.isPending||c.isPending,h=f=>{f.preventDefault(),f.stopPropagation(),s&&(i?c.mutate(e):l.mutate(e))};return o.jsx(se,{className:"p-3 hover:shadow-soft-md transition-all",children:o.jsxs(xe,{to:`/u/${e}`,className:"flex items-center gap-3",children:[o.jsxs(Gr,{className:"h-8 w-8",children:[o.jsx(Yr,{src:r||void 0,alt:t||"User"}),o.jsx(Qr,{className:"bg-muted",children:o.jsx(Qf,{className:"h-4 w-4 text-muted-foreground"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium text-sm truncate",children:t||"Anonymous"}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:[n," ",n===1?"follower":"followers"]})]}),s&&!u&&o.jsx(O,{variant:i?"outline":"default",size:"sm",onClick:h,disabled:d||a,className:"shrink-0",children:i?"Unfollow":"Follow"})]})})}function R5({result:e,onTagClick:t}){const r=Array.isArray(e.selectedItems)?e.selectedItems.length:0;return o.jsx(xe,{to:`/blueprint/${e.id}`,children:o.jsxs(se,{className:"p-4 hover:shadow-soft-md transition-all h-full",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsx("h3",{className:"font-medium text-sm line-clamp-2",children:e.title}),o.jsx(ud,{className:"h-4 w-4 text-muted-foreground shrink-0"})]}),o.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mb-3",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Wr,{className:"h-3 w-3"}),r," items"]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(At,{className:"h-3 w-3"}),e.likesCount]})]}),e.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.slice(0,3).map(n=>o.jsxs(Ae,{variant:"secondary",className:"text-xs cursor-pointer hover:bg-secondary/80",onClick:s=>{s.preventDefault(),s.stopPropagation(),t==null||t(`#${n}`)},children:["#",n]},n))})]})})}function P5({result:e,onTagClick:t}){return o.jsx(xe,{to:`/inventory/${e.id}`,children:o.jsxs(se,{className:"p-4 hover:shadow-soft-md transition-all h-full",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsx("h3",{className:"font-medium text-sm line-clamp-2",children:e.title}),o.jsx(Wr,{className:"h-4 w-4 text-muted-foreground shrink-0"})]}),o.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mb-3",children:e.promptCategories}),o.jsx("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mb-3",children:o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(At,{className:"h-3 w-3"}),e.likesCount]})}),e.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.slice(0,3).map(r=>o.jsxs(Ae,{variant:"secondary",className:"text-xs cursor-pointer hover:bg-secondary/80",onClick:n=>{n.preventDefault(),n.stopPropagation(),t==null||t(`#${r}`)},children:["#",r]},r))})]})})}function A5({result:e}){return o.jsx(T5,{userId:e.userId,displayName:e.displayName,avatarUrl:e.avatarUrl,followerCount:e.followerCount})}function Tc({result:e,onTagClick:t}){switch(e.type){case"blueprint":return o.jsx(R5,{result:e,onTagClick:t});case"inventory":return o.jsx(P5,{result:e,onTagClick:t});case"user":return o.jsx(A5,{result:e});default:return null}}const Qj=4;function mn(e){return e.trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function Vg(e){const t=new Set,r=[];for(const n of e){const s=mn(n);!s||t.has(s)||(t.add(s),r.push(s))}return r.slice(0,Qj)}async function I5(e,t){const r=mn(e.replace(/^#/,""));if(t&&r){const{data:c}=await R.from("tags").select("id").ilike("slug",`%${r}%`);if(!c||c.length===0)return[];const u=c.map(y=>y.id),{data:d}=await R.from("blueprint_tags").select("blueprint_id").in("tag_id",u);if(!d||d.length===0)return[];const h=[...new Set(d.map(y=>y.blueprint_id))],{data:f,error:m}=await R.from("blueprints").select("id, title, selected_items, likes_count, creator_user_id, created_at").eq("is_public",!0).in("id",h).order("likes_count",{ascending:!1}).limit(20);if(m||!f)return[];const{data:b}=await R.from("blueprint_tags").select("blueprint_id, tags(slug)").in("blueprint_id",h),g=new Map;return b==null||b.forEach(y=>{const x=g.get(y.blueprint_id)||[];y.tags&&typeof y.tags=="object"&&"slug"in y.tags&&x.push(y.tags.slug),g.set(y.blueprint_id,x)}),f.map(y=>({type:"blueprint",id:y.id,title:y.title,selectedItems:y.selected_items,likesCount:y.likes_count,creatorUserId:y.creator_user_id,createdAt:y.created_at,tags:g.get(y.id)||[]}))}const{data:n,error:s}=await R.from("blueprints").select("id, title, selected_items, likes_count, creator_user_id, created_at").eq("is_public",!0).ilike("title",`%${e}%`).order("likes_count",{ascending:!1}).limit(20);if(s||!n)return[];const i=n.map(c=>c.id),{data:a}=await R.from("blueprint_tags").select("blueprint_id, tags(slug)").in("blueprint_id",i),l=new Map;return a==null||a.forEach(c=>{const u=l.get(c.blueprint_id)||[];c.tags&&typeof c.tags=="object"&&"slug"in c.tags&&u.push(c.tags.slug),l.set(c.blueprint_id,u)}),n.map(c=>({type:"blueprint",id:c.id,title:c.title,selectedItems:c.selected_items,likesCount:c.likes_count,creatorUserId:c.creator_user_id,createdAt:c.created_at,tags:l.get(c.id)||[]}))}async function O5(e,t){const r=mn(e.replace(/^#/,""));if(t&&r){const{data:c}=await R.from("tags").select("id").ilike("slug",`%${r}%`);if(!c||c.length===0)return[];const u=c.map(y=>y.id),{data:d}=await R.from("inventory_tags").select("inventory_id").in("tag_id",u);if(!d||d.length===0)return[];const h=[...new Set(d.map(y=>y.inventory_id))],{data:f,error:m}=await R.from("inventories").select("id, title, prompt_categories, likes_count, creator_user_id, created_at").eq("is_public",!0).in("id",h).order("likes_count",{ascending:!1}).limit(20);if(m||!f)return[];const{data:b}=await R.from("inventory_tags").select("inventory_id, tags(slug)").in("inventory_id",h),g=new Map;return b==null||b.forEach(y=>{const x=g.get(y.inventory_id)||[];y.tags&&typeof y.tags=="object"&&"slug"in y.tags&&x.push(y.tags.slug),g.set(y.inventory_id,x)}),f.map(y=>({type:"inventory",id:y.id,title:y.title,promptCategories:y.prompt_categories,likesCount:y.likes_count,creatorUserId:y.creator_user_id,createdAt:y.created_at,tags:g.get(y.id)||[]}))}const{data:n,error:s}=await R.from("inventories").select("id, title, prompt_categories, likes_count, creator_user_id, created_at").eq("is_public",!0).ilike("title",`%${e}%`).order("likes_count",{ascending:!1}).limit(20);if(s||!n)return[];const i=n.map(c=>c.id),{data:a}=await R.from("inventory_tags").select("inventory_id, tags(slug)").in("inventory_id",i),l=new Map;return a==null||a.forEach(c=>{const u=l.get(c.inventory_id)||[];c.tags&&typeof c.tags=="object"&&"slug"in c.tags&&u.push(c.tags.slug),l.set(c.inventory_id,u)}),n.map(c=>({type:"inventory",id:c.id,title:c.title,promptCategories:c.prompt_categories,likesCount:c.likes_count,creatorUserId:c.creator_user_id,createdAt:c.created_at,tags:l.get(c.id)||[]}))}async function M5(e){const{data:t,error:r}=await R.from("profiles").select("user_id, display_name, avatar_url, bio, follower_count").eq("is_public",!0).ilike("display_name",`%${e}%`).order("follower_count",{ascending:!1}).limit(15);return r||!t?[]:t.map(n=>({type:"user",userId:n.user_id,displayName:n.display_name,avatarUrl:n.avatar_url,bio:n.bio,followerCount:n.follower_count}))}function D5({query:e,filter:t,enabled:r=!0}){const n=e.trim(),s=n.startsWith("#");return Fe({queryKey:["explore-search",n,t],queryFn:async()=>{if(!n)return[];const i=[];if(t==="all"||t==="blueprints"){const a=await I5(n,s);i.push(...a)}if(t==="all"||t==="inventories"){const a=await O5(n,s);i.push(...a)}if((t==="all"||t==="users")&&!s){const a=await M5(n);i.push(...a)}return i},enabled:r&&n.length>0,staleTime:3e4})}function L5(){return Fe({queryKey:["trending-tags"],queryFn:async()=>{const{data:e,error:t}=await R.from("tags").select("id, slug, follower_count").order("follower_count",{ascending:!1}).limit(6);if(t)throw t;return e||[]},staleTime:6e4})}function $5(e,t){const[r,n]=p.useState(e);return p.useEffect(()=>{const s=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(s)}},[e,t]),r}const F5=[{value:"all",label:"All"},{value:"blueprints",label:"Blueprints"},{value:"inventories",label:"Inventories"},{value:"users",label:"Users"}];function U5(){const[e,t]=p.useState(""),[r,n]=p.useState("all"),s=$5(e,300),{data:i,isLoading:a}=D5({query:s,filter:r}),{data:l}=L5(),c=s.trim().length>0,u=h=>{t(h)},d=p.useMemo(()=>{if(!i||r!=="all")return null;const h={blueprints:[],inventories:[],users:[]};return i.forEach(f=>{f.type==="blueprint"?h.blueprints.push(f):f.type==="inventory"?h.inventories.push(f):f.type==="user"&&h.users.push(f)}),h},[i,r]);return o.jsxs("div",{className:"min-h-screen bg-gradient-soft",children:[o.jsx(Ot,{}),o.jsxs("main",{className:"container max-w-4xl mx-auto px-4 py-8",children:[o.jsxs("div",{className:"relative mb-6",children:[o.jsx(Ho,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),o.jsx(Me,{type:"text",placeholder:"Search blueprints, inventories, users...",value:e,onChange:h=>t(h.target.value),className:"pl-12 h-12 text-base bg-card/60 backdrop-blur-sm border-border/50"})]}),c&&o.jsx("div",{className:"flex gap-2 mb-6 flex-wrap",children:F5.map(h=>o.jsx(O,{variant:r===h.value?"default":"outline",size:"sm",onClick:()=>n(h.value),children:h.label},h.value))}),!c&&o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"text-center py-8",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Discover what works"}),o.jsx("p",{className:"text-muted-foreground",children:"Search blueprints, inventories, and creators  or explore trending topics below"})]}),l&&l.length>0&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Trending Tags"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(h=>o.jsxs(Ae,{variant:"secondary",className:"cursor-pointer hover:bg-secondary/80 transition-colors px-3 py-1",onClick:()=>u(`#${h.slug}`),children:["#",h.slug]},h.id))})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Popular Categories"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:["skincare","nutrition","fitness","wellness","sleep"].map(h=>o.jsx(O,{variant:"outline",size:"sm",onClick:()=>u(h),className:"capitalize",children:h},h))})]})]}),c&&a&&o.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((h,f)=>o.jsx(be,{className:"h-32 rounded-xl"},f))}),c&&!a&&d&&o.jsxs("div",{className:"space-y-8",children:[d.blueprints.length>0&&o.jsxs("section",{children:[o.jsx("h2",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Blueprints"}),o.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:d.blueprints.map(h=>o.jsx(Tc,{result:h,onTagClick:u},h.type==="blueprint"?h.id:""))})]}),d.inventories.length>0&&o.jsxs("section",{children:[o.jsx("h2",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Inventories"}),o.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:d.inventories.map(h=>o.jsx(Tc,{result:h,onTagClick:u},h.type==="inventory"?h.id:""))})]}),d.users.length>0&&o.jsxs("section",{children:[o.jsx("h2",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Users"}),o.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:d.users.map(h=>o.jsx(Tc,{result:h,onTagClick:u},h.type==="user"?h.userId:""))})]}),(i==null?void 0:i.length)===0&&o.jsxs("p",{className:"text-center text-muted-foreground py-8",children:['No results found for "',s,'"']})]}),c&&!a&&!d&&i&&o.jsx("div",{children:i.length>0?o.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:i.map(h=>o.jsx(Tc,{result:h,onTagClick:u},h.type==="user"?h.userId:h.id))}):o.jsxs("p",{className:"text-center text-muted-foreground py-8",children:['No results found for "',s,'"']})})]})]})}function Mp(e,[t,r]){return Math.min(r,Math.max(t,e))}var B5=[" ","Enter","ArrowUp","ArrowDown"],z5=[" ","Enter"],Si="Select",[Id,Od,q5]=Ml(Si),[sa,u6]=Mt(Si,[q5,Qo]),Md=Qo(),[W5,Us]=sa(Si),[V5,H5]=sa(Si),Jj=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:m,form:b}=e,g=Md(t),[y,x]=p.useState(null),[w,v]=p.useState(null),[_,S]=p.useState(!1),j=ra(u),[k,C]=Cr({prop:n,defaultProp:s??!1,onChange:i,caller:Si}),[T,A]=Cr({prop:a,defaultProp:l,onChange:c,caller:Si}),$=p.useRef(null),D=y?b||!!y.closest("form"):!0,[X,I]=p.useState(new Set),ae=Array.from(X).map(M=>M.props.value).join(";");return o.jsx(e1,{...g,children:o.jsxs(W5,{required:m,scope:t,trigger:y,onTriggerChange:x,valueNode:w,onValueNodeChange:v,valueNodeHasChildren:_,onValueNodeHasChildrenChange:S,contentId:Sr(),value:T,onValueChange:A,open:k,onOpenChange:C,dir:j,triggerPointerDownPosRef:$,disabled:f,children:[o.jsx(Id.Provider,{scope:t,children:o.jsx(V5,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(M=>{I(Z=>new Set(Z).add(M))},[]),onNativeOptionRemove:p.useCallback(M=>{I(Z=>{const P=new Set(Z);return P.delete(M),P})},[]),children:r})}),D?o.jsxs(bk,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:h,value:T,onChange:M=>A(M.target.value),disabled:f,form:b,children:[T===void 0?o.jsx("option",{value:""}):null,Array.from(X)]},ae):null]})})};Jj.displayName=Si;var Xj="SelectTrigger",Zj=p.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,i=Md(r),a=Us(Xj,r),l=a.disabled||n,c=je(t,a.onTriggerChange),u=Od(r),d=p.useRef("touch"),[h,f,m]=Sk(g=>{const y=u().filter(v=>!v.disabled),x=y.find(v=>v.value===a.value),w=jk(y,g,x);w!==void 0&&a.onValueChange(w.value)}),b=g=>{l||(a.onOpenChange(!0),m()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return o.jsx(sg,{asChild:!0,...i,children:o.jsx(le.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":_k(a.value)?"":void 0,...s,ref:c,onClick:H(s.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&b(g)}),onPointerDown:H(s.onPointerDown,g=>{d.current=g.pointerType;const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(b(g),g.preventDefault())}),onKeyDown:H(s.onKeyDown,g=>{const y=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(y&&g.key===" ")&&B5.includes(g.key)&&(b(),g.preventDefault())})})})});Zj.displayName=Xj;var ek="SelectValue",tk=p.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:a="",...l}=e,c=Us(ek,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,h=je(t,c.onValueNodeChange);return it(()=>{u(d)},[u,d]),o.jsx(le.span,{...l,ref:h,style:{pointerEvents:"none"},children:_k(c.value)?o.jsx(o.Fragment,{children:a}):i})});tk.displayName=ek;var K5="SelectIcon",rk=p.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return o.jsx(le.span,{"aria-hidden":!0,...s,ref:t,children:n||""})});rk.displayName=K5;var G5="SelectPortal",nk=e=>o.jsx(Dl,{asChild:!0,...e});nk.displayName=G5;var ji="SelectContent",sk=p.forwardRef((e,t)=>{const r=Us(ji,e.__scopeSelect),[n,s]=p.useState();if(it(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?Jr.createPortal(o.jsx(ik,{scope:e.__scopeSelect,children:o.jsx(Id.Slot,{scope:e.__scopeSelect,children:o.jsx("div",{children:e.children})})}),i):null}return o.jsx(ok,{...e,ref:t})});sk.displayName=ji;var Or=10,[ik,Bs]=sa(ji),Y5="SelectContentImpl",Q5=yi("SelectContent.RemoveScroll"),ok=p.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:b,hideWhenDetached:g,avoidCollisions:y,...x}=e,w=Us(ji,r),[v,_]=p.useState(null),[S,j]=p.useState(null),k=je(t,L=>_(L)),[C,T]=p.useState(null),[A,$]=p.useState(null),D=Od(r),[X,I]=p.useState(!1),ae=p.useRef(!1);p.useEffect(()=>{if(v)return _g(v)},[v]),bg();const M=p.useCallback(L=>{const[ue,..._e]=D().map(re=>re.ref.current),[V]=_e.slice(-1),te=document.activeElement;for(const re of L)if(re===te||(re==null||re.scrollIntoView({block:"nearest"}),re===ue&&S&&(S.scrollTop=0),re===V&&S&&(S.scrollTop=S.scrollHeight),re==null||re.focus(),document.activeElement!==te))return},[D,S]),Z=p.useCallback(()=>M([C,v]),[M,C,v]);p.useEffect(()=>{X&&Z()},[X,Z]);const{onOpenChange:P,triggerPointerDownPosRef:E}=w;p.useEffect(()=>{if(v){let L={x:0,y:0};const ue=V=>{var te,re;L={x:Math.abs(Math.round(V.pageX)-(((te=E.current)==null?void 0:te.x)??0)),y:Math.abs(Math.round(V.pageY)-(((re=E.current)==null?void 0:re.y)??0))}},_e=V=>{L.x<=10&&L.y<=10?V.preventDefault():v.contains(V.target)||P(!1),document.removeEventListener("pointermove",ue),E.current=null};return E.current!==null&&(document.addEventListener("pointermove",ue),document.addEventListener("pointerup",_e,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ue),document.removeEventListener("pointerup",_e,{capture:!0})}}},[v,P,E]),p.useEffect(()=>{const L=()=>P(!1);return window.addEventListener("blur",L),window.addEventListener("resize",L),()=>{window.removeEventListener("blur",L),window.removeEventListener("resize",L)}},[P]);const[B,ie]=Sk(L=>{const ue=D().filter(te=>!te.disabled),_e=ue.find(te=>te.ref.current===document.activeElement),V=jk(ue,L,_e);V&&setTimeout(()=>V.ref.current.focus())}),Q=p.useCallback((L,ue,_e)=>{const V=!ae.current&&!_e;(w.value!==void 0&&w.value===ue||V)&&(T(L),V&&(ae.current=!0))},[w.value]),me=p.useCallback(()=>v==null?void 0:v.focus(),[v]),U=p.useCallback((L,ue,_e)=>{const V=!ae.current&&!_e;(w.value!==void 0&&w.value===ue||V)&&$(L)},[w.value]),de=n==="popper"?Dp:ak,ge=de===Dp?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:b,hideWhenDetached:g,avoidCollisions:y}:{};return o.jsx(ik,{scope:r,content:v,viewport:S,onViewportChange:j,itemRefCallback:Q,selectedItem:C,onItemLeave:me,itemTextRefCallback:U,focusSelectedItem:Z,selectedItemText:A,position:n,isPositioned:X,searchRef:B,children:o.jsx(kd,{as:Q5,allowPinchZoom:!0,children:o.jsx(_d,{asChild:!0,trapped:w.open,onMountAutoFocus:L=>{L.preventDefault()},onUnmountAutoFocus:H(s,L=>{var ue;(ue=w.trigger)==null||ue.focus({preventScroll:!0}),L.preventDefault()}),children:o.jsx(Wo,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:L=>L.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:o.jsx(de,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:L=>L.preventDefault(),...x,...ge,onPlaced:()=>I(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:H(x.onKeyDown,L=>{const ue=L.ctrlKey||L.altKey||L.metaKey;if(L.key==="Tab"&&L.preventDefault(),!ue&&L.key.length===1&&ie(L.key),["ArrowUp","ArrowDown","Home","End"].includes(L.key)){let V=D().filter(te=>!te.disabled).map(te=>te.ref.current);if(["ArrowUp","End"].includes(L.key)&&(V=V.slice().reverse()),["ArrowUp","ArrowDown"].includes(L.key)){const te=L.target,re=V.indexOf(te);V=V.slice(re+1)}setTimeout(()=>M(V)),L.preventDefault()}})})})})})})});ok.displayName=Y5;var J5="SelectItemAlignedPosition",ak=p.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,i=Us(ji,r),a=Bs(ji,r),[l,c]=p.useState(null),[u,d]=p.useState(null),h=je(t,k=>d(k)),f=Od(r),m=p.useRef(!1),b=p.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:x,focusSelectedItem:w}=a,v=p.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&g&&y&&x){const k=i.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),A=x.getBoundingClientRect();if(i.dir!=="rtl"){const te=A.left-C.left,re=T.left-te,Ne=k.left-re,Se=k.width+Ne,ot=Math.max(Se,C.width),Ie=window.innerWidth-Or,yt=Mp(re,[Or,Math.max(Or,Ie-ot)]);l.style.minWidth=Se+"px",l.style.left=yt+"px"}else{const te=C.right-A.right,re=window.innerWidth-T.right-te,Ne=window.innerWidth-k.right-re,Se=k.width+Ne,ot=Math.max(Se,C.width),Ie=window.innerWidth-Or,yt=Mp(re,[Or,Math.max(Or,Ie-ot)]);l.style.minWidth=Se+"px",l.style.right=yt+"px"}const $=f(),D=window.innerHeight-Or*2,X=g.scrollHeight,I=window.getComputedStyle(u),ae=parseInt(I.borderTopWidth,10),M=parseInt(I.paddingTop,10),Z=parseInt(I.borderBottomWidth,10),P=parseInt(I.paddingBottom,10),E=ae+M+X+P+Z,B=Math.min(y.offsetHeight*5,E),ie=window.getComputedStyle(g),Q=parseInt(ie.paddingTop,10),me=parseInt(ie.paddingBottom,10),U=k.top+k.height/2-Or,de=D-U,ge=y.offsetHeight/2,L=y.offsetTop+ge,ue=ae+M+L,_e=E-ue;if(ue<=U){const te=$.length>0&&y===$[$.length-1].ref.current;l.style.bottom="0px";const re=u.clientHeight-g.offsetTop-g.offsetHeight,Ne=Math.max(de,ge+(te?me:0)+re+Z),Se=ue+Ne;l.style.height=Se+"px"}else{const te=$.length>0&&y===$[0].ref.current;l.style.top="0px";const Ne=Math.max(U,ae+g.offsetTop+(te?Q:0)+ge)+_e;l.style.height=Ne+"px",g.scrollTop=ue-U+g.offsetTop}l.style.margin=`${Or}px 0`,l.style.minHeight=B+"px",l.style.maxHeight=D+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[f,i.trigger,i.valueNode,l,u,g,y,x,i.dir,n]);it(()=>v(),[v]);const[_,S]=p.useState();it(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const j=p.useCallback(k=>{k&&b.current===!0&&(v(),w==null||w(),b.current=!1)},[v,w]);return o.jsx(Z5,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:j,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:o.jsx(le.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});ak.displayName=J5;var X5="SelectPopperPosition",Dp=p.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Or,...i}=e,a=Md(r);return o.jsx(ig,{...a,...i,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Dp.displayName=X5;var[Z5,Hg]=sa(ji,{}),Lp="SelectViewport",lk=p.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...s}=e,i=Bs(Lp,r),a=Hg(Lp,r),l=je(t,i.onViewportChange),c=p.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),o.jsx(Id.Slot,{scope:r,children:o.jsx(le.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:H(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=a;if(f!=null&&f.current&&h){const m=Math.abs(c.current-d.scrollTop);if(m>0){const b=window.innerHeight-Or*2,g=parseFloat(h.style.minHeight),y=parseFloat(h.style.height),x=Math.max(g,y);if(x<b){const w=x+m,v=Math.min(b,w),_=w-v;h.style.height=v+"px",h.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});lk.displayName=Lp;var ck="SelectGroup",[eF,tF]=sa(ck),rF=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Sr();return o.jsx(eF,{scope:r,id:s,children:o.jsx(le.div,{role:"group","aria-labelledby":s,...n,ref:t})})});rF.displayName=ck;var uk="SelectLabel",dk=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=tF(uk,r);return o.jsx(le.div,{id:s.id,...n,ref:t})});dk.displayName=uk;var Du="SelectItem",[nF,hk]=sa(Du),fk=p.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...a}=e,l=Us(Du,r),c=Bs(Du,r),u=l.value===n,[d,h]=p.useState(i??""),[f,m]=p.useState(!1),b=je(t,w=>{var v;return(v=c.itemRefCallback)==null?void 0:v.call(c,w,n,s)}),g=Sr(),y=p.useRef("touch"),x=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(nF,{scope:r,value:n,disabled:s,textId:g,isSelected:u,onItemTextChange:p.useCallback(w=>{h(v=>v||((w==null?void 0:w.textContent)??"").trim())},[]),children:o.jsx(Id.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:o.jsx(le.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:b,onFocus:H(a.onFocus,()=>m(!0)),onBlur:H(a.onBlur,()=>m(!1)),onClick:H(a.onClick,()=>{y.current!=="mouse"&&x()}),onPointerUp:H(a.onPointerUp,()=>{y.current==="mouse"&&x()}),onPointerDown:H(a.onPointerDown,w=>{y.current=w.pointerType}),onPointerMove:H(a.onPointerMove,w=>{var v;y.current=w.pointerType,s?(v=c.onItemLeave)==null||v.call(c):y.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:H(a.onPointerLeave,w=>{var v;w.currentTarget===document.activeElement&&((v=c.onItemLeave)==null||v.call(c))}),onKeyDown:H(a.onKeyDown,w=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&w.key===" "||(z5.includes(w.key)&&x(),w.key===" "&&w.preventDefault())})})})})});fk.displayName=Du;var Ra="SelectItemText",pk=p.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...i}=e,a=Us(Ra,r),l=Bs(Ra,r),c=hk(Ra,r),u=H5(Ra,r),[d,h]=p.useState(null),f=je(t,x=>h(x),c.onItemTextChange,x=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,x,c.value,c.disabled)}),m=d==null?void 0:d.textContent,b=p.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=u;return it(()=>(g(b),()=>y(b)),[g,y,b]),o.jsxs(o.Fragment,{children:[o.jsx(le.span,{id:c.textId,...i,ref:f}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Jr.createPortal(i.children,a.valueNode):null]})});pk.displayName=Ra;var mk="SelectItemIndicator",gk=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return hk(mk,r).isSelected?o.jsx(le.span,{"aria-hidden":!0,...n,ref:t}):null});gk.displayName=mk;var $p="SelectScrollUpButton",vk=p.forwardRef((e,t)=>{const r=Bs($p,e.__scopeSelect),n=Hg($p,e.__scopeSelect),[s,i]=p.useState(!1),a=je(t,n.onScrollButtonChange);return it(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?o.jsx(wk,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});vk.displayName=$p;var Fp="SelectScrollDownButton",yk=p.forwardRef((e,t)=>{const r=Bs(Fp,e.__scopeSelect),n=Hg(Fp,e.__scopeSelect),[s,i]=p.useState(!1),a=je(t,n.onScrollButtonChange);return it(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?o.jsx(wk,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});yk.displayName=Fp;var wk=p.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,i=Bs("SelectScrollButton",r),a=p.useRef(null),l=Od(r),c=p.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),it(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),o.jsx(le.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:H(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:H(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:H(s.onPointerLeave,()=>{c()})})}),sF="SelectSeparator",xk=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return o.jsx(le.div,{"aria-hidden":!0,...n,ref:t})});xk.displayName=sF;var Up="SelectArrow",iF=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Md(r),i=Us(Up,r),a=Bs(Up,r);return i.open&&a.position==="popper"?o.jsx(og,{...s,...n,ref:t}):null});iF.displayName=Up;var oF="SelectBubbleInput",bk=p.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const s=p.useRef(null),i=je(n,s),a=Ag(t);return p.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==t&&d){const h=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[a,t]),o.jsx(le.select,{...r,style:{...Gb,...r.style},ref:i,defaultValue:t})});bk.displayName=oF;function _k(e){return e===""||e===void 0}function Sk(e){const t=st(e),r=p.useRef(""),n=p.useRef(0),s=p.useCallback(a=>{const l=r.current+a;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=p.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function jk(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let a=aF(e,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==r));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function aF(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var lF=Jj,kk=Zj,cF=tk,uF=rk,dF=nk,Nk=sk,hF=lk,Ck=dk,Ek=fk,fF=pk,pF=gk,Tk=vk,Rk=yk,Pk=xk;const Ak=lF,Ik=cF,Kg=p.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(kk,{ref:n,className:Y("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,o.jsx(uF,{asChild:!0,children:o.jsx(Vo,{className:"h-4 w-4 opacity-50"})})]}));Kg.displayName=kk.displayName;const Ok=p.forwardRef(({className:e,...t},r)=>o.jsx(Tk,{ref:r,className:Y("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(C2,{className:"h-4 w-4"})}));Ok.displayName=Tk.displayName;const Mk=p.forwardRef(({className:e,...t},r)=>o.jsx(Rk,{ref:r,className:Y("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(Vo,{className:"h-4 w-4"})}));Mk.displayName=Rk.displayName;const Gg=p.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>o.jsx(dF,{children:o.jsxs(Nk,{ref:s,className:Y("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[o.jsx(Ok,{}),o.jsx(hF,{className:Y("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),o.jsx(Mk,{})]})}));Gg.displayName=Nk.displayName;const mF=p.forwardRef(({className:e,...t},r)=>o.jsx(Ck,{ref:r,className:Y("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));mF.displayName=Ck.displayName;const Lu=p.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(Ek,{ref:n,className:Y("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(pF,{children:o.jsx(Ti,{className:"h-4 w-4"})})}),o.jsx(fF,{children:t})]}));Lu.displayName=Ek.displayName;const gF=p.forwardRef(({className:e,...t},r)=>o.jsx(Pk,{ref:r,className:Y("-mx-1 my-1 h-px bg-muted",e),...t}));gF.displayName=Pk.displayName;function Dk({storageKey:e,title:t,description:r,className:n}){const[s,i]=p.useState(!0);p.useEffect(()=>{const l=localStorage.getItem(e)==="true";i(l)},[e]);const a=()=>{localStorage.setItem(e,"true"),i(!0)};return s?null:o.jsxs("div",{className:Y("relative rounded-xl border border-primary/30 bg-primary/5 p-4 pr-10 animate-fade-in",n),children:[o.jsx(O,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 h-6 w-6 text-muted-foreground hover:text-foreground",onClick:a,"aria-label":"Dismiss",children:o.jsx(zt,{className:"h-4 w-4"})}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"h-8 w-8 rounded-lg bg-primary/10 flex items-center justify-center shrink-0",children:o.jsx(I2,{className:"h-4 w-4 text-primary"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("h3",{className:"font-semibold text-sm",children:t}),o.jsx("p",{className:"text-sm text-muted-foreground",children:r})]})]})]})}const Gh="id, inventory_id, creator_user_id, title, selected_items, mix_notes, llm_review, is_public, likes_count, created_at, updated_at";function Yh(e,t){return t?e.or(`is_public.eq.true,creator_user_id.eq.${t}`):e.eq("is_public",!0)}async function ux(e,t){if(e.length===0)return[];const r=e.map(b=>b.id),n=e.map(b=>b.inventory_id).filter(Boolean),[s,i,a]=await Promise.all([R.from("blueprint_tags").select("blueprint_id, tag_id").in("blueprint_id",r),t?R.from("blueprint_likes").select("blueprint_id").eq("user_id",t).in("blueprint_id",r):Promise.resolve({data:[]}),n.length>0?R.from("inventories").select("id, title").in("id",n):Promise.resolve({data:[]})]),l=s.data||[],c=[...new Set(l.map(b=>b.tag_id))],{data:u}=c.length>0?await R.from("tags").select("id, slug").in("id",c):{data:[]},d=new Map((u||[]).map(b=>[b.id,b])),h=new Map;l.forEach(b=>{const g=d.get(b.tag_id);if(!g)return;const y=h.get(b.blueprint_id)||[];y.push(g),h.set(b.blueprint_id,y)});const f=new Set((i.data||[]).map(b=>b.blueprint_id)),m=new Map((a.data||[]).map(b=>[b.id,b.title]));return e.map(b=>({...b,tags:h.get(b.id)||[],user_liked:f.has(b.id),inventory_title:b.inventory_id&&m.get(b.inventory_id)||null}))}function vF(e,t){const{user:r}=Ee();return Fe({queryKey:["blueprint-search",e,t,r==null?void 0:r.id],queryFn:async()=>{const n=e.trim();let s=[];const i=t==="latest"?{column:"created_at",ascending:!1}:{column:"likes_count",ascending:!1};if(!n){let h=R.from("blueprints").select(Gh).order(i.column,{ascending:i.ascending}).limit(60);h=Yh(h,r==null?void 0:r.id);const{data:f,error:m}=await h;if(m)throw m;return s=f||[],ux(s,r==null?void 0:r.id)}const a=mn(n),l=[];if(a){const{data:h}=await R.from("tags").select("id").eq("slug",a).maybeSingle();if(h!=null&&h.id){const{data:f}=await R.from("blueprint_tags").select("blueprint_id").eq("tag_id",h.id),m=(f||[]).map(b=>b.blueprint_id);if(m.length>0){let b=R.from("blueprints").select(Gh).in("id",m).order(i.column,{ascending:i.ascending});b=Yh(b,r==null?void 0:r.id);const{data:g}=await b;l.push(...g||[])}}}let c=R.from("blueprints").select(Gh).ilike("title",`%${n}%`).order(i.column,{ascending:i.ascending});c=Yh(c,r==null?void 0:r.id);const{data:u}=await c;return u&&l.push(...u),s=Array.from(new Map(l.map(h=>[h.id,h])).values()),ux(s,r==null?void 0:r.id)}})}function yF(e=10){return Fe({queryKey:["popular-blueprint-tags",e],queryFn:async()=>{const{data:t,error:r}=await R.from("blueprint_tags").select("tag_id");if(r)throw r;const n=new Map;(t||[]).forEach(c=>{n.set(c.tag_id,(n.get(c.tag_id)||0)+1)});const s=[...n.entries()].sort((c,u)=>u[1]-c[1]).slice(0,e).map(([c])=>c);if(s.length===0)return[];const{data:i,error:a}=await R.from("tags").select("id, slug").in("id",s);if(a)throw a;return(i||[]).map(c=>({id:c.id,slug:c.slug,count:n.get(c.id)||0})).sort((c,u)=>u.count-c.count)},staleTime:5*60*1e3})}const dx="id, inventory_id, creator_user_id, title, selected_items, mix_notes, llm_review, is_public, likes_count, created_at, updated_at";function wF(e=6){const{user:t}=Ee();return Fe({queryKey:["suggested-blueprints",t==null?void 0:t.id,e],queryFn:async()=>{let r=[];if(t!=null&&t.id){const{data:y}=await R.from("blueprint_likes").select("blueprint_id").eq("user_id",t.id),x=(y||[]).map(w=>w.blueprint_id);if(x.length>0){const{data:w}=await R.from("blueprint_tags").select("tag_id").in("blueprint_id",x);r=[...new Set((w||[]).map(v=>v.tag_id))]}}let n=[];if(r.length>0&&(t!=null&&t.id)){const{data:y}=await R.from("blueprint_tags").select("blueprint_id").in("tag_id",r),x=[...new Set((y||[]).map(S=>S.blueprint_id))],{data:w}=await R.from("blueprint_likes").select("blueprint_id").eq("user_id",t.id),v=new Set((w||[]).map(S=>S.blueprint_id)),_=x.filter(S=>!v.has(S));if(_.length>0){const{data:S}=await R.from("blueprints").select(dx).in("id",_).eq("is_public",!0).order("likes_count",{ascending:!1}).limit(e);n=S||[]}}if(n.length<e){const y=n.map(v=>v.id),{data:x}=await R.from("blueprints").select(dx).eq("is_public",!0).order("likes_count",{ascending:!1}).limit(e*2),w=(x||[]).filter(v=>!y.includes(v.id)).slice(0,e-n.length);n=[...n,...w]}if(n.length===0)return[];const s=n.map(y=>y.id),i=n.map(y=>y.inventory_id).filter(Boolean),[a,l,c]=await Promise.all([R.from("blueprint_tags").select("blueprint_id, tag_id").in("blueprint_id",s),t!=null&&t.id?R.from("blueprint_likes").select("blueprint_id").eq("user_id",t.id).in("blueprint_id",s):Promise.resolve({data:[]}),i.length>0?R.from("inventories").select("id, title").in("id",i):Promise.resolve({data:[]})]),u=a.data||[],d=[...new Set(u.map(y=>y.tag_id))],{data:h}=d.length>0?await R.from("tags").select("id, slug").in("id",d):{data:[]},f=new Map((h||[]).map(y=>[y.id,y])),m=new Map;u.forEach(y=>{const x=f.get(y.tag_id);if(!x)return;const w=m.get(y.blueprint_id)||[];w.push(x),m.set(y.blueprint_id,w)});const b=new Set((l.data||[]).map(y=>y.blueprint_id)),g=new Map((c.data||[]).map(y=>[y.id,y.title]));return n.map(y=>({...y,tags:m.get(y.id)||[],user_liked:b.has(y.id),inventory_title:y.inventory_id&&g.get(y.inventory_id)||null}))},staleTime:2*60*1e3})}const Yg="id, inventory_id, creator_user_id, title, selected_items, steps, mix_notes, review_prompt, llm_review, is_public, likes_count, source_blueprint_id, created_at, updated_at";async function Lk(e,t){const r=Vg(e);if(r.length===0)return[];const{data:n,error:s}=await R.from("tags").select("id, slug").in("slug",r);if(s)throw s;const i=n||[],a=new Set(i.map(u=>u.slug)),l=r.filter(u=>!a.has(u));let c=[];if(l.length>0){const{data:u,error:d}=await R.from("tags").insert(l.map(h=>({slug:h,created_by:t}))).select("id, slug");if(d)throw d;c=u||[]}return[...i,...c]}function Qg(e){const{user:t}=Ee();return Fe({queryKey:["blueprint",e,t==null?void 0:t.id],enabled:!!e,queryFn:async()=>{if(!e)return null;const{data:r,error:n}=await R.from("blueprints").select(Yg).eq("id",e).maybeSingle();if(n)throw n;if(!r)return null;const[s,i,a]=await Promise.all([R.from("blueprint_tags").select("tag_id").eq("blueprint_id",e),t?R.from("blueprint_likes").select("id").eq("blueprint_id",e).eq("user_id",t.id):Promise.resolve({data:[]}),R.from("profiles").select("display_name, avatar_url").eq("user_id",r.creator_user_id).maybeSingle()]),l=(s.data||[]).map(d=>d.tag_id),{data:c}=l.length>0?await R.from("tags").select("id, slug").in("id",l):{data:[]},u=!!(i.data&&i.data.length>0);return{...r,tags:c||[],user_liked:u,creator_profile:a.data||null}}})}function $k(){const{user:e}=Ee(),t=Dt();return ht({mutationFn:async r=>{if(!e)throw new Error("Must be logged in");const{data:n,error:s}=await R.from("blueprints").insert({inventory_id:r.inventoryId,creator_user_id:e.id,title:r.title,selected_items:r.selectedItems,steps:r.steps,mix_notes:r.mixNotes,review_prompt:r.reviewPrompt,llm_review:r.llmReview,is_public:r.isPublic,source_blueprint_id:r.sourceBlueprintId||null}).select(Yg).single();if(s)throw s;const i=await Lk(r.tags,e.id);if(i.length>0){const{error:a}=await R.from("blueprint_tags").insert(i.map(l=>({blueprint_id:n.id,tag_id:l.id})));if(a)throw a}return n},onSuccess:()=>{t.invalidateQueries({queryKey:["blueprint"]}),t.invalidateQueries({queryKey:["blueprint-comments"]})}})}function Fk(){const{user:e}=Ee(),t=Dt();return ht({mutationFn:async({blueprintId:r,liked:n})=>{if(!e)throw new Error("Must be logged in");if(n){const{error:s}=await R.from("blueprint_likes").delete().eq("blueprint_id",r).eq("user_id",e.id);if(s)throw s}else{const{error:s}=await R.from("blueprint_likes").insert({blueprint_id:r,user_id:e.id});if(s)throw s}},onSuccess:()=>{t.invalidateQueries({queryKey:["blueprint"]}),t.invalidateQueries({queryKey:["blueprint-search"]}),t.invalidateQueries({queryKey:["suggested-blueprints"]})}})}function xF(){const{user:e}=Ee(),t=Dt();return ht({mutationFn:async r=>{if(!e)throw new Error("Must be logged in");const{data:n,error:s}=await R.from("blueprints").update({title:r.title,selected_items:r.selectedItems,steps:r.steps,mix_notes:r.mixNotes,review_prompt:r.reviewPrompt,llm_review:r.llmReview,is_public:r.isPublic}).eq("id",r.blueprintId).eq("creator_user_id",e.id).select(Yg).single();if(s)throw s;const i=await Lk(r.tags,e.id),{error:a}=await R.from("blueprint_tags").delete().eq("blueprint_id",r.blueprintId);if(a)throw a;if(i.length>0){const{error:l}=await R.from("blueprint_tags").insert(i.map(c=>({blueprint_id:r.blueprintId,tag_id:c.id})));if(l)throw l}return n},onSuccess:(r,n)=>{t.invalidateQueries({queryKey:["blueprint",n.blueprintId]}),t.invalidateQueries({queryKey:["blueprint-search"]}),t.invalidateQueries({queryKey:["suggested-blueprints"]}),t.invalidateQueries({queryKey:["blueprint-comments",n.blueprintId]})}})}function bF(e){return Fe({queryKey:["blueprint-comments",e],enabled:!!e,queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await R.from("blueprint_comments").select("id, content, created_at, user_id").eq("blueprint_id",e).order("created_at",{ascending:!1});if(r)throw r;const n=[...new Set((t||[]).map(a=>a.user_id))],{data:s}=n.length>0?await R.from("profiles").select("user_id, display_name, avatar_url").in("user_id",n):{data:[]},i=new Map((s||[]).map(a=>[a.user_id,a]));return(t||[]).map(a=>({...a,profile:i.get(a.user_id)||null}))}})}function _F(){const{user:e}=Ee(),t=Dt();return ht({mutationFn:async({blueprintId:r,content:n})=>{if(!e)throw new Error("Must be logged in");const{error:s}=await R.from("blueprint_comments").insert({blueprint_id:r,user_id:e.id,content:n});if(s)throw s},onSuccess:(r,n)=>{t.invalidateQueries({queryKey:["blueprint-comments",n.blueprintId]})}})}function SF(e){return!e||typeof e!="object"||Array.isArray(e)?0:Object.values(e).reduce((t,r)=>t+(Array.isArray(r)?r.length:0),0)}function Uk({blueprint:e,onLike:t}){const r=e.tags.slice(0,3),n=e.tags.length-3,s=SF(e.selected_items);return o.jsx(xe,{to:`/blueprint/${e.id}`,className:"block group",children:o.jsx(se,{className:"h-full transition-all duration-300 hover:border-primary/40 hover:shadow-lg hover:shadow-primary/10 group-focus-visible:ring-2 group-focus-visible:ring-primary",children:o.jsxs(ce,{className:"p-5 flex flex-col h-full",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsx("h3",{className:"font-semibold text-lg line-clamp-1",children:e.title}),o.jsx(ud,{className:"h-4 w-4 text-muted-foreground shrink-0"})]}),o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3 flex-grow",children:e.inventory_title?`From ${e.inventory_title}`:"Community blueprint"}),e.tags.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[r.map(i=>o.jsxs(Ae,{variant:"secondary",className:"text-xs",children:["#",i.slug]},i.id)),n>0&&o.jsxs(Ae,{variant:"outline",className:"text-xs text-muted-foreground",children:["+",n," more"]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border/50",children:[o.jsx("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:o.jsxs("span",{className:"flex items-center gap-1",title:"Items in this blueprint",children:[o.jsx(Wr,{className:"h-3.5 w-3.5"}),o.jsx("span",{children:s})]})}),o.jsxs(O,{variant:"ghost",size:"sm",className:`h-8 px-2 ${e.user_liked?"text-red-500 hover:text-red-600":"text-muted-foreground hover:text-foreground"}`,onClick:i=>{i.preventDefault(),i.stopPropagation(),t(e.id,e.user_liked)},"aria-label":e.user_liked?"Unlike blueprint":"Like blueprint",children:[o.jsx(At,{className:`h-4 w-4 ${e.user_liked?"fill-current":""}`}),o.jsx("span",{className:"ml-1 text-xs",children:e.likes_count})]})]})]})})})}function jF(e,t){return p.useReducer((r,n)=>t[r][n]??r,e)}var Jg="ScrollArea",[Bk,d6]=Mt(Jg),[kF,Er]=Bk(Jg),zk=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:i=600,...a}=e,[l,c]=p.useState(null),[u,d]=p.useState(null),[h,f]=p.useState(null),[m,b]=p.useState(null),[g,y]=p.useState(null),[x,w]=p.useState(0),[v,_]=p.useState(0),[S,j]=p.useState(!1),[k,C]=p.useState(!1),T=je(t,$=>c($)),A=ra(s);return o.jsx(kF,{scope:r,type:n,dir:A,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:b,scrollbarXEnabled:S,onScrollbarXEnabledChange:j,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:k,onScrollbarYEnabledChange:C,onCornerWidthChange:w,onCornerHeightChange:_,children:o.jsx(le.div,{dir:A,...a,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":v+"px",...e.style}})})});zk.displayName=Jg;var qk="ScrollAreaViewport",Wk=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:s,...i}=e,a=Er(qk,r),l=p.useRef(null),c=je(t,l,a.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(le.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:o.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});Wk.displayName=qk;var vn="ScrollAreaScrollbar",Xg=p.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Er(vn,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,l=e.orientation==="horizontal";return p.useEffect(()=>(l?i(!0):a(!0),()=>{l?i(!1):a(!1)}),[l,i,a]),s.type==="hover"?o.jsx(NF,{...n,ref:t,forceMount:r}):s.type==="scroll"?o.jsx(CF,{...n,ref:t,forceMount:r}):s.type==="auto"?o.jsx(Vk,{...n,ref:t,forceMount:r}):s.type==="always"?o.jsx(Zg,{...n,ref:t}):null});Xg.displayName=vn;var NF=p.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Er(vn,e.__scopeScrollArea),[i,a]=p.useState(!1);return p.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),a(!0)},d=()=>{c=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx(Ct,{present:r||i,children:o.jsx(Vk,{"data-state":i?"visible":"hidden",...n,ref:t})})}),CF=p.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Er(vn,e.__scopeScrollArea),i=e.orientation==="horizontal",a=Ld(()=>c("SCROLL_END"),100),[l,c]=jF("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),p.useEffect(()=>{const u=s.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const f=()=>{const m=u[d];h!==m&&(c("SCROLL"),a()),h=m};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[s.viewport,i,c,a]),o.jsx(Ct,{present:r||l!=="hidden",children:o.jsx(Zg,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:H(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:H(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Vk=p.forwardRef((e,t)=>{const r=Er(vn,e.__scopeScrollArea),{forceMount:n,...s}=e,[i,a]=p.useState(!1),l=e.orientation==="horizontal",c=Ld(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;a(l?u:d)}},10);return Uo(r.viewport,c),Uo(r.content,c),o.jsx(Ct,{present:n||i,children:o.jsx(Zg,{"data-state":i?"visible":"hidden",...s,ref:t})})}),Zg=p.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,s=Er(vn,e.__scopeScrollArea),i=p.useRef(null),a=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Qk(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:f=>a.current=f};function h(f,m){return IF(f,a.current,l,m)}return r==="horizontal"?o.jsx(EF,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollLeft,m=hx(f,l,s.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,s.dir))}}):r==="vertical"?o.jsx(TF,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollTop,m=hx(f,l);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),EF=p.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,i=Er(vn,e.__scopeScrollArea),[a,l]=p.useState(),c=p.useRef(null),u=je(t,c,i.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(Kk,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Dd(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(f),Xk(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Fu(a.paddingLeft),paddingEnd:Fu(a.paddingRight)}})}})}),TF=p.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,i=Er(vn,e.__scopeScrollArea),[a,l]=p.useState(),c=p.useRef(null),u=je(t,c,i.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(Kk,{"data-orientation":"vertical",...s,ref:u,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Dd(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(f),Xk(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Fu(a.paddingTop),paddingEnd:Fu(a.paddingBottom)}})}})}),[RF,Hk]=Bk(vn),Kk=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...f}=e,m=Er(vn,r),[b,g]=p.useState(null),y=je(t,T=>g(T)),x=p.useRef(null),w=p.useRef(""),v=m.viewport,_=n.content-n.viewport,S=st(d),j=st(c),k=Ld(h,10);function C(T){if(x.current){const A=T.clientX-x.current.left,$=T.clientY-x.current.top;u({x:A,y:$})}}return p.useEffect(()=>{const T=A=>{const $=A.target;(b==null?void 0:b.contains($))&&S(A,_)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[v,b,_,S]),p.useEffect(j,[n,j]),Uo(b,k),Uo(m.content,k),o.jsx(RF,{scope:r,scrollbar:b,hasThumb:s,onThumbChange:st(i),onThumbPointerUp:st(a),onThumbPositionChange:j,onThumbPointerDown:st(l),children:o.jsx(le.div,{...f,ref:y,style:{position:"absolute",...f.style},onPointerDown:H(e.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),x.current=b.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),C(T))}),onPointerMove:H(e.onPointerMove,C),onPointerUp:H(e.onPointerUp,T=>{const A=T.target;A.hasPointerCapture(T.pointerId)&&A.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=w.current,m.viewport&&(m.viewport.style.scrollBehavior=""),x.current=null})})})}),$u="ScrollAreaThumb",Gk=p.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=Hk($u,e.__scopeScrollArea);return o.jsx(Ct,{present:r||s.hasThumb,children:o.jsx(PF,{ref:t,...n})})}),PF=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...s}=e,i=Er($u,r),a=Hk($u,r),{onThumbPositionChange:l}=a,c=je(t,h=>a.onThumbChange(h)),u=p.useRef(void 0),d=Ld(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const h=i.viewport;if(h){const f=()=>{if(d(),!u.current){const m=OF(h,l);u.current=m,l()}};return l(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[i.viewport,d,l]),o.jsx(le.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:H(e.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),b=h.clientX-m.left,g=h.clientY-m.top;a.onThumbPointerDown({x:b,y:g})}),onPointerUp:H(e.onPointerUp,a.onThumbPointerUp)})});Gk.displayName=$u;var ev="ScrollAreaCorner",Yk=p.forwardRef((e,t)=>{const r=Er(ev,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?o.jsx(AF,{...e,ref:t}):null});Yk.displayName=ev;var AF=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,s=Er(ev,r),[i,a]=p.useState(0),[l,c]=p.useState(0),u=!!(i&&l);return Uo(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),Uo(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),a(d)}),u?o.jsx(le.div,{...n,ref:t,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Fu(e){return e?parseInt(e,10):0}function Qk(e,t){const r=e/t;return isNaN(r)?0:r}function Dd(e){const t=Qk(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function IF(e,t,r,n="ltr"){const s=Dd(r),i=s/2,a=t||i,l=s-a,c=r.scrollbar.paddingStart+a,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,h=n==="ltr"?[0,d]:[d*-1,0];return Jk([c,u],h)(e)}function hx(e,t,r="ltr"){const n=Dd(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-s,a=t.content-t.viewport,l=i-n,c=r==="ltr"?[0,a]:[a*-1,0],u=Mp(e,c);return Jk([0,a],[0,l])(u)}function Jk(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function Xk(e,t){return e>0&&e<t}var OF=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function s(){const i={left:e.scrollLeft,top:e.scrollTop},a=r.left!==i.left,l=r.top!==i.top;(a||l)&&t(),r=i,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function Ld(e,t){const r=st(e),n=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),p.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Uo(e,t){const r=st(t);it(()=>{let n=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(n),s.unobserve(e)}}},[e,r])}var Zk=zk,MF=Wk,DF=Yk;const tv=p.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(Zk,{ref:n,className:Y("relative overflow-hidden",e),...r,children:[o.jsx(MF,{className:"h-full w-full rounded-[inherit]",children:t}),o.jsx(rv,{}),o.jsx(DF,{})]}));tv.displayName=Zk.displayName;const rv=p.forwardRef(({className:e,orientation:t="vertical",...r},n)=>o.jsx(Xg,{ref:n,orientation:t,className:Y("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:o.jsx(Gk,{className:"relative flex-1 rounded-full bg-border"})}));rv.displayName=Xg.displayName;function eN({tags:e,selectedTag:t,onSelectTag:r}){const n=p.useRef(null);return e.length===0?null:o.jsx("div",{className:"relative",children:o.jsxs(tv,{className:"w-full whitespace-nowrap",ref:n,children:[o.jsxs("div",{className:"flex gap-2 pb-2",children:[t&&o.jsxs(O,{variant:"outline",size:"sm",className:"h-8 gap-1 text-xs shrink-0",onClick:()=>r(null),children:[o.jsx(zt,{className:"h-3 w-3"}),"Clear filter"]}),e.map(s=>o.jsxs(Ae,{variant:t===s.slug?"default":"secondary",className:`cursor-pointer shrink-0 transition-colors ${t===s.slug?"bg-primary text-primary-foreground hover:bg-primary/90":"hover:bg-secondary/80"}`,onClick:()=>r(t===s.slug?null:s.slug),role:"button",tabIndex:0,onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),r(t===s.slug?null:s.slug))},"aria-pressed":t===s.slug,children:["#",s.slug,o.jsxs("span",{className:"ml-1 text-xs opacity-70",children:["(",s.count,")"]})]},s.id))]}),o.jsx(rv,{orientation:"horizontal"})]})})}function LF({blueprints:e,isLoading:t,onLike:r}){return t?o.jsxs("section",{className:"space-y-3",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Suggested for You"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:3}).map((n,s)=>o.jsx(se,{children:o.jsxs(ce,{className:"p-5 space-y-3",children:[o.jsx(be,{className:"h-5 w-3/4"}),o.jsx(be,{className:"h-10 w-full"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(be,{className:"h-5 w-16"}),o.jsx(be,{className:"h-5 w-20"})]}),o.jsx(be,{className:"h-4 w-full"})]})},s))})]}):e.length===0?null:o.jsxs("section",{className:"space-y-3",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Suggested for You"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:e.slice(0,3).map(n=>o.jsx(Uk,{blueprint:n,onLike:r},n.id))})]})}function $F(){const[e,t]=p.useState(""),[r,n]=p.useState(null),[s,i]=p.useState("popular"),{user:a}=Ee(),{toast:l}=Vt(),c=r||e,{data:u,isLoading:d}=vF(c,s),{data:h=[],isLoading:f}=yF(12),{data:m=[],isLoading:b}=wF(6),g=Fk(),y=new Set(m.map(S=>S.id)),x=p.useMemo(()=>u?c?u:u.filter(S=>!y.has(S.id)):[],[u,y,c]),w=async(S,j)=>{if(!a){l({title:"Sign in required",description:"Please sign in to like blueprints.",variant:"destructive"});return}try{await g.mutateAsync({blueprintId:S,liked:j})}catch(k){l({title:"Action failed",description:k instanceof Error?k.message:"Please try again.",variant:"destructive"})}},v=S=>{n(S),S&&t("")},_=!c&&a;return o.jsxs("div",{className:"min-h-screen bg-background relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[o.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary/5 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute top-1/3 -left-20 w-60 h-60 bg-accent/5 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-20 right-1/4 w-40 h-40 bg-primary/3 rounded-full blur-2xl"})]}),o.jsx(Ot,{}),o.jsxs("main",{className:"relative max-w-6xl mx-auto px-4 py-8 space-y-8",children:[o.jsx(Dk,{storageKey:"blueprints_library_intro_dismissed",title:"Welcome to Blueprints!",description:"Blueprints are step-by-step routines built from inventories. Pick one to learn, remix, or share."}),o.jsxs("section",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-3xl font-semibold",children:"Blueprint Library"}),o.jsx(xe,{to:"/inventory",children:o.jsxs(O,{size:"sm",className:"gap-2",children:[o.jsx(Wr,{className:"h-4 w-4"}),"Build from Inventory"]})})]}),o.jsx("p",{className:"text-muted-foreground",children:"Search, sort, and explore the best blueprints from the community."})]}),o.jsx(se,{className:"bg-card/60 backdrop-blur-sm",children:o.jsxs(ce,{className:"p-4 flex flex-col gap-3 sm:flex-row sm:items-center",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[o.jsx(Ho,{className:"h-4 w-4 text-muted-foreground shrink-0"}),o.jsx(Me,{value:e,onChange:S=>{t(S.target.value),S.target.value&&n(null)},placeholder:"Search blueprints by title or tag...",className:"border-none shadow-none focus-visible:ring-0 bg-transparent"})]}),o.jsx("div",{className:"w-full sm:w-56",children:o.jsxs(Ak,{value:s,onValueChange:S=>i(S),children:[o.jsx(Kg,{children:o.jsx(Ik,{placeholder:"Sort by"})}),o.jsxs(Gg,{children:[o.jsx(Lu,{value:"popular",children:"Most liked"}),o.jsx(Lu,{value:"latest",children:"Newest"})]})]})})]})}),!f&&h.length>0&&o.jsx(eN,{tags:h,selectedTag:r,onSelectTag:v}),_&&o.jsx(LF,{blueprints:m,isLoading:b,onLike:w}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-lg font-semibold",children:c?`Results for "${c}"`:"All Blueprints"}),d?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((S,j)=>o.jsx(se,{children:o.jsxs(ce,{className:"p-5 space-y-3",children:[o.jsx(be,{className:"h-5 w-3/4"}),o.jsx(be,{className:"h-10 w-full"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(be,{className:"h-5 w-16"}),o.jsx(be,{className:"h-5 w-20"})]}),o.jsx(be,{className:"h-4 w-full"})]})},j))}):x.length>0?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(S=>o.jsx(Uk,{blueprint:S,onLike:w},S.id))}):o.jsx(se,{className:"bg-card/60 backdrop-blur-sm",children:o.jsxs(ce,{className:"py-12 text-center space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"No blueprints found"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:c?"Try a different search or clear filters.":"Be the first to publish a blueprint!"}),!c&&o.jsx(xe,{to:"/inventory",children:o.jsx(O,{children:"Build from Inventory"})})]})})]})]})]})}var FF="Label",tN=p.forwardRef((e,t)=>o.jsx(le.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));tN.displayName=FF;var rN=tN;const UF=ld("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ue=p.forwardRef(({className:e,...t},r)=>o.jsx(rN,{ref:r,className:Y(UF(),e),...t}));Ue.displayName=rN.displayName;var BF="Separator",fx="horizontal",zF=["horizontal","vertical"],nN=p.forwardRef((e,t)=>{const{decorative:r,orientation:n=fx,...s}=e,i=qF(n)?n:fx,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return o.jsx(le.div,{"data-orientation":i,...l,...s,ref:t})});nN.displayName=BF;function qF(e){return zF.includes(e)}var sN=nN;const nv=p.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},s)=>o.jsx(sN,{ref:s,decorative:r,orientation:t,className:Y("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));nv.displayName=sN.displayName;function WF(){const e=Fs(),{signIn:t,signUp:r,user:n}=Ee(),{toast:s}=Vt(),[i,a]=p.useState(!1),[l,c]=p.useState(!1),[u,d]=p.useState(""),[h,f]=p.useState(""),[m,b]=p.useState(""),[g,y]=p.useState(""),[x,w]=p.useState("");if(n)return e("/"),null;const v=async j=>{j.preventDefault(),a(!0);const{error:k}=await t(u,h);k?s({title:"Login failed",description:k.message,variant:"destructive"}):(s({title:"Welcome back!",description:"You have successfully logged in."}),e("/")),a(!1)},_=async j=>{j.preventDefault(),a(!0);const{error:k}=await r(m,g,x);k?s({title:"Signup failed",description:k.message,variant:"destructive"}):(s({title:"Account created!",description:"Welcome to Blueprints. Your account is ready."}),e("/")),a(!1)},S=async()=>{c(!0);const j=new URL("/remix-of-stackwise-advisor/",window.location.origin).toString(),{error:k}=await R.auth.signInWithOAuth({provider:"google",options:{redirectTo:j}});k&&(s({title:"Google sign-in failed",description:k.message,variant:"destructive"}),c(!1))};return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:[o.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[o.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/10 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent/10 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsxs(se,{className:"w-full max-w-md",children:[o.jsxs(Ge,{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[o.jsx(Vm,{className:"h-8 w-8 text-primary"}),o.jsx("span",{className:"text-2xl font-bold",children:"Blueprints"})]}),o.jsx(vt,{children:"Welcome"}),o.jsx(qa,{children:"Sign in to save your blueprints and share with the community"})]}),o.jsxs(ce,{className:"space-y-4",children:[o.jsxs(O,{type:"button",variant:"outline",className:"w-full gap-2",onClick:S,disabled:i||l,children:[l?o.jsx(di,{className:"h-4 w-4 animate-spin"}):o.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",children:[o.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),o.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),o.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),o.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx(nv,{className:"w-full"})}),o.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:o.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or continue with email"})})]}),o.jsxs(na,{defaultValue:"login",className:"w-full",children:[o.jsxs(Ai,{className:"grid w-full grid-cols-2",children:[o.jsx(xr,{value:"login",children:"Login"}),o.jsx(xr,{value:"signup",children:"Sign Up"})]}),o.jsx(br,{value:"login",children:o.jsxs("form",{onSubmit:v,className:"space-y-4 mt-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{htmlFor:"login-email",children:"Email"}),o.jsx(Me,{id:"login-email",type:"email",placeholder:"you@example.com",value:u,onChange:j=>d(j.target.value),required:!0,disabled:i||l})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{htmlFor:"login-password",children:"Password"}),o.jsx(Me,{id:"login-password",type:"password",placeholder:"",value:h,onChange:j=>f(j.target.value),required:!0,disabled:i||l,minLength:6})]}),o.jsx(O,{type:"submit",className:"w-full",disabled:i||l,children:i?o.jsxs(o.Fragment,{children:[o.jsx(di,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})}),o.jsx(br,{value:"signup",children:o.jsxs("form",{onSubmit:_,className:"space-y-4 mt-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{htmlFor:"signup-name",children:"Display Name"}),o.jsx(Me,{id:"signup-name",type:"text",placeholder:"Your name",value:x,onChange:j=>w(j.target.value),disabled:i||l})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{htmlFor:"signup-email",children:"Email"}),o.jsx(Me,{id:"signup-email",type:"email",placeholder:"you@example.com",value:m,onChange:j=>b(j.target.value),required:!0,disabled:i||l})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{htmlFor:"signup-password",children:"Password"}),o.jsx(Me,{id:"signup-password",type:"password",placeholder:"",value:g,onChange:j=>y(j.target.value),required:!0,disabled:i||l,minLength:6})]}),o.jsx(O,{type:"submit",className:"w-full",disabled:i||l,children:i?o.jsxs(o.Fragment,{children:[o.jsx(di,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):"Create Account"})]})})]})]}),o.jsx(Td,{className:"text-center text-sm text-muted-foreground",children:o.jsx("p",{className:"w-full",children:"By signing up, you agree to our Terms of Service and Privacy Policy."})})]})]})}const tr=p.forwardRef(({className:e,...t},r)=>o.jsx("textarea",{className:Y("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));tr.displayName="Textarea";var $d="Switch",[VF,h6]=Mt($d),[HF,KF]=VF($d),iN=p.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=e,[f,m]=p.useState(null),b=je(t,v=>m(v)),g=p.useRef(!1),y=f?d||!!f.closest("form"):!0,[x,w]=Cr({prop:s,defaultProp:i??!1,onChange:u,caller:$d});return o.jsxs(HF,{scope:r,checked:x,disabled:l,children:[o.jsx(le.button,{type:"button",role:"switch","aria-checked":x,"aria-required":a,"data-state":cN(x),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:b,onClick:H(e.onClick,v=>{w(_=>!_),y&&(g.current=v.isPropagationStopped(),g.current||v.stopPropagation())})}),y&&o.jsx(lN,{control:f,bubbles:!g.current,name:n,value:c,checked:x,required:a,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});iN.displayName=$d;var oN="SwitchThumb",aN=p.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=KF(oN,r);return o.jsx(le.span,{"data-state":cN(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});aN.displayName=oN;var GF="SwitchBubbleInput",lN=p.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...s},i)=>{const a=p.useRef(null),l=je(a,i),c=Ag(r),u=tg(t);return p.useEffect(()=>{const d=a.current;if(!d)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&m){const b=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(b)}},[c,r,n]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});lN.displayName=GF;function cN(e){return e?"checked":"unchecked"}var uN=iN,YF=aN;const ki=p.forwardRef(({className:e,...t},r)=>o.jsx(uN,{className:Y("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:r,children:o.jsx(YF,{className:Y("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ki.displayName=uN.displayName;const QF=2*1024*1024;function JF({userId:e,currentAvatarUrl:t,displayName:r,onAvatarChange:n,disabled:s}){const{toast:i}=Vt(),a=p.useRef(null),[l,c]=p.useState(""),[u,d]=p.useState(!1),h=r.slice(0,2).toUpperCase(),f=async b=>{var y;const g=(y=b.target.files)==null?void 0:y[0];if(g){if(g.size>QF){i({title:"File too large",description:"Please select an image under 2MB.",variant:"destructive"});return}if(!g.type.startsWith("image/")){i({title:"Invalid file type",description:"Please select an image file.",variant:"destructive"});return}d(!0);try{const x=g.name.split(".").pop()||"jpg",w=Date.now(),v=`${e}/${w}.${x}`,{error:_}=await R.storage.from("avatars").upload(v,g,{upsert:!0});if(_)throw _;const{data:S}=R.storage.from("avatars").getPublicUrl(v);n(S.publicUrl),i({title:"Avatar uploaded",description:"Your new avatar has been set."})}catch(x){i({title:"Upload failed",description:x instanceof Error?x.message:"Please try again.",variant:"destructive"})}finally{d(!1),a.current&&(a.current.value="")}}},m=()=>{if(l.trim())try{new URL(l.trim()),n(l.trim()),c(""),i({title:"Avatar updated",description:"Your avatar URL has been set."})}catch{i({title:"Invalid URL",description:"Please enter a valid image URL.",variant:"destructive"})}};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(Gr,{className:"h-20 w-20",children:[o.jsx(Yr,{src:t||void 0,alt:r}),o.jsx(Qr,{className:"bg-primary/10 text-primary text-xl",children:h})]}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.jsx("p",{className:"font-medium text-foreground",children:"Profile Picture"}),o.jsx("p",{children:"Upload an image or paste a URL"})]})]}),o.jsxs(na,{defaultValue:"upload",className:"w-full",children:[o.jsxs(Ai,{className:"grid w-full grid-cols-2",children:[o.jsxs(xr,{value:"upload",className:"gap-1.5",children:[o.jsx(zy,{className:"h-4 w-4"}),"Upload"]}),o.jsxs(xr,{value:"url",className:"gap-1.5",children:[o.jsx(O2,{className:"h-4 w-4"}),"URL"]})]}),o.jsx(br,{value:"upload",className:"mt-3",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("input",{ref:a,type:"file",accept:"image/*",onChange:f,className:"hidden",disabled:s||u}),o.jsx(O,{type:"button",variant:"outline",className:"w-full",onClick:()=>{var b;return(b=a.current)==null?void 0:b.click()},disabled:s||u,children:u?o.jsxs(o.Fragment,{children:[o.jsx(di,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):o.jsxs(o.Fragment,{children:[o.jsx(zy,{className:"h-4 w-4 mr-2"}),"Choose Image"]})}),o.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Max file size: 2MB"})]})}),o.jsx(br,{value:"url",className:"mt-3",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{htmlFor:"avatar-url",children:"Image URL"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Me,{id:"avatar-url",value:l,onChange:b=>c(b.target.value),placeholder:"https://example.com/avatar.jpg",disabled:s}),o.jsx(O,{type:"button",onClick:m,disabled:s||!l.trim(),children:"Set"})]})]})})]})]})}function XF(){var y;const{user:e,profile:t,isLoading:r,updateProfile:n}=Ee(),{toast:s}=Vt(),[i,a]=p.useState(""),[l,c]=p.useState(""),[u,d]=p.useState(""),[h,f]=p.useState(!1),[m,b]=p.useState(!1);if(p.useEffect(()=>{a((t==null?void 0:t.display_name)||""),c((t==null?void 0:t.avatar_url)||""),d((t==null?void 0:t.bio)||"")},[t]),p.useEffect(()=>{async function x(){if(!e)return;const{data:w}=await R.from("profiles").select("is_public").eq("user_id",e.id).maybeSingle();w&&f(w.is_public)}x()},[e]),r)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})});if(!e)return o.jsx(fl,{to:"/auth",replace:!0});const g=async x=>{var _;x.preventDefault(),b(!0);const{error:w}=await n({display_name:i.trim()||null,avatar_url:l.trim()||null,bio:u.trim()||null}),{error:v}=await R.from("profiles").update({is_public:h}).eq("user_id",e.id);s(w||v?{title:"Update failed",description:((_=w||v)==null?void 0:_.message)||"Please try again.",variant:"destructive"}:{title:"Settings saved",description:"Your profile settings have been updated."}),b(!1)};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[o.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent/5 rounded-full blur-3xl"})]}),o.jsx(Ot,{}),o.jsxs("main",{className:"max-w-2xl mx-auto px-4 py-10 space-y-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),o.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your profile and account preferences"})]}),o.jsxs("form",{onSubmit:g,className:"space-y-6",children:[o.jsxs(se,{children:[o.jsxs(Ge,{children:[o.jsx(vt,{children:"Profile"}),o.jsx(qa,{children:"Your public profile information"})]}),o.jsxs(ce,{className:"space-y-6",children:[o.jsx(JF,{userId:e.id,currentAvatarUrl:l,displayName:i||((y=e.email)==null?void 0:y.split("@")[0])||"User",onAvatarChange:c,disabled:m}),o.jsx(nv,{}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{htmlFor:"display-name",children:"Display Name"}),o.jsx(Me,{id:"display-name",value:i,onChange:x=>a(x.target.value),placeholder:"Your name",disabled:m})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{htmlFor:"bio",children:"Bio"}),o.jsx(tr,{id:"bio",value:u,onChange:x=>d(x.target.value),placeholder:"A short bio about you",rows:4,disabled:m})]})]})]}),o.jsxs(se,{children:[o.jsxs(Ge,{children:[o.jsx(vt,{children:"Privacy"}),o.jsx(qa,{children:"Control who can see your profile"})]}),o.jsx(ce,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Ue,{htmlFor:"public-profile",children:"Make profile public"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"When enabled, anyone can view your profile page"})]}),o.jsx(ki,{id:"public-profile",checked:h,onCheckedChange:f,disabled:m})]})})]}),o.jsxs(se,{children:[o.jsxs(Ge,{children:[o.jsx(vt,{children:"Account"}),o.jsx(qa,{children:"Your account information"})]}),o.jsx(ce,{className:"space-y-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{children:"Email"}),o.jsx(Me,{value:e.email||"",disabled:!0}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed"})]})})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx(O,{type:"submit",disabled:m,children:m?"Saving...":"Save Changes"})})]})]})]})}function ZF({targetUserId:e}){const{user:t}=Ee(),{toast:r}=Vt(),{data:n,isLoading:s}=Kj(e),i=Gj(),a=Yj(),[l,c]=p.useState(!1);if(!t||t.id===e)return null;const u=async()=>{try{n?(await a.mutateAsync(e),r({title:"Unfollowed",description:"You are no longer following this user."})):(await i.mutateAsync(e),r({title:"Following!",description:"You are now following this user."}))}catch(h){r({title:"Action failed",description:h instanceof Error?h.message:"Please try again.",variant:"destructive"})}},d=i.isPending||a.isPending;return n?o.jsx(O,{variant:"outline",size:"sm",onClick:u,disabled:d||s,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),className:l?"border-destructive text-destructive hover:bg-destructive/10":"",children:l?"Unfollow":o.jsxs(o.Fragment,{children:[o.jsx(B2,{className:"h-4 w-4 mr-1"}),"Following"]})}):o.jsxs(O,{size:"sm",onClick:u,disabled:d||s,children:[o.jsx(z2,{className:"h-4 w-4 mr-1"}),"Follow"]})}function eU({profile:e,onFollowersClick:t,onFollowingClick:r}){const{user:n}=Ee(),s=(n==null?void 0:n.id)===e.user_id,i=e.display_name||"Anonymous",a=i.slice(0,2).toUpperCase(),l=r5(new Date(e.created_at),"MMMM yyyy");return o.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 items-start sm:items-center",children:[o.jsxs(Gr,{className:"h-20 w-20 sm:h-24 sm:w-24",children:[o.jsx(Yr,{src:e.avatar_url||void 0,alt:i}),o.jsx(Qr,{className:"bg-primary/10 text-primary text-2xl",children:a})]}),o.jsxs("div",{className:"flex-1 space-y-3",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h1",{className:"text-2xl font-bold",children:i}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[o.jsx(N2,{className:"h-4 w-4"}),o.jsxs("span",{children:["Joined ",l]})]})]}),o.jsx("div",{className:"flex gap-2",children:s?o.jsx(O,{variant:"outline",size:"sm",asChild:!0,children:o.jsxs(xe,{to:"/settings",children:[o.jsx(b_,{className:"h-4 w-4 mr-1"}),"Edit Profile"]})}):o.jsx(ZF,{targetUserId:e.user_id})})]}),e.bio&&o.jsx("p",{className:"text-muted-foreground max-w-lg",children:e.bio}),o.jsxs("div",{className:"flex gap-4 text-sm",children:[o.jsxs("button",{onClick:t,className:"hover:underline focus:outline-none",children:[o.jsx("span",{className:"font-semibold",children:e.follower_count})," ",o.jsx("span",{className:"text-muted-foreground",children:"Followers"})]}),o.jsxs("button",{onClick:r,className:"hover:underline focus:outline-none",children:[o.jsx("span",{className:"font-semibold",children:e.following_count})," ",o.jsx("span",{className:"text-muted-foreground",children:"Following"})]})]})]})]})}function tU(e){return Ee(),Fe({queryKey:["user-profile",e],queryFn:async()=>{if(!e)return null;const{data:t,error:r}=await R.from("profiles").select("id, user_id, display_name, avatar_url, bio, is_public, follower_count, following_count, created_at").eq("user_id",e).maybeSingle();if(r)throw r;return t},enabled:!!e})}function rU(e,t=4){return Fe({queryKey:["user-blueprints",e,t],queryFn:async()=>{if(!e)return[];const{data:r,error:n}=await R.from("blueprints").select("id, title, selected_items, likes_count, created_at").eq("creator_user_id",e).eq("is_public",!0).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r||[]},enabled:!!e})}function nU(e,t=4){return Fe({queryKey:["user-inventories",e,t],queryFn:async()=>{if(!e)return[];const{data:r,error:n}=await R.from("inventories").select("id, title, prompt_categories, likes_count, created_at").eq("creator_user_id",e).eq("is_public",!0).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r||[]},enabled:!!e})}function sU(e,t=4){return Fe({queryKey:["user-liked-blueprints",e,t],queryFn:async()=>{if(!e)return[];const{data:r,error:n}=await R.from("blueprint_likes").select("blueprint_id, created_at").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(n)throw n;if(!r||r.length===0)return[];const s=r.map(d=>d.blueprint_id),{data:i,error:a}=await R.from("blueprints").select("id, title, creator_user_id, likes_count, created_at").in("id",s).eq("is_public",!0);if(a)throw a;const l=[...new Set((i||[]).map(d=>d.creator_user_id))],{data:c}=await R.from("profiles").select("user_id, display_name, avatar_url").in("user_id",l),u=new Map((c||[]).map(d=>[d.user_id,d]));return(i||[]).map(d=>({...d,creator_profile:u.get(d.creator_user_id)||null}))},enabled:!!e})}function iU(e,t=4){return Fe({queryKey:["user-activity",e,t],queryFn:async()=>{if(!e)return[];const{data:r}=await R.from("blueprints").select("id, title, created_at").eq("creator_user_id",e).eq("is_public",!0).order("created_at",{ascending:!1}).limit(t),{data:n}=await R.from("blueprint_likes").select("id, blueprint_id, created_at").eq("user_id",e).order("created_at",{ascending:!1}).limit(t),s=(n||[]).map(f=>f.blueprint_id),{data:i}=s.length>0?await R.from("blueprints").select("id, title").in("id",s).eq("is_public",!0):{data:[]},a=new Map((i||[]).map(f=>[f.id,f.title])),{data:l}=await R.from("blueprint_comments").select("id, blueprint_id, created_at").eq("user_id",e).order("created_at",{ascending:!1}).limit(t),c=(l||[]).map(f=>f.blueprint_id),{data:u}=c.length>0?await R.from("blueprints").select("id, title").in("id",c).eq("is_public",!0):{data:[]},d=new Map((u||[]).map(f=>[f.id,f.title]));return[...(r||[]).map(f=>({type:"blueprint_created",id:f.id,title:`Created "${f.title}"`,created_at:f.created_at,target_id:f.id})),...(n||[]).filter(f=>a.has(f.blueprint_id)).map(f=>({type:"blueprint_liked",id:f.id,title:`Liked "${a.get(f.blueprint_id)}"`,created_at:f.created_at,target_id:f.blueprint_id})),...(l||[]).filter(f=>d.has(f.blueprint_id)).map(f=>({type:"comment",id:f.id,title:`Commented on "${d.get(f.blueprint_id)}"`,created_at:f.created_at,target_id:f.blueprint_id}))].sort((f,m)=>new Date(m.created_at).getTime()-new Date(f.created_at).getTime()).slice(0,t)},enabled:!!e})}function oU(e){return!e||typeof e!="object"||Array.isArray(e)?0:Object.values(e).reduce((t,r)=>t+(Array.isArray(r)?r.length:0),0)}function aU({userId:e}){const{data:t,isLoading:r}=rU(e,4),{data:n,isLoading:s}=nU(e,4),{data:i,isLoading:a}=sU(e,4),{data:l,isLoading:c}=iU(e,4);return o.jsxs(na,{defaultValue:"blueprints",className:"w-full",children:[o.jsxs(Ai,{className:"w-full justify-start",children:[o.jsxs(xr,{value:"blueprints",className:"gap-1.5",children:[o.jsx(Wr,{className:"h-4 w-4"}),"Blueprints"]}),o.jsxs(xr,{value:"inventories",className:"gap-1.5",children:[o.jsx(Gf,{className:"h-4 w-4"}),"Inventories"]}),o.jsxs(xr,{value:"liked",className:"gap-1.5",children:[o.jsx(At,{className:"h-4 w-4"}),"Liked"]}),o.jsxs(xr,{value:"activity",className:"gap-1.5",children:[o.jsx(_h,{className:"h-4 w-4"}),"Activity"]})]}),o.jsx(br,{value:"blueprints",className:"mt-4",children:r?o.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:Array.from({length:4}).map((u,d)=>o.jsx(be,{className:"h-24"},d))}):t&&t.length>0?o.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:t.map(u=>o.jsx(xe,{to:`/blueprint/${u.id}`,children:o.jsx(se,{className:"h-full transition hover:border-primary/40",children:o.jsxs(ce,{className:"p-4",children:[o.jsx("h4",{className:"font-medium truncate",children:u.title}),o.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[o.jsxs(Ae,{variant:"secondary",className:"text-xs",children:[oU(u.selected_items)," items"]}),o.jsx("span",{children:""}),o.jsx(At,{className:"h-3 w-3"}),o.jsx("span",{children:u.likes_count})]})]})})},u.id))}):o.jsx(Rc,{icon:o.jsx(Wr,{className:"h-8 w-8"}),message:"No public blueprints yet"})}),o.jsx(br,{value:"inventories",className:"mt-4",children:s?o.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:Array.from({length:4}).map((u,d)=>o.jsx(be,{className:"h-24"},d))}):n&&n.length>0?o.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:n.map(u=>o.jsx(xe,{to:`/inventory/${u.id}`,children:o.jsx(se,{className:"h-full transition hover:border-primary/40",children:o.jsxs(ce,{className:"p-4",children:[o.jsx("h4",{className:"font-medium truncate",children:u.title}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:u.prompt_categories}),o.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[o.jsx(At,{className:"h-3 w-3"}),o.jsx("span",{children:u.likes_count})]})]})})},u.id))}):o.jsx(Rc,{icon:o.jsx(Gf,{className:"h-8 w-8"}),message:"No public inventories yet"})}),o.jsx(br,{value:"liked",className:"mt-4",children:a?o.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:Array.from({length:4}).map((u,d)=>o.jsx(be,{className:"h-24"},d))}):i&&i.length>0?o.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:i.map(u=>{var d;return o.jsx(xe,{to:`/blueprint/${u.id}`,children:o.jsx(se,{className:"h-full transition hover:border-primary/40",children:o.jsxs(ce,{className:"p-4",children:[o.jsx("h4",{className:"font-medium truncate",children:u.title}),o.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["by ",((d=u.creator_profile)==null?void 0:d.display_name)||"Anonymous"]}),o.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:[o.jsx(At,{className:"h-3 w-3 fill-current text-destructive"}),o.jsx("span",{children:u.likes_count})]})]})})},u.id)})}):o.jsx(Rc,{icon:o.jsx(At,{className:"h-8 w-8"}),message:"No liked blueprints yet"})}),o.jsx(br,{value:"activity",className:"mt-4",children:c?o.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((u,d)=>o.jsx(be,{className:"h-16"},d))}):l&&l.length>0?o.jsx("div",{className:"space-y-3",children:l.map(u=>o.jsx(xe,{to:`/blueprint/${u.target_id}`,children:o.jsx(se,{className:"transition hover:border-primary/40",children:o.jsxs(ce,{className:"p-4 flex items-center gap-3",children:[o.jsxs("div",{className:"h-8 w-8 rounded-full bg-muted flex items-center justify-center",children:[u.type==="blueprint_created"&&o.jsx(Wr,{className:"h-4 w-4 text-primary"}),u.type==="blueprint_liked"&&o.jsx(At,{className:"h-4 w-4 text-destructive"}),u.type==="comment"&&o.jsx(_h,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium",children:u.title}),o.jsx("p",{className:"text-xs text-muted-foreground",children:_i(new Date(u.created_at),{addSuffix:!0})})]}),o.jsx(Wm,{className:"h-4 w-4 text-muted-foreground"})]})})},u.id))}):o.jsx(Rc,{icon:o.jsx(_h,{className:"h-8 w-8"}),message:"No recent activity"})})]})}function Rc({icon:e,message:t}){return o.jsx(se,{children:o.jsx(ce,{className:"py-12 text-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-3",children:[o.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center text-muted-foreground",children:e}),o.jsx("p",{className:"text-muted-foreground",children:t})]})})})}var Fd="Dialog",[dN,f6]=Mt(Fd),[lU,Xr]=dN(Fd),hN=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:a=!0}=e,l=p.useRef(null),c=p.useRef(null),[u,d]=Cr({prop:n,defaultProp:s??!1,onChange:i,caller:Fd});return o.jsx(lU,{scope:t,triggerRef:l,contentRef:c,contentId:Sr(),titleId:Sr(),descriptionId:Sr(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:a,children:r})};hN.displayName=Fd;var fN="DialogTrigger",pN=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Xr(fN,r),i=je(t,s.triggerRef);return o.jsx(le.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":ov(s.open),...n,ref:i,onClick:H(e.onClick,s.onOpenToggle)})});pN.displayName=fN;var sv="DialogPortal",[cU,mN]=dN(sv,{forceMount:void 0}),gN=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,i=Xr(sv,t);return o.jsx(cU,{scope:t,forceMount:r,children:p.Children.map(n,a=>o.jsx(Ct,{present:r||i.open,children:o.jsx(Dl,{asChild:!0,container:s,children:a})}))})};gN.displayName=sv;var Uu="DialogOverlay",vN=p.forwardRef((e,t)=>{const r=mN(Uu,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=Xr(Uu,e.__scopeDialog);return i.modal?o.jsx(Ct,{present:n||i.open,children:o.jsx(dU,{...s,ref:t})}):null});vN.displayName=Uu;var uU=yi("DialogOverlay.RemoveScroll"),dU=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Xr(Uu,r);return o.jsx(kd,{as:uU,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(le.div,{"data-state":ov(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Ni="DialogContent",yN=p.forwardRef((e,t)=>{const r=mN(Ni,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=Xr(Ni,e.__scopeDialog);return o.jsx(Ct,{present:n||i.open,children:i.modal?o.jsx(hU,{...s,ref:t}):o.jsx(fU,{...s,ref:t})})});yN.displayName=Ni;var hU=p.forwardRef((e,t)=>{const r=Xr(Ni,e.__scopeDialog),n=p.useRef(null),s=je(t,r.contentRef,n);return p.useEffect(()=>{const i=n.current;if(i)return _g(i)},[]),o.jsx(wN,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:H(e.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=r.triggerRef.current)==null||a.focus()}),onPointerDownOutside:H(e.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:H(e.onFocusOutside,i=>i.preventDefault())})}),fU=p.forwardRef((e,t)=>{const r=Xr(Ni,e.__scopeDialog),n=p.useRef(!1),s=p.useRef(!1);return o.jsx(wN,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),wN=p.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=e,l=Xr(Ni,r),c=p.useRef(null),u=je(t,c);return bg(),o.jsxs(o.Fragment,{children:[o.jsx(_d,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(Wo,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":ov(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(pU,{titleId:l.titleId}),o.jsx(gU,{contentRef:c,descriptionId:l.descriptionId})]})]})}),iv="DialogTitle",xN=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Xr(iv,r);return o.jsx(le.h2,{id:s.titleId,...n,ref:t})});xN.displayName=iv;var bN="DialogDescription",_N=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Xr(bN,r);return o.jsx(le.p,{id:s.descriptionId,...n,ref:t})});_N.displayName=bN;var SN="DialogClose",jN=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Xr(SN,r);return o.jsx(le.button,{type:"button",...n,ref:t,onClick:H(e.onClick,()=>s.onOpenChange(!1))})});jN.displayName=SN;function ov(e){return e?"open":"closed"}var kN="DialogTitleWarning",[p6,NN]=PT(kN,{contentName:Ni,titleName:iv,docsSlug:"dialog"}),pU=({titleId:e})=>{const t=NN(kN),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},mU="DialogDescriptionWarning",gU=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${NN(mU).contentName}}.`;return p.useEffect(()=>{var i;const s=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},vU=hN,yU=pN,wU=gN,CN=vN,EN=yN,TN=xN,RN=_N,xU=jN;const PN=vU,bU=yU,_U=wU,AN=p.forwardRef(({className:e,...t},r)=>o.jsx(CN,{ref:r,className:Y("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));AN.displayName=CN.displayName;const av=p.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(_U,{children:[o.jsx(AN,{}),o.jsxs(EN,{ref:n,className:Y("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,o.jsxs(xU,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[o.jsx(zt,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));av.displayName=EN.displayName;const lv=({className:e,...t})=>o.jsx("div",{className:Y("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});lv.displayName="DialogHeader";const cv=p.forwardRef(({className:e,...t},r)=>o.jsx(TN,{ref:r,className:Y("text-lg font-semibold leading-none tracking-tight",e),...t}));cv.displayName=TN.displayName;const SU=p.forwardRef(({className:e,...t},r)=>o.jsx(RN,{ref:r,className:Y("text-sm text-muted-foreground",e),...t}));SU.displayName=RN.displayName;function px({userId:e,type:t,open:r,onOpenChange:n}){const{data:s,isLoading:i}=C5(t==="followers"?e:void 0),{data:a,isLoading:l}=E5(t==="following"?e:void 0),c=t==="followers"?i:l,u=t==="followers"?s:a,d=t==="followers"?"Followers":"Following";return o.jsx(PN,{open:r,onOpenChange:n,children:o.jsxs(av,{className:"sm:max-w-md",children:[o.jsx(lv,{children:o.jsx(cv,{children:d})}),o.jsx(tv,{className:"max-h-[400px]",children:c?o.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((h,f)=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(be,{className:"h-10 w-10 rounded-full"}),o.jsx(be,{className:"h-4 w-32"})]},f))}):u&&u.length>0?o.jsx("div",{className:"space-y-2",children:u.map(h=>o.jsx(jU,{user:h,onClose:()=>n(!1)},h.user_id))}):o.jsx("p",{className:"text-center text-muted-foreground py-8",children:t==="followers"?"No followers yet":"Not following anyone yet"})})]})})}function jU({user:e,onClose:t}){const r=e.display_name||"Anonymous",n=r.slice(0,2).toUpperCase();return o.jsxs(xe,{to:`/u/${e.user_id}`,onClick:t,className:"flex items-center gap-3 p-2 rounded-lg hover:bg-muted/50 transition-colors",children:[o.jsxs(Gr,{className:"h-10 w-10",children:[o.jsx(Yr,{src:e.avatar_url||void 0,alt:r}),o.jsx(Qr,{className:"bg-primary/10 text-primary text-sm",children:n})]}),o.jsx("span",{className:"font-medium",children:r})]})}function kU(){const{userId:e}=ea(),{user:t}=Ee(),{data:r,isLoading:n,error:s}=tU(e),[i,a]=p.useState(!1),[l,c]=p.useState(!1);if(!e)return o.jsx(fl,{to:"/auth",replace:!0});const u=(t==null?void 0:t.id)===e,d=(r==null?void 0:r.is_public)||u;return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[o.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent/5 rounded-full blur-3xl"})]}),o.jsx(Ot,{}),o.jsx("main",{className:"max-w-4xl mx-auto px-4 py-8 space-y-8",children:n?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsx(be,{className:"h-24 w-24 rounded-full"}),o.jsxs("div",{className:"space-y-3 flex-1",children:[o.jsx(be,{className:"h-8 w-48"}),o.jsx(be,{className:"h-4 w-32"}),o.jsx(be,{className:"h-4 w-64"})]})]}),o.jsx(be,{className:"h-10 w-full"}),o.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:Array.from({length:4}).map((h,f)=>o.jsx(be,{className:"h-24"},f))})]}):s?o.jsx(se,{children:o.jsx(ce,{className:"py-12 text-center",children:o.jsx("p",{className:"text-muted-foreground",children:"Failed to load profile. Please try again."})})}):r?d?o.jsxs(o.Fragment,{children:[o.jsx(eU,{profile:r,onFollowersClick:()=>a(!0),onFollowingClick:()=>c(!0)}),!r.is_public&&u&&o.jsx(se,{className:"border-dashed",children:o.jsxs(ce,{className:"py-4 text-center text-sm text-muted-foreground",children:["Your profile is currently ",o.jsx("strong",{children:"private"}),". Only you can see this page."," ",o.jsx("a",{href:"/settings",className:"text-primary hover:underline",children:"Make it public"})," ","to let others discover you."]})}),o.jsx(aU,{userId:e}),o.jsx(px,{userId:e,type:"followers",open:i,onOpenChange:a}),o.jsx(px,{userId:e,type:"following",open:l,onOpenChange:c})]}):o.jsx(se,{children:o.jsx(ce,{className:"py-16 text-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center",children:o.jsx(M2,{className:"h-8 w-8 text-muted-foreground"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold",children:"This profile is private"}),o.jsx("p",{className:"text-muted-foreground mt-1",children:"This user has chosen to keep their profile private."})]})]})})}):o.jsx(se,{children:o.jsx(ce,{className:"py-12 text-center",children:o.jsx("p",{className:"text-muted-foreground",children:"Profile not found."})})})})]})}function NU(){const{user:e}=Ee(),t=Dt(),r=Fe({queryKey:["tags-directory",e==null?void 0:e.id],queryFn:async()=>{const{data:a,error:l}=await R.from("tags").select("id, slug, follower_count, created_at").order("follower_count",{ascending:!1}).limit(200);if(l)throw l;if(!e)return a||[];const c=await R.from("tag_follows").select("tag_id").eq("user_id",e.id),u=new Set((c.data||[]).map(d=>d.tag_id));return(a||[]).map(d=>({...d,is_following:u.has(d.id)}))}}),n=ht({mutationFn:async a=>{if(!e)throw new Error("Must be logged in");const{error:l}=await R.from("tag_follows").insert({tag_id:a,user_id:e.id});if(l)throw l},onSuccess:()=>t.invalidateQueries({queryKey:["tags-directory"]})}),s=ht({mutationFn:async a=>{if(!e)throw new Error("Must be logged in");const{error:l}=await R.from("tag_follows").delete().eq("tag_id",a).eq("user_id",e.id);if(l)throw l},onSuccess:()=>t.invalidateQueries({queryKey:["tags-directory"]})}),i=ht({mutationFn:async a=>{if(!e)throw new Error("Must be logged in");const l=mn(a);if(!l)throw new Error("Invalid tag");const{data:c,error:u}=await R.from("tags").select("id, slug, follower_count, created_at").eq("slug",l).maybeSingle();if(u)throw u;if(c)return c;const{data:d,error:h}=await R.from("tags").insert({slug:l,created_by:e.id}).select("id, slug, follower_count, created_at").single();if(h)throw h;return await R.from("tag_follows").insert({tag_id:d.id,user_id:e.id}),d},onSuccess:()=>t.invalidateQueries({queryKey:["tags-directory"]})});return{tags:r.data||[],isLoading:r.isLoading,error:r.error,followTag:n.mutateAsync,unfollowTag:s.mutateAsync,createTag:i.mutateAsync,isUpdating:n.isPending||s.isPending}}function uv(){return Fe({queryKey:["tag-suggestions"],queryFn:async()=>{const{data:e,error:t}=await R.from("tags").select("slug").order("follower_count",{ascending:!1}).limit(200);if(t)throw t;return(e||[]).map(r=>r.slug)}})}function CU(e=12){const{user:t}=Ee();return Fe({queryKey:["suggested-tags",t==null?void 0:t.id,e],queryFn:async()=>{const{data:r,error:n}=await R.from("tags").select("id, slug, follower_count").order("follower_count",{ascending:!1}).limit(100);if(n)throw n;if(!r||r.length===0)return[];if(!t)return r.slice(0,e).map(m=>({...m,reason:"popular"}));const{data:s}=await R.from("tag_follows").select("tag_id").eq("user_id",t.id),i=new Set((s||[]).map(m=>m.tag_id));if(i.size===0)return r.slice(0,e).map(m=>({...m,reason:"popular"}));const a=Array.from(i),{data:l}=await R.from("blueprint_tags").select("blueprint_id").in("tag_id",a),c=[...new Set((l||[]).map(m=>m.blueprint_id))],u=new Map;if(c.length>0){const{data:m}=await R.from("blueprint_tags").select("tag_id").in("blueprint_id",c.slice(0,50)).not("tag_id","in",`(${a.join(",")})`);(m||[]).forEach(b=>{i.has(b.tag_id)||u.set(b.tag_id,(u.get(b.tag_id)||0)+1)})}const d=[],h=new Set,f=Array.from(u.entries()).sort((m,b)=>b[1]-m[1]).slice(0,Math.floor(e/2));for(const[m]of f){const b=r.find(g=>g.id===m);b&&!i.has(b.id)&&(d.push({...b,reason:"related"}),h.add(b.id))}for(const m of r){if(d.length>=e)break;!i.has(m.id)&&!h.has(m.id)&&d.push({...m,reason:"popular"})}return d.slice(0,e)},staleTime:6e4})}function EU(){const{user:e}=Ee(),{toast:t}=Vt(),{tags:r,isLoading:n,followTag:s,unfollowTag:i,createTag:a,isUpdating:l}=NU(),{data:c,isLoading:u}=CU(12),[d,h]=p.useState(""),[f,m]=p.useState(""),[b]=_O();p.useEffect(()=>{const v=b.get("q");v&&h(v)},[b]);const{followedTags:g,allTags:y}=p.useMemo(()=>{const v=mn(d),_=v?r.filter(S=>S.slug.includes(v)):r;return{followedTags:_.filter(S=>S.is_following),allTags:_}},[d,r]),x=async()=>{if(!e){t({title:"Sign in required",description:"Please sign in to create or follow tags."});return}const v=mn(f);if(!v){t({title:"Invalid tag",description:"Use letters, numbers, and dashes only.",variant:"destructive"});return}try{await a(v),m(""),t({title:"Tag created",description:`#${v} is ready to follow.`})}catch(_){t({title:"Failed to create tag",description:_ instanceof Error?_.message:"Please try again",variant:"destructive"})}},w=async(v,_)=>{if(!e){t({title:"Sign in required",description:"Please sign in to manage tags."});return}try{_?await i(v):await s(v)}catch(S){t({title:_?"Failed to unfollow":"Failed to follow",description:S instanceof Error?S.message:"Please try again",variant:"destructive"})}};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[o.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent/5 rounded-full blur-3xl"})]}),o.jsx(Ot,{}),o.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-8 space-y-8",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Tags"}),o.jsx("p",{className:"text-muted-foreground",children:"Follow topics to personalize your feed. Create new tags to categorize your work."})]}),o.jsx(se,{children:o.jsxs(ce,{className:"pt-6 space-y-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Ho,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Me,{placeholder:"Search tags...",value:d,onChange:v=>h(v.target.value),className:"pl-9"})]}),d&&o.jsx(O,{variant:"ghost",size:"sm",onClick:()=>h(""),children:"Clear"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(dd,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Me,{placeholder:"Create a new tag...",value:f,onChange:v=>m(v.target.value),onKeyDown:v=>v.key==="Enter"&&x(),disabled:l,className:"pl-9"})]}),o.jsxs(O,{onClick:x,disabled:l||!f.trim(),className:"gap-2",children:[o.jsx(hd,{className:"h-4 w-4"}),"Create"]})]})]})}),e&&g.length>0&&!d&&o.jsxs("section",{className:"space-y-3 animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ti,{className:"h-4 w-4 text-primary"}),o.jsx("h2",{className:"text-lg font-semibold",children:"Your Tags"}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",g.length,")"]})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(v=>o.jsx(Qh,{tag:v,isFollowing:!0,onToggle:()=>w(v.id,!0),disabled:l},v.id))})]}),e&&!d&&c&&c.length>0&&o.jsxs("section",{className:"space-y-3 animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Mn,{className:"h-4 w-4 text-primary"}),o.jsx("h2",{className:"text-lg font-semibold",children:"Suggested for You"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(v=>{const _=r.find(j=>j.id===v.id),S=(_==null?void 0:_.is_following)??!1;return o.jsx(Qh,{tag:v,isFollowing:S,onToggle:()=>w(v.id,S),disabled:l,badge:v.reason==="related"?"related":void 0},v.id)})}),u&&o.jsx("div",{className:"flex gap-2",children:Array.from({length:6}).map((v,_)=>o.jsx("div",{className:"h-8 w-20 rounded-full bg-muted animate-pulse"},_))})]}),o.jsxs("section",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(U2,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("h2",{className:"text-lg font-semibold",children:d?"Search Results":"All Tags"}),o.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",y.length,")"]})]}),n?o.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:12}).map((v,_)=>o.jsx("div",{className:"h-9 w-24 rounded-full bg-muted animate-pulse"},_))}):y.length===0?o.jsx(se,{children:o.jsx(ce,{className:"py-10 text-center",children:o.jsx("p",{className:"text-muted-foreground",children:d?"No tags match your search.":"No tags yet. Create the first one!"})})}):o.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(v=>o.jsx(Qh,{tag:v,isFollowing:v.is_following??!1,onToggle:()=>w(v.id,v.is_following??!1),disabled:l},v.id))})]})]})]})}function Qh({tag:e,isFollowing:t,onToggle:r,disabled:n,badge:s}){return o.jsxs("div",{className:"group relative",children:[o.jsx(xe,{to:`/wall?tag=${e.slug}`,children:o.jsxs(Ae,{variant:t?"default":"outline",className:`
            gap-1.5 px-3 py-2 text-sm cursor-pointer transition-all
            hover:bg-accent hover:text-accent-foreground
            ${t?"pr-8":""}
          `,children:[o.jsx(dd,{className:"h-3 w-3"}),e.slug,e.follower_count>0&&o.jsxs("span",{className:"flex items-center gap-0.5 text-xs opacity-70 ml-1",children:[o.jsx(fd,{className:"h-3 w-3"}),e.follower_count]}),s==="related"&&o.jsx("span",{className:"text-[10px] uppercase tracking-wider opacity-60 ml-1",children:"related"})]})}),o.jsx("button",{onClick:i=>{i.preventDefault(),i.stopPropagation(),r()},disabled:n,className:`
          absolute right-1 top-1/2 -translate-y-1/2
          h-6 w-6 rounded-full flex items-center justify-center
          text-xs font-medium transition-all
          ${t?"bg-background/80 text-foreground opacity-0 group-hover:opacity-100":"bg-primary text-primary-foreground opacity-0 group-hover:opacity-100"}
          disabled:opacity-50
        `,title:t?"Unfollow":"Follow",children:t?"":"+"})]})}function TU(){const{user:e}=Ee(),t=Dt(),r=Fe({queryKey:["post-bookmarks",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const{data:s,error:i}=await R.from("post_bookmarks").select("post_id, created_at").eq("user_id",e.id).order("created_at",{ascending:!1});if(i)throw i;return s||[]},enabled:!!e}),n=ht({mutationFn:async({postId:s,bookmarked:i})=>{if(!e)throw new Error("Must be logged in");if(i){const{error:a}=await R.from("post_bookmarks").delete().eq("post_id",s).eq("user_id",e.id);if(a)throw a}else{const{error:a}=await R.from("post_bookmarks").insert({post_id:s,user_id:e.id});if(a)throw a}},onSuccess:()=>{t.invalidateQueries({queryKey:["post-bookmarks"]}),t.invalidateQueries({queryKey:["wall-posts"]})}});return{bookmarks:r.data||[],isLoading:r.isLoading,toggleBookmark:n.mutateAsync,isUpdating:n.isPending}}function RU(e,t){const r=new Map,n=[];return e.forEach(s=>{r.set(s.id,{...s,user_liked:t.has(s.id),children:[]})}),r.forEach(s=>{s.parent_id&&r.has(s.parent_id)?r.get(s.parent_id).children.push(s):n.push(s)}),n}function IN(e,t){const r=(n,s)=>t==="latest"?new Date(s.created_at).getTime()-new Date(n.created_at).getTime():s.likes_count!==n.likes_count?s.likes_count-n.likes_count:new Date(s.created_at).getTime()-new Date(n.created_at).getTime();e.sort(r),e.forEach(n=>IN(n.children,t))}function PU(e,t){const{user:r}=Ee(),n=Dt(),s=Fe({queryKey:["wall-comments",e,r==null?void 0:r.id,t],queryFn:async()=>{const{data:u,error:d}=await R.from("wall_comments").select("id, post_id, user_id, parent_id, body, likes_count, created_at, updated_at").eq("post_id",e).order("created_at",{ascending:!0});if(d)throw d;if(!u||u.length===0)return[];const h=u.map(v=>v.id),f=[...new Set(u.map(v=>v.user_id))],[m,b]=await Promise.all([R.from("profiles").select("user_id, display_name, avatar_url").in("user_id",f),r?R.from("comment_likes").select("comment_id").eq("user_id",r.id).in("comment_id",h):Promise.resolve({data:[]})]),g=new Map((m.data||[]).map(v=>[v.user_id,v])),y=new Set((b.data||[]).map(v=>v.comment_id)),x=u.map(v=>({...v,profile:g.get(v.user_id)||{display_name:null,avatar_url:null},user_liked:y.has(v.id),children:[]})),w=RU(x,y);return IN(w,t),w}}),i=ht({mutationFn:async({body:u,parentId:d})=>{if(!r)throw new Error("Must be logged in");const{error:h}=await R.from("wall_comments").insert({post_id:e,user_id:r.id,body:u,parent_id:d??null});if(h)throw h},onSuccess:()=>n.invalidateQueries({queryKey:["wall-comments",e]})}),a=ht({mutationFn:async({commentId:u,body:d})=>{if(!r)throw new Error("Must be logged in");const{error:h}=await R.from("wall_comments").update({body:d}).eq("id",u).eq("user_id",r.id);if(h)throw h},onSuccess:()=>n.invalidateQueries({queryKey:["wall-comments",e]})}),l=ht({mutationFn:async u=>{if(!r)throw new Error("Must be logged in");const{error:d}=await R.from("wall_comments").delete().eq("id",u).eq("user_id",r.id);if(d)throw d},onSuccess:()=>n.invalidateQueries({queryKey:["wall-comments",e]})}),c=ht({mutationFn:async({commentId:u,liked:d})=>{if(!r)throw new Error("Must be logged in");if(d){const{error:h}=await R.from("comment_likes").delete().eq("comment_id",u).eq("user_id",r.id);if(h)throw h}else{const{error:h}=await R.from("comment_likes").insert({comment_id:u,user_id:r.id});if(h)throw h}},onSuccess:()=>n.invalidateQueries({queryKey:["wall-comments",e]})});return{comments:s.data||[],isLoading:s.isLoading,addComment:i.mutateAsync,updateComment:a.mutateAsync,deleteComment:l.mutateAsync,toggleLike:c.mutateAsync,isUpdating:i.isPending||a.isPending||l.isPending||c.isPending}}function ON({comment:e,onReply:t,onEdit:r,onDelete:n,onToggleLike:s,currentUserId:i,depth:a=0}){const[l,c]=p.useState(!1),[u,d]=p.useState(!1),[h,f]=p.useState(""),[m,b]=p.useState(e.body),[g,y]=p.useState(5),x=e.profile.display_name||"Anonymous",w=x.slice(0,2).toUpperCase(),v=i===e.user_id,_=e.updated_at!==e.created_at,S=async()=>{h.trim()&&(await t(e.id,h.trim()),f(""),c(!1))},j=async()=>{m.trim()&&(await r(e.id,m.trim()),d(!1))};return o.jsxs("div",{className:Y("space-y-2",a>0&&"border-l border-border/50 pl-4"),children:[o.jsxs("div",{className:"flex gap-3",children:[o.jsxs(Gr,{className:"h-8 w-8",children:[o.jsx(Yr,{src:e.profile.avatar_url||void 0}),o.jsx(Qr,{className:"bg-primary/10 text-primary text-xs",children:w})]}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx("span",{className:"font-medium text-foreground",children:x}),o.jsx("span",{children:_i(new Date(e.created_at),{addSuffix:!0})}),_&&o.jsx("span",{children:"(edited)"})]}),u?o.jsxs("div",{className:"space-y-2 mt-2",children:[o.jsx(tr,{value:m,onChange:k=>b(k.target.value),rows:2}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(O,{size:"sm",onClick:j,children:"Save"}),o.jsx(O,{size:"sm",variant:"outline",onClick:()=>d(!1),children:"Cancel"})]})]}):o.jsx("p",{className:"text-sm mt-1 whitespace-pre-wrap",children:e.body}),o.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs",children:[o.jsxs(O,{variant:"ghost",size:"sm",className:e.user_liked?"text-red-500":"",onClick:()=>s(e.id,e.user_liked),children:[o.jsx(At,{className:Y("h-3 w-3 mr-1",e.user_liked&&"fill-current")}),e.likes_count]}),o.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>c(!l),children:[o.jsx(L2,{className:"h-3 w-3 mr-1"})," Reply"]}),v&&o.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>d(!u),children:[o.jsx(w_,{className:"h-3 w-3 mr-1"})," Edit"]}),v&&o.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>n(e.id),children:[o.jsx(Yf,{className:"h-3 w-3 mr-1"})," Delete"]})]}),l&&o.jsxs("div",{className:"space-y-2 mt-2",children:[o.jsx(tr,{value:h,onChange:k=>f(k.target.value),placeholder:"Write a reply...",rows:2}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(O,{size:"sm",onClick:S,children:"Reply"}),o.jsx(O,{size:"sm",variant:"outline",onClick:()=>c(!1),children:"Cancel"})]})]})]})]}),e.children.length>0&&o.jsxs("div",{className:"space-y-3",children:[e.children.slice(0,g).map(k=>o.jsx(ON,{comment:k,onReply:t,onEdit:r,onDelete:n,onToggleLike:s,currentUserId:i,depth:a+1},k.id)),e.children.length>g&&o.jsxs(O,{variant:"outline",size:"sm",onClick:()=>y(k=>k+5),children:["Load more replies (",e.children.length-g,")"]})]})]})}function AU({postId:e}){const{user:t}=Ee(),[r,n]=p.useState("top"),{comments:s,isLoading:i,addComment:a,updateComment:l,deleteComment:c,toggleLike:u}=PU(e,r),[d,h]=p.useState(""),f=async()=>{d.trim()&&(await a({body:d.trim(),parentId:null}),h(""))};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-sm font-medium",children:"Comments"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(O,{variant:r==="top"?"default":"outline",size:"sm",onClick:()=>n("top"),children:"Top"}),o.jsx(O,{variant:r==="latest"?"default":"outline",size:"sm",onClick:()=>n("latest"),children:"Latest"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(tr,{value:d,onChange:m=>h(m.target.value),placeholder:t?"Join the discussion...":"Sign in to comment",rows:3,disabled:!t}),o.jsx(O,{onClick:f,disabled:!t||!d.trim(),children:"Post Comment"})]}),i?o.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading comments..."}):s.length===0?o.jsx("p",{className:"text-sm text-muted-foreground",children:"No comments yet. Be the first!"}):o.jsx("div",{className:"space-y-4",children:s.map(m=>o.jsx(ON,{comment:m,onReply:async(b,g)=>a({body:g,parentId:b}),onEdit:async(b,g)=>l({commentId:b,body:g}),onDelete:c,onToggleLike:(b,g)=>u({commentId:b,liked:g}),currentUserId:t==null?void 0:t.id},m.id))})]})}const IU={blend:y_,protein:T2,stack:Vm},OU={blend:"bg-purple-500/10 text-purple-500",protein:"bg-green-500/10 text-green-500",stack:"bg-blue-500/10 text-blue-500"};function MU(){const{postId:e}=ea(),{user:t,isLoading:r}=Ee(),{toast:n}=Vt(),s=Dt(),{bookmarks:i,isLoading:a,toggleBookmark:l,isUpdating:c}=TU(),u=p.useMemo(()=>i.map(y=>y.post_id),[i]),d=p.useMemo(()=>new Set(u),[u]);if(r)return o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})});if(!t)return o.jsx(fl,{to:"/auth",replace:!0});if(!e)return o.jsx(fl,{to:"/wall",replace:!0});const h=["wall-post",e,t==null?void 0:t.id,u],{data:f,isLoading:m}=Fe({queryKey:h,enabled:!!e&&!!t&&!a,queryFn:async()=>{const{data:y,error:x}=await R.from("wall_posts").select("id, user_id, recipe_id, caption, likes_count, created_at").eq("id",e).single();if(x)throw x;const[w,v,_,S]=await Promise.all([R.from("user_recipes").select("id, name, recipe_type, items, analysis, visibility").eq("id",y.recipe_id).single(),R.from("profiles").select("user_id, display_name, avatar_url").eq("user_id",y.user_id).single(),R.from("post_likes").select("post_id").eq("post_id",e).eq("user_id",t.id),R.from("recipe_tags").select("recipe_id, tag_id").eq("recipe_id",y.recipe_id)]),j=S.data||[],k=[...new Set(j.map(T=>T.tag_id))],{data:C}=k.length>0?await R.from("tags").select("id, slug").in("id",k):{data:[]};return{...y,recipe:w.data||{id:"",name:"Unknown",recipe_type:"blend",items:[],analysis:null,visibility:"public"},profile:v.data||{display_name:null,avatar_url:null},tags:C||[],user_liked:(_.data||[]).length>0,user_bookmarked:d.has(y.id)}}}),b=ht({mutationFn:async({liked:y})=>{if(!t)throw new Error("Must be logged in");y?await R.from("post_likes").delete().eq("post_id",e).eq("user_id",t.id):await R.from("post_likes").insert({post_id:e,user_id:t.id})},onMutate:async({liked:y})=>{await s.cancelQueries({queryKey:h});const x=s.getQueryData(h);return x&&s.setQueryData(h,{...x,user_liked:!y,likes_count:y?x.likes_count-1:x.likes_count+1}),{previousPost:x}},onError:(y,x,w)=>{s.setQueryData(h,w==null?void 0:w.previousPost),n({title:"Error",description:"Failed to update like. Please try again.",variant:"destructive"})}}),g=async y=>{try{await l({postId:e,bookmarked:y}),s.invalidateQueries({queryKey:h})}catch(x){n({title:"Failed to update bookmark",description:x instanceof Error?x.message:"Please try again",variant:"destructive"})}};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden",children:[o.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent/5 rounded-full blur-3xl"})]}),o.jsx(Ot,{}),o.jsx("main",{className:"max-w-3xl mx-auto px-4 py-8",children:m?o.jsx(se,{children:o.jsx(ce,{className:"py-12 text-center text-muted-foreground",children:"Loading post..."})}):f?o.jsxs(se,{children:[o.jsxs(Ge,{className:"flex flex-row items-center gap-3 pb-2",children:[o.jsxs(Gr,{className:"h-10 w-10",children:[o.jsx(Yr,{src:f.profile.avatar_url||void 0}),o.jsx(Qr,{className:"bg-primary/10 text-primary text-sm",children:(f.profile.display_name||"Anonymous").slice(0,2).toUpperCase()})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium text-sm",children:f.profile.display_name||"Anonymous"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:_i(new Date(f.created_at),{addSuffix:!0})})]}),o.jsxs(Ae,{variant:"secondary",className:OU[f.recipe.recipe_type],children:[(()=>{const y=IU[f.recipe.recipe_type];return o.jsx(y,{className:"h-3 w-3 mr-1"})})(),f.recipe.recipe_type]})]}),o.jsxs(ce,{className:"space-y-3",children:[o.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[o.jsx("h3",{className:"font-semibold",children:f.recipe.name}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[Array.isArray(f.recipe.items)?f.recipe.items.length:0," ingredient",Array.isArray(f.recipe.items)&&f.recipe.items.length!==1?"s":""]}),f.caption&&o.jsx("p",{className:"text-sm pt-2 border-t border-border/50",children:f.caption})]}),f.tags.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:f.tags.map(y=>o.jsx(xe,{to:`/tags?q=${y.slug}`,children:o.jsxs(Ae,{variant:"outline",className:"text-xs hover:border-primary hover:text-primary",children:["#",y.slug]})},y.id))})]}),o.jsxs(Td,{className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4 w-full",children:[o.jsxs(O,{variant:"ghost",size:"sm",className:f.user_liked?"text-red-500":"",onClick:()=>b.mutate({liked:f.user_liked}),children:[o.jsx(At,{className:`h-4 w-4 mr-1 ${f.user_liked?"fill-current":""}`}),f.likes_count]}),o.jsxs(O,{variant:"ghost",size:"sm",className:f.user_bookmarked?"text-primary":"",onClick:()=>g(f.user_bookmarked),disabled:c,children:[o.jsx(k2,{className:`h-4 w-4 mr-1 ${f.user_bookmarked?"fill-current":""}`}),"Save"]})]}),o.jsx(AU,{postId:f.id})]})]}):o.jsx(se,{children:o.jsx(ce,{className:"py-12 text-center text-muted-foreground",children:"Post not found."})})})]})}const Qc="id, title, prompt_inventory, prompt_categories, generated_schema, review_sections, include_score, creator_user_id, is_public, likes_count, created_at, updated_at";async function DU(e,t){const r=Vg(e);if(r.length===0)return[];const{data:n,error:s}=await R.from("tags").select("id, slug").in("slug",r);if(s)throw s;const i=n||[],a=new Set(i.map(u=>u.slug)),l=r.filter(u=>!a.has(u));let c=[];if(l.length>0){const{data:u,error:d}=await R.from("tags").insert(l.map(h=>({slug:h,created_by:t}))).select("id, slug");if(d)throw d;c=u||[]}return[...i,...c]}async function Bp(e,t){if(e.length===0)return[];const r=e.map(m=>m.id),[n,s,i]=await Promise.all([R.from("inventory_tags").select("inventory_id, tag_id").in("inventory_id",r),t?R.from("inventory_likes").select("inventory_id").eq("user_id",t).in("inventory_id",r):Promise.resolve({data:[]}),R.from("blueprints").select("inventory_id").in("inventory_id",r)]),a=n.data||[],l=[...new Set(a.map(m=>m.tag_id))],{data:c}=l.length>0?await R.from("tags").select("id, slug").in("id",l):{data:[]},u=new Map((c||[]).map(m=>[m.id,m])),d=new Map;a.forEach(m=>{const b=u.get(m.tag_id);if(!b)return;const g=d.get(m.inventory_id)||[];g.push(b),d.set(m.inventory_id,g)});const h=new Set((s.data||[]).map(m=>m.inventory_id)),f=new Map;return(i.data||[]).forEach(m=>{m.inventory_id&&f.set(m.inventory_id,(f.get(m.inventory_id)||0)+1)}),e.map(m=>({...m,tags:d.get(m.id)||[],user_liked:h.has(m.id),is_owner:t===m.creator_user_id,blueprint_count:f.get(m.id)||0}))}function LU(e){const{user:t}=Ee();return Fe({queryKey:["inventory-search",e,t==null?void 0:t.id],queryFn:async()=>{const r=e.trim();let n=[];if(!r){let c=R.from("inventories").select(Qc).order("likes_count",{ascending:!1}).limit(60);t!=null&&t.id?c=c.or(`is_public.eq.true,creator_user_id.eq.${t.id}`):c=c.eq("is_public",!0);const{data:u,error:d}=await c;if(d)throw d;return n=u||[],Bp(n,t==null?void 0:t.id)}const s=mn(r),i=[];if(s){const{data:c}=await R.from("tags").select("id").eq("slug",s).maybeSingle();if(c!=null&&c.id){const{data:u}=await R.from("inventory_tags").select("inventory_id").eq("tag_id",c.id),d=(u||[]).map(h=>h.inventory_id);if(d.length>0){const{data:h}=await R.from("inventories").select(Qc).in("id",d).order("likes_count",{ascending:!1});i.push(...h||[])}}}const{data:a}=await R.from("inventories").select(Qc).ilike("title",`%${r}%`).order("likes_count",{ascending:!1});return a&&i.push(...a),n=Array.from(new Map(i.map(c=>[c.id,c])).values()),Bp(n,t==null?void 0:t.id)}})}function dv(e){const{user:t}=Ee();return Fe({queryKey:["inventory",e,t==null?void 0:t.id],enabled:!!e,queryFn:async()=>{const{data:r,error:n}=await R.from("inventories").select(Qc).eq("id",e).single();if(n)throw n;return r?(await Bp([r],t==null?void 0:t.id))[0]??null:null}})}function MN(){const e=Dt(),{user:t}=Ee();return ht({mutationFn:async({inventoryId:r,liked:n})=>{if(!(t!=null&&t.id))throw new Error("Must be logged in");if(n){const{error:s}=await R.from("inventory_likes").delete().eq("inventory_id",r).eq("user_id",t.id);if(s)throw s}else{const{error:s}=await R.from("inventory_likes").insert({inventory_id:r,user_id:t.id});if(s)throw s}},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory-search"]}),e.invalidateQueries({queryKey:["inventory"]})}})}function $U(){const e=Dt(),{user:t}=Ee();return ht({mutationFn:async r=>{if(!(t!=null&&t.id))throw new Error("Must be logged in");const{data:n,error:s}=await R.from("inventories").insert({title:r.title,prompt_inventory:r.promptInventory,prompt_categories:r.promptCategories,generated_schema:r.generatedSchema,review_sections:r.reviewSections,include_score:r.includeScore,creator_user_id:t.id,is_public:r.isPublic}).select("id").single();if(s)throw s;const i=await DU(r.tags,t.id);if(i.length>0){const{error:a}=await R.from("inventory_tags").insert(i.map(l=>({inventory_id:n.id,tag_id:l.id})));if(a)throw a}return r.sourceInventoryId&&await R.from("inventory_remixes").insert({inventory_id:n.id,source_inventory_id:r.sourceInventoryId,user_id:t.id}),n},onSuccess:()=>{e.invalidateQueries({queryKey:["inventory-search"]})}})}function FU(){const e=Dt(),{user:t}=Ee();return ht({mutationFn:async r=>{if(!(t!=null&&t.id))throw new Error("Must be logged in");const{error:n}=await R.from("inventories").update({review_sections:r.reviewSections,include_score:r.includeScore}).eq("id",r.inventoryId).eq("creator_user_id",t.id);if(n)throw n},onSuccess:(r,n)=>{e.invalidateQueries({queryKey:["inventory",n.inventoryId]}),e.invalidateQueries({queryKey:["inventory-search"]})}})}const mx="id, title, prompt_inventory, prompt_categories, generated_schema, review_sections, include_score, creator_user_id, is_public, likes_count, created_at, updated_at";function UU(e=6){const{user:t}=Ee();return Fe({queryKey:["suggested-inventories",t==null?void 0:t.id,e],queryFn:async()=>{let r=[];if(t!=null&&t.id){const{data:g}=await R.from("inventory_likes").select("inventory_id").eq("user_id",t.id),y=(g||[]).map(x=>x.inventory_id);if(y.length>0){const{data:x}=await R.from("inventory_tags").select("tag_id").in("inventory_id",y);r=[...new Set((x||[]).map(w=>w.tag_id))]}}let n=[];if(r.length>0&&(t!=null&&t.id)){const{data:g}=await R.from("inventory_tags").select("inventory_id").in("tag_id",r),y=[...new Set((g||[]).map(_=>_.inventory_id))],{data:x}=await R.from("inventory_likes").select("inventory_id").eq("user_id",t.id),w=new Set((x||[]).map(_=>_.inventory_id)),v=y.filter(_=>!w.has(_));if(v.length>0){const{data:_}=await R.from("inventories").select(mx).in("id",v).eq("is_public",!0).order("likes_count",{ascending:!1}).limit(e);n=_||[]}}if(n.length<e){const g=n.map(w=>w.id),{data:y}=await R.from("inventories").select(mx).eq("is_public",!0).order("likes_count",{ascending:!1}).limit(e*2),x=(y||[]).filter(w=>!g.includes(w.id)).slice(0,e-n.length);n=[...n,...x]}if(n.length===0)return[];const s=n.map(g=>g.id),[i,a,l]=await Promise.all([R.from("inventory_tags").select("inventory_id, tag_id").in("inventory_id",s),t!=null&&t.id?R.from("inventory_likes").select("inventory_id").eq("user_id",t.id).in("inventory_id",s):Promise.resolve({data:[]}),R.from("blueprints").select("inventory_id").in("inventory_id",s)]),c=i.data||[],u=[...new Set(c.map(g=>g.tag_id))],{data:d}=u.length>0?await R.from("tags").select("id, slug").in("id",u):{data:[]},h=new Map((d||[]).map(g=>[g.id,g])),f=new Map;c.forEach(g=>{const y=h.get(g.tag_id);if(!y)return;const x=f.get(g.inventory_id)||[];x.push(y),f.set(g.inventory_id,x)});const m=new Set((a.data||[]).map(g=>g.inventory_id)),b=new Map;return(l.data||[]).forEach(g=>{g.inventory_id&&b.set(g.inventory_id,(b.get(g.inventory_id)||0)+1)}),n.map(g=>({...g,tags:f.get(g.id)||[],user_liked:m.has(g.id),is_owner:(t==null?void 0:t.id)===g.creator_user_id,blueprint_count:b.get(g.id)||0}))},staleTime:2*60*1e3})}function DN({inventory:e,onLike:t}){const r=e.tags.slice(0,3),n=e.tags.length-3;return o.jsx(xe,{to:`/inventory/${e.id}/build`,className:"block group",children:o.jsx(se,{className:"h-full transition-all duration-300 hover:border-primary/40 hover:shadow-lg hover:shadow-primary/10 group-focus-visible:ring-2 group-focus-visible:ring-primary",children:o.jsxs(ce,{className:"p-5 flex flex-col h-full",children:[o.jsx("h3",{className:"font-semibold text-lg line-clamp-1 mb-1",children:e.title}),o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3 flex-grow",children:e.prompt_inventory}),e.tags.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[r.map(s=>o.jsxs(Ae,{variant:"secondary",className:"text-xs",children:["#",s.slug]},s.id)),n>0&&o.jsxs(Ae,{variant:"outline",className:"text-xs text-muted-foreground",children:["+",n," more"]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border/50",children:[o.jsx("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:o.jsxs("span",{className:"flex items-center gap-1",title:"Blueprints using this inventory",children:[o.jsx(R2,{className:"h-3.5 w-3.5"}),o.jsx("span",{children:e.blueprint_count})]})}),o.jsxs(O,{variant:"ghost",size:"sm",className:`h-8 px-2 ${e.user_liked?"text-red-500 hover:text-red-600":"text-muted-foreground hover:text-foreground"}`,onClick:s=>{s.preventDefault(),s.stopPropagation(),t(e.id,e.user_liked)},"aria-label":e.user_liked?"Unlike inventory":"Like inventory",children:[o.jsx(At,{className:`h-4 w-4 ${e.user_liked?"fill-current":""}`}),o.jsx("span",{className:"ml-1 text-xs",children:e.likes_count})]})]})]})})})}function BU({inventories:e,isLoading:t,onLike:r}){return t?o.jsxs("section",{className:"space-y-3",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Suggested for You"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:3}).map((n,s)=>o.jsx(se,{children:o.jsxs(ce,{className:"p-5 space-y-3",children:[o.jsx(be,{className:"h-5 w-3/4"}),o.jsx(be,{className:"h-10 w-full"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(be,{className:"h-5 w-16"}),o.jsx(be,{className:"h-5 w-20"})]}),o.jsx(be,{className:"h-4 w-full"})]})},s))})]}):e.length===0?null:o.jsxs("section",{className:"space-y-3",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Suggested for You"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:e.slice(0,3).map(n=>o.jsx(DN,{inventory:n,onLike:r},n.id))})]})}function zU(){const[e,t]=p.useState(""),[r,n]=p.useState(null),{user:s}=Ee(),{toast:i}=Vt(),a=r||e,{data:l,isLoading:c}=LU(a),{data:u=[],isLoading:d}=Hj(12),{data:h=[],isLoading:f}=UU(6),m=MN(),b=new Set(h.map(v=>v.id)),g=p.useMemo(()=>l?a?l:l.filter(v=>!b.has(v.id)):[],[l,b,a]),y=async(v,_)=>{if(!s){i({title:"Sign in required",description:"Please sign in to like inventories.",variant:"destructive"});return}try{await m.mutateAsync({inventoryId:v,liked:_})}catch(S){i({title:"Action failed",description:S instanceof Error?S.message:"Please try again.",variant:"destructive"})}},x=v=>{n(v),v&&t("")},w=!a&&s;return o.jsxs("div",{className:"min-h-screen bg-background relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[o.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary/5 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute top-1/3 -left-20 w-60 h-60 bg-accent/5 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-20 right-1/4 w-40 h-40 bg-primary/3 rounded-full blur-2xl"})]}),o.jsx(Ot,{}),o.jsxs("main",{className:"relative max-w-6xl mx-auto px-4 py-8 space-y-8",children:[o.jsx(Dk,{storageKey:"blueprints_inventory_intro_dismissed",title:"Welcome to Inventories!",description:"Inventories are collections of itemslike ingredient lists. Pick one and start building your Blueprint!"}),o.jsxs("section",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-3xl font-semibold",children:"Inventory Library"}),o.jsx(xe,{to:"/inventory/create",children:o.jsxs(O,{size:"sm",className:"gap-2",children:[o.jsx(hd,{className:"h-4 w-4"}),"Create"]})})]}),o.jsx("p",{className:"text-muted-foreground",children:"Discover recipe inventories to build your perfect blueprint."})]}),o.jsx(se,{className:"bg-card/60 backdrop-blur-sm",children:o.jsxs(ce,{className:"p-4 flex items-center gap-2",children:[o.jsx(Ho,{className:"h-4 w-4 text-muted-foreground shrink-0"}),o.jsx(Me,{value:e,onChange:v=>{t(v.target.value),v.target.value&&n(null)},placeholder:"Search inventories by title or tag...",className:"border-none shadow-none focus-visible:ring-0 bg-transparent"})]})}),!d&&u.length>0&&o.jsx(eN,{tags:u,selectedTag:r,onSelectTag:x}),w&&o.jsx(BU,{inventories:h,isLoading:f,onLike:y}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-lg font-semibold",children:a?`Results for "${a}"`:"All Inventories"}),c?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((v,_)=>o.jsx(se,{children:o.jsxs(ce,{className:"p-5 space-y-3",children:[o.jsx(be,{className:"h-5 w-3/4"}),o.jsx(be,{className:"h-10 w-full"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(be,{className:"h-5 w-16"}),o.jsx(be,{className:"h-5 w-20"})]}),o.jsx(be,{className:"h-4 w-full"})]})},_))}):g.length>0?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(v=>o.jsx(DN,{inventory:v,onLike:y},v.id))}):o.jsx(se,{className:"bg-card/60 backdrop-blur-sm",children:o.jsxs(ce,{className:"py-12 text-center space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"No inventories found"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:a?"Try a different search or clear filters.":"Be the first to create an inventory!"}),!a&&o.jsx(xe,{to:"/inventory/create",children:o.jsx(O,{children:"Create Inventory"})})]})})]})]})]})}function hv({value:e,onChange:t,suggestions:r=[],maxTags:n=Qj,disabled:s}){const[i,a]=p.useState(""),l=e.length<n,c=p.useMemo(()=>{const f=mn(i);return f?r.filter(m=>m.includes(f)).filter(m=>!e.includes(m)).slice(0,6):[]},[i,r,e]),u=f=>{if(!l)return;const m=mn(f);!m||e.includes(m)||(t([...e,m].slice(0,n)),a(""))},d=f=>{t(e.filter(m=>m!==f))},h=f=>{(f.key==="Enter"||f.key===",")&&(f.preventDefault(),i.trim()&&u(i))};return o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"flex flex-wrap gap-2",children:e.map(f=>o.jsxs(Ae,{variant:"secondary",className:"gap-1",children:["#",f,o.jsx(O,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4",onClick:()=>d(f),disabled:s,children:o.jsx(zt,{className:"h-3 w-3"})})]},f))}),o.jsx(Me,{value:i,onChange:f=>a(f.target.value),onKeyDown:h,placeholder:l?"Add tag (press Enter)":"Tag limit reached",disabled:s||!l}),c.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(f=>o.jsxs(O,{type:"button",variant:"outline",size:"sm",onClick:()=>u(f),disabled:s,children:["#",f]},f))})]})}const Sl="inventory_create_tour_completed",ba=[{targetId:"keywords",title:"Describe Your Inventory",description:'Enter a few words like "skincare routine" or "smoothie ingredients".'},{targetId:"generate",title:"Generate with AI",description:"Click Generate to create categories and items automatically."},{targetId:"edit-categories",title:"Review & Edit",description:"Rename categories, add items, or remove what you don't need."},{targetId:"publish",title:"Create & Build",description:"Publish your inventory and start creating blueprints!"}];function qU({isActive:e,onComplete:t,onSkip:r}){const[n,s]=p.useState(0),[i,a]=p.useState(null),l=ba[n],c=p.useCallback(()=>{if(!l)return;const f=document.querySelector(`[data-help-id="${l.targetId}"]`);a(f?f.getBoundingClientRect():null)},[l]);p.useEffect(()=>{if(e)return c(),window.addEventListener("resize",c),window.addEventListener("scroll",c),()=>{window.removeEventListener("resize",c),window.removeEventListener("scroll",c)}},[e,c,n]),p.useEffect(()=>{if(!e)return;const f=m=>{m.key==="Escape"?r():(m.key==="ArrowRight"||m.key==="Enter")&&u()};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[e,n,r]);const u=p.useCallback(()=>{n<ba.length-1?s(f=>f+1):(localStorage.setItem(Sl,"true"),t())},[n,t]),d=p.useCallback(()=>{localStorage.setItem(Sl,"true"),r()},[r]);if(!e||!l)return null;const h=(()=>{if(!i)return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};const f=window.innerHeight,m=window.innerWidth,b=320,g=180,y=16;let x=i.bottom+y,w=i.left+i.width/2-b/2;return x+g>f-20&&(x=i.top-g-y),w<20&&(w=20),w+b>m-20&&(w=m-b-20),{top:`${x}px`,left:`${w}px`}})();return Jr.createPortal(o.jsxs("div",{className:"fixed inset-0 z-50",children:[o.jsx("div",{className:"absolute inset-0",children:o.jsxs("svg",{className:"w-full h-full",children:[o.jsx("defs",{children:o.jsxs("mask",{id:"inventory-spotlight-mask",children:[o.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),i&&o.jsx("rect",{x:i.left-8,y:i.top-8,width:i.width+16,height:i.height+16,rx:"12",fill:"black"})]})}),o.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"hsl(var(--background) / 0.8)",mask:"url(#inventory-spotlight-mask)",className:"animate-in fade-in duration-300"})]})}),i&&o.jsx("div",{className:"absolute rounded-xl border-2 border-orange-500 shadow-[0_0_20px_rgba(249,115,22,0.4)] pointer-events-none animate-pulse",style:{left:i.left-8,top:i.top-8,width:i.width+16,height:i.height+16}}),o.jsx(se,{className:"fixed w-80 bg-card border-border shadow-lg animate-in slide-in-from-bottom-2 duration-300 z-10",style:h,children:o.jsxs(ce,{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("h3",{className:"font-semibold",children:l.title}),o.jsx("p",{className:"text-sm text-muted-foreground",children:l.description})]}),o.jsx(O,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:d,children:o.jsx(zt,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"flex gap-1.5",children:ba.map((f,m)=>o.jsx("div",{className:Y("h-1.5 w-1.5 rounded-full transition-colors",m===n?"bg-orange-500":"bg-muted-foreground/30")},m))}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(O,{variant:"ghost",size:"sm",onClick:d,children:"Skip"}),o.jsxs(O,{size:"sm",onClick:u,className:"gap-1",children:[n===ba.length-1?"Done":"Next",n<ba.length-1&&o.jsx(Hm,{className:"h-4 w-4"})]})]})]})]})})]}),document.body)}function WU({onStartTour:e,onDismiss:t}){const[r,n]=p.useState(()=>localStorage.getItem(Sl)==="true");return r?null:o.jsxs("div",{className:"rounded-xl border border-orange-500/30 bg-orange-500/5 p-4 flex items-center justify-between gap-4 animate-in fade-in slide-in-from-top-2 duration-300",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"h-10 w-10 rounded-full bg-orange-500/10 flex items-center justify-center",children:o.jsx(Rs,{className:"h-5 w-5 text-orange-500"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"New here?"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Take a quick tour to learn how to create inventories."})]})]}),o.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[o.jsx(O,{variant:"ghost",size:"sm",onClick:()=>{n(!0),localStorage.setItem(Sl,"true"),t()},children:"Maybe later"}),o.jsxs(O,{size:"sm",onClick:e,className:"gap-2 bg-orange-500 hover:bg-orange-600 text-white",children:[o.jsx(Rs,{className:"h-4 w-4"}),"Take Tour"]})]})]})}function VU(){return localStorage.getItem(Sl)==="true"}function HU({onClick:e}){return o.jsx(O,{type:"button",variant:"ghost",size:"icon",onClick:e,className:"h-9 w-9 rounded-full","aria-label":"Take a tour",title:"Take a tour",children:o.jsx(Rs,{className:"h-4 w-4"})})}const KU=[{id:"keywords",text:"Describe what kind of inventory you want to create"},{id:"generate",text:"AI generates categories and items for you"},{id:"advanced-options",text:"Customize how AI generates your inventory"},{id:"edit-categories",text:"Rename, add, or remove categories and items"},{id:"tags",text:"Help others discover your inventory with tags"},{id:"publish",text:"Create your inventory and start building"}];function GU({isOpen:e,onClose:t,onStartTour:r}){const[n,s]=p.useState([]),i=p.useCallback(()=>{const a=[];KU.forEach(({id:l,text:c})=>{const u=document.querySelector(`[data-help-id="${l}"]`);if(!u)return;const d=u.getBoundingClientRect(),h=window.innerWidth,f=window.innerHeight;let m="right",b=d.right+12,g=d.top+d.height/2;d.right+200>h&&(d.left>200?(m="left",b=d.left-12):(m="bottom",b=d.left+d.width/2,g=d.bottom+12)),(m==="left"||m==="right")&&(g<50&&(g=50),g>f-50&&(g=f-50)),a.push({id:l,text:c,x:b,y:g,side:m})}),s(a)},[]);return p.useEffect(()=>{if(e){const a=setTimeout(i,100);return()=>clearTimeout(a)}},[e,i]),p.useEffect(()=>{if(!e)return;const a=l=>{l.key==="Escape"&&t()};return window.addEventListener("keydown",a),window.addEventListener("resize",i),()=>{window.removeEventListener("keydown",a),window.removeEventListener("resize",i)}},[e,t,i]),e?Jr.createPortal(o.jsxs("div",{className:"fixed inset-0 z-50",children:[o.jsx("div",{className:"absolute inset-0 bg-background/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:t}),n.map(a=>o.jsxs("div",{className:Y("fixed z-50 max-w-[200px] rounded-lg bg-foreground text-background px-3 py-2 text-sm shadow-lg animate-in fade-in zoom-in-95 duration-200",a.side==="left"&&"-translate-x-full",a.side==="top"&&"-translate-y-full -translate-x-1/2",a.side==="bottom"&&"-translate-x-1/2",(a.side==="left"||a.side==="right")&&"-translate-y-1/2"),style:{left:a.x,top:a.y},children:[a.text,o.jsx("div",{className:Y("absolute w-2 h-2 bg-foreground rotate-45",a.side==="right"&&"-left-1 top-1/2 -translate-y-1/2",a.side==="left"&&"-right-1 top-1/2 -translate-y-1/2",a.side==="bottom"&&"-top-1 left-1/2 -translate-x-1/2",a.side==="top"&&"-bottom-1 left-1/2 -translate-x-1/2")})]},a.id)),o.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 bg-card border border-border rounded-2xl shadow-lg p-4 animate-in slide-in-from-bottom-4 duration-300",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(cd,{className:"h-4 w-4"}),o.jsx("span",{children:"Hover over highlighted elements"})]}),o.jsx("div",{className:"h-4 w-px bg-border"}),o.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>{t(),r()},className:"gap-2",children:[o.jsx(Rs,{className:"h-4 w-4"}),"Take a tour"]}),o.jsx(O,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8",children:o.jsx(zt,{className:"h-4 w-4"})})]})})]}),document.body):null}function YU({onClick:e}){return o.jsx(O,{type:"button",variant:"outline",size:"icon",onClick:e,className:"h-9 w-9 rounded-full border-dashed","aria-label":"Show help",children:o.jsx(cd,{className:"h-4 w-4"})})}const QU=8;function JU(e){return e?`stacklab-recent-tags:${e}`:null}function XU(e){if(!e)return[];try{const t=localStorage.getItem(e);if(!t)return[];const r=JSON.parse(t);if(Array.isArray(r))return r}catch{return[]}return[]}function ZU(e,t){if(e)try{localStorage.setItem(e,JSON.stringify(t))}catch{}}function fv(){const{user:e}=Ee(),t=p.useMemo(()=>JU(e==null?void 0:e.id),[e==null?void 0:e.id]),[r,n]=p.useState([]);p.useEffect(()=>{n(XU(t))},[t]);const s=p.useCallback(i=>{if(!t)return[];const a=Vg(i);if(a.length===0)return r;const l=[...a,...r.filter(c=>!a.includes(c))].slice(0,QU);return n(l),ZU(t,l),l},[t,r]);return{recentTags:r,addRecentTags:s}}const Cs="Overview",e8=["Overview","Strengths","Gaps","Suggestions"],pv=e8.filter(e=>e!==Cs),jl=4,Wa=jl-1;function Bu(e){const t=e.trim().replace(/\s+/g," ");return t?t.replace(/\b\w/g,r=>r.toUpperCase()):""}function mv(e){if(!Array.isArray(e))return[];const t=[];for(const r of e){if(typeof r!="string")continue;const n=Bu(r);n&&n.toLowerCase()!==Cs.toLowerCase()&&(t.some(s=>s.toLowerCase()===n.toLowerCase())||t.push(n))}return t}function gv(e){const t=e==null?pv:mv(e);return[Cs,...t]}const t8="https://piszvseyaefxekubphhf.supabase.co/functions/v1/generate-inventory",r8=!1,n8=t8;function s8(){const e=Fs(),{toast:t}=Vt(),{session:r}=Ee(),n=$U(),{data:s}=uv(),{recentTags:i,addRecentTags:a}=fv(),[l,c]=p.useState(""),[u,d]=p.useState(""),[h,f]=p.useState(!1),[m,b]=p.useState([]),[g,y]=p.useState(""),[x,w]=p.useState(""),[v,_]=p.useState(!1),[S,j]=p.useState(""),[k,C]=p.useState(""),[T,A]=p.useState(null),[$,D]=p.useState([]),[X,I]=p.useState(!0),ae=5,M=6,[Z,P]=p.useState(!1),[E,B]=p.useState(!1),[ie,Q]=p.useState(()=>!VU()),me=p.useMemo(()=>T?T.categories.map(V=>V.name.trim()).filter(Boolean):[],[T]),[U,de]=p.useState({}),[ge,L]=p.useState(""),ue=async()=>{if(!l.trim()){t({title:"Keywords required",description:"Enter what kind of inventory you want to create.",variant:"destructive"});return}f(!0);try{const V={"Content-Type":"application/json"};r8||(V.Authorization="Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBpc3p2c2V5YWVmeGVrdWJwaGhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwODE3NTEsImV4cCI6MjA4NDY1Nzc1MX0.odmCphs9gpipbjF7zp639J0r8s48SYHnpNsjQvfICSc");const te=await fetch(n8,{method:"POST",headers:V,body:JSON.stringify({keywords:l.trim(),title:S.trim()||void 0,customInstructions:u.trim()||void 0,preferredCategories:m.length>0?m:void 0})});if(!te.ok){const Ne=await te.json().catch(()=>({}));throw new Error(Ne.error||"Failed to generate inventory")}const re=await te.json();if(A(re),C(re.summary||""),de({}),!S.trim()){const Ne=l.trim().split(" ").slice(0,3).map(Se=>Se.charAt(0).toUpperCase()+Se.slice(1).toLowerCase()).join(" ")+" Inventory";j(Ne)}re.suggestedTags&&re.suggestedTags.length>0&&D(re.suggestedTags.slice(0,4)),t({title:"Inventory generated!",description:`Created ${re.categories.length} categories with ${re.categories.reduce((Ne,Se)=>Ne+Se.items.length,0)} items.`})}catch(V){t({title:"Generation failed",description:V instanceof Error?V.message:"Please try again.",variant:"destructive"})}finally{f(!1)}},_e=async()=>{if(!S.trim()){t({title:"Title required",description:"Add a title before creating the inventory.",variant:"destructive"});return}if(!T){t({title:"Generate inventory first",description:"Use the generate button to create your inventory.",variant:"destructive"});return}if($.length===0){t({title:"Tags required",description:"Add at least one tag to help discovery.",variant:"destructive"});return}if($.length>ae){t({title:"Too many tags",description:`Please use ${ae} tags or fewer.`,variant:"destructive"});return}try{const V=me.join(", "),te=await n.mutateAsync({title:S.trim(),promptInventory:k.trim(),promptCategories:V,generatedSchema:T,reviewSections:pv,includeScore:!0,tags:$,isPublic:X});a($),e(`/inventory/${te.id}/build`)}catch(V){t({title:"Creation failed",description:V instanceof Error?V.message:"Please try again.",variant:"destructive"})}};return o.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[o.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none -z-10",children:[o.jsx("div",{className:"absolute -top-40 -right-40 w-[500px] h-[500px] bg-primary/8 rounded-full blur-3xl animate-drift"}),o.jsx("div",{className:"absolute top-1/2 -left-32 w-96 h-96 bg-accent/15 rounded-full blur-3xl animate-float"}),o.jsx("div",{className:"absolute -bottom-20 right-1/4 w-80 h-80 bg-secondary/10 rounded-full blur-3xl animate-pulse-soft"})]}),o.jsx(Ot,{}),o.jsxs("main",{className:"max-w-3xl mx-auto px-4 py-8 space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Inventory Library"}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(HU,{onClick:()=>B(!0)}),o.jsx(YU,{onClick:()=>P(!0)})]})]}),ie&&o.jsx(WU,{onStartTour:()=>{Q(!1),B(!0)},onDismiss:()=>Q(!1)}),o.jsxs("div",{className:"text-center mb-12 pt-8 animate-fade-in",children:[o.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-black tracking-tight mb-4 relative inline-block",children:[o.jsxs("span",{className:"relative inline-block",style:{fontFamily:"'Impact', 'Haettenschweiler', 'Franklin Gothic Bold', 'Charcoal', 'Helvetica Inserat', sans-serif",letterSpacing:"0.06em"},children:[o.jsx("span",{className:"absolute inset-0 text-border/40",style:{transform:"translate(4px, 4px)"},"aria-hidden":"true",children:"CREATE INVENTORY"}),o.jsx("span",{className:"absolute inset-0 text-border/60",style:{transform:"translate(2px, 2px)"},"aria-hidden":"true",children:"CREATE INVENTORY"}),o.jsx("span",{className:"text-gradient-themed animate-shimmer bg-[length:200%_auto] relative",children:"CREATE INVENTORY"})]}),o.jsx("span",{className:"absolute -inset-4 bg-primary/10 blur-2xl rounded-full animate-pulse-soft -z-10"})]}),o.jsx("p",{className:"text-lg text-muted-foreground max-w-md mx-auto",children:"Describe what you want to build, and AI will generate your inventory"})]}),o.jsxs(se,{className:"bg-card/60 backdrop-blur-glass border-border/50 animate-fade-in",children:[o.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0",children:[o.jsxs(vt,{className:"flex items-center gap-2",children:[o.jsx(q2,{className:"h-5 w-5 text-primary"}),"What kind of inventory?"]}),o.jsxs(O,{onClick:ue,disabled:h||!l.trim(),className:"gap-2","data-help-id":"generate",children:[h?o.jsx(di,{className:"h-4 w-4 animate-spin"}):o.jsx(Mn,{className:"h-4 w-4"}),h?"Generating...":T?"Regenerate":"Generate"]})]}),o.jsxs(ce,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2","data-help-id":"keywords",children:[o.jsx(Ue,{htmlFor:"keywords",children:"Describe your inventory in a few words"}),o.jsx(Me,{id:"keywords",value:l,onChange:V=>c(V.target.value),placeholder:"e.g., skincare routine, green smoothie, morning habits...",onKeyDown:V=>V.key==="Enter"&&ue()})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:["skincare routine","green smoothie","morning routine","home workout","meditation practice"].map(V=>o.jsx(O,{type:"button",size:"sm",variant:"outline",onClick:()=>c(V),className:"text-xs",children:V},V))}),o.jsxs(Bg,{open:v,onOpenChange:_,children:[o.jsx(zg,{asChild:!0,children:o.jsxs(O,{variant:"ghost",className:"w-full justify-between text-muted-foreground hover:text-foreground","data-help-id":"advanced-options",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(x_,{className:"h-4 w-4"}),"Advanced Options"]}),o.jsx(Vo,{className:`h-4 w-4 transition-transform ${v?"rotate-180":""}`})]})}),o.jsxs(qg,{className:"space-y-4 pt-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{htmlFor:"custom-instructions",children:"Custom instructions (optional)"}),o.jsx(tr,{id:"custom-instructions",value:u,onChange:V=>d(V.target.value),placeholder:"e.g., more beginner-friendly, fewer categories, emphasize budget options...",rows:3}),T&&o.jsx("p",{className:"text-xs text-muted-foreground",children:"Regenerating will replace the current categories and items."})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx(Ue,{children:"Preferred categories (optional)"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"We will always generate 6 categories total."})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:m.map((V,te)=>o.jsxs(Ae,{variant:"secondary",className:"gap-1",children:[V,o.jsx(O,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4",onClick:()=>{b(re=>re.filter((Ne,Se)=>Se!==te)),w("")},"aria-label":"Remove category",children:o.jsx(zt,{className:"h-3 w-3"})})]},`${V}-${te}`))}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Me,{value:g,onChange:V=>y(V.target.value),placeholder:"Add category",onKeyDown:V=>{if(V.key==="Enter"){V.preventDefault();const te=g.trim();if(!te)return;if(m.length>=M){w("You can only add up to 6 categories.");return}b(re=>[...re,te]),y(""),w("")}}}),o.jsx(O,{type:"button",variant:"outline",onClick:()=>{const V=g.trim();if(V){if(m.length>=M){w("You can only add up to 6 categories.");return}b(te=>[...te,V]),y(""),w("")}},children:"Add"})]}),x&&o.jsx("p",{className:"text-xs text-destructive",children:x})]})]})]})]})]}),T&&o.jsxs(o.Fragment,{children:[o.jsxs(se,{className:"bg-card/60 backdrop-blur-glass border-border/50 animate-fade-in",children:[o.jsx(Ge,{children:o.jsx(vt,{children:"Inventory Details"})}),o.jsxs(ce,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{htmlFor:"inventory-title",children:"Title"}),o.jsx(Me,{id:"inventory-title",value:S,onChange:V=>j(V.target.value),placeholder:"My Custom Inventory"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{htmlFor:"inventory-description",children:"Description"}),o.jsx(tr,{id:"inventory-description",value:k,onChange:V=>C(V.target.value),placeholder:"What this inventory is for...",rows:3})]})]})]}),o.jsxs(se,{className:"bg-card/60 backdrop-blur-glass border-border/50 animate-fade-in","data-help-id":"edit-categories",children:[o.jsx(Ge,{children:o.jsx(vt,{children:"Generated Categories"})}),o.jsxs(ce,{className:"space-y-4",children:[T.categories.map((V,te)=>o.jsxs("div",{className:"space-y-3 rounded-lg border border-border/60 p-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Me,{value:V.name,onChange:re=>{const Ne=re.target.value;A(Se=>{if(!Se)return Se;const ot=Se.categories.map((Ie,yt)=>yt===te?{...Ie,name:Ne}:Ie);return{...Se,categories:ot}})},className:"font-semibold",placeholder:"Category name"}),o.jsx(O,{type:"button",variant:"ghost",size:"icon",onClick:()=>{A(re=>{if(!re)return re;const Ne=re.categories.filter((Se,ot)=>ot!==te);return{...re,categories:Ne}})},"aria-label":"Remove category",children:o.jsx(zt,{className:"h-4 w-4"})}),o.jsxs(Ae,{variant:"secondary",children:[V.items.length," items"]})]}),o.jsx("div",{className:"flex flex-wrap gap-1.5",children:V.items.map((re,Ne)=>o.jsxs(Ae,{variant:"outline",className:"text-xs gap-1",children:[re,o.jsx(O,{type:"button",variant:"ghost",size:"icon",className:"h-3 w-3",onClick:()=>{A(Se=>{if(!Se)return Se;const ot=Se.categories.map((Ie,yt)=>yt!==te?Ie:{...Ie,items:Ie.items.filter((en,rr)=>rr!==Ne)});return{...Se,categories:ot}})},"aria-label":"Remove item",children:o.jsx(zt,{className:"h-3 w-3"})})]},Ne))}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Me,{value:U[te]||"",onChange:re=>de(Ne=>({...Ne,[te]:re.target.value})),placeholder:`Add item to ${V.name||"category"}`}),o.jsx(O,{type:"button",variant:"outline",onClick:()=>{var Ne;const re=(Ne=U[te])==null?void 0:Ne.trim();re&&(A(Se=>{if(!Se)return Se;const ot=Se.categories.map((Ie,yt)=>yt===te?{...Ie,items:[...Ie.items,re]}:Ie);return{...Se,categories:ot}}),de(Se=>({...Se,[te]:""})))},children:"Add item"})]})]},te)),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Me,{value:ge,onChange:V=>L(V.target.value),placeholder:"New category name"}),o.jsx(O,{type:"button",variant:"outline",onClick:()=>{const V=ge.trim();V&&(A(te=>te&&{...te,categories:[...te.categories,{name:V,items:[]}]}),L(""))},children:"Add category"})]})]})]}),o.jsxs(se,{className:"bg-card/60 backdrop-blur-glass border-border/50 animate-fade-in","data-help-id":"tags",children:[o.jsx(Ge,{children:o.jsx(vt,{children:"Discovery"})}),o.jsxs(ce,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{children:"Tags"}),o.jsx(hv,{value:$,onChange:D,suggestions:s||[],maxTags:ae})]}),o.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 px-4 py-3",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Public inventory"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Public inventories appear in search."})]}),o.jsx(ki,{checked:X,onCheckedChange:I})]})]})]}),o.jsxs(O,{onClick:_e,disabled:n.isPending,className:"w-full gap-2",size:"lg","data-help-id":"publish",children:[n.isPending?o.jsx(di,{className:"h-4 w-4 animate-spin"}):o.jsx(Mn,{className:"h-4 w-4"}),"Create Inventory"]})]})]}),o.jsx(qU,{isActive:E,onComplete:()=>B(!1),onSkip:()=>B(!1)}),o.jsx(GU,{isOpen:Z,onClose:()=>P(!1),onStartTour:()=>{P(!1),B(!0)}})]})}function i8(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=e.categories;return Array.isArray(t)?t.map(r=>typeof r.name=="string"?r.name:"").filter(Boolean):[]}function o8(){const{inventoryId:e}=ea(),{data:t,isLoading:r}=dv(e),n=MN(),s=FU(),{toast:i}=Vt(),[a,l]=p.useState([]),[c,u]=p.useState(""),[d,h]=p.useState(""),[f,m]=p.useState(!0);p.useEffect(()=>{t&&(l(mv(t.review_sections)),m(t.include_score??!0),u(""),h(""))},[t]);const b=p.useMemo(()=>pv.filter(_=>!a.some(S=>S.toLowerCase()===_.toLowerCase())),[a]),g=p.useMemo(()=>gv((t==null?void 0:t.review_sections)??null),[t]),y=async()=>{if(t)try{await n.mutateAsync({inventoryId:t.id,liked:t.user_liked})}catch(_){i({title:"Action failed",description:_ instanceof Error?_.message:"Please try again.",variant:"destructive"})}},x=_=>{const S=Bu(_);if(S){if(S.toLowerCase()===Cs.toLowerCase()){u("");return}if(a.some(j=>j.toLowerCase()===S.toLowerCase())){u(""),h("");return}if(a.length>=Wa){h(`You can add up to ${jl} sections total.`);return}l(j=>[...j,S]),u(""),h("")}},w=_=>{l(S=>S.filter(j=>j!==_)),h("")},v=async()=>{if(t){if(a.length>Wa){i({title:"Too many sections",description:`Please use ${jl} sections or fewer.`,variant:"destructive"});return}try{await s.mutateAsync({inventoryId:t.id,reviewSections:a,includeScore:f}),i({title:"Saved",description:"Review settings updated."})}catch(_){i({title:"Save failed",description:_ instanceof Error?_.message:"Please try again.",variant:"destructive"})}}};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Ot,{}),o.jsx("main",{className:"max-w-3xl mx-auto px-4 py-8 space-y-6",children:r?o.jsxs(se,{children:[o.jsx(Ge,{children:o.jsx(be,{className:"h-6 w-40"})}),o.jsx(ce,{children:o.jsx(be,{className:"h-24 w-full"})})]}):t?o.jsx(o.Fragment,{children:o.jsxs(se,{children:[o.jsxs(Ge,{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx(vt,{children:t.title}),o.jsx("p",{className:"text-sm text-muted-foreground",children:t.prompt_inventory})]}),o.jsxs(O,{variant:"ghost",size:"sm",className:t.user_liked?"text-red-500":"text-muted-foreground",onClick:y,children:[o.jsx(At,{className:`h-4 w-4 ${t.user_liked?"fill-current":""}`}),o.jsx("span",{className:"ml-1 text-xs",children:t.likes_count})]})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map(_=>o.jsxs(Ae,{variant:"outline",children:["#",_.slug]},_.id))})]}),o.jsxs(ce,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Categories"}),o.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:i8(t.generated_schema).map(_=>o.jsx(Ae,{variant:"secondary",children:_},_))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Review sections"}),t.is_owner?o.jsxs("div",{className:"mt-3 space-y-3",children:[o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx(Ae,{variant:"secondary",children:Cs}),a.map(_=>o.jsxs(Ae,{variant:"secondary",className:"gap-1",children:[_,o.jsx(O,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4",onClick:()=>w(_),children:o.jsx(zt,{className:"h-3 w-3"})})]},_))]}),b.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(_=>o.jsx(O,{type:"button",size:"sm",variant:"outline",onClick:()=>x(_),children:_},_))}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Me,{value:c,onChange:_=>u(_.target.value),placeholder:"Add custom section",onKeyDown:_=>{_.key==="Enter"&&(_.preventDefault(),x(c))}}),o.jsx(O,{type:"button",variant:"outline",onClick:()=>x(c),children:"Add"})]}),d&&o.jsx("p",{className:"text-sm text-destructive",children:d}),o.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 px-4 py-3",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Include score"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Adds a 1100 score in Overview."})]}),o.jsx(ki,{checked:f,onCheckedChange:m})]}),o.jsx(O,{type:"button",onClick:v,disabled:s.isPending,children:"Save review settings"})]}):o.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:g.map(_=>o.jsx(Ae,{variant:"outline",children:_},_))})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(xe,{to:`/inventory/${t.id}/build`,children:o.jsx(O,{children:"Create Blueprint"})}),o.jsx(xe,{to:"/inventory",children:o.jsx(O,{variant:"outline",children:"Back to Inventory"})})]})]})]})}):o.jsx(se,{children:o.jsx(ce,{className:"py-12 text-center",children:"Inventory not found."})})})]})}function a8({onClick:e,disabled:t,isLoading:r,itemCount:n}){return o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsxs("button",{onClick:e,disabled:t||r,className:Y("relative w-28 h-28 rounded-full transition-all duration-500","bg-gradient-to-br from-primary via-primary/90 to-primary/70","border-2 border-primary/30","flex items-center justify-center","shadow-glow-aqua","group",t&&!r&&"opacity-40 cursor-not-allowed shadow-none",!t&&!r&&"hover:scale-105 hover:shadow-[0_0_60px_hsl(185_55%_50%/0.5)] animate-glow-pulse",r&&"animate-pulse cursor-wait"),children:[!t&&!r&&o.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/20 animate-ping opacity-30"}),o.jsx("div",{className:"relative z-10 flex flex-col items-center gap-1",children:r?o.jsx(di,{className:"h-10 w-10 text-primary-foreground animate-spin"}):o.jsxs(o.Fragment,{children:[o.jsx(y_,{className:"h-10 w-10 text-primary-foreground group-hover:rotate-12 transition-transform duration-300"}),o.jsx("span",{className:"text-xs font-bold text-primary-foreground/90 uppercase tracking-widest",children:"Review"})]})}),!t&&o.jsx("div",{className:"absolute inset-0 rounded-full opacity-50 group-hover:opacity-100 transition-opacity duration-300",children:o.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-primary via-accent to-primary animate-iridescent",style:{padding:"2px"},children:o.jsx("div",{className:"w-full h-full rounded-full bg-primary"})})})]}),o.jsx("p",{className:Y("text-sm font-medium transition-colors",t&&!r?"text-muted-foreground":"text-foreground"),children:r?"Analyzing your blend...":n===0?"Review your Blueprint":`Ready to review ${n} item${n!==1?"s":""}`})]})}function l8({categories:e,selectedItems:t,onToggleItem:r,onAddCustomItem:n}){var x,w;const[s,i]=p.useState(""),[a,l]=p.useState(((x=e[0])==null?void 0:x.name)||""),[c,u]=p.useState(!1),[d,h]=p.useState(""),[f,m]=p.useState(((w=e[0])==null?void 0:w.name)||""),b=p.useMemo(()=>{const v=new Set;return Object.entries(t).forEach(([_,S])=>{S.forEach(j=>v.add(`${_}::${j}`))}),v},[t]),g=()=>{!d.trim()||!f||(n(f,d.trim()),h(""),u(!1))},y=p.useMemo(()=>{const v=e.find(S=>S.name===a);if(!v)return[];if(!s.trim())return v.items;const _=s.toLowerCase();return v.items.filter(S=>S.toLowerCase().includes(_))},[e,a,s]);return e.length===0?o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No categories available in this inventory."}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Ho,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),o.jsx(Me,{placeholder:"Search items...",value:s,onChange:v=>i(v.target.value),className:"pl-9"})]}),o.jsxs(PN,{open:c,onOpenChange:u,children:[o.jsx(bU,{asChild:!0,children:o.jsx(O,{variant:"outline",size:"icon",className:"shrink-0",children:o.jsx(hd,{className:"h-4 w-4"})})}),o.jsxs(av,{children:[o.jsx(lv,{children:o.jsx(cv,{children:"Add Custom Item"})}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{htmlFor:"custom-item-name",children:"Item Name"}),o.jsx(Me,{id:"custom-item-name",value:d,onChange:v=>h(v.target.value),placeholder:"e.g. My Custom Item",onKeyDown:v=>v.key==="Enter"&&g()})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{children:"Category"}),o.jsxs(Ak,{value:f,onValueChange:m,children:[o.jsx(Kg,{children:o.jsx(Ik,{})}),o.jsx(Gg,{children:e.map(v=>o.jsx(Lu,{value:v.name,children:v.name},v.name))})]})]}),o.jsx(O,{onClick:g,className:"w-full",children:"Add Item"})]})]})]})]}),o.jsxs(na,{value:a,onValueChange:l,children:[o.jsx(Ai,{className:"w-full h-auto flex-wrap gap-1 bg-transparent p-0",children:e.map(v=>o.jsx(xr,{value:v.name,className:"text-xs px-2 py-1 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground whitespace-normal",children:v.name},v.name))}),e.map(v=>o.jsx(br,{value:v.name,className:"mt-3",children:o.jsxs("div",{className:"flex flex-wrap gap-2",children:[y.map(_=>{const S=b.has(`${v.name}::${_}`);return o.jsxs(Ae,{variant:S?"default":"outline",className:`cursor-pointer transition-all ${S?"bg-primary hover:bg-primary/90":"hover:bg-accent hover:text-accent-foreground"}`,onClick:()=>r(v.name,_),children:[S&&o.jsx(Ti,{className:"h-3 w-3 mr-1"}),_]},_)}),y.length===0&&o.jsx("p",{className:"text-sm text-muted-foreground",children:"No items found"})]})},v.name))]})]})}function zp(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}function c8(e){const t=e.toLowerCase();return t.includes("strength")?"+":t.includes("gap")||t.includes("risk")?"!":t.includes("suggest")?">":"-"}function u8(e){if(!e)return[];const t=[];let r=null;const n=e.split(`
`);for(const s of n){if(s.startsWith("### ")||s.startsWith("## ")){const l=s.replace(/^#+\s*/,"").trim();if(!l)continue;r={title:l,key:zp(l),bullets:[],text:""},t.push(r);continue}const i=s.trim();if(!i)continue;r||(r={title:"Overview",key:"overview",bullets:[],text:""},t.push(r));const a=i.replace(/^\*\*|\*\*$/g,"").replace(/^\*|\*$/g,"").replace(/^[-*+]\s+/,"");i.startsWith("- ")||i.startsWith("* ")||i.startsWith("+ ")?r.bullets.push(a):r.text+=(r.text?" ":"")+a}return t}function d8(e,t){if(!t||t.length===0)return e.length>0?e:[{title:"Overview",key:"overview",bullets:[],text:""}];const r=new Map(e.map(i=>[zp(i.title),i])),n=t.map(i=>{const a=zp(i);return r.get(a)||{title:i,key:a,bullets:[],text:""}}),s=e.filter(i=>!n.some(a=>a.key===i.key));return n.concat(s)}function h8(e){const t=/score\s*:\s*(\d{1,3})\s*\/\s*100/i;let r=null;const n=e.text.match(t);n&&(r=parseInt(n[1],10));const s=e.bullets.filter(a=>{const l=a.match(t);return l&&r===null&&(r=parseInt(l[1],10)),!l}),i=e.text.replace(t,"").replace(/\s{2,}/g," ").trim();return{score:r,text:i,bullets:s}}function qp({review:e,isStreaming:t,sectionOrder:r}){var i;const n=u8(e),s=d8(n,r);return o.jsx(se,{className:"bg-card/80 backdrop-blur-glass border-border/50 overflow-hidden",children:o.jsxs(ce,{className:"p-0",children:[o.jsxs(na,{defaultValue:((i=s[0])==null?void 0:i.key)||"overview",className:"w-full",children:[o.jsx(Ai,{className:"w-full justify-start rounded-none border-b border-border/50 bg-muted/30 px-4 pt-4",children:s.map(a=>o.jsx(xr,{value:a.key,className:"data-[state=active]:bg-background",children:a.title.toUpperCase()},a.key))}),o.jsx("div",{className:"p-6",children:s.map(a=>{const l=a.key==="overview"||a.title.toLowerCase().includes("overview"),{score:c,text:u,bullets:d}=l?h8(a):{score:null,text:a.text,bullets:a.bullets},h=c!==null&&c>=80?"text-green-500":c!==null&&c>=60?"text-amber-500":"text-red-500";return o.jsxs(br,{value:a.key,className:"mt-0 space-y-4",children:[o.jsx("h3",{className:"text-2xl font-bold tracking-tight",children:a.title}),l&&c!==null&&o.jsxs("div",{className:"text-center py-4",children:[o.jsx("p",{className:"text-xs uppercase tracking-wider text-muted-foreground mb-2",children:"Blueprint score"}),o.jsxs("p",{className:Y("text-6xl font-black",h),children:[c,o.jsx("span",{className:"text-2xl text-muted-foreground",children:"/100"})]})]}),u?o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:u}):null,d.length>0?o.jsx("ul",{className:"space-y-3",children:d.map((f,m)=>o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary font-bold",children:c8(a.title)}),o.jsx("span",{children:f})]},m))}):null,!u&&d.length===0&&o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:t?"Generating...":"No details yet."})]},a.key)})})]}),t&&o.jsx("div",{className:"px-6 pb-4",children:o.jsx("div",{className:"h-1 w-full bg-muted rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-primary animate-pulse",style:{width:"60%"}})})})]})})}const gx=["Analyzing your blueprint...","Checking synergies...","Reviewing dosages...","Checking interactions...","Finding harmony...","Almost ready..."];function LN({className:e}){const[t,r]=p.useState(0),[n,s]=p.useState("pour");return p.useEffect(()=>{const i=setInterval(()=>{r(l=>(l+1)%gx.length)},2e3),a=setInterval(()=>{s(l=>l==="pour"?"shake":l==="shake"?"serve":"pour")},3e3);return()=>{clearInterval(i),clearInterval(a)}},[]),o.jsxs("div",{className:Y("flex flex-col items-center justify-center py-16 relative overflow-hidden",e),children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/5 via-transparent to-accent/10"}),o.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[...Array(8)].map((i,a)=>o.jsx("div",{className:"absolute rounded-full bg-primary/20 blur-sm animate-float",style:{width:`${4+Math.random()*8}px`,height:`${4+Math.random()*8}px`,left:`${10+Math.random()*80}%`,top:`${10+Math.random()*80}%`,animationDelay:`${a*.5}s`,animationDuration:`${4+Math.random()*4}s`}},a))}),o.jsxs("div",{className:"relative w-48 h-48 mb-8",children:[o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:Y("w-32 h-32 rounded-full blur-2xl transition-all duration-1000",n==="pour"&&"bg-primary/20",n==="shake"&&"bg-primary/30 scale-110",n==="serve"&&"bg-accent/25 scale-105")})}),o.jsx("div",{className:Y("absolute inset-0 flex items-center justify-center transition-all duration-500",n==="shake"&&"animate-[shake_0.3s_ease-in-out_infinite]"),children:o.jsxs("svg",{viewBox:"0 0 100 120",className:"w-36 h-36 drop-shadow-lg",children:[o.jsxs("defs",{children:[o.jsxs("linearGradient",{id:"chromeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[o.jsx("stop",{offset:"0%",stopColor:"hsl(200, 15%, 70%)"}),o.jsx("stop",{offset:"30%",stopColor:"hsl(195, 20%, 85%)"}),o.jsx("stop",{offset:"50%",stopColor:"hsl(195, 25%, 92%)"}),o.jsx("stop",{offset:"70%",stopColor:"hsl(195, 20%, 85%)"}),o.jsx("stop",{offset:"100%",stopColor:"hsl(200, 15%, 70%)"})]}),o.jsxs("linearGradient",{id:"liquidGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"hsl(185, 60%, 65%)",stopOpacity:"0.8"}),o.jsx("stop",{offset:"50%",stopColor:"hsl(185, 55%, 50%)",stopOpacity:"0.9"}),o.jsx("stop",{offset:"100%",stopColor:"hsl(190, 50%, 45%)",stopOpacity:"1"})]}),o.jsx("filter",{id:"frosted",children:o.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0.5"})})]}),o.jsx("path",{d:"M30 15 L70 15 L65 30 L35 30 Z",fill:"url(#chromeGradient)"}),o.jsx("ellipse",{cx:"50",cy:"15",rx:"20",ry:"5",fill:"url(#chromeGradient)"}),o.jsx("ellipse",{cx:"50",cy:"15",rx:"20",ry:"5",fill:"white",fillOpacity:"0.3"}),o.jsx("path",{d:"M35 30 L30 100 L70 100 L65 30 Z",fill:"url(#chromeGradient)"}),o.jsx("path",{d:"M35 30 L30 100 L40 100 L45 30 Z",fill:"white",fillOpacity:"0.15"}),o.jsx("path",{d:n==="pour"?"M36 85 L69 85 L68 95 L33 95 Z":n==="shake"?"M34 45 L66 50 L68 95 L33 95 Z":"M35 55 L65 55 L68 95 L33 95 Z",fill:"url(#liquidGradient)",className:"transition-all duration-700 ease-out"}),o.jsx("ellipse",{cx:"50",cy:n==="pour"?85:n==="shake"?47:55,rx:"16",ry:"3",fill:"white",fillOpacity:"0.3",className:"transition-all duration-700"}),n==="shake"&&o.jsxs(o.Fragment,{children:[o.jsx("circle",{cx:"42",cy:"60",r:"3",fill:"white",fillOpacity:"0.5",className:"animate-ping"}),o.jsx("circle",{cx:"55",cy:"68",r:"2",fill:"white",fillOpacity:"0.4",className:"animate-ping",style:{animationDelay:"0.2s"}}),o.jsx("circle",{cx:"48",cy:"78",r:"2.5",fill:"white",fillOpacity:"0.45",className:"animate-ping",style:{animationDelay:"0.4s"}}),o.jsx("circle",{cx:"58",cy:"85",r:"2",fill:"white",fillOpacity:"0.35",className:"animate-ping",style:{animationDelay:"0.6s"}})]}),o.jsx("path",{d:"M65 30 L70 100",stroke:"white",strokeWidth:"1",strokeOpacity:"0.3"})]})}),n==="pour"&&o.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(6)].map((i,a)=>o.jsx("div",{className:"absolute rounded-full bg-gradient-to-b from-primary/70 to-primary/40 backdrop-blur-sm animate-[fall_1.2s_ease-in_infinite]",style:{width:`${6+Math.random()*6}px`,height:`${8+Math.random()*8}px`,left:`${35+Math.random()*30}%`,animationDelay:`${a*.2}s`,borderRadius:"50% 50% 50% 50% / 60% 60% 40% 40%"}},a))}),n==="serve"&&o.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(8)].map((i,a)=>o.jsx("div",{className:"absolute w-1 h-1 rounded-full bg-primary shadow-glow-aqua animate-pulse-soft",style:{left:`${15+Math.random()*70}%`,top:`${15+Math.random()*50}%`,animationDelay:`${a*.2}s`,boxShadow:"0 0 8px hsl(185, 55%, 50%)"}},a))}),o.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-2",children:[...Array(3)].map((i,a)=>o.jsx("div",{className:Y("w-4 h-4 rounded bg-gradient-to-br from-white/70 to-secondary/50 border border-white/30 backdrop-blur-sm shadow-sm",n==="shake"&&"animate-bounce"),style:{animationDelay:`${a*.1}s`,transform:`rotate(${a*15-15}deg)`}},a))})]}),o.jsxs("div",{className:"text-center space-y-3 relative z-10",children:[o.jsx("p",{className:"text-lg font-medium text-foreground animate-pulse-soft tracking-wide",children:gx[t]}),o.jsx("div",{className:"flex items-center justify-center gap-2",children:[...Array(3)].map((i,a)=>o.jsx("div",{className:"w-2 h-2 rounded-full bg-primary/70 animate-bounce shadow-glow-aqua",style:{animationDelay:`${a*.15}s`}},a))})]}),o.jsx("style",{children:`
        @keyframes fall {
          0% { transform: translateY(-20px) scale(0.8); opacity: 0; }
          10% { opacity: 1; }
          90% { opacity: 0.6; }
          100% { transform: translateY(120px) scale(1); opacity: 0; }
        }
        @keyframes shake {
          0%, 100% { transform: translateX(0) rotate(0deg); }
          25% { transform: translateX(-4px) rotate(-2deg); }
          75% { transform: translateX(4px) rotate(2deg); }
        }
      `})]})}const vx=[{number:1,label:"Select items"},{number:2,label:"Review with AI"},{number:3,label:"Publish"}];function f8({currentStep:e}){return o.jsx("div",{className:"flex items-center justify-center gap-2 sm:gap-4 py-4",children:vx.map((t,r)=>{const n=e>t.number,s=e===t.number;return o.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:Y("h-8 w-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors",n?"bg-primary text-primary-foreground":s?"bg-primary/20 text-primary border-2 border-primary":"bg-muted text-muted-foreground"),children:n?o.jsx(Ti,{className:"h-4 w-4"}):t.number}),o.jsx("span",{className:Y("text-sm font-medium hidden sm:inline",s?"text-foreground":"text-muted-foreground"),children:t.label})]}),r<vx.length-1&&o.jsx("div",{className:Y("h-0.5 w-8 sm:w-12",e>t.number?"bg-primary":"bg-muted")})]},t.number)})})}var Zr="Accordion",p8=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[vv,m8,g8]=Ml(Zr),[Ud,m6]=Mt(Zr,[g8,Tj]),yv=Tj(),$N=z.forwardRef((e,t)=>{const{type:r,...n}=e,s=n,i=n;return o.jsx(vv.Provider,{scope:e.__scopeAccordion,children:r==="multiple"?o.jsx(x8,{...i,ref:t}):o.jsx(w8,{...s,ref:t})})});$N.displayName=Zr;var[FN,v8]=Ud(Zr),[UN,y8]=Ud(Zr,{collapsible:!1}),w8=z.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:s=()=>{},collapsible:i=!1,...a}=e,[l,c]=Cr({prop:r,defaultProp:n??"",onChange:s,caller:Zr});return o.jsx(FN,{scope:e.__scopeAccordion,value:z.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:z.useCallback(()=>i&&c(""),[i,c]),children:o.jsx(UN,{scope:e.__scopeAccordion,collapsible:i,children:o.jsx(BN,{...a,ref:t})})})}),x8=z.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:s=()=>{},...i}=e,[a,l]=Cr({prop:r,defaultProp:n??[],onChange:s,caller:Zr}),c=z.useCallback(d=>l((h=[])=>[...h,d]),[l]),u=z.useCallback(d=>l((h=[])=>h.filter(f=>f!==d)),[l]);return o.jsx(FN,{scope:e.__scopeAccordion,value:a,onItemOpen:c,onItemClose:u,children:o.jsx(UN,{scope:e.__scopeAccordion,collapsible:!0,children:o.jsx(BN,{...i,ref:t})})})}),[b8,Bd]=Ud(Zr),BN=z.forwardRef((e,t)=>{const{__scopeAccordion:r,disabled:n,dir:s,orientation:i="vertical",...a}=e,l=z.useRef(null),c=je(l,t),u=m8(r),h=ra(s)==="ltr",f=H(e.onKeyDown,m=>{var C;if(!p8.includes(m.key))return;const b=m.target,g=u().filter(T=>{var A;return!((A=T.ref.current)!=null&&A.disabled)}),y=g.findIndex(T=>T.ref.current===b),x=g.length;if(y===-1)return;m.preventDefault();let w=y;const v=0,_=x-1,S=()=>{w=y+1,w>_&&(w=v)},j=()=>{w=y-1,w<v&&(w=_)};switch(m.key){case"Home":w=v;break;case"End":w=_;break;case"ArrowRight":i==="horizontal"&&(h?S():j());break;case"ArrowDown":i==="vertical"&&S();break;case"ArrowLeft":i==="horizontal"&&(h?j():S());break;case"ArrowUp":i==="vertical"&&j();break}const k=w%x;(C=g[k].ref.current)==null||C.focus()});return o.jsx(b8,{scope:r,disabled:n,direction:s,orientation:i,children:o.jsx(vv.Slot,{scope:r,children:o.jsx(le.div,{...a,"data-orientation":i,ref:c,onKeyDown:n?void 0:f})})})}),zu="AccordionItem",[_8,wv]=Ud(zu),zN=z.forwardRef((e,t)=>{const{__scopeAccordion:r,value:n,...s}=e,i=Bd(zu,r),a=v8(zu,r),l=yv(r),c=Sr(),u=n&&a.value.includes(n)||!1,d=i.disabled||e.disabled;return o.jsx(_8,{scope:r,open:u,disabled:d,triggerId:c,children:o.jsx(Aj,{"data-orientation":i.orientation,"data-state":GN(u),...l,...s,ref:t,disabled:d,open:u,onOpenChange:h=>{h?a.onItemOpen(n):a.onItemClose(n)}})})});zN.displayName=zu;var qN="AccordionHeader",WN=z.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,s=Bd(Zr,r),i=wv(qN,r);return o.jsx(le.h3,{"data-orientation":s.orientation,"data-state":GN(i.open),"data-disabled":i.disabled?"":void 0,...n,ref:t})});WN.displayName=qN;var Wp="AccordionTrigger",VN=z.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,s=Bd(Zr,r),i=wv(Wp,r),a=y8(Wp,r),l=yv(r);return o.jsx(vv.ItemSlot,{scope:r,children:o.jsx(p5,{"aria-disabled":i.open&&!a.collapsible||void 0,"data-orientation":s.orientation,id:i.triggerId,...l,...n,ref:t})})});VN.displayName=Wp;var HN="AccordionContent",KN=z.forwardRef((e,t)=>{const{__scopeAccordion:r,...n}=e,s=Bd(Zr,r),i=wv(HN,r),a=yv(r);return o.jsx(m5,{role:"region","aria-labelledby":i.triggerId,"data-orientation":s.orientation,...a,...n,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});KN.displayName=HN;function GN(e){return e?"open":"closed"}var S8=$N,j8=zN,k8=WN,YN=VN,QN=KN;const N8=S8,JN=p.forwardRef(({className:e,...t},r)=>o.jsx(j8,{ref:r,className:Y("border-b",e),...t}));JN.displayName="AccordionItem";const XN=p.forwardRef(({className:e,children:t,...r},n)=>o.jsx(k8,{className:"flex",children:o.jsxs(YN,{ref:n,className:Y("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...r,children:[t,o.jsx(Vo,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));XN.displayName=YN.displayName;const ZN=p.forwardRef(({className:e,children:t,...r},n)=>o.jsx(QN,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:o.jsx("div",{className:Y("pb-4 pt-0",e),children:t})}));ZN.displayName=QN.displayName;function C8({steps:e,activeStepId:t,onSetActive:r,onUpdateStep:n,onRemoveStep:s,onAddStep:i,onReorderSteps:a,onRemoveItem:l,onUpdateItemContext:c,itemContexts:u}){const[d,h]=p.useState(null),[f,m]=p.useState(""),[b,g]=p.useState(null),y=p.useCallback(C=>{const[T,A]=C.split("::");return!T||!A?null:{key:C,category:T,item:A}},[]),x=p.useCallback(C=>{h(C.id),m(C.title)},[]),w=p.useCallback(C=>{n(C,{title:f.trim()}),h(null),m("")},[n,f]),v=p.useCallback(()=>{h(null),m("")},[]),_=p.useCallback(C=>{g(C)},[]),S=p.useCallback(C=>{C.preventDefault()},[]),j=p.useCallback(C=>{b!==null&&b!==C&&a(b,C),g(null)},[b,a]),k=p.useCallback(()=>{g(null)},[]);return o.jsxs("div",{className:"space-y-3",children:[o.jsxs(O,{type:"button",variant:"outline",onClick:i,className:"w-full gap-2 border-dashed","data-help-id":"add-step",children:[o.jsx(hd,{className:"h-4 w-4"}),"Add Step"]}),e.length===0?o.jsx("div",{className:"rounded-xl border border-dashed border-border/60 p-6 text-center",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"No steps yet. Select items from the inventory above  they'll appear in your first step automatically."})}):o.jsx(N8,{type:"single",collapsible:!0,value:t||void 0,onValueChange:C=>C&&r(C),className:"space-y-2","data-help-id":"steps",children:e.map((C,T)=>{const A=C.title.trim()||`Step ${T+1}`,$=C.itemKeys.map(y).filter(I=>I!==null),D=t===C.id,X=d===C.id;return o.jsxs(JN,{value:C.id,className:Y("rounded-xl border transition-all duration-200",D?"border-primary/40 bg-card shadow-sm":"border-border/40 bg-muted/30 hover:bg-muted/50"),draggable:!0,onDragStart:()=>_(T),onDragOver:S,onDrop:()=>j(T),onDragEnd:k,children:[o.jsx(XN,{className:"px-4 py-3 hover:no-underline [&>svg]:hidden",children:o.jsxs("div",{className:"flex w-full items-center gap-3",children:[o.jsx(P2,{className:"h-4 w-4 text-muted-foreground cursor-grab shrink-0"}),X?o.jsxs("div",{className:"flex items-center gap-2 flex-1",onClick:I=>I.stopPropagation(),children:[o.jsx(Me,{value:f,onChange:I=>m(I.target.value),placeholder:`Step ${T+1}`,className:"h-8 flex-1",autoFocus:!0,onKeyDown:I=>{I.key==="Enter"?(I.preventDefault(),w(C.id)):I.key==="Escape"&&v()}}),o.jsx(O,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:I=>{I.stopPropagation(),w(C.id)},children:o.jsx(Ti,{className:"h-4 w-4"})}),o.jsx(O,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:I=>{I.stopPropagation(),v()},children:o.jsx(zt,{className:"h-4 w-4"})})]}):o.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[o.jsx("span",{className:"font-medium truncate",children:A}),o.jsx(O,{type:"button",variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0",onClick:I=>{I.stopPropagation(),x(C)},children:o.jsx(w_,{className:"h-3 w-3"})})]}),o.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[o.jsxs(Ae,{variant:"secondary",className:"text-xs",children:[$.length," ",$.length===1?"item":"items"]}),D&&o.jsxs(Ae,{variant:"outline",className:"gap-1 text-xs border-primary/40 text-primary",children:[o.jsx(W2,{className:"h-3 w-3"}),"Active"]}),o.jsx(O,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7",onClick:I=>{I.stopPropagation(),s(C.id)},children:o.jsx(Yf,{className:"h-4 w-4 text-destructive"})})]})]})}),o.jsx(ZN,{className:"px-4 pb-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"space-y-1.5",children:o.jsx(tr,{value:C.description,onChange:I=>n(C.id,{description:I.target.value}),placeholder:"Add step notes or instructions...",rows:2,className:"resize-none"})}),D&&$.length===0&&o.jsx("div",{className:"rounded-lg bg-primary/5 border border-primary/20 p-3 text-center","data-help-id":"active-step",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"Items you select will be added here automatically"})}),$.length>0&&o.jsx("div",{className:"space-y-2",children:$.map(I=>o.jsxs("div",{className:"rounded-lg border border-border/40 bg-background/50 p-3 space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:I.item}),o.jsx("p",{className:"text-xs text-muted-foreground",children:I.category})]}),o.jsx(O,{type:"button",variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:()=>l(I.category,I.item),children:o.jsx(Yf,{className:"h-4 w-4 text-destructive"})})]}),o.jsx(Me,{value:u[I.key]||"",onChange:ae=>c(I.category,I.item,ae.target.value),placeholder:"Add context (e.g., 0.5 mg, morning, with food...)",className:"h-8 text-sm","data-help-id":"context"})]},I.key))})]})})]},C.id)})})]})}const E8=[{id:"picker",text:"Browse and select items by category"},{id:"steps",text:"Organize your items into ordered steps"},{id:"active-step",text:"Selected items appear here"},{id:"add-step",text:"Create a new step in your routine"},{id:"context",text:'Add notes like "2 drops" or "morning"'},{id:"mix",text:"Generate AI analysis of your blueprint"}];function T8({isOpen:e,onClose:t,onStartTour:r}){const[n,s]=p.useState([]),i=p.useCallback(()=>{const a=[];E8.forEach(({id:l,text:c})=>{const u=document.querySelector(`[data-help-id="${l}"]`);if(!u)return;const d=u.getBoundingClientRect(),h=window.innerWidth,f=window.innerHeight;let m="right",b=d.right+12,g=d.top+d.height/2;d.right+200>h&&(d.left>200?(m="left",b=d.left-12):(m="bottom",b=d.left+d.width/2,g=d.bottom+12)),(m==="left"||m==="right")&&(g<50&&(g=50),g>f-50&&(g=f-50)),a.push({id:l,text:c,x:b,y:g,side:m})}),s(a)},[]);return p.useEffect(()=>{if(e){const a=setTimeout(i,100);return()=>clearTimeout(a)}},[e,i]),p.useEffect(()=>{if(!e)return;const a=l=>{l.key==="Escape"&&t()};return window.addEventListener("keydown",a),window.addEventListener("resize",i),()=>{window.removeEventListener("keydown",a),window.removeEventListener("resize",i)}},[e,t,i]),e?Jr.createPortal(o.jsxs("div",{className:"fixed inset-0 z-50",children:[o.jsx("div",{className:"absolute inset-0 bg-background/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:t}),n.map(a=>o.jsxs("div",{className:Y("fixed z-50 max-w-[200px] rounded-lg bg-foreground text-background px-3 py-2 text-sm shadow-lg animate-in fade-in zoom-in-95 duration-200",a.side==="left"&&"-translate-x-full",a.side==="top"&&"-translate-y-full -translate-x-1/2",a.side==="bottom"&&"-translate-x-1/2",(a.side==="left"||a.side==="right")&&"-translate-y-1/2"),style:{left:a.x,top:a.y},children:[a.text,o.jsx("div",{className:Y("absolute w-2 h-2 bg-foreground rotate-45",a.side==="right"&&"-left-1 top-1/2 -translate-y-1/2",a.side==="left"&&"-right-1 top-1/2 -translate-y-1/2",a.side==="bottom"&&"-top-1 left-1/2 -translate-x-1/2",a.side==="top"&&"-bottom-1 left-1/2 -translate-x-1/2")})]},a.id)),o.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 bg-card border border-border rounded-2xl shadow-lg p-4 animate-in slide-in-from-bottom-4 duration-300",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(cd,{className:"h-4 w-4"}),o.jsx("span",{children:"Hover over highlighted elements"})]}),o.jsx("div",{className:"h-4 w-px bg-border"}),o.jsxs(O,{variant:"ghost",size:"sm",onClick:()=>{t(),r()},className:"gap-2",children:[o.jsx(Rs,{className:"h-4 w-4"}),"Take a tour"]}),o.jsx(O,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8",children:o.jsx(zt,{className:"h-4 w-4"})})]})})]}),document.body):null}function R8({onClick:e}){return o.jsx(O,{type:"button",variant:"outline",size:"icon",onClick:e,className:"h-9 w-9 rounded-full border-dashed","aria-label":"Show help",children:o.jsx(cd,{className:"h-4 w-4"})})}const kl="blueprint_build_tour_completed",_a=[{targetId:"picker",title:"Browse Your Inventory",description:"Click on categories to explore items. Select the ones you want to include in your blueprint."},{targetId:"add-step",title:"Organize Into Steps",description:"Create steps to organize your routine. Items you select flow into the active step."},{targetId:"steps",title:"Manage Your Steps",description:"Click a step to make it active. Add context like dosage or timing to each item."},{targetId:"mix",title:"Generate AI Analysis",description:"When you're ready, hit Mix to get an AI-powered review of your blueprint!"}];function P8({isActive:e,onComplete:t,onSkip:r}){const[n,s]=p.useState(0),[i,a]=p.useState(null),l=_a[n],c=p.useCallback(()=>{if(!l)return;const f=document.querySelector(`[data-help-id="${l.targetId}"]`);a(f?f.getBoundingClientRect():null)},[l]);p.useEffect(()=>{if(e)return c(),window.addEventListener("resize",c),window.addEventListener("scroll",c),()=>{window.removeEventListener("resize",c),window.removeEventListener("scroll",c)}},[e,c,n]),p.useEffect(()=>{if(!e)return;const f=m=>{m.key==="Escape"?r():(m.key==="ArrowRight"||m.key==="Enter")&&u()};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[e,n,r]);const u=p.useCallback(()=>{n<_a.length-1?s(f=>f+1):(localStorage.setItem(kl,"true"),t())},[n,t]),d=p.useCallback(()=>{localStorage.setItem(kl,"true"),r()},[r]);if(!e||!l)return null;const h=(()=>{if(!i)return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};const f=window.innerHeight,m=window.innerWidth,b=320,g=180,y=16;let x=i.bottom+y,w=i.left+i.width/2-b/2;return x+g>f-20&&(x=i.top-g-y),w<20&&(w=20),w+b>m-20&&(w=m-b-20),{top:`${x}px`,left:`${w}px`}})();return Jr.createPortal(o.jsxs("div",{className:"fixed inset-0 z-50",children:[o.jsx("div",{className:"absolute inset-0",children:o.jsxs("svg",{className:"w-full h-full",children:[o.jsx("defs",{children:o.jsxs("mask",{id:"spotlight-mask",children:[o.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),i&&o.jsx("rect",{x:i.left-8,y:i.top-8,width:i.width+16,height:i.height+16,rx:"12",fill:"black"})]})}),o.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"hsl(var(--background) / 0.8)",mask:"url(#spotlight-mask)",className:"animate-in fade-in duration-300"})]})}),i&&o.jsx("div",{className:"absolute rounded-xl border-2 border-primary shadow-glow-aqua pointer-events-none animate-pulse",style:{left:i.left-8,top:i.top-8,width:i.width+16,height:i.height+16}}),o.jsx(se,{className:"fixed w-80 bg-card border-border shadow-lg animate-in slide-in-from-bottom-2 duration-300 z-10",style:h,children:o.jsxs(ce,{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("h3",{className:"font-semibold",children:l.title}),o.jsx("p",{className:"text-sm text-muted-foreground",children:l.description})]}),o.jsx(O,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:d,children:o.jsx(zt,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"flex gap-1.5",children:_a.map((f,m)=>o.jsx("div",{className:Y("h-1.5 w-1.5 rounded-full transition-colors",m===n?"bg-primary":"bg-muted-foreground/30")},m))}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(O,{variant:"ghost",size:"sm",onClick:d,children:"Skip"}),o.jsxs(O,{size:"sm",onClick:u,className:"gap-1",children:[n===_a.length-1?"Done":"Next",n<_a.length-1&&o.jsx(Hm,{className:"h-4 w-4"})]})]})]})]})})]}),document.body)}function A8({onStartTour:e,onDismiss:t}){const[r,n]=p.useState(()=>localStorage.getItem(kl)==="true");return r?null:o.jsxs("div",{className:"rounded-xl border border-primary/30 bg-primary/5 p-4 flex items-center justify-between gap-4 animate-in fade-in slide-in-from-top-2 duration-300",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:o.jsx(Rs,{className:"h-5 w-5 text-primary"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"New here?"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Take a quick tour to learn how to build blueprints."})]})]}),o.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[o.jsx(O,{variant:"ghost",size:"sm",onClick:()=>{n(!0),localStorage.setItem(kl,"true"),t()},children:"Maybe later"}),o.jsxs(O,{size:"sm",onClick:e,className:"gap-2",children:[o.jsx(Rs,{className:"h-4 w-4"}),"Take Tour"]})]})]})}function I8(){return localStorage.getItem(kl)==="true"}function O8({onClick:e}){return o.jsx(O,{type:"button",variant:"ghost",size:"icon",onClick:e,className:"h-9 w-9 rounded-full","aria-label":"Take a tour",title:"Take a tour",children:o.jsx(Rs,{className:"h-4 w-4"})})}const M8=!1,D8="https://piszvseyaefxekubphhf.supabase.co/functions/v1/analyze-blueprint";function L8(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=e.categories;return Array.isArray(t)?t.map(r=>({name:typeof r.name=="string"?r.name:"Untitled",items:Array.isArray(r.items)?r.items.filter(n=>typeof n=="string"):[]})).filter(r=>r.name.trim().length>0):[]}function yx(){const{inventoryId:e,blueprintId:t}=ea(),r=Fs(),{toast:n}=Vt(),{session:s,user:i}=Ee(),a=!!t,{data:l,isLoading:c}=Qg(t),u=e||(l==null?void 0:l.inventory_id)||void 0,{data:d,isLoading:h}=dv(u),{data:f}=uv(),{recentTags:m,addRecentTags:b}=fv(),g=$k(),y=xF(),[x,w]=p.useState(""),[v,_]=p.useState({}),[S,j]=p.useState({}),[k,C]=p.useState(""),[T,A]=p.useState(""),[$,D]=p.useState(""),[X,I]=p.useState([]),[ae,M]=p.useState(!0),[Z,P]=p.useState(!1),[E,B]=p.useState([]),[ie,Q]=p.useState(""),[me,U]=p.useState(""),[de,ge]=p.useState(!0),[L,ue]=p.useState([]),[_e,V]=p.useState(null),[te,re]=p.useState(!1),[Ne,Se]=p.useState(!1),[ot,Ie]=p.useState(!1),[yt,en]=p.useState(()=>!I8()),[rr,ia]=p.useState([]),Bn=!!(a&&l&&i&&l.creator_user_id===i.id),Wl=h||a&&c,tn=p.useCallback(F=>{const K={},q={};return!F||typeof F!="object"||Array.isArray(F)?{items:K,contexts:q}:(Object.entries(F).forEach(([G,J])=>{if(!Array.isArray(J))return;const fe=[];J.forEach(ne=>{if(typeof ne=="string"){fe.push(ne);return}if(!ne||typeof ne!="object")return;const ke=typeof ne.name=="string"?ne.name:"";ke&&(fe.push(ke),typeof ne.context=="string"&&ne.context.trim()&&(q[`${G}::${ke}`]=ne.context.trim()))}),fe.length>0&&(K[G]=fe)}),{items:K,contexts:q})},[]),Vl=p.useCallback(F=>!F||typeof F!="object"||!Array.isArray(F)?[]:F.filter(K=>K&&typeof K=="object").map((K,q)=>{const G=K,J=(G.items||[]).map(fe=>{const ne=typeof fe.category=="string"?fe.category:"",ke=typeof fe.name=="string"?fe.name:"";return!ne||!ke?null:`${ne}::${ke}`}).filter(fe=>!!fe);return{id:G.id||`step-${q}`,title:G.title||"",description:typeof G.description=="string"?G.description:"",itemKeys:J}}),[]),Hl=p.useCallback(F=>{const K={},q={};return!F||typeof F!="object"||!Array.isArray(F)?{items:K,contexts:q}:(F.forEach(G=>{(G.items||[]).forEach(fe=>{const ne=typeof fe.category=="string"?fe.category:"",ke=typeof fe.name=="string"?fe.name:"";!ne||!ke||(K[ne]||(K[ne]=[]),K[ne].includes(ke)||K[ne].push(ke),typeof fe.context=="string"&&fe.context.trim()&&(q[`${ne}::${ke}`]=fe.context.trim()))})}),{items:K,contexts:q})},[]);p.useEffect(()=>{var F;if(!(!d||te)&&!(a&&!l)){if(ia(L8(d.generated_schema)),B(mv(d.review_sections).slice(0,Wa)),ge(d.include_score??!0),a&&l){const K=tn(l.selected_items),q=Hl(l.steps),G={...K.items};Object.entries(q.items).forEach(([ne,ke])=>{const ze=new Set(G[ne]||[]);ke.forEach(Qe=>ze.add(Qe)),G[ne]=Array.from(ze)});const J={...K.contexts,...q.contexts};w(l.title||d.title),_(G),j(J),C(l.mix_notes||""),A(l.review_prompt||""),D(l.llm_review||""),I(l.tags.map(ne=>ne.slug)),M(l.is_public);const fe=Vl(l.steps);ue(fe),V(((F=fe[0])==null?void 0:F.id)||null)}else w(d.title),ue([]),V(null);re(!0)}},[d,l,a,te,tn,Vl,Hl]);const at=p.useMemo(()=>Object.values(v).reduce((F,K)=>F+K.length,0),[v]),Tr=p.useMemo(()=>gv(E),[E]),oa=(a?l==null?void 0:l.title:d==null?void 0:d.title)||(a?"EDIT":"BUILD"),Rr=p.useCallback((F,K)=>`${F}::${K}`,[]),yn=p.useCallback(F=>{ue(K=>K.map(q=>({...q,itemKeys:q.itemKeys.filter(G=>G!==F)})))},[]),Ii=p.useCallback(F=>{ue(K=>{var G;if(K.length===0){const J=crypto.randomUUID();return V(J),[{id:J,title:"",description:"",itemKeys:[F]}]}const q=((G=K.find(J=>J.id===_e))==null?void 0:G.id)||K[K.length-1].id;return K.map(J=>J.id!==q||J.itemKeys.includes(F)?J:{...J,itemKeys:[...J.itemKeys,F]})})},[_e]),Kl=p.useCallback((F,K)=>{const q=Rr(F,K);_(G=>{const J=new Set(G[F]||[]),fe=J.has(K);return fe?J.delete(K):J.add(K),fe?yn(q):Ii(q),{...G,[F]:Array.from(J)}})},[Ii,Rr,yn]),aa=p.useCallback((F,K)=>{ia(q=>q.map(G=>G.name===F?{...G,items:G.items.includes(K)?G.items:[...G.items,K]}:G)),_(q=>({...q,[F]:[...q[F]||[],K]})),Ii(Rr(F,K))},[Ii,Rr]),zn=p.useCallback((F,K)=>{const q=Rr(F,K);_(G=>({...G,[F]:(G[F]||[]).filter(J=>J!==K)})),j(G=>{const J={...G};return delete J[q],J}),yn(q)},[Rr,yn]),Gl=p.useCallback((F,K,q)=>{j(G=>({...G,[`${F}::${K}`]:q}))},[]),qn=p.useCallback(()=>{_({}),j({}),ue(F=>F.map(K=>({...K,itemKeys:[]})))},[]),zd=p.useCallback(()=>{const F={id:crypto.randomUUID(),title:"",description:"",itemKeys:[]};ue(K=>[...K,F]),V(F.id)},[]),qd=p.useCallback((F,K)=>{ue(q=>q.map(G=>G.id===F?{...G,...K}:G))},[]),Yl=p.useCallback(F=>{ue(K=>{const q=K.find(fe=>fe.id===F);if(!q)return K;const G=new Set(q.itemKeys);G.size>0&&(_(fe=>{const ne={};return Object.entries(fe).forEach(([ke,ze])=>{const Qe=ze.filter(pr=>!G.has(Rr(ke,pr)));Qe.length>0&&(ne[ke]=Qe)}),ne}),j(fe=>{const ne={...fe};return G.forEach(ke=>{delete ne[ke]}),ne}));const J=K.filter(fe=>fe.id!==F);return _e===F&&J.length>0?V(J[J.length-1].id):J.length===0&&V(null),J})},[_e,Rr]),Ql=p.useCallback((F,K)=>{ue(q=>{if(F===K)return q;const G=[...q],[J]=G.splice(F,1);return G.splice(K,0,J),G})},[]),Wd=p.useCallback(async()=>{var K,q,G;if(!d)return;if(at===0){n({title:"No items selected",description:"Select at least one item before generating the review.",variant:"destructive"});return}const F={};Object.entries(v).forEach(([J,fe])=>{fe.length>0&&(F[J]=fe.map(ne=>({name:ne,context:S[`${J}::${ne}`]||void 0})))}),P(!0),D("");try{const J=await fetch(D8,{method:"POST",headers:{"Content-Type":"application/json",Authorization:M8&&(s!=null&&s.access_token)?`Bearer ${s.access_token}`:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBpc3p2c2V5YWVmeGVrdWJwaGhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwODE3NTEsImV4cCI6MjA4NDY1Nzc1MX0.odmCphs9gpipbjF7zp639J0r8s48SYHnpNsjQvfICSc"},body:JSON.stringify({title:x.trim()||d.title,inventoryTitle:d.title,selectedItems:F,mixNotes:k.trim(),reviewPrompt:T.trim(),reviewSections:Tr,includeScore:de})});if(!J.ok){const Qe=await J.json().catch(()=>({}));throw new Error(Qe.error||"Failed to analyze blueprint")}if(!J.body)throw new Error("No response body");const fe=J.body.getReader(),ne=new TextDecoder;let ke="",ze="";for(;;){const{done:Qe,value:pr}=await fe.read();if(Qe)break;ze+=ne.decode(pr,{stream:!0});let Vd;for(;(Vd=ze.indexOf(`
`))!==-1;){let Wn=ze.slice(0,Vd);if(ze=ze.slice(Vd+1),Wn.endsWith("\r")&&(Wn=Wn.slice(0,-1)),Wn.startsWith(":")||Wn.trim()===""||!Wn.startsWith("data: "))continue;const xv=Wn.slice(6).trim();if(xv==="[DONE]")break;try{const bv=(G=(q=(K=JSON.parse(xv).choices)==null?void 0:K[0])==null?void 0:q.delta)==null?void 0:G.content;bv&&(ke+=bv,D(ke))}catch{ze=Wn+`
`+ze;break}}}n({title:"Analysis complete!",description:"Your blueprint has been reviewed."})}catch(J){n({title:"Analysis failed",description:J instanceof Error?J.message:"Please try again.",variant:"destructive"})}finally{P(!1)}},[d,v,S,x,k,T,Tr,de,at,n]),la=async()=>{if(a&&t&&!Bn){n({title:"Permission denied",description:"Only the blueprint owner can edit this blueprint.",variant:"destructive"});return}if(d){if(!x.trim()){n({title:"Title required",description:a?"Add a blueprint title before saving changes.":"Add a blueprint title before publishing.",variant:"destructive"});return}if(at===0){n({title:"Select items",description:a?"Pick at least one item before saving changes.":"Pick at least one item before publishing.",variant:"destructive"});return}if(X.length>4){n({title:"Too many tags",description:"Please use 4 tags or fewer.",variant:"destructive"});return}if(X.length===0){n({title:"Tags required",description:"Add at least one tag so the wall can surface your blueprint.",variant:"destructive"});return}try{const F={};Object.entries(v).forEach(([ne,ke])=>{ke.length>0&&(F[ne]=ke.map(ze=>({name:ze,context:S[`${ne}::${ze}`]||void 0})))});const K=new Map;Object.entries(v).forEach(([ne,ke])=>{ke.forEach(ze=>{const Qe=Rr(ne,ze);K.set(Qe,{category:ne,name:ze,context:S[Qe]||void 0})})});const q=L.map(ne=>({id:ne.id,title:ne.title,description:ne.description||null,items:ne.itemKeys.map(ke=>K.get(ke)).filter(ke=>!!ke)})),G=new Set(q.flatMap(ne=>ne.items.map(ke=>`${ke.category}::${ke.name}`))),J=Array.from(K.entries()).filter(([ne])=>!G.has(ne)).map(([,ne])=>ne),fe=q.length>0?[...q,...J.length>0?[{id:"unassigned",title:"Unassigned",description:null,items:J}]:[]]:null;if(a&&t){const ne=await y.mutateAsync({blueprintId:t,title:x.trim(),selectedItems:F,steps:fe,mixNotes:k.trim()?k.trim():null,reviewPrompt:T.trim()?T.trim():null,llmReview:$,tags:X,isPublic:ae});b(X),r(`/blueprint/${ne.id}`)}else{const ne=await g.mutateAsync({inventoryId:d.id,title:x.trim(),selectedItems:F,steps:fe,mixNotes:k.trim()?k.trim():null,reviewPrompt:T.trim()?T.trim():null,llmReview:$,tags:X,isPublic:ae,sourceBlueprintId:null});b(X),r(`/blueprint/${ne.id}`)}}catch(F){n({title:a?"Update failed":"Publish failed",description:F instanceof Error?F.message:"Please try again.",variant:"destructive"})}}};return a&&l&&!Bn?o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Ot,{}),o.jsx("main",{className:"max-w-3xl mx-auto px-4 py-12",children:o.jsx(se,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:o.jsxs(ce,{className:"py-12 text-center space-y-3",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"You cannot edit this blueprint"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Only the original creator can make changes."}),o.jsx(xe,{to:`/blueprint/${l.id}`,children:o.jsx(O,{children:"Back to blueprint"})})]})})})]}):o.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[o.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none -z-10",children:[o.jsx("div",{className:"absolute -top-40 -right-40 w-[500px] h-[500px] bg-primary/8 rounded-full blur-3xl animate-drift"}),o.jsx("div",{className:"absolute top-1/2 -left-32 w-96 h-96 bg-accent/15 rounded-full blur-3xl animate-float"}),o.jsx("div",{className:"absolute -bottom-20 right-1/4 w-80 h-80 bg-secondary/10 rounded-full blur-3xl animate-pulse-soft"}),o.jsx("div",{className:"absolute top-20 right-20 w-4 h-4 bg-primary/20 rounded-full blur-sm animate-float-delayed"}),o.jsx("div",{className:"absolute top-40 right-40 w-2 h-2 bg-accent/30 rounded-full blur-sm animate-float-slow"}),o.jsx("div",{className:"absolute bottom-40 left-20 w-3 h-3 bg-primary/15 rounded-full blur-sm animate-drift"})]}),o.jsx(Ot,{}),o.jsxs("main",{className:"container mx-auto px-4 py-8 max-w-3xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs(xe,{to:a&&t?`/blueprint/${t}`:"/inventory",className:"inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground",children:[o.jsx(v_,{className:"h-4 w-4"}),a?"Back to blueprint":"Back to inventory"]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(O8,{onClick:()=>Ie(!0)}),o.jsx(R8,{onClick:()=>Se(!0)})]})]}),o.jsxs("div",{className:"text-center mb-12 pt-8 animate-fade-in",children:[o.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-black tracking-tight mb-4 relative inline-block",children:[o.jsxs("span",{className:"relative inline-block",style:{fontFamily:"'Impact', 'Haettenschweiler', 'Franklin Gothic Bold', 'Charcoal', 'Helvetica Inserat', sans-serif",letterSpacing:"0.06em"},children:[o.jsx("span",{className:"absolute inset-0 text-border/40",style:{transform:"translate(4px, 4px)"},"aria-hidden":"true",children:oa.toUpperCase()}),o.jsx("span",{className:"absolute inset-0 text-border/60",style:{transform:"translate(2px, 2px)"},"aria-hidden":"true",children:oa.toUpperCase()}),o.jsx("span",{className:"text-gradient-themed animate-shimmer bg-[length:200%_auto] relative",children:oa.toUpperCase()})]}),o.jsx("span",{className:"absolute -inset-4 bg-primary/10 blur-2xl rounded-full animate-pulse-soft -z-10"})]}),o.jsx("p",{className:"text-lg text-muted-foreground max-w-md mx-auto",children:a?"Update your blueprint, regenerate the review, and save the changes.":"Build your blueprint from this inventory"})]}),Wl?o.jsx(se,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:o.jsxs(ce,{className:"p-6",children:[o.jsx(be,{className:"h-6 w-48"}),o.jsx(be,{className:"h-24 w-full mt-4"})]})}):d?o.jsxs("div",{className:"space-y-6",children:[yt&&o.jsx(A8,{onStartTour:()=>{en(!1),Ie(!0)},onDismiss:()=>en(!1)}),o.jsx(f8,{currentStep:$?3:at>0?2:1}),o.jsx("section",{className:"animate-fade-in",style:{animationDelay:"0.05s"},children:o.jsxs("div",{className:"bg-card/60 backdrop-blur-glass rounded-2xl border border-border/50 overflow-hidden",children:[o.jsx("div",{className:"p-4 border-b border-border/30",children:o.jsx(Me,{value:x,onChange:F=>w(F.target.value),placeholder:"Name your blueprint...",className:"text-xl font-bold bg-transparent border-none focus-visible:ring-2 focus-visible:ring-primary/50 h-14"})}),o.jsx("div",{className:"p-4","data-help-id":"picker",children:o.jsx(l8,{categories:rr,selectedItems:v,onToggleItem:Kl,onAddCustomItem:aa})})]})}),o.jsx("section",{className:"animate-fade-in",style:{animationDelay:"0.1s"},children:o.jsxs(se,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:[o.jsx(Ge,{children:o.jsx(vt,{children:"Steps"})}),o.jsxs(ce,{className:"space-y-4",children:[o.jsx(C8,{steps:L,activeStepId:_e,onSetActive:V,onUpdateStep:qd,onRemoveStep:Yl,onAddStep:zd,onReorderSteps:Ql,onRemoveItem:zn,onUpdateItemContext:Gl,itemContexts:S}),at>0&&o.jsx("div",{className:"flex justify-end pt-2",children:o.jsx(O,{type:"button",variant:"ghost",onClick:qn,children:"Clear all selections"})})]})]})}),o.jsx("section",{className:"flex justify-center py-8 animate-fade-in",style:{animationDelay:"0.2s"},"data-help-id":"mix",children:o.jsx(a8,{onClick:Wd,disabled:at===0,isLoading:Z,itemCount:at})}),o.jsx("section",{className:"animate-fade-in",style:{animationDelay:"0.15s"},children:o.jsx(Bg,{children:o.jsxs(se,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:[o.jsx(zg,{asChild:!0,children:o.jsxs(Ge,{className:"cursor-pointer hover:bg-muted/20 transition-colors",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(vt,{className:"text-base flex items-center gap-2",children:[o.jsx(x_,{className:"h-4 w-4 text-muted-foreground"}),"Review Options"]}),o.jsx(Vo,{className:"h-4 w-4 text-muted-foreground transition-transform [[data-state=open]>&]:rotate-180"})]}),o.jsx("p",{className:"text-xs text-muted-foreground text-left",children:"Mix notes, review focus, custom sections"})]})}),o.jsx(qg,{children:o.jsx(ce,{className:"pt-0 pb-4 px-4 space-y-4",children:o.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{htmlFor:"mix-notes",children:"Mix notes (optional)"}),o.jsx(tr,{id:"mix-notes",value:k,onChange:F=>C(F.target.value),placeholder:"Any additional context for your mix...",rows:3})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{htmlFor:"review-prompt",children:"Review focus (optional)"}),o.jsx(tr,{id:"review-prompt",value:T,onChange:F=>A(F.target.value),placeholder:"What should the AI focus on?",rows:3})]}),o.jsxs("div",{className:"space-y-3 sm:col-span-2",children:[o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{children:[o.jsx(Ue,{children:"Review sections"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Overview is always included."})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-xs font-medium",children:"Include score"}),o.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Adds a 1100 score in Overview."})]}),o.jsx(ki,{checked:de,onCheckedChange:ge,className:"scale-90"})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx(Ae,{variant:"secondary",children:Cs}),E.map(F=>o.jsxs(Ae,{variant:"secondary",className:"gap-1",children:[F,o.jsx(O,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4",onClick:()=>{B(K=>K.filter(q=>q!==F)),U("")},"aria-label":"Remove section",children:o.jsx(zt,{className:"h-3 w-3"})})]},F))]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Me,{value:ie,onChange:F=>Q(F.target.value),placeholder:"Add custom section",onKeyDown:F=>{if(F.key==="Enter"){F.preventDefault();const K=Bu(ie);if(!K)return;if(K.toLowerCase()===Cs.toLowerCase()){Q("");return}if(E.some(q=>q.toLowerCase()===K.toLowerCase())){Q("");return}if(E.length>=Wa){U(`You can add up to ${jl} sections total.`);return}B(q=>[...q,K]),Q(""),U("")}}}),o.jsx(O,{type:"button",variant:"outline",onClick:()=>{const F=Bu(ie);if(F){if(F.toLowerCase()===Cs.toLowerCase()){Q("");return}if(E.some(K=>K.toLowerCase()===F.toLowerCase())){Q("");return}if(E.length>=Wa){U(`You can add up to ${jl} sections total.`);return}B(K=>[...K,F]),Q(""),U("")}},children:"Add"})]}),me&&o.jsx("p",{className:"text-sm text-destructive",children:me})]})]})})})]})})}),Z&&o.jsx("section",{className:"animate-fade-in-scale",children:o.jsx(se,{className:"overflow-hidden bg-card/60 backdrop-blur-glass border-primary/20",children:o.jsx(ce,{className:"p-0",children:o.jsx(LN,{})})})}),$&&!Z&&o.jsx("section",{className:"animate-fade-in-up",children:o.jsx(qp,{review:$,sectionOrder:Tr})}),$&&Z&&o.jsx("section",{className:"animate-fade-in",children:o.jsx(qp,{review:$,isStreaming:!0,sectionOrder:Tr})}),at>0&&!Z&&o.jsx("section",{className:"animate-fade-in",style:{animationDelay:"0.25s"},children:o.jsxs(se,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:[o.jsx(Ge,{children:o.jsxs(vt,{className:"flex items-center gap-2",children:[o.jsx(Mn,{className:"h-5 w-5 text-primary"}),a?"Save changes":"Publish Blueprint"]})}),o.jsxs(ce,{className:"space-y-4",children:[m.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(F=>o.jsxs(O,{type:"button",size:"sm",variant:"outline",onClick:()=>I(K=>K.includes(F)?K:[...K,F]),children:["#",F]},F))}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{children:"Tags"}),o.jsx(hv,{value:X,onChange:I,suggestions:f||[],maxTags:12})]}),o.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 px-4 py-3",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Public blueprint"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Public blueprints appear on the wall."})]}),o.jsx(ki,{checked:ae,onCheckedChange:M})]}),o.jsxs(O,{onClick:la,disabled:a?y.isPending:g.isPending,className:"w-full gap-2",size:"lg",children:[o.jsx(Mn,{className:"h-4 w-4"}),a?"Save Changes":"Publish Blueprint"]})]})]})}),o.jsx("footer",{className:"text-center py-8 text-sm text-muted-foreground border-t border-border/30 mt-8",children:o.jsx("p",{children:"Blueprint analysis is for informational purposes only. Always do your own research."})})]}):o.jsx(se,{className:"bg-card/60 backdrop-blur-glass border-border/50",children:o.jsx(ce,{className:"py-12 text-center",children:"Inventory not found."})})]}),o.jsx(T8,{isOpen:Ne,onClose:()=>Se(!1),onStartTour:()=>{Se(!1),Ie(!0)}}),o.jsx(P8,{isActive:ot,onComplete:()=>Ie(!1),onSkip:()=>Ie(!1)})]})}function $8(e){if(typeof e=="string")return e;if(!e||typeof e!="object")return String(e);const t=typeof e.name=="string"?e.name:"Untitled",r=typeof e.context=="string"&&e.context.trim()?e.context.trim():"";return r?`${t} [${r}]`:t}function F8(e){const t=typeof e.name=="string"?e.name:"Untitled",r=typeof e.context=="string"&&e.context.trim()?e.context.trim():"";return r?`${t} [${r}]`:t}function U8(e){return!e||typeof e!="object"||Array.isArray(e)?[]:Object.entries(e).filter(([,t])=>Array.isArray(t))}function B8(e){return!e||typeof e!="object"?[]:Array.isArray(e)?e.filter(t=>!!t&&typeof t=="object"):[]}function z8(){var y,x,w;const e=Fs(),{blueprintId:t}=ea(),{data:r,isLoading:n}=Qg(t),{data:s,isLoading:i}=bF(t),a=_F(),l=Fk(),{toast:c}=Vt(),{user:u}=Ee(),[d,h]=p.useState(""),f=r?B8(r.steps):[],m=!!(u&&r&&u.id===r.creator_user_id),b=async()=>{if(r)try{await l.mutateAsync({blueprintId:r.id,liked:r.user_liked})}catch(v){c({title:"Action failed",description:v instanceof Error?v.message:"Please try again.",variant:"destructive"})}},g=async()=>{if(t&&d.trim())try{await a.mutateAsync({blueprintId:t,content:d.trim()}),h("")}catch(v){c({title:"Comment failed",description:v instanceof Error?v.message:"Please try again.",variant:"destructive"})}};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Ot,{}),o.jsx("main",{className:"max-w-4xl mx-auto px-4 py-8 space-y-6",children:n?o.jsxs(se,{children:[o.jsx(Ge,{children:o.jsx(be,{className:"h-6 w-48"})}),o.jsx(ce,{children:o.jsx(be,{className:"h-24 w-full"})})]}):r?o.jsxs(o.Fragment,{children:[o.jsxs("section",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(O,{variant:"ghost",size:"icon",onClick:()=>e(-1),"aria-label":"Go back",children:o.jsx(v_,{className:"h-4 w-4"})}),o.jsx("h1",{className:"text-3xl font-semibold",children:r.title})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.map(v=>o.jsxs(Ae,{variant:"outline",children:["#",v.slug]},v.id))})]}),o.jsxs(se,{children:[o.jsx(Ge,{className:"space-y-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(xe,{to:`/u/${r.creator_user_id}`,className:"flex items-center gap-3 hover:opacity-80 transition-opacity",children:[o.jsxs(Gr,{className:"h-10 w-10",children:[o.jsx(Yr,{src:((y=r.creator_profile)==null?void 0:y.avatar_url)||void 0}),o.jsx(Qr,{children:(((x=r.creator_profile)==null?void 0:x.display_name)||"U").slice(0,2).toUpperCase()})]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:((w=r.creator_profile)==null?void 0:w.display_name)||"Anonymous"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:_i(new Date(r.created_at),{addSuffix:!0})})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[m&&o.jsx(xe,{to:`/blueprint/${r.id}/edit`,children:o.jsx(O,{variant:"outline",size:"sm",children:"Edit"})}),o.jsxs(O,{variant:"ghost",size:"sm",className:r.user_liked?"text-red-500":"text-muted-foreground",onClick:b,children:[o.jsx(At,{className:`h-4 w-4 ${r.user_liked?"fill-current":""}`}),o.jsx("span",{className:"ml-1 text-xs",children:r.likes_count})]})]})]})}),o.jsxs(ce,{className:"space-y-4",children:[r.mix_notes&&o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Mix notes"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:r.mix_notes})]}),o.jsx("div",{children:f.length>0?o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Steps"}),o.jsx("div",{className:"mt-3 space-y-3",children:f.map((v,_)=>{var S,j;return o.jsxs("div",{className:"rounded-lg border border-border/60 p-3",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("p",{className:"text-sm font-medium",children:(S=v.title)!=null&&S.trim()?v.title:`Step ${_+1}`}),o.jsxs(Ae,{variant:"secondary",className:"text-xs",children:[((j=v.items)==null?void 0:j.length)||0," items"]})]}),v.description&&o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:v.description}),o.jsx("div",{className:"mt-2 space-y-2",children:v.items&&v.items.length>0?v.items.map((k,C)=>o.jsxs("div",{className:"text-sm",children:[o.jsx("p",{className:"text-sm",children:F8(k)}),k.category&&o.jsx("p",{className:"text-xs text-muted-foreground",children:k.category})]},`${v.id||_}-${C}`)):o.jsx("p",{className:"text-xs text-muted-foreground",children:"No items assigned."})})]},v.id||`${v.title}-${_}`)})})]}):o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-semibold",children:"Selected items"}),o.jsx("div",{className:"mt-2 space-y-2",children:U8(r.selected_items).map(([v,_])=>o.jsxs("div",{className:"rounded-lg border border-border/60 p-3",children:[o.jsx("p",{className:"text-sm font-medium",children:v}),o.jsx("p",{className:"text-sm text-muted-foreground",children:_.length>0?_.map($8).join(", "):"No items listed"})]},v))})]})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"LLM Review"}),o.jsx("div",{className:"mt-3",children:o.jsx(qp,{review:r.llm_review||""})})]})]})]}),o.jsxs(se,{children:[o.jsx(Ge,{children:o.jsx(vt,{children:"Comments"})}),o.jsxs(ce,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(tr,{value:d,onChange:v=>h(v.target.value),placeholder:"Share your thoughts",rows:3}),o.jsx(O,{onClick:g,disabled:a.isPending,children:"Post Comment"})]}),i?o.jsx(be,{className:"h-20 w-full"}):s&&s.length>0?o.jsx("div",{className:"space-y-3",children:s.map(v=>{var _,S,j;return o.jsxs("div",{className:"rounded-lg border border-border/60 p-3",children:[o.jsxs(xe,{to:`/u/${v.user_id}`,className:"flex items-center gap-2 hover:opacity-80 transition-opacity w-fit",children:[o.jsxs(Gr,{className:"h-8 w-8",children:[o.jsx(Yr,{src:((_=v.profile)==null?void 0:_.avatar_url)||void 0}),o.jsx(Qr,{children:(((S=v.profile)==null?void 0:S.display_name)||"U").slice(0,2).toUpperCase()})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:((j=v.profile)==null?void 0:j.display_name)||"Anonymous"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:_i(new Date(v.created_at),{addSuffix:!0})})]})]}),o.jsx("p",{className:"text-sm mt-2",children:v.content})]},v.id)})}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"No comments yet."})]})]})]}):o.jsx(se,{children:o.jsx(ce,{className:"py-12 text-center",children:"Blueprint not found."})})})]})}const q8=!1,W8="https://piszvseyaefxekubphhf.supabase.co/functions/v1/analyze-blueprint";function V8(e){if(!e||typeof e!="object"||Array.isArray(e))return[];const t=e.categories;return Array.isArray(t)?t.map(r=>({name:typeof r.name=="string"?r.name:"Untitled",items:Array.isArray(r.items)?r.items.filter(n=>typeof n=="string"):[]})).filter(r=>r.name.trim().length>0):[]}function H8({inventory:e,initialTitle:t,initialSelectedItems:r,initialMixNotes:n,initialReviewPrompt:s,initialReview:i,sourceBlueprintId:a}){const l=Fs(),{toast:c}=Vt(),{session:u}=Ee(),{data:d}=uv(),{recentTags:h,addRecentTags:f}=fv(),m=$k(),[b,g]=p.useState(t||e.title),[y,x]=p.useState(r||{}),[w,v]=p.useState(n||""),[_,S]=p.useState(s||""),[j,k]=p.useState(i||""),[C,T]=p.useState([]),[A,$]=p.useState(!0),[D,X]=p.useState(!1),[I,ae]=p.useState(()=>V8(e.generated_schema)),[M,Z]=p.useState({}),P=p.useMemo(()=>gv(e.review_sections),[e]),E=p.useMemo(()=>Object.values(y).reduce((U,de)=>U+de.length,0),[y]),B=(U,de)=>{x(ge=>{const L=new Set(ge[U]||[]);return L.has(de)?L.delete(de):L.add(de),{...ge,[U]:Array.from(L)}})},ie=U=>{var ge;const de=(ge=M[U])==null?void 0:ge.trim();de&&(ae(L=>L.map(ue=>ue.name===U?{...ue,items:ue.items.includes(de)?ue.items:[...ue.items,de]}:ue)),Z(L=>({...L,[U]:""})))},Q=async()=>{var de,ge,L;if(!b.trim()){c({title:"Title required",description:"Add a blueprint title before generating the review.",variant:"destructive"});return}if(E===0){c({title:"No items selected",description:"Select at least one item before generating the review.",variant:"destructive"});return}const U={};Object.entries(y).forEach(([ue,_e])=>{_e.length>0&&(U[ue]=_e)}),X(!0),k("");try{const ue=await fetch(W8,{method:"POST",headers:{"Content-Type":"application/json",Authorization:q8&&(u!=null&&u.access_token)?`Bearer ${u.access_token}`:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBpc3p2c2V5YWVmeGVrdWJwaGhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwODE3NTEsImV4cCI6MjA4NDY1Nzc1MX0.odmCphs9gpipbjF7zp639J0r8s48SYHnpNsjQvfICSc"},body:JSON.stringify({title:b.trim(),inventoryTitle:e.title,selectedItems:U,mixNotes:w.trim(),reviewPrompt:_.trim(),reviewSections:P,includeScore:e.include_score??!0})});if(!ue.ok){const Ne=await ue.json().catch(()=>({}));throw new Error(Ne.error||"Failed to analyze blueprint")}if(!ue.body)throw new Error("No response body");const _e=ue.body.getReader(),V=new TextDecoder;let te="",re="";for(;;){const{done:Ne,value:Se}=await _e.read();if(Ne)break;re+=V.decode(Se,{stream:!0});let ot;for(;(ot=re.indexOf(`
`))!==-1;){let Ie=re.slice(0,ot);if(re=re.slice(ot+1),Ie.endsWith("\r")&&(Ie=Ie.slice(0,-1)),Ie.startsWith(":")||Ie.trim()===""||!Ie.startsWith("data: "))continue;const yt=Ie.slice(6).trim();if(yt==="[DONE]")break;try{const rr=(L=(ge=(de=JSON.parse(yt).choices)==null?void 0:de[0])==null?void 0:ge.delta)==null?void 0:L.content;rr&&(te+=rr,k(te))}catch{re=Ie+`
`+re;break}}}}catch(ue){c({title:"Analysis failed",description:ue instanceof Error?ue.message:"Please try again.",variant:"destructive"})}finally{X(!1)}},me=async()=>{if(!b.trim()){c({title:"Title required",description:"Add a blueprint title before publishing.",variant:"destructive"});return}if(E===0){c({title:"Select items",description:"Pick at least one item before publishing.",variant:"destructive"});return}if(!j.trim()){c({title:"Generate review",description:"Generate the review before publishing.",variant:"destructive"});return}if(C.length>4){c({title:"Too many tags",description:"Please use 4 tags or fewer.",variant:"destructive"});return}if(C.length===0){c({title:"Tags required",description:"Add at least one tag so the wall can surface your blueprint.",variant:"destructive"});return}try{const U={};Object.entries(y).forEach(([ge,L])=>{L.length>0&&(U[ge]=L)});const de=await m.mutateAsync({inventoryId:e.id,title:b.trim(),selectedItems:U,steps:null,mixNotes:w.trim()?w.trim():null,reviewPrompt:_.trim()?_.trim():null,llmReview:j,tags:C,isPublic:A,sourceBlueprintId:a||null});f(C),l(`/blueprint/${de.id}`)}catch(U){c({title:"Publish failed",description:U instanceof Error?U.message:"Please try again.",variant:"destructive"})}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(se,{children:[o.jsx(Ge,{children:o.jsx(vt,{children:"Create Blueprint"})}),o.jsxs(ce,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{htmlFor:"blueprint-title",children:"Blueprint title"}),o.jsx(Me,{id:"blueprint-title",value:b,onChange:U=>g(U.target.value),placeholder:"Name your blueprint"})]}),o.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{htmlFor:"mix-notes",children:"Mix notes"}),o.jsx(tr,{id:"mix-notes",value:w,onChange:U=>v(U.target.value),placeholder:"Optional notes for your mix",rows:4})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{htmlFor:"review-prompt",children:"LLM review focus"}),o.jsx(tr,{id:"review-prompt",value:_,onChange:U=>S(U.target.value),placeholder:"What should the review focus on?",rows:4})]})]})]})]}),o.jsxs(se,{children:[o.jsx(Ge,{children:o.jsx(vt,{children:"Inventory"})}),o.jsx(ce,{className:"space-y-6",children:I.length===0?o.jsx("p",{className:"text-sm text-muted-foreground",children:"No inventory items yet. Add categories in the inventory builder."}):I.map(U=>{var de;return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"font-semibold",children:U.name}),o.jsxs(Ae,{variant:"secondary",children:[((de=y[U.name])==null?void 0:de.length)||0," selected"]})]}),o.jsx("div",{className:"grid gap-2 sm:grid-cols-2",children:U.items.map(ge=>o.jsxs("label",{className:"flex items-center gap-2 rounded-md border border-border/60 px-3 py-2 text-sm",children:[o.jsx(Mg,{checked:(y[U.name]||[]).includes(ge),onCheckedChange:()=>B(U.name,ge)}),o.jsx("span",{children:ge})]},`${U.name}-${ge}`))}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Me,{value:M[U.name]||"",onChange:ge=>Z(L=>({...L,[U.name]:ge.target.value})),placeholder:`Add item to ${U.name}`}),o.jsx(O,{type:"button",variant:"outline",onClick:()=>ie(U.name),children:"Add"})]})]},U.name)})})]}),D&&o.jsx(se,{className:"overflow-hidden bg-card/60 backdrop-blur-glass border-primary/20",children:o.jsx(ce,{className:"p-0",children:o.jsx(LN,{})})}),o.jsxs(se,{children:[o.jsx(Ge,{children:o.jsx(vt,{children:"LLM Review"})}),o.jsxs(ce,{className:"space-y-4",children:[o.jsx(O,{type:"button",onClick:Q,disabled:D||m.isPending,children:D?"Mixing...":"Mix Blueprint"}),o.jsx(tr,{value:j,onChange:U=>k(U.target.value),rows:12})]})]}),o.jsxs(se,{children:[o.jsx(Ge,{children:o.jsx(vt,{children:"Publish"})}),o.jsxs(ce,{className:"space-y-4",children:[h.length>0&&o.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(U=>o.jsxs(O,{type:"button",size:"sm",variant:"outline",onClick:()=>T(de=>de.includes(U)?de:[...de,U]),children:["#",U]},U))}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{children:"Tags"}),o.jsx(hv,{value:C,onChange:T,suggestions:d||[],maxTags:12})]}),o.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 px-4 py-3",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:"Public blueprint"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Public blueprints appear on the wall."})]}),o.jsx(ki,{checked:A,onCheckedChange:$})]}),o.jsx(O,{type:"button",onClick:me,disabled:m.isPending||D,className:"w-full",children:"Publish Blueprint"})]})]})]})}function K8(e){return!e||typeof e!="object"||Array.isArray(e)?{}:Object.fromEntries(Object.entries(e).filter(([,t])=>Array.isArray(t)))}function G8(){const{blueprintId:e}=ea(),{data:t,isLoading:r}=Qg(e),{data:n,isLoading:s}=dv((t==null?void 0:t.inventory_id)||void 0),i=p.useMemo(()=>t?K8(t.selected_items):{},[t]),a=r||s;return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Ot,{}),o.jsx("main",{className:"max-w-4xl mx-auto px-4 py-8 space-y-6",children:a?o.jsx(se,{children:o.jsxs(ce,{className:"p-6",children:[o.jsx(be,{className:"h-6 w-48"}),o.jsx(be,{className:"h-24 w-full mt-4"})]})}):n&&t?o.jsxs(o.Fragment,{children:[o.jsxs("section",{className:"space-y-2",children:[o.jsx("h1",{className:"text-3xl font-semibold",children:"Remix Blueprint"}),o.jsxs("p",{className:"text-muted-foreground",children:["Source: ",t.title]})]}),o.jsx(H8,{inventory:n,initialTitle:`${t.title} Remix`,initialSelectedItems:i,initialMixNotes:t.mix_notes,initialReviewPrompt:t.review_prompt,initialReview:t.llm_review,sourceBlueprintId:t.id})]}):o.jsx(se,{children:o.jsx(ce,{className:"py-12 text-center",children:"Blueprint or inventory not found."})})})]})}const Y8=()=>{const e=$s();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),o.jsxs("div",{className:"min-h-screen bg-muted",children:[o.jsx(Ot,{}),o.jsx("div",{className:"flex min-h-[70vh] items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),o.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),o.jsx(xe,{to:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})]})};function xn({children:e}){const{user:t,isLoading:r}=Ee();return r?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"})}):t?o.jsx(o.Fragment,{children:e}):o.jsx(fl,{to:"/auth",replace:!0})}const Q8=new iI,J8=()=>o.jsx(uI,{client:Q8,children:o.jsx(sD,{children:o.jsxs(zA,{children:[o.jsx(NR,{}),o.jsx(sP,{}),o.jsx(yO,{basename:"/remix-of-stackwise-advisor/",children:o.jsxs(uO,{children:[o.jsx(wt,{path:"/",element:o.jsx(x5,{})}),o.jsx(wt,{path:"/explore",element:o.jsx(U5,{})}),o.jsx(wt,{path:"/blueprints",element:o.jsx($F,{})}),o.jsx(wt,{path:"/wall",element:o.jsx(N5,{})}),o.jsx(wt,{path:"/wall/:postId",element:o.jsx(xn,{children:o.jsx(MU,{})})}),o.jsx(wt,{path:"/auth",element:o.jsx(WF,{})}),o.jsx(wt,{path:"/inventory",element:o.jsx(xn,{children:o.jsx(zU,{})})}),o.jsx(wt,{path:"/inventory/create",element:o.jsx(xn,{children:o.jsx(s8,{})})}),o.jsx(wt,{path:"/inventory/:inventoryId",element:o.jsx(xn,{children:o.jsx(o8,{})})}),o.jsx(wt,{path:"/inventory/:inventoryId/build",element:o.jsx(xn,{children:o.jsx(yx,{})})}),o.jsx(wt,{path:"/blueprint/:blueprintId/edit",element:o.jsx(xn,{children:o.jsx(yx,{})})}),o.jsx(wt,{path:"/blueprint/:blueprintId",element:o.jsx(z8,{})}),o.jsx(wt,{path:"/blueprint/:blueprintId/remix",element:o.jsx(xn,{children:o.jsx(G8,{})})}),o.jsx(wt,{path:"/settings",element:o.jsx(xn,{children:o.jsx(XF,{})})}),o.jsx(wt,{path:"/u/:userId",element:o.jsx(kU,{})}),o.jsx(wt,{path:"/tags",element:o.jsx(xn,{children:o.jsx(EU,{})})}),o.jsx(wt,{path:"*",element:o.jsx(Y8,{})})]})})]})})});qb(document.getElementById("root")).render(o.jsx(J8,{}));
